var QN=e=>{throw TypeError(e)};var F0=(e,t,r)=>t.has(e)||QN("Cannot "+r);var ve=(e,t,r)=>(F0(e,t,"read from private field"),r?r.call(e):t.get(e)),Et=(e,t,r)=>t.has(e)?QN("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),mt=(e,t,r,n)=>(F0(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),xn=(e,t,r)=>(F0(e,t,"access private method"),r);var up=(e,t,r,n)=>({set _(a){mt(e,t,a,r)},get _(){return ve(e,t,n)}});function u8(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var dp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function It(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var LR={exports:{}},Fy={},BR={exports:{}},St={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zm=Symbol.for("react.element"),d8=Symbol.for("react.portal"),f8=Symbol.for("react.fragment"),h8=Symbol.for("react.strict_mode"),m8=Symbol.for("react.profiler"),p8=Symbol.for("react.provider"),g8=Symbol.for("react.context"),v8=Symbol.for("react.forward_ref"),y8=Symbol.for("react.suspense"),x8=Symbol.for("react.memo"),b8=Symbol.for("react.lazy"),JN=Symbol.iterator;function w8(e){return e===null||typeof e!="object"?null:(e=JN&&e[JN]||e["@@iterator"],typeof e=="function"?e:null)}var FR={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},zR=Object.assign,UR={};function Sd(e,t,r){this.props=e,this.context=t,this.refs=UR,this.updater=r||FR}Sd.prototype.isReactComponent={};Sd.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Sd.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function VR(){}VR.prototype=Sd.prototype;function F_(e,t,r){this.props=e,this.context=t,this.refs=UR,this.updater=r||FR}var z_=F_.prototype=new VR;z_.constructor=F_;zR(z_,Sd.prototype);z_.isPureReactComponent=!0;var ZN=Array.isArray,WR=Object.prototype.hasOwnProperty,U_={current:null},HR={key:!0,ref:!0,__self:!0,__source:!0};function qR(e,t,r){var n,a={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)WR.call(t,n)&&!HR.hasOwnProperty(n)&&(a[n]=t[n]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)a[n]===void 0&&(a[n]=l[n]);return{$$typeof:zm,type:e,key:i,ref:o,props:a,_owner:U_.current}}function j8(e,t){return{$$typeof:zm,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function V_(e){return typeof e=="object"&&e!==null&&e.$$typeof===zm}function _8(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var eP=/\/+/g;function z0(e,t){return typeof e=="object"&&e!==null&&e.key!=null?_8(""+e.key):t.toString(36)}function ug(e,t,r,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case zm:case d8:o=!0}}if(o)return o=e,a=a(o),e=n===""?"."+z0(o,0):n,ZN(a)?(r="",e!=null&&(r=e.replace(eP,"$&/")+"/"),ug(a,t,r,"",function(u){return u})):a!=null&&(V_(a)&&(a=j8(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(eP,"$&/")+"/")+e)),t.push(a)),1;if(o=0,n=n===""?".":n+":",ZN(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+z0(i,l);o+=ug(i,t,r,c,a)}else if(c=w8(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+z0(i,l++),o+=ug(i,t,r,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function fp(e,t,r){if(e==null)return e;var n=[],a=0;return ug(e,n,"","",function(i){return t.call(r,i,a++)}),n}function S8(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Fn={current:null},dg={transition:null},C8={ReactCurrentDispatcher:Fn,ReactCurrentBatchConfig:dg,ReactCurrentOwner:U_};function KR(){throw Error("act(...) is not supported in production builds of React.")}St.Children={map:fp,forEach:function(e,t,r){fp(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return fp(e,function(){t++}),t},toArray:function(e){return fp(e,function(t){return t})||[]},only:function(e){if(!V_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};St.Component=Sd;St.Fragment=f8;St.Profiler=m8;St.PureComponent=F_;St.StrictMode=h8;St.Suspense=y8;St.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=C8;St.act=KR;St.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=zR({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=U_.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)WR.call(t,c)&&!HR.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:zm,type:e.type,key:a,ref:i,props:n,_owner:o}};St.createContext=function(e){return e={$$typeof:g8,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:p8,_context:e},e.Consumer=e};St.createElement=qR;St.createFactory=function(e){var t=qR.bind(null,e);return t.type=e,t};St.createRef=function(){return{current:null}};St.forwardRef=function(e){return{$$typeof:v8,render:e}};St.isValidElement=V_;St.lazy=function(e){return{$$typeof:b8,_payload:{_status:-1,_result:e},_init:S8}};St.memo=function(e,t){return{$$typeof:x8,type:e,compare:t===void 0?null:t}};St.startTransition=function(e){var t=dg.transition;dg.transition={};try{e()}finally{dg.transition=t}};St.unstable_act=KR;St.useCallback=function(e,t){return Fn.current.useCallback(e,t)};St.useContext=function(e){return Fn.current.useContext(e)};St.useDebugValue=function(){};St.useDeferredValue=function(e){return Fn.current.useDeferredValue(e)};St.useEffect=function(e,t){return Fn.current.useEffect(e,t)};St.useId=function(){return Fn.current.useId()};St.useImperativeHandle=function(e,t,r){return Fn.current.useImperativeHandle(e,t,r)};St.useInsertionEffect=function(e,t){return Fn.current.useInsertionEffect(e,t)};St.useLayoutEffect=function(e,t){return Fn.current.useLayoutEffect(e,t)};St.useMemo=function(e,t){return Fn.current.useMemo(e,t)};St.useReducer=function(e,t,r){return Fn.current.useReducer(e,t,r)};St.useRef=function(e){return Fn.current.useRef(e)};St.useState=function(e){return Fn.current.useState(e)};St.useSyncExternalStore=function(e,t,r){return Fn.current.useSyncExternalStore(e,t,r)};St.useTransition=function(){return Fn.current.useTransition()};St.version="18.3.1";BR.exports=St;var w=BR.exports;const $=It(w),W_=u8({__proto__:null,default:$},[w]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N8=w,P8=Symbol.for("react.element"),k8=Symbol.for("react.fragment"),E8=Object.prototype.hasOwnProperty,A8=N8.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,O8={key:!0,ref:!0,__self:!0,__source:!0};function YR(e,t,r){var n,a={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)E8.call(t,n)&&!O8.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:P8,type:e,key:i,ref:o,props:a,_owner:A8.current}}Fy.Fragment=k8;Fy.jsx=YR;Fy.jsxs=YR;LR.exports=Fy;var s=LR.exports,GR={exports:{}},va={},XR={exports:{}},QR={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(L,B){var z=L.length;L.push(B);e:for(;0<z;){var Z=z-1>>>1,ee=L[Z];if(0<a(ee,B))L[Z]=B,L[z]=ee,z=Z;else break e}}function r(L){return L.length===0?null:L[0]}function n(L){if(L.length===0)return null;var B=L[0],z=L.pop();if(z!==B){L[0]=z;e:for(var Z=0,ee=L.length,le=ee>>>1;Z<le;){var V=2*(Z+1)-1,I=L[V],F=V+1,q=L[F];if(0>a(I,z))F<ee&&0>a(q,I)?(L[Z]=q,L[F]=z,Z=F):(L[Z]=I,L[V]=z,Z=V);else if(F<ee&&0>a(q,z))L[Z]=q,L[F]=z,Z=F;else break e}}return B}function a(L,B){var z=L.sortIndex-B.sortIndex;return z!==0?z:L.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,f=null,h=3,m=!1,y=!1,g=!1,p=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(L){for(var B=r(u);B!==null;){if(B.callback===null)n(u);else if(B.startTime<=L)n(u),B.sortIndex=B.expirationTime,t(c,B);else break;B=r(u)}}function _(L){if(g=!1,b(L),!y)if(r(c)!==null)y=!0,M(j);else{var B=r(u);B!==null&&D(_,B.startTime-L)}}function j(L,B){y=!1,g&&(g=!1,v(P),P=-1),m=!0;var z=h;try{for(b(B),f=r(c);f!==null&&(!(f.expirationTime>B)||L&&!A());){var Z=f.callback;if(typeof Z=="function"){f.callback=null,h=f.priorityLevel;var ee=Z(f.expirationTime<=B);B=e.unstable_now(),typeof ee=="function"?f.callback=ee:f===r(c)&&n(c),b(B)}else n(c);f=r(c)}if(f!==null)var le=!0;else{var V=r(u);V!==null&&D(_,V.startTime-B),le=!1}return le}finally{f=null,h=z,m=!1}}var S=!1,C=null,P=-1,N=5,E=-1;function A(){return!(e.unstable_now()-E<N)}function T(){if(C!==null){var L=e.unstable_now();E=L;var B=!0;try{B=C(!0,L)}finally{B?R():(S=!1,C=null)}}else S=!1}var R;if(typeof x=="function")R=function(){x(T)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,O=k.port2;k.port1.onmessage=T,R=function(){O.postMessage(null)}}else R=function(){p(T,0)};function M(L){C=L,S||(S=!0,R())}function D(L,B){P=p(function(){L(e.unstable_now())},B)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(L){L.callback=null},e.unstable_continueExecution=function(){y||m||(y=!0,M(j))},e.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<L?Math.floor(1e3/L):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(L){switch(h){case 1:case 2:case 3:var B=3;break;default:B=h}var z=h;h=B;try{return L()}finally{h=z}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(L,B){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var z=h;h=L;try{return B()}finally{h=z}},e.unstable_scheduleCallback=function(L,B,z){var Z=e.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?Z+z:Z):z=Z,L){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=z+ee,L={id:d++,callback:B,priorityLevel:L,startTime:z,expirationTime:ee,sortIndex:-1},z>Z?(L.sortIndex=z,t(u,L),r(c)===null&&L===r(u)&&(g?(v(P),P=-1):g=!0,D(_,z-Z))):(L.sortIndex=ee,t(c,L),y||m||(y=!0,M(j))),L},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(L){var B=h;return function(){var z=h;h=B;try{return L.apply(this,arguments)}finally{h=z}}}})(QR);XR.exports=QR;var T8=XR.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R8=w,pa=T8;function je(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var JR=new Set,hh={};function Zl(e,t){Nu(e,t),Nu(e+"Capture",t)}function Nu(e,t){for(hh[e]=t,e=0;e<t.length;e++)JR.add(t[e])}var ys=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_w=Object.prototype.hasOwnProperty,M8=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,tP={},rP={};function $8(e){return _w.call(rP,e)?!0:_w.call(tP,e)?!1:M8.test(e)?rP[e]=!0:(tP[e]=!0,!1)}function I8(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function D8(e,t,r,n){if(t===null||typeof t>"u"||I8(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function zn(e,t,r,n,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var yn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){yn[e]=new zn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];yn[t]=new zn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){yn[e]=new zn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){yn[e]=new zn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){yn[e]=new zn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){yn[e]=new zn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){yn[e]=new zn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){yn[e]=new zn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){yn[e]=new zn(e,5,!1,e.toLowerCase(),null,!1,!1)});var H_=/[\-:]([a-z])/g;function q_(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(H_,q_);yn[t]=new zn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(H_,q_);yn[t]=new zn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(H_,q_);yn[t]=new zn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){yn[e]=new zn(e,1,!1,e.toLowerCase(),null,!1,!1)});yn.xlinkHref=new zn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){yn[e]=new zn(e,1,!1,e.toLowerCase(),null,!0,!0)});function K_(e,t,r,n){var a=yn.hasOwnProperty(t)?yn[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(D8(t,r,a,n)&&(r=null),n||a===null?$8(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var As=R8.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,hp=Symbol.for("react.element"),Lc=Symbol.for("react.portal"),Bc=Symbol.for("react.fragment"),Y_=Symbol.for("react.strict_mode"),Sw=Symbol.for("react.profiler"),ZR=Symbol.for("react.provider"),eM=Symbol.for("react.context"),G_=Symbol.for("react.forward_ref"),Cw=Symbol.for("react.suspense"),Nw=Symbol.for("react.suspense_list"),X_=Symbol.for("react.memo"),qs=Symbol.for("react.lazy"),tM=Symbol.for("react.offscreen"),nP=Symbol.iterator;function sf(e){return e===null||typeof e!="object"?null:(e=nP&&e[nP]||e["@@iterator"],typeof e=="function"?e:null)}var Sr=Object.assign,U0;function Mf(e){if(U0===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);U0=t&&t[1]||""}return`
`+U0+e}var V0=!1;function W0(e,t){if(!e||V0)return"";V0=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),i=n.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{V0=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Mf(e):""}function L8(e){switch(e.tag){case 5:return Mf(e.type);case 16:return Mf("Lazy");case 13:return Mf("Suspense");case 19:return Mf("SuspenseList");case 0:case 2:case 15:return e=W0(e.type,!1),e;case 11:return e=W0(e.type.render,!1),e;case 1:return e=W0(e.type,!0),e;default:return""}}function Pw(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Bc:return"Fragment";case Lc:return"Portal";case Sw:return"Profiler";case Y_:return"StrictMode";case Cw:return"Suspense";case Nw:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case eM:return(e.displayName||"Context")+".Consumer";case ZR:return(e._context.displayName||"Context")+".Provider";case G_:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case X_:return t=e.displayName||null,t!==null?t:Pw(e.type)||"Memo";case qs:t=e._payload,e=e._init;try{return Pw(e(t))}catch{}}return null}function B8(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pw(t);case 8:return t===Y_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ao(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function rM(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function F8(e){var t=rM(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function mp(e){e._valueTracker||(e._valueTracker=F8(e))}function nM(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=rM(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Ag(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function kw(e,t){var r=t.checked;return Sr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function aP(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Ao(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function aM(e,t){t=t.checked,t!=null&&K_(e,"checked",t,!1)}function Ew(e,t){aM(e,t);var r=Ao(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Aw(e,t.type,r):t.hasOwnProperty("defaultValue")&&Aw(e,t.type,Ao(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function iP(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Aw(e,t,r){(t!=="number"||Ag(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var $f=Array.isArray;function nu(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Ao(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Ow(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(je(91));return Sr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function sP(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(je(92));if($f(r)){if(1<r.length)throw Error(je(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Ao(r)}}function iM(e,t){var r=Ao(t.value),n=Ao(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function oP(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function sM(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Tw(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?sM(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var pp,oM=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(pp=pp||document.createElement("div"),pp.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=pp.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function mh(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Uf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},z8=["Webkit","ms","Moz","O"];Object.keys(Uf).forEach(function(e){z8.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Uf[t]=Uf[e]})});function lM(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Uf.hasOwnProperty(e)&&Uf[e]?(""+t).trim():t+"px"}function cM(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=lM(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var U8=Sr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Rw(e,t){if(t){if(U8[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(je(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(je(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(je(61))}if(t.style!=null&&typeof t.style!="object")throw Error(je(62))}}function Mw(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $w=null;function Q_(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Iw=null,au=null,iu=null;function lP(e){if(e=Wm(e)){if(typeof Iw!="function")throw Error(je(280));var t=e.stateNode;t&&(t=Hy(t),Iw(e.stateNode,e.type,t))}}function uM(e){au?iu?iu.push(e):iu=[e]:au=e}function dM(){if(au){var e=au,t=iu;if(iu=au=null,lP(e),t)for(e=0;e<t.length;e++)lP(t[e])}}function fM(e,t){return e(t)}function hM(){}var H0=!1;function mM(e,t,r){if(H0)return e(t,r);H0=!0;try{return fM(e,t,r)}finally{H0=!1,(au!==null||iu!==null)&&(hM(),dM())}}function ph(e,t){var r=e.stateNode;if(r===null)return null;var n=Hy(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(je(231,t,typeof r));return r}var Dw=!1;if(ys)try{var of={};Object.defineProperty(of,"passive",{get:function(){Dw=!0}}),window.addEventListener("test",of,of),window.removeEventListener("test",of,of)}catch{Dw=!1}function V8(e,t,r,n,a,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var Vf=!1,Og=null,Tg=!1,Lw=null,W8={onError:function(e){Vf=!0,Og=e}};function H8(e,t,r,n,a,i,o,l,c){Vf=!1,Og=null,V8.apply(W8,arguments)}function q8(e,t,r,n,a,i,o,l,c){if(H8.apply(this,arguments),Vf){if(Vf){var u=Og;Vf=!1,Og=null}else throw Error(je(198));Tg||(Tg=!0,Lw=u)}}function ec(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function pM(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function cP(e){if(ec(e)!==e)throw Error(je(188))}function K8(e){var t=e.alternate;if(!t){if(t=ec(e),t===null)throw Error(je(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return cP(a),e;if(i===n)return cP(a),t;i=i.sibling}throw Error(je(188))}if(r.return!==n.return)r=a,n=i;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,n=i;break}if(l===n){o=!0,n=a,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=a;break}if(l===n){o=!0,n=i,r=a;break}l=l.sibling}if(!o)throw Error(je(189))}}if(r.alternate!==n)throw Error(je(190))}if(r.tag!==3)throw Error(je(188));return r.stateNode.current===r?e:t}function gM(e){return e=K8(e),e!==null?vM(e):null}function vM(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=vM(e);if(t!==null)return t;e=e.sibling}return null}var yM=pa.unstable_scheduleCallback,uP=pa.unstable_cancelCallback,Y8=pa.unstable_shouldYield,G8=pa.unstable_requestPaint,$r=pa.unstable_now,X8=pa.unstable_getCurrentPriorityLevel,J_=pa.unstable_ImmediatePriority,xM=pa.unstable_UserBlockingPriority,Rg=pa.unstable_NormalPriority,Q8=pa.unstable_LowPriority,bM=pa.unstable_IdlePriority,zy=null,Ii=null;function J8(e){if(Ii&&typeof Ii.onCommitFiberRoot=="function")try{Ii.onCommitFiberRoot(zy,e,void 0,(e.current.flags&128)===128)}catch{}}var li=Math.clz32?Math.clz32:tV,Z8=Math.log,eV=Math.LN2;function tV(e){return e>>>=0,e===0?32:31-(Z8(e)/eV|0)|0}var gp=64,vp=4194304;function If(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Mg(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~a;l!==0?n=If(l):(i&=o,i!==0&&(n=If(i)))}else o=r&~a,o!==0?n=If(o):i!==0&&(n=If(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-li(t),a=1<<r,n|=e[r],t&=~a;return n}function rV(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nV(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-li(i),l=1<<o,c=a[o];c===-1?(!(l&r)||l&n)&&(a[o]=rV(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Bw(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function wM(){var e=gp;return gp<<=1,!(gp&4194240)&&(gp=64),e}function q0(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Um(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-li(t),e[t]=r}function aV(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-li(r),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~i}}function Z_(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-li(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var zt=0;function jM(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var _M,eS,SM,CM,NM,Fw=!1,yp=[],go=null,vo=null,yo=null,gh=new Map,vh=new Map,Qs=[],iV="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function dP(e,t){switch(e){case"focusin":case"focusout":go=null;break;case"dragenter":case"dragleave":vo=null;break;case"mouseover":case"mouseout":yo=null;break;case"pointerover":case"pointerout":gh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":vh.delete(t.pointerId)}}function lf(e,t,r,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=Wm(t),t!==null&&eS(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function sV(e,t,r,n,a){switch(t){case"focusin":return go=lf(go,e,t,r,n,a),!0;case"dragenter":return vo=lf(vo,e,t,r,n,a),!0;case"mouseover":return yo=lf(yo,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return gh.set(i,lf(gh.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,vh.set(i,lf(vh.get(i)||null,e,t,r,n,a)),!0}return!1}function PM(e){var t=hl(e.target);if(t!==null){var r=ec(t);if(r!==null){if(t=r.tag,t===13){if(t=pM(r),t!==null){e.blockedOn=t,NM(e.priority,function(){SM(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function fg(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=zw(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);$w=n,r.target.dispatchEvent(n),$w=null}else return t=Wm(r),t!==null&&eS(t),e.blockedOn=r,!1;t.shift()}return!0}function fP(e,t,r){fg(e)&&r.delete(t)}function oV(){Fw=!1,go!==null&&fg(go)&&(go=null),vo!==null&&fg(vo)&&(vo=null),yo!==null&&fg(yo)&&(yo=null),gh.forEach(fP),vh.forEach(fP)}function cf(e,t){e.blockedOn===t&&(e.blockedOn=null,Fw||(Fw=!0,pa.unstable_scheduleCallback(pa.unstable_NormalPriority,oV)))}function yh(e){function t(a){return cf(a,e)}if(0<yp.length){cf(yp[0],e);for(var r=1;r<yp.length;r++){var n=yp[r];n.blockedOn===e&&(n.blockedOn=null)}}for(go!==null&&cf(go,e),vo!==null&&cf(vo,e),yo!==null&&cf(yo,e),gh.forEach(t),vh.forEach(t),r=0;r<Qs.length;r++)n=Qs[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Qs.length&&(r=Qs[0],r.blockedOn===null);)PM(r),r.blockedOn===null&&Qs.shift()}var su=As.ReactCurrentBatchConfig,$g=!0;function lV(e,t,r,n){var a=zt,i=su.transition;su.transition=null;try{zt=1,tS(e,t,r,n)}finally{zt=a,su.transition=i}}function cV(e,t,r,n){var a=zt,i=su.transition;su.transition=null;try{zt=4,tS(e,t,r,n)}finally{zt=a,su.transition=i}}function tS(e,t,r,n){if($g){var a=zw(e,t,r,n);if(a===null)rb(e,t,n,Ig,r),dP(e,n);else if(sV(a,e,t,r,n))n.stopPropagation();else if(dP(e,n),t&4&&-1<iV.indexOf(e)){for(;a!==null;){var i=Wm(a);if(i!==null&&_M(i),i=zw(e,t,r,n),i===null&&rb(e,t,n,Ig,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else rb(e,t,n,null,r)}}var Ig=null;function zw(e,t,r,n){if(Ig=null,e=Q_(n),e=hl(e),e!==null)if(t=ec(e),t===null)e=null;else if(r=t.tag,r===13){if(e=pM(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ig=e,null}function kM(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(X8()){case J_:return 1;case xM:return 4;case Rg:case Q8:return 16;case bM:return 536870912;default:return 16}default:return 16}}var so=null,rS=null,hg=null;function EM(){if(hg)return hg;var e,t=rS,r=t.length,n,a="value"in so?so.value:so.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===a[i-n];n++);return hg=a.slice(e,1<n?1-n:void 0)}function mg(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function xp(){return!0}function hP(){return!1}function ya(e){function t(r,n,a,i,o){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?xp:hP,this.isPropagationStopped=hP,this}return Sr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=xp)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=xp)},persist:function(){},isPersistent:xp}),t}var Cd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nS=ya(Cd),Vm=Sr({},Cd,{view:0,detail:0}),uV=ya(Vm),K0,Y0,uf,Uy=Sr({},Vm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:aS,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==uf&&(uf&&e.type==="mousemove"?(K0=e.screenX-uf.screenX,Y0=e.screenY-uf.screenY):Y0=K0=0,uf=e),K0)},movementY:function(e){return"movementY"in e?e.movementY:Y0}}),mP=ya(Uy),dV=Sr({},Uy,{dataTransfer:0}),fV=ya(dV),hV=Sr({},Vm,{relatedTarget:0}),G0=ya(hV),mV=Sr({},Cd,{animationName:0,elapsedTime:0,pseudoElement:0}),pV=ya(mV),gV=Sr({},Cd,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vV=ya(gV),yV=Sr({},Cd,{data:0}),pP=ya(yV),xV={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bV={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wV={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jV(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=wV[e])?!!t[e]:!1}function aS(){return jV}var _V=Sr({},Vm,{key:function(e){if(e.key){var t=xV[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=mg(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?bV[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:aS,charCode:function(e){return e.type==="keypress"?mg(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?mg(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),SV=ya(_V),CV=Sr({},Uy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gP=ya(CV),NV=Sr({},Vm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:aS}),PV=ya(NV),kV=Sr({},Cd,{propertyName:0,elapsedTime:0,pseudoElement:0}),EV=ya(kV),AV=Sr({},Uy,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),OV=ya(AV),TV=[9,13,27,32],iS=ys&&"CompositionEvent"in window,Wf=null;ys&&"documentMode"in document&&(Wf=document.documentMode);var RV=ys&&"TextEvent"in window&&!Wf,AM=ys&&(!iS||Wf&&8<Wf&&11>=Wf),vP=" ",yP=!1;function OM(e,t){switch(e){case"keyup":return TV.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function TM(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Fc=!1;function MV(e,t){switch(e){case"compositionend":return TM(t);case"keypress":return t.which!==32?null:(yP=!0,vP);case"textInput":return e=t.data,e===vP&&yP?null:e;default:return null}}function $V(e,t){if(Fc)return e==="compositionend"||!iS&&OM(e,t)?(e=EM(),hg=rS=so=null,Fc=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return AM&&t.locale!=="ko"?null:t.data;default:return null}}var IV={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xP(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!IV[e.type]:t==="textarea"}function RM(e,t,r,n){uM(n),t=Dg(t,"onChange"),0<t.length&&(r=new nS("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Hf=null,xh=null;function DV(e){WM(e,0)}function Vy(e){var t=Vc(e);if(nM(t))return e}function LV(e,t){if(e==="change")return t}var MM=!1;if(ys){var X0;if(ys){var Q0="oninput"in document;if(!Q0){var bP=document.createElement("div");bP.setAttribute("oninput","return;"),Q0=typeof bP.oninput=="function"}X0=Q0}else X0=!1;MM=X0&&(!document.documentMode||9<document.documentMode)}function wP(){Hf&&(Hf.detachEvent("onpropertychange",$M),xh=Hf=null)}function $M(e){if(e.propertyName==="value"&&Vy(xh)){var t=[];RM(t,xh,e,Q_(e)),mM(DV,t)}}function BV(e,t,r){e==="focusin"?(wP(),Hf=t,xh=r,Hf.attachEvent("onpropertychange",$M)):e==="focusout"&&wP()}function FV(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Vy(xh)}function zV(e,t){if(e==="click")return Vy(t)}function UV(e,t){if(e==="input"||e==="change")return Vy(t)}function VV(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var mi=typeof Object.is=="function"?Object.is:VV;function bh(e,t){if(mi(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!_w.call(t,a)||!mi(e[a],t[a]))return!1}return!0}function jP(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function _P(e,t){var r=jP(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=jP(r)}}function IM(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?IM(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function DM(){for(var e=window,t=Ag();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Ag(e.document)}return t}function sS(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function WV(e){var t=DM(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&IM(r.ownerDocument.documentElement,r)){if(n!==null&&sS(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=_P(r,i);var o=_P(r,n);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var HV=ys&&"documentMode"in document&&11>=document.documentMode,zc=null,Uw=null,qf=null,Vw=!1;function SP(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Vw||zc==null||zc!==Ag(n)||(n=zc,"selectionStart"in n&&sS(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),qf&&bh(qf,n)||(qf=n,n=Dg(Uw,"onSelect"),0<n.length&&(t=new nS("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=zc)))}function bp(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Uc={animationend:bp("Animation","AnimationEnd"),animationiteration:bp("Animation","AnimationIteration"),animationstart:bp("Animation","AnimationStart"),transitionend:bp("Transition","TransitionEnd")},J0={},LM={};ys&&(LM=document.createElement("div").style,"AnimationEvent"in window||(delete Uc.animationend.animation,delete Uc.animationiteration.animation,delete Uc.animationstart.animation),"TransitionEvent"in window||delete Uc.transitionend.transition);function Wy(e){if(J0[e])return J0[e];if(!Uc[e])return e;var t=Uc[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in LM)return J0[e]=t[r];return e}var BM=Wy("animationend"),FM=Wy("animationiteration"),zM=Wy("animationstart"),UM=Wy("transitionend"),VM=new Map,CP="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Lo(e,t){VM.set(e,t),Zl(t,[e])}for(var Z0=0;Z0<CP.length;Z0++){var eb=CP[Z0],qV=eb.toLowerCase(),KV=eb[0].toUpperCase()+eb.slice(1);Lo(qV,"on"+KV)}Lo(BM,"onAnimationEnd");Lo(FM,"onAnimationIteration");Lo(zM,"onAnimationStart");Lo("dblclick","onDoubleClick");Lo("focusin","onFocus");Lo("focusout","onBlur");Lo(UM,"onTransitionEnd");Nu("onMouseEnter",["mouseout","mouseover"]);Nu("onMouseLeave",["mouseout","mouseover"]);Nu("onPointerEnter",["pointerout","pointerover"]);Nu("onPointerLeave",["pointerout","pointerover"]);Zl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Zl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Zl("onBeforeInput",["compositionend","keypress","textInput","paste"]);Zl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Zl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Zl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Df="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),YV=new Set("cancel close invalid load scroll toggle".split(" ").concat(Df));function NP(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,q8(n,t,void 0,e),e.currentTarget=null}function WM(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;NP(a,l,u),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;NP(a,l,u),i=c}}}if(Tg)throw e=Lw,Tg=!1,Lw=null,e}function sr(e,t){var r=t[Yw];r===void 0&&(r=t[Yw]=new Set);var n=e+"__bubble";r.has(n)||(HM(t,e,2,!1),r.add(n))}function tb(e,t,r){var n=0;t&&(n|=4),HM(r,e,n,t)}var wp="_reactListening"+Math.random().toString(36).slice(2);function wh(e){if(!e[wp]){e[wp]=!0,JR.forEach(function(r){r!=="selectionchange"&&(YV.has(r)||tb(r,!1,e),tb(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[wp]||(t[wp]=!0,tb("selectionchange",!1,t))}}function HM(e,t,r,n){switch(kM(t)){case 1:var a=lV;break;case 4:a=cV;break;default:a=tS}r=a.bind(null,t,r,e),a=void 0,!Dw||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function rb(e,t,r,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=hl(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}mM(function(){var u=i,d=Q_(r),f=[];e:{var h=VM.get(e);if(h!==void 0){var m=nS,y=e;switch(e){case"keypress":if(mg(r)===0)break e;case"keydown":case"keyup":m=SV;break;case"focusin":y="focus",m=G0;break;case"focusout":y="blur",m=G0;break;case"beforeblur":case"afterblur":m=G0;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=mP;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=fV;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=PV;break;case BM:case FM:case zM:m=pV;break;case UM:m=EV;break;case"scroll":m=uV;break;case"wheel":m=OV;break;case"copy":case"cut":case"paste":m=vV;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=gP}var g=(t&4)!==0,p=!g&&e==="scroll",v=g?h!==null?h+"Capture":null:h;g=[];for(var x=u,b;x!==null;){b=x;var _=b.stateNode;if(b.tag===5&&_!==null&&(b=_,v!==null&&(_=ph(x,v),_!=null&&g.push(jh(x,_,b)))),p)break;x=x.return}0<g.length&&(h=new m(h,y,null,r,d),f.push({event:h,listeners:g}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",h&&r!==$w&&(y=r.relatedTarget||r.fromElement)&&(hl(y)||y[xs]))break e;if((m||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,m?(y=r.relatedTarget||r.toElement,m=u,y=y?hl(y):null,y!==null&&(p=ec(y),y!==p||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=u),m!==y)){if(g=mP,_="onMouseLeave",v="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(g=gP,_="onPointerLeave",v="onPointerEnter",x="pointer"),p=m==null?h:Vc(m),b=y==null?h:Vc(y),h=new g(_,x+"leave",m,r,d),h.target=p,h.relatedTarget=b,_=null,hl(d)===u&&(g=new g(v,x+"enter",y,r,d),g.target=b,g.relatedTarget=p,_=g),p=_,m&&y)t:{for(g=m,v=y,x=0,b=g;b;b=dc(b))x++;for(b=0,_=v;_;_=dc(_))b++;for(;0<x-b;)g=dc(g),x--;for(;0<b-x;)v=dc(v),b--;for(;x--;){if(g===v||v!==null&&g===v.alternate)break t;g=dc(g),v=dc(v)}g=null}else g=null;m!==null&&PP(f,h,m,g,!1),y!==null&&p!==null&&PP(f,p,y,g,!0)}}e:{if(h=u?Vc(u):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var j=LV;else if(xP(h))if(MM)j=UV;else{j=FV;var S=BV}else(m=h.nodeName)&&m.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(j=zV);if(j&&(j=j(e,u))){RM(f,j,r,d);break e}S&&S(e,h,u),e==="focusout"&&(S=h._wrapperState)&&S.controlled&&h.type==="number"&&Aw(h,"number",h.value)}switch(S=u?Vc(u):window,e){case"focusin":(xP(S)||S.contentEditable==="true")&&(zc=S,Uw=u,qf=null);break;case"focusout":qf=Uw=zc=null;break;case"mousedown":Vw=!0;break;case"contextmenu":case"mouseup":case"dragend":Vw=!1,SP(f,r,d);break;case"selectionchange":if(HV)break;case"keydown":case"keyup":SP(f,r,d)}var C;if(iS)e:{switch(e){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Fc?OM(e,r)&&(P="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(P="onCompositionStart");P&&(AM&&r.locale!=="ko"&&(Fc||P!=="onCompositionStart"?P==="onCompositionEnd"&&Fc&&(C=EM()):(so=d,rS="value"in so?so.value:so.textContent,Fc=!0)),S=Dg(u,P),0<S.length&&(P=new pP(P,e,null,r,d),f.push({event:P,listeners:S}),C?P.data=C:(C=TM(r),C!==null&&(P.data=C)))),(C=RV?MV(e,r):$V(e,r))&&(u=Dg(u,"onBeforeInput"),0<u.length&&(d=new pP("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=C))}WM(f,t)})}function jh(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Dg(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=ph(e,r),i!=null&&n.unshift(jh(e,i,a)),i=ph(e,t),i!=null&&n.push(jh(e,i,a))),e=e.return}return n}function dc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function PP(e,t,r,n,a){for(var i=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,a?(c=ph(r,i),c!=null&&o.unshift(jh(r,c,l))):a||(c=ph(r,i),c!=null&&o.push(jh(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var GV=/\r\n?/g,XV=/\u0000|\uFFFD/g;function kP(e){return(typeof e=="string"?e:""+e).replace(GV,`
`).replace(XV,"")}function jp(e,t,r){if(t=kP(t),kP(e)!==t&&r)throw Error(je(425))}function Lg(){}var Ww=null,Hw=null;function qw(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Kw=typeof setTimeout=="function"?setTimeout:void 0,QV=typeof clearTimeout=="function"?clearTimeout:void 0,EP=typeof Promise=="function"?Promise:void 0,JV=typeof queueMicrotask=="function"?queueMicrotask:typeof EP<"u"?function(e){return EP.resolve(null).then(e).catch(ZV)}:Kw;function ZV(e){setTimeout(function(){throw e})}function nb(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),yh(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);yh(t)}function xo(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function AP(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Nd=Math.random().toString(36).slice(2),ki="__reactFiber$"+Nd,_h="__reactProps$"+Nd,xs="__reactContainer$"+Nd,Yw="__reactEvents$"+Nd,e6="__reactListeners$"+Nd,t6="__reactHandles$"+Nd;function hl(e){var t=e[ki];if(t)return t;for(var r=e.parentNode;r;){if(t=r[xs]||r[ki]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=AP(e);e!==null;){if(r=e[ki])return r;e=AP(e)}return t}e=r,r=e.parentNode}return null}function Wm(e){return e=e[ki]||e[xs],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Vc(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(je(33))}function Hy(e){return e[_h]||null}var Gw=[],Wc=-1;function Bo(e){return{current:e}}function fr(e){0>Wc||(e.current=Gw[Wc],Gw[Wc]=null,Wc--)}function er(e,t){Wc++,Gw[Wc]=e.current,e.current=t}var Oo={},En=Bo(Oo),Gn=Bo(!1),Ml=Oo;function Pu(e,t){var r=e.type.contextTypes;if(!r)return Oo;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Xn(e){return e=e.childContextTypes,e!=null}function Bg(){fr(Gn),fr(En)}function OP(e,t,r){if(En.current!==Oo)throw Error(je(168));er(En,t),er(Gn,r)}function qM(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(je(108,B8(e)||"Unknown",a));return Sr({},r,n)}function Fg(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Oo,Ml=En.current,er(En,e),er(Gn,Gn.current),!0}function TP(e,t,r){var n=e.stateNode;if(!n)throw Error(je(169));r?(e=qM(e,t,Ml),n.__reactInternalMemoizedMergedChildContext=e,fr(Gn),fr(En),er(En,e)):fr(Gn),er(Gn,r)}var ss=null,qy=!1,ab=!1;function KM(e){ss===null?ss=[e]:ss.push(e)}function r6(e){qy=!0,KM(e)}function Fo(){if(!ab&&ss!==null){ab=!0;var e=0,t=zt;try{var r=ss;for(zt=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}ss=null,qy=!1}catch(a){throw ss!==null&&(ss=ss.slice(e+1)),yM(J_,Fo),a}finally{zt=t,ab=!1}}return null}var Hc=[],qc=0,zg=null,Ug=0,Na=[],Pa=0,$l=null,cs=1,us="";function nl(e,t){Hc[qc++]=Ug,Hc[qc++]=zg,zg=e,Ug=t}function YM(e,t,r){Na[Pa++]=cs,Na[Pa++]=us,Na[Pa++]=$l,$l=e;var n=cs;e=us;var a=32-li(n)-1;n&=~(1<<a),r+=1;var i=32-li(t)+a;if(30<i){var o=a-a%5;i=(n&(1<<o)-1).toString(32),n>>=o,a-=o,cs=1<<32-li(t)+a|r<<a|n,us=i+e}else cs=1<<i|r<<a|n,us=e}function oS(e){e.return!==null&&(nl(e,1),YM(e,1,0))}function lS(e){for(;e===zg;)zg=Hc[--qc],Hc[qc]=null,Ug=Hc[--qc],Hc[qc]=null;for(;e===$l;)$l=Na[--Pa],Na[Pa]=null,us=Na[--Pa],Na[Pa]=null,cs=Na[--Pa],Na[Pa]=null}var da=null,ua=null,pr=!1,ai=null;function GM(e,t){var r=Ea(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function RP(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,da=e,ua=xo(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,da=e,ua=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=$l!==null?{id:cs,overflow:us}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Ea(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,da=e,ua=null,!0):!1;default:return!1}}function Xw(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Qw(e){if(pr){var t=ua;if(t){var r=t;if(!RP(e,t)){if(Xw(e))throw Error(je(418));t=xo(r.nextSibling);var n=da;t&&RP(e,t)?GM(n,r):(e.flags=e.flags&-4097|2,pr=!1,da=e)}}else{if(Xw(e))throw Error(je(418));e.flags=e.flags&-4097|2,pr=!1,da=e}}}function MP(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;da=e}function _p(e){if(e!==da)return!1;if(!pr)return MP(e),pr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!qw(e.type,e.memoizedProps)),t&&(t=ua)){if(Xw(e))throw XM(),Error(je(418));for(;t;)GM(e,t),t=xo(t.nextSibling)}if(MP(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(je(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){ua=xo(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}ua=null}}else ua=da?xo(e.stateNode.nextSibling):null;return!0}function XM(){for(var e=ua;e;)e=xo(e.nextSibling)}function ku(){ua=da=null,pr=!1}function cS(e){ai===null?ai=[e]:ai.push(e)}var n6=As.ReactCurrentBatchConfig;function df(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(je(309));var n=r.stateNode}if(!n)throw Error(je(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=a.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(je(284));if(!r._owner)throw Error(je(290,e))}return e}function Sp(e,t){throw e=Object.prototype.toString.call(t),Error(je(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function $P(e){var t=e._init;return t(e._payload)}function QM(e){function t(v,x){if(e){var b=v.deletions;b===null?(v.deletions=[x],v.flags|=16):b.push(x)}}function r(v,x){if(!e)return null;for(;x!==null;)t(v,x),x=x.sibling;return null}function n(v,x){for(v=new Map;x!==null;)x.key!==null?v.set(x.key,x):v.set(x.index,x),x=x.sibling;return v}function a(v,x){return v=_o(v,x),v.index=0,v.sibling=null,v}function i(v,x,b){return v.index=b,e?(b=v.alternate,b!==null?(b=b.index,b<x?(v.flags|=2,x):b):(v.flags|=2,x)):(v.flags|=1048576,x)}function o(v){return e&&v.alternate===null&&(v.flags|=2),v}function l(v,x,b,_){return x===null||x.tag!==6?(x=db(b,v.mode,_),x.return=v,x):(x=a(x,b),x.return=v,x)}function c(v,x,b,_){var j=b.type;return j===Bc?d(v,x,b.props.children,_,b.key):x!==null&&(x.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===qs&&$P(j)===x.type)?(_=a(x,b.props),_.ref=df(v,x,b),_.return=v,_):(_=wg(b.type,b.key,b.props,null,v.mode,_),_.ref=df(v,x,b),_.return=v,_)}function u(v,x,b,_){return x===null||x.tag!==4||x.stateNode.containerInfo!==b.containerInfo||x.stateNode.implementation!==b.implementation?(x=fb(b,v.mode,_),x.return=v,x):(x=a(x,b.children||[]),x.return=v,x)}function d(v,x,b,_,j){return x===null||x.tag!==7?(x=Ol(b,v.mode,_,j),x.return=v,x):(x=a(x,b),x.return=v,x)}function f(v,x,b){if(typeof x=="string"&&x!==""||typeof x=="number")return x=db(""+x,v.mode,b),x.return=v,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case hp:return b=wg(x.type,x.key,x.props,null,v.mode,b),b.ref=df(v,null,x),b.return=v,b;case Lc:return x=fb(x,v.mode,b),x.return=v,x;case qs:var _=x._init;return f(v,_(x._payload),b)}if($f(x)||sf(x))return x=Ol(x,v.mode,b,null),x.return=v,x;Sp(v,x)}return null}function h(v,x,b,_){var j=x!==null?x.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return j!==null?null:l(v,x,""+b,_);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case hp:return b.key===j?c(v,x,b,_):null;case Lc:return b.key===j?u(v,x,b,_):null;case qs:return j=b._init,h(v,x,j(b._payload),_)}if($f(b)||sf(b))return j!==null?null:d(v,x,b,_,null);Sp(v,b)}return null}function m(v,x,b,_,j){if(typeof _=="string"&&_!==""||typeof _=="number")return v=v.get(b)||null,l(x,v,""+_,j);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case hp:return v=v.get(_.key===null?b:_.key)||null,c(x,v,_,j);case Lc:return v=v.get(_.key===null?b:_.key)||null,u(x,v,_,j);case qs:var S=_._init;return m(v,x,b,S(_._payload),j)}if($f(_)||sf(_))return v=v.get(b)||null,d(x,v,_,j,null);Sp(x,_)}return null}function y(v,x,b,_){for(var j=null,S=null,C=x,P=x=0,N=null;C!==null&&P<b.length;P++){C.index>P?(N=C,C=null):N=C.sibling;var E=h(v,C,b[P],_);if(E===null){C===null&&(C=N);break}e&&C&&E.alternate===null&&t(v,C),x=i(E,x,P),S===null?j=E:S.sibling=E,S=E,C=N}if(P===b.length)return r(v,C),pr&&nl(v,P),j;if(C===null){for(;P<b.length;P++)C=f(v,b[P],_),C!==null&&(x=i(C,x,P),S===null?j=C:S.sibling=C,S=C);return pr&&nl(v,P),j}for(C=n(v,C);P<b.length;P++)N=m(C,v,P,b[P],_),N!==null&&(e&&N.alternate!==null&&C.delete(N.key===null?P:N.key),x=i(N,x,P),S===null?j=N:S.sibling=N,S=N);return e&&C.forEach(function(A){return t(v,A)}),pr&&nl(v,P),j}function g(v,x,b,_){var j=sf(b);if(typeof j!="function")throw Error(je(150));if(b=j.call(b),b==null)throw Error(je(151));for(var S=j=null,C=x,P=x=0,N=null,E=b.next();C!==null&&!E.done;P++,E=b.next()){C.index>P?(N=C,C=null):N=C.sibling;var A=h(v,C,E.value,_);if(A===null){C===null&&(C=N);break}e&&C&&A.alternate===null&&t(v,C),x=i(A,x,P),S===null?j=A:S.sibling=A,S=A,C=N}if(E.done)return r(v,C),pr&&nl(v,P),j;if(C===null){for(;!E.done;P++,E=b.next())E=f(v,E.value,_),E!==null&&(x=i(E,x,P),S===null?j=E:S.sibling=E,S=E);return pr&&nl(v,P),j}for(C=n(v,C);!E.done;P++,E=b.next())E=m(C,v,P,E.value,_),E!==null&&(e&&E.alternate!==null&&C.delete(E.key===null?P:E.key),x=i(E,x,P),S===null?j=E:S.sibling=E,S=E);return e&&C.forEach(function(T){return t(v,T)}),pr&&nl(v,P),j}function p(v,x,b,_){if(typeof b=="object"&&b!==null&&b.type===Bc&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case hp:e:{for(var j=b.key,S=x;S!==null;){if(S.key===j){if(j=b.type,j===Bc){if(S.tag===7){r(v,S.sibling),x=a(S,b.props.children),x.return=v,v=x;break e}}else if(S.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===qs&&$P(j)===S.type){r(v,S.sibling),x=a(S,b.props),x.ref=df(v,S,b),x.return=v,v=x;break e}r(v,S);break}else t(v,S);S=S.sibling}b.type===Bc?(x=Ol(b.props.children,v.mode,_,b.key),x.return=v,v=x):(_=wg(b.type,b.key,b.props,null,v.mode,_),_.ref=df(v,x,b),_.return=v,v=_)}return o(v);case Lc:e:{for(S=b.key;x!==null;){if(x.key===S)if(x.tag===4&&x.stateNode.containerInfo===b.containerInfo&&x.stateNode.implementation===b.implementation){r(v,x.sibling),x=a(x,b.children||[]),x.return=v,v=x;break e}else{r(v,x);break}else t(v,x);x=x.sibling}x=fb(b,v.mode,_),x.return=v,v=x}return o(v);case qs:return S=b._init,p(v,x,S(b._payload),_)}if($f(b))return y(v,x,b,_);if(sf(b))return g(v,x,b,_);Sp(v,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,x!==null&&x.tag===6?(r(v,x.sibling),x=a(x,b),x.return=v,v=x):(r(v,x),x=db(b,v.mode,_),x.return=v,v=x),o(v)):r(v,x)}return p}var Eu=QM(!0),JM=QM(!1),Vg=Bo(null),Wg=null,Kc=null,uS=null;function dS(){uS=Kc=Wg=null}function fS(e){var t=Vg.current;fr(Vg),e._currentValue=t}function Jw(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function ou(e,t){Wg=e,uS=Kc=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Kn=!0),e.firstContext=null)}function Ra(e){var t=e._currentValue;if(uS!==e)if(e={context:e,memoizedValue:t,next:null},Kc===null){if(Wg===null)throw Error(je(308));Kc=e,Wg.dependencies={lanes:0,firstContext:e}}else Kc=Kc.next=e;return t}var ml=null;function hS(e){ml===null?ml=[e]:ml.push(e)}function ZM(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,hS(t)):(r.next=a.next,a.next=r),t.interleaved=r,bs(e,n)}function bs(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Ks=!1;function mS(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function e$(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ms(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function bo(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Nt&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,bs(e,r)}return a=n.interleaved,a===null?(t.next=t,hS(n)):(t.next=a.next,a.next=t),n.interleaved=t,bs(e,r)}function pg(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Z_(e,r)}}function IP(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Hg(e,t,r,n){var a=e.updateQueue;Ks=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var f=a.baseState;o=0,d=u=c=null,l=i;do{var h=l.lane,m=l.eventTime;if((n&h)===h){d!==null&&(d=d.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=e,g=l;switch(h=t,m=r,g.tag){case 1:if(y=g.payload,typeof y=="function"){f=y.call(m,f,h);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=g.payload,h=typeof y=="function"?y.call(m,f,h):y,h==null)break e;f=Sr({},f,h);break e;case 2:Ks=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=a.effects,h===null?a.effects=[l]:h.push(l))}else m={eventTime:m,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=m,c=f):d=d.next=m,o|=h;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;h=l,l=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(!0);if(d===null&&(c=f),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=d,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);Dl|=o,e.lanes=o,e.memoizedState=f}}function DP(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(je(191,a));a.call(n)}}}var Hm={},Di=Bo(Hm),Sh=Bo(Hm),Ch=Bo(Hm);function pl(e){if(e===Hm)throw Error(je(174));return e}function pS(e,t){switch(er(Ch,t),er(Sh,e),er(Di,Hm),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Tw(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Tw(t,e)}fr(Di),er(Di,t)}function Au(){fr(Di),fr(Sh),fr(Ch)}function t$(e){pl(Ch.current);var t=pl(Di.current),r=Tw(t,e.type);t!==r&&(er(Sh,e),er(Di,r))}function gS(e){Sh.current===e&&(fr(Di),fr(Sh))}var br=Bo(0);function qg(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ib=[];function vS(){for(var e=0;e<ib.length;e++)ib[e]._workInProgressVersionPrimary=null;ib.length=0}var gg=As.ReactCurrentDispatcher,sb=As.ReactCurrentBatchConfig,Il=0,jr=null,Jr=null,on=null,Kg=!1,Kf=!1,Nh=0,a6=0;function bn(){throw Error(je(321))}function yS(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!mi(e[r],t[r]))return!1;return!0}function xS(e,t,r,n,a,i){if(Il=i,jr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,gg.current=e===null||e.memoizedState===null?l6:c6,e=r(n,a),Kf){i=0;do{if(Kf=!1,Nh=0,25<=i)throw Error(je(301));i+=1,on=Jr=null,t.updateQueue=null,gg.current=u6,e=r(n,a)}while(Kf)}if(gg.current=Yg,t=Jr!==null&&Jr.next!==null,Il=0,on=Jr=jr=null,Kg=!1,t)throw Error(je(300));return e}function bS(){var e=Nh!==0;return Nh=0,e}function Si(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return on===null?jr.memoizedState=on=e:on=on.next=e,on}function Ma(){if(Jr===null){var e=jr.alternate;e=e!==null?e.memoizedState:null}else e=Jr.next;var t=on===null?jr.memoizedState:on.next;if(t!==null)on=t,Jr=e;else{if(e===null)throw Error(je(310));Jr=e,e={memoizedState:Jr.memoizedState,baseState:Jr.baseState,baseQueue:Jr.baseQueue,queue:Jr.queue,next:null},on===null?jr.memoizedState=on=e:on=on.next=e}return on}function Ph(e,t){return typeof t=="function"?t(e):t}function ob(e){var t=Ma(),r=t.queue;if(r===null)throw Error(je(311));r.lastRenderedReducer=e;var n=Jr,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((Il&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,o=n):c=c.next=f,jr.lanes|=d,Dl|=d}u=u.next}while(u!==null&&u!==i);c===null?o=n:c.next=l,mi(n,t.memoizedState)||(Kn=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do i=a.lane,jr.lanes|=i,Dl|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function lb(e){var t=Ma(),r=t.queue;if(r===null)throw Error(je(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);mi(i,t.memoizedState)||(Kn=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function r$(){}function n$(e,t){var r=jr,n=Ma(),a=t(),i=!mi(n.memoizedState,a);if(i&&(n.memoizedState=a,Kn=!0),n=n.queue,wS(s$.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||on!==null&&on.memoizedState.tag&1){if(r.flags|=2048,kh(9,i$.bind(null,r,n,a,t),void 0,null),cn===null)throw Error(je(349));Il&30||a$(r,t,a)}return a}function a$(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=jr.updateQueue,t===null?(t={lastEffect:null,stores:null},jr.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function i$(e,t,r,n){t.value=r,t.getSnapshot=n,o$(t)&&l$(e)}function s$(e,t,r){return r(function(){o$(t)&&l$(e)})}function o$(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!mi(e,r)}catch{return!0}}function l$(e){var t=bs(e,1);t!==null&&ci(t,e,1,-1)}function LP(e){var t=Si();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ph,lastRenderedState:e},t.queue=e,e=e.dispatch=o6.bind(null,jr,e),[t.memoizedState,e]}function kh(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=jr.updateQueue,t===null?(t={lastEffect:null,stores:null},jr.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function c$(){return Ma().memoizedState}function vg(e,t,r,n){var a=Si();jr.flags|=e,a.memoizedState=kh(1|t,r,void 0,n===void 0?null:n)}function Ky(e,t,r,n){var a=Ma();n=n===void 0?null:n;var i=void 0;if(Jr!==null){var o=Jr.memoizedState;if(i=o.destroy,n!==null&&yS(n,o.deps)){a.memoizedState=kh(t,r,i,n);return}}jr.flags|=e,a.memoizedState=kh(1|t,r,i,n)}function BP(e,t){return vg(8390656,8,e,t)}function wS(e,t){return Ky(2048,8,e,t)}function u$(e,t){return Ky(4,2,e,t)}function d$(e,t){return Ky(4,4,e,t)}function f$(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function h$(e,t,r){return r=r!=null?r.concat([e]):null,Ky(4,4,f$.bind(null,t,e),r)}function jS(){}function m$(e,t){var r=Ma();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&yS(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function p$(e,t){var r=Ma();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&yS(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function g$(e,t,r){return Il&21?(mi(r,t)||(r=wM(),jr.lanes|=r,Dl|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Kn=!0),e.memoizedState=r)}function i6(e,t){var r=zt;zt=r!==0&&4>r?r:4,e(!0);var n=sb.transition;sb.transition={};try{e(!1),t()}finally{zt=r,sb.transition=n}}function v$(){return Ma().memoizedState}function s6(e,t,r){var n=jo(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},y$(e))x$(t,r);else if(r=ZM(e,t,r,n),r!==null){var a=Ln();ci(r,e,n,a),b$(r,t,n)}}function o6(e,t,r){var n=jo(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(y$(e))x$(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(a.hasEagerState=!0,a.eagerState=l,mi(l,o)){var c=t.interleaved;c===null?(a.next=a,hS(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=ZM(e,t,a,n),r!==null&&(a=Ln(),ci(r,e,n,a),b$(r,t,n))}}function y$(e){var t=e.alternate;return e===jr||t!==null&&t===jr}function x$(e,t){Kf=Kg=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function b$(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Z_(e,r)}}var Yg={readContext:Ra,useCallback:bn,useContext:bn,useEffect:bn,useImperativeHandle:bn,useInsertionEffect:bn,useLayoutEffect:bn,useMemo:bn,useReducer:bn,useRef:bn,useState:bn,useDebugValue:bn,useDeferredValue:bn,useTransition:bn,useMutableSource:bn,useSyncExternalStore:bn,useId:bn,unstable_isNewReconciler:!1},l6={readContext:Ra,useCallback:function(e,t){return Si().memoizedState=[e,t===void 0?null:t],e},useContext:Ra,useEffect:BP,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,vg(4194308,4,f$.bind(null,t,e),r)},useLayoutEffect:function(e,t){return vg(4194308,4,e,t)},useInsertionEffect:function(e,t){return vg(4,2,e,t)},useMemo:function(e,t){var r=Si();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Si();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=s6.bind(null,jr,e),[n.memoizedState,e]},useRef:function(e){var t=Si();return e={current:e},t.memoizedState=e},useState:LP,useDebugValue:jS,useDeferredValue:function(e){return Si().memoizedState=e},useTransition:function(){var e=LP(!1),t=e[0];return e=i6.bind(null,e[1]),Si().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=jr,a=Si();if(pr){if(r===void 0)throw Error(je(407));r=r()}else{if(r=t(),cn===null)throw Error(je(349));Il&30||a$(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,BP(s$.bind(null,n,i,e),[e]),n.flags|=2048,kh(9,i$.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=Si(),t=cn.identifierPrefix;if(pr){var r=us,n=cs;r=(n&~(1<<32-li(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Nh++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=a6++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},c6={readContext:Ra,useCallback:m$,useContext:Ra,useEffect:wS,useImperativeHandle:h$,useInsertionEffect:u$,useLayoutEffect:d$,useMemo:p$,useReducer:ob,useRef:c$,useState:function(){return ob(Ph)},useDebugValue:jS,useDeferredValue:function(e){var t=Ma();return g$(t,Jr.memoizedState,e)},useTransition:function(){var e=ob(Ph)[0],t=Ma().memoizedState;return[e,t]},useMutableSource:r$,useSyncExternalStore:n$,useId:v$,unstable_isNewReconciler:!1},u6={readContext:Ra,useCallback:m$,useContext:Ra,useEffect:wS,useImperativeHandle:h$,useInsertionEffect:u$,useLayoutEffect:d$,useMemo:p$,useReducer:lb,useRef:c$,useState:function(){return lb(Ph)},useDebugValue:jS,useDeferredValue:function(e){var t=Ma();return Jr===null?t.memoizedState=e:g$(t,Jr.memoizedState,e)},useTransition:function(){var e=lb(Ph)[0],t=Ma().memoizedState;return[e,t]},useMutableSource:r$,useSyncExternalStore:n$,useId:v$,unstable_isNewReconciler:!1};function Ya(e,t){if(e&&e.defaultProps){t=Sr({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Zw(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Sr({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Yy={isMounted:function(e){return(e=e._reactInternals)?ec(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Ln(),a=jo(e),i=ms(n,a);i.payload=t,r!=null&&(i.callback=r),t=bo(e,i,a),t!==null&&(ci(t,e,a,n),pg(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Ln(),a=jo(e),i=ms(n,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=bo(e,i,a),t!==null&&(ci(t,e,a,n),pg(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Ln(),n=jo(e),a=ms(r,n);a.tag=2,t!=null&&(a.callback=t),t=bo(e,a,n),t!==null&&(ci(t,e,n,r),pg(t,e,n))}};function FP(e,t,r,n,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!bh(r,n)||!bh(a,i):!0}function w$(e,t,r){var n=!1,a=Oo,i=t.contextType;return typeof i=="object"&&i!==null?i=Ra(i):(a=Xn(t)?Ml:En.current,n=t.contextTypes,i=(n=n!=null)?Pu(e,a):Oo),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Yy,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function zP(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Yy.enqueueReplaceState(t,t.state,null)}function ej(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},mS(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=Ra(i):(i=Xn(t)?Ml:En.current,a.context=Pu(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Zw(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Yy.enqueueReplaceState(a,a.state,null),Hg(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Ou(e,t){try{var r="",n=t;do r+=L8(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function cb(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function tj(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var d6=typeof WeakMap=="function"?WeakMap:Map;function j$(e,t,r){r=ms(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Xg||(Xg=!0,dj=n),tj(e,t)},r}function _$(e,t,r){r=ms(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){tj(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){tj(e,t),typeof n!="function"&&(wo===null?wo=new Set([this]):wo.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function UP(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new d6;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=C6.bind(null,e,t,r),t.then(e,e))}function VP(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function WP(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=ms(-1,1),t.tag=2,bo(r,t,1))),r.lanes|=1),e)}var f6=As.ReactCurrentOwner,Kn=!1;function On(e,t,r,n){t.child=e===null?JM(t,null,r,n):Eu(t,e.child,r,n)}function HP(e,t,r,n,a){r=r.render;var i=t.ref;return ou(t,a),n=xS(e,t,r,n,i,a),r=bS(),e!==null&&!Kn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,ws(e,t,a)):(pr&&r&&oS(t),t.flags|=1,On(e,t,n,a),t.child)}function qP(e,t,r,n,a){if(e===null){var i=r.type;return typeof i=="function"&&!AS(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,S$(e,t,i,n,a)):(e=wg(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:bh,r(o,n)&&e.ref===t.ref)return ws(e,t,a)}return t.flags|=1,e=_o(i,n),e.ref=t.ref,e.return=t,t.child=e}function S$(e,t,r,n,a){if(e!==null){var i=e.memoizedProps;if(bh(i,n)&&e.ref===t.ref)if(Kn=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(Kn=!0);else return t.lanes=e.lanes,ws(e,t,a)}return rj(e,t,r,n,a)}function C$(e,t,r){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},er(Gc,aa),aa|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,er(Gc,aa),aa|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,er(Gc,aa),aa|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,er(Gc,aa),aa|=n;return On(e,t,a,r),t.child}function N$(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function rj(e,t,r,n,a){var i=Xn(r)?Ml:En.current;return i=Pu(t,i),ou(t,a),r=xS(e,t,r,n,i,a),n=bS(),e!==null&&!Kn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,ws(e,t,a)):(pr&&n&&oS(t),t.flags|=1,On(e,t,r,a),t.child)}function KP(e,t,r,n,a){if(Xn(r)){var i=!0;Fg(t)}else i=!1;if(ou(t,a),t.stateNode===null)yg(e,t),w$(t,r,n),ej(t,r,n,a),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=Ra(u):(u=Xn(r)?Ml:En.current,u=Pu(t,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&zP(t,o,n,u),Ks=!1;var h=t.memoizedState;o.state=h,Hg(t,n,o,a),c=t.memoizedState,l!==n||h!==c||Gn.current||Ks?(typeof d=="function"&&(Zw(t,r,d,n),c=t.memoizedState),(l=Ks||FP(t,r,l,n,h,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,e$(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Ya(t.type,l),o.props=u,f=t.pendingProps,h=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=Ra(c):(c=Xn(r)?Ml:En.current,c=Pu(t,c));var m=r.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||h!==c)&&zP(t,o,n,c),Ks=!1,h=t.memoizedState,o.state=h,Hg(t,n,o,a);var y=t.memoizedState;l!==f||h!==y||Gn.current||Ks?(typeof m=="function"&&(Zw(t,r,m,n),y=t.memoizedState),(u=Ks||FP(t,r,u,n,h,y,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,y,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,y,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=y),o.props=n,o.state=y,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return nj(e,t,r,n,i,a)}function nj(e,t,r,n,a,i){N$(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return a&&TP(t,r,!1),ws(e,t,i);n=t.stateNode,f6.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=Eu(t,e.child,null,i),t.child=Eu(t,null,l,i)):On(e,t,l,i),t.memoizedState=n.state,a&&TP(t,r,!0),t.child}function P$(e){var t=e.stateNode;t.pendingContext?OP(e,t.pendingContext,t.pendingContext!==t.context):t.context&&OP(e,t.context,!1),pS(e,t.containerInfo)}function YP(e,t,r,n,a){return ku(),cS(a),t.flags|=256,On(e,t,r,n),t.child}var aj={dehydrated:null,treeContext:null,retryLane:0};function ij(e){return{baseLanes:e,cachePool:null,transitions:null}}function k$(e,t,r){var n=t.pendingProps,a=br.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),er(br,a&1),e===null)return Qw(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Qy(o,n,0,null),e=Ol(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=ij(r),t.memoizedState=aj,e):_S(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return h6(e,t,o,n,l,a,r);if(i){i=n.fallback,o=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=_o(a,c),n.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=_o(l,i):(i=Ol(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?ij(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=aj,n}return i=e.child,e=i.sibling,n=_o(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function _S(e,t){return t=Qy({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Cp(e,t,r,n){return n!==null&&cS(n),Eu(t,e.child,null,r),e=_S(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function h6(e,t,r,n,a,i,o){if(r)return t.flags&256?(t.flags&=-257,n=cb(Error(je(422))),Cp(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=Qy({mode:"visible",children:n.children},a,0,null),i=Ol(i,a,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&Eu(t,e.child,null,o),t.child.memoizedState=ij(o),t.memoizedState=aj,i);if(!(t.mode&1))return Cp(e,t,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(je(419)),n=cb(i,n,void 0),Cp(e,t,o,n)}if(l=(o&e.childLanes)!==0,Kn||l){if(n=cn,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,bs(e,a),ci(n,e,a,-1))}return ES(),n=cb(Error(je(421))),Cp(e,t,o,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=N6.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,ua=xo(a.nextSibling),da=t,pr=!0,ai=null,e!==null&&(Na[Pa++]=cs,Na[Pa++]=us,Na[Pa++]=$l,cs=e.id,us=e.overflow,$l=t),t=_S(t,n.children),t.flags|=4096,t)}function GP(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Jw(e.return,t,r)}function ub(e,t,r,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function E$(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(On(e,t,n.children,r),n=br.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&GP(e,r,t);else if(e.tag===19)GP(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(er(br,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&qg(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),ub(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&qg(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}ub(t,!0,r,null,i);break;case"together":ub(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function yg(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ws(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Dl|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(je(153));if(t.child!==null){for(e=t.child,r=_o(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=_o(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function m6(e,t,r){switch(t.tag){case 3:P$(t),ku();break;case 5:t$(t);break;case 1:Xn(t.type)&&Fg(t);break;case 4:pS(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;er(Vg,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(er(br,br.current&1),t.flags|=128,null):r&t.child.childLanes?k$(e,t,r):(er(br,br.current&1),e=ws(e,t,r),e!==null?e.sibling:null);er(br,br.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return E$(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),er(br,br.current),n)break;return null;case 22:case 23:return t.lanes=0,C$(e,t,r)}return ws(e,t,r)}var A$,sj,O$,T$;A$=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};sj=function(){};O$=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,pl(Di.current);var i=null;switch(r){case"input":a=kw(e,a),n=kw(e,n),i=[];break;case"select":a=Sr({},a,{value:void 0}),n=Sr({},n,{value:void 0}),i=[];break;case"textarea":a=Ow(e,a),n=Ow(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Lg)}Rw(r,n);var o;r=null;for(u in a)if(!n.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var l=a[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(hh.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=a!=null?a[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(hh.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&sr("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};T$=function(e,t,r,n){r!==n&&(t.flags|=4)};function ff(e,t){if(!pr)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function wn(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function p6(e,t,r){var n=t.pendingProps;switch(lS(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wn(t),null;case 1:return Xn(t.type)&&Bg(),wn(t),null;case 3:return n=t.stateNode,Au(),fr(Gn),fr(En),vS(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(_p(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ai!==null&&(mj(ai),ai=null))),sj(e,t),wn(t),null;case 5:gS(t);var a=pl(Ch.current);if(r=t.type,e!==null&&t.stateNode!=null)O$(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(je(166));return wn(t),null}if(e=pl(Di.current),_p(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[ki]=t,n[_h]=i,e=(t.mode&1)!==0,r){case"dialog":sr("cancel",n),sr("close",n);break;case"iframe":case"object":case"embed":sr("load",n);break;case"video":case"audio":for(a=0;a<Df.length;a++)sr(Df[a],n);break;case"source":sr("error",n);break;case"img":case"image":case"link":sr("error",n),sr("load",n);break;case"details":sr("toggle",n);break;case"input":aP(n,i),sr("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},sr("invalid",n);break;case"textarea":sP(n,i),sr("invalid",n)}Rw(r,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&jp(n.textContent,l,e),a=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&jp(n.textContent,l,e),a=["children",""+l]):hh.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&sr("scroll",n)}switch(r){case"input":mp(n),iP(n,i,!0);break;case"textarea":mp(n),oP(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Lg)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=sM(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[ki]=t,e[_h]=n,A$(e,t,!1,!1),t.stateNode=e;e:{switch(o=Mw(r,n),r){case"dialog":sr("cancel",e),sr("close",e),a=n;break;case"iframe":case"object":case"embed":sr("load",e),a=n;break;case"video":case"audio":for(a=0;a<Df.length;a++)sr(Df[a],e);a=n;break;case"source":sr("error",e),a=n;break;case"img":case"image":case"link":sr("error",e),sr("load",e),a=n;break;case"details":sr("toggle",e),a=n;break;case"input":aP(e,n),a=kw(e,n),sr("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=Sr({},n,{value:void 0}),sr("invalid",e);break;case"textarea":sP(e,n),a=Ow(e,n),sr("invalid",e);break;default:a=n}Rw(r,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?cM(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&oM(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&mh(e,c):typeof c=="number"&&mh(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(hh.hasOwnProperty(i)?c!=null&&i==="onScroll"&&sr("scroll",e):c!=null&&K_(e,i,c,o))}switch(r){case"input":mp(e),iP(e,n,!1);break;case"textarea":mp(e),oP(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Ao(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?nu(e,!!n.multiple,i,!1):n.defaultValue!=null&&nu(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Lg)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return wn(t),null;case 6:if(e&&t.stateNode!=null)T$(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(je(166));if(r=pl(Ch.current),pl(Di.current),_p(t)){if(n=t.stateNode,r=t.memoizedProps,n[ki]=t,(i=n.nodeValue!==r)&&(e=da,e!==null))switch(e.tag){case 3:jp(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&jp(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[ki]=t,t.stateNode=n}return wn(t),null;case 13:if(fr(br),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(pr&&ua!==null&&t.mode&1&&!(t.flags&128))XM(),ku(),t.flags|=98560,i=!1;else if(i=_p(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(je(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(je(317));i[ki]=t}else ku(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;wn(t),i=!1}else ai!==null&&(mj(ai),ai=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||br.current&1?en===0&&(en=3):ES())),t.updateQueue!==null&&(t.flags|=4),wn(t),null);case 4:return Au(),sj(e,t),e===null&&wh(t.stateNode.containerInfo),wn(t),null;case 10:return fS(t.type._context),wn(t),null;case 17:return Xn(t.type)&&Bg(),wn(t),null;case 19:if(fr(br),i=t.memoizedState,i===null)return wn(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)ff(i,!1);else{if(en!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=qg(e),o!==null){for(t.flags|=128,ff(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return er(br,br.current&1|2),t.child}e=e.sibling}i.tail!==null&&$r()>Tu&&(t.flags|=128,n=!0,ff(i,!1),t.lanes=4194304)}else{if(!n)if(e=qg(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),ff(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!pr)return wn(t),null}else 2*$r()-i.renderingStartTime>Tu&&r!==1073741824&&(t.flags|=128,n=!0,ff(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=$r(),t.sibling=null,r=br.current,er(br,n?r&1|2:r&1),t):(wn(t),null);case 22:case 23:return kS(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?aa&1073741824&&(wn(t),t.subtreeFlags&6&&(t.flags|=8192)):wn(t),null;case 24:return null;case 25:return null}throw Error(je(156,t.tag))}function g6(e,t){switch(lS(t),t.tag){case 1:return Xn(t.type)&&Bg(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Au(),fr(Gn),fr(En),vS(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return gS(t),null;case 13:if(fr(br),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(je(340));ku()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return fr(br),null;case 4:return Au(),null;case 10:return fS(t.type._context),null;case 22:case 23:return kS(),null;case 24:return null;default:return null}}var Np=!1,Nn=!1,v6=typeof WeakSet=="function"?WeakSet:Set,De=null;function Yc(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Or(e,t,n)}else r.current=null}function oj(e,t,r){try{r()}catch(n){Or(e,t,n)}}var XP=!1;function y6(e,t){if(Ww=$g,e=DM(),sS(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,f=e,h=null;t:for(;;){for(var m;f!==r||a!==0&&f.nodeType!==3||(l=o+a),f!==i||n!==0&&f.nodeType!==3||(c=o+n),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)h=f,f=m;for(;;){if(f===e)break t;if(h===r&&++u===a&&(l=o),h===i&&++d===n&&(c=o),(m=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=m}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Hw={focusedElem:e,selectionRange:r},$g=!1,De=t;De!==null;)if(t=De,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,De=e;else for(;De!==null;){t=De;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var g=y.memoizedProps,p=y.memoizedState,v=t.stateNode,x=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:Ya(t.type,g),p);v.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(je(163))}}catch(_){Or(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,De=e;break}De=t.return}return y=XP,XP=!1,y}function Yf(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&oj(t,r,i)}a=a.next}while(a!==n)}}function Gy(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function lj(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function R$(e){var t=e.alternate;t!==null&&(e.alternate=null,R$(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ki],delete t[_h],delete t[Yw],delete t[e6],delete t[t6])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function M$(e){return e.tag===5||e.tag===3||e.tag===4}function QP(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||M$(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function cj(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Lg));else if(n!==4&&(e=e.child,e!==null))for(cj(e,t,r),e=e.sibling;e!==null;)cj(e,t,r),e=e.sibling}function uj(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(uj(e,t,r),e=e.sibling;e!==null;)uj(e,t,r),e=e.sibling}var pn=null,ei=!1;function Bs(e,t,r){for(r=r.child;r!==null;)$$(e,t,r),r=r.sibling}function $$(e,t,r){if(Ii&&typeof Ii.onCommitFiberUnmount=="function")try{Ii.onCommitFiberUnmount(zy,r)}catch{}switch(r.tag){case 5:Nn||Yc(r,t);case 6:var n=pn,a=ei;pn=null,Bs(e,t,r),pn=n,ei=a,pn!==null&&(ei?(e=pn,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):pn.removeChild(r.stateNode));break;case 18:pn!==null&&(ei?(e=pn,r=r.stateNode,e.nodeType===8?nb(e.parentNode,r):e.nodeType===1&&nb(e,r),yh(e)):nb(pn,r.stateNode));break;case 4:n=pn,a=ei,pn=r.stateNode.containerInfo,ei=!0,Bs(e,t,r),pn=n,ei=a;break;case 0:case 11:case 14:case 15:if(!Nn&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&oj(r,t,o),a=a.next}while(a!==n)}Bs(e,t,r);break;case 1:if(!Nn&&(Yc(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){Or(r,t,l)}Bs(e,t,r);break;case 21:Bs(e,t,r);break;case 22:r.mode&1?(Nn=(n=Nn)||r.memoizedState!==null,Bs(e,t,r),Nn=n):Bs(e,t,r);break;default:Bs(e,t,r)}}function JP(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new v6),t.forEach(function(n){var a=P6.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function Va(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:pn=l.stateNode,ei=!1;break e;case 3:pn=l.stateNode.containerInfo,ei=!0;break e;case 4:pn=l.stateNode.containerInfo,ei=!0;break e}l=l.return}if(pn===null)throw Error(je(160));$$(i,o,a),pn=null,ei=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(u){Or(a,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)I$(t,e),t=t.sibling}function I$(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Va(t,e),ji(e),n&4){try{Yf(3,e,e.return),Gy(3,e)}catch(g){Or(e,e.return,g)}try{Yf(5,e,e.return)}catch(g){Or(e,e.return,g)}}break;case 1:Va(t,e),ji(e),n&512&&r!==null&&Yc(r,r.return);break;case 5:if(Va(t,e),ji(e),n&512&&r!==null&&Yc(r,r.return),e.flags&32){var a=e.stateNode;try{mh(a,"")}catch(g){Or(e,e.return,g)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&aM(a,i),Mw(l,o);var u=Mw(l,i);for(o=0;o<c.length;o+=2){var d=c[o],f=c[o+1];d==="style"?cM(a,f):d==="dangerouslySetInnerHTML"?oM(a,f):d==="children"?mh(a,f):K_(a,d,f,u)}switch(l){case"input":Ew(a,i);break;case"textarea":iM(a,i);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?nu(a,!!i.multiple,m,!1):h!==!!i.multiple&&(i.defaultValue!=null?nu(a,!!i.multiple,i.defaultValue,!0):nu(a,!!i.multiple,i.multiple?[]:"",!1))}a[_h]=i}catch(g){Or(e,e.return,g)}}break;case 6:if(Va(t,e),ji(e),n&4){if(e.stateNode===null)throw Error(je(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(g){Or(e,e.return,g)}}break;case 3:if(Va(t,e),ji(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{yh(t.containerInfo)}catch(g){Or(e,e.return,g)}break;case 4:Va(t,e),ji(e);break;case 13:Va(t,e),ji(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(NS=$r())),n&4&&JP(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(Nn=(u=Nn)||d,Va(t,e),Nn=u):Va(t,e),ji(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(De=e,d=e.child;d!==null;){for(f=De=d;De!==null;){switch(h=De,m=h.child,h.tag){case 0:case 11:case 14:case 15:Yf(4,h,h.return);break;case 1:Yc(h,h.return);var y=h.stateNode;if(typeof y.componentWillUnmount=="function"){n=h,r=h.return;try{t=n,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(g){Or(n,r,g)}}break;case 5:Yc(h,h.return);break;case 22:if(h.memoizedState!==null){ek(f);continue}}m!==null?(m.return=h,De=m):ek(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{a=f.stateNode,u?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=lM("display",o))}catch(g){Or(e,e.return,g)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(g){Or(e,e.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Va(t,e),ji(e),n&4&&JP(e);break;case 21:break;default:Va(t,e),ji(e)}}function ji(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(M$(r)){var n=r;break e}r=r.return}throw Error(je(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(mh(a,""),n.flags&=-33);var i=QP(e);uj(e,i,a);break;case 3:case 4:var o=n.stateNode.containerInfo,l=QP(e);cj(e,l,o);break;default:throw Error(je(161))}}catch(c){Or(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function x6(e,t,r){De=e,D$(e)}function D$(e,t,r){for(var n=(e.mode&1)!==0;De!==null;){var a=De,i=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||Np;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||Nn;l=Np;var u=Nn;if(Np=o,(Nn=c)&&!u)for(De=a;De!==null;)o=De,c=o.child,o.tag===22&&o.memoizedState!==null?tk(a):c!==null?(c.return=o,De=c):tk(a);for(;i!==null;)De=i,D$(i),i=i.sibling;De=a,Np=l,Nn=u}ZP(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,De=i):ZP(e)}}function ZP(e){for(;De!==null;){var t=De;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Nn||Gy(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Nn)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:Ya(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&DP(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}DP(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&yh(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(je(163))}Nn||t.flags&512&&lj(t)}catch(h){Or(t,t.return,h)}}if(t===e){De=null;break}if(r=t.sibling,r!==null){r.return=t.return,De=r;break}De=t.return}}function ek(e){for(;De!==null;){var t=De;if(t===e){De=null;break}var r=t.sibling;if(r!==null){r.return=t.return,De=r;break}De=t.return}}function tk(e){for(;De!==null;){var t=De;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Gy(4,t)}catch(c){Or(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){Or(t,a,c)}}var i=t.return;try{lj(t)}catch(c){Or(t,i,c)}break;case 5:var o=t.return;try{lj(t)}catch(c){Or(t,o,c)}}}catch(c){Or(t,t.return,c)}if(t===e){De=null;break}var l=t.sibling;if(l!==null){l.return=t.return,De=l;break}De=t.return}}var b6=Math.ceil,Gg=As.ReactCurrentDispatcher,SS=As.ReactCurrentOwner,Oa=As.ReactCurrentBatchConfig,Nt=0,cn=null,Ur=null,vn=0,aa=0,Gc=Bo(0),en=0,Eh=null,Dl=0,Xy=0,CS=0,Gf=null,qn=null,NS=0,Tu=1/0,ns=null,Xg=!1,dj=null,wo=null,Pp=!1,oo=null,Qg=0,Xf=0,fj=null,xg=-1,bg=0;function Ln(){return Nt&6?$r():xg!==-1?xg:xg=$r()}function jo(e){return e.mode&1?Nt&2&&vn!==0?vn&-vn:n6.transition!==null?(bg===0&&(bg=wM()),bg):(e=zt,e!==0||(e=window.event,e=e===void 0?16:kM(e.type)),e):1}function ci(e,t,r,n){if(50<Xf)throw Xf=0,fj=null,Error(je(185));Um(e,r,n),(!(Nt&2)||e!==cn)&&(e===cn&&(!(Nt&2)&&(Xy|=r),en===4&&Js(e,vn)),Qn(e,n),r===1&&Nt===0&&!(t.mode&1)&&(Tu=$r()+500,qy&&Fo()))}function Qn(e,t){var r=e.callbackNode;nV(e,t);var n=Mg(e,e===cn?vn:0);if(n===0)r!==null&&uP(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&uP(r),t===1)e.tag===0?r6(rk.bind(null,e)):KM(rk.bind(null,e)),JV(function(){!(Nt&6)&&Fo()}),r=null;else{switch(jM(n)){case 1:r=J_;break;case 4:r=xM;break;case 16:r=Rg;break;case 536870912:r=bM;break;default:r=Rg}r=H$(r,L$.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function L$(e,t){if(xg=-1,bg=0,Nt&6)throw Error(je(327));var r=e.callbackNode;if(lu()&&e.callbackNode!==r)return null;var n=Mg(e,e===cn?vn:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Jg(e,n);else{t=n;var a=Nt;Nt|=2;var i=F$();(cn!==e||vn!==t)&&(ns=null,Tu=$r()+500,Al(e,t));do try{_6();break}catch(l){B$(e,l)}while(!0);dS(),Gg.current=i,Nt=a,Ur!==null?t=0:(cn=null,vn=0,t=en)}if(t!==0){if(t===2&&(a=Bw(e),a!==0&&(n=a,t=hj(e,a))),t===1)throw r=Eh,Al(e,0),Js(e,n),Qn(e,$r()),r;if(t===6)Js(e,n);else{if(a=e.current.alternate,!(n&30)&&!w6(a)&&(t=Jg(e,n),t===2&&(i=Bw(e),i!==0&&(n=i,t=hj(e,i))),t===1))throw r=Eh,Al(e,0),Js(e,n),Qn(e,$r()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(je(345));case 2:al(e,qn,ns);break;case 3:if(Js(e,n),(n&130023424)===n&&(t=NS+500-$r(),10<t)){if(Mg(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){Ln(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Kw(al.bind(null,e,qn,ns),t);break}al(e,qn,ns);break;case 4:if(Js(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var o=31-li(n);i=1<<o,o=t[o],o>a&&(a=o),n&=~i}if(n=a,n=$r()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*b6(n/1960))-n,10<n){e.timeoutHandle=Kw(al.bind(null,e,qn,ns),n);break}al(e,qn,ns);break;case 5:al(e,qn,ns);break;default:throw Error(je(329))}}}return Qn(e,$r()),e.callbackNode===r?L$.bind(null,e):null}function hj(e,t){var r=Gf;return e.current.memoizedState.isDehydrated&&(Al(e,t).flags|=256),e=Jg(e,t),e!==2&&(t=qn,qn=r,t!==null&&mj(t)),e}function mj(e){qn===null?qn=e:qn.push.apply(qn,e)}function w6(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!mi(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Js(e,t){for(t&=~CS,t&=~Xy,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-li(t),n=1<<r;e[r]=-1,t&=~n}}function rk(e){if(Nt&6)throw Error(je(327));lu();var t=Mg(e,0);if(!(t&1))return Qn(e,$r()),null;var r=Jg(e,t);if(e.tag!==0&&r===2){var n=Bw(e);n!==0&&(t=n,r=hj(e,n))}if(r===1)throw r=Eh,Al(e,0),Js(e,t),Qn(e,$r()),r;if(r===6)throw Error(je(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,al(e,qn,ns),Qn(e,$r()),null}function PS(e,t){var r=Nt;Nt|=1;try{return e(t)}finally{Nt=r,Nt===0&&(Tu=$r()+500,qy&&Fo())}}function Ll(e){oo!==null&&oo.tag===0&&!(Nt&6)&&lu();var t=Nt;Nt|=1;var r=Oa.transition,n=zt;try{if(Oa.transition=null,zt=1,e)return e()}finally{zt=n,Oa.transition=r,Nt=t,!(Nt&6)&&Fo()}}function kS(){aa=Gc.current,fr(Gc)}function Al(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,QV(r)),Ur!==null)for(r=Ur.return;r!==null;){var n=r;switch(lS(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Bg();break;case 3:Au(),fr(Gn),fr(En),vS();break;case 5:gS(n);break;case 4:Au();break;case 13:fr(br);break;case 19:fr(br);break;case 10:fS(n.type._context);break;case 22:case 23:kS()}r=r.return}if(cn=e,Ur=e=_o(e.current,null),vn=aa=t,en=0,Eh=null,CS=Xy=Dl=0,qn=Gf=null,ml!==null){for(t=0;t<ml.length;t++)if(r=ml[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=a,n.next=o}r.pending=n}ml=null}return e}function B$(e,t){do{var r=Ur;try{if(dS(),gg.current=Yg,Kg){for(var n=jr.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}Kg=!1}if(Il=0,on=Jr=jr=null,Kf=!1,Nh=0,SS.current=null,r===null||r.return===null){en=1,Eh=t,Ur=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=vn,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=VP(o);if(m!==null){m.flags&=-257,WP(m,o,l,i,t),m.mode&1&&UP(i,u,t),t=m,c=u;var y=t.updateQueue;if(y===null){var g=new Set;g.add(c),t.updateQueue=g}else y.add(c);break e}else{if(!(t&1)){UP(i,u,t),ES();break e}c=Error(je(426))}}else if(pr&&l.mode&1){var p=VP(o);if(p!==null){!(p.flags&65536)&&(p.flags|=256),WP(p,o,l,i,t),cS(Ou(c,l));break e}}i=c=Ou(c,l),en!==4&&(en=2),Gf===null?Gf=[i]:Gf.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var v=j$(i,c,t);IP(i,v);break e;case 1:l=c;var x=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(wo===null||!wo.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t;var _=_$(i,l,t);IP(i,_);break e}}i=i.return}while(i!==null)}U$(r)}catch(j){t=j,Ur===r&&r!==null&&(Ur=r=r.return);continue}break}while(!0)}function F$(){var e=Gg.current;return Gg.current=Yg,e===null?Yg:e}function ES(){(en===0||en===3||en===2)&&(en=4),cn===null||!(Dl&268435455)&&!(Xy&268435455)||Js(cn,vn)}function Jg(e,t){var r=Nt;Nt|=2;var n=F$();(cn!==e||vn!==t)&&(ns=null,Al(e,t));do try{j6();break}catch(a){B$(e,a)}while(!0);if(dS(),Nt=r,Gg.current=n,Ur!==null)throw Error(je(261));return cn=null,vn=0,en}function j6(){for(;Ur!==null;)z$(Ur)}function _6(){for(;Ur!==null&&!Y8();)z$(Ur)}function z$(e){var t=W$(e.alternate,e,aa);e.memoizedProps=e.pendingProps,t===null?U$(e):Ur=t,SS.current=null}function U$(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=g6(r,t),r!==null){r.flags&=32767,Ur=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{en=6,Ur=null;return}}else if(r=p6(r,t,aa),r!==null){Ur=r;return}if(t=t.sibling,t!==null){Ur=t;return}Ur=t=e}while(t!==null);en===0&&(en=5)}function al(e,t,r){var n=zt,a=Oa.transition;try{Oa.transition=null,zt=1,S6(e,t,r,n)}finally{Oa.transition=a,zt=n}return null}function S6(e,t,r,n){do lu();while(oo!==null);if(Nt&6)throw Error(je(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(je(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(aV(e,i),e===cn&&(Ur=cn=null,vn=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Pp||(Pp=!0,H$(Rg,function(){return lu(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Oa.transition,Oa.transition=null;var o=zt;zt=1;var l=Nt;Nt|=4,SS.current=null,y6(e,r),I$(r,e),WV(Hw),$g=!!Ww,Hw=Ww=null,e.current=r,x6(r),G8(),Nt=l,zt=o,Oa.transition=i}else e.current=r;if(Pp&&(Pp=!1,oo=e,Qg=a),i=e.pendingLanes,i===0&&(wo=null),J8(r.stateNode),Qn(e,$r()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(Xg)throw Xg=!1,e=dj,dj=null,e;return Qg&1&&e.tag!==0&&lu(),i=e.pendingLanes,i&1?e===fj?Xf++:(Xf=0,fj=e):Xf=0,Fo(),null}function lu(){if(oo!==null){var e=jM(Qg),t=Oa.transition,r=zt;try{if(Oa.transition=null,zt=16>e?16:e,oo===null)var n=!1;else{if(e=oo,oo=null,Qg=0,Nt&6)throw Error(je(331));var a=Nt;for(Nt|=4,De=e.current;De!==null;){var i=De,o=i.child;if(De.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(De=u;De!==null;){var d=De;switch(d.tag){case 0:case 11:case 15:Yf(8,d,i)}var f=d.child;if(f!==null)f.return=d,De=f;else for(;De!==null;){d=De;var h=d.sibling,m=d.return;if(R$(d),d===u){De=null;break}if(h!==null){h.return=m,De=h;break}De=m}}}var y=i.alternate;if(y!==null){var g=y.child;if(g!==null){y.child=null;do{var p=g.sibling;g.sibling=null,g=p}while(g!==null)}}De=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,De=o;else e:for(;De!==null;){if(i=De,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Yf(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,De=v;break e}De=i.return}}var x=e.current;for(De=x;De!==null;){o=De;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,De=b;else e:for(o=x;De!==null;){if(l=De,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Gy(9,l)}}catch(j){Or(l,l.return,j)}if(l===o){De=null;break e}var _=l.sibling;if(_!==null){_.return=l.return,De=_;break e}De=l.return}}if(Nt=a,Fo(),Ii&&typeof Ii.onPostCommitFiberRoot=="function")try{Ii.onPostCommitFiberRoot(zy,e)}catch{}n=!0}return n}finally{zt=r,Oa.transition=t}}return!1}function nk(e,t,r){t=Ou(r,t),t=j$(e,t,1),e=bo(e,t,1),t=Ln(),e!==null&&(Um(e,1,t),Qn(e,t))}function Or(e,t,r){if(e.tag===3)nk(e,e,r);else for(;t!==null;){if(t.tag===3){nk(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(wo===null||!wo.has(n))){e=Ou(r,e),e=_$(t,e,1),t=bo(t,e,1),e=Ln(),t!==null&&(Um(t,1,e),Qn(t,e));break}}t=t.return}}function C6(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Ln(),e.pingedLanes|=e.suspendedLanes&r,cn===e&&(vn&r)===r&&(en===4||en===3&&(vn&130023424)===vn&&500>$r()-NS?Al(e,0):CS|=r),Qn(e,t)}function V$(e,t){t===0&&(e.mode&1?(t=vp,vp<<=1,!(vp&130023424)&&(vp=4194304)):t=1);var r=Ln();e=bs(e,t),e!==null&&(Um(e,t,r),Qn(e,r))}function N6(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),V$(e,r)}function P6(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(je(314))}n!==null&&n.delete(t),V$(e,r)}var W$;W$=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Gn.current)Kn=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Kn=!1,m6(e,t,r);Kn=!!(e.flags&131072)}else Kn=!1,pr&&t.flags&1048576&&YM(t,Ug,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;yg(e,t),e=t.pendingProps;var a=Pu(t,En.current);ou(t,r),a=xS(null,t,n,e,a,r);var i=bS();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Xn(n)?(i=!0,Fg(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,mS(t),a.updater=Yy,t.stateNode=a,a._reactInternals=t,ej(t,n,e,r),t=nj(null,t,n,!0,i,r)):(t.tag=0,pr&&i&&oS(t),On(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(yg(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=E6(n),e=Ya(n,e),a){case 0:t=rj(null,t,n,e,r);break e;case 1:t=KP(null,t,n,e,r);break e;case 11:t=HP(null,t,n,e,r);break e;case 14:t=qP(null,t,n,Ya(n.type,e),r);break e}throw Error(je(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Ya(n,a),rj(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Ya(n,a),KP(e,t,n,a,r);case 3:e:{if(P$(t),e===null)throw Error(je(387));n=t.pendingProps,i=t.memoizedState,a=i.element,e$(e,t),Hg(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=Ou(Error(je(423)),t),t=YP(e,t,n,r,a);break e}else if(n!==a){a=Ou(Error(je(424)),t),t=YP(e,t,n,r,a);break e}else for(ua=xo(t.stateNode.containerInfo.firstChild),da=t,pr=!0,ai=null,r=JM(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ku(),n===a){t=ws(e,t,r);break e}On(e,t,n,r)}t=t.child}return t;case 5:return t$(t),e===null&&Qw(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,qw(n,a)?o=null:i!==null&&qw(n,i)&&(t.flags|=32),N$(e,t),On(e,t,o,r),t.child;case 6:return e===null&&Qw(t),null;case 13:return k$(e,t,r);case 4:return pS(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Eu(t,null,n,r):On(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Ya(n,a),HP(e,t,n,a,r);case 7:return On(e,t,t.pendingProps,r),t.child;case 8:return On(e,t,t.pendingProps.children,r),t.child;case 12:return On(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,er(Vg,n._currentValue),n._currentValue=o,i!==null)if(mi(i.value,o)){if(i.children===a.children&&!Gn.current){t=ws(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=ms(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),Jw(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(je(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),Jw(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}On(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,ou(t,r),a=Ra(a),n=n(a),t.flags|=1,On(e,t,n,r),t.child;case 14:return n=t.type,a=Ya(n,t.pendingProps),a=Ya(n.type,a),qP(e,t,n,a,r);case 15:return S$(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Ya(n,a),yg(e,t),t.tag=1,Xn(n)?(e=!0,Fg(t)):e=!1,ou(t,r),w$(t,n,a),ej(t,n,a,r),nj(null,t,n,!0,e,r);case 19:return E$(e,t,r);case 22:return C$(e,t,r)}throw Error(je(156,t.tag))};function H$(e,t){return yM(e,t)}function k6(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ea(e,t,r,n){return new k6(e,t,r,n)}function AS(e){return e=e.prototype,!(!e||!e.isReactComponent)}function E6(e){if(typeof e=="function")return AS(e)?1:0;if(e!=null){if(e=e.$$typeof,e===G_)return 11;if(e===X_)return 14}return 2}function _o(e,t){var r=e.alternate;return r===null?(r=Ea(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function wg(e,t,r,n,a,i){var o=2;if(n=e,typeof e=="function")AS(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Bc:return Ol(r.children,a,i,t);case Y_:o=8,a|=8;break;case Sw:return e=Ea(12,r,t,a|2),e.elementType=Sw,e.lanes=i,e;case Cw:return e=Ea(13,r,t,a),e.elementType=Cw,e.lanes=i,e;case Nw:return e=Ea(19,r,t,a),e.elementType=Nw,e.lanes=i,e;case tM:return Qy(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ZR:o=10;break e;case eM:o=9;break e;case G_:o=11;break e;case X_:o=14;break e;case qs:o=16,n=null;break e}throw Error(je(130,e==null?e:typeof e,""))}return t=Ea(o,r,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function Ol(e,t,r,n){return e=Ea(7,e,n,t),e.lanes=r,e}function Qy(e,t,r,n){return e=Ea(22,e,n,t),e.elementType=tM,e.lanes=r,e.stateNode={isHidden:!1},e}function db(e,t,r){return e=Ea(6,e,null,t),e.lanes=r,e}function fb(e,t,r){return t=Ea(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function A6(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=q0(0),this.expirationTimes=q0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=q0(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function OS(e,t,r,n,a,i,o,l,c){return e=new A6(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Ea(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},mS(i),e}function O6(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Lc,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function q$(e){if(!e)return Oo;e=e._reactInternals;e:{if(ec(e)!==e||e.tag!==1)throw Error(je(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Xn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(je(171))}if(e.tag===1){var r=e.type;if(Xn(r))return qM(e,r,t)}return t}function K$(e,t,r,n,a,i,o,l,c){return e=OS(r,n,!0,e,a,i,o,l,c),e.context=q$(null),r=e.current,n=Ln(),a=jo(r),i=ms(n,a),i.callback=t??null,bo(r,i,a),e.current.lanes=a,Um(e,a,n),Qn(e,n),e}function Jy(e,t,r,n){var a=t.current,i=Ln(),o=jo(a);return r=q$(r),t.context===null?t.context=r:t.pendingContext=r,t=ms(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=bo(a,t,o),e!==null&&(ci(e,a,o,i),pg(e,a,o)),o}function Zg(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ak(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function TS(e,t){ak(e,t),(e=e.alternate)&&ak(e,t)}function T6(){return null}var Y$=typeof reportError=="function"?reportError:function(e){console.error(e)};function RS(e){this._internalRoot=e}Zy.prototype.render=RS.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(je(409));Jy(e,t,null,null)};Zy.prototype.unmount=RS.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ll(function(){Jy(null,e,null,null)}),t[xs]=null}};function Zy(e){this._internalRoot=e}Zy.prototype.unstable_scheduleHydration=function(e){if(e){var t=CM();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Qs.length&&t!==0&&t<Qs[r].priority;r++);Qs.splice(r,0,e),r===0&&PM(e)}};function MS(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ex(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ik(){}function R6(e,t,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var u=Zg(o);i.call(u)}}var o=K$(t,n,e,0,null,!1,!1,"",ik);return e._reactRootContainer=o,e[xs]=o.current,wh(e.nodeType===8?e.parentNode:e),Ll(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var l=n;n=function(){var u=Zg(c);l.call(u)}}var c=OS(e,0,!1,null,null,!1,!1,"",ik);return e._reactRootContainer=c,e[xs]=c.current,wh(e.nodeType===8?e.parentNode:e),Ll(function(){Jy(t,c,r,n)}),c}function tx(e,t,r,n,a){var i=r._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var c=Zg(o);l.call(c)}}Jy(t,o,e,a)}else o=R6(r,t,e,a,n);return Zg(o)}_M=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=If(t.pendingLanes);r!==0&&(Z_(t,r|1),Qn(t,$r()),!(Nt&6)&&(Tu=$r()+500,Fo()))}break;case 13:Ll(function(){var n=bs(e,1);if(n!==null){var a=Ln();ci(n,e,1,a)}}),TS(e,1)}};eS=function(e){if(e.tag===13){var t=bs(e,134217728);if(t!==null){var r=Ln();ci(t,e,134217728,r)}TS(e,134217728)}};SM=function(e){if(e.tag===13){var t=jo(e),r=bs(e,t);if(r!==null){var n=Ln();ci(r,e,t,n)}TS(e,t)}};CM=function(){return zt};NM=function(e,t){var r=zt;try{return zt=e,t()}finally{zt=r}};Iw=function(e,t,r){switch(t){case"input":if(Ew(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=Hy(n);if(!a)throw Error(je(90));nM(n),Ew(n,a)}}}break;case"textarea":iM(e,r);break;case"select":t=r.value,t!=null&&nu(e,!!r.multiple,t,!1)}};fM=PS;hM=Ll;var M6={usingClientEntryPoint:!1,Events:[Wm,Vc,Hy,uM,dM,PS]},hf={findFiberByHostInstance:hl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$6={bundleType:hf.bundleType,version:hf.version,rendererPackageName:hf.rendererPackageName,rendererConfig:hf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:As.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=gM(e),e===null?null:e.stateNode},findFiberByHostInstance:hf.findFiberByHostInstance||T6,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kp.isDisabled&&kp.supportsFiber)try{zy=kp.inject($6),Ii=kp}catch{}}va.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M6;va.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!MS(t))throw Error(je(200));return O6(e,t,null,r)};va.createRoot=function(e,t){if(!MS(e))throw Error(je(299));var r=!1,n="",a=Y$;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=OS(e,1,!1,null,null,r,!1,n,a),e[xs]=t.current,wh(e.nodeType===8?e.parentNode:e),new RS(t)};va.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(je(188)):(e=Object.keys(e).join(","),Error(je(268,e)));return e=gM(t),e=e===null?null:e.stateNode,e};va.flushSync=function(e){return Ll(e)};va.hydrate=function(e,t,r){if(!ex(t))throw Error(je(200));return tx(null,e,t,!0,r)};va.hydrateRoot=function(e,t,r){if(!MS(e))throw Error(je(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",o=Y$;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=K$(t,null,e,1,r??null,a,!1,i,o),e[xs]=t.current,wh(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new Zy(t)};va.render=function(e,t,r){if(!ex(t))throw Error(je(200));return tx(null,e,t,!1,r)};va.unmountComponentAtNode=function(e){if(!ex(e))throw Error(je(40));return e._reactRootContainer?(Ll(function(){tx(null,null,e,!1,function(){e._reactRootContainer=null,e[xs]=null})}),!0):!1};va.unstable_batchedUpdates=PS;va.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!ex(r))throw Error(je(200));if(e==null||e._reactInternals===void 0)throw Error(je(38));return tx(e,t,r,!1,n)};va.version="18.3.1-next-f1338f8080-20240426";function G$(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(G$)}catch(e){console.error(e)}}G$(),GR.exports=va;var tc=GR.exports;const X$=It(tc);var Q$,sk=tc;Q$=sk.createRoot,sk.hydrateRoot;const I6=1,D6=1e6;let hb=0;function L6(){return hb=(hb+1)%Number.MAX_SAFE_INTEGER,hb.toString()}const mb=new Map,ok=e=>{if(mb.has(e))return;const t=setTimeout(()=>{mb.delete(e),Qf({type:"REMOVE_TOAST",toastId:e})},D6);mb.set(e,t)},B6=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,I6)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?ok(r):e.toasts.forEach(n=>{ok(n.id)}),{...e,toasts:e.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},jg=[];let _g={toasts:[]};function Qf(e){_g=B6(_g,e),jg.forEach(t=>{t(_g)})}function gn({...e}){const t=L6(),r=a=>Qf({type:"UPDATE_TOAST",toast:{...a,id:t}}),n=()=>Qf({type:"DISMISS_TOAST",toastId:t});return Qf({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:a=>{a||n()}}}),{id:t,dismiss:n,update:r}}function $S(){const[e,t]=w.useState(_g);return w.useEffect(()=>(jg.push(t),()=>{const r=jg.indexOf(t);r>-1&&jg.splice(r,1)}),[e]),{...e,toast:gn,dismiss:r=>Qf({type:"DISMISS_TOAST",toastId:r})}}function Te(e,t,{checkForDefaultPrevented:r=!0}={}){return function(a){if(e==null||e(a),r===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function lk(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function J$(...e){return t=>{let r=!1;const n=e.map(a=>{const i=lk(a,t);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let a=0;a<n.length;a++){const i=n[a];typeof i=="function"?i():lk(e[a],null)}}}}function ut(...e){return w.useCallback(J$(...e),e)}function F6(e,t){const r=w.createContext(t),n=i=>{const{children:o,...l}=i,c=w.useMemo(()=>l,Object.values(l));return s.jsx(r.Provider,{value:c,children:o})};n.displayName=e+"Provider";function a(i){const o=w.useContext(r);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[n,a]}function Un(e,t=[]){let r=[];function n(i,o){const l=w.createContext(o),c=r.length;r=[...r,o];const u=f=>{var v;const{scope:h,children:m,...y}=f,g=((v=h==null?void 0:h[e])==null?void 0:v[c])||l,p=w.useMemo(()=>y,Object.values(y));return s.jsx(g.Provider,{value:p,children:m})};u.displayName=i+"Provider";function d(f,h){var g;const m=((g=h==null?void 0:h[e])==null?void 0:g[c])||l,y=w.useContext(m);if(y)return y;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[u,d]}const a=()=>{const i=r.map(o=>w.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return w.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[n,z6(a,...t)]}function z6(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=n.reduce((l,{useScope:c,scopeName:u})=>{const f=c(i)[`__scope${u}`];return{...l,...f}},{});return w.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}function Bl(e){const t=U6(e),r=w.forwardRef((n,a)=>{const{children:i,...o}=n,l=w.Children.toArray(i),c=l.find(V6);if(c){const u=c.props.children,d=l.map(f=>f===c?w.Children.count(u)>1?w.Children.only(null):w.isValidElement(u)?u.props.children:null:f);return s.jsx(t,{...o,ref:a,children:w.isValidElement(u)?w.cloneElement(u,void 0,d):null})}return s.jsx(t,{...o,ref:a,children:i})});return r.displayName=`${e}.Slot`,r}var Z$=Bl("Slot");function U6(e){const t=w.forwardRef((r,n)=>{const{children:a,...i}=r;if(w.isValidElement(a)){const o=H6(a),l=W6(i,a.props);return a.type!==w.Fragment&&(l.ref=n?J$(n,o):o),w.cloneElement(a,l)}return w.Children.count(a)>1?w.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var eI=Symbol("radix.slottable");function tI(e){const t=({children:r})=>s.jsx(s.Fragment,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=eI,t}function V6(e){return w.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===eI}function W6(e,t){const r={...t};for(const n in t){const a=e[n],i=t[n];/^on[A-Z]/.test(n)?a&&i?r[n]=(...l)=>{const c=i(...l);return a(...l),c}:a&&(r[n]=a):n==="style"?r[n]={...a,...i}:n==="className"&&(r[n]=[a,i].filter(Boolean).join(" "))}return{...e,...r}}function H6(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function rx(e){const t=e+"CollectionProvider",[r,n]=Un(t),[a,i]=r(t,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:p,children:v}=g,x=$.useRef(null),b=$.useRef(new Map).current;return s.jsx(a,{scope:p,itemMap:b,collectionRef:x,children:v})};o.displayName=t;const l=e+"CollectionSlot",c=Bl(l),u=$.forwardRef((g,p)=>{const{scope:v,children:x}=g,b=i(l,v),_=ut(p,b.collectionRef);return s.jsx(c,{ref:_,children:x})});u.displayName=l;const d=e+"CollectionItemSlot",f="data-radix-collection-item",h=Bl(d),m=$.forwardRef((g,p)=>{const{scope:v,children:x,...b}=g,_=$.useRef(null),j=ut(p,_),S=i(d,v);return $.useEffect(()=>(S.itemMap.set(_,{ref:_,...b}),()=>void S.itemMap.delete(_))),s.jsx(h,{[f]:"",ref:j,children:x})});m.displayName=d;function y(g){const p=i(e+"CollectionConsumer",g);return $.useCallback(()=>{const x=p.collectionRef.current;if(!x)return[];const b=Array.from(x.querySelectorAll(`[${f}]`));return Array.from(p.itemMap.values()).sort((S,C)=>b.indexOf(S.ref.current)-b.indexOf(C.ref.current))},[p.collectionRef,p.itemMap])}return[{Provider:o,Slot:u,ItemSlot:m},y,n]}var q6=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],We=q6.reduce((e,t)=>{const r=Bl(`Primitive.${t}`),n=w.forwardRef((a,i)=>{const{asChild:o,...l}=a,c=o?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(c,{...l,ref:i})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function rI(e,t){e&&tc.flushSync(()=>e.dispatchEvent(t))}function Zr(e){const t=w.useRef(e);return w.useEffect(()=>{t.current=e}),w.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function K6(e,t=globalThis==null?void 0:globalThis.document){const r=Zr(e);w.useEffect(()=>{const n=a=>{a.key==="Escape"&&r(a)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var Y6="DismissableLayer",pj="dismissableLayer.update",G6="dismissableLayer.pointerDownOutside",X6="dismissableLayer.focusOutside",ck,nI=w.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Pd=w.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=e,u=w.useContext(nI),[d,f]=w.useState(null),h=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=w.useState({}),y=ut(t,C=>f(C)),g=Array.from(u.layers),[p]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),v=g.indexOf(p),x=d?g.indexOf(d):-1,b=u.layersWithOutsidePointerEventsDisabled.size>0,_=x>=v,j=J6(C=>{const P=C.target,N=[...u.branches].some(E=>E.contains(P));!_||N||(a==null||a(C),o==null||o(C),C.defaultPrevented||l==null||l())},h),S=Z6(C=>{const P=C.target;[...u.branches].some(E=>E.contains(P))||(i==null||i(C),o==null||o(C),C.defaultPrevented||l==null||l())},h);return K6(C=>{x===u.layers.size-1&&(n==null||n(C),!C.defaultPrevented&&l&&(C.preventDefault(),l()))},h),w.useEffect(()=>{if(d)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(ck=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),uk(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=ck)}},[d,h,r,u]),w.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),uk())},[d,u]),w.useEffect(()=>{const C=()=>m({});return document.addEventListener(pj,C),()=>document.removeEventListener(pj,C)},[]),s.jsx(We.div,{...c,ref:y,style:{pointerEvents:b?_?"auto":"none":void 0,...e.style},onFocusCapture:Te(e.onFocusCapture,S.onFocusCapture),onBlurCapture:Te(e.onBlurCapture,S.onBlurCapture),onPointerDownCapture:Te(e.onPointerDownCapture,j.onPointerDownCapture)})});Pd.displayName=Y6;var Q6="DismissableLayerBranch",aI=w.forwardRef((e,t)=>{const r=w.useContext(nI),n=w.useRef(null),a=ut(t,n);return w.useEffect(()=>{const i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),s.jsx(We.div,{...e,ref:a})});aI.displayName=Q6;function J6(e,t=globalThis==null?void 0:globalThis.document){const r=Zr(e),n=w.useRef(!1),a=w.useRef(()=>{});return w.useEffect(()=>{const i=l=>{if(l.target&&!n.current){let c=function(){iI(G6,r,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=c,t.addEventListener("click",a.current,{once:!0})):c()}else t.removeEventListener("click",a.current);n.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function Z6(e,t=globalThis==null?void 0:globalThis.document){const r=Zr(e),n=w.useRef(!1);return w.useEffect(()=>{const a=i=>{i.target&&!n.current&&iI(X6,r,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function uk(){const e=new CustomEvent(pj);document.dispatchEvent(e)}function iI(e,t,r,{discrete:n}){const a=r.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?rI(a,i):a.dispatchEvent(i)}var eW=Pd,tW=aI,un=globalThis!=null&&globalThis.document?w.useLayoutEffect:()=>{},rW="Portal",qm=w.forwardRef((e,t)=>{var l;const{container:r,...n}=e,[a,i]=w.useState(!1);un(()=>i(!0),[]);const o=r||a&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?X$.createPortal(s.jsx(We.div,{...n,ref:t}),o):null});qm.displayName=rW;function nW(e,t){return w.useReducer((r,n)=>t[r][n]??r,e)}var Zn=e=>{const{present:t,children:r}=e,n=aW(t),a=typeof r=="function"?r({present:n.isPresent}):w.Children.only(r),i=ut(n.ref,iW(a));return typeof r=="function"||n.isPresent?w.cloneElement(a,{ref:i}):null};Zn.displayName="Presence";function aW(e){const[t,r]=w.useState(),n=w.useRef(null),a=w.useRef(e),i=w.useRef("none"),o=e?"mounted":"unmounted",[l,c]=nW(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return w.useEffect(()=>{const u=Ep(n.current);i.current=l==="mounted"?u:"none"},[l]),un(()=>{const u=n.current,d=a.current;if(d!==e){const h=i.current,m=Ep(u);e?c("MOUNT"):m==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&h!==m?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),un(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,f=m=>{const g=Ep(n.current).includes(m.animationName);if(m.target===t&&g&&(c("ANIMATION_END"),!a.current)){const p=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=p)})}},h=m=>{m.target===t&&(i.current=Ep(n.current))};return t.addEventListener("animationstart",h),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",h),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:w.useCallback(u=>{n.current=u?getComputedStyle(u):null,r(u)},[])}}function Ep(e){return(e==null?void 0:e.animationName)||"none"}function iW(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var sW=W_[" useInsertionEffect ".trim().toString()]||un;function Jn({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[a,i,o]=oW({defaultProp:t,onChange:r}),l=e!==void 0,c=l?e:a;{const d=w.useRef(e!==void 0);w.useEffect(()=>{const f=d.current;f!==l&&console.warn(`${n} is changing from ${f?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,n])}const u=w.useCallback(d=>{var f;if(l){const h=lW(d)?d(e):d;h!==e&&((f=o.current)==null||f.call(o,h))}else i(d)},[l,e,i,o]);return[c,u]}function oW({defaultProp:e,onChange:t}){const[r,n]=w.useState(e),a=w.useRef(r),i=w.useRef(t);return sW(()=>{i.current=t},[t]),w.useEffect(()=>{var o;a.current!==r&&((o=i.current)==null||o.call(i,r),a.current=r)},[r,a]),[r,n,i]}function lW(e){return typeof e=="function"}var sI=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),cW="VisuallyHidden",nx=w.forwardRef((e,t)=>s.jsx(We.span,{...e,ref:t,style:{...sI,...e.style}}));nx.displayName=cW;var uW=nx,IS="ToastProvider",[DS,dW,fW]=rx("Toast"),[oI,i2e]=Un("Toast",[fW]),[hW,ax]=oI(IS),lI=e=>{const{__scopeToast:t,label:r="Notification",duration:n=5e3,swipeDirection:a="right",swipeThreshold:i=50,children:o}=e,[l,c]=w.useState(null),[u,d]=w.useState(0),f=w.useRef(!1),h=w.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${IS}\`. Expected non-empty \`string\`.`),s.jsx(DS.Provider,{scope:t,children:s.jsx(hW,{scope:t,label:r,duration:n,swipeDirection:a,swipeThreshold:i,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:w.useCallback(()=>d(m=>m+1),[]),onToastRemove:w.useCallback(()=>d(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:h,children:o})})};lI.displayName=IS;var cI="ToastViewport",mW=["F8"],gj="toast.viewportPause",vj="toast.viewportResume",uI=w.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:n=mW,label:a="Notifications ({hotkey})",...i}=e,o=ax(cI,r),l=dW(r),c=w.useRef(null),u=w.useRef(null),d=w.useRef(null),f=w.useRef(null),h=ut(t,f,o.onViewportChange),m=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),y=o.toastCount>0;w.useEffect(()=>{const p=v=>{var b;n.length!==0&&n.every(_=>v[_]||v.code===_)&&((b=f.current)==null||b.focus())};return document.addEventListener("keydown",p),()=>document.removeEventListener("keydown",p)},[n]),w.useEffect(()=>{const p=c.current,v=f.current;if(y&&p&&v){const x=()=>{if(!o.isClosePausedRef.current){const S=new CustomEvent(gj);v.dispatchEvent(S),o.isClosePausedRef.current=!0}},b=()=>{if(o.isClosePausedRef.current){const S=new CustomEvent(vj);v.dispatchEvent(S),o.isClosePausedRef.current=!1}},_=S=>{!p.contains(S.relatedTarget)&&b()},j=()=>{p.contains(document.activeElement)||b()};return p.addEventListener("focusin",x),p.addEventListener("focusout",_),p.addEventListener("pointermove",x),p.addEventListener("pointerleave",j),window.addEventListener("blur",x),window.addEventListener("focus",b),()=>{p.removeEventListener("focusin",x),p.removeEventListener("focusout",_),p.removeEventListener("pointermove",x),p.removeEventListener("pointerleave",j),window.removeEventListener("blur",x),window.removeEventListener("focus",b)}}},[y,o.isClosePausedRef]);const g=w.useCallback(({tabbingDirection:p})=>{const x=l().map(b=>{const _=b.ref.current,j=[_,...PW(_)];return p==="forwards"?j:j.reverse()});return(p==="forwards"?x.reverse():x).flat()},[l]);return w.useEffect(()=>{const p=f.current;if(p){const v=x=>{var j,S,C;const b=x.altKey||x.ctrlKey||x.metaKey;if(x.key==="Tab"&&!b){const P=document.activeElement,N=x.shiftKey;if(x.target===p&&N){(j=u.current)==null||j.focus();return}const T=g({tabbingDirection:N?"backwards":"forwards"}),R=T.findIndex(k=>k===P);pb(T.slice(R+1))?x.preventDefault():N?(S=u.current)==null||S.focus():(C=d.current)==null||C.focus()}};return p.addEventListener("keydown",v),()=>p.removeEventListener("keydown",v)}},[l,g]),s.jsxs(tW,{ref:c,role:"region","aria-label":a.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:y?void 0:"none"},children:[y&&s.jsx(yj,{ref:u,onFocusFromOutsideViewport:()=>{const p=g({tabbingDirection:"forwards"});pb(p)}}),s.jsx(DS.Slot,{scope:r,children:s.jsx(We.ol,{tabIndex:-1,...i,ref:h})}),y&&s.jsx(yj,{ref:d,onFocusFromOutsideViewport:()=>{const p=g({tabbingDirection:"backwards"});pb(p)}})]})});uI.displayName=cI;var dI="ToastFocusProxy",yj=w.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...a}=e,i=ax(dI,r);return s.jsx(nx,{"aria-hidden":!0,tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:o=>{var u;const l=o.relatedTarget;!((u=i.viewport)!=null&&u.contains(l))&&n()}})});yj.displayName=dI;var Km="Toast",pW="toast.swipeStart",gW="toast.swipeMove",vW="toast.swipeCancel",yW="toast.swipeEnd",fI=w.forwardRef((e,t)=>{const{forceMount:r,open:n,defaultOpen:a,onOpenChange:i,...o}=e,[l,c]=Jn({prop:n,defaultProp:a??!0,onChange:i,caller:Km});return s.jsx(Zn,{present:r||l,children:s.jsx(wW,{open:l,...o,ref:t,onClose:()=>c(!1),onPause:Zr(e.onPause),onResume:Zr(e.onResume),onSwipeStart:Te(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Te(e.onSwipeMove,u=>{const{x:d,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:Te(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Te(e.onSwipeEnd,u=>{const{x:d,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});fI.displayName=Km;var[xW,bW]=oI(Km,{onClose(){}}),wW=w.forwardRef((e,t)=>{const{__scopeToast:r,type:n="foreground",duration:a,open:i,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:f,onSwipeCancel:h,onSwipeEnd:m,...y}=e,g=ax(Km,r),[p,v]=w.useState(null),x=ut(t,k=>v(k)),b=w.useRef(null),_=w.useRef(null),j=a||g.duration,S=w.useRef(0),C=w.useRef(j),P=w.useRef(0),{onToastAdd:N,onToastRemove:E}=g,A=Zr(()=>{var O;(p==null?void 0:p.contains(document.activeElement))&&((O=g.viewport)==null||O.focus()),o()}),T=w.useCallback(k=>{!k||k===1/0||(window.clearTimeout(P.current),S.current=new Date().getTime(),P.current=window.setTimeout(A,k))},[A]);w.useEffect(()=>{const k=g.viewport;if(k){const O=()=>{T(C.current),u==null||u()},M=()=>{const D=new Date().getTime()-S.current;C.current=C.current-D,window.clearTimeout(P.current),c==null||c()};return k.addEventListener(gj,M),k.addEventListener(vj,O),()=>{k.removeEventListener(gj,M),k.removeEventListener(vj,O)}}},[g.viewport,j,c,u,T]),w.useEffect(()=>{i&&!g.isClosePausedRef.current&&T(j)},[i,j,g.isClosePausedRef,T]),w.useEffect(()=>(N(),()=>E()),[N,E]);const R=w.useMemo(()=>p?xI(p):null,[p]);return g.viewport?s.jsxs(s.Fragment,{children:[R&&s.jsx(jW,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:R}),s.jsx(xW,{scope:r,onClose:A,children:tc.createPortal(s.jsx(DS.ItemSlot,{scope:r,children:s.jsx(eW,{asChild:!0,onEscapeKeyDown:Te(l,()=>{g.isFocusedToastEscapeKeyDownRef.current||A(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:s.jsx(We.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":g.swipeDirection,...y,ref:x,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:Te(e.onKeyDown,k=>{k.key==="Escape"&&(l==null||l(k.nativeEvent),k.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,A()))}),onPointerDown:Te(e.onPointerDown,k=>{k.button===0&&(b.current={x:k.clientX,y:k.clientY})}),onPointerMove:Te(e.onPointerMove,k=>{if(!b.current)return;const O=k.clientX-b.current.x,M=k.clientY-b.current.y,D=!!_.current,L=["left","right"].includes(g.swipeDirection),B=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,z=L?B(0,O):0,Z=L?0:B(0,M),ee=k.pointerType==="touch"?10:2,le={x:z,y:Z},V={originalEvent:k,delta:le};D?(_.current=le,Ap(gW,f,V,{discrete:!1})):dk(le,g.swipeDirection,ee)?(_.current=le,Ap(pW,d,V,{discrete:!1}),k.target.setPointerCapture(k.pointerId)):(Math.abs(O)>ee||Math.abs(M)>ee)&&(b.current=null)}),onPointerUp:Te(e.onPointerUp,k=>{const O=_.current,M=k.target;if(M.hasPointerCapture(k.pointerId)&&M.releasePointerCapture(k.pointerId),_.current=null,b.current=null,O){const D=k.currentTarget,L={originalEvent:k,delta:O};dk(O,g.swipeDirection,g.swipeThreshold)?Ap(yW,m,L,{discrete:!0}):Ap(vW,h,L,{discrete:!0}),D.addEventListener("click",B=>B.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),jW=e=>{const{__scopeToast:t,children:r,...n}=e,a=ax(Km,t),[i,o]=w.useState(!1),[l,c]=w.useState(!1);return CW(()=>o(!0)),w.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:s.jsx(qm,{asChild:!0,children:s.jsx(nx,{...n,children:i&&s.jsxs(s.Fragment,{children:[a.label," ",r]})})})},_W="ToastTitle",hI=w.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return s.jsx(We.div,{...n,ref:t})});hI.displayName=_W;var SW="ToastDescription",mI=w.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return s.jsx(We.div,{...n,ref:t})});mI.displayName=SW;var pI="ToastAction",gI=w.forwardRef((e,t)=>{const{altText:r,...n}=e;return r.trim()?s.jsx(yI,{altText:r,asChild:!0,children:s.jsx(LS,{...n,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${pI}\`. Expected non-empty \`string\`.`),null)});gI.displayName=pI;var vI="ToastClose",LS=w.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e,a=bW(vI,r);return s.jsx(yI,{asChild:!0,children:s.jsx(We.button,{type:"button",...n,ref:t,onClick:Te(e.onClick,a.onClose)})})});LS.displayName=vI;var yI=w.forwardRef((e,t)=>{const{__scopeToast:r,altText:n,...a}=e;return s.jsx(We.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...a,ref:t})});function xI(e){const t=[];return Array.from(e.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&t.push(n.textContent),NW(n)){const a=n.ariaHidden||n.hidden||n.style.display==="none",i=n.dataset.radixToastAnnounceExclude==="";if(!a)if(i){const o=n.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...xI(n))}}),t}function Ap(e,t,r,{discrete:n}){const a=r.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?rI(a,i):a.dispatchEvent(i)}var dk=(e,t,r=0)=>{const n=Math.abs(e.x),a=Math.abs(e.y),i=n>a;return t==="left"||t==="right"?i&&n>r:!i&&a>r};function CW(e=()=>{}){const t=Zr(e);un(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[t])}function NW(e){return e.nodeType===e.ELEMENT_NODE}function PW(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function pb(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var kW=lI,bI=uI,wI=fI,jI=hI,_I=mI,SI=gI,CI=LS;function NI(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=NI(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function ct(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=NI(e))&&(n&&(n+=" "),n+=t);return n}const fk=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,hk=ct,kd=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return hk(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:a,defaultVariants:i}=t,o=Object.keys(a).map(u=>{const d=r==null?void 0:r[u],f=i==null?void 0:i[u];if(d===null)return null;const h=fk(d)||fk(f);return a[u][h]}),l=r&&Object.entries(r).reduce((u,d)=>{let[f,h]=d;return h===void 0||(u[f]=h),u},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((u,d)=>{let{class:f,className:h,...m}=d;return Object.entries(m).every(y=>{let[g,p]=y;return Array.isArray(p)?p.includes({...i,...l}[g]):{...i,...l}[g]===p})?[...u,f,h]:u},[]);return hk(e,o,c,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EW=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),PI=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var AW={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OW=w.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:i,iconNode:o,...l},c)=>w.createElement("svg",{ref:c,...AW,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:PI("lucide",a),...l},[...o.map(([u,d])=>w.createElement(u,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=(e,t)=>{const r=w.forwardRef(({className:n,...a},i)=>w.createElement(OW,{ref:i,iconNode:t,className:PI(`lucide-${EW(e)}`,n),...a}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ec=Ie("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kI=Ie("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TW=Ie("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xj=Ie("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RW=Ie("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mk=Ie("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ev=Ie("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sg=Ie("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bj=Ie("CalendarRange",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M17 14h-6",key:"bkmgh3"}],["path",{d:"M13 18H7",key:"bb0bb7"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 18h.01",key:"1bdyru"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jf=Ie("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EI=Ie("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MW=Ie("ChartLine",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $W=Ie("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const So=Ie("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ah=Ie("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IW=Ie("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oh=Ie("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DW=Ie("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AI=Ie("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OI=Ie("ClipboardPaste",[["path",{d:"M15 2H9a1 1 0 0 0-1 1v2c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V3c0-.6-.4-1-1-1Z",key:"1pp7kr"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2M16 4h2a2 2 0 0 1 2 2v2M11 14h10",key:"2ik1ml"}],["path",{d:"m17 10 4 4-4 4",key:"vp2hj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BS=Ie("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TI=Ie("Cog",[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wj=Ie("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RI=Ie("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ym=Ie("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MI=Ie("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LW=Ie("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BW=Ie("Factory",[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ru=Ie("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FW=Ie("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zW=Ie("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Th=Ie("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UW=Ie("Landmark",[["line",{x1:"3",x2:"21",y1:"22",y2:"22",key:"j8o0r"}],["line",{x1:"6",x2:"6",y1:"18",y2:"11",key:"10tf0k"}],["line",{x1:"10",x2:"10",y1:"18",y2:"11",key:"54lgf6"}],["line",{x1:"14",x2:"14",y1:"18",y2:"11",key:"380y"}],["line",{x1:"18",x2:"18",y1:"18",y2:"11",key:"1kevvc"}],["polygon",{points:"12 2 20 7 4 7",key:"jkujk7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $I=Ie("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VW=Ie("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WW=Ie("ListTree",[["path",{d:"M21 12h-8",key:"1bmf0i"}],["path",{d:"M21 6H8",key:"1pqkrb"}],["path",{d:"M21 18h-8",key:"1tm79t"}],["path",{d:"M3 6v4c0 1.1.9 2 2 2h3",key:"1ywdgy"}],["path",{d:"M3 10v6c0 1.1.9 2 2 2h3",key:"2wc746"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HW=Ie("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ui=Ie("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qW=Ie("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KW=Ie("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YW=Ie("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GW=Ie("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fl=Ie("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pk=Ie("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ix=Ie("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tv=Ie("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gk=Ie("PiggyBank",[["path",{d:"M19 5c-1.5 0-2.8 1.4-3 2-3.5-1.5-11-.3-11 5 0 1.8 0 3 2 4.5V20h4v-2h3v2h4v-4c1-.5 1.7-1 2-2h2v-4h-2c0-1-.5-1.5-1-2V5z",key:"1ivx2i"}],["path",{d:"M2 9v1c0 1.1.9 2 2 2h1",key:"nm575m"}],["path",{d:"M16 11h.01",key:"xkw8gn"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=Ie("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XW=Ie("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QW=Ie("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gm=Ie("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FS=Ie("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mu=Ie("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const II=Ie("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DI=Ie("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ed=Ie("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JW=Ie("StickyNote",[["path",{d:"M16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8Z",key:"qazsjp"}],["path",{d:"M15 3v4a2 2 0 0 0 2 2h4",key:"40519r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zS=Ie("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rv=Ie("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hr=Ie("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const US=Ie("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rc=Ie("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $u=Ie("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Li=Ie("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZW=Ie("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zl=Ie("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LI=Ie("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vk=Ie("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $a=Ie("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),VS="-",eH=e=>{const t=rH(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:o=>{const l=o.split(VS);return l[0]===""&&l.length!==1&&l.shift(),BI(l,t)||tH(o)},getConflictingClassGroupIds:(o,l)=>{const c=r[o]||[];return l&&n[o]?[...c,...n[o]]:c}}},BI=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),a=n?BI(e.slice(1),n):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(VS);return(o=t.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},yk=/^\[(.+)\]$/,tH=e=>{if(yk.test(e)){const t=yk.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},rH=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return aH(Object.entries(e.classGroups),r).forEach(([i,o])=>{jj(o,n,i,t)}),n},jj=(e,t,r,n)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:xk(t,a);i.classGroupId=r;return}if(typeof a=="function"){if(nH(a)){jj(a(n),t,r,n);return}t.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([i,o])=>{jj(o,xk(t,i),r,n)})})},xk=(e,t)=>{let r=e;return t.split(VS).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},nH=e=>e.isThemeGetter,aH=(e,t)=>t?e.map(([r,n])=>{const a=n.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[t+o,l])):i);return[r,a]}):e,iH=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const a=(i,o)=>{r.set(i,o),t++,t>e&&(t=0,n=r,r=new Map)};return{get(i){let o=r.get(i);if(o!==void 0)return o;if((o=n.get(i))!==void 0)return a(i,o),o},set(i,o){r.has(i)?r.set(i,o):a(i,o)}}},FI="!",sH=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,a=t[0],i=t.length,o=l=>{const c=[];let u=0,d=0,f;for(let p=0;p<l.length;p++){let v=l[p];if(u===0){if(v===a&&(n||l.slice(p,p+i)===t)){c.push(l.slice(d,p)),d=p+i;continue}if(v==="/"){f=p;continue}}v==="["?u++:v==="]"&&u--}const h=c.length===0?l:l.substring(d),m=h.startsWith(FI),y=m?h.substring(1):h,g=f&&f>d?f-d:void 0;return{modifiers:c,hasImportantModifier:m,baseClassName:y,maybePostfixModifierPosition:g}};return r?l=>r({className:l,parseClassName:o}):o},oH=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},lH=e=>({cache:iH(e.cacheSize),parseClassName:sH(e),...eH(e)}),cH=/\s+/,uH=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:a}=t,i=[],o=e.trim().split(cH);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:d,hasImportantModifier:f,baseClassName:h,maybePostfixModifierPosition:m}=r(u);let y=!!m,g=n(y?h.substring(0,m):h);if(!g){if(!y){l=u+(l.length>0?" "+l:l);continue}if(g=n(h),!g){l=u+(l.length>0?" "+l:l);continue}y=!1}const p=oH(d).join(":"),v=f?p+FI:p,x=v+g;if(i.includes(x))continue;i.push(x);const b=a(g,y);for(let _=0;_<b.length;++_){const j=b[_];i.push(v+j)}l=u+(l.length>0?" "+l:l)}return l};function dH(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=zI(t))&&(n&&(n+=" "),n+=r);return n}const zI=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=zI(e[n]))&&(r&&(r+=" "),r+=t);return r};function fH(e,...t){let r,n,a,i=o;function o(c){const u=t.reduce((d,f)=>f(d),e());return r=lH(u),n=r.cache.get,a=r.cache.set,i=l,l(c)}function l(c){const u=n(c);if(u)return u;const d=uH(c,r);return a(c,d),d}return function(){return i(dH.apply(null,arguments))}}const ir=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},UI=/^\[(?:([a-z-]+):)?(.+)\]$/i,hH=/^\d+\/\d+$/,mH=new Set(["px","full","screen"]),pH=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,gH=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,vH=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,yH=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,xH=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Zi=e=>cu(e)||mH.has(e)||hH.test(e),Fs=e=>Ad(e,"length",PH),cu=e=>!!e&&!Number.isNaN(Number(e)),gb=e=>Ad(e,"number",cu),mf=e=>!!e&&Number.isInteger(Number(e)),bH=e=>e.endsWith("%")&&cu(e.slice(0,-1)),vt=e=>UI.test(e),zs=e=>pH.test(e),wH=new Set(["length","size","percentage"]),jH=e=>Ad(e,wH,VI),_H=e=>Ad(e,"position",VI),SH=new Set(["image","url"]),CH=e=>Ad(e,SH,EH),NH=e=>Ad(e,"",kH),pf=()=>!0,Ad=(e,t,r)=>{const n=UI.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},PH=e=>gH.test(e)&&!vH.test(e),VI=()=>!1,kH=e=>yH.test(e),EH=e=>xH.test(e),AH=()=>{const e=ir("colors"),t=ir("spacing"),r=ir("blur"),n=ir("brightness"),a=ir("borderColor"),i=ir("borderRadius"),o=ir("borderSpacing"),l=ir("borderWidth"),c=ir("contrast"),u=ir("grayscale"),d=ir("hueRotate"),f=ir("invert"),h=ir("gap"),m=ir("gradientColorStops"),y=ir("gradientColorStopPositions"),g=ir("inset"),p=ir("margin"),v=ir("opacity"),x=ir("padding"),b=ir("saturate"),_=ir("scale"),j=ir("sepia"),S=ir("skew"),C=ir("space"),P=ir("translate"),N=()=>["auto","contain","none"],E=()=>["auto","hidden","clip","visible","scroll"],A=()=>["auto",vt,t],T=()=>[vt,t],R=()=>["",Zi,Fs],k=()=>["auto",cu,vt],O=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],M=()=>["solid","dashed","dotted","double","none"],D=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],L=()=>["start","end","center","between","around","evenly","stretch"],B=()=>["","0",vt],z=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Z=()=>[cu,vt];return{cacheSize:500,separator:":",theme:{colors:[pf],spacing:[Zi,Fs],blur:["none","",zs,vt],brightness:Z(),borderColor:[e],borderRadius:["none","","full",zs,vt],borderSpacing:T(),borderWidth:R(),contrast:Z(),grayscale:B(),hueRotate:Z(),invert:B(),gap:T(),gradientColorStops:[e],gradientColorStopPositions:[bH,Fs],inset:A(),margin:A(),opacity:Z(),padding:T(),saturate:Z(),scale:Z(),sepia:B(),skew:Z(),space:T(),translate:T()},classGroups:{aspect:[{aspect:["auto","square","video",vt]}],container:["container"],columns:[{columns:[zs]}],"break-after":[{"break-after":z()}],"break-before":[{"break-before":z()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...O(),vt]}],overflow:[{overflow:E()}],"overflow-x":[{"overflow-x":E()}],"overflow-y":[{"overflow-y":E()}],overscroll:[{overscroll:N()}],"overscroll-x":[{"overscroll-x":N()}],"overscroll-y":[{"overscroll-y":N()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",mf,vt]}],basis:[{basis:A()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",vt]}],grow:[{grow:B()}],shrink:[{shrink:B()}],order:[{order:["first","last","none",mf,vt]}],"grid-cols":[{"grid-cols":[pf]}],"col-start-end":[{col:["auto",{span:["full",mf,vt]},vt]}],"col-start":[{"col-start":k()}],"col-end":[{"col-end":k()}],"grid-rows":[{"grid-rows":[pf]}],"row-start-end":[{row:["auto",{span:[mf,vt]},vt]}],"row-start":[{"row-start":k()}],"row-end":[{"row-end":k()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",vt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",vt]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...L()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...L(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...L(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[p]}],mx:[{mx:[p]}],my:[{my:[p]}],ms:[{ms:[p]}],me:[{me:[p]}],mt:[{mt:[p]}],mr:[{mr:[p]}],mb:[{mb:[p]}],ml:[{ml:[p]}],"space-x":[{"space-x":[C]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[C]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",vt,t]}],"min-w":[{"min-w":[vt,t,"min","max","fit"]}],"max-w":[{"max-w":[vt,t,"none","full","min","max","fit","prose",{screen:[zs]},zs]}],h:[{h:[vt,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[vt,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[vt,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[vt,t,"auto","min","max","fit"]}],"font-size":[{text:["base",zs,Fs]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",gb]}],"font-family":[{font:[pf]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",vt]}],"line-clamp":[{"line-clamp":["none",cu,gb]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Zi,vt]}],"list-image":[{"list-image":["none",vt]}],"list-style-type":[{list:["none","disc","decimal",vt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...M(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Zi,Fs]}],"underline-offset":[{"underline-offset":["auto",Zi,vt]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:T()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",vt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",vt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...O(),_H]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",jH]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},CH]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...M(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:M()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...M()]}],"outline-offset":[{"outline-offset":[Zi,vt]}],"outline-w":[{outline:[Zi,Fs]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:R()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[Zi,Fs]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",zs,NH]}],"shadow-color":[{shadow:[pf]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...D(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":D()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",zs,vt]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[f]}],saturate:[{saturate:[b]}],sepia:[{sepia:[j]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[j]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",vt]}],duration:[{duration:Z()}],ease:[{ease:["linear","in","out","in-out",vt]}],delay:[{delay:Z()}],animate:[{animate:["none","spin","ping","pulse","bounce",vt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[_]}],"scale-x":[{"scale-x":[_]}],"scale-y":[{"scale-y":[_]}],rotate:[{rotate:[mf,vt]}],"translate-x":[{"translate-x":[P]}],"translate-y":[{"translate-y":[P]}],"skew-x":[{"skew-x":[S]}],"skew-y":[{"skew-y":[S]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",vt]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",vt]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":T()}],"scroll-mx":[{"scroll-mx":T()}],"scroll-my":[{"scroll-my":T()}],"scroll-ms":[{"scroll-ms":T()}],"scroll-me":[{"scroll-me":T()}],"scroll-mt":[{"scroll-mt":T()}],"scroll-mr":[{"scroll-mr":T()}],"scroll-mb":[{"scroll-mb":T()}],"scroll-ml":[{"scroll-ml":T()}],"scroll-p":[{"scroll-p":T()}],"scroll-px":[{"scroll-px":T()}],"scroll-py":[{"scroll-py":T()}],"scroll-ps":[{"scroll-ps":T()}],"scroll-pe":[{"scroll-pe":T()}],"scroll-pt":[{"scroll-pt":T()}],"scroll-pr":[{"scroll-pr":T()}],"scroll-pb":[{"scroll-pb":T()}],"scroll-pl":[{"scroll-pl":T()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",vt]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Zi,Fs,gb]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},OH=fH(AH);function ue(...e){return OH(ct(e))}const TH=kW,WI=w.forwardRef(({className:e,...t},r)=>s.jsx(bI,{ref:r,className:ue("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));WI.displayName=bI.displayName;const RH=kd("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),HI=w.forwardRef(({className:e,variant:t,...r},n)=>s.jsx(wI,{ref:n,className:ue(RH({variant:t}),e),...r}));HI.displayName=wI.displayName;const MH=w.forwardRef(({className:e,...t},r)=>s.jsx(SI,{ref:r,className:ue("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",e),...t}));MH.displayName=SI.displayName;const qI=w.forwardRef(({className:e,...t},r)=>s.jsx(CI,{ref:r,className:ue("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:s.jsx($a,{className:"h-4 w-4"})}));qI.displayName=CI.displayName;const KI=w.forwardRef(({className:e,...t},r)=>s.jsx(jI,{ref:r,className:ue("text-sm font-semibold",e),...t}));KI.displayName=jI.displayName;const YI=w.forwardRef(({className:e,...t},r)=>s.jsx(_I,{ref:r,className:ue("text-sm opacity-90",e),...t}));YI.displayName=_I.displayName;function $H(){const{toasts:e}=$S();return s.jsxs(TH,{children:[e.map(function({id:t,title:r,description:n,action:a,...i}){return s.jsxs(HI,{...i,children:[s.jsxs("div",{className:"grid gap-1",children:[r&&s.jsx(KI,{children:r}),n&&s.jsx(YI,{children:n})]}),a,s.jsx(qI,{})]},t)}),s.jsx(WI,{})]})}var bk=["light","dark"],IH="(prefers-color-scheme: dark)",DH=w.createContext(void 0),LH={setTheme:e=>{},themes:[]},BH=()=>{var e;return(e=w.useContext(DH))!=null?e:LH};w.memo(({forcedTheme:e,storageKey:t,attribute:r,enableSystem:n,enableColorScheme:a,defaultTheme:i,value:o,attrs:l,nonce:c})=>{let u=i==="system",d=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(y=>`'${y}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,f=a?bk.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",h=(y,g=!1,p=!0)=>{let v=o?o[y]:y,x=g?y+"|| ''":`'${v}'`,b="";return a&&p&&!g&&bk.includes(y)&&(b+=`d.style.colorScheme = '${y}';`),r==="class"?g||v?b+=`c.add(${x})`:b+="null":v&&(b+=`d[s](n,${x})`),b},m=e?`!function(){${d}${h(e)}}()`:n?`!function(){try{${d}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${u})){var t='${IH}',m=window.matchMedia(t);if(m.media!==t||m.matches){${h("dark")}}else{${h("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${h(o?"x[e]":"e",!0)}}${u?"":"else{"+h(i,!1,!1)+"}"}${f}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${t}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${h(o?"x[e]":"e",!0)}}else{${h(i,!1,!1)};}${f}}catch(t){}}();`;return w.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:m}})});var FH=e=>{switch(e){case"success":return VH;case"info":return HH;case"warning":return WH;case"error":return qH;default:return null}},zH=Array(12).fill(0),UH=({visible:e,className:t})=>$.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},$.createElement("div",{className:"sonner-spinner"},zH.map((r,n)=>$.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),VH=$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},$.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),WH=$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},$.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),HH=$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},$.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),qH=$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},$.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),KH=$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},$.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),$.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),YH=()=>{let[e,t]=$.useState(document.hidden);return $.useEffect(()=>{let r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e},_j=1,GH=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:r,...n}=e,a=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:_j++,i=this.toasts.find(l=>l.id===a),o=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),i?this.toasts=this.toasts.map(l=>l.id===a?(this.publish({...l,...e,id:a,title:r}),{...l,...e,id:a,dismissible:o,title:r}):l):this.addToast({title:r,...n,dismissible:o,id:a}),a},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let n=e instanceof Promise?e:e(),a=r!==void 0,i,o=n.then(async c=>{if(i=["resolve",c],$.isValidElement(c))a=!1,this.create({id:r,type:"default",message:c});else if(QH(c)&&!c.ok){a=!1;let u=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,d=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:r,type:"error",message:u,description:d})}else if(t.success!==void 0){a=!1;let u=typeof t.success=="function"?await t.success(c):t.success,d=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"success",message:u,description:d})}}).catch(async c=>{if(i=["reject",c],t.error!==void 0){a=!1;let u=typeof t.error=="function"?await t.error(c):t.error,d=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"error",message:u,description:d})}}).finally(()=>{var c;a&&(this.dismiss(r),r=void 0),(c=t.finally)==null||c.call(t)}),l=()=>new Promise((c,u)=>o.then(()=>i[0]==="reject"?u(i[1]):c(i[1])).catch(u));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(e,t)=>{let r=(t==null?void 0:t.id)||_j++;return this.create({jsx:e(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Hn=new GH,XH=(e,t)=>{let r=(t==null?void 0:t.id)||_j++;return Hn.addToast({title:e,...t,id:r}),r},QH=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",JH=XH,ZH=()=>Hn.toasts,eq=()=>Hn.getActiveToasts(),Ee=Object.assign(JH,{success:Hn.success,info:Hn.info,warning:Hn.warning,error:Hn.error,custom:Hn.custom,message:Hn.message,promise:Hn.promise,dismiss:Hn.dismiss,loading:Hn.loading},{getHistory:ZH,getToasts:eq});function tq(e,{insertAt:t}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}tq(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Op(e){return e.label!==void 0}var rq=3,nq="32px",aq="16px",wk=4e3,iq=356,sq=14,oq=20,lq=200;function Wa(...e){return e.filter(Boolean).join(" ")}function cq(e){let[t,r]=e.split("-"),n=[];return t&&n.push(t),r&&n.push(r),n}var uq=e=>{var t,r,n,a,i,o,l,c,u,d,f;let{invert:h,toast:m,unstyled:y,interacting:g,setHeights:p,visibleToasts:v,heights:x,index:b,toasts:_,expanded:j,removeToast:S,defaultRichColors:C,closeButton:P,style:N,cancelButtonStyle:E,actionButtonStyle:A,className:T="",descriptionClassName:R="",duration:k,position:O,gap:M,loadingIcon:D,expandByDefault:L,classNames:B,icons:z,closeButtonAriaLabel:Z="Close toast",pauseWhenPageIsHidden:ee}=e,[le,V]=$.useState(null),[I,F]=$.useState(null),[q,de]=$.useState(!1),[re,H]=$.useState(!1),[Y,G]=$.useState(!1),[J,ge]=$.useState(!1),[Ce,$e]=$.useState(!1),[Ge,dt]=$.useState(0),[Rt,U]=$.useState(0),X=$.useRef(m.duration||k||wk),se=$.useRef(null),Q=$.useRef(null),ce=b===0,pe=b+1<=v,fe=m.type,ye=m.dismissible!==!1,Pe=m.className||"",tt=m.descriptionClassName||"",Ke=$.useMemo(()=>x.findIndex(rt=>rt.toastId===m.id)||0,[x,m.id]),pt=$.useMemo(()=>{var rt;return(rt=m.closeButton)!=null?rt:P},[m.closeButton,P]),he=$.useMemo(()=>m.duration||k||wk,[m.duration,k]),Ue=$.useRef(0),_t=$.useRef(0),xt=$.useRef(0),Xe=$.useRef(null),[lt,Lr]=O.split("-"),Kr=$.useMemo(()=>x.reduce((rt,kt,K)=>K>=Ke?rt:rt+kt.height,0),[x,Ke]),cc=YH(),uc=m.invert||h,Ls=fe==="loading";_t.current=$.useMemo(()=>Ke*M+Kr,[Ke,Kr]),$.useEffect(()=>{X.current=he},[he]),$.useEffect(()=>{de(!0)},[]),$.useEffect(()=>{let rt=Q.current;if(rt){let kt=rt.getBoundingClientRect().height;return U(kt),p(K=>[{toastId:m.id,height:kt,position:m.position},...K]),()=>p(K=>K.filter(oe=>oe.toastId!==m.id))}},[p,m.id]),$.useLayoutEffect(()=>{if(!q)return;let rt=Q.current,kt=rt.style.height;rt.style.height="auto";let K=rt.getBoundingClientRect().height;rt.style.height=kt,U(K),p(oe=>oe.find(ne=>ne.toastId===m.id)?oe.map(ne=>ne.toastId===m.id?{...ne,height:K}:ne):[{toastId:m.id,height:K,position:m.position},...oe])},[q,m.title,m.description,p,m.id]);let ba=$.useCallback(()=>{H(!0),dt(_t.current),p(rt=>rt.filter(kt=>kt.toastId!==m.id)),setTimeout(()=>{S(m)},lq)},[m,S,p,_t]);$.useEffect(()=>{if(m.promise&&fe==="loading"||m.duration===1/0||m.type==="loading")return;let rt;return j||g||ee&&cc?(()=>{if(xt.current<Ue.current){let kt=new Date().getTime()-Ue.current;X.current=X.current-kt}xt.current=new Date().getTime()})():X.current!==1/0&&(Ue.current=new Date().getTime(),rt=setTimeout(()=>{var kt;(kt=m.onAutoClose)==null||kt.call(m,m),ba()},X.current)),()=>clearTimeout(rt)},[j,g,m,fe,ee,cc,ba]),$.useEffect(()=>{m.delete&&ba()},[ba,m.delete]);function af(){var rt,kt,K;return z!=null&&z.loading?$.createElement("div",{className:Wa(B==null?void 0:B.loader,(rt=m==null?void 0:m.classNames)==null?void 0:rt.loader,"sonner-loader"),"data-visible":fe==="loading"},z.loading):D?$.createElement("div",{className:Wa(B==null?void 0:B.loader,(kt=m==null?void 0:m.classNames)==null?void 0:kt.loader,"sonner-loader"),"data-visible":fe==="loading"},D):$.createElement(UH,{className:Wa(B==null?void 0:B.loader,(K=m==null?void 0:m.classNames)==null?void 0:K.loader),visible:fe==="loading"})}return $.createElement("li",{tabIndex:0,ref:Q,className:Wa(T,Pe,B==null?void 0:B.toast,(t=m==null?void 0:m.classNames)==null?void 0:t.toast,B==null?void 0:B.default,B==null?void 0:B[fe],(r=m==null?void 0:m.classNames)==null?void 0:r[fe]),"data-sonner-toast":"","data-rich-colors":(n=m.richColors)!=null?n:C,"data-styled":!(m.jsx||m.unstyled||y),"data-mounted":q,"data-promise":!!m.promise,"data-swiped":Ce,"data-removed":re,"data-visible":pe,"data-y-position":lt,"data-x-position":Lr,"data-index":b,"data-front":ce,"data-swiping":Y,"data-dismissible":ye,"data-type":fe,"data-invert":uc,"data-swipe-out":J,"data-swipe-direction":I,"data-expanded":!!(j||L&&q),style:{"--index":b,"--toasts-before":b,"--z-index":_.length-b,"--offset":`${re?Ge:_t.current}px`,"--initial-height":L?"auto":`${Rt}px`,...N,...m.style},onDragEnd:()=>{G(!1),V(null),Xe.current=null},onPointerDown:rt=>{Ls||!ye||(se.current=new Date,dt(_t.current),rt.target.setPointerCapture(rt.pointerId),rt.target.tagName!=="BUTTON"&&(G(!0),Xe.current={x:rt.clientX,y:rt.clientY}))},onPointerUp:()=>{var rt,kt,K,oe;if(J||!ye)return;Xe.current=null;let ne=Number(((rt=Q.current)==null?void 0:rt.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),ke=Number(((kt=Q.current)==null?void 0:kt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),bt=new Date().getTime()-((K=se.current)==null?void 0:K.getTime()),Fe=le==="x"?ne:ke,wt=Math.abs(Fe)/bt;if(Math.abs(Fe)>=oq||wt>.11){dt(_t.current),(oe=m.onDismiss)==null||oe.call(m,m),F(le==="x"?ne>0?"right":"left":ke>0?"down":"up"),ba(),ge(!0),$e(!1);return}G(!1),V(null)},onPointerMove:rt=>{var kt,K,oe,ne;if(!Xe.current||!ye||((kt=window.getSelection())==null?void 0:kt.toString().length)>0)return;let ke=rt.clientY-Xe.current.y,bt=rt.clientX-Xe.current.x,Fe=(K=e.swipeDirections)!=null?K:cq(O);!le&&(Math.abs(bt)>1||Math.abs(ke)>1)&&V(Math.abs(bt)>Math.abs(ke)?"x":"y");let wt={x:0,y:0};le==="y"?(Fe.includes("top")||Fe.includes("bottom"))&&(Fe.includes("top")&&ke<0||Fe.includes("bottom")&&ke>0)&&(wt.y=ke):le==="x"&&(Fe.includes("left")||Fe.includes("right"))&&(Fe.includes("left")&&bt<0||Fe.includes("right")&&bt>0)&&(wt.x=bt),(Math.abs(wt.x)>0||Math.abs(wt.y)>0)&&$e(!0),(oe=Q.current)==null||oe.style.setProperty("--swipe-amount-x",`${wt.x}px`),(ne=Q.current)==null||ne.style.setProperty("--swipe-amount-y",`${wt.y}px`)}},pt&&!m.jsx?$.createElement("button",{"aria-label":Z,"data-disabled":Ls,"data-close-button":!0,onClick:Ls||!ye?()=>{}:()=>{var rt;ba(),(rt=m.onDismiss)==null||rt.call(m,m)},className:Wa(B==null?void 0:B.closeButton,(a=m==null?void 0:m.classNames)==null?void 0:a.closeButton)},(i=z==null?void 0:z.close)!=null?i:KH):null,m.jsx||w.isValidElement(m.title)?m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title:$.createElement($.Fragment,null,fe||m.icon||m.promise?$.createElement("div",{"data-icon":"",className:Wa(B==null?void 0:B.icon,(o=m==null?void 0:m.classNames)==null?void 0:o.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||af():null,m.type!=="loading"?m.icon||(z==null?void 0:z[fe])||FH(fe):null):null,$.createElement("div",{"data-content":"",className:Wa(B==null?void 0:B.content,(l=m==null?void 0:m.classNames)==null?void 0:l.content)},$.createElement("div",{"data-title":"",className:Wa(B==null?void 0:B.title,(c=m==null?void 0:m.classNames)==null?void 0:c.title)},typeof m.title=="function"?m.title():m.title),m.description?$.createElement("div",{"data-description":"",className:Wa(R,tt,B==null?void 0:B.description,(u=m==null?void 0:m.classNames)==null?void 0:u.description)},typeof m.description=="function"?m.description():m.description):null),w.isValidElement(m.cancel)?m.cancel:m.cancel&&Op(m.cancel)?$.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||E,onClick:rt=>{var kt,K;Op(m.cancel)&&ye&&((K=(kt=m.cancel).onClick)==null||K.call(kt,rt),ba())},className:Wa(B==null?void 0:B.cancelButton,(d=m==null?void 0:m.classNames)==null?void 0:d.cancelButton)},m.cancel.label):null,w.isValidElement(m.action)?m.action:m.action&&Op(m.action)?$.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||A,onClick:rt=>{var kt,K;Op(m.action)&&((K=(kt=m.action).onClick)==null||K.call(kt,rt),!rt.defaultPrevented&&ba())},className:Wa(B==null?void 0:B.actionButton,(f=m==null?void 0:m.classNames)==null?void 0:f.actionButton)},m.action.label):null))};function jk(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function dq(e,t){let r={};return[e,t].forEach((n,a)=>{let i=a===1,o=i?"--mobile-offset":"--offset",l=i?aq:nq;function c(u){["top","right","bottom","left"].forEach(d=>{r[`${o}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof n=="number"||typeof n=="string"?c(n):typeof n=="object"?["top","right","bottom","left"].forEach(u=>{n[u]===void 0?r[`${o}-${u}`]=l:r[`${o}-${u}`]=typeof n[u]=="number"?`${n[u]}px`:n[u]}):c(l)}),r}var fq=w.forwardRef(function(e,t){let{invert:r,position:n="bottom-right",hotkey:a=["altKey","KeyT"],expand:i,closeButton:o,className:l,offset:c,mobileOffset:u,theme:d="light",richColors:f,duration:h,style:m,visibleToasts:y=rq,toastOptions:g,dir:p=jk(),gap:v=sq,loadingIcon:x,icons:b,containerAriaLabel:_="Notifications",pauseWhenPageIsHidden:j}=e,[S,C]=$.useState([]),P=$.useMemo(()=>Array.from(new Set([n].concat(S.filter(ee=>ee.position).map(ee=>ee.position)))),[S,n]),[N,E]=$.useState([]),[A,T]=$.useState(!1),[R,k]=$.useState(!1),[O,M]=$.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),D=$.useRef(null),L=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),B=$.useRef(null),z=$.useRef(!1),Z=$.useCallback(ee=>{C(le=>{var V;return(V=le.find(I=>I.id===ee.id))!=null&&V.delete||Hn.dismiss(ee.id),le.filter(({id:I})=>I!==ee.id)})},[]);return $.useEffect(()=>Hn.subscribe(ee=>{if(ee.dismiss){C(le=>le.map(V=>V.id===ee.id?{...V,delete:!0}:V));return}setTimeout(()=>{X$.flushSync(()=>{C(le=>{let V=le.findIndex(I=>I.id===ee.id);return V!==-1?[...le.slice(0,V),{...le[V],...ee},...le.slice(V+1)]:[ee,...le]})})})}),[]),$.useEffect(()=>{if(d!=="system"){M(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?M("dark"):M("light")),typeof window>"u")return;let ee=window.matchMedia("(prefers-color-scheme: dark)");try{ee.addEventListener("change",({matches:le})=>{M(le?"dark":"light")})}catch{ee.addListener(({matches:V})=>{try{M(V?"dark":"light")}catch(I){console.error(I)}})}},[d]),$.useEffect(()=>{S.length<=1&&T(!1)},[S]),$.useEffect(()=>{let ee=le=>{var V,I;a.every(F=>le[F]||le.code===F)&&(T(!0),(V=D.current)==null||V.focus()),le.code==="Escape"&&(document.activeElement===D.current||(I=D.current)!=null&&I.contains(document.activeElement))&&T(!1)};return document.addEventListener("keydown",ee),()=>document.removeEventListener("keydown",ee)},[a]),$.useEffect(()=>{if(D.current)return()=>{B.current&&(B.current.focus({preventScroll:!0}),B.current=null,z.current=!1)}},[D.current]),$.createElement("section",{ref:t,"aria-label":`${_} ${L}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},P.map((ee,le)=>{var V;let[I,F]=ee.split("-");return S.length?$.createElement("ol",{key:ee,dir:p==="auto"?jk():p,tabIndex:-1,ref:D,className:l,"data-sonner-toaster":!0,"data-theme":O,"data-y-position":I,"data-lifted":A&&S.length>1&&!i,"data-x-position":F,style:{"--front-toast-height":`${((V=N[0])==null?void 0:V.height)||0}px`,"--width":`${iq}px`,"--gap":`${v}px`,...m,...dq(c,u)},onBlur:q=>{z.current&&!q.currentTarget.contains(q.relatedTarget)&&(z.current=!1,B.current&&(B.current.focus({preventScroll:!0}),B.current=null))},onFocus:q=>{q.target instanceof HTMLElement&&q.target.dataset.dismissible==="false"||z.current||(z.current=!0,B.current=q.relatedTarget)},onMouseEnter:()=>T(!0),onMouseMove:()=>T(!0),onMouseLeave:()=>{R||T(!1)},onDragEnd:()=>T(!1),onPointerDown:q=>{q.target instanceof HTMLElement&&q.target.dataset.dismissible==="false"||k(!0)},onPointerUp:()=>k(!1)},S.filter(q=>!q.position&&le===0||q.position===ee).map((q,de)=>{var re,H;return $.createElement(uq,{key:q.id,icons:b,index:de,toast:q,defaultRichColors:f,duration:(re=g==null?void 0:g.duration)!=null?re:h,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:r,visibleToasts:y,closeButton:(H=g==null?void 0:g.closeButton)!=null?H:o,interacting:R,position:ee,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,removeToast:Z,toasts:S.filter(Y=>Y.position==q.position),heights:N.filter(Y=>Y.position==q.position),setHeights:E,expandByDefault:i,gap:v,loadingIcon:x,expanded:A,pauseWhenPageIsHidden:j,swipeDirections:e.swipeDirections})})):null}))});const hq=({...e})=>{const{theme:t="system"}=BH();return s.jsx(fq,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var mq=W_[" useId ".trim().toString()]||(()=>{}),pq=0;function Bi(e){const[t,r]=w.useState(mq());return un(()=>{r(n=>n??String(pq++))},[e]),t?`radix-${t}`:""}const gq=["top","right","bottom","left"],To=Math.min,oa=Math.max,nv=Math.round,Tp=Math.floor,Fi=e=>({x:e,y:e}),vq={left:"right",right:"left",bottom:"top",top:"bottom"},yq={start:"end",end:"start"};function Sj(e,t,r){return oa(e,To(t,r))}function js(e,t){return typeof e=="function"?e(t):e}function _s(e){return e.split("-")[0]}function Od(e){return e.split("-")[1]}function WS(e){return e==="x"?"y":"x"}function HS(e){return e==="y"?"height":"width"}const xq=new Set(["top","bottom"]);function Ti(e){return xq.has(_s(e))?"y":"x"}function qS(e){return WS(Ti(e))}function bq(e,t,r){r===void 0&&(r=!1);const n=Od(e),a=qS(e),i=HS(a);let o=a==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=av(o)),[o,av(o)]}function wq(e){const t=av(e);return[Cj(e),t,Cj(t)]}function Cj(e){return e.replace(/start|end/g,t=>yq[t])}const _k=["left","right"],Sk=["right","left"],jq=["top","bottom"],_q=["bottom","top"];function Sq(e,t,r){switch(e){case"top":case"bottom":return r?t?Sk:_k:t?_k:Sk;case"left":case"right":return t?jq:_q;default:return[]}}function Cq(e,t,r,n){const a=Od(e);let i=Sq(_s(e),r==="start",n);return a&&(i=i.map(o=>o+"-"+a),t&&(i=i.concat(i.map(Cj)))),i}function av(e){return e.replace(/left|right|bottom|top/g,t=>vq[t])}function Nq(e){return{top:0,right:0,bottom:0,left:0,...e}}function GI(e){return typeof e!="number"?Nq(e):{top:e,right:e,bottom:e,left:e}}function iv(e){const{x:t,y:r,width:n,height:a}=e;return{width:n,height:a,top:r,left:t,right:t+n,bottom:r+a,x:t,y:r}}function Ck(e,t,r){let{reference:n,floating:a}=e;const i=Ti(t),o=qS(t),l=HS(o),c=_s(t),u=i==="y",d=n.x+n.width/2-a.width/2,f=n.y+n.height/2-a.height/2,h=n[l]/2-a[l]/2;let m;switch(c){case"top":m={x:d,y:n.y-a.height};break;case"bottom":m={x:d,y:n.y+n.height};break;case"right":m={x:n.x+n.width,y:f};break;case"left":m={x:n.x-a.width,y:f};break;default:m={x:n.x,y:n.y}}switch(Od(t)){case"start":m[o]-=h*(r&&u?-1:1);break;case"end":m[o]+=h*(r&&u?-1:1);break}return m}const Pq=async(e,t,r)=>{const{placement:n="bottom",strategy:a="absolute",middleware:i=[],platform:o}=r,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:a}),{x:d,y:f}=Ck(u,n,c),h=n,m={},y=0;for(let g=0;g<l.length;g++){const{name:p,fn:v}=l[g],{x,y:b,data:_,reset:j}=await v({x:d,y:f,initialPlacement:n,placement:h,strategy:a,middlewareData:m,rects:u,platform:o,elements:{reference:e,floating:t}});d=x??d,f=b??f,m={...m,[p]:{...m[p],..._}},j&&y<=50&&(y++,typeof j=="object"&&(j.placement&&(h=j.placement),j.rects&&(u=j.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:a}):j.rects),{x:d,y:f}=Ck(u,h,c)),g=-1)}return{x:d,y:f,placement:h,strategy:a,middlewareData:m}};async function Rh(e,t){var r;t===void 0&&(t={});const{x:n,y:a,platform:i,rects:o,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:h=!1,padding:m=0}=js(t,e),y=GI(m),p=l[h?f==="floating"?"reference":"floating":f],v=iv(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(p)))==null||r?p:p.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),x=f==="floating"?{x:n,y:a,width:o.floating.width,height:o.floating.height}:o.reference,b=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),_=await(i.isElement==null?void 0:i.isElement(b))?await(i.getScale==null?void 0:i.getScale(b))||{x:1,y:1}:{x:1,y:1},j=iv(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:x,offsetParent:b,strategy:c}):x);return{top:(v.top-j.top+y.top)/_.y,bottom:(j.bottom-v.bottom+y.bottom)/_.y,left:(v.left-j.left+y.left)/_.x,right:(j.right-v.right+y.right)/_.x}}const kq=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:a,rects:i,platform:o,elements:l,middlewareData:c}=t,{element:u,padding:d=0}=js(e,t)||{};if(u==null)return{};const f=GI(d),h={x:r,y:n},m=qS(a),y=HS(m),g=await o.getDimensions(u),p=m==="y",v=p?"top":"left",x=p?"bottom":"right",b=p?"clientHeight":"clientWidth",_=i.reference[y]+i.reference[m]-h[m]-i.floating[y],j=h[m]-i.reference[m],S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let C=S?S[b]:0;(!C||!await(o.isElement==null?void 0:o.isElement(S)))&&(C=l.floating[b]||i.floating[y]);const P=_/2-j/2,N=C/2-g[y]/2-1,E=To(f[v],N),A=To(f[x],N),T=E,R=C-g[y]-A,k=C/2-g[y]/2+P,O=Sj(T,k,R),M=!c.arrow&&Od(a)!=null&&k!==O&&i.reference[y]/2-(k<T?E:A)-g[y]/2<0,D=M?k<T?k-T:k-R:0;return{[m]:h[m]+D,data:{[m]:O,centerOffset:k-O-D,...M&&{alignmentOffset:D}},reset:M}}}),Eq=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:a,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:g=!0,...p}=js(e,t);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const v=_s(a),x=Ti(l),b=_s(l)===l,_=await(c.isRTL==null?void 0:c.isRTL(u.floating)),j=h||(b||!g?[av(l)]:wq(l)),S=y!=="none";!h&&S&&j.push(...Cq(l,g,y,_));const C=[l,...j],P=await Rh(t,p),N=[];let E=((n=i.flip)==null?void 0:n.overflows)||[];if(d&&N.push(P[v]),f){const k=bq(a,o,_);N.push(P[k[0]],P[k[1]])}if(E=[...E,{placement:a,overflows:N}],!N.every(k=>k<=0)){var A,T;const k=(((A=i.flip)==null?void 0:A.index)||0)+1,O=C[k];if(O&&(!(f==="alignment"?x!==Ti(O):!1)||E.every(L=>L.overflows[0]>0&&Ti(L.placement)===x)))return{data:{index:k,overflows:E},reset:{placement:O}};let M=(T=E.filter(D=>D.overflows[0]<=0).sort((D,L)=>D.overflows[1]-L.overflows[1])[0])==null?void 0:T.placement;if(!M)switch(m){case"bestFit":{var R;const D=(R=E.filter(L=>{if(S){const B=Ti(L.placement);return B===x||B==="y"}return!0}).map(L=>[L.placement,L.overflows.filter(B=>B>0).reduce((B,z)=>B+z,0)]).sort((L,B)=>L[1]-B[1])[0])==null?void 0:R[0];D&&(M=D);break}case"initialPlacement":M=l;break}if(a!==M)return{reset:{placement:M}}}return{}}}};function Nk(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Pk(e){return gq.some(t=>e[t]>=0)}const Aq=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...a}=js(e,t);switch(n){case"referenceHidden":{const i=await Rh(t,{...a,elementContext:"reference"}),o=Nk(i,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:Pk(o)}}}case"escaped":{const i=await Rh(t,{...a,altBoundary:!0}),o=Nk(i,r.floating);return{data:{escapedOffsets:o,escaped:Pk(o)}}}default:return{}}}}},XI=new Set(["left","top"]);async function Oq(e,t){const{placement:r,platform:n,elements:a}=e,i=await(n.isRTL==null?void 0:n.isRTL(a.floating)),o=_s(r),l=Od(r),c=Ti(r)==="y",u=XI.has(o)?-1:1,d=i&&c?-1:1,f=js(t,e);let{mainAxis:h,crossAxis:m,alignmentAxis:y}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof y=="number"&&(m=l==="end"?y*-1:y),c?{x:m*d,y:h*u}:{x:h*u,y:m*d}}const Tq=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:a,y:i,placement:o,middlewareData:l}=t,c=await Oq(t,e);return o===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:a+c.x,y:i+c.y,data:{...c,placement:o}}}}},Rq=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:a}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:p=>{let{x:v,y:x}=p;return{x:v,y:x}}},...c}=js(e,t),u={x:r,y:n},d=await Rh(t,c),f=Ti(_s(a)),h=WS(f);let m=u[h],y=u[f];if(i){const p=h==="y"?"top":"left",v=h==="y"?"bottom":"right",x=m+d[p],b=m-d[v];m=Sj(x,m,b)}if(o){const p=f==="y"?"top":"left",v=f==="y"?"bottom":"right",x=y+d[p],b=y-d[v];y=Sj(x,y,b)}const g=l.fn({...t,[h]:m,[f]:y});return{...g,data:{x:g.x-r,y:g.y-n,enabled:{[h]:i,[f]:o}}}}}},Mq=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:a,rects:i,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=js(e,t),d={x:r,y:n},f=Ti(a),h=WS(f);let m=d[h],y=d[f];const g=js(l,t),p=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const b=h==="y"?"height":"width",_=i.reference[h]-i.floating[b]+p.mainAxis,j=i.reference[h]+i.reference[b]-p.mainAxis;m<_?m=_:m>j&&(m=j)}if(u){var v,x;const b=h==="y"?"width":"height",_=XI.has(_s(a)),j=i.reference[f]-i.floating[b]+(_&&((v=o.offset)==null?void 0:v[f])||0)+(_?0:p.crossAxis),S=i.reference[f]+i.reference[b]+(_?0:((x=o.offset)==null?void 0:x[f])||0)-(_?p.crossAxis:0);y<j?y=j:y>S&&(y=S)}return{[h]:m,[f]:y}}}},$q=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:a,rects:i,platform:o,elements:l}=t,{apply:c=()=>{},...u}=js(e,t),d=await Rh(t,u),f=_s(a),h=Od(a),m=Ti(a)==="y",{width:y,height:g}=i.floating;let p,v;f==="top"||f==="bottom"?(p=f,v=h===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(v=f,p=h==="end"?"top":"bottom");const x=g-d.top-d.bottom,b=y-d.left-d.right,_=To(g-d[p],x),j=To(y-d[v],b),S=!t.middlewareData.shift;let C=_,P=j;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(P=b),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(C=x),S&&!h){const E=oa(d.left,0),A=oa(d.right,0),T=oa(d.top,0),R=oa(d.bottom,0);m?P=y-2*(E!==0||A!==0?E+A:oa(d.left,d.right)):C=g-2*(T!==0||R!==0?T+R:oa(d.top,d.bottom))}await c({...t,availableWidth:P,availableHeight:C});const N=await o.getDimensions(l.floating);return y!==N.width||g!==N.height?{reset:{rects:!0}}:{}}}};function sx(){return typeof window<"u"}function Td(e){return QI(e)?(e.nodeName||"").toLowerCase():"#document"}function fa(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function qi(e){var t;return(t=(QI(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function QI(e){return sx()?e instanceof Node||e instanceof fa(e).Node:!1}function pi(e){return sx()?e instanceof Element||e instanceof fa(e).Element:!1}function Wi(e){return sx()?e instanceof HTMLElement||e instanceof fa(e).HTMLElement:!1}function kk(e){return!sx()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof fa(e).ShadowRoot}const Iq=new Set(["inline","contents"]);function Xm(e){const{overflow:t,overflowX:r,overflowY:n,display:a}=gi(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!Iq.has(a)}const Dq=new Set(["table","td","th"]);function Lq(e){return Dq.has(Td(e))}const Bq=[":popover-open",":modal"];function ox(e){return Bq.some(t=>{try{return e.matches(t)}catch{return!1}})}const Fq=["transform","translate","scale","rotate","perspective"],zq=["transform","translate","scale","rotate","perspective","filter"],Uq=["paint","layout","strict","content"];function KS(e){const t=YS(),r=pi(e)?gi(e):e;return Fq.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||zq.some(n=>(r.willChange||"").includes(n))||Uq.some(n=>(r.contain||"").includes(n))}function Vq(e){let t=Ro(e);for(;Wi(t)&&!Iu(t);){if(KS(t))return t;if(ox(t))return null;t=Ro(t)}return null}function YS(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Wq=new Set(["html","body","#document"]);function Iu(e){return Wq.has(Td(e))}function gi(e){return fa(e).getComputedStyle(e)}function lx(e){return pi(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Ro(e){if(Td(e)==="html")return e;const t=e.assignedSlot||e.parentNode||kk(e)&&e.host||qi(e);return kk(t)?t.host:t}function JI(e){const t=Ro(e);return Iu(t)?e.ownerDocument?e.ownerDocument.body:e.body:Wi(t)&&Xm(t)?t:JI(t)}function Mh(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const a=JI(e),i=a===((n=e.ownerDocument)==null?void 0:n.body),o=fa(a);if(i){const l=Nj(o);return t.concat(o,o.visualViewport||[],Xm(a)?a:[],l&&r?Mh(l):[])}return t.concat(a,Mh(a,[],r))}function Nj(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function ZI(e){const t=gi(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const a=Wi(e),i=a?e.offsetWidth:r,o=a?e.offsetHeight:n,l=nv(r)!==i||nv(n)!==o;return l&&(r=i,n=o),{width:r,height:n,$:l}}function GS(e){return pi(e)?e:e.contextElement}function uu(e){const t=GS(e);if(!Wi(t))return Fi(1);const r=t.getBoundingClientRect(),{width:n,height:a,$:i}=ZI(t);let o=(i?nv(r.width):r.width)/n,l=(i?nv(r.height):r.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const Hq=Fi(0);function eD(e){const t=fa(e);return!YS()||!t.visualViewport?Hq:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function qq(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==fa(e)?!1:t}function Ul(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const a=e.getBoundingClientRect(),i=GS(e);let o=Fi(1);t&&(n?pi(n)&&(o=uu(n)):o=uu(e));const l=qq(i,r,n)?eD(i):Fi(0);let c=(a.left+l.x)/o.x,u=(a.top+l.y)/o.y,d=a.width/o.x,f=a.height/o.y;if(i){const h=fa(i),m=n&&pi(n)?fa(n):n;let y=h,g=Nj(y);for(;g&&n&&m!==y;){const p=uu(g),v=g.getBoundingClientRect(),x=gi(g),b=v.left+(g.clientLeft+parseFloat(x.paddingLeft))*p.x,_=v.top+(g.clientTop+parseFloat(x.paddingTop))*p.y;c*=p.x,u*=p.y,d*=p.x,f*=p.y,c+=b,u+=_,y=fa(g),g=Nj(y)}}return iv({width:d,height:f,x:c,y:u})}function XS(e,t){const r=lx(e).scrollLeft;return t?t.left+r:Ul(qi(e)).left+r}function tD(e,t,r){r===void 0&&(r=!1);const n=e.getBoundingClientRect(),a=n.left+t.scrollLeft-(r?0:XS(e,n)),i=n.top+t.scrollTop;return{x:a,y:i}}function Kq(e){let{elements:t,rect:r,offsetParent:n,strategy:a}=e;const i=a==="fixed",o=qi(n),l=t?ox(t.floating):!1;if(n===o||l&&i)return r;let c={scrollLeft:0,scrollTop:0},u=Fi(1);const d=Fi(0),f=Wi(n);if((f||!f&&!i)&&((Td(n)!=="body"||Xm(o))&&(c=lx(n)),Wi(n))){const m=Ul(n);u=uu(n),d.x=m.x+n.clientLeft,d.y=m.y+n.clientTop}const h=o&&!f&&!i?tD(o,c,!0):Fi(0);return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-c.scrollLeft*u.x+d.x+h.x,y:r.y*u.y-c.scrollTop*u.y+d.y+h.y}}function Yq(e){return Array.from(e.getClientRects())}function Gq(e){const t=qi(e),r=lx(e),n=e.ownerDocument.body,a=oa(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),i=oa(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+XS(e);const l=-r.scrollTop;return gi(n).direction==="rtl"&&(o+=oa(t.clientWidth,n.clientWidth)-a),{width:a,height:i,x:o,y:l}}function Xq(e,t){const r=fa(e),n=qi(e),a=r.visualViewport;let i=n.clientWidth,o=n.clientHeight,l=0,c=0;if(a){i=a.width,o=a.height;const u=YS();(!u||u&&t==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}return{width:i,height:o,x:l,y:c}}const Qq=new Set(["absolute","fixed"]);function Jq(e,t){const r=Ul(e,!0,t==="fixed"),n=r.top+e.clientTop,a=r.left+e.clientLeft,i=Wi(e)?uu(e):Fi(1),o=e.clientWidth*i.x,l=e.clientHeight*i.y,c=a*i.x,u=n*i.y;return{width:o,height:l,x:c,y:u}}function Ek(e,t,r){let n;if(t==="viewport")n=Xq(e,r);else if(t==="document")n=Gq(qi(e));else if(pi(t))n=Jq(t,r);else{const a=eD(e);n={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return iv(n)}function rD(e,t){const r=Ro(e);return r===t||!pi(r)||Iu(r)?!1:gi(r).position==="fixed"||rD(r,t)}function Zq(e,t){const r=t.get(e);if(r)return r;let n=Mh(e,[],!1).filter(l=>pi(l)&&Td(l)!=="body"),a=null;const i=gi(e).position==="fixed";let o=i?Ro(e):e;for(;pi(o)&&!Iu(o);){const l=gi(o),c=KS(o);!c&&l.position==="fixed"&&(a=null),(i?!c&&!a:!c&&l.position==="static"&&!!a&&Qq.has(a.position)||Xm(o)&&!c&&rD(e,o))?n=n.filter(d=>d!==o):a=l,o=Ro(o)}return t.set(e,n),n}function e9(e){let{element:t,boundary:r,rootBoundary:n,strategy:a}=e;const o=[...r==="clippingAncestors"?ox(t)?[]:Zq(t,this._c):[].concat(r),n],l=o[0],c=o.reduce((u,d)=>{const f=Ek(t,d,a);return u.top=oa(f.top,u.top),u.right=To(f.right,u.right),u.bottom=To(f.bottom,u.bottom),u.left=oa(f.left,u.left),u},Ek(t,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function t9(e){const{width:t,height:r}=ZI(e);return{width:t,height:r}}function r9(e,t,r){const n=Wi(t),a=qi(t),i=r==="fixed",o=Ul(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const c=Fi(0);function u(){c.x=XS(a)}if(n||!n&&!i)if((Td(t)!=="body"||Xm(a))&&(l=lx(t)),n){const m=Ul(t,!0,i,t);c.x=m.x+t.clientLeft,c.y=m.y+t.clientTop}else a&&u();i&&!n&&a&&u();const d=a&&!n&&!i?tD(a,l):Fi(0),f=o.left+l.scrollLeft-c.x-d.x,h=o.top+l.scrollTop-c.y-d.y;return{x:f,y:h,width:o.width,height:o.height}}function vb(e){return gi(e).position==="static"}function Ak(e,t){if(!Wi(e)||gi(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return qi(e)===r&&(r=r.ownerDocument.body),r}function nD(e,t){const r=fa(e);if(ox(e))return r;if(!Wi(e)){let a=Ro(e);for(;a&&!Iu(a);){if(pi(a)&&!vb(a))return a;a=Ro(a)}return r}let n=Ak(e,t);for(;n&&Lq(n)&&vb(n);)n=Ak(n,t);return n&&Iu(n)&&vb(n)&&!KS(n)?r:n||Vq(e)||r}const n9=async function(e){const t=this.getOffsetParent||nD,r=this.getDimensions,n=await r(e.floating);return{reference:r9(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function a9(e){return gi(e).direction==="rtl"}const i9={convertOffsetParentRelativeRectToViewportRelativeRect:Kq,getDocumentElement:qi,getClippingRect:e9,getOffsetParent:nD,getElementRects:n9,getClientRects:Yq,getDimensions:t9,getScale:uu,isElement:pi,isRTL:a9};function aD(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function s9(e,t){let r=null,n;const a=qi(e);function i(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const u=e.getBoundingClientRect(),{left:d,top:f,width:h,height:m}=u;if(l||t(),!h||!m)return;const y=Tp(f),g=Tp(a.clientWidth-(d+h)),p=Tp(a.clientHeight-(f+m)),v=Tp(d),b={rootMargin:-y+"px "+-g+"px "+-p+"px "+-v+"px",threshold:oa(0,To(1,c))||1};let _=!0;function j(S){const C=S[0].intersectionRatio;if(C!==c){if(!_)return o();C?o(!1,C):n=setTimeout(()=>{o(!1,1e-7)},1e3)}C===1&&!aD(u,e.getBoundingClientRect())&&o(),_=!1}try{r=new IntersectionObserver(j,{...b,root:a.ownerDocument})}catch{r=new IntersectionObserver(j,b)}r.observe(e)}return o(!0),i}function o9(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,u=GS(e),d=a||i?[...u?Mh(u):[],...Mh(t)]:[];d.forEach(v=>{a&&v.addEventListener("scroll",r,{passive:!0}),i&&v.addEventListener("resize",r)});const f=u&&l?s9(u,r):null;let h=-1,m=null;o&&(m=new ResizeObserver(v=>{let[x]=v;x&&x.target===u&&m&&(m.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var b;(b=m)==null||b.observe(t)})),r()}),u&&!c&&m.observe(u),m.observe(t));let y,g=c?Ul(e):null;c&&p();function p(){const v=Ul(e);g&&!aD(g,v)&&r(),g=v,y=requestAnimationFrame(p)}return r(),()=>{var v;d.forEach(x=>{a&&x.removeEventListener("scroll",r),i&&x.removeEventListener("resize",r)}),f==null||f(),(v=m)==null||v.disconnect(),m=null,c&&cancelAnimationFrame(y)}}const l9=Tq,c9=Rq,u9=Eq,d9=$q,f9=Aq,Ok=kq,h9=Mq,m9=(e,t,r)=>{const n=new Map,a={platform:i9,...r},i={...a.platform,_c:n};return Pq(e,t,{...a,platform:i})};var p9=typeof document<"u",g9=function(){},Cg=p9?w.useLayoutEffect:g9;function sv(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!sv(e[n],t[n]))return!1;return!0}if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,a[n]))return!1;for(n=r;n--!==0;){const i=a[n];if(!(i==="_owner"&&e.$$typeof)&&!sv(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function iD(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Tk(e,t){const r=iD(e);return Math.round(t*r)/r}function yb(e){const t=w.useRef(e);return Cg(()=>{t.current=e}),t}function v9(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:a,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[d,f]=w.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[h,m]=w.useState(n);sv(h,n)||m(n);const[y,g]=w.useState(null),[p,v]=w.useState(null),x=w.useCallback(L=>{L!==S.current&&(S.current=L,g(L))},[]),b=w.useCallback(L=>{L!==C.current&&(C.current=L,v(L))},[]),_=i||y,j=o||p,S=w.useRef(null),C=w.useRef(null),P=w.useRef(d),N=c!=null,E=yb(c),A=yb(a),T=yb(u),R=w.useCallback(()=>{if(!S.current||!C.current)return;const L={placement:t,strategy:r,middleware:h};A.current&&(L.platform=A.current),m9(S.current,C.current,L).then(B=>{const z={...B,isPositioned:T.current!==!1};k.current&&!sv(P.current,z)&&(P.current=z,tc.flushSync(()=>{f(z)}))})},[h,t,r,A,T]);Cg(()=>{u===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,f(L=>({...L,isPositioned:!1})))},[u]);const k=w.useRef(!1);Cg(()=>(k.current=!0,()=>{k.current=!1}),[]),Cg(()=>{if(_&&(S.current=_),j&&(C.current=j),_&&j){if(E.current)return E.current(_,j,R);R()}},[_,j,R,E,N]);const O=w.useMemo(()=>({reference:S,floating:C,setReference:x,setFloating:b}),[x,b]),M=w.useMemo(()=>({reference:_,floating:j}),[_,j]),D=w.useMemo(()=>{const L={position:r,left:0,top:0};if(!M.floating)return L;const B=Tk(M.floating,d.x),z=Tk(M.floating,d.y);return l?{...L,transform:"translate("+B+"px, "+z+"px)",...iD(M.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:B,top:z}},[r,l,M.floating,d.x,d.y]);return w.useMemo(()=>({...d,update:R,refs:O,elements:M,floatingStyles:D}),[d,R,O,M,D])}const y9=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:a}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?Ok({element:n.current,padding:a}).fn(r):{}:n?Ok({element:n,padding:a}).fn(r):{}}}},x9=(e,t)=>({...l9(e),options:[e,t]}),b9=(e,t)=>({...c9(e),options:[e,t]}),w9=(e,t)=>({...h9(e),options:[e,t]}),j9=(e,t)=>({...u9(e),options:[e,t]}),_9=(e,t)=>({...d9(e),options:[e,t]}),S9=(e,t)=>({...f9(e),options:[e,t]}),C9=(e,t)=>({...y9(e),options:[e,t]});var N9="Arrow",sD=w.forwardRef((e,t)=>{const{children:r,width:n=10,height:a=5,...i}=e;return s.jsx(We.svg,{...i,ref:t,width:n,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});sD.displayName=N9;var P9=sD;function cx(e){const[t,r]=w.useState(void 0);return un(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=e.offsetWidth,l=e.offsetHeight;r({width:o,height:l})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var QS="Popper",[oD,Rd]=Un(QS),[k9,lD]=oD(QS),cD=e=>{const{__scopePopper:t,children:r}=e,[n,a]=w.useState(null);return s.jsx(k9,{scope:t,anchor:n,onAnchorChange:a,children:r})};cD.displayName=QS;var uD="PopperAnchor",dD=w.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...a}=e,i=lD(uD,r),o=w.useRef(null),l=ut(t,o);return w.useEffect(()=>{i.onAnchorChange((n==null?void 0:n.current)||o.current)}),n?null:s.jsx(We.div,{...a,ref:l})});dD.displayName=uD;var JS="PopperContent",[E9,A9]=oD(JS),fD=w.forwardRef((e,t)=>{var q,de,re,H,Y,G;const{__scopePopper:r,side:n="bottom",sideOffset:a=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:f="partial",hideWhenDetached:h=!1,updatePositionStrategy:m="optimized",onPlaced:y,...g}=e,p=lD(JS,r),[v,x]=w.useState(null),b=ut(t,J=>x(J)),[_,j]=w.useState(null),S=cx(_),C=(S==null?void 0:S.width)??0,P=(S==null?void 0:S.height)??0,N=n+(i!=="center"?"-"+i:""),E=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},A=Array.isArray(u)?u:[u],T=A.length>0,R={padding:E,boundary:A.filter(T9),altBoundary:T},{refs:k,floatingStyles:O,placement:M,isPositioned:D,middlewareData:L}=v9({strategy:"fixed",placement:N,whileElementsMounted:(...J)=>o9(...J,{animationFrame:m==="always"}),elements:{reference:p.anchor},middleware:[x9({mainAxis:a+P,alignmentAxis:o}),c&&b9({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?w9():void 0,...R}),c&&j9({...R}),_9({...R,apply:({elements:J,rects:ge,availableWidth:Ce,availableHeight:$e})=>{const{width:Ge,height:dt}=ge.reference,Rt=J.floating.style;Rt.setProperty("--radix-popper-available-width",`${Ce}px`),Rt.setProperty("--radix-popper-available-height",`${$e}px`),Rt.setProperty("--radix-popper-anchor-width",`${Ge}px`),Rt.setProperty("--radix-popper-anchor-height",`${dt}px`)}}),_&&C9({element:_,padding:l}),R9({arrowWidth:C,arrowHeight:P}),h&&S9({strategy:"referenceHidden",...R})]}),[B,z]=pD(M),Z=Zr(y);un(()=>{D&&(Z==null||Z())},[D,Z]);const ee=(q=L.arrow)==null?void 0:q.x,le=(de=L.arrow)==null?void 0:de.y,V=((re=L.arrow)==null?void 0:re.centerOffset)!==0,[I,F]=w.useState();return un(()=>{v&&F(window.getComputedStyle(v).zIndex)},[v]),s.jsx("div",{ref:k.setFloating,"data-radix-popper-content-wrapper":"",style:{...O,transform:D?O.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:I,"--radix-popper-transform-origin":[(H=L.transformOrigin)==null?void 0:H.x,(Y=L.transformOrigin)==null?void 0:Y.y].join(" "),...((G=L.hide)==null?void 0:G.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:s.jsx(E9,{scope:r,placedSide:B,onArrowChange:j,arrowX:ee,arrowY:le,shouldHideArrow:V,children:s.jsx(We.div,{"data-side":B,"data-align":z,...g,ref:b,style:{...g.style,animation:D?void 0:"none"}})})})});fD.displayName=JS;var hD="PopperArrow",O9={top:"bottom",right:"left",bottom:"top",left:"right"},mD=w.forwardRef(function(t,r){const{__scopePopper:n,...a}=t,i=A9(hD,n),o=O9[i.placedSide];return s.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:s.jsx(P9,{...a,ref:r,style:{...a.style,display:"block"}})})});mD.displayName=hD;function T9(e){return e!==null}var R9=e=>({name:"transformOrigin",options:e,fn(t){var p,v,x;const{placement:r,rects:n,middlewareData:a}=t,o=((p=a.arrow)==null?void 0:p.centerOffset)!==0,l=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[u,d]=pD(r),f={start:"0%",center:"50%",end:"100%"}[d],h=(((v=a.arrow)==null?void 0:v.x)??0)+l/2,m=(((x=a.arrow)==null?void 0:x.y)??0)+c/2;let y="",g="";return u==="bottom"?(y=o?f:`${h}px`,g=`${-c}px`):u==="top"?(y=o?f:`${h}px`,g=`${n.floating.height+c}px`):u==="right"?(y=`${-c}px`,g=o?f:`${m}px`):u==="left"&&(y=`${n.floating.width+c}px`,g=o?f:`${m}px`),{data:{x:y,y:g}}}});function pD(e){const[t,r="center"]=e.split("-");return[t,r]}var ZS=cD,ux=dD,eC=fD,tC=mD,[dx,s2e]=Un("Tooltip",[Rd]),fx=Rd(),gD="TooltipProvider",M9=700,Pj="tooltip.open",[$9,rC]=dx(gD),vD=e=>{const{__scopeTooltip:t,delayDuration:r=M9,skipDelayDuration:n=300,disableHoverableContent:a=!1,children:i}=e,o=w.useRef(!0),l=w.useRef(!1),c=w.useRef(0);return w.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),s.jsx($9,{scope:t,isOpenDelayedRef:o,delayDuration:r,onOpen:w.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:w.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,n)},[n]),isPointerInTransitRef:l,onPointerInTransitChange:w.useCallback(u=>{l.current=u},[]),disableHoverableContent:a,children:i})};vD.displayName=gD;var $h="Tooltip",[I9,hx]=dx($h),yD=e=>{const{__scopeTooltip:t,children:r,open:n,defaultOpen:a,onOpenChange:i,disableHoverableContent:o,delayDuration:l}=e,c=rC($h,e.__scopeTooltip),u=fx(t),[d,f]=w.useState(null),h=Bi(),m=w.useRef(0),y=o??c.disableHoverableContent,g=l??c.delayDuration,p=w.useRef(!1),[v,x]=Jn({prop:n,defaultProp:a??!1,onChange:C=>{C?(c.onOpen(),document.dispatchEvent(new CustomEvent(Pj))):c.onClose(),i==null||i(C)},caller:$h}),b=w.useMemo(()=>v?p.current?"delayed-open":"instant-open":"closed",[v]),_=w.useCallback(()=>{window.clearTimeout(m.current),m.current=0,p.current=!1,x(!0)},[x]),j=w.useCallback(()=>{window.clearTimeout(m.current),m.current=0,x(!1)},[x]),S=w.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>{p.current=!0,x(!0),m.current=0},g)},[g,x]);return w.useEffect(()=>()=>{m.current&&(window.clearTimeout(m.current),m.current=0)},[]),s.jsx(ZS,{...u,children:s.jsx(I9,{scope:t,contentId:h,open:v,stateAttribute:b,trigger:d,onTriggerChange:f,onTriggerEnter:w.useCallback(()=>{c.isOpenDelayedRef.current?S():_()},[c.isOpenDelayedRef,S,_]),onTriggerLeave:w.useCallback(()=>{y?j():(window.clearTimeout(m.current),m.current=0)},[j,y]),onOpen:_,onClose:j,disableHoverableContent:y,children:r})})};yD.displayName=$h;var kj="TooltipTrigger",xD=w.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,a=hx(kj,r),i=rC(kj,r),o=fx(r),l=w.useRef(null),c=ut(t,l,a.onTriggerChange),u=w.useRef(!1),d=w.useRef(!1),f=w.useCallback(()=>u.current=!1,[]);return w.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),s.jsx(ux,{asChild:!0,...o,children:s.jsx(We.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...n,ref:c,onPointerMove:Te(e.onPointerMove,h=>{h.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),d.current=!0)}),onPointerLeave:Te(e.onPointerLeave,()=>{a.onTriggerLeave(),d.current=!1}),onPointerDown:Te(e.onPointerDown,()=>{a.open&&a.onClose(),u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:Te(e.onFocus,()=>{u.current||a.onOpen()}),onBlur:Te(e.onBlur,a.onClose),onClick:Te(e.onClick,a.onClose)})})});xD.displayName=kj;var D9="TooltipPortal",[o2e,L9]=dx(D9,{forceMount:void 0}),Du="TooltipContent",bD=w.forwardRef((e,t)=>{const r=L9(Du,e.__scopeTooltip),{forceMount:n=r.forceMount,side:a="top",...i}=e,o=hx(Du,e.__scopeTooltip);return s.jsx(Zn,{present:n||o.open,children:o.disableHoverableContent?s.jsx(wD,{side:a,...i,ref:t}):s.jsx(B9,{side:a,...i,ref:t})})}),B9=w.forwardRef((e,t)=>{const r=hx(Du,e.__scopeTooltip),n=rC(Du,e.__scopeTooltip),a=w.useRef(null),i=ut(t,a),[o,l]=w.useState(null),{trigger:c,onClose:u}=r,d=a.current,{onPointerInTransitChange:f}=n,h=w.useCallback(()=>{l(null),f(!1)},[f]),m=w.useCallback((y,g)=>{const p=y.currentTarget,v={x:y.clientX,y:y.clientY},x=W9(v,p.getBoundingClientRect()),b=H9(v,x),_=q9(g.getBoundingClientRect()),j=Y9([...b,..._]);l(j),f(!0)},[f]);return w.useEffect(()=>()=>h(),[h]),w.useEffect(()=>{if(c&&d){const y=p=>m(p,d),g=p=>m(p,c);return c.addEventListener("pointerleave",y),d.addEventListener("pointerleave",g),()=>{c.removeEventListener("pointerleave",y),d.removeEventListener("pointerleave",g)}}},[c,d,m,h]),w.useEffect(()=>{if(o){const y=g=>{const p=g.target,v={x:g.clientX,y:g.clientY},x=(c==null?void 0:c.contains(p))||(d==null?void 0:d.contains(p)),b=!K9(v,o);x?h():b&&(h(),u())};return document.addEventListener("pointermove",y),()=>document.removeEventListener("pointermove",y)}},[c,d,o,u,h]),s.jsx(wD,{...e,ref:i})}),[F9,z9]=dx($h,{isInside:!1}),U9=tI("TooltipContent"),wD=w.forwardRef((e,t)=>{const{__scopeTooltip:r,children:n,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=e,c=hx(Du,r),u=fx(r),{onClose:d}=c;return w.useEffect(()=>(document.addEventListener(Pj,d),()=>document.removeEventListener(Pj,d)),[d]),w.useEffect(()=>{if(c.trigger){const f=h=>{const m=h.target;m!=null&&m.contains(c.trigger)&&d()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,d]),s.jsx(Pd,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:d,children:s.jsxs(eC,{"data-state":c.stateAttribute,...u,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[s.jsx(U9,{children:n}),s.jsx(F9,{scope:r,isInside:!0,children:s.jsx(uW,{id:c.contentId,role:"tooltip",children:a||n})})]})})});bD.displayName=Du;var jD="TooltipArrow",V9=w.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,a=fx(r);return z9(jD,r).isInside?null:s.jsx(tC,{...a,...n,ref:t})});V9.displayName=jD;function W9(e,t){const r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(r,n,a,i)){case i:return"left";case a:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function H9(e,t,r=5){const n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return n}function q9(e){const{top:t,right:r,bottom:n,left:a}=e;return[{x:a,y:t},{x:r,y:t},{x:r,y:n},{x:a,y:n}]}function K9(e,t){const{x:r,y:n}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],c=t[o],u=l.x,d=l.y,f=c.x,h=c.y;d>n!=h>n&&r<(f-u)*(n-d)/(h-d)+u&&(a=!a)}return a}function Y9(e){const t=e.slice();return t.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),G9(t)}function G9(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const a=e[n];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))t.pop();else break}t.push(a)}t.pop();const r=[];for(let n=e.length-1;n>=0;n--){const a=e[n];for(;r.length>=2;){const i=r[r.length-1],o=r[r.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))r.pop();else break}r.push(a)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var X9=vD,Q9=yD,J9=xD,_D=bD;const Z9=X9,e7=Q9,t7=J9,SD=w.forwardRef(({className:e,sideOffset:t=4,...r},n)=>s.jsx(_D,{ref:n,sideOffset:t,className:ue("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r}));SD.displayName=_D.displayName;var mx=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},px=typeof window>"u"||"Deno"in globalThis;function Ga(){}function r7(e,t){return typeof e=="function"?e(t):e}function n7(e){return typeof e=="number"&&e>=0&&e!==1/0}function a7(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Ej(e,t){return typeof e=="function"?e(t):e}function i7(e,t){return typeof e=="function"?e(t):e}function Rk(e,t){const{type:r="all",exact:n,fetchStatus:a,predicate:i,queryKey:o,stale:l}=e;if(o){if(n){if(t.queryHash!==nC(o,t.options))return!1}else if(!Dh(t.queryKey,o))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||a&&a!==t.state.fetchStatus||i&&!i(t))}function Mk(e,t){const{exact:r,status:n,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(Ih(t.options.mutationKey)!==Ih(i))return!1}else if(!Dh(t.options.mutationKey,i))return!1}return!(n&&t.state.status!==n||a&&!a(t))}function nC(e,t){return((t==null?void 0:t.queryKeyHashFn)||Ih)(e)}function Ih(e){return JSON.stringify(e,(t,r)=>Aj(r)?Object.keys(r).sort().reduce((n,a)=>(n[a]=r[a],n),{}):r)}function Dh(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>Dh(e[r],t[r])):!1}function CD(e,t){if(e===t)return e;const r=$k(e)&&$k(t);if(r||Aj(e)&&Aj(t)){const n=r?e:Object.keys(e),a=n.length,i=r?t:Object.keys(t),o=i.length,l=r?[]:{},c=new Set(n);let u=0;for(let d=0;d<o;d++){const f=r?d:i[d];(!r&&c.has(f)||r)&&e[f]===void 0&&t[f]===void 0?(l[f]=void 0,u++):(l[f]=CD(e[f],t[f]),l[f]===e[f]&&e[f]!==void 0&&u++)}return a===o&&u===a?e:l}return t}function $k(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Aj(e){if(!Ik(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!Ik(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Ik(e){return Object.prototype.toString.call(e)==="[object Object]"}function s7(e){return new Promise(t=>{setTimeout(t,e)})}function o7(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?CD(e,t):t}function l7(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function c7(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var aC=Symbol();function ND(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===aC?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var Sl,to,yu,AR,u7=(AR=class extends mx{constructor(){super();Et(this,Sl);Et(this,to);Et(this,yu);mt(this,yu,t=>{if(!px&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){ve(this,to)||this.setEventListener(ve(this,yu))}onUnsubscribe(){var t;this.hasListeners()||((t=ve(this,to))==null||t.call(this),mt(this,to,void 0))}setEventListener(t){var r;mt(this,yu,t),(r=ve(this,to))==null||r.call(this),mt(this,to,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){ve(this,Sl)!==t&&(mt(this,Sl,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof ve(this,Sl)=="boolean"?ve(this,Sl):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Sl=new WeakMap,to=new WeakMap,yu=new WeakMap,AR),PD=new u7,xu,ro,bu,OR,d7=(OR=class extends mx{constructor(){super();Et(this,xu,!0);Et(this,ro);Et(this,bu);mt(this,bu,t=>{if(!px&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){ve(this,ro)||this.setEventListener(ve(this,bu))}onUnsubscribe(){var t;this.hasListeners()||((t=ve(this,ro))==null||t.call(this),mt(this,ro,void 0))}setEventListener(t){var r;mt(this,bu,t),(r=ve(this,ro))==null||r.call(this),mt(this,ro,t(this.setOnline.bind(this)))}setOnline(t){ve(this,xu)!==t&&(mt(this,xu,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return ve(this,xu)}},xu=new WeakMap,ro=new WeakMap,bu=new WeakMap,OR),ov=new d7;function f7(){let e,t;const r=new Promise((a,i)=>{e=a,t=i});r.status="pending",r.catch(()=>{});function n(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{n({status:"fulfilled",value:a}),e(a)},r.reject=a=>{n({status:"rejected",reason:a}),t(a)},r}function h7(e){return Math.min(1e3*2**e,3e4)}function kD(e){return(e??"online")==="online"?ov.isOnline():!0}var ED=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function xb(e){return e instanceof ED}function AD(e){let t=!1,r=0,n=!1,a;const i=f7(),o=g=>{var p;n||(h(new ED(g)),(p=e.abort)==null||p.call(e))},l=()=>{t=!0},c=()=>{t=!1},u=()=>PD.isFocused()&&(e.networkMode==="always"||ov.isOnline())&&e.canRun(),d=()=>kD(e.networkMode)&&e.canRun(),f=g=>{var p;n||(n=!0,(p=e.onSuccess)==null||p.call(e,g),a==null||a(),i.resolve(g))},h=g=>{var p;n||(n=!0,(p=e.onError)==null||p.call(e,g),a==null||a(),i.reject(g))},m=()=>new Promise(g=>{var p;a=v=>{(n||u())&&g(v)},(p=e.onPause)==null||p.call(e)}).then(()=>{var g;a=void 0,n||(g=e.onContinue)==null||g.call(e)}),y=()=>{if(n)return;let g;const p=r===0?e.initialPromise:void 0;try{g=p??e.fn()}catch(v){g=Promise.reject(v)}Promise.resolve(g).then(f).catch(v=>{var S;if(n)return;const x=e.retry??(px?0:3),b=e.retryDelay??h7,_=typeof b=="function"?b(r,v):b,j=x===!0||typeof x=="number"&&r<x||typeof x=="function"&&x(r,v);if(t||!j){h(v);return}r++,(S=e.onFail)==null||S.call(e,r,v),s7(_).then(()=>u()?void 0:m()).then(()=>{t?h(v):y()})})};return{promise:i,cancel:o,continue:()=>(a==null||a(),i),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?y():m().then(y),i)}}var m7=e=>setTimeout(e,0);function p7(){let e=[],t=0,r=l=>{l()},n=l=>{l()},a=m7;const i=l=>{t?e.push(l):a(()=>{r(l)})},o=()=>{const l=e;e=[],l.length&&a(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{a=l}}}var Rn=p7(),Cl,TR,OD=(TR=class{constructor(){Et(this,Cl)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),n7(this.gcTime)&&mt(this,Cl,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(px?1/0:5*60*1e3))}clearGcTimeout(){ve(this,Cl)&&(clearTimeout(ve(this,Cl)),mt(this,Cl,void 0))}},Cl=new WeakMap,TR),wu,Nl,Ca,Pl,Sn,Bm,kl,Ja,rs,RR,g7=(RR=class extends OD{constructor(t){super();Et(this,Ja);Et(this,wu);Et(this,Nl);Et(this,Ca);Et(this,Pl);Et(this,Sn);Et(this,Bm);Et(this,kl);mt(this,kl,!1),mt(this,Bm,t.defaultOptions),this.setOptions(t.options),this.observers=[],mt(this,Pl,t.client),mt(this,Ca,ve(this,Pl).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,mt(this,wu,y7(this.options)),this.state=t.state??ve(this,wu),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=ve(this,Sn))==null?void 0:t.promise}setOptions(t){this.options={...ve(this,Bm),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&ve(this,Ca).remove(this)}setData(t,r){const n=o7(this.state.data,t,this.options);return xn(this,Ja,rs).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){xn(this,Ja,rs).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,a;const r=(n=ve(this,Sn))==null?void 0:n.promise;return(a=ve(this,Sn))==null||a.cancel(t),r?r.then(Ga).catch(Ga):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(ve(this,wu))}isActive(){return this.observers.some(t=>i7(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===aC||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Ej(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!a7(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=ve(this,Sn))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=ve(this,Sn))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),ve(this,Ca).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(ve(this,Sn)&&(ve(this,kl)?ve(this,Sn).cancel({revert:!0}):ve(this,Sn).cancelRetry()),this.scheduleGc()),ve(this,Ca).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||xn(this,Ja,rs).call(this,{type:"invalidate"})}fetch(t,r){var u,d,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(ve(this,Sn))return ve(this,Sn).continueRetry(),ve(this,Sn).promise}if(t&&this.setOptions(t),!this.options.queryFn){const h=this.observers.find(m=>m.options.queryFn);h&&this.setOptions(h.options)}const n=new AbortController,a=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(mt(this,kl,!0),n.signal)})},i=()=>{const h=ND(this.options,r),y=(()=>{const g={client:ve(this,Pl),queryKey:this.queryKey,meta:this.meta};return a(g),g})();return mt(this,kl,!1),this.options.persister?this.options.persister(h,y,this):h(y)},l=(()=>{const h={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:ve(this,Pl),state:this.state,fetchFn:i};return a(h),h})();(u=this.options.behavior)==null||u.onFetch(l,this),mt(this,Nl,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=l.fetchOptions)==null?void 0:d.meta))&&xn(this,Ja,rs).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta});const c=h=>{var m,y,g,p;xb(h)&&h.silent||xn(this,Ja,rs).call(this,{type:"error",error:h}),xb(h)||((y=(m=ve(this,Ca).config).onError)==null||y.call(m,h,this),(p=(g=ve(this,Ca).config).onSettled)==null||p.call(g,this.state.data,h,this)),this.scheduleGc()};return mt(this,Sn,AD({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,abort:n.abort.bind(n),onSuccess:h=>{var m,y,g,p;if(h===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(v){c(v);return}(y=(m=ve(this,Ca).config).onSuccess)==null||y.call(m,h,this),(p=(g=ve(this,Ca).config).onSettled)==null||p.call(g,h,this.state.error,this),this.scheduleGc()},onError:c,onFail:(h,m)=>{xn(this,Ja,rs).call(this,{type:"failed",failureCount:h,error:m})},onPause:()=>{xn(this,Ja,rs).call(this,{type:"pause"})},onContinue:()=>{xn(this,Ja,rs).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),ve(this,Sn).start()}},wu=new WeakMap,Nl=new WeakMap,Ca=new WeakMap,Pl=new WeakMap,Sn=new WeakMap,Bm=new WeakMap,kl=new WeakMap,Ja=new WeakSet,rs=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...v7(n.data,this.options),fetchMeta:t.meta??null};case"success":return mt(this,Nl,void 0),{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=t.error;return xb(a)&&a.revert&&ve(this,Nl)?{...ve(this,Nl),fetchStatus:"idle"}:{...n,error:a,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),Rn.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),ve(this,Ca).notify({query:this,type:"updated",action:t})})},RR);function v7(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:kD(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function y7(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Ci,MR,x7=(MR=class extends mx{constructor(t={}){super();Et(this,Ci);this.config=t,mt(this,Ci,new Map)}build(t,r,n){const a=r.queryKey,i=r.queryHash??nC(a,r);let o=this.get(i);return o||(o=new g7({client:t,queryKey:a,queryHash:i,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(a)}),this.add(o)),o}add(t){ve(this,Ci).has(t.queryHash)||(ve(this,Ci).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=ve(this,Ci).get(t.queryHash);r&&(t.destroy(),r===t&&ve(this,Ci).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Rn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return ve(this,Ci).get(t)}getAll(){return[...ve(this,Ci).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>Rk(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>Rk(t,n)):r}notify(t){Rn.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){Rn.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Rn.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Ci=new WeakMap,MR),Ni,An,El,Pi,Vs,$R,b7=($R=class extends OD{constructor(t){super();Et(this,Pi);Et(this,Ni);Et(this,An);Et(this,El);this.mutationId=t.mutationId,mt(this,An,t.mutationCache),mt(this,Ni,[]),this.state=t.state||w7(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){ve(this,Ni).includes(t)||(ve(this,Ni).push(t),this.clearGcTimeout(),ve(this,An).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){mt(this,Ni,ve(this,Ni).filter(r=>r!==t)),this.scheduleGc(),ve(this,An).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){ve(this,Ni).length||(this.state.status==="pending"?this.scheduleGc():ve(this,An).remove(this))}continue(){var t;return((t=ve(this,El))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var i,o,l,c,u,d,f,h,m,y,g,p,v,x,b,_,j,S,C,P;const r=()=>{xn(this,Pi,Vs).call(this,{type:"continue"})};mt(this,El,AD({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(N,E)=>{xn(this,Pi,Vs).call(this,{type:"failed",failureCount:N,error:E})},onPause:()=>{xn(this,Pi,Vs).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>ve(this,An).canRun(this)}));const n=this.state.status==="pending",a=!ve(this,El).canStart();try{if(n)r();else{xn(this,Pi,Vs).call(this,{type:"pending",variables:t,isPaused:a}),await((o=(i=ve(this,An).config).onMutate)==null?void 0:o.call(i,t,this));const E=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,t));E!==this.state.context&&xn(this,Pi,Vs).call(this,{type:"pending",context:E,variables:t,isPaused:a})}const N=await ve(this,El).start();return await((d=(u=ve(this,An).config).onSuccess)==null?void 0:d.call(u,N,t,this.state.context,this)),await((h=(f=this.options).onSuccess)==null?void 0:h.call(f,N,t,this.state.context)),await((y=(m=ve(this,An).config).onSettled)==null?void 0:y.call(m,N,null,this.state.variables,this.state.context,this)),await((p=(g=this.options).onSettled)==null?void 0:p.call(g,N,null,t,this.state.context)),xn(this,Pi,Vs).call(this,{type:"success",data:N}),N}catch(N){try{throw await((x=(v=ve(this,An).config).onError)==null?void 0:x.call(v,N,t,this.state.context,this)),await((_=(b=this.options).onError)==null?void 0:_.call(b,N,t,this.state.context)),await((S=(j=ve(this,An).config).onSettled)==null?void 0:S.call(j,void 0,N,this.state.variables,this.state.context,this)),await((P=(C=this.options).onSettled)==null?void 0:P.call(C,void 0,N,t,this.state.context)),N}finally{xn(this,Pi,Vs).call(this,{type:"error",error:N})}}finally{ve(this,An).runNext(this)}}},Ni=new WeakMap,An=new WeakMap,El=new WeakMap,Pi=new WeakSet,Vs=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Rn.batch(()=>{ve(this,Ni).forEach(n=>{n.onMutationUpdate(t)}),ve(this,An).notify({mutation:this,type:"updated",action:t})})},$R);function w7(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var os,Za,Fm,IR,j7=(IR=class extends mx{constructor(t={}){super();Et(this,os);Et(this,Za);Et(this,Fm);this.config=t,mt(this,os,new Set),mt(this,Za,new Map),mt(this,Fm,0)}build(t,r,n){const a=new b7({mutationCache:this,mutationId:++up(this,Fm)._,options:t.defaultMutationOptions(r),state:n});return this.add(a),a}add(t){ve(this,os).add(t);const r=Rp(t);if(typeof r=="string"){const n=ve(this,Za).get(r);n?n.push(t):ve(this,Za).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(ve(this,os).delete(t)){const r=Rp(t);if(typeof r=="string"){const n=ve(this,Za).get(r);if(n)if(n.length>1){const a=n.indexOf(t);a!==-1&&n.splice(a,1)}else n[0]===t&&ve(this,Za).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=Rp(t);if(typeof r=="string"){const n=ve(this,Za).get(r),a=n==null?void 0:n.find(i=>i.state.status==="pending");return!a||a===t}else return!0}runNext(t){var n;const r=Rp(t);if(typeof r=="string"){const a=(n=ve(this,Za).get(r))==null?void 0:n.find(i=>i!==t&&i.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Rn.batch(()=>{ve(this,os).forEach(t=>{this.notify({type:"removed",mutation:t})}),ve(this,os).clear(),ve(this,Za).clear()})}getAll(){return Array.from(ve(this,os))}find(t){const r={exact:!0,...t};return this.getAll().find(n=>Mk(r,n))}findAll(t={}){return this.getAll().filter(r=>Mk(t,r))}notify(t){Rn.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return Rn.batch(()=>Promise.all(t.map(r=>r.continue().catch(Ga))))}},os=new WeakMap,Za=new WeakMap,Fm=new WeakMap,IR);function Rp(e){var t;return(t=e.options.scope)==null?void 0:t.id}function Dk(e){return{onFetch:(t,r)=>{var d,f,h,m,y;const n=t.options,a=(h=(f=(d=t.fetchOptions)==null?void 0:d.meta)==null?void 0:f.fetchMore)==null?void 0:h.direction,i=((m=t.state.data)==null?void 0:m.pages)||[],o=((y=t.state.data)==null?void 0:y.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let g=!1;const p=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(t.signal.aborted?g=!0:t.signal.addEventListener("abort",()=>{g=!0}),t.signal)})},v=ND(t.options,t.fetchOptions),x=async(b,_,j)=>{if(g)return Promise.reject();if(_==null&&b.pages.length)return Promise.resolve(b);const C=(()=>{const A={client:t.client,queryKey:t.queryKey,pageParam:_,direction:j?"backward":"forward",meta:t.options.meta};return p(A),A})(),P=await v(C),{maxPages:N}=t.options,E=j?c7:l7;return{pages:E(b.pages,P,N),pageParams:E(b.pageParams,_,N)}};if(a&&i.length){const b=a==="backward",_=b?_7:Lk,j={pages:i,pageParams:o},S=_(n,j);l=await x(j,S,b)}else{const b=e??i.length;do{const _=c===0?o[0]??n.initialPageParam:Lk(n,l);if(c>0&&_==null)break;l=await x(l,_),c++}while(c<b)}return l};t.options.persister?t.fetchFn=()=>{var g,p;return(p=(g=t.options).persister)==null?void 0:p.call(g,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=u}}}function Lk(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function _7(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var kr,no,ao,ju,_u,io,Su,Cu,DR,S7=(DR=class{constructor(e={}){Et(this,kr);Et(this,no);Et(this,ao);Et(this,ju);Et(this,_u);Et(this,io);Et(this,Su);Et(this,Cu);mt(this,kr,e.queryCache||new x7),mt(this,no,e.mutationCache||new j7),mt(this,ao,e.defaultOptions||{}),mt(this,ju,new Map),mt(this,_u,new Map),mt(this,io,0)}mount(){up(this,io)._++,ve(this,io)===1&&(mt(this,Su,PD.subscribe(async e=>{e&&(await this.resumePausedMutations(),ve(this,kr).onFocus())})),mt(this,Cu,ov.subscribe(async e=>{e&&(await this.resumePausedMutations(),ve(this,kr).onOnline())})))}unmount(){var e,t;up(this,io)._--,ve(this,io)===0&&((e=ve(this,Su))==null||e.call(this),mt(this,Su,void 0),(t=ve(this,Cu))==null||t.call(this),mt(this,Cu,void 0))}isFetching(e){return ve(this,kr).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return ve(this,no).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=ve(this,kr).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=ve(this,kr).build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(Ej(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return ve(this,kr).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),a=ve(this,kr).get(n.queryHash),i=a==null?void 0:a.state.data,o=r7(t,i);if(o!==void 0)return ve(this,kr).build(this,n).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return Rn.batch(()=>ve(this,kr).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=ve(this,kr).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=ve(this,kr);Rn.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=ve(this,kr);return Rn.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=Rn.batch(()=>ve(this,kr).findAll(e).map(a=>a.cancel(r)));return Promise.all(n).then(Ga).catch(Ga)}invalidateQueries(e,t={}){return Rn.batch(()=>(ve(this,kr).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=Rn.batch(()=>ve(this,kr).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,r);return r.throwOnError||(i=i.catch(Ga)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(Ga)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=ve(this,kr).build(this,t);return r.isStaleByTime(Ej(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Ga).catch(Ga)}fetchInfiniteQuery(e){return e.behavior=Dk(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Ga).catch(Ga)}ensureInfiniteQueryData(e){return e.behavior=Dk(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return ov.isOnline()?ve(this,no).resumePausedMutations():Promise.resolve()}getQueryCache(){return ve(this,kr)}getMutationCache(){return ve(this,no)}getDefaultOptions(){return ve(this,ao)}setDefaultOptions(e){mt(this,ao,e)}setQueryDefaults(e,t){ve(this,ju).set(Ih(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...ve(this,ju).values()],r={};return t.forEach(n=>{Dh(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){ve(this,_u).set(Ih(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...ve(this,_u).values()],r={};return t.forEach(n=>{Dh(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...ve(this,ao).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=nC(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===aC&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...ve(this,ao).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){ve(this,kr).clear(),ve(this,no).clear()}},kr=new WeakMap,no=new WeakMap,ao=new WeakMap,ju=new WeakMap,_u=new WeakMap,io=new WeakMap,Su=new WeakMap,Cu=new WeakMap,DR),C7=w.createContext(void 0),N7=({client:e,children:t})=>(w.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),s.jsx(C7.Provider,{value:e,children:t}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Lh(){return Lh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Lh.apply(this,arguments)}var lo;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(lo||(lo={}));const Bk="popstate";function P7(e){e===void 0&&(e={});function t(n,a){let{pathname:i,search:o,hash:l}=n.location;return Oj("",{pathname:i,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:lv(a)}return E7(t,r,null,e)}function _r(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function TD(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function k7(){return Math.random().toString(36).substr(2,8)}function Fk(e,t){return{usr:e.state,key:e.key,idx:t}}function Oj(e,t,r,n){return r===void 0&&(r=null),Lh({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Md(t):t,{state:r,key:t&&t.key||n||k7()})}function lv(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Md(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function E7(e,t,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:i=!1}=n,o=a.history,l=lo.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(Lh({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function f(){l=lo.Pop;let p=d(),v=p==null?null:p-u;u=p,c&&c({action:l,location:g.location,delta:v})}function h(p,v){l=lo.Push;let x=Oj(g.location,p,v);u=d()+1;let b=Fk(x,u),_=g.createHref(x);try{o.pushState(b,"",_)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;a.location.assign(_)}i&&c&&c({action:l,location:g.location,delta:1})}function m(p,v){l=lo.Replace;let x=Oj(g.location,p,v);u=d();let b=Fk(x,u),_=g.createHref(x);o.replaceState(b,"",_),i&&c&&c({action:l,location:g.location,delta:0})}function y(p){let v=a.location.origin!=="null"?a.location.origin:a.location.href,x=typeof p=="string"?p:lv(p);return x=x.replace(/ $/,"%20"),_r(v,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,v)}let g={get action(){return l},get location(){return e(a,o)},listen(p){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(Bk,f),c=p,()=>{a.removeEventListener(Bk,f),c=null}},createHref(p){return t(a,p)},createURL:y,encodeLocation(p){let v=y(p);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:h,replace:m,go(p){return o.go(p)}};return g}var zk;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(zk||(zk={}));function A7(e,t,r){return r===void 0&&(r="/"),O7(e,t,r,!1)}function O7(e,t,r,n){let a=typeof t=="string"?Md(t):t,i=Lu(a.pathname||"/",r);if(i==null)return null;let o=RD(e);T7(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=V7(i);l=z7(o[c],u,n)}return l}function RD(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(_r(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=Co([n,c.relativePath]),d=r.concat(c);i.children&&i.children.length>0&&(_r(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),RD(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:B7(u,i.index),routesMeta:d})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))a(i,o);else for(let c of MD(i.path))a(i,o,c)}),t}function MD(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let o=MD(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),a&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function T7(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:F7(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const R7=/^:[\w-]+$/,M7=3,$7=2,I7=1,D7=10,L7=-2,Uk=e=>e==="*";function B7(e,t){let r=e.split("/"),n=r.length;return r.some(Uk)&&(n+=L7),t&&(n+=$7),r.filter(a=>!Uk(a)).reduce((a,i)=>a+(R7.test(i)?M7:i===""?I7:D7),n)}function F7(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function z7(e,t,r){let{routesMeta:n}=e,a={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=i==="/"?t:t.slice(i.length)||"/",f=cv({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),h=c.route;if(!f&&u&&r&&!n[n.length-1].route.index&&(f=cv({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(a,f.params),o.push({params:a,pathname:Co([i,f.pathname]),pathnameBase:K7(Co([i,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(i=Co([i,f.pathnameBase]))}return o}function cv(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=U7(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((u,d,f)=>{let{paramName:h,isOptional:m}=d;if(h==="*"){let g=l[f]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const y=l[f];return m&&!y?u[h]=void 0:u[h]=(y||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:e}}function U7(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),TD(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function V7(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return TD(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Lu(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function W7(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?Md(e):e;return{pathname:r?r.startsWith("/")?r:H7(r,t):t,search:Y7(n),hash:G7(a)}}function H7(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function bb(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function q7(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function iC(e,t){let r=q7(e);return t?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function sC(e,t,r,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=Md(e):(a=Lh({},e),_r(!a.pathname||!a.pathname.includes("?"),bb("?","pathname","search",a)),_r(!a.pathname||!a.pathname.includes("#"),bb("#","pathname","hash",a)),_r(!a.search||!a.search.includes("#"),bb("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,l;if(o==null)l=r;else{let f=t.length-1;if(!n&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),f-=1;a.pathname=h.join("/")}l=f>=0?t[f]:"/"}let c=W7(a,l),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const Co=e=>e.join("/").replace(/\/\/+/g,"/"),K7=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Y7=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,G7=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function X7(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const $D=["post","put","patch","delete"];new Set($D);const Q7=["get",...$D];new Set(Q7);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bh(){return Bh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bh.apply(this,arguments)}const gx=w.createContext(null),ID=w.createContext(null),Os=w.createContext(null),vx=w.createContext(null),zo=w.createContext({outlet:null,matches:[],isDataRoute:!1}),DD=w.createContext(null);function J7(e,t){let{relative:r}=t===void 0?{}:t;$d()||_r(!1);let{basename:n,navigator:a}=w.useContext(Os),{hash:i,pathname:o,search:l}=yx(e,{relative:r}),c=o;return n!=="/"&&(c=o==="/"?n:Co([n,o])),a.createHref({pathname:c,search:l,hash:i})}function $d(){return w.useContext(vx)!=null}function nc(){return $d()||_r(!1),w.useContext(vx).location}function LD(e){w.useContext(Os).static||w.useLayoutEffect(e)}function Qm(){let{isDataRoute:e}=w.useContext(zo);return e?dK():Z7()}function Z7(){$d()||_r(!1);let e=w.useContext(gx),{basename:t,future:r,navigator:n}=w.useContext(Os),{matches:a}=w.useContext(zo),{pathname:i}=nc(),o=JSON.stringify(iC(a,r.v7_relativeSplatPath)),l=w.useRef(!1);return LD(()=>{l.current=!0}),w.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let f=sC(u,JSON.parse(o),i,d.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Co([t,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[t,n,o,i,e])}function yx(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=w.useContext(Os),{matches:a}=w.useContext(zo),{pathname:i}=nc(),o=JSON.stringify(iC(a,n.v7_relativeSplatPath));return w.useMemo(()=>sC(e,JSON.parse(o),i,r==="path"),[e,o,i,r])}function eK(e,t){return tK(e,t)}function tK(e,t,r,n){$d()||_r(!1);let{navigator:a}=w.useContext(Os),{matches:i}=w.useContext(zo),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=nc(),d;if(t){var f;let p=typeof t=="string"?Md(t):t;c==="/"||(f=p.pathname)!=null&&f.startsWith(c)||_r(!1),d=p}else d=u;let h=d.pathname||"/",m=h;if(c!=="/"){let p=c.replace(/^\//,"").split("/");m="/"+h.replace(/^\//,"").split("/").slice(p.length).join("/")}let y=A7(e,{pathname:m}),g=sK(y&&y.map(p=>Object.assign({},p,{params:Object.assign({},l,p.params),pathname:Co([c,a.encodeLocation?a.encodeLocation(p.pathname).pathname:p.pathname]),pathnameBase:p.pathnameBase==="/"?c:Co([c,a.encodeLocation?a.encodeLocation(p.pathnameBase).pathname:p.pathnameBase])})),i,r,n);return t&&g?w.createElement(vx.Provider,{value:{location:Bh({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:lo.Pop}},g):g}function rK(){let e=uK(),t=X7(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},t),r?w.createElement("pre",{style:a},r):null,null)}const nK=w.createElement(rK,null);class aK extends w.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?w.createElement(zo.Provider,{value:this.props.routeContext},w.createElement(DD.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function iK(e){let{routeContext:t,match:r,children:n}=e,a=w.useContext(gx);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),w.createElement(zo.Provider,{value:t},n)}function sK(e,t,r,n){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,l=(a=r)==null?void 0:a.errors;if(l!=null){let d=o.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);d>=0||_r(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<o.length;d++){let f=o[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:h,errors:m}=r,y=f.route.loader&&h[f.route.id]===void 0&&(!m||m[f.route.id]===void 0);if(f.route.lazy||y){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,f,h)=>{let m,y=!1,g=null,p=null;r&&(m=l&&f.route.id?l[f.route.id]:void 0,g=f.route.errorElement||nK,c&&(u<0&&h===0?(y=!0,p=null):u===h&&(y=!0,p=f.route.hydrateFallbackElement||null)));let v=t.concat(o.slice(0,h+1)),x=()=>{let b;return m?b=g:y?b=p:f.route.Component?b=w.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=d,w.createElement(iK,{match:f,routeContext:{outlet:d,matches:v,isDataRoute:r!=null},children:b})};return r&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?w.createElement(aK,{location:r.location,revalidation:r.revalidation,component:g,error:m,children:x(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):x()},null)}var BD=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(BD||{}),uv=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(uv||{});function oK(e){let t=w.useContext(gx);return t||_r(!1),t}function lK(e){let t=w.useContext(ID);return t||_r(!1),t}function cK(e){let t=w.useContext(zo);return t||_r(!1),t}function FD(e){let t=cK(),r=t.matches[t.matches.length-1];return r.route.id||_r(!1),r.route.id}function uK(){var e;let t=w.useContext(DD),r=lK(uv.UseRouteError),n=FD(uv.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function dK(){let{router:e}=oK(BD.UseNavigateStable),t=FD(uv.UseNavigateStable),r=w.useRef(!1);return LD(()=>{r.current=!0}),w.useCallback(function(a,i){i===void 0&&(i={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,Bh({fromRouteId:t},i)))},[e,t])}function fK(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function dv(e){let{to:t,replace:r,state:n,relative:a}=e;$d()||_r(!1);let{future:i,static:o}=w.useContext(Os),{matches:l}=w.useContext(zo),{pathname:c}=nc(),u=Qm(),d=sC(t,iC(l,i.v7_relativeSplatPath),c,a==="path"),f=JSON.stringify(d);return w.useEffect(()=>u(JSON.parse(f),{replace:r,state:n,relative:a}),[u,f,a,r,n]),null}function Rr(e){_r(!1)}function hK(e){let{basename:t="/",children:r=null,location:n,navigationType:a=lo.Pop,navigator:i,static:o=!1,future:l}=e;$d()&&_r(!1);let c=t.replace(/^\/*/,"/"),u=w.useMemo(()=>({basename:c,navigator:i,static:o,future:Bh({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof n=="string"&&(n=Md(n));let{pathname:d="/",search:f="",hash:h="",state:m=null,key:y="default"}=n,g=w.useMemo(()=>{let p=Lu(d,c);return p==null?null:{location:{pathname:p,search:f,hash:h,state:m,key:y},navigationType:a}},[c,d,f,h,m,y,a]);return g==null?null:w.createElement(Os.Provider,{value:u},w.createElement(vx.Provider,{children:r,value:g}))}function mK(e){let{children:t,location:r}=e;return eK(Tj(t),r)}new Promise(()=>{});function Tj(e,t){t===void 0&&(t=[]);let r=[];return w.Children.forEach(e,(n,a)=>{if(!w.isValidElement(n))return;let i=[...t,a];if(n.type===w.Fragment){r.push.apply(r,Tj(n.props.children,i));return}n.type!==Rr&&_r(!1),!n.props.index||!n.props.children||_r(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Tj(n.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fv(){return fv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fv.apply(this,arguments)}function zD(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function pK(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function gK(e,t){return e.button===0&&(!t||t==="_self")&&!pK(e)}const vK=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],yK=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],xK="6";try{window.__reactRouterVersion=xK}catch{}const bK=w.createContext({isTransitioning:!1}),wK="startTransition",Vk=W_[wK];function jK(e){let{basename:t,children:r,future:n,window:a}=e,i=w.useRef();i.current==null&&(i.current=P7({window:a,v5Compat:!0}));let o=i.current,[l,c]=w.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},d=w.useCallback(f=>{u&&Vk?Vk(()=>c(f)):c(f)},[c,u]);return w.useLayoutEffect(()=>o.listen(d),[o,d]),w.useEffect(()=>fK(n),[n]),w.createElement(hK,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}const _K=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",SK=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,CK=w.forwardRef(function(t,r){let{onClick:n,relative:a,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:f}=t,h=zD(t,vK),{basename:m}=w.useContext(Os),y,g=!1;if(typeof u=="string"&&SK.test(u)&&(y=u,_K))try{let b=new URL(window.location.href),_=u.startsWith("//")?new URL(b.protocol+u):new URL(u),j=Lu(_.pathname,m);_.origin===b.origin&&j!=null?u=j+_.search+_.hash:g=!0}catch{}let p=J7(u,{relative:a}),v=PK(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:a,viewTransition:f});function x(b){n&&n(b),b.defaultPrevented||v(b)}return w.createElement("a",fv({},h,{href:y||p,onClick:g||i?n:x,ref:r,target:c}))}),Wk=w.forwardRef(function(t,r){let{"aria-current":n="page",caseSensitive:a=!1,className:i="",end:o=!1,style:l,to:c,viewTransition:u,children:d}=t,f=zD(t,yK),h=yx(c,{relative:f.relative}),m=nc(),y=w.useContext(ID),{navigator:g,basename:p}=w.useContext(Os),v=y!=null&&kK(h)&&u===!0,x=g.encodeLocation?g.encodeLocation(h).pathname:h.pathname,b=m.pathname,_=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;a||(b=b.toLowerCase(),_=_?_.toLowerCase():null,x=x.toLowerCase()),_&&p&&(_=Lu(_,p)||_);const j=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let S=b===x||!o&&b.startsWith(x)&&b.charAt(j)==="/",C=_!=null&&(_===x||!o&&_.startsWith(x)&&_.charAt(x.length)==="/"),P={isActive:S,isPending:C,isTransitioning:v},N=S?n:void 0,E;typeof i=="function"?E=i(P):E=[i,S?"active":null,C?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let A=typeof l=="function"?l(P):l;return w.createElement(CK,fv({},f,{"aria-current":N,className:E,ref:r,style:A,to:c,viewTransition:u}),typeof d=="function"?d(P):d)});var Rj;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Rj||(Rj={}));var Hk;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Hk||(Hk={}));function NK(e){let t=w.useContext(gx);return t||_r(!1),t}function PK(e,t){let{target:r,replace:n,state:a,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=Qm(),u=nc(),d=yx(e,{relative:o});return w.useCallback(f=>{if(gK(f,r)){f.preventDefault();let h=n!==void 0?n:lv(u)===lv(d);c(e,{replace:h,state:a,preventScrollReset:i,relative:o,viewTransition:l})}},[u,c,d,n,a,r,e,i,o,l])}function kK(e,t){t===void 0&&(t={});let r=w.useContext(bK);r==null&&_r(!1);let{basename:n}=NK(Rj.useViewTransitionState),a=yx(e,{relative:t.relative});if(!r.isTransitioning)return!1;let i=Lu(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=Lu(r.nextLocation.pathname,n)||r.nextLocation.pathname;return cv(a.pathname,o)!=null||cv(a.pathname,i)!=null}const EK=[{id:"ccd-evo",name:"CCD EVO",category:"B2C",launchYear:2025,devCost:15e4,devAmortizationYears:5,unitCost:380,priceTTC_B2C:1490,priceHT:1241.67,priceHT_B2B:690,priceHT_OEM:520,vatRate:.2,coef_shop:1.8,coef_dist:1.4,coef_oem:1.5,volumesByYear:{2025:150,2026:300,2027:500,2028:700,2029:900,2030:1100},volumesByChannel:{B2C:{2025:50,2026:80,2027:100,2028:120,2029:140,2030:160},B2B:{2025:80,2026:150,2027:250,2028:350,2029:450,2030:550},OEM:{2025:20,2026:70,2027:150,2028:230,2029:310,2030:390}}},{id:"roues-aero",name:"Roues Aro Elite",category:"B2C",launchYear:2026,devCost:25e4,devAmortizationYears:5,unitCost:650,priceTTC_B2C:2490,priceHT:2075,priceHT_B2B:1200,priceHT_OEM:900,vatRate:.2,coef_shop:1.7,coef_dist:1.35,coef_oem:1.4,volumesByYear:{2026:100,2027:200,2028:350,2029:500,2030:650},volumesByChannel:{B2C:{2026:30,2027:50,2028:80,2029:110,2030:140},B2B:{2026:50,2027:100,2028:180,2029:260,2030:340},OEM:{2026:20,2027:50,2028:90,2029:130,2030:170}}},{id:"guidons",name:"Guidons Intgrs",category:"B2C",launchYear:2026,devCost:8e4,devAmortizationYears:5,unitCost:180,priceTTC_B2C:890,priceHT:741.67,priceHT_B2B:420,priceHT_OEM:320,vatRate:.2,coef_shop:1.6,coef_dist:1.3,coef_oem:1.35,volumesByYear:{2026:150,2027:280,2028:430,2029:580,2030:730},volumesByChannel:{B2C:{2026:50,2027:80,2028:120,2029:160,2030:200},B2B:{2026:70,2027:140,2028:220,2029:300,2030:380},OEM:{2026:30,2027:60,2028:90,2029:120,2030:150}}},{id:"transmission",name:"Transmission Aro",category:"B2C",launchYear:2027,devCost:18e4,devAmortizationYears:5,unitCost:420,priceTTC_B2C:1590,priceHT:1325,priceHT_B2B:750,priceHT_OEM:580,vatRate:.2,coef_shop:1.75,coef_dist:1.35,coef_oem:1.45,volumesByYear:{2027:80,2028:180,2029:300,2030:440},volumesByChannel:{B2C:{2027:20,2028:40,2029:60,2030:90},B2B:{2027:40,2028:100,2029:170,2030:250},OEM:{2027:20,2028:40,2029:70,2030:100}}}],AK=[{id:"ceo",title:"Directeur Gnral",department:"Admin",startYear:2024,annualCostLoaded:85e3},{id:"daf",title:"Directeur Financier",department:"Admin",startYear:2024,annualCostLoaded:65e3},{id:"cto",title:"Directeur Technique",department:"R&D",startYear:2024,annualCostLoaded:75e3},{id:"ing-rd-1",title:"Ingnieur Mcanique",department:"R&D",startYear:2024,annualCostLoaded:55e3},{id:"ing-rd-2",title:"Ingnieur Composite",department:"R&D",startYear:2026,annualCostLoaded:52e3},{id:"ing-rd-3",title:"Ingnieur Simulation",department:"R&D",startYear:2027,annualCostLoaded:55e3},{id:"resp-prod",title:"Responsable Production",department:"Production",startYear:2024,annualCostLoaded:6e4},{id:"tech-1",title:"Technicien Process",department:"Production",startYear:2024,annualCostLoaded:42e3},{id:"tech-2",title:"Technicien Qualit",department:"Production",startYear:2026,annualCostLoaded:4e4},{id:"supply",title:"Resp. Supply Chain",department:"Production",startYear:2028,annualCostLoaded:58e3},{id:"dir-com",title:"Directeur Commercial",department:"Sales",startYear:2024,annualCostLoaded:7e4},{id:"com-export",title:"Commercial Export",department:"Sales",startYear:2026,annualCostLoaded:48e3},{id:"am",title:"Account Manager",department:"Sales",startYear:2027,annualCostLoaded:5e4},{id:"resp-mkt",title:"Responsable Marketing",department:"Support",startYear:2024,annualCostLoaded:55e3},{id:"digital",title:"Digital Manager",department:"Support",startYear:2027,annualCostLoaded:45e3},{id:"rh",title:"Responsable RH",department:"Support",startYear:2024,annualCostLoaded:5e4},{id:"compta",title:"Comptable",department:"Support",startYear:2028,annualCostLoaded:42e3}],OK=[{id:"rd-proto",name:"Prototypage & Essais",category:"R&D",startYear:2025,baseAnnualCost:4e4,evolutionType:"linked_to_revenue",revenueRatio:.03,description:"Matriaux de prototypage, tests en soufflerie, essais terrain"},{id:"rd-licences",name:"Licences logiciels CAO/CFD",category:"R&D",startYear:2025,baseAnnualCost:25e3,evolutionType:"fixed",description:"SolidWorks, ANSYS, licences annuelles"},{id:"prod-outillage",name:"Outillage & Moules",category:"Production",startYear:2025,baseAnnualCost:5e4,evolutionType:"step",steps:[{year:2026,newAnnualCost:8e4},{year:2027,newAnnualCost:6e4},{year:2028,newAnnualCost:4e4}],description:"Investissements outillage pour nouveaux produits"},{id:"prod-maintenance",name:"Maintenance quipements",category:"Production",startYear:2025,baseAnnualCost:15e3,evolutionType:"growth_rate",growthRate:.05,description:"Contrats de maintenance machines CNC et quipements"},{id:"mkt-digital",name:"Marketing Digital",category:"Sales & Marketing",startYear:2025,baseAnnualCost:6e4,evolutionType:"linked_to_revenue",revenueRatio:.05,description:"SEO, SEA, rseaux sociaux, content marketing"},{id:"mkt-events",name:"Salons & vnements",category:"Sales & Marketing",startYear:2025,baseAnnualCost:4e4,evolutionType:"step",steps:[{year:2026,newAnnualCost:6e4},{year:2027,newAnnualCost:8e4}],description:"Eurobike, Sea Otter, salons rgionaux"},{id:"sales-commissions",name:"Commissions commerciales",category:"Sales & Marketing",startYear:2025,baseAnnualCost:0,evolutionType:"linked_to_revenue",revenueRatio:.03,description:"Commissions agents et commerciaux terrain"},{id:"ga-loyer",name:"Loyer & Charges locatives",category:"G&A",startYear:2025,baseAnnualCost:48e3,evolutionType:"step",steps:[{year:2027,newAnnualCost:72e3}],description:"Locaux R&D et bureaux, extension 2027"},{id:"ga-assurances",name:"Assurances",category:"G&A",startYear:2025,baseAnnualCost:2e4,evolutionType:"linked_to_revenue",revenueRatio:.015,description:"RC Pro, assurance produit, multirisque"},{id:"ga-compta",name:"Comptabilit & Juridique",category:"G&A",startYear:2025,baseAnnualCost:25e3,evolutionType:"growth_rate",growthRate:.03,description:"Expert-comptable, avocat, commissaire aux comptes"},{id:"log-transport",name:"Transport & Expdition",category:"Logistics",startYear:2025,baseAnnualCost:0,evolutionType:"linked_to_volume",volumeRatio:12,description:"Cot moyen par unit expdie"},{id:"log-stockage",name:"Stockage & Entreposage",category:"Logistics",startYear:2025,baseAnnualCost:18e3,evolutionType:"growth_rate",growthRate:.15,description:"Surface de stockage croissante avec les volumes"},{id:"it-infra",name:"Infrastructure IT",category:"IT & Tools",startYear:2025,baseAnnualCost:12e3,evolutionType:"step",steps:[{year:2026,newAnnualCost:18e3},{year:2028,newAnnualCost:24e3}],description:"Cloud, serveurs, scurit"},{id:"it-erp",name:"ERP & Outils mtier",category:"IT & Tools",startYear:2025,baseAnnualCost:15e3,evolutionType:"growth_rate",growthRate:.1,description:"Licences ERP, CRM, gestion stock"}],oC=[{id:"seed",name:"Seed",amount:15e5,preMoneyValuation:4e6,year:2025,quarter:"Q1"}];function TK(e,t){return e.reduce((r,n)=>{const a=n.devAmortizationYears||5,i=n.launchYear,o=i+a;return t>=i&&t<o?r+n.devCost/a:r},0)}function RK(e,t,r){let n=0,a=0;return e.forEach(i=>{const o=i.volumesByChannel;if(o){const l=i.priceHT||i.priceTTC_B2C/(1+(i.vatRate||.2)),c=i.coef_shop||1.6,u=i.coef_dist||1.3,d=i.coef_oem||1.4,f=l/c/u,h=i.unitCost*d,m=Math.round((o.B2C[t]||0)*(1+r.volumeAdjustment));n+=m*l*(1+r.priceAdjustment),a+=m*i.unitCost;const y=Math.round((o.B2B[t]||0)*(1+r.volumeAdjustment));n+=y*f*(1+r.priceAdjustment),a+=y*i.unitCost;const g=Math.round((o.OEM[t]||0)*(1+r.volumeAdjustment));n+=g*h*(1+r.priceAdjustment),a+=g*i.unitCost}else if(i.volumesByYear[t]){const l=Math.round(i.volumesByYear[t]*(1+r.volumeAdjustment));n+=l*i.priceHT*(1+r.priceAdjustment),a+=l*i.unitCost}}),{revenue:n,cogs:a}}function MK(e,t){let r=0,n=0;return e.forEach(a=>{a.startYear<=t&&(r+=a.annualCostLoaded,n+=1)}),{payroll:r,headcount:n}}function $K(e,t,r,n,a,i,o="detailed",l){if(o==="simple"&&l){const u=t-r;return l.baseAmount*Math.pow(1+l.growthRate,u)*(1+i.opexAdjustment)}let c=0;return e.forEach(u=>{var h;if(u.startYear>t)return;let d=u.baseAnnualCost;const f=t-u.startYear;switch(u.evolutionType){case"fixed":break;case"growth_rate":d=u.baseAnnualCost*Math.pow(1+(u.growthRate||0),f);break;case"linked_to_revenue":d=n*(u.revenueRatio||0);break;case"linked_to_volume":d=a*(u.volumeRatio||0);break;case"step":const m=(h=u.steps)==null?void 0:h.filter(y=>y.year<=t).pop();m&&(d=m.newAnnualCost);break}d=d*(1+i.opexAdjustment),c+=d}),c}function IK(e,t){return e.reduce((r,n)=>n.launchYear===t?r+n.devCost:r,0)}function DK(e,t){let r=0;const n={};return e.forEach(a=>{const i=a.devAmortizationYears||5,o=a.launchYear,l=o+i;if(t>=o&&t<l){const c=a.devCost/i;r+=c,n[a.id]=c}else n[a.id]=0}),{total:r,byProduct:n}}function LK(e,t,r){return e.reduce((n,a)=>{if(a.volumesByChannel){const i=Math.round((a.volumesByChannel.B2C[t]||0)*(1+r.volumeAdjustment)),o=Math.round((a.volumesByChannel.B2B[t]||0)*(1+r.volumeAdjustment)),l=Math.round((a.volumesByChannel.OEM[t]||0)*(1+r.volumeAdjustment));return n+i+o+l}return n+Math.round((a.volumesByYear[t]||0)*(1+r.volumeAdjustment))},0)}function BK(e){return e.map(t=>{const r=t.devAmortizationYears||5;return{productId:t.id,productName:t.name,devCost:t.devCost,launchYear:t.launchYear,amortizationYears:r,yearlyAmortization:t.devCost/r}})}function FK(e,t,r,n,a,i,o,l,c="detailed",u){const d=[];let f=a,h=a,m=a,y=0,g=null,p=0,v=0,x=0;const b=BK(e);for(let C=0;C<o;C++){const P=i+C,N=f,{revenue:E,cogs:A}=RK(e,P,l),{payroll:T,headcount:R}=MK(t,P),k=LK(e,P,l),O=$K(r,P,i,E,k,l,c,u),M=IK(e,P),{total:D,byProduct:L}=DK(e,P);v+=M,x+=D;const B=E-A,z=E>0?B/E:0,Z=B-T-O,ee=E>0?Z/E:0,le=Z-D,V=A+T+O+M,I=E-V,F=n.filter(Ce=>Ce.year===P),q=F.reduce((Ce,$e)=>Ce+$e.amount,0);p+=q;const de=I/4,re={Q1:0,Q2:0,Q3:0,Q4:0};let H=N,Y=N;["Q1","Q2","Q3","Q4"].forEach(Ce=>{const Ge=F.filter(dt=>dt.quarter===Ce).reduce((dt,Rt)=>dt+Rt.amount,0);Y+=de+Ge,re[Ce]=Y,Y<H&&(H=Y)});const J=N+I+q;f=J,H<h&&(h=H);const ge=a+d.reduce((Ce,$e)=>Ce+$e.cashFlow,0)+I;ge<m&&(m=ge),I<0&&Math.abs(I)>y&&(y=Math.abs(I)),g===null&&I>0&&(g=P),d.push({year:P,revenue:E,fundingInjection:q,cogs:A,payroll:T,opex:O,capex:M,grossMargin:B,grossMarginRate:z,ebitda:Z,ebitdaMargin:ee,depreciation:D,depreciationByProduct:L,operatingResult:le,totalCosts:V,cashFlow:I,treasuryStart:N,treasuryEnd:J,quarterlyTreasury:re,minTreasuryInYear:H,headcount:R})}const _=Math.max(0,-m),j=y/12,S=j>0?Math.floor(a/j):999;return{years:d,initialCash:a,totalFundingRaised:p,fundingNeed:_,minTreasury:h,breakEvenYear:g,maxBurn:y,runway:S,productAmortizations:b,totalCapex:v,totalDepreciation:x}}const zK=["Q1","Q2","Q3","Q4"],gl=["Janvier","Fvrier","Mars","Avril","Mai","Juin","Juillet","Aot","Septembre","Octobre","Novembre","Dcembre"];function UK(){return[{delayMonths:0,percentage:100}]}function qk(){return{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0}}function UD(){return{revenueSeasonality:qk(),cogsSeasonality:qk(),cogsPaymentTerms:UK(),variableCharges:[],loans:[],capexPayments:[],otherInflows:{},otherOutflows:{}}}function Kk(e){const t=Object.values(e).map(n=>1+n),r=t.reduce((n,a)=>n+a,0);return r===0?Array(12).fill(1):t.map(n=>n/r*12)}function VK(e,t,r){const n=[],a=t+r;if(e.manualPayments&&Object.keys(e.manualPayments).length>0)return Object.entries(e.manualPayments).forEach(([l,c])=>{const u=qK(l);if(!u)return;const{year:d,month:f}=u;d>=t&&d<a&&n.push({loanId:e.id,loanName:e.name,year:d,month:f,principal:c,interest:0,total:c,isManuallyModified:!0})}),n.sort((l,c)=>l.year!==c.year?l.year-c.year:l.month-c.month),n;const i=e.startDate.year*12+e.startDate.month,o=e.endDate.year*12+e.endDate.month;if(e.inputMode==="fixed"){const l=e.fixedPaymentAmount||0;if(l<=0)return n;if(e.frequency==="monthly")for(let c=i;c<o;c++){const u=Math.floor(c/12),d=c%12;u<t||u>=a||n.push({loanId:e.id,loanName:e.name,year:u,month:d,principal:l,interest:0,total:l,isManuallyModified:!1})}else if(e.frequency==="quarterly")for(let c=i;c<o;c++){const u=Math.floor(c/12),d=c%12;u<t||u>=a||(c-i)%3===0&&n.push({loanId:e.id,loanName:e.name,year:u,month:d,principal:l,interest:0,total:l,isManuallyModified:!1})}else for(let c=0;c<Math.max(1,Math.round((o-i)/12));c++){const u=e.startDate.year+c;u<t||u>=a||n.push({loanId:e.id,loanName:e.name,year:u,month:e.startDate.month,principal:l,interest:0,total:l,isManuallyModified:!1})}return n}if(o<=i)return n;if(e.frequency==="monthly"){const l=o-i;if(l<=0)return n;const c=e.interestRate/12;let u;c===0?u=e.principalAmount/l:u=e.principalAmount*c*Math.pow(1+c,l)/(Math.pow(1+c,l)-1);let d=e.principalAmount;for(let f=0;f<l;f++){const h=i+f,m=Math.floor(h/12),y=h%12;if(m<t||m>=a)continue;const g=d*c,p=u-g;d-=p,n.push({loanId:e.id,loanName:e.name,year:m,month:y,principal:Math.max(0,p),interest:g,total:u,isManuallyModified:!1})}}else if(e.frequency==="quarterly"){const l=Math.max(1,Math.round((o-i)/3)),c=e.interestRate/4;let u;c===0?u=e.principalAmount/l:u=e.principalAmount*c*Math.pow(1+c,l)/(Math.pow(1+c,l)-1);let d=e.principalAmount;for(let f=0;f<l;f++){const h=i+f*3,m=Math.floor(h/12),y=h%12;if(m<t||m>=a)continue;const g=d*c,p=u-g;d-=p,n.push({loanId:e.id,loanName:e.name,year:m,month:y,principal:Math.max(0,p),interest:g,total:u,isManuallyModified:!1})}}else{const l=Math.max(1,Math.round((o-i)/12)),c=e.interestRate;let u;c===0?u=e.principalAmount/l:u=e.principalAmount*c*Math.pow(1+c,l)/(Math.pow(1+c,l)-1);let d=e.principalAmount;for(let f=0;f<l;f++){const h=e.startDate.year+f,m=e.startDate.month;if(h<t||h>=a)continue;const y=d*c,g=u-y;d-=g,n.push({loanId:e.id,loanName:e.name,year:h,month:m,principal:Math.max(0,g),interest:y,total:u,isManuallyModified:!1})}}return n}function WK(e){return e<=2?"Q1":e<=5?"Q2":e<=8?"Q3":"Q4"}function HK(e,t,r,n,a,i,o=!1){var E,A;const l=[];let c=n,u=n,d=null,f=null,h=0,m=0,y=0,g=0;const p=Kk(e.revenueSeasonality),v=Kk(e.cogsSeasonality),x=e.cogsPaymentTerms&&e.cogsPaymentTerms.length>0?e.cogsPaymentTerms:[{delayMonths:0,percentage:100}],b=x.reduce((T,R)=>T+R.percentage,0),_=b>0?x.map(T=>({...T,percentage:T.percentage/b})):[{delayMonths:0,percentage:1}],j=[];e.loans.forEach(T=>{j.push(...VK(T,a,i))});const S=e.capexPayments||[],C=i*12,P=[];for(let T=0;T<i;T++){const R=a+T,O=(t.annualCogs[R]||0)/12;for(let M=0;M<12;M++)P.push(O*v[M])}const N=new Array(C+24).fill(0);P.forEach((T,R)=>{_.forEach(k=>{const O=R+k.delayMonths;O<N.length&&(N[O]+=T*k.percentage)})});for(let T=0;T<i;T++){const R=a+T,k=t.annualRevenue[R]||0,O=t.annualPayroll[R]||0,M=t.annualOpex[R]||0,D=k/12,L=O/12,B=M/12;for(let z=0;z<12;z++){const Z=z,ee=c,le=D*p[z];let V=0;if(!o){const U=WK(Z);z%3===0&&r.forEach(se=>{se.year===R&&se.quarter===U&&(V+=se.amount,h+=se.amount)})}const I=`${R}-${Z.toString().padStart(2,"0")}`,F=((E=e.otherInflows[I])==null?void 0:E.amount)||0,q=le+V+F,de=T*12+z,re=N[de]||0;let H=0;const Y=[];e.variableCharges.forEach(U=>{const X=le*U.rateOfRevenue;H+=X,Y.push({name:U.name,amount:X})}),m+=H;const G=j.filter(U=>U.year===R&&U.month===Z),J=G.reduce((U,X)=>U+X.total,0);y+=J;const ge=S.filter(U=>U.year===R&&U.month===Z),Ce=ge.reduce((U,X)=>U+X.amount,0);g+=Ce;const $e=((A=e.otherOutflows[I])==null?void 0:A.amount)||0,Ge=re+L+B+H+J+Ce+$e,dt=q-Ge,Rt=ee+dt;Rt<u&&(u=Rt,d={year:R,month:Z}),f===null&&dt>0&&l.length>0&&l.slice(-3).some(X=>X.netCashFlow<0)&&(f={year:R,month:Z}),l.push({year:R,month:Z,monthName:gl[z],revenue:le,fundingInjection:V,otherInflows:F,totalInflows:q,cogs:re,payroll:L,opex:B,variableCharges:H,loanPayments:J,capexPayments:Ce,otherOutflows:$e,totalOutflows:Ge,treasuryStart:ee,netCashFlow:dt,treasuryEnd:Rt,loanPaymentDetails:G,variableChargeDetails:Y,capexPaymentDetails:ge}),c=Rt}}return{months:l,initialCash:n,totalFundingRaised:h,minTreasury:u,minTreasuryMonth:d,breakEvenMonth:f,totalVariableCharges:m,totalLoanPayments:y,totalCapexPayments:g}}function qK(e){const t=e.match(/^(\d{4})-(\d{2})$/);return t?{year:parseInt(t[1],10),month:parseInt(t[2],10)}:null}function Id(e){const t=new Map;return e.forEach((r,n)=>{let a=t.get(r.year);a||(a={year:r.year,revenue:0,cogs:0,grossMargin:0,payroll:0,opex:0,variableCharges:0,loanPayments:0,fundingInjection:0,netCashFlow:0,treasuryStart:r.treasuryStart,treasuryEnd:0,ebitda:0}),a.revenue+=r.revenue,a.cogs+=r.cogs,a.payroll+=r.payroll,a.opex+=r.opex,a.variableCharges+=r.variableCharges,a.loanPayments+=r.loanPayments,a.fundingInjection+=r.fundingInjection,a.netCashFlow+=r.netCashFlow,a.treasuryEnd=r.treasuryEnd,t.set(r.year,a)}),t.forEach((r,n)=>{r.grossMargin=r.revenue-r.cogs,r.ebitda=r.grossMargin-r.payroll-r.opex-r.variableCharges}),t}const Bt=w.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:ue("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));Bt.displayName="Card";const cr=w.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:ue("flex flex-col space-y-1.5 p-6",e),...t}));cr.displayName="CardHeader";const ur=w.forwardRef(({className:e,...t},r)=>s.jsx("h3",{ref:r,className:ue("text-2xl font-semibold leading-none tracking-tight",e),...t}));ur.displayName="CardTitle";const ps=w.forwardRef(({className:e,...t},r)=>s.jsx("p",{ref:r,className:ue("text-sm text-muted-foreground",e),...t}));ps.displayName="CardDescription";const Wt=w.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:ue("p-6 pt-0",e),...t}));Wt.displayName="CardContent";const KK=w.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:ue("flex items-center p-6 pt-0",e),...t}));KK.displayName="CardFooter";function yt({label:e,value:t,subValue:r,trend:n,className:a}){return s.jsx(Bt,{className:ue("",a),children:s.jsxs(Wt,{className:"pt-4 pb-3",children:[s.jsx("div",{className:"kpi-label mb-1",children:e}),s.jsxs("div",{className:"kpi-value flex items-center gap-2",children:[t,n==="up"&&s.jsx(rc,{className:"h-4 w-4 text-[hsl(var(--positive))]"}),n==="down"&&s.jsx(US,{className:"h-4 w-4 text-[hsl(var(--negative))]"})]}),r&&s.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:r})]})})}function Ye({title:e,children:t,id:r,className:n,action:a}){return s.jsxs(Bt,{className:ue("",n),id:r,children:[s.jsxs(cr,{className:"pb-3 flex flex-row items-center justify-between",children:[s.jsx(ur,{className:"text-lg",children:e}),a]}),s.jsx(Wt,{children:t})]})}const be=w.forwardRef(({className:e,type:t,...r},n)=>s.jsx("input",{type:t,className:ue("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...r}));be.displayName="Input";function Fh(e,[t,r]){return Math.min(r,Math.max(t,e))}var YK=w.createContext(void 0);function Dd(e){const t=w.useContext(YK);return e||t||"ltr"}function xx(e){const t=w.useRef({value:e,previous:e});return w.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var VD=["PageUp","PageDown"],WD=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],HD={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Ld="Slider",[Mj,GK,XK]=rx(Ld),[qD,l2e]=Un(Ld,[XK]),[QK,bx]=qD(Ld),KD=w.forwardRef((e,t)=>{const{name:r,min:n=0,max:a=100,step:i=1,orientation:o="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:u=[n],value:d,onValueChange:f=()=>{},onValueCommit:h=()=>{},inverted:m=!1,form:y,...g}=e,p=w.useRef(new Set),v=w.useRef(0),b=o==="horizontal"?JK:ZK,[_=[],j]=Jn({prop:d,defaultProp:u,onChange:A=>{var R;(R=[...p.current][v.current])==null||R.focus(),f(A)}}),S=w.useRef(_);function C(A){const T=aY(_,A);E(A,T)}function P(A){E(A,v.current)}function N(){const A=S.current[v.current];_[v.current]!==A&&h(_)}function E(A,T,{commit:R}={commit:!1}){const k=lY(i),O=cY(Math.round((A-n)/i)*i+n,k),M=Fh(O,[n,a]);j((D=[])=>{const L=rY(D,M,T);if(oY(L,c*i)){v.current=L.indexOf(M);const B=String(L)!==String(D);return B&&R&&h(L),B?L:D}else return D})}return s.jsx(QK,{scope:e.__scopeSlider,name:r,disabled:l,min:n,max:a,valueIndexToChangeRef:v,thumbs:p.current,values:_,orientation:o,form:y,children:s.jsx(Mj.Provider,{scope:e.__scopeSlider,children:s.jsx(Mj.Slot,{scope:e.__scopeSlider,children:s.jsx(b,{"aria-disabled":l,"data-disabled":l?"":void 0,...g,ref:t,onPointerDown:Te(g.onPointerDown,()=>{l||(S.current=_)}),min:n,max:a,inverted:m,onSlideStart:l?void 0:C,onSlideMove:l?void 0:P,onSlideEnd:l?void 0:N,onHomeKeyDown:()=>!l&&E(n,0,{commit:!0}),onEndKeyDown:()=>!l&&E(a,_.length-1,{commit:!0}),onStepKeyDown:({event:A,direction:T})=>{if(!l){const O=VD.includes(A.key)||A.shiftKey&&WD.includes(A.key)?10:1,M=v.current,D=_[M],L=i*O*T;E(D+L,M,{commit:!0})}}})})})})});KD.displayName=Ld;var[YD,GD]=qD(Ld,{startEdge:"left",endEdge:"right",size:"width",direction:1}),JK=w.forwardRef((e,t)=>{const{min:r,max:n,dir:a,inverted:i,onSlideStart:o,onSlideMove:l,onSlideEnd:c,onStepKeyDown:u,...d}=e,[f,h]=w.useState(null),m=ut(t,b=>h(b)),y=w.useRef(void 0),g=Dd(a),p=g==="ltr",v=p&&!i||!p&&i;function x(b){const _=y.current||f.getBoundingClientRect(),j=[0,_.width],C=lC(j,v?[r,n]:[n,r]);return y.current=_,C(b-_.left)}return s.jsx(YD,{scope:e.__scopeSlider,startEdge:v?"left":"right",endEdge:v?"right":"left",direction:v?1:-1,size:"width",children:s.jsx(XD,{dir:g,"data-orientation":"horizontal",...d,ref:m,style:{...d.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:b=>{const _=x(b.clientX);o==null||o(_)},onSlideMove:b=>{const _=x(b.clientX);l==null||l(_)},onSlideEnd:()=>{y.current=void 0,c==null||c()},onStepKeyDown:b=>{const j=HD[v?"from-left":"from-right"].includes(b.key);u==null||u({event:b,direction:j?-1:1})}})})}),ZK=w.forwardRef((e,t)=>{const{min:r,max:n,inverted:a,onSlideStart:i,onSlideMove:o,onSlideEnd:l,onStepKeyDown:c,...u}=e,d=w.useRef(null),f=ut(t,d),h=w.useRef(void 0),m=!a;function y(g){const p=h.current||d.current.getBoundingClientRect(),v=[0,p.height],b=lC(v,m?[n,r]:[r,n]);return h.current=p,b(g-p.top)}return s.jsx(YD,{scope:e.__scopeSlider,startEdge:m?"bottom":"top",endEdge:m?"top":"bottom",size:"height",direction:m?1:-1,children:s.jsx(XD,{"data-orientation":"vertical",...u,ref:f,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:g=>{const p=y(g.clientY);i==null||i(p)},onSlideMove:g=>{const p=y(g.clientY);o==null||o(p)},onSlideEnd:()=>{h.current=void 0,l==null||l()},onStepKeyDown:g=>{const v=HD[m?"from-bottom":"from-top"].includes(g.key);c==null||c({event:g,direction:v?-1:1})}})})}),XD=w.forwardRef((e,t)=>{const{__scopeSlider:r,onSlideStart:n,onSlideMove:a,onSlideEnd:i,onHomeKeyDown:o,onEndKeyDown:l,onStepKeyDown:c,...u}=e,d=bx(Ld,r);return s.jsx(We.span,{...u,ref:t,onKeyDown:Te(e.onKeyDown,f=>{f.key==="Home"?(o(f),f.preventDefault()):f.key==="End"?(l(f),f.preventDefault()):VD.concat(WD).includes(f.key)&&(c(f),f.preventDefault())}),onPointerDown:Te(e.onPointerDown,f=>{const h=f.target;h.setPointerCapture(f.pointerId),f.preventDefault(),d.thumbs.has(h)?h.focus():n(f)}),onPointerMove:Te(e.onPointerMove,f=>{f.target.hasPointerCapture(f.pointerId)&&a(f)}),onPointerUp:Te(e.onPointerUp,f=>{const h=f.target;h.hasPointerCapture(f.pointerId)&&(h.releasePointerCapture(f.pointerId),i(f))})})}),QD="SliderTrack",JD=w.forwardRef((e,t)=>{const{__scopeSlider:r,...n}=e,a=bx(QD,r);return s.jsx(We.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...n,ref:t})});JD.displayName=QD;var $j="SliderRange",ZD=w.forwardRef((e,t)=>{const{__scopeSlider:r,...n}=e,a=bx($j,r),i=GD($j,r),o=w.useRef(null),l=ut(t,o),c=a.values.length,u=a.values.map(h=>r3(h,a.min,a.max)),d=c>1?Math.min(...u):0,f=100-Math.max(...u);return s.jsx(We.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...n,ref:l,style:{...e.style,[i.startEdge]:d+"%",[i.endEdge]:f+"%"}})});ZD.displayName=$j;var Ij="SliderThumb",e3=w.forwardRef((e,t)=>{const r=GK(e.__scopeSlider),[n,a]=w.useState(null),i=ut(t,l=>a(l)),o=w.useMemo(()=>n?r().findIndex(l=>l.ref.current===n):-1,[r,n]);return s.jsx(eY,{...e,ref:i,index:o})}),eY=w.forwardRef((e,t)=>{const{__scopeSlider:r,index:n,name:a,...i}=e,o=bx(Ij,r),l=GD(Ij,r),[c,u]=w.useState(null),d=ut(t,x=>u(x)),f=c?o.form||!!c.closest("form"):!0,h=cx(c),m=o.values[n],y=m===void 0?0:r3(m,o.min,o.max),g=nY(n,o.values.length),p=h==null?void 0:h[l.size],v=p?iY(p,y,l.direction):0;return w.useEffect(()=>{if(c)return o.thumbs.add(c),()=>{o.thumbs.delete(c)}},[c,o.thumbs]),s.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${y}% + ${v}px)`},children:[s.jsx(Mj.ItemSlot,{scope:e.__scopeSlider,children:s.jsx(We.span,{role:"slider","aria-label":e["aria-label"]||g,"aria-valuemin":o.min,"aria-valuenow":m,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...i,ref:d,style:m===void 0?{display:"none"}:e.style,onFocus:Te(e.onFocus,()=>{o.valueIndexToChangeRef.current=n})})}),f&&s.jsx(t3,{name:a??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:m},n)]})});e3.displayName=Ij;var tY="RadioBubbleInput",t3=w.forwardRef(({__scopeSlider:e,value:t,...r},n)=>{const a=w.useRef(null),i=ut(a,n),o=xx(t);return w.useEffect(()=>{const l=a.current;if(!l)return;const c=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==t&&d){const f=new Event("input",{bubbles:!0});d.call(l,t),l.dispatchEvent(f)}},[o,t]),s.jsx(We.input,{style:{display:"none"},...r,ref:i,defaultValue:t})});t3.displayName=tY;function rY(e=[],t,r){const n=[...e];return n[r]=t,n.sort((a,i)=>a-i)}function r3(e,t,r){const i=100/(r-t)*(e-t);return Fh(i,[0,100])}function nY(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function aY(e,t){if(e.length===1)return 0;const r=e.map(a=>Math.abs(a-t)),n=Math.min(...r);return r.indexOf(n)}function iY(e,t,r){const n=e/2,i=lC([0,50],[0,n]);return(n-i(t)*r)*r}function sY(e){return e.slice(0,-1).map((t,r)=>e[r+1]-t)}function oY(e,t){if(t>0){const r=sY(e);return Math.min(...r)>=t}return!0}function lC(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function lY(e){return(String(e).split(".")[1]||"").length}function cY(e,t){const r=Math.pow(10,t);return Math.round(e*r)/r}var n3=KD,uY=JD,dY=ZD,fY=e3;const Ir=w.forwardRef(({className:e,...t},r)=>s.jsxs(n3,{ref:r,className:ue("relative flex w-full touch-none select-none items-center",e),...t,children:[s.jsx(uY,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:s.jsx(dY,{className:"absolute h-full bg-primary"})}),s.jsx(fY,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));Ir.displayName=n3.displayName;const cC=kd("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ae=w.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...a},i)=>{const o=n?Z$:"button";return s.jsx(o,{className:ue(cC({variant:t,size:r,className:e})),ref:i,...a})});ae.displayName="Button";function te(e,t){return t&&Math.abs(e)>=1e6?`${(e/1e6).toFixed(1)}M`:t&&Math.abs(e)>=1e3?`${(e/1e3).toFixed(0)}k`:new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR",maximumFractionDigits:0}).format(e)}function tn(e){return`${(e*100).toFixed(1)}%`}const hv={b2c:{},b2b:{},oem:{},marginRates:{b2c:.6,b2b:.45,oem:.3},growthRates:{b2c:.15,b2b:.2,oem:.25}};function zh(e,t){return(e.b2c[t]||0)+(e.b2b[t]||0)+(e.oem[t]||0)}function Dj(e,t){const r=e.marginRates||hv.marginRates;return(e.b2c[t]||0)*r.b2c+(e.b2b[t]||0)*r.b2b+(e.oem[t]||0)*r.oem}function hY(e,t){return zh(e,t)-Dj(e,t)}const wb=[{key:"b2c",label:"B2C"},{key:"b2b",label:"B2B"},{key:"oem",label:"OEM"}];function mY({config:e,onChange:t,years:r}){const n=e.marginRates||hv.marginRates,a=e.growthRates||hv.growthRates,i=(m,y,g)=>{t({...e,[m]:{...e[m],[y]:g}})},o=(m,y)=>{t({...e,marginRates:{...n,[m]:y}})},l=(m,y)=>{t({...e,growthRates:{...a,[m]:y}})},c=m=>{const y=r[0],g=e[m][y]||0;if(g<=0)return;const p=a[m],v={...e[m]};r.forEach((x,b)=>{b!==0&&(v[x]=Math.round(g*Math.pow(1+p,b)))}),t({...e,[m]:v})},u=()=>{let m={...e};wb.forEach(({key:y})=>{const g=e[y][r[0]]||0;if(g<=0)return;const p=a[y],v={...e[y]};r.forEach((x,b)=>{b!==0&&(v[x]=Math.round(g*Math.pow(1+p,b)))}),m={...m,[y]:v}}),t(m)},d=r.reduce((m,y)=>m+zh(e,y),0),f=r.reduce((m,y)=>m+Dj(e,y),0),h=d>0?f/d:0;return s.jsxs("div",{className:"space-y-4",children:[s.jsxs(Ye,{title:"Paramtres par Canal",children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:wb.map(m=>s.jsxs("div",{className:"space-y-3 p-3 rounded-lg border bg-muted/20",children:[s.jsx("div",{className:"font-medium text-sm",children:m.label}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[s.jsx("span",{children:"Taux de croissance"}),s.jsxs("span",{className:"font-mono",children:[(a[m.key]*100).toFixed(0),"%"]})]}),s.jsx(Ir,{value:[a[m.key]*100],onValueChange:([y])=>l(m.key,y/100),min:0,max:100,step:1})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[s.jsx("span",{children:"Taux de marge"}),s.jsxs("span",{className:"font-mono",children:[(n[m.key]*100).toFixed(0),"%"]})]}),s.jsx(Ir,{value:[n[m.key]*100],onValueChange:([y])=>o(m.key,y/100),min:0,max:100,step:1})]}),s.jsxs(ae,{variant:"outline",size:"sm",className:"w-full",onClick:()=>c(m.key),children:[s.jsx(vk,{className:"h-3 w-3 mr-1"}),"Appliquer croissance"]})]},m.key))}),s.jsx("div",{className:"mt-4 flex justify-end",children:s.jsxs(ae,{variant:"default",size:"sm",onClick:u,children:[s.jsx(vk,{className:"h-4 w-4 mr-1"}),"Appliquer croissance  tous les canaux"]})})]}),s.jsx(Ye,{title:"CA Global par Canal",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b",children:[s.jsx("th",{className:"text-left py-2 px-3",children:"Canal"}),r.map(m=>s.jsx("th",{className:"text-center py-2 px-3",children:m},m)),s.jsx("th",{className:"text-right py-2 px-3",children:"Total"})]})}),s.jsxs("tbody",{children:[wb.map(m=>s.jsxs("tr",{className:"border-b",children:[s.jsxs("td",{className:"py-2 px-3 font-medium",children:[m.label,s.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["(marge ",(n[m.key]*100).toFixed(0),"%)"]})]}),r.map(y=>s.jsx("td",{className:"py-2 px-3 text-center",children:s.jsx(be,{type:"number",value:e[m.key][y]||0,onChange:g=>i(m.key,y,Number(g.target.value)),className:"h-8 w-24 mx-auto text-right"})},y)),s.jsx("td",{className:"py-2 px-3 text-right font-mono-numbers font-medium",children:te(r.reduce((y,g)=>y+(e[m.key][g]||0),0),!0)})]},m.key)),s.jsxs("tr",{className:"font-semibold border-t",children:[s.jsx("td",{className:"py-2 px-3",children:"Total CA"}),r.map(m=>s.jsx("td",{className:"py-2 px-3 text-center font-mono-numbers",children:te(zh(e,m),!0)},m)),s.jsx("td",{className:"py-2 px-3 text-right font-mono-numbers",children:te(d,!0)})]}),s.jsxs("tr",{className:"text-emerald-700 dark:text-emerald-400",children:[s.jsxs("td",{className:"py-2 px-3 font-medium",children:["Marge Brute",s.jsxs("span",{className:"text-xs ml-1",children:["(",(h*100).toFixed(0),"%)"]})]}),r.map(m=>s.jsx("td",{className:"py-2 px-3 text-center font-mono-numbers",children:te(Dj(e,m),!0)},m)),s.jsx("td",{className:"py-2 px-3 text-right font-mono-numbers font-medium",children:te(f,!0)})]})]})]})})})]})}var pY="Label",a3=w.forwardRef((e,t)=>s.jsx(We.label,{...e,ref:t,onMouseDown:r=>{var a;r.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));a3.displayName=pY;var i3=a3;const gY=kd("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Ne=w.forwardRef(({className:e,...t},r)=>s.jsx(i3,{ref:r,className:ue(gY(),e),...t}));Ne.displayName=i3.displayName;const vY={totalRaise:15e5,ebitdaMultiple:6,ocRatio:0,referenceEBITDA:5e5};function yY({config:e,onChange:t}){const r=Math.max(2e5,e.referenceEBITDA*e.ebitdaMultiple),n=e.totalRaise*e.ocRatio,a=e.totalRaise*(1-e.ocRatio),i=r+a,o=i>0?a/i:0;return s.jsx(Ye,{title:"Simulation de Dilution",id:"valuation-dilution",children:s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs(Ne,{children:["Part OC: ",(e.ocRatio*100).toFixed(0),"%  Equity: ",((1-e.ocRatio)*100).toFixed(0),"%"]}),s.jsx(Ir,{value:[e.ocRatio*100],onValueChange:([l])=>t({...e,ocRatio:l/100}),min:0,max:99,step:1})]})}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"p-3 bg-muted/30 rounded-lg",children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"Pre-Money"}),s.jsx("div",{className:"text-xl font-bold font-mono-numbers",children:te(r,!0)})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"p-3 bg-muted/30 rounded-lg",children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"Part OC"}),s.jsx("div",{className:"text-lg font-bold font-mono-numbers",children:te(n,!0)}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:[(e.ocRatio*100).toFixed(0),"% de la leve"]})]}),s.jsxs("div",{className:"p-3 bg-muted/30 rounded-lg",children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"Part Equity"}),s.jsx("div",{className:"text-lg font-bold font-mono-numbers",children:te(a,!0)}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:[((1-e.ocRatio)*100).toFixed(0),"% de la leve"]})]})]}),s.jsxs("div",{className:"p-3 bg-muted/30 rounded-lg",children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"Post-Money"}),s.jsx("div",{className:"text-xl font-bold font-mono-numbers",children:te(i,!0)})]}),s.jsxs("div",{className:"p-3 bg-muted/30 rounded-lg",children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"Dilution (equity uniquement)"}),s.jsx("div",{className:"text-xl font-bold font-mono-numbers",children:tn(o)})]})]})]})})}var Ei=function(){return Ei=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Ei.apply(this,arguments)};function Bd(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function xY(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})}function bY(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}const wY=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class uC extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class jY extends uC{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Yk extends uC{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Gk extends uC{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Lj;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Lj||(Lj={}));class _Y{constructor(t,{headers:r={},customFetch:n,region:a=Lj.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=wY(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return xY(this,arguments,void 0,function*(r,n={}){var a;let i,o;try{const{headers:l,method:c,body:u,signal:d,timeout:f}=n;let h={},{region:m}=n;m||(m=this.region);const y=new URL(`${this.url}/${r}`);m&&m!=="any"&&(h["x-region"]=m,y.searchParams.set("forceFunctionRegion",m));let g;u&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",g=u):typeof u=="string"?(h["Content-Type"]="text/plain",g=u):typeof FormData<"u"&&u instanceof FormData?g=u:(h["Content-Type"]="application/json",g=JSON.stringify(u)):u&&typeof u!="string"&&!(typeof Blob<"u"&&u instanceof Blob)&&!(u instanceof ArrayBuffer)&&!(typeof FormData<"u"&&u instanceof FormData)?g=JSON.stringify(u):g=u;let p=d;f&&(o=new AbortController,i=setTimeout(()=>o.abort(),f),d?(p=o.signal,d.addEventListener("abort",()=>o.abort())):p=o.signal);const v=yield this.fetch(y.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),l),body:g,signal:p}).catch(j=>{throw new jY(j)}),x=v.headers.get("x-relay-error");if(x&&x==="true")throw new Yk(v);if(!v.ok)throw new Gk(v);let b=((a=v.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),_;return b==="application/json"?_=yield v.json():b==="application/octet-stream"||b==="application/pdf"?_=yield v.blob():b==="text/event-stream"?_=v:b==="multipart/form-data"?_=yield v.formData():_=yield v.text(),{data:_,error:null,response:v}}catch(l){return{data:null,error:l,response:l instanceof Gk||l instanceof Yk?l.context:void 0}}finally{i&&clearTimeout(i)}})}}var SY=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},CY=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let a=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let o=null,l=null,c=null,u=i.status,d=i.statusText;if(i.ok){var f,h;if(r.method!=="HEAD"){var m;const v=await i.text();v===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((m=r.headers.get("Accept"))===null||m===void 0)&&m.includes("application/vnd.pgrst.plan+text"))?l=v:l=JSON.parse(v))}const g=(f=r.headers.get("Prefer"))===null||f===void 0?void 0:f.match(/count=(exact|planned|estimated)/),p=(h=i.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");g&&p&&p.length>1&&(c=parseInt(p[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(l)&&(l.length>1?(o={code:"PGRST116",details:`Results contain ${l.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},l=null,c=null,u=406,d="Not Acceptable"):l.length===1?l=l[0]:l=null)}else{var y;const g=await i.text();try{o=JSON.parse(g),Array.isArray(o)&&i.status===404&&(l=[],o=null,u=200,d="OK")}catch{i.status===404&&g===""?(u=204,d="No Content"):o={message:g}}if(o&&r.isMaybeSingle&&(!(o==null||(y=o.details)===null||y===void 0)&&y.includes("0 rows"))&&(o=null,u=200,d="OK"),o&&r.shouldThrowOnError)throw new SY(o)}return{error:o,data:l,count:c,status:u,statusText:d}});return this.shouldThrowOnError||(a=a.catch(i=>{var o;let l="";const c=i==null?void 0:i.cause;if(c){var u,d,f,h;const y=(u=c==null?void 0:c.message)!==null&&u!==void 0?u:"",g=(d=c==null?void 0:c.code)!==null&&d!==void 0?d:"";l=`${(f=i==null?void 0:i.name)!==null&&f!==void 0?f:"FetchError"}: ${i==null?void 0:i.message}`,l+=`

Caused by: ${(h=c==null?void 0:c.name)!==null&&h!==void 0?h:"Error"}: ${y}`,g&&(l+=` (${g})`),c!=null&&c.stack&&(l+=`
${c.stack}`)}else{var m;l=(m=i==null?void 0:i.stack)!==null&&m!==void 0?m:""}return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:l,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),a.then(e,t)}returns(){return this}overrideTypes(){return this}},NY=class extends CY{select(e){let t=!1;const r=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:a=n}={}){const i=a?`${a}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:n=r}={}){const a=typeof n>"u"?"offset":`${n}.offset`,i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:a=!1,format:i="text"}={}){var o;const l=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,a?"wal":null].filter(Boolean).join("|"),c=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${c}"; options=${l};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const Xk=new RegExp("[,()]");var Ac=class extends NY{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&Xk.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}notIn(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&Xk.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`not.in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n}={}){let a="";n==="plain"?a="pl":n==="phrase"?a="ph":n==="websearch"&&(a="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${a}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}},PY=class{constructor(e,{headers:t={},schema:r,fetch:n}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=n}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:r=!1,count:n}=t??{},a=r?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(u=>/\s/.test(u)&&!i?"":(u==='"'&&(i=!i),u)).join(""),{url:l,headers:c}=this.cloneRequestState();return l.searchParams.set("select",o),n&&c.append("Prefer",`count=${n}`),new Ac({method:a,url:l,headers:c,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var n;const a="POST",{url:i,headers:o}=this.cloneRequestState();if(t&&o.append("Prefer",`count=${t}`),r||o.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);i.searchParams.set("columns",c.join(","))}}return new Ac({method:a,url:i,headers:o,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:n,defaultToNull:a=!0}={}){var i;const o="POST",{url:l,headers:c}=this.cloneRequestState();if(c.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&l.searchParams.set("on_conflict",t),n&&c.append("Prefer",`count=${n}`),a||c.append("Prefer","missing=default"),Array.isArray(e)){const u=e.reduce((d,f)=>d.concat(Object.keys(f)),[]);if(u.length>0){const d=[...new Set(u)].map(f=>`"${f}"`);l.searchParams.set("columns",d.join(","))}}return new Ac({method:o,url:l,headers:c,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(e,{count:t}={}){var r;const n="PATCH",{url:a,headers:i}=this.cloneRequestState();return t&&i.append("Prefer",`count=${t}`),new Ac({method:n,url:a,headers:i,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var t;const r="DELETE",{url:n,headers:a}=this.cloneRequestState();return e&&a.append("Prefer",`count=${e}`),new Ac({method:r,url:n,headers:a,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},kY=class s3{constructor(t,{headers:r={},schema:n,fetch:a}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.fetch=a}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new PY(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new s3(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:a=!1,count:i}={}){var o;let l;const c=new URL(`${this.url}/rpc/${t}`);let u;const d=m=>m!==null&&typeof m=="object"&&(!Array.isArray(m)||m.some(d)),f=n&&Object.values(r).some(d);f?(l="POST",u=r):n||a?(l=n?"HEAD":"GET",Object.entries(r).filter(([m,y])=>y!==void 0).map(([m,y])=>[m,Array.isArray(y)?`{${y.join(",")}}`:`${y}`]).forEach(([m,y])=>{c.searchParams.append(m,y)})):(l="POST",u=r);const h=new Headers(this.headers);return f?h.set("Prefer",i?`count=${i},return=minimal`:"return=minimal"):i&&h.set("Prefer",`count=${i}`),new Ac({method:l,url:c,headers:h,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class EY{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const n=r.versions;if(n&&n.node){const a=n.node,i=parseInt(a.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const AY="2.93.3",OY=`realtime-js/${AY}`,TY="1.0.0",o3="2.0.0",Qk=o3,Bj=1e4,RY=1e3,MY=100;var Ys;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Ys||(Ys={}));var Xr;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Xr||(Xr={}));var ti;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(ti||(ti={}));var Fj;(function(e){e.websocket="websocket"})(Fj||(Fj={}));var ul;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(ul||(ul={}));class $Y{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,n;const a=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(t){var r,n;const a=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},o=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(t,r,n){var a,i;const o=t.topic,l=(a=t.ref)!==null&&a!==void 0?a:"",c=(i=t.join_ref)!==null&&i!==void 0?i:"",u=t.payload.event,d=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},f=Object.keys(d).length===0?"":JSON.stringify(d);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`ref length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`metadata length ${f.length} exceeds maximum of 255`);const h=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+l.length+o.length+u.length+f.length,m=new ArrayBuffer(this.HEADER_LENGTH+h);let y=new DataView(m),g=0;y.setUint8(g++,this.KINDS.userBroadcastPush),y.setUint8(g++,c.length),y.setUint8(g++,l.length),y.setUint8(g++,o.length),y.setUint8(g++,u.length),y.setUint8(g++,f.length),y.setUint8(g++,r),Array.from(c,v=>y.setUint8(g++,v.charCodeAt(0))),Array.from(l,v=>y.setUint8(g++,v.charCodeAt(0))),Array.from(o,v=>y.setUint8(g++,v.charCodeAt(0))),Array.from(u,v=>y.setUint8(g++,v.charCodeAt(0))),Array.from(f,v=>y.setUint8(g++,v.charCodeAt(0)));var p=new Uint8Array(m.byteLength+n.byteLength);return p.set(new Uint8Array(m),0),p.set(new Uint8Array(n),m.byteLength),p.buffer}decode(t,r){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return r(n)}if(typeof t=="string"){const n=JSON.parse(t),[a,i,o,l,c]=n;return r({join_ref:a,ref:i,topic:o,event:l,payload:c})}return r({})}_binaryDecode(t){const r=new DataView(t),n=r.getUint8(0),a=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,a)}}_decodeUserBroadcast(t,r,n){const a=r.getUint8(1),i=r.getUint8(2),o=r.getUint8(3),l=r.getUint8(4);let c=this.HEADER_LENGTH+4;const u=n.decode(t.slice(c,c+a));c=c+a;const d=n.decode(t.slice(c,c+i));c=c+i;const f=n.decode(t.slice(c,c+o));c=c+o;const h=t.slice(c,t.byteLength),m=l===this.JSON_ENCODING?JSON.parse(n.decode(h)):h,y={type:this.BROADCAST_EVENT,event:d,payload:m};return o>0&&(y.meta=JSON.parse(f)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:y}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([n])=>r.includes(n)))}}class l3{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Qt;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Qt||(Qt={}));const Jk=(e,t,r={})=>{var n;const a=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((i,o)=>(i[o]=IY(o,e,t,a),i),{}):{}},IY=(e,t,r,n)=>{const a=t.find(l=>l.name===e),i=a==null?void 0:a.type,o=r[e];return i&&!n.includes(i)?c3(i,o):zj(o)},c3=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return FY(t,r)}switch(e){case Qt.bool:return DY(t);case Qt.float4:case Qt.float8:case Qt.int2:case Qt.int4:case Qt.int8:case Qt.numeric:case Qt.oid:return LY(t);case Qt.json:case Qt.jsonb:return BY(t);case Qt.timestamp:return zY(t);case Qt.abstime:case Qt.date:case Qt.daterange:case Qt.int4range:case Qt.int8range:case Qt.money:case Qt.reltime:case Qt.text:case Qt.time:case Qt.timestamptz:case Qt.timetz:case Qt.tsrange:case Qt.tstzrange:return zj(t);default:return zj(t)}},zj=e=>e,DY=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},LY=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},BY=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},FY=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>c3(t,l))}return e},zY=e=>typeof e=="string"?e.replace(" ","T"):e,u3=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class jb{constructor(t,r,n={},a=Bj){this.channel=t,this.event=r,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Zk;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Zk||(Zk={}));class Zf{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Zf.syncState(this.state,a,i,o),this.pendingDiffs.forEach(c=>{this.state=Zf.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Zf.syncDiff(this.state,a,i,o),l())}),this.onJoin((a,i,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,a){const i=this.cloneDeep(t),o=this.transformState(r),l={},c={};return this.map(i,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const f=i[u];if(f){const h=d.map(p=>p.presence_ref),m=f.map(p=>p.presence_ref),y=d.filter(p=>m.indexOf(p.presence_ref)<0),g=f.filter(p=>h.indexOf(p.presence_ref)<0);y.length>0&&(l[u]=y),g.length>0&&(c[u]=g)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},n,a)}static syncDiff(t,r,n,a){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const f=t[l].map(m=>m.presence_ref),h=d.filter(m=>f.indexOf(m.presence_ref)<0);t[l].unshift(...h)}n(l,d,c)}),this.map(o,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),t[l]=u,a(l,u,c),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const a=t[n];return"metas"in a?r[n]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var eE;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(eE||(eE={}));var eh;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(eh||(eh={}));var as;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(as||(as={}));class Xc{constructor(t,r={config:{}},n){var a,i;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=Xr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new jb(this,ti.join,this.params,this.timeout),this.rejoinTimer=new l3(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Xr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Xr.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Xr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Xr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Xr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ti.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new Zf(this),this.broadcastEndpointURL=u3(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,a,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Xr.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,u=(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(m=>m.filter))!==null&&a!==void 0?a:[],d=!!this.bindings[eh.PRESENCE]&&this.bindings[eh.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,f={},h={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(m=>t==null?void 0:t(as.CHANNEL_ERROR,m)),this._onClose(()=>t==null?void 0:t(as.CLOSED)),this.updateJoinPayload(Object.assign({config:h},f)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:m})=>{var y;if(this.socket._isManualToken()||this.socket.setAuth(),m===void 0){t==null||t(as.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,p=(y=g==null?void 0:g.length)!==null&&y!==void 0?y:0,v=[];for(let x=0;x<p;x++){const b=g[x],{filter:{event:_,schema:j,table:S,filter:C}}=b,P=m&&m[x];if(P&&P.event===_&&Xc.isFilterValueEqual(P.schema,j)&&Xc.isFilterValueEqual(P.table,S)&&Xc.isFilterValueEqual(P.filter,C))v.push(Object.assign(Object.assign({},b),{id:P.id}));else{this.unsubscribe(),this.state=Xr.errored,t==null||t(as.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,t&&t(as.SUBSCRIBED);return}}).receive("error",m=>{this.state=Xr.errored,t==null||t(as.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(as.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===Xr.joined&&t===eh.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var a;if(r==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(a=n.timeout)!==null&&a!==void 0?a:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const u=await l.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(t,r={}){var n,a;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=t,l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=u.body)===null||a===void 0?void 0:a.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Xr.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ti.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(a=>{n=new jb(this,ti.leave,{},t),n.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Xr.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const a=new AbortController,i=setTimeout(()=>a.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new jb(this,t,r,n);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>MY){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var a,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=ti;if(n&&[l,c,u,d].indexOf(o)>=0&&n!==this._joinRef())return;let h=this._onMessage(o,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(m=>{var y,g,p;return((y=m.filter)===null||y===void 0?void 0:y.event)==="*"||((p=(g=m.filter)===null||g===void 0?void 0:g.event)===null||p===void 0?void 0:p.toLocaleLowerCase())===o}).map(m=>m.callback(h,n)):(i=this.bindings[o])===null||i===void 0||i.filter(m=>{var y,g,p,v,x,b;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const _=m.id,j=(y=m.filter)===null||y===void 0?void 0:y.event;return _&&((g=r.ids)===null||g===void 0?void 0:g.includes(_))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((p=r.data)===null||p===void 0?void 0:p.type.toLocaleLowerCase()))}else{const _=(x=(v=m==null?void 0:m.filter)===null||v===void 0?void 0:v.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return _==="*"||_===((b=r==null?void 0:r.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof h=="object"&&"ids"in h){const y=h.data,{schema:g,table:p,commit_timestamp:v,type:x,errors:b}=y;h=Object.assign(Object.assign({},{schema:g,table:p,commit_timestamp:v,eventType:x,new:{},old:{},errors:b}),this._getPayloadRecords(y))}m.callback(h,n)})}_isClosed(){return this.state===Xr.closed}_isJoined(){return this.state===Xr.joined}_isJoining(){return this.state===Xr.joining}_isLeaving(){return this.state===Xr.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const a=t.toLocaleLowerCase(),i={type:a,filter:r,callback:n};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Xc.isEqual(a.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(ti.close,{},t)}_onError(t){this._on(ti.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Xr.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Jk(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Jk(t.columns,t.old_record)),r}}const _b=()=>{},Mp={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},UY=[1e3,2e3,5e3,1e4],VY=1e4,WY=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class HY{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Bj,this.transport=null,this.heartbeatIntervalMs=Mp.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=_b,this.ref=0,this.reconnectTimer=null,this.vsn=Qk,this.logger=_b,this.conn=null,this.sendBuffer=[],this.serializer=new $Y,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=a=>a?(...i)=>a(...i):(...i)=>fetch(...i),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${Fj.websocket}`,this.httpEndpoint=u3(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=EY.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Ys.connecting:return ul.Connecting;case Ys.open:return ul.Open;case Ys.closing:return ul.Closing;default:return ul.Closed}}isConnected(){return this.connectionState()===ul.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,a=this.getChannels().find(i=>i.topic===n);if(a)return a;{const i=new Xc(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:a,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(RY,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Mp.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const u=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",u)}catch(d){this.log("error","error in heartbeat callback",d)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:n,event:a,payload:i,ref:o}=r,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${n} ${a} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(a,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===Ys.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Ys.open||this.conn.readyState===Ys.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t);try{this.heartbeatCallback("error")}catch(r){this.log("error","error in heartbeat callback",r)}}_triggerChanError(){this.channels.forEach(t=>t._trigger(ti.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${t}${n}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([WY],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,n=!1;if(t)r=t,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(a){this.log("error","Error fetching access token from callback",a),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(a=>{const i={access_token:r,version:OY};r&&a.updateJoinPayload(i),a.joinedOnce&&a._isJoined()&&a._push(ti.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new l3(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Mp.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,a,i,o,l,c,u,d,f,h,m;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:Bj,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:Mp.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:_b,this.vsn=(c=t==null?void 0:t.vsn)!==null&&c!==void 0?c:Qk,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:y=>UY[y-1]||VY,this.vsn){case TY:this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:(y,g)=>g(JSON.stringify(y)),this.decode=(f=t==null?void 0:t.decode)!==null&&f!==void 0?f:(y,g)=>g(JSON.parse(y));break;case o3:this.encode=(h=t==null?void 0:t.encode)!==null&&h!==void 0?h:this.serializer.encode.bind(this.serializer),this.decode=(m=t==null?void 0:t.decode)!==null&&m!==void 0?m:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var Uh=class extends Error{constructor(e,t){var r;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((r=t.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function qY(e,t,r){const n=new URL(t,e);if(r)for(const[a,i]of Object.entries(r))i!==void 0&&n.searchParams.set(a,i);return n.toString()}async function KY(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function YY(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:a,body:i,headers:o}){const l=qY(e.baseUrl,n,a),c=await KY(e.auth),u=await t(l,{method:r,headers:{...i?{"Content-Type":"application/json"}:{},...c,...o},body:i?JSON.stringify(i):void 0}),d=await u.text(),f=(u.headers.get("content-type")||"").includes("application/json"),h=f&&d?JSON.parse(d):d;if(!u.ok){const m=f?h:void 0,y=m==null?void 0:m.error;throw new Uh((y==null?void 0:y.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:y==null?void 0:y.type,icebergCode:y==null?void 0:y.code,details:m})}return{status:u.status,headers:u.headers,data:h}}}}function $p(e){return e.join("")}var GY=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:$p(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${$p(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${$p(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${$p(e.namespace)}`}),!0}catch(t){if(t instanceof Uh&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof Uh&&r.status===409)return;throw r}}};function fc(e){return e.join("")}var XY=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${fc(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${fc(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${fc(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${fc(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${fc(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${fc(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof Uh&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof Uh&&r.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},QY=class{constructor(e){var n;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=YY({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(n=e.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new GY(this.client,t),this.tableOps=new XY(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},wx=class extends Error{constructor(e,t="storage",r,n){super(e),this.__isStorageError=!0,this.namespace=t,this.name=t==="vectors"?"StorageVectorsError":"StorageError",this.status=r,this.statusCode=n}};function jx(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var Ip=class extends wx{constructor(e,t,r,n="storage"){super(e,n,t,r),this.name=n==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},d3=class extends wx{constructor(e,t,r="storage"){super(e,r),this.name=r==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=t}};const JY=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),ZY=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Uj=e=>{if(Array.isArray(e))return e.map(r=>Uj(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const a=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=Uj(n)}),t},eG=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function Vh(e){"@babel/helpers - typeof";return Vh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vh(e)}function tG(e,t){if(Vh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Vh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rG(e){var t=tG(e,"string");return Vh(t)=="symbol"?t:t+""}function nG(e,t,r){return(t=rG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function nt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tE(Object(r),!0).forEach(function(n){nG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const rE=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},aG=async(e,t,r,n)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const a=e,i=a.status||500;if(typeof a.json=="function")a.json().then(o=>{const l=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||i+"";t(new Ip(rE(o),i,l,n))}).catch(()=>{if(n==="vectors"){const o=i+"";t(new Ip(a.statusText||`HTTP ${i} error`,i,o,n))}else{const o=i+"";t(new Ip(a.statusText||`HTTP ${i} error`,i,o,n))}});else{const o=i+"";t(new Ip(a.statusText||`HTTP ${i} error`,i,o,n))}}else t(new d3(rE(e),e,n))},iG=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||e==="HEAD"||!n?nt(nt({},a),r):(ZY(n)?(a.headers=nt({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,t!=null&&t.duplex&&(a.duplex=t.duplex),nt(nt({},a),r))};async function gf(e,t,r,n,a,i,o){return new Promise((l,c)=>{e(r,iG(t,n,a,i)).then(u=>{if(!u.ok)throw u;if(n!=null&&n.noResolveJson)return u;if(o==="vectors"){const d=u.headers.get("content-type");if(u.headers.get("content-length")==="0"||u.status===204)return{};if(!d||!d.includes("application/json"))return{}}return u.json()}).then(u=>l(u)).catch(u=>aG(u,c,n,o))})}function f3(e="storage"){return{get:async(t,r,n,a)=>gf(t,"GET",r,n,a,void 0,e),post:async(t,r,n,a,i)=>gf(t,"POST",r,a,i,n,e),put:async(t,r,n,a,i)=>gf(t,"PUT",r,a,i,n,e),head:async(t,r,n,a)=>gf(t,"HEAD",r,nt(nt({},n),{},{noResolveJson:!0}),a,void 0,e),remove:async(t,r,n,a,i)=>gf(t,"DELETE",r,a,i,n,e)}}const sG=f3("storage"),{get:Wh,post:Xa,put:Vj,head:oG,remove:dC}=sG,la=f3("vectors");var Fd=class{constructor(e,t={},r,n="storage"){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.fetch=JY(r),this.namespace=n}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(e){var t=this;try{return{data:await e(),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(jx(r))return{data:null,error:r};throw r}}},lG=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(jx(t))return{data:null,error:t};throw t}}};let h3;h3=Symbol.toStringTag;var cG=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[h3]="BlobDownloadBuilder",this.promise=null}asStream(){return new lG(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(jx(t))return{data:null,error:t};throw t}}};const uG={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},nE={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var dG=class extends Fd{constructor(e,t={},r,n){super(e,t,n,"storage"),this.bucketId=r}async uploadOrUpdate(e,t,r,n){var a=this;return a.handleOperation(async()=>{let i;const o=nt(nt({},nE),n);let l=nt(nt({},a.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",a.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),c&&!i.has("metadata")&&i.append("metadata",a.encodeMetadata(c))):(i=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=a.toBase64(a.encodeMetadata(c))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),n!=null&&n.headers&&(l=nt(nt({},l),n.headers));const u=a._removeEmptyFolders(t),d=a._getFinalPath(u),f=await(e=="PUT"?Vj:Xa)(a.fetch,`${a.url}/object/${d}`,i,nt({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{path:u,id:f.Id,fullPath:f.Key}})}async upload(e,t,r){return this.uploadOrUpdate("POST",e,t,r)}async uploadToSignedUrl(e,t,r,n){var a=this;const i=a._removeEmptyFolders(e),o=a._getFinalPath(i),l=new URL(a.url+`/object/upload/sign/${o}`);return l.searchParams.set("token",t),a.handleOperation(async()=>{let c;const u=nt({upsert:nE.upsert},n),d=nt(nt({},a.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType),{path:i,fullPath:(await Vj(a.fetch,l.toString(),c,{headers:d})).Key}})}async createSignedUploadUrl(e,t){var r=this;return r.handleOperation(async()=>{let n=r._getFinalPath(e);const a=nt({},r.headers);t!=null&&t.upsert&&(a["x-upsert"]="true");const i=await Xa(r.fetch,`${r.url}/object/upload/sign/${n}`,{},{headers:a}),o=new URL(r.url+i.url),l=o.searchParams.get("token");if(!l)throw new wx("No token returned by API");return{signedUrl:o.toString(),path:e,token:l}})}async update(e,t,r){return this.uploadOrUpdate("PUT",e,t,r)}async move(e,t,r){var n=this;return n.handleOperation(async()=>await Xa(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers}))}async copy(e,t,r){var n=this;return n.handleOperation(async()=>({path:(await Xa(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers})).Key}))}async createSignedUrl(e,t,r){var n=this;return n.handleOperation(async()=>{let a=n._getFinalPath(e),i=await Xa(n.fetch,`${n.url}/object/sign/${a}`,nt({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:n.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{signedUrl:encodeURI(`${n.url}${i.signedURL}${o}`)}})}async createSignedUrls(e,t,r){var n=this;return n.handleOperation(async()=>{const a=await Xa(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:t,paths:e},{headers:n.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return a.map(o=>nt(nt({},o),{},{signedUrl:o.signedURL?encodeURI(`${n.url}${o.signedURL}${i}`):null}))})}download(e,t){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),a=n?`?${n}`:"",i=this._getFinalPath(e),o=()=>Wh(this.fetch,`${this.url}/${r}/${i}${a}`,{headers:this.headers,noResolveJson:!0});return new cG(o,this.shouldThrowOnError)}async info(e){var t=this;const r=t._getFinalPath(e);return t.handleOperation(async()=>Uj(await Wh(t.fetch,`${t.url}/object/info/${r}`,{headers:t.headers})))}async exists(e){var t=this;const r=t._getFinalPath(e);try{return await oG(t.fetch,`${t.url}/object/${r}`,{headers:t.headers}),{data:!0,error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(jx(n)&&n instanceof d3){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}}getPublicUrl(e,t){const r=this._getFinalPath(e),n=[],a=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";a!==""&&n.push(a);const i=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});o!==""&&n.push(o);let l=n.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${r}${l}`)}}}async remove(e){var t=this;return t.handleOperation(async()=>await dC(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}))}async list(e,t,r){var n=this;return n.handleOperation(async()=>{const a=nt(nt(nt({},uG),t),{},{prefix:e||""});return await Xa(n.fetch,`${n.url}/object/list/${n.bucketId}`,a,{headers:n.headers},r)})}async listV2(e,t){var r=this;return r.handleOperation(async()=>{const n=nt({},e);return await Xa(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,n,{headers:r.headers},t)})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const fG="2.93.3",Jm={"X-Client-Info":`storage-js/${fG}`};var hG=class extends Fd{constructor(e,t={},r,n){const a=new URL(e);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase."));const i=a.href.replace(/\/$/,""),o=nt(nt({},Jm),t);super(i,o,r,"storage")}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const r=t.listBucketOptionsToQueryString(e);return await Wh(t.fetch,`${t.url}/bucket${r}`,{headers:t.headers})})}async getBucket(e){var t=this;return t.handleOperation(async()=>await Wh(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}))}async createBucket(e,t={public:!1}){var r=this;return r.handleOperation(async()=>await Xa(r.fetch,`${r.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}))}async updateBucket(e,t){var r=this;return r.handleOperation(async()=>await Vj(r.fetch,`${r.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}))}async emptyBucket(e){var t=this;return t.handleOperation(async()=>await Xa(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await dC(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},mG=class extends Fd{constructor(e,t={},r){const n=e.replace(/\/$/,""),a=nt(nt({},Jm),t);super(n,a,r,"storage")}async createBucket(e){var t=this;return t.handleOperation(async()=>await Xa(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}))}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const n=r.toString(),a=n?`${t.url}/bucket?${n}`:`${t.url}/bucket`;return await Wh(t.fetch,a,{headers:t.headers})})}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await dC(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}from(e){var t=this;if(!eG(e))throw new wx("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new QY({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(a,i){const o=a[i];return typeof o!="function"?o:async(...l)=>{try{return{data:await o.apply(a,l),error:null}}catch(c){if(n)throw c;return{data:null,error:c}}}}})}},pG=class extends Fd{constructor(e,t={},r){const n=e.replace(/\/$/,""),a=nt(nt({},Jm),{},{"Content-Type":"application/json"},t);super(n,a,r,"vectors")}async createIndex(e){var t=this;return t.handleOperation(async()=>await la.post(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{})}async getIndex(e,t){var r=this;return r.handleOperation(async()=>await la.post(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers}))}async listIndexes(e){var t=this;return t.handleOperation(async()=>await la.post(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}))}async deleteIndex(e,t){var r=this;return r.handleOperation(async()=>await la.post(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers})||{})}},gG=class extends Fd{constructor(e,t={},r){const n=e.replace(/\/$/,""),a=nt(nt({},Jm),{},{"Content-Type":"application/json"},t);super(n,a,r,"vectors")}async putVectors(e){var t=this;if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return t.handleOperation(async()=>await la.post(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{})}async getVectors(e){var t=this;return t.handleOperation(async()=>await la.post(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}))}async listVectors(e){var t=this;if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return t.handleOperation(async()=>await la.post(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}))}async queryVectors(e){var t=this;return t.handleOperation(async()=>await la.post(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}))}async deleteVectors(e){var t=this;if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return t.handleOperation(async()=>await la.post(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{})}},vG=class extends Fd{constructor(e,t={},r){const n=e.replace(/\/$/,""),a=nt(nt({},Jm),{},{"Content-Type":"application/json"},t);super(n,a,r,"vectors")}async createBucket(e){var t=this;return t.handleOperation(async()=>await la.post(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}async getBucket(e){var t=this;return t.handleOperation(async()=>await la.post(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}))}async listBuckets(e={}){var t=this;return t.handleOperation(async()=>await la.post(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await la.post(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}},yG=class extends vG{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new xG(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,r=this;return t().call(r,e)}async getBucket(e){var t=()=>super.getBucket,r=this;return t().call(r,e)}async listBuckets(e={}){var t=()=>super.listBuckets,r=this;return t().call(r,e)}async deleteBucket(e){var t=()=>super.deleteBucket,r=this;return t().call(r,e)}},xG=class extends pG{constructor(e,t,r,n){super(e,t,n),this.vectorBucketName=r}async createIndex(e){var t=()=>super.createIndex,r=this;return t().call(r,nt(nt({},e),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,r=this;return t().call(r,nt(nt({},e),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,r=this;return t().call(r,r.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,r=this;return t().call(r,r.vectorBucketName,e)}index(e){return new bG(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},bG=class extends gG{constructor(e,t,r,n,a){super(e,t,a),this.vectorBucketName=r,this.indexName=n}async putVectors(e){var t=()=>super.putVectors,r=this;return t().call(r,nt(nt({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(e){var t=()=>super.getVectors,r=this;return t().call(r,nt(nt({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,r=this;return t().call(r,nt(nt({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,r=this;return t().call(r,nt(nt({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,r=this;return t().call(r,nt(nt({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},wG=class extends hG{constructor(e,t={},r,n){super(e,t,r,n)}from(e){return new dG(this.url,this.headers,e,this.fetch)}get vectors(){return new yG(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new mG(this.url+"/iceberg",this.headers,this.fetch)}};const m3="2.93.3",Oc=30*1e3,Wj=3,Sb=Wj*Oc,jG="http://localhost:9999",_G="supabase.auth.token",SG={"X-Client-Info":`gotrue-js/${m3}`},Hj="X-Supabase-Api-Version",p3={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},CG=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,NG=10*60*1e3;class Hh extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function qe(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class PG extends Hh{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function kG(e){return qe(e)&&e.name==="AuthApiError"}class dl extends Hh{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Ts extends Hh{constructor(t,r,n,a){super(t,n,a),this.name=r,this.status=n}}class ta extends Ts{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Cb(e){return qe(e)&&e.name==="AuthSessionMissingError"}class hc extends Ts{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Dp extends Ts{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Lp extends Ts{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function EG(e){return qe(e)&&e.name==="AuthImplicitGrantRedirectError"}class aE extends Ts{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class AG extends Ts{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class qj extends Ts{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Nb(e){return qe(e)&&e.name==="AuthRetryableFetchError"}class iE extends Ts{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Kj extends Ts{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const mv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),sE=` 	
\r=`.split(""),OG=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<sE.length;t+=1)e[sE[t].charCodeAt(0)]=-2;for(let t=0;t<mv.length;t+=1)e[mv[t].charCodeAt(0)]=t;return e})();function oE(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(mv[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(mv[n]),t.queuedBits-=6}}function g3(e,t,r){const n=OG[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function lE(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=o=>{MG(o,n,r)};for(let o=0;o<e.length;o+=1)g3(e.charCodeAt(o),a,i);return t.join("")}function TG(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function RG(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}TG(n,t)}}function MG(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function du(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)g3(e.charCodeAt(a),r,n);return new Uint8Array(t)}function $G(e){const t=[];return RG(e,r=>t.push(r)),new Uint8Array(t)}function vl(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};return e.forEach(a=>oE(a,r,n)),oE(null,r,n),t.join("")}function IG(e){return Math.round(Date.now()/1e3)+e}function DG(){return Symbol("auth-callback")}const hn=()=>typeof window<"u"&&typeof document<"u",Qo={tested:!1,writable:!1},v3=()=>{if(!hn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Qo.tested)return Qo.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Qo.tested=!0,Qo.writable=!0}catch{Qo.tested=!0,Qo.writable=!1}return Qo.writable};function LG(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return r.searchParams.forEach((n,a)=>{t[a]=n}),t}const y3=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),BG=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Tc=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Jo=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},fn=async(e,t)=>{await e.removeItem(t)};class _x{constructor(){this.promise=new _x.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}_x.promiseConstructor=Promise;function Bp(e){const t=e.split(".");if(t.length!==3)throw new Kj("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!CG.test(t[n]))throw new Kj("JWT not in base64url format");return{header:JSON.parse(lE(t[0])),payload:JSON.parse(lE(t[1])),signature:du(t[2]),raw:{header:t[0],payload:t[1]}}}async function FG(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function zG(e,t){return new Promise((n,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){a(o);return}}})()})}function UG(e){return("0"+e.toString(16)).substr(-2)}function VG(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let a="";for(let i=0;i<56;i++)a+=r.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(t),Array.from(t,UG).join("")}async function WG(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(n);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function HG(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await WG(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function mc(e,t,r=!1){const n=VG();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await Tc(e,`${t}-code-verifier`,a);const i=await HG(n);return[i,n===i?"plain":"s256"]}const qG=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function KG(e){const t=e.headers.get(Hj);if(!t||!t.match(qG))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function YG(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function GG(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const XG=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function pc(e){if(!XG.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Pb(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function QG(e,t){return new Proxy(e,{get:(r,n,a)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,a)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,a)}})}function cE(e){return JSON.parse(JSON.stringify(e))}const il=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),JG=[502,503,504];async function uE(e){var t;if(!BG(e))throw new qj(il(e),0);if(JG.includes(e.status))throw new qj(il(e),e.status);let r;try{r=await e.json()}catch(i){throw new dl(il(i),i)}let n;const a=KG(e);if(a&&a.getTime()>=p3["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new iE(il(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new ta}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new iE(il(r),e.status,r.weak_password.reasons);throw new PG(il(r),e.status||500,n)}const ZG=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))};async function et(e,t,r,n){var a;const i=Object.assign({},n==null?void 0:n.headers);i[Hj]||(i[Hj]=p3["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await eX(e,t,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function eX(e,t,r,n,a,i){const o=ZG(t,n,a,i);let l;try{l=await e(r,Object.assign({},o))}catch(c){throw console.error(c),new qj(il(c),0)}if(l.ok||await uE(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await uE(c)}}function qa(e){var t;let r=null;nX(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=IG(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function dE(e){const t=qa(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Zs(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function tX(e){return{data:e,error:null}}function rX(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i}=e,o=Bd(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function fE(e){return e}function nX(e){return e.access_token&&e.refresh_token&&e.expires_in}const kb=["global","local","others"];class aX{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=y3(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=kb[0]){if(kb.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${kb.join(", ")}`);try{return await et(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(qe(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await et(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Zs})}catch(n){if(qe(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=Bd(t,["options"]),a=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),await et(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:rX,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(qe(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await et(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Zs})}catch(r){if(qe(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,a,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await et(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:fE});if(d.error)throw d.error;const f=await d.json(),h=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(y=>{const g=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),p=JSON.parse(y.split(";")[1].split("=")[1]);u[`${p}Page`]=g}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(qe(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){pc(t);try{return await et(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Zs})}catch(r){if(qe(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){pc(t);try{return await et(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Zs})}catch(n){if(qe(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){pc(t);try{return await et(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Zs})}catch(n){if(qe(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){pc(t.userId);try{const{data:r,error:n}=await et(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:n}}catch(r){if(qe(r))return{data:null,error:r};throw r}}async _deleteFactor(t){pc(t.userId),pc(t.id);try{return{data:await et(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(qe(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,a,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await et(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:fE});if(d.error)throw d.error;const f=await d.json(),h=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(y=>{const g=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),p=JSON.parse(y.split(";")[1].split("=")[1]);u[`${p}Page`]=g}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(qe(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await et(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(qe(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await et(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(qe(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await et(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(qe(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await et(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(qe(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await et(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(qe(r))return{data:null,error:r};throw r}}}function hE(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const gc={debug:!!(globalThis&&v3()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class x3 extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class iX extends x3{}async function sX(e,t,r){gc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),gc.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){gc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{gc.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw gc.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new iX(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(gc.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function oX(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function b3(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function lX(e){return parseInt(e,16)}function cX(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function uX(e){var t;const{chainId:r,domain:n,expirationTime:a,issuedAt:i=new Date,nonce:o,notBefore:l,requestId:c,resources:u,scheme:d,uri:f,version:h}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const m=b3(e.address),y=d?`${d}://${n}`:n,g=e.statement?`${e.statement}
`:"",p=`${y} wants you to sign in with your Ethereum account:
${m}

${g}`;let v=`URI: ${f}
Version: ${h}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(a&&(v+=`
Expiration Time: ${a.toISOString()}`),l&&(v+=`
Not Before: ${l.toISOString()}`),c&&(v+=`
Request ID: ${c}`),u){let x=`
Resources:`;for(const b of u){if(!b||typeof b!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${b}`);x+=`
- ${b}`}v+=x}return`${p}
${v}`}class zr extends Error{constructor({message:t,code:r,cause:n,name:a}){var i;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=a??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class pv extends zr{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function dX({error:e,options:t}){var r,n,a;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new zr({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new zr({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new zr({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((a=i.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new zr({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new zr({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new zr({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new zr({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new zr({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(w3(o)){if(i.rp.id!==o)return new zr({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new zr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new zr({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new zr({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new zr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function fX({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new zr({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new zr({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(w3(n)){if(r.rpId!==n)return new zr({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new zr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new zr({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new zr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class hX{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const mX=new hX;function pX(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,a=Bd(e,["challenge","user","excludeCredentials"]),i=du(t).buffer,o=Object.assign(Object.assign({},r),{id:du(r.id).buffer}),l=Object.assign(Object.assign({},a),{challenge:i,user:o});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const u=n[c];l.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:du(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function gX(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=Bd(e,["challenge","allowCredentials"]),a=du(t).buffer,i=Object.assign(Object.assign({},n),{challenge:a});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const l=r[o];i.allowCredentials[o]=Object.assign(Object.assign({},l),{id:du(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function vX(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:vl(new Uint8Array(e.response.attestationObject)),clientDataJSON:vl(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function yX(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:vl(new Uint8Array(a.authenticatorData)),clientDataJSON:vl(new Uint8Array(a.clientDataJSON)),signature:vl(new Uint8Array(a.signature)),userHandle:a.userHandle?vl(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function w3(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function mE(){var e,t;return!!(hn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function xX(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new pv("Browser returned unexpected credential type",t)}:{data:null,error:new pv("Empty credential response",t)}}catch(t){return{data:null,error:dX({error:t,options:e})}}}async function bX(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new pv("Browser returned unexpected credential type",t)}:{data:null,error:new pv("Empty credential response",t)}}catch(t){return{data:null,error:fX({error:t,options:e})}}}const wX={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},jX={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function gv(...e){const t=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),r=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),n={};for(const a of e)if(a)for(const i in a){const o=a[i];if(o!==void 0)if(Array.isArray(o))n[i]=o;else if(r(o))n[i]=o;else if(t(o)){const l=n[i];t(l)?n[i]=gv(l,o):n[i]=gv(o)}else n[i]=o}return n}function _X(e,t){return gv(wX,e,t||{})}function SX(e,t){return gv(jX,e,t||{})}class CX{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:a},i){var o;try{const{data:l,error:c}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!l)return{data:null,error:c};const u=a??mX.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:d}=l.webauthn.credential_options.publicKey;if(!d.name){const f=n;if(f)d.name=`${d.id}:${f}`;else{const m=(await this.client.getUser()).data.user,y=((o=m==null?void 0:m.user_metadata)===null||o===void 0?void 0:o.name)||(m==null?void 0:m.email)||(m==null?void 0:m.id)||"User";d.name=`${d.id}:${y}`}}d.displayName||(d.displayName=d.name)}switch(l.webauthn.type){case"create":{const d=_X(l.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:f,error:h}=await xX({publicKey:d,signal:u});return f?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:f}},error:null}:{data:null,error:h}}case"request":{const d=SX(l.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:f,error:h}=await bX(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:d,signal:u}));return f?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:f}},error:null}:{data:null,error:h}}}}catch(l){return qe(l)?{data:null,error:l}:{data:null,error:new dl("Unexpected error in challenge",l)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!r)return{data:null,error:new Hh("rpId is required for WebAuthn authentication")};try{if(!mE())return{data:null,error:new dl("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:a},{request:i});if(!o)return{data:null,error:l};const{webauthn:c}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:n,credential_response:c.credential_response}})}catch(o){return qe(o)?{data:null,error:o}:{data:null,error:new dl("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!r)return{data:null,error:new Hh("rpId is required for WebAuthn registration")};try{if(!mE())return{data:null,error:new dl("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(d=>{var f;return(f=d.data)===null||f===void 0?void 0:f.all.find(h=>h.factor_type==="webauthn"&&h.friendly_name===t&&h.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:l};const{data:c,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:a},{create:i});return c?this._verify({factorId:o.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(o){return qe(o)?{data:null,error:o}:{data:null,error:new dl("Unexpected error in register",o)}}}}oX();const NX={url:jG,storageKey:_G,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:SG,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function pE(e,t,r){return await r()}const vc={};class qh{get jwks(){var t,r;return(r=(t=vc[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){vc[this.storageKey]=Object.assign(Object.assign({},vc[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=vc[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){vc[this.storageKey]=Object.assign(Object.assign({},vc[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},NX),t);if(this.storageKey=i.storageKey,this.instanceID=(r=qh.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,qh.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&hn()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new aX({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=y3(i.fetch),this.lock=i.lock||pE,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,this.lockAcquireTimeout=i.lockAcquireTimeout,i.lock?this.lock=i.lock:this.persistSession&&hn()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=sX:this.lock=pE,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new CX(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:v3()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=hE(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=hE(this.memoryStorage)),hn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o);try{await this._notifyAllSubscribers(o.data.event,o.data.session,!1)}catch(l){this._debug("#broadcastChannel","error",l)}})}this.initialize().catch(o=>{this._debug("#initialize()","error",o)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${m3}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(hn()&&(r=LG(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),hn()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),EG(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return{error:i}}const{session:o,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return qe(r)?this._returnResult({error:r}):this._returnResult({error:new dl("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,a;try{const i=await et(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:qa}),{data:o,error:l}=i;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(qe(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var r,n,a;try{let i;if("email"in t){const{email:d,password:f,options:h}=t;let m=null,y=null;this.flowType==="pkce"&&([m,y]=await mc(this.storage,this.storageKey)),i=await et(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:d,password:f,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:m,code_challenge_method:y},xform:qa})}else if("phone"in t){const{phone:d,password:f,options:h}=t;i=await et(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(a=h==null?void 0:h.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:qa})}else throw new Dp("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return await fn(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:l});const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(await fn(this.storage,`${this.storageKey}-code-verifier`),qe(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:l}=t;r=await et(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:dE})}else if("phone"in t){const{phone:i,password:o,options:l}=t;r=await et(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:dE})}else throw new Dp("You must provide either an email or phone number and a password");const{data:n,error:a}=r;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!n||!n.session||!n.user){const i=new hc;return this._returnResult({data:{user:null,session:null},error:i})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(r){if(qe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,a,i,o,l,c,u,d,f,h;let m,y;if("message"in t)m=t.message,y=t.signature;else{const{chain:g,wallet:p,statement:v,options:x}=t;let b;if(hn())if(typeof p=="object")b=p;else{const N=window;if("ethereum"in N&&typeof N.ethereum=="object"&&"request"in N.ethereum&&typeof N.ethereum.request=="function")b=N.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof p!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=p}const _=new URL((r=x==null?void 0:x.url)!==null&&r!==void 0?r:window.location.href),j=await b.request({method:"eth_requestAccounts"}).then(N=>N).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!j||j.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const S=b3(j[0]);let C=(n=x==null?void 0:x.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!C){const N=await b.request({method:"eth_chainId"});C=lX(N)}const P={domain:_.host,address:S,statement:v,uri:_.href,version:"1",chainId:C,nonce:(a=x==null?void 0:x.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(o=(i=x==null?void 0:x.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=x==null?void 0:x.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=x==null?void 0:x.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=x==null?void 0:x.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=x==null?void 0:x.signInWithEthereum)===null||d===void 0?void 0:d.resources};m=uX(P),y=await b.request({method:"personal_sign",params:[cX(m),S]})}try{const{data:g,error:p}=await et(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:y},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(h=t.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:qa});if(p)throw p;if(!g||!g.session||!g.user){const v=new hc;return this._returnResult({data:{user:null,session:null},error:v})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:Object.assign({},g),error:p})}catch(g){if(qe(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async signInWithSolana(t){var r,n,a,i,o,l,c,u,d,f,h,m;let y,g;if("message"in t)y=t.message,g=t.signature;else{const{chain:p,wallet:v,statement:x,options:b}=t;let _;if(hn())if(typeof v=="object")_=v;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))_=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=v}const j=new URL((r=b==null?void 0:b.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in _&&_.signIn){const S=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),x?{statement:x}:null));let C;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")C=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)C=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in C&&"signature"in C&&(typeof C.signedMessage=="string"||C.signedMessage instanceof Uint8Array)&&C.signature instanceof Uint8Array)y=typeof C.signedMessage=="string"?C.signedMessage:new TextDecoder().decode(C.signedMessage),g=C.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${j.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(a=(n=b==null?void 0:b.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=b==null?void 0:b.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((u=b==null?void 0:b.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((f=(d=b==null?void 0:b.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...b.signInWithSolana.resources.map(C=>`- ${C}`)]:[]].join(`
`);const S=await _.signMessage(new TextEncoder().encode(y),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=S}}try{const{data:p,error:v}=await et(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:vl(g)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:qa});if(v)throw v;if(!p||!p.session||!p.user){const x=new hc;return this._returnResult({data:{user:null,session:null},error:x})}return p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),this._returnResult({data:Object.assign({},p),error:v})}catch(p){if(qe(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}}async _exchangeCodeForSession(t){const r=await Jo(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(r??"").split("/");try{if(!n&&this.flowType==="pkce")throw new AG;const{data:i,error:o}=await et(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:qa});if(await fn(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const l=new hc;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:o})}catch(i){if(await fn(this.storage,`${this.storageKey}-code-verifier`),qe(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:a,access_token:i,nonce:o}=t,l=await et(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:qa}),{data:c,error:u}=l;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){const d=new hc;return this._returnResult({data:{user:null,session:null},error:d})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(r){if(qe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,a,i,o;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await mc(this.storage,this.storageKey));const{error:f}=await et(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await et(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d})}throw new Dp("You must provide either an email or phone number.")}catch(l){if(await fn(this.storage,`${this.storageKey}-code-verifier`),qe(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(t){var r,n;try{let a,i;"options"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await et(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:qa});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(a){if(qe(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(t){var r,n,a,i,o;try{let l=null,c=null;this.flowType==="pkce"&&([l,c]=await mc(this.storage,this.storageKey));const u=await et(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:tX});return!((i=u.data)===null||i===void 0)&&i.url&&hn()&&!(!((o=t.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(l){if(await fn(this.storage,`${this.storageKey}-code-verifier`),qe(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new ta;const{error:a}=await et(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(t){if(qe(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:a,options:i}=t,{error:o}=await et(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in t){const{phone:n,type:a,options:i}=t,{data:o,error:l}=await et(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l})}throw new Dp("You must provide either an email or phone number and a type")}catch(r){if(qe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Jo(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Sb:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await Jo(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=Pb()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};t.user=QG(t.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await et(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Zs}):await this._useSession(async r=>{var n,a,i;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ta}:await et(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:Zs})})}catch(r){if(qe(r))return Cb(r)&&(await this._removeSession(),await fn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:a,error:i}=n;if(i)throw i;if(!a.session)throw new ta;const o=a.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await mc(this.storage,this.storageKey));const{data:u,error:d}=await et(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Zs});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(n){if(await fn(this.storage,`${this.storageKey}-code-verifier`),qe(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new ta;const r=Date.now()/1e3;let n=r,a=!0,i=null;const{payload:o}=Bp(t.access_token);if(o.exp&&(n=o.exp,a=n<=r),a){const{data:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(qe(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new ta;const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(qe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!hn())throw new Lp("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Lp(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new aE("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Lp("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new aE("No code detected.");const{data:x,error:b}=await this._exchangeCodeForSession(t.code);if(b)throw b;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!o||!u)throw new Lp("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(l);let h=d+f;c&&(h=parseInt(c));const m=h-d;m*1e3<=Oc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${f}s`);const y=h-f;d-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,h,d):d-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,h,d);const{data:g,error:p}=await this._getUser(i);if(p)throw p;const v={provider_token:n,provider_refresh_token:a,access_token:i,expires_in:f,expires_at:h,refresh_token:o,token_type:u,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:v,redirectType:t.type},error:null})}catch(n){if(qe(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Jo(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i&&!Cb(i))return this._returnResult({error:i});const o=(n=a.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(kG(l)&&(l.status===404||l.status===401||l.status===403)||Cb(l)))return this._returnResult({error:l})}return t!=="others"&&(await this._removeSession(),await fn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=DG(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,a;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await mc(this.storage,this.storageKey,!0));try{return await et(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(await fn(this.storage,`${this.storageKey}-code-verifier`),qe(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(qe(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:a}=await this._useSession(async i=>{var o,l,c,u,d;const{data:f,error:h}=i;if(h)throw h;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await et(this.fetch,"GET",m,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(a)throw a;return hn()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(qe(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:a,data:{session:i}}=r;if(a)throw a;const{options:o,provider:l,token:c,access_token:u,nonce:d}=t,f=await et(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:c,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:qa}),{data:h,error:m}=f;return m?this._returnResult({data:{user:null,session:null},error:m}):!h||!h.session||!h.user?this._returnResult({data:{user:null,session:null},error:new hc}):(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("USER_UPDATED",h.session)),this._returnResult({data:h,error:m}))}catch(a){if(await fn(this.storage,`${this.storageKey}-code-verifier`),qe(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:o}=r;if(o)throw o;return await et(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(qe(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await zG(async a=>(a>0&&await FG(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await et(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:qa})),(a,i)=>{const o=200*Math.pow(2,a);return i&&Nb(i)&&Date.now()+o-n<Oc})}catch(n){if(this._debug(r,"error",n),qe(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),hn()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await Jo(this.storage,this.storageKey);if(a&&this.userStorage){let o=await Jo(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:a.user},await Tc(this.userStorage,this.storageKey+"-user",o)),a.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:Pb()}else if(a&&!a.user&&!a.user){const o=await Jo(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(a.user=o.user,await fn(this.storage,this.storageKey+"-user"),await Tc(this.storage,this.storageKey,a)):a.user=Pb()}if(this._debug(n,"session from storage",a),!this._isValidSession(a)){this._debug(n,"session is not valid"),a!==null&&await this._removeSession();return}const i=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Sb;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Sb}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:o}=await this._callRefreshToken(a.refresh_token);o&&(console.error(o),Nb(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(a.access_token);!l&&(o!=null&&o.user)?(a.user=o.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(n,"error",a),console.error(a);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new ta;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new _x;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new ta;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(a,"error",i),qe(i)){const o={data:null,error:i};return Nb(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,r,n=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await fn(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Tc(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const i=cE(a);await Tc(this.storage,this.storageKey,i)}else{const a=cE(r);await Tc(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await fn(this.storage,this.storageKey),await fn(this.storage,this.storageKey+"-code-verifier"),await fn(this.storage,this.storageKey+"-user"),this.userStorage&&await fn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&hn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Oc);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-t)/Oc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Oc}ms, refresh threshold is ${Wj} ticks`),a<=Wj&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof x3)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!hn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(t){this._debug("#visibilityChangedCallback","error",t)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const a=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await mc(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);a.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?this._returnResult({data:null,error:i}):await et(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(qe(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:o}=r;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:u}=await et(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&c.type==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(r){if(qe(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?vX(t.webauthn.credential_response):yX(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:c}=await et(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))})}catch(r){if(qe(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=await et(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:pX(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:gX(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(qe(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const a={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])a.all.push(i),i.status==="verified"&&a[i.factor_type].push(i);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(t){var r,n,a,i;if(t)try{const{payload:m}=Bp(t);let y=null;m.aal&&(y=m.aal);let g=y;const{data:{user:p},error:v}=await this.getUser(t);if(v)return this._returnResult({data:null,error:v});((n=(r=p==null?void 0:p.factors)===null||r===void 0?void 0:r.filter(_=>_.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(g="aal2");const b=m.amr||[];return{data:{currentLevel:y,nextLevel:g,currentAuthenticationMethods:b},error:null}}catch(m){if(qe(m))return this._returnResult({data:null,error:m});throw m}const{data:{session:o},error:l}=await this.getSession();if(l)return this._returnResult({data:null,error:l});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=Bp(o.access_token);let u=null;c.aal&&(u=c.aal);let d=u;((i=(a=o.user.factors)===null||a===void 0?void 0:a.filter(m=>m.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(d="aal2");const h=c.amr||[];return{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:h},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;return a?this._returnResult({data:null,error:a}):n?await et(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new ta})})}catch(r){if(qe(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:a},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new ta});const o=await et(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&hn()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(qe(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:a},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new ta});const o=await et(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&hn()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(qe(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await et(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new ta})})}catch(t){if(qe(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;return a?this._returnResult({data:null,error:a}):n?(await et(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new ta})})}catch(r){if(qe(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const a=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+NG>a)return n;const{data:i,error:o}=await et(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,n=i.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:m,error:y}=await this.getSession();if(y||!m.session)return this._returnResult({data:null,error:y});n=m.session.access_token}const{header:a,payload:i,signature:o,raw:{header:l,payload:c}}=Bp(n);r!=null&&r.allowExpired||YG(i.exp);const u=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:m}=await this.getUser(n);if(m)throw m;return{data:{claims:i,header:a,signature:o},error:null}}const d=GG(a.alg),f=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,o,$G(`${l}.${c}`)))throw new Kj("Invalid JWT signature");return{data:{claims:i,header:a,signature:o},error:null}}catch(n){if(qe(n))return this._returnResult({data:null,error:n});throw n}}}qh.nextInstanceID={};const PX=qh,kX="2.93.3";let Lf="";typeof Deno<"u"?Lf="deno":typeof document<"u"?Lf="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Lf="react-native":Lf="node";const EX={"X-Client-Info":`supabase-js-${Lf}/${kX}`},AX={headers:EX},OX={schema:"public"},TX={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},RX={};function Kh(e){"@babel/helpers - typeof";return Kh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kh(e)}function MX(e,t){if(Kh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Kh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $X(e){var t=MX(e,"string");return Kh(t)=="symbol"?t:t+""}function IX(e,t,r){return(t=$X(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Er(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gE(Object(r),!0).forEach(function(n){IX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const DX=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),LX=()=>Headers,BX=(e,t,r)=>{const n=DX(r),a=LX();return async(i,o)=>{var l;const c=(l=await t())!==null&&l!==void 0?l:e;let u=new a(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(i,Er(Er({},o),{},{headers:u}))}};function FX(e){return e.endsWith("/")?e:e+"/"}function zX(e,t){var r,n;const{db:a,auth:i,realtime:o,global:l}=e,{db:c,auth:u,realtime:d,global:f}=t,h={db:Er(Er({},c),a),auth:Er(Er({},u),i),realtime:Er(Er({},d),o),storage:{},global:Er(Er(Er({},f),l),{},{headers:Er(Er({},(r=f==null?void 0:f.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}function UX(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(FX(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var VX=class extends PX{constructor(e){super(e)}},WX=class{constructor(e,t,r){var n,a;this.supabaseUrl=e,this.supabaseKey=t;const i=UX(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o=`sb-${i.hostname.split(".")[0]}-auth-token`,l={db:OX,realtime:RX,auth:Er(Er({},TX),{},{storageKey:o}),global:AX},c=zX(r??{},l);if(this.storageKey=(n=c.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(a=c.global.headers)!==null&&a!==void 0?a:{},c.accessToken)this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(d,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=c.auth)!==null&&u!==void 0?u:{},this.headers,c.global.fetch)}this.fetch=BX(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Er({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new kY(new URL("rest/v1",i).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new wG(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new _Y(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,r;if(e.accessToken)return await e.accessToken();const{data:n}=await e.auth.getSession();return(t=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:a,storageKey:i,flowType:o,lock:l,debug:c,throwOnError:u},d,f){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new VX({url:this.authUrl.href,headers:Er(Er({},h),d),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:a,flowType:o,lock:l,debug:c,throwOnError:u,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(m=>m.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new HY(this.realtimeUrl.href,Er(Er({},e),{},{params:Er(Er({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const HX=(e,t,r)=>new WX(e,t,r);function qX(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(t==null)return!1;const r=t.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}qX()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const KX="https://twkcoxagbajvopzzinor.supabase.co",YX="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR3a2NveGFnYmFqdm9wenppbm9yIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA0ODUzNzUsImV4cCI6MjA4NjA2MTM3NX0.BWO81YHxXK0YXAzkm8jILlv4x6pEpy9A3op-tCp445k",xe=HX(KX,YX,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}}),j3=w.createContext(void 0);function GX({children:e}){const[t,r]=w.useState(null),[n,a]=w.useState(!0),[i,o]=w.useState("lecteur"),[l,c]=w.useState({});w.useEffect(()=>{const{data:{subscription:p}}=xe.auth.onAuthStateChange((v,x)=>{r((x==null?void 0:x.user)??null),a(!1),x!=null&&x.user&&(setTimeout(()=>u(x.user.id),0),setTimeout(()=>d(),0))});return xe.auth.getSession().then(({data:{session:v}})=>{r((v==null?void 0:v.user)??null),a(!1),v!=null&&v.user&&(u(v.user.id),d())}),()=>p.unsubscribe()},[]);const u=async p=>{try{const{data:v}=await xe.from("user_roles").select("role").eq("user_id",p).single();v&&o(v.role)}catch{o("lecteur")}},d=async()=>{try{const{data:p}=await xe.from("tab_permissions").select("*");if(p){const v={};p.forEach(x=>{v[x.role]||(v[x.role]={}),v[x.role][x.tab_key]=x.permission}),c(v)}}catch{}},f=async(p,v)=>{const{error:x}=await xe.auth.signInWithPassword({email:p,password:v});return{error:x}},h=async(p,v,x)=>{const{error:b}=await xe.auth.signUp({email:p,password:v,options:{data:{display_name:x},emailRedirectTo:`${window.location.origin}/`}});return{error:b}},m=async()=>{await xe.auth.signOut(),r(null)},y=i==="admin",g=p=>{if(y)return"write";const v=l[i];return v&&v[p]||"write"};return s.jsx(j3.Provider,{value:{user:t,loading:n,isAdmin:y,userRole:i,signIn:f,signUp:h,signOut:m,getTabPermission:g},children:e})}function xa(){const e=w.useContext(j3);if(!e)throw new Error("useAuth must be used within AuthProvider");return e}const fC={selectedMethods:["revenue_multiple","ebitda_multiple"],valuationBasis:"projected",historicalYear:2024,projectedYear:2028,mixWeight:.5,averageYears:[],valuationParams:{revenue_multiple:{multiple:4},ebitda_multiple:{multiple:8},ebit_multiple:{multiple:10},dcf:{discountRate:.25,terminalGrowthRate:.03},scorecard:{baseValuation:3e6,team:.15,market:.2,product:.1,competition:-.1,marketing:0,fundingNeed:0},berkus:{soundIdea:4e5,prototype:35e4,qualityManagement:3e5,strategicRelationships:2e5,productRollout:25e4},risk_factor:{baseValuation:3e6,managementRisk:1,businessStage:0,legislation:0,manufacturing:-1,salesMarketing:1,fundingCapital:0,competition:-1,technology:1,litigation:0,international:0,reputation:1,potentialExit:1}},dilutionConfig:{...vY},exitScenarios:{conservative:{year:2030,exitMultiple:4,probability:.25},base:{year:2029,exitMultiple:6,probability:.5},ambitious:{year:2028,exitMultiple:10,probability:.25}}},Yj="novaride_financial_state_v5";function XX(){try{const e=localStorage.getItem(Yj);if(e){const t=JSON.parse(e);return t.valuationConfig||(t.valuationConfig={...fC}),t.monthlyTreasuryConfig&&!t.monthlyTreasuryConfig.cogsPaymentTerms&&(t.monthlyTreasuryConfig.cogsPaymentTerms=[{delayMonths:0,percentage:100}]),t.excludeFundingFromTreasury===void 0&&(t.excludeFundingFromTreasury=!1),t.fundingRounds?t.fundingRounds=t.fundingRounds.map(r=>({...r,quarter:r.quarter||"Q1"})):t.fundingRounds=oC,t.clientRevenueConfig||(t.clientRevenueConfig={entries:[],growthRate:.15,marginRate:.5,marginB2C:.6,marginByCategory:{}}),t}}catch{}return QX()}function QX(){return{products:EK,roles:AK,expenses:OK,fundingRounds:oC,scenarioSettings:{startYear:2025,durationYears:6,initialCash:5e4},scenarioConfigs:{conservative:{volumeAdjustment:-.2,priceAdjustment:0,opexAdjustment:-.1},base:{volumeAdjustment:0,priceAdjustment:0,opexAdjustment:0},ambitious:{volumeAdjustment:.3,priceAdjustment:.05,opexAdjustment:.1}},activeScenarioId:"base",revenueMode:"by-product",globalRevenueConfig:hv,clientRevenueConfig:{entries:[],growthRate:.15,marginRate:.5,marginB2C:.6,marginByCategory:{}},opexMode:"detailed",simpleOpexConfig:{baseAmount:2e5,growthRate:.05},hasUnsavedChanges:!1,lastSaved:null,historicalData:[{year:2023,revenue:2e5,grossMargin:.65,payroll:15e4,externalCosts:8e4,depreciation:2e4},{year:2024,revenue:45e4,grossMargin:.68,payroll:28e4,externalCosts:12e4,depreciation:35e3}],excludeFundingFromTreasury:!1,monthlyTreasuryConfig:UD(),valuationConfig:{...fC}}}const _3=w.createContext(void 0);function JX({children:e}){const{user:t}=xa(),[r,n]=w.useState(XX),[a,i]=w.useState(!1);w.useRef(null),w.useEffect(()=>{!t||a||(async()=>{try{const{data:k}=await xe.from("financial_scenarios").select("state_data").eq("user_id",t.id).maybeSingle();if(k!=null&&k.state_data){const O=k.state_data;O.valuationConfig||(O.valuationConfig={...fC}),O.excludeFundingFromTreasury===void 0&&(O.excludeFundingFromTreasury=!1),O.fundingRounds?O.fundingRounds=O.fundingRounds.map(M=>({...M,quarter:M.quarter||"Q1"})):O.fundingRounds=oC,O.monthlyTreasuryConfig||(O.monthlyTreasuryConfig=UD()),O.monthlyTreasuryConfig&&!O.monthlyTreasuryConfig.cogsPaymentTerms&&(O.monthlyTreasuryConfig.cogsPaymentTerms=[{delayMonths:0,percentage:100}]),O.clientRevenueConfig||(O.clientRevenueConfig={entries:[],growthRate:.15,marginRate:.5,marginB2C:.6,marginByCategory:{}}),n({...O,hasUnsavedChanges:!1}),localStorage.setItem(Yj,JSON.stringify(O))}}catch(k){console.warn("Failed to load from cloud:",k)}finally{i(!0)}})()},[t,a]),w.useCallback(()=>{n(k=>({...k,hasUnsavedChanges:!0}))},[]);const o=w.useCallback(k=>{n(O=>({...O,products:k,hasUnsavedChanges:!0}))},[]),l=w.useCallback(k=>{n(O=>({...O,products:[...O.products,k],hasUnsavedChanges:!0}))},[]),c=w.useCallback(k=>{n(O=>({...O,products:O.products.filter(M=>M.id!==k),hasUnsavedChanges:!0}))},[]),u=w.useCallback(k=>{n(O=>({...O,roles:k,hasUnsavedChanges:!0}))},[]),d=w.useCallback(k=>{n(O=>({...O,roles:[...O.roles,k],hasUnsavedChanges:!0}))},[]),f=w.useCallback(k=>{n(O=>({...O,roles:O.roles.filter(M=>M.id!==k),hasUnsavedChanges:!0}))},[]),h=w.useCallback(k=>{n(O=>({...O,expenses:k,hasUnsavedChanges:!0}))},[]),m=w.useCallback(k=>{n(O=>({...O,expenses:[...O.expenses,k],hasUnsavedChanges:!0}))},[]),y=w.useCallback(k=>{n(O=>({...O,expenses:O.expenses.filter(M=>M.id!==k),hasUnsavedChanges:!0}))},[]),g=w.useCallback(k=>{n(O=>({...O,fundingRounds:k,hasUnsavedChanges:!0}))},[]),p=w.useCallback(k=>{n(O=>({...O,scenarioSettings:{...O.scenarioSettings,...k},hasUnsavedChanges:!0}))},[]),v=w.useCallback(k=>{n(O=>({...O,activeScenarioId:k}))},[]),x=w.useCallback((k,O)=>{n(M=>({...M,scenarioConfigs:{...M.scenarioConfigs,[k]:{...M.scenarioConfigs[k],...O}},hasUnsavedChanges:!0}))},[]),b=w.useCallback(k=>{n(O=>({...O,revenueMode:k,hasUnsavedChanges:!0}))},[]),_=w.useCallback(k=>{n(O=>({...O,globalRevenueConfig:k,hasUnsavedChanges:!0}))},[]),j=w.useCallback(k=>{n(O=>({...O,clientRevenueConfig:k,hasUnsavedChanges:!0}))},[]),S=w.useCallback(k=>{n(O=>({...O,opexMode:k,hasUnsavedChanges:!0}))},[]),C=w.useCallback(k=>{n(O=>({...O,simpleOpexConfig:{...O.simpleOpexConfig,...k},hasUnsavedChanges:!0}))},[]),P=w.useCallback(k=>{n(O=>({...O,excludeFundingFromTreasury:k,hasUnsavedChanges:!0}))},[]),N=w.useCallback(k=>{n(O=>({...O,historicalData:k,hasUnsavedChanges:!0}))},[]),E=w.useCallback(k=>{n(O=>({...O,monthlyTreasuryConfig:k,hasUnsavedChanges:!0}))},[]),A=w.useCallback(k=>{n(O=>({...O,valuationConfig:{...O.valuationConfig,...k},hasUnsavedChanges:!0}))},[]),T=w.useCallback(async()=>{try{const k={...r,hasUnsavedChanges:!1,lastSaved:new Date().toISOString()};if(localStorage.setItem(Yj,JSON.stringify(k)),n(k),t){const{hasUnsavedChanges:O,...M}=k;await xe.from("financial_scenarios").upsert({user_id:t.id,state_data:M},{onConflict:"user_id"})}gn({title:"Donnes sauvegardes",description:t?"Sauvegard en local et dans le cloud.":"Sauvegard en local."})}catch{gn({title:"Erreur de sauvegarde",variant:"destructive"})}},[r,t]),R=w.useMemo(()=>{const{products:k,roles:O,expenses:M,fundingRounds:D,scenarioSettings:L,scenarioConfigs:B,activeScenarioId:z,opexMode:Z,simpleOpexConfig:ee,excludeFundingFromTreasury:le,monthlyTreasuryConfig:V}=r,{startYear:I,durationYears:F,initialCash:q}=L,de=B[z],re=Array.from({length:F},(fe,ye)=>I+ye),H=k.reduce((fe,ye)=>fe+ye.devCost,0),Y=re.map((fe,ye)=>{if(r.revenueMode==="by-channel-global"){const Ke=zh(r.globalRevenueConfig,fe),pt=hY(r.globalRevenueConfig,fe);return{year:fe,revenue:Ke,cogs:pt}}if(r.revenueMode==="by-client"){const Ke=r.clientRevenueConfig||{entries:[],growthRate:.15,marginRate:.5,marginB2C:.6,marginByCategory:{}},he=fe-I;let Ue=0,_t=0;return Ke.entries.forEach(xt=>{var Lr;let Xe;if(xt.revenueByYear&&xt.revenueByYear[fe]!==void 0&&xt.revenueByYear[fe]!==null)Xe=xt.revenueByYear[fe];else{const Kr=xt.individualGrowthRate!==null&&xt.individualGrowthRate!==void 0?xt.individualGrowthRate:Ke.growthRate;Xe=xt.baseRevenue*Math.pow(1+Kr,he)}let lt=Ke.marginRate;xt.channel==="B2C"?lt=Ke.marginB2C??Ke.marginRate:xt.categoryId&&((Lr=Ke.marginByCategory)==null?void 0:Lr[xt.categoryId])!==void 0&&(lt=Ke.marginByCategory[xt.categoryId]),Ue+=Xe,_t+=Xe*(1-lt)}),{year:fe,revenue:Ue,cogs:_t}}let Pe=0,tt=0;return k.forEach(Ke=>{if(Ke.volumesByChannel){const pt=Math.round((Ke.volumesByChannel.B2C[fe]||0)*(1+de.volumeAdjustment)),he=Math.round((Ke.volumesByChannel.B2B[fe]||0)*(1+de.volumeAdjustment)),Ue=Math.round((Ke.volumesByChannel.OEM[fe]||0)*(1+de.volumeAdjustment));Pe+=pt*Ke.priceHT*(1+de.priceAdjustment)+he*(Ke.priceHT_B2B||Ke.priceHT)*(1+de.priceAdjustment)+Ue*(Ke.priceHT_OEM||Ke.priceHT)*(1+de.priceAdjustment),tt+=(pt+he+Ue)*Ke.unitCost}else{const pt=Math.round((Ke.volumesByYear[fe]||0)*(1+de.volumeAdjustment));Pe+=pt*Ke.priceHT*(1+de.priceAdjustment),tt+=pt*Ke.unitCost}}),{year:fe,revenue:Pe,cogs:tt}}),G=re.map(fe=>{const ye=O.filter(Pe=>Pe.startYear<=fe);return{year:fe,payroll:ye.reduce((Pe,tt)=>Pe+tt.annualCostLoaded,0),headcount:ye.length}}),J=re.map((fe,ye)=>{let Pe=0;const tt={};return Z==="simple"?Pe=ee.baseAmount*Math.pow(1+ee.growthRate,ye):M.forEach(Ke=>{var Ue,_t;if(Ke.startYear>fe)return;let pt=Ke.baseAnnualCost;const he=fe-Ke.startYear;if(Ke.evolutionType==="growth_rate")pt*=Math.pow(1+(Ke.growthRate||0),he);else if(Ke.evolutionType==="linked_to_revenue")pt=(((Ue=Y[ye])==null?void 0:Ue.revenue)||0)*(Ke.revenueRatio||0);else if(Ke.evolutionType==="step"){const xt=(_t=Ke.steps)==null?void 0:_t.filter(Xe=>Xe.year<=fe).pop();xt&&(pt=xt.newAnnualCost)}pt*=1+de.opexAdjustment,Pe+=pt,tt[Ke.category]=(tt[Ke.category]||0)+pt}),{year:fe,opex:Pe,byCategory:tt}}),ge=re.map(fe=>({year:fe,capex:k.filter(ye=>ye.launchYear===fe).reduce((ye,Pe)=>ye+Pe.devCost,0),depreciation:TK(k,fe)})),Ce=I,$e=O.filter(fe=>fe.startYear<=Ce).length,Ge=O.filter(fe=>fe.startYear<=Ce).reduce((fe,ye)=>fe+ye.annualCostLoaded,0),dt=D.map(fe=>({...fe,quarter:fe.quarter||"Q1"})),U=FK(k,O,M,le?[]:dt,q,I,F,de,Z,ee),X={},se={},Q={},ce={};Y.forEach(fe=>{X[fe.year]=fe.revenue,se[fe.year]=fe.cogs}),G.forEach(fe=>{Q[fe.year]=fe.payroll}),J.forEach(fe=>{ce[fe.year]=fe.opex});const pe=HK(V,{annualRevenue:X,annualCogs:se,annualPayroll:Q,annualOpex:ce},D,q,I,F,le);return{totalDevCost:H,revenueByYear:Y,payrollByYear:G,opexByYear:J,capexByYear:ge,totalHeadcount:$e,currentPayroll:Ge,treasuryProjection:U,monthlyTreasuryProjection:pe}},[r]);return s.jsx(_3.Provider,{value:{state:r,computed:R,updateProducts:o,addProduct:l,removeProduct:c,updateRoles:u,addRole:d,removeRole:f,updateExpenses:h,addExpense:m,removeExpense:y,updateFundingRounds:g,updateScenarioSettings:p,setActiveScenario:v,updateScenarioConfig:x,setRevenueMode:b,updateGlobalRevenueConfig:_,updateClientRevenueConfig:j,setOpexMode:S,updateSimpleOpexConfig:C,setExcludeFundingFromTreasury:P,updateHistoricalData:N,updateMonthlyTreasuryConfig:E,updateValuationConfig:A,saveAll:T},children:e})}function Ki(){const e=w.useContext(_3);if(!e)throw new Error("useFinancial must be used within FinancialProvider");return e}function hC({variant:e="full",color:t="dark",className:r}){const n=t==="light"?"text-white":"text-foreground";return s.jsx("div",{className:ue("flex items-center gap-2",r),children:s.jsxs("span",{className:ue("font-bold tracking-tight",e==="full"?"text-2xl":"text-lg",n),children:["NOVA",s.jsx("span",{className:"text-accent",children:"RIDE"})]})})}const ZX=[{items:[{to:"/",label:"Tableau de bord",icon:VW,tabKey:"costflow"}]},{label:"Prvisionnel",items:[{to:"/product",label:"Plan Produit",icon:Fl,tabKey:"product-plan"},{to:"/organisation",label:"Organisation",icon:zl,tabKey:"organisation"},{to:"/charges",label:"Charges",icon:XW,tabKey:"charges"},{to:"/scenarios",label:"Scnarios",icon:EI,tabKey:"scenarios"},{to:"/previsionnel",label:"Prvisionnel",icon:MW,tabKey:"previsionnel"}]},{label:"Investisseur",items:[{to:"/funding",label:"Financement",icon:RW,tabKey:"funding"},{to:"/valuation",label:"Valorisation",icon:rc,tabKey:"valuation"},{to:"/investment-summary",label:"Synthse",icon:Ru,tabKey:"investment-summary"}]},{items:[{to:"/crm",label:"CRM",icon:GW,tabKey:"crm"},{to:"/pricing",label:"Pricing",icon:zS,tabKey:"pricing"},{to:"/costflow",label:"Production et BE",icon:TI,tabKey:"costflow"},{to:"/planning-dev",label:"Planning Dev",icon:bj,tabKey:"costflow"},{to:"/timetracking",label:"Suivi d'activit",icon:BS,tabKey:"timetracking"},{to:"/snapshots",label:"Sauvegardes",icon:RI,tabKey:"snapshots"}]}];function jn({children:e}){const{signOut:t,isAdmin:r,getTabPermission:n}=xa(),a=Qm(),[i,o]=w.useState(!1),l=async()=>{await t(),a("/auth")},c=ZX.map(u=>({...u,items:u.items.filter(d=>n(d.tabKey)!=="hidden")})).filter(u=>u.items.length>0);return s.jsxs("div",{className:"flex min-h-screen",children:[s.jsx("button",{className:"fixed top-4 left-4 z-50 lg:hidden p-2 bg-sidebar text-white rounded",onClick:()=>o(!i),children:i?s.jsx($a,{className:"h-5 w-5"}):s.jsx(YW,{className:"h-5 w-5"})}),s.jsxs("aside",{className:ue("fixed inset-y-0 left-0 z-40 w-56 bg-sidebar text-sidebar-foreground flex flex-col transition-transform lg:translate-x-0",i?"translate-x-0":"-translate-x-full"),children:[s.jsxs("div",{className:"p-4 border-b border-sidebar-border",children:[s.jsx(hC,{variant:"compact",color:"light"}),s.jsx("div",{className:"text-xs text-sidebar-foreground/50 mt-1",children:"Gestion interne"})]}),s.jsxs("nav",{className:"flex-1 py-4 overflow-y-auto",children:[c.map((u,d)=>s.jsxs("div",{className:ue(d>0&&"mt-3 pt-3 border-t border-sidebar-border"),children:[u.label&&s.jsx("div",{className:"px-4 py-1 text-[10px] font-semibold uppercase tracking-wider text-sidebar-foreground/40",children:u.label}),u.items.map(f=>{const h=f.icon;return s.jsxs(Wk,{to:f.to,end:!0,onClick:()=>o(!1),className:({isActive:m})=>ue("flex items-center gap-3 px-4 py-2.5 text-sm transition-colors",m?"bg-sidebar-accent text-sidebar-accent-foreground":"text-sidebar-foreground/70 hover:text-sidebar-foreground hover:bg-sidebar-accent/10"),children:[s.jsx(h,{className:"h-4 w-4"}),f.label]},f.to)})]},d)),r&&s.jsxs(Wk,{to:"/permissions",onClick:()=>o(!1),className:({isActive:u})=>ue("flex items-center gap-3 px-4 py-2.5 text-sm transition-colors mt-4 border-t border-sidebar-border pt-4",u?"bg-sidebar-accent text-sidebar-accent-foreground":"text-sidebar-foreground/70 hover:text-sidebar-foreground hover:bg-sidebar-accent/10"),children:[s.jsx(DI,{className:"h-4 w-4"}),"Administration"]})]}),s.jsx("div",{className:"p-4 border-t border-sidebar-border",children:s.jsxs(ae,{variant:"ghost",size:"sm",className:"w-full justify-start text-sidebar-foreground/70 hover:text-sidebar-foreground",onClick:l,children:[s.jsx(qW,{className:"h-4 w-4 mr-2"}),"Dconnexion"]})})]}),i&&s.jsx("div",{className:"fixed inset-0 z-30 bg-black/50 lg:hidden",onClick:()=>o(!1)}),s.jsx("main",{className:"flex-1 lg:ml-56 p-6",children:e})]})}function _n({children:e,tabKey:t}){const{user:r,loading:n,getTabPermission:a}=xa();return n?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:s.jsx(ui,{className:"h-8 w-8 animate-spin text-primary"})}):r?t&&a(t)==="hidden"?s.jsx(dv,{to:"/",replace:!0}):s.jsx(s.Fragment,{children:e}):s.jsx(dv,{to:"/auth",replace:!0})}function Rs({title:e,subtitle:t,height:r="sm"}){const n={sm:"h-24",md:"h-40",lg:"h-56"}[r];return s.jsx("div",{className:ue("relative rounded-lg overflow-hidden bg-gradient-to-r from-sidebar to-sidebar/80",n),children:s.jsxs("div",{className:"relative h-full flex flex-col justify-center px-6",children:[s.jsx("h1",{className:"text-white text-xl md:text-2xl font-bold",children:e}),t&&s.jsx("p",{className:"text-white/70 text-sm mt-1",children:t})]})})}function zd({onSave:e,hasUnsavedChanges:t}){return s.jsxs(ae,{variant:t?"default":"outline",size:"sm",onClick:e,className:t?"animate-pulse-subtle":"",children:[s.jsx(Gm,{className:"h-4 w-4 mr-1"}),t?"Sauvegarder":"Sauvegard"]})}const Ht=w.forwardRef(({className:e,...t},r)=>s.jsx("div",{className:"relative w-full overflow-auto",children:s.jsx("table",{ref:r,className:ue("w-full caption-bottom text-sm",e),...t})}));Ht.displayName="Table";const qt=w.forwardRef(({className:e,...t},r)=>s.jsx("thead",{ref:r,className:ue("[&_tr]:border-b",e),...t}));qt.displayName="TableHeader";const Kt=w.forwardRef(({className:e,...t},r)=>s.jsx("tbody",{ref:r,className:ue("[&_tr:last-child]:border-0",e),...t}));Kt.displayName="TableBody";const eQ=w.forwardRef(({className:e,...t},r)=>s.jsx("tfoot",{ref:r,className:ue("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));eQ.displayName="TableFooter";const _e=w.forwardRef(({className:e,...t},r)=>s.jsx("tr",{ref:r,className:ue("border-b transition-colors data-[state=selected]:bg-muted hover:bg-muted/50",e),...t}));_e.displayName="TableRow";const ie=w.forwardRef(({className:e,...t},r)=>s.jsx("th",{ref:r,className:ue("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));ie.displayName="TableHead";const W=w.forwardRef(({className:e,...t},r)=>s.jsx("td",{ref:r,className:ue("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));W.displayName="TableCell";const tQ=w.forwardRef(({className:e,...t},r)=>s.jsx("caption",{ref:r,className:ue("mt-4 text-sm text-muted-foreground",e),...t}));tQ.displayName="TableCaption";function rQ({products:e,onUpdateProduct:t,onAddProduct:r,onRemoveProduct:n}){const a=()=>{const i={id:`product-${Date.now()}`,name:"Nouveau Produit",category:"B2C",launchYear:2026,devCost:1e5,devAmortizationYears:5,unitCost:200,priceHT:500,priceTTC_B2C:600,priceHT_B2B:300,priceHT_OEM:220,vatRate:.2,coef_shop:1.8,coef_dist:1.4,coef_oem:1.5,volumesByYear:{}};r(i)};return s.jsxs(Ye,{title:"Pricing Produits",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Ht,{children:[s.jsx(qt,{children:s.jsxs(_e,{children:[s.jsx(ie,{children:"Produit"}),s.jsx(ie,{className:"text-center",children:"Lancement"}),s.jsx(ie,{className:"text-right",children:"Prix TTC B2C"}),s.jsx(ie,{className:"text-right",children:"Prix HT B2C"}),s.jsx(ie,{className:"text-right",children:"Prix HT B2B"}),s.jsx(ie,{className:"text-right",children:"Prix HT OEM"}),s.jsx(ie,{className:"text-right",children:"Cot Unitaire"}),s.jsx(ie,{className:"text-right",children:"Marque B2C"}),s.jsx(ie,{className:"text-right",children:"Marque B2B"}),s.jsx(ie,{className:"text-right",children:"Marque OEM"}),s.jsx(ie,{className:"text-right",children:"CAPEX R&D"}),s.jsx(ie,{className:"text-center",children:"Amort. (ans)"}),s.jsx(ie,{})]})}),s.jsx(Kt,{children:e.map(i=>s.jsxs(_e,{children:[s.jsx(W,{children:s.jsx(be,{value:i.name,onChange:o=>t({...i,name:o.target.value}),className:"h-8 w-40"})}),s.jsx(W,{className:"text-center",children:s.jsx(be,{type:"number",value:i.launchYear,onChange:o=>t({...i,launchYear:Number(o.target.value)}),className:"h-8 w-20 text-center mx-auto"})}),s.jsx(W,{className:"text-right font-mono-numbers",children:s.jsx(be,{type:"number",value:i.priceTTC_B2C,onChange:o=>{const l=Number(o.target.value);t({...i,priceTTC_B2C:l,priceHT:l/(1+i.vatRate)})},className:"h-8 w-24 text-right"})}),s.jsx(W,{className:"text-right font-mono-numbers",children:te(i.priceHT)}),s.jsx(W,{className:"text-right font-mono-numbers",children:s.jsx(be,{type:"number",value:i.priceHT_B2B,onChange:o=>t({...i,priceHT_B2B:Number(o.target.value)}),className:"h-8 w-24 text-right"})}),s.jsx(W,{className:"text-right font-mono-numbers",children:s.jsx(be,{type:"number",value:i.priceHT_OEM,onChange:o=>t({...i,priceHT_OEM:Number(o.target.value)}),className:"h-8 w-24 text-right"})}),s.jsx(W,{className:"text-right font-mono-numbers",children:s.jsx(be,{type:"number",value:i.unitCost,onChange:o=>t({...i,unitCost:Number(o.target.value)}),className:"h-8 w-24 text-right"})}),s.jsxs(W,{className:"text-right font-mono-numbers",children:[i.priceHT>0?((1-i.unitCost/i.priceHT)*100).toFixed(1):0,"%"]}),s.jsxs(W,{className:"text-right font-mono-numbers",children:[i.priceHT_B2B>0?((1-i.unitCost/i.priceHT_B2B)*100).toFixed(1):0,"%"]}),s.jsxs(W,{className:"text-right font-mono-numbers",children:[i.priceHT_OEM>0?((1-i.unitCost/i.priceHT_OEM)*100).toFixed(1):0,"%"]}),s.jsx(W,{className:"text-right font-mono-numbers",children:s.jsx(be,{type:"number",value:i.devCost,onChange:o=>t({...i,devCost:Number(o.target.value)}),className:"h-8 w-28 text-right"})}),s.jsx(W,{className:"text-center",children:s.jsx(be,{type:"number",value:i.devAmortizationYears||5,min:1,onChange:o=>t({...i,devAmortizationYears:Number(o.target.value)}),className:"h-8 w-16 text-center mx-auto"})}),s.jsx(W,{children:s.jsx(ae,{size:"sm",variant:"ghost",className:"text-destructive",onClick:()=>n(i.id),children:s.jsx(hr,{className:"h-4 w-4"})})})]},i.id))})]})}),s.jsxs(ae,{variant:"outline",size:"sm",className:"mt-4",onClick:a,children:[s.jsx(ar,{className:"h-4 w-4 mr-1"})," Ajouter Produit"]})]})}var nQ=Array.isArray,ea=nQ,aQ=typeof dp=="object"&&dp&&dp.Object===Object&&dp,S3=aQ,iQ=S3,sQ=typeof self=="object"&&self&&self.Object===Object&&self,oQ=iQ||sQ||Function("return this")(),Yi=oQ,lQ=Yi,cQ=lQ.Symbol,Zm=cQ,vE=Zm,C3=Object.prototype,uQ=C3.hasOwnProperty,dQ=C3.toString,vf=vE?vE.toStringTag:void 0;function fQ(e){var t=uQ.call(e,vf),r=e[vf];try{e[vf]=void 0;var n=!0}catch{}var a=dQ.call(e);return n&&(t?e[vf]=r:delete e[vf]),a}var hQ=fQ,mQ=Object.prototype,pQ=mQ.toString;function gQ(e){return pQ.call(e)}var vQ=gQ,yE=Zm,yQ=hQ,xQ=vQ,bQ="[object Null]",wQ="[object Undefined]",xE=yE?yE.toStringTag:void 0;function jQ(e){return e==null?e===void 0?wQ:bQ:xE&&xE in Object(e)?yQ(e):xQ(e)}var Ms=jQ;function _Q(e){return e!=null&&typeof e=="object"}var $s=_Q,SQ=Ms,CQ=$s,NQ="[object Symbol]";function PQ(e){return typeof e=="symbol"||CQ(e)&&SQ(e)==NQ}var Ud=PQ,kQ=ea,EQ=Ud,AQ=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,OQ=/^\w*$/;function TQ(e,t){if(kQ(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||EQ(e)?!0:OQ.test(e)||!AQ.test(e)||t!=null&&e in Object(t)}var mC=TQ;function RQ(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Uo=RQ;const Vd=It(Uo);var MQ=Ms,$Q=Uo,IQ="[object AsyncFunction]",DQ="[object Function]",LQ="[object GeneratorFunction]",BQ="[object Proxy]";function FQ(e){if(!$Q(e))return!1;var t=MQ(e);return t==DQ||t==LQ||t==IQ||t==BQ}var pC=FQ;const Je=It(pC);var zQ=Yi,UQ=zQ["__core-js_shared__"],VQ=UQ,Eb=VQ,bE=function(){var e=/[^.]+$/.exec(Eb&&Eb.keys&&Eb.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function WQ(e){return!!bE&&bE in e}var HQ=WQ,qQ=Function.prototype,KQ=qQ.toString;function YQ(e){if(e!=null){try{return KQ.call(e)}catch{}try{return e+""}catch{}}return""}var N3=YQ,GQ=pC,XQ=HQ,QQ=Uo,JQ=N3,ZQ=/[\\^$.*+?()[\]{}|]/g,eJ=/^\[object .+?Constructor\]$/,tJ=Function.prototype,rJ=Object.prototype,nJ=tJ.toString,aJ=rJ.hasOwnProperty,iJ=RegExp("^"+nJ.call(aJ).replace(ZQ,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function sJ(e){if(!QQ(e)||XQ(e))return!1;var t=GQ(e)?iJ:eJ;return t.test(JQ(e))}var oJ=sJ;function lJ(e,t){return e==null?void 0:e[t]}var cJ=lJ,uJ=oJ,dJ=cJ;function fJ(e,t){var r=dJ(e,t);return uJ(r)?r:void 0}var ac=fJ,hJ=ac,mJ=hJ(Object,"create"),Sx=mJ,wE=Sx;function pJ(){this.__data__=wE?wE(null):{},this.size=0}var gJ=pJ;function vJ(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var yJ=vJ,xJ=Sx,bJ="__lodash_hash_undefined__",wJ=Object.prototype,jJ=wJ.hasOwnProperty;function _J(e){var t=this.__data__;if(xJ){var r=t[e];return r===bJ?void 0:r}return jJ.call(t,e)?t[e]:void 0}var SJ=_J,CJ=Sx,NJ=Object.prototype,PJ=NJ.hasOwnProperty;function kJ(e){var t=this.__data__;return CJ?t[e]!==void 0:PJ.call(t,e)}var EJ=kJ,AJ=Sx,OJ="__lodash_hash_undefined__";function TJ(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=AJ&&t===void 0?OJ:t,this}var RJ=TJ,MJ=gJ,$J=yJ,IJ=SJ,DJ=EJ,LJ=RJ;function Wd(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Wd.prototype.clear=MJ;Wd.prototype.delete=$J;Wd.prototype.get=IJ;Wd.prototype.has=DJ;Wd.prototype.set=LJ;var BJ=Wd;function FJ(){this.__data__=[],this.size=0}var zJ=FJ;function UJ(e,t){return e===t||e!==e&&t!==t}var gC=UJ,VJ=gC;function WJ(e,t){for(var r=e.length;r--;)if(VJ(e[r][0],t))return r;return-1}var Cx=WJ,HJ=Cx,qJ=Array.prototype,KJ=qJ.splice;function YJ(e){var t=this.__data__,r=HJ(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():KJ.call(t,r,1),--this.size,!0}var GJ=YJ,XJ=Cx;function QJ(e){var t=this.__data__,r=XJ(t,e);return r<0?void 0:t[r][1]}var JJ=QJ,ZJ=Cx;function eZ(e){return ZJ(this.__data__,e)>-1}var tZ=eZ,rZ=Cx;function nZ(e,t){var r=this.__data__,n=rZ(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var aZ=nZ,iZ=zJ,sZ=GJ,oZ=JJ,lZ=tZ,cZ=aZ;function Hd(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Hd.prototype.clear=iZ;Hd.prototype.delete=sZ;Hd.prototype.get=oZ;Hd.prototype.has=lZ;Hd.prototype.set=cZ;var Nx=Hd,uZ=ac,dZ=Yi,fZ=uZ(dZ,"Map"),vC=fZ,jE=BJ,hZ=Nx,mZ=vC;function pZ(){this.size=0,this.__data__={hash:new jE,map:new(mZ||hZ),string:new jE}}var gZ=pZ;function vZ(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var yZ=vZ,xZ=yZ;function bZ(e,t){var r=e.__data__;return xZ(t)?r[typeof t=="string"?"string":"hash"]:r.map}var Px=bZ,wZ=Px;function jZ(e){var t=wZ(this,e).delete(e);return this.size-=t?1:0,t}var _Z=jZ,SZ=Px;function CZ(e){return SZ(this,e).get(e)}var NZ=CZ,PZ=Px;function kZ(e){return PZ(this,e).has(e)}var EZ=kZ,AZ=Px;function OZ(e,t){var r=AZ(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var TZ=OZ,RZ=gZ,MZ=_Z,$Z=NZ,IZ=EZ,DZ=TZ;function qd(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}qd.prototype.clear=RZ;qd.prototype.delete=MZ;qd.prototype.get=$Z;qd.prototype.has=IZ;qd.prototype.set=DZ;var yC=qd,P3=yC,LZ="Expected a function";function xC(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(LZ);var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],i=r.cache;if(i.has(a))return i.get(a);var o=e.apply(this,n);return r.cache=i.set(a,o)||i,o};return r.cache=new(xC.Cache||P3),r}xC.Cache=P3;var k3=xC;const BZ=It(k3);var FZ=k3,zZ=500;function UZ(e){var t=FZ(e,function(n){return r.size===zZ&&r.clear(),n}),r=t.cache;return t}var VZ=UZ,WZ=VZ,HZ=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,qZ=/\\(\\)?/g,KZ=WZ(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(HZ,function(r,n,a,i){t.push(a?i.replace(qZ,"$1"):n||r)}),t}),YZ=KZ;function GZ(e,t){for(var r=-1,n=e==null?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}var bC=GZ,_E=Zm,XZ=bC,QZ=ea,JZ=Ud,ZZ=1/0,SE=_E?_E.prototype:void 0,CE=SE?SE.toString:void 0;function E3(e){if(typeof e=="string")return e;if(QZ(e))return XZ(e,E3)+"";if(JZ(e))return CE?CE.call(e):"";var t=e+"";return t=="0"&&1/e==-ZZ?"-0":t}var eee=E3,tee=eee;function ree(e){return e==null?"":tee(e)}var A3=ree,nee=ea,aee=mC,iee=YZ,see=A3;function oee(e,t){return nee(e)?e:aee(e,t)?[e]:iee(see(e))}var O3=oee,lee=Ud,cee=1/0;function uee(e){if(typeof e=="string"||lee(e))return e;var t=e+"";return t=="0"&&1/e==-cee?"-0":t}var kx=uee,dee=O3,fee=kx;function hee(e,t){t=dee(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[fee(t[r++])];return r&&r==n?e:void 0}var wC=hee,mee=wC;function pee(e,t,r){var n=e==null?void 0:mee(e,t);return n===void 0?r:n}var T3=pee;const ha=It(T3);function gee(e){return e==null}var vee=gee;const Qe=It(vee);var yee=Ms,xee=ea,bee=$s,wee="[object String]";function jee(e){return typeof e=="string"||!xee(e)&&bee(e)&&yee(e)==wee}var _ee=jee;const Vl=It(_ee);var R3={exports:{}},Ut={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jC=Symbol.for("react.element"),_C=Symbol.for("react.portal"),Ex=Symbol.for("react.fragment"),Ax=Symbol.for("react.strict_mode"),Ox=Symbol.for("react.profiler"),Tx=Symbol.for("react.provider"),Rx=Symbol.for("react.context"),See=Symbol.for("react.server_context"),Mx=Symbol.for("react.forward_ref"),$x=Symbol.for("react.suspense"),Ix=Symbol.for("react.suspense_list"),Dx=Symbol.for("react.memo"),Lx=Symbol.for("react.lazy"),Cee=Symbol.for("react.offscreen"),M3;M3=Symbol.for("react.module.reference");function La(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case jC:switch(e=e.type,e){case Ex:case Ox:case Ax:case $x:case Ix:return e;default:switch(e=e&&e.$$typeof,e){case See:case Rx:case Mx:case Lx:case Dx:case Tx:return e;default:return t}}case _C:return t}}}Ut.ContextConsumer=Rx;Ut.ContextProvider=Tx;Ut.Element=jC;Ut.ForwardRef=Mx;Ut.Fragment=Ex;Ut.Lazy=Lx;Ut.Memo=Dx;Ut.Portal=_C;Ut.Profiler=Ox;Ut.StrictMode=Ax;Ut.Suspense=$x;Ut.SuspenseList=Ix;Ut.isAsyncMode=function(){return!1};Ut.isConcurrentMode=function(){return!1};Ut.isContextConsumer=function(e){return La(e)===Rx};Ut.isContextProvider=function(e){return La(e)===Tx};Ut.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===jC};Ut.isForwardRef=function(e){return La(e)===Mx};Ut.isFragment=function(e){return La(e)===Ex};Ut.isLazy=function(e){return La(e)===Lx};Ut.isMemo=function(e){return La(e)===Dx};Ut.isPortal=function(e){return La(e)===_C};Ut.isProfiler=function(e){return La(e)===Ox};Ut.isStrictMode=function(e){return La(e)===Ax};Ut.isSuspense=function(e){return La(e)===$x};Ut.isSuspenseList=function(e){return La(e)===Ix};Ut.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Ex||e===Ox||e===Ax||e===$x||e===Ix||e===Cee||typeof e=="object"&&e!==null&&(e.$$typeof===Lx||e.$$typeof===Dx||e.$$typeof===Tx||e.$$typeof===Rx||e.$$typeof===Mx||e.$$typeof===M3||e.getModuleId!==void 0)};Ut.typeOf=La;R3.exports=Ut;var Nee=R3.exports,Pee=Ms,kee=$s,Eee="[object Number]";function Aee(e){return typeof e=="number"||kee(e)&&Pee(e)==Eee}var $3=Aee;const Oee=It($3);var Tee=$3;function Ree(e){return Tee(e)&&e!=+e}var Mee=Ree;const Kd=It(Mee);var Mn=function(t){return t===0?0:t>0?1:-1},yl=function(t){return Vl(t)&&t.indexOf("%")===t.length-1},we=function(t){return Oee(t)&&!Kd(t)},$ee=function(t){return Qe(t)},rn=function(t){return we(t)||Vl(t)},Iee=0,Vo=function(t){var r=++Iee;return"".concat(t||"").concat(r)},$n=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!we(t)&&!Vl(t))return n;var i;if(yl(t)){var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return Kd(i)&&(i=n),a&&i>r&&(i=r),i},eo=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},Dee=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,n={},a=0;a<r;a++)if(!n[t[a]])n[t[a]]=!0;else return!0;return!1},wr=function(t,r){return we(t)&&we(r)?function(n){return t+n*(r-t)}:function(){return r}};function vv(e,t,r){return!e||!e.length?null:e.find(function(n){return n&&(typeof t=="function"?t(n):ha(n,t))===r})}var Lee=function(t){if(!t||!t.length)return null;for(var r=t.length,n=0,a=0,i=0,o=0,l=1/0,c=-1/0,u=0,d=0,f=0;f<r;f++)u=t[f].cx||0,d=t[f].cy||0,n+=u,a+=d,i+=u*d,o+=u*u,l=Math.min(l,u),c=Math.max(c,u);var h=r*o!==n*n?(r*i-n*a)/(r*o-n*n):0;return{xmin:l,xmax:c,a:h,b:(a-h*n)/r}},Bee=function(t,r){return we(t)&&we(r)?t-r:Vl(t)&&Vl(r)?t.localeCompare(r):t instanceof Date&&r instanceof Date?t.getTime()-r.getTime():String(t).localeCompare(String(r))};function fu(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function Gj(e){"@babel/helpers - typeof";return Gj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gj(e)}var Fee=["viewBox","children"],zee=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],NE=["points","pathLength"],Ab={svg:Fee,polygon:NE,polyline:NE},SC=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],yv=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(w.isValidElement(t)&&(n=t.props),!Vd(n))return null;var a={};return Object.keys(n).forEach(function(i){SC.includes(i)&&(a[i]=r||function(o){return n[i](n,o)})}),a},Uee=function(t,r,n){return function(a){return t(r,n,a),null}},Mo=function(t,r,n){if(!Vd(t)||Gj(t)!=="object")return null;var a=null;return Object.keys(t).forEach(function(i){var o=t[i];SC.includes(i)&&typeof o=="function"&&(a||(a={}),a[i]=Uee(o,r,n))}),a},Vee=["children"],Wee=["children"];function PE(e,t){if(e==null)return{};var r=Hee(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Hee(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Xj(e){"@babel/helpers - typeof";return Xj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xj(e)}var kE={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},gs=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},EE=null,Ob=null,CC=function e(t){if(t===EE&&Array.isArray(Ob))return Ob;var r=[];return w.Children.forEach(t,function(n){Qe(n)||(Nee.isFragment(n)?r=r.concat(e(n.props.children)):r.push(n))}),Ob=r,EE=t,r};function Bn(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(function(a){return gs(a)}):n=[gs(t)],CC(e).forEach(function(a){var i=ha(a,"type.displayName")||ha(a,"type.name");n.indexOf(i)!==-1&&r.push(a)}),r}function ia(e,t){var r=Bn(e,t);return r&&r[0]}var AE=function(t){if(!t||!t.props)return!1;var r=t.props,n=r.width,a=r.height;return!(!we(n)||n<=0||!we(a)||a<=0)},qee=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Kee=function(t){return t&&t.type&&Vl(t.type)&&qee.indexOf(t.type)>=0},I3=function(t){return t&&Xj(t)==="object"&&"clipDot"in t},Yee=function(t,r,n,a){var i,o=(i=Ab==null?void 0:Ab[a])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!Je(t)&&(a&&o.includes(r)||zee.includes(r))||n&&SC.includes(r)},Ve=function(t,r,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(w.isValidElement(t)&&(a=t.props),!Vd(a))return null;var i={};return Object.keys(a).forEach(function(o){var l;Yee((l=a)===null||l===void 0?void 0:l[o],o,r,n)&&(i[o]=a[o])}),i},Qj=function e(t,r){if(t===r)return!0;var n=w.Children.count(t);if(n!==w.Children.count(r))return!1;if(n===0)return!0;if(n===1)return OE(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var a=0;a<n;a++){var i=t[a],o=r[a];if(Array.isArray(i)||Array.isArray(o)){if(!e(i,o))return!1}else if(!OE(i,o))return!1}return!0},OE=function(t,r){if(Qe(t)&&Qe(r))return!0;if(!Qe(t)&&!Qe(r)){var n=t.props||{},a=n.children,i=PE(n,Vee),o=r.props||{},l=o.children,c=PE(o,Wee);return a&&l?fu(i,c)&&Qj(a,l):!a&&!l?fu(i,c):!1}return!1},TE=function(t,r){var n=[],a={};return CC(t).forEach(function(i,o){if(Kee(i))n.push(i);else if(i){var l=gs(i.type),c=r[l]||{},u=c.handler,d=c.once;if(u&&(!d||!a[l])){var f=u(i,l,o);n.push(f),a[l]=!0}}}),n},Gee=function(t){var r=t&&t.type;return r&&kE[r]?kE[r]:null},Xee=function(t,r){return CC(r).indexOf(t)},Qee=["children","width","height","viewBox","className","style","title","desc"];function Jj(){return Jj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Jj.apply(this,arguments)}function Jee(e,t){if(e==null)return{};var r=Zee(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Zee(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Zj(e){var t=e.children,r=e.width,n=e.height,a=e.viewBox,i=e.className,o=e.style,l=e.title,c=e.desc,u=Jee(e,Qee),d=a||{width:r,height:n,x:0,y:0},f=ct("recharts-surface",i);return $.createElement("svg",Jj({},Ve(u,!0,"svg"),{className:f,width:r,height:n,style:o,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),$.createElement("title",null,l),$.createElement("desc",null,c),t)}var ete=["children","className"];function e1(){return e1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},e1.apply(this,arguments)}function tte(e,t){if(e==null)return{};var r=rte(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function rte(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var gt=$.forwardRef(function(e,t){var r=e.children,n=e.className,a=tte(e,ete),i=ct("recharts-layer",n);return $.createElement("g",e1({className:i},Ve(a,!0),{ref:t}),r)}),di=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i]};function nte(e,t,r){var n=-1,a=e.length;t<0&&(t=-t>a?0:a+t),r=r>a?a:r,r<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(a);++n<a;)i[n]=e[n+t];return i}var ate=nte,ite=ate;function ste(e,t,r){var n=e.length;return r=r===void 0?n:r,!t&&r>=n?e:ite(e,t,r)}var ote=ste,lte="\\ud800-\\udfff",cte="\\u0300-\\u036f",ute="\\ufe20-\\ufe2f",dte="\\u20d0-\\u20ff",fte=cte+ute+dte,hte="\\ufe0e\\ufe0f",mte="\\u200d",pte=RegExp("["+mte+lte+fte+hte+"]");function gte(e){return pte.test(e)}var D3=gte;function vte(e){return e.split("")}var yte=vte,L3="\\ud800-\\udfff",xte="\\u0300-\\u036f",bte="\\ufe20-\\ufe2f",wte="\\u20d0-\\u20ff",jte=xte+bte+wte,_te="\\ufe0e\\ufe0f",Ste="["+L3+"]",t1="["+jte+"]",r1="\\ud83c[\\udffb-\\udfff]",Cte="(?:"+t1+"|"+r1+")",B3="[^"+L3+"]",F3="(?:\\ud83c[\\udde6-\\uddff]){2}",z3="[\\ud800-\\udbff][\\udc00-\\udfff]",Nte="\\u200d",U3=Cte+"?",V3="["+_te+"]?",Pte="(?:"+Nte+"(?:"+[B3,F3,z3].join("|")+")"+V3+U3+")*",kte=V3+U3+Pte,Ete="(?:"+[B3+t1+"?",t1,F3,z3,Ste].join("|")+")",Ate=RegExp(r1+"(?="+r1+")|"+Ete+kte,"g");function Ote(e){return e.match(Ate)||[]}var Tte=Ote,Rte=yte,Mte=D3,$te=Tte;function Ite(e){return Mte(e)?$te(e):Rte(e)}var Dte=Ite,Lte=ote,Bte=D3,Fte=Dte,zte=A3;function Ute(e){return function(t){t=zte(t);var r=Bte(t)?Fte(t):void 0,n=r?r[0]:t.charAt(0),a=r?Lte(r,1).join(""):t.slice(1);return n[e]()+a}}var Vte=Ute,Wte=Vte,Hte=Wte("toUpperCase"),qte=Hte;const Bx=It(qte);function Zt(e){return function(){return e}}const W3=Math.cos,xv=Math.sin,yi=Math.sqrt,bv=Math.PI,Fx=2*bv,n1=Math.PI,a1=2*n1,sl=1e-6,Kte=a1-sl;function H3(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function Yte(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return H3;const r=10**t;return function(n){this._+=n[0];for(let a=1,i=n.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class Gte{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?H3:Yte(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,i,o){this._append`C${+t},${+r},${+n},${+a},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,n,a,i){if(t=+t,r=+r,n=+n,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=n-t,u=a-r,d=o-t,f=l-r,h=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(h>sl)if(!(Math.abs(f*c-u*d)>sl)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let m=n-o,y=a-l,g=c*c+u*u,p=m*m+y*y,v=Math.sqrt(g),x=Math.sqrt(h),b=i*Math.tan((n1-Math.acos((g+h-p)/(2*v*x)))/2),_=b/x,j=b/v;Math.abs(_-1)>sl&&this._append`L${t+_*d},${r+_*f}`,this._append`A${i},${i},0,0,${+(f*m>d*y)},${this._x1=t+j*c},${this._y1=r+j*u}`}}arc(t,r,n,a,i,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(a),c=n*Math.sin(a),u=t+l,d=r+c,f=1^o,h=o?a-i:i-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>sl||Math.abs(this._y1-d)>sl)&&this._append`L${u},${d}`,n&&(h<0&&(h=h%a1+a1),h>Kte?this._append`A${n},${n},0,1,${f},${t-l},${r-c}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:h>sl&&this._append`A${n},${n},0,${+(h>=n1)},${f},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function NC(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new Gte(t)}function PC(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function q3(e){this._context=e}q3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function zx(e){return new q3(e)}function K3(e){return e[0]}function Y3(e){return e[1]}function G3(e,t){var r=Zt(!0),n=null,a=zx,i=null,o=NC(l);e=typeof e=="function"?e:e===void 0?K3:Zt(e),t=typeof t=="function"?t:t===void 0?Y3:Zt(t);function l(c){var u,d=(c=PC(c)).length,f,h=!1,m;for(n==null&&(i=a(m=o())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===h&&((h=!h)?i.lineStart():i.lineEnd()),h&&i.point(+e(f,u,c),+t(f,u,c));if(m)return i=null,m+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:Zt(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:Zt(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Zt(!!c),l):r},l.curve=function(c){return arguments.length?(a=c,n!=null&&(i=a(n)),l):a},l.context=function(c){return arguments.length?(c==null?n=i=null:i=a(n=c),l):n},l}function Fp(e,t,r){var n=null,a=Zt(!0),i=null,o=zx,l=null,c=NC(u);e=typeof e=="function"?e:e===void 0?K3:Zt(+e),t=typeof t=="function"?t:Zt(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?Y3:Zt(+r);function u(f){var h,m,y,g=(f=PC(f)).length,p,v=!1,x,b=new Array(g),_=new Array(g);for(i==null&&(l=o(x=c())),h=0;h<=g;++h){if(!(h<g&&a(p=f[h],h,f))===v)if(v=!v)m=h,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),y=h-1;y>=m;--y)l.point(b[y],_[y]);l.lineEnd(),l.areaEnd()}v&&(b[h]=+e(p,h,f),_[h]=+t(p,h,f),l.point(n?+n(p,h,f):b[h],r?+r(p,h,f):_[h]))}if(x)return l=null,x+""||null}function d(){return G3().defined(a).curve(o).context(i)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:Zt(+f),n=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Zt(+f),u):e},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Zt(+f),u):n},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:Zt(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Zt(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Zt(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(f){return arguments.length?(a=typeof f=="function"?f:Zt(!!f),u):a},u.curve=function(f){return arguments.length?(o=f,i!=null&&(l=o(i)),u):o},u.context=function(f){return arguments.length?(f==null?i=l=null:l=o(i=f),u):i},u}class X3{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function Xte(e){return new X3(e,!0)}function Qte(e){return new X3(e,!1)}const kC={draw(e,t){const r=yi(t/bv);e.moveTo(r,0),e.arc(0,0,r,0,Fx)}},Jte={draw(e,t){const r=yi(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},Q3=yi(1/3),Zte=Q3*2,ere={draw(e,t){const r=yi(t/Zte),n=r*Q3;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},tre={draw(e,t){const r=yi(t),n=-r/2;e.rect(n,n,r,r)}},rre=.8908130915292852,J3=xv(bv/10)/xv(7*bv/10),nre=xv(Fx/10)*J3,are=-W3(Fx/10)*J3,ire={draw(e,t){const r=yi(t*rre),n=nre*r,a=are*r;e.moveTo(0,-r),e.lineTo(n,a);for(let i=1;i<5;++i){const o=Fx*i/5,l=W3(o),c=xv(o);e.lineTo(c*r,-l*r),e.lineTo(l*n-c*a,c*n+l*a)}e.closePath()}},Tb=yi(3),sre={draw(e,t){const r=-yi(t/(Tb*3));e.moveTo(0,r*2),e.lineTo(-Tb*r,-r),e.lineTo(Tb*r,-r),e.closePath()}},wa=-.5,ja=yi(3)/2,i1=1/yi(12),ore=(i1/2+1)*3,lre={draw(e,t){const r=yi(t/ore),n=r/2,a=r*i1,i=n,o=r*i1+r,l=-i,c=o;e.moveTo(n,a),e.lineTo(i,o),e.lineTo(l,c),e.lineTo(wa*n-ja*a,ja*n+wa*a),e.lineTo(wa*i-ja*o,ja*i+wa*o),e.lineTo(wa*l-ja*c,ja*l+wa*c),e.lineTo(wa*n+ja*a,wa*a-ja*n),e.lineTo(wa*i+ja*o,wa*o-ja*i),e.lineTo(wa*l+ja*c,wa*c-ja*l),e.closePath()}};function cre(e,t){let r=null,n=NC(a);e=typeof e=="function"?e:Zt(e||kC),t=typeof t=="function"?t:Zt(t===void 0?64:+t);function a(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return a.type=function(i){return arguments.length?(e=typeof i=="function"?i:Zt(i),a):e},a.size=function(i){return arguments.length?(t=typeof i=="function"?i:Zt(+i),a):t},a.context=function(i){return arguments.length?(r=i??null,a):r},a}function wv(){}function jv(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function Z3(e){this._context=e}Z3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:jv(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:jv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function ure(e){return new Z3(e)}function eL(e){this._context=e}eL.prototype={areaStart:wv,areaEnd:wv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:jv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function dre(e){return new eL(e)}function tL(e){this._context=e}tL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:jv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function fre(e){return new tL(e)}function rL(e){this._context=e}rL.prototype={areaStart:wv,areaEnd:wv,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function hre(e){return new rL(e)}function RE(e){return e<0?-1:1}function ME(e,t,r){var n=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(n||a<0&&-0),o=(r-e._y1)/(a||n<0&&-0),l=(i*a+o*n)/(n+a);return(RE(i)+RE(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function $E(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Rb(e,t,r){var n=e._x0,a=e._y0,i=e._x1,o=e._y1,l=(i-n)/3;e._context.bezierCurveTo(n+l,a+l*t,i-l,o-l*r,i,o)}function _v(e){this._context=e}_v.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Rb(this,this._t0,$E(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Rb(this,$E(this,r=ME(this,e,t)),r);break;default:Rb(this,this._t0,r=ME(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function nL(e){this._context=new aL(e)}(nL.prototype=Object.create(_v.prototype)).point=function(e,t){_v.prototype.point.call(this,t,e)};function aL(e){this._context=e}aL.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,i){this._context.bezierCurveTo(t,e,n,r,i,a)}};function mre(e){return new _v(e)}function pre(e){return new nL(e)}function iL(e){this._context=e}iL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=IE(e),a=IE(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],a[0][i],n[1][i],a[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function IE(e){var t,r=e.length-1,n,a=new Array(r),i=new Array(r),o=new Array(r);for(a[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(a[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)a[t]=(o[t]-a[t+1])/i[t];for(i[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function gre(e){return new iL(e)}function Ux(e,t){this._context=e,this._t=t}Ux.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function vre(e){return new Ux(e,.5)}function yre(e){return new Ux(e,0)}function xre(e){return new Ux(e,1)}function Bu(e,t){if((o=e.length)>1)for(var r=1,n,a,i=e[t[0]],o,l=i.length;r<o;++r)for(a=i,i=e[t[r]],n=0;n<l;++n)i[n][1]+=i[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function s1(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function bre(e,t){return e[t]}function wre(e){const t=[];return t.key=e,t}function jre(){var e=Zt([]),t=s1,r=Bu,n=bre;function a(i){var o=Array.from(e.apply(this,arguments),wre),l,c=o.length,u=-1,d;for(const f of i)for(l=0,++u;l<c;++l)(o[l][u]=[0,+n(f,o[l].key,u,i)]).data=f;for(l=0,d=PC(t(o));l<c;++l)o[d[l]].index=l;return r(o,d),o}return a.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Zt(Array.from(i)),a):e},a.value=function(i){return arguments.length?(n=typeof i=="function"?i:Zt(+i),a):n},a.order=function(i){return arguments.length?(t=i==null?s1:typeof i=="function"?i:Zt(Array.from(i)),a):t},a.offset=function(i){return arguments.length?(r=i??Bu,a):r},a}function _re(e,t){if((n=e.length)>0){for(var r,n,a=0,i=e[0].length,o;a<i;++a){for(o=r=0;r<n;++r)o+=e[r][a][1]||0;if(o)for(r=0;r<n;++r)e[r][a][1]/=o}Bu(e,t)}}function Sre(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,i=n.length;r<i;++r){for(var o=0,l=0;o<a;++o)l+=e[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}Bu(e,t)}}function Cre(e,t){if(!(!((o=e.length)>0)||!((i=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,i,o;n<i;++n){for(var l=0,c=0,u=0;l<o;++l){for(var d=e[t[l]],f=d[n][1]||0,h=d[n-1][1]||0,m=(f-h)/2,y=0;y<l;++y){var g=e[t[y]],p=g[n][1]||0,v=g[n-1][1]||0;m+=p-v}c+=f,u+=m*f}a[n-1][1]+=a[n-1][0]=r,c&&(r-=u/c)}a[n-1][1]+=a[n-1][0]=r,Bu(e,t)}}function Yh(e){"@babel/helpers - typeof";return Yh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yh(e)}var Nre=["type","size","sizeType"];function o1(){return o1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o1.apply(this,arguments)}function DE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function LE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DE(Object(r),!0).forEach(function(n){Pre(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Pre(e,t,r){return t=kre(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kre(e){var t=Ere(e,"string");return Yh(t)=="symbol"?t:t+""}function Ere(e,t){if(Yh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Yh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Are(e,t){if(e==null)return{};var r=Ore(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Ore(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var sL={symbolCircle:kC,symbolCross:Jte,symbolDiamond:ere,symbolSquare:tre,symbolStar:ire,symbolTriangle:sre,symbolWye:lre},Tre=Math.PI/180,Rre=function(t){var r="symbol".concat(Bx(t));return sL[r]||kC},Mre=function(t,r,n){if(r==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var a=18*Tre;return 1.25*t*t*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},$re=function(t,r){sL["symbol".concat(Bx(t))]=r},Vx=function(t){var r=t.type,n=r===void 0?"circle":r,a=t.size,i=a===void 0?64:a,o=t.sizeType,l=o===void 0?"area":o,c=Are(t,Nre),u=LE(LE({},c),{},{type:n,size:i,sizeType:l}),d=function(){var p=Rre(n),v=cre().type(p).size(Mre(i,l,n));return v()},f=u.className,h=u.cx,m=u.cy,y=Ve(u,!0);return h===+h&&m===+m&&i===+i?$.createElement("path",o1({},y,{className:ct("recharts-symbols",f),transform:"translate(".concat(h,", ").concat(m,")"),d:d()})):null};Vx.registerSymbol=$re;function Fu(e){"@babel/helpers - typeof";return Fu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fu(e)}function l1(){return l1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l1.apply(this,arguments)}function BE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ire(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BE(Object(r),!0).forEach(function(n){Gh(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Dre(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Lre(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,lL(n.key),n)}}function Bre(e,t,r){return t&&Lre(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Fre(e,t,r){return t=Sv(t),zre(e,oL()?Reflect.construct(t,r||[],Sv(e).constructor):t.apply(e,r))}function zre(e,t){if(t&&(Fu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ure(e)}function Ure(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oL=function(){return!!e})()}function Sv(e){return Sv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Sv(e)}function Vre(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c1(e,t)}function c1(e,t){return c1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},c1(e,t)}function Gh(e,t,r){return t=lL(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lL(e){var t=Wre(e,"string");return Fu(t)=="symbol"?t:t+""}function Wre(e,t){if(Fu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Fu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _a=32,EC=function(e){function t(){return Dre(this,t),Fre(this,t,arguments)}return Vre(t,e),Bre(t,[{key:"renderIcon",value:function(n){var a=this.props.inactiveColor,i=_a/2,o=_a/6,l=_a/3,c=n.inactive?a:n.color;if(n.type==="plainline")return $.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:i,x2:_a,y2:i,className:"recharts-legend-icon"});if(n.type==="line")return $.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(_a,"M").concat(2*l,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(n.type==="rect")return $.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(_a/8,"h").concat(_a,"v").concat(_a*3/4,"h").concat(-_a,"z"),className:"recharts-legend-icon"});if($.isValidElement(n.legendIcon)){var u=Ire({},n);return delete u.legendIcon,$.cloneElement(n.legendIcon,u)}return $.createElement(Vx,{fill:c,cx:i,cy:i,size:_a,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,a=this.props,i=a.payload,o=a.iconSize,l=a.layout,c=a.formatter,u=a.inactiveColor,d={x:0,y:0,width:_a,height:_a},f={display:l==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(m,y){var g=m.formatter||c,p=ct(Gh(Gh({"recharts-legend-item":!0},"legend-item-".concat(y),!0),"inactive",m.inactive));if(m.type==="none")return null;var v=Je(m.value)?null:m.value;di(!Je(m.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var x=m.inactive?u:m.color;return $.createElement("li",l1({className:p,style:f,key:"legend-item-".concat(y)},Mo(n.props,m,y)),$.createElement(Zj,{width:o,height:o,viewBox:d,style:h},n.renderIcon(m)),$.createElement("span",{className:"recharts-legend-item-text",style:{color:x}},g?g(v,m,y):v))})}},{key:"render",value:function(){var n=this.props,a=n.payload,i=n.layout,o=n.align;if(!a||!a.length)return null;var l={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return $.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(w.PureComponent);Gh(EC,"displayName","Legend");Gh(EC,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var Hre=Nx;function qre(){this.__data__=new Hre,this.size=0}var Kre=qre;function Yre(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var Gre=Yre;function Xre(e){return this.__data__.get(e)}var Qre=Xre;function Jre(e){return this.__data__.has(e)}var Zre=Jre,ene=Nx,tne=vC,rne=yC,nne=200;function ane(e,t){var r=this.__data__;if(r instanceof ene){var n=r.__data__;if(!tne||n.length<nne-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new rne(n)}return r.set(e,t),this.size=r.size,this}var ine=ane,sne=Nx,one=Kre,lne=Gre,cne=Qre,une=Zre,dne=ine;function Yd(e){var t=this.__data__=new sne(e);this.size=t.size}Yd.prototype.clear=one;Yd.prototype.delete=lne;Yd.prototype.get=cne;Yd.prototype.has=une;Yd.prototype.set=dne;var cL=Yd,fne="__lodash_hash_undefined__";function hne(e){return this.__data__.set(e,fne),this}var mne=hne;function pne(e){return this.__data__.has(e)}var gne=pne,vne=yC,yne=mne,xne=gne;function Cv(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new vne;++t<r;)this.add(e[t])}Cv.prototype.add=Cv.prototype.push=yne;Cv.prototype.has=xne;var uL=Cv;function bne(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var dL=bne;function wne(e,t){return e.has(t)}var fL=wne,jne=uL,_ne=dL,Sne=fL,Cne=1,Nne=2;function Pne(e,t,r,n,a,i){var o=r&Cne,l=e.length,c=t.length;if(l!=c&&!(o&&c>l))return!1;var u=i.get(e),d=i.get(t);if(u&&d)return u==t&&d==e;var f=-1,h=!0,m=r&Nne?new jne:void 0;for(i.set(e,t),i.set(t,e);++f<l;){var y=e[f],g=t[f];if(n)var p=o?n(g,y,f,t,e,i):n(y,g,f,e,t,i);if(p!==void 0){if(p)continue;h=!1;break}if(m){if(!_ne(t,function(v,x){if(!Sne(m,x)&&(y===v||a(y,v,r,n,i)))return m.push(x)})){h=!1;break}}else if(!(y===g||a(y,g,r,n,i))){h=!1;break}}return i.delete(e),i.delete(t),h}var hL=Pne,kne=Yi,Ene=kne.Uint8Array,Ane=Ene;function One(e){var t=-1,r=Array(e.size);return e.forEach(function(n,a){r[++t]=[a,n]}),r}var Tne=One;function Rne(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var AC=Rne,FE=Zm,zE=Ane,Mne=gC,$ne=hL,Ine=Tne,Dne=AC,Lne=1,Bne=2,Fne="[object Boolean]",zne="[object Date]",Une="[object Error]",Vne="[object Map]",Wne="[object Number]",Hne="[object RegExp]",qne="[object Set]",Kne="[object String]",Yne="[object Symbol]",Gne="[object ArrayBuffer]",Xne="[object DataView]",UE=FE?FE.prototype:void 0,Mb=UE?UE.valueOf:void 0;function Qne(e,t,r,n,a,i,o){switch(r){case Xne:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Gne:return!(e.byteLength!=t.byteLength||!i(new zE(e),new zE(t)));case Fne:case zne:case Wne:return Mne(+e,+t);case Une:return e.name==t.name&&e.message==t.message;case Hne:case Kne:return e==t+"";case Vne:var l=Ine;case qne:var c=n&Lne;if(l||(l=Dne),e.size!=t.size&&!c)return!1;var u=o.get(e);if(u)return u==t;n|=Bne,o.set(e,t);var d=$ne(l(e),l(t),n,a,i,o);return o.delete(e),d;case Yne:if(Mb)return Mb.call(e)==Mb.call(t)}return!1}var Jne=Qne;function Zne(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}var mL=Zne,eae=mL,tae=ea;function rae(e,t,r){var n=t(e);return tae(e)?n:eae(n,r(e))}var nae=rae;function aae(e,t){for(var r=-1,n=e==null?0:e.length,a=0,i=[];++r<n;){var o=e[r];t(o,r,e)&&(i[a++]=o)}return i}var iae=aae;function sae(){return[]}var oae=sae,lae=iae,cae=oae,uae=Object.prototype,dae=uae.propertyIsEnumerable,VE=Object.getOwnPropertySymbols,fae=VE?function(e){return e==null?[]:(e=Object(e),lae(VE(e),function(t){return dae.call(e,t)}))}:cae,hae=fae;function mae(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var pae=mae,gae=Ms,vae=$s,yae="[object Arguments]";function xae(e){return vae(e)&&gae(e)==yae}var bae=xae,WE=bae,wae=$s,pL=Object.prototype,jae=pL.hasOwnProperty,_ae=pL.propertyIsEnumerable,Sae=WE(function(){return arguments}())?WE:function(e){return wae(e)&&jae.call(e,"callee")&&!_ae.call(e,"callee")},OC=Sae,Nv={exports:{}};function Cae(){return!1}var Nae=Cae;Nv.exports;(function(e,t){var r=Yi,n=Nae,a=t&&!t.nodeType&&t,i=a&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===a,l=o?r.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||n;e.exports=u})(Nv,Nv.exports);var gL=Nv.exports,Pae=9007199254740991,kae=/^(?:0|[1-9]\d*)$/;function Eae(e,t){var r=typeof e;return t=t??Pae,!!t&&(r=="number"||r!="symbol"&&kae.test(e))&&e>-1&&e%1==0&&e<t}var TC=Eae,Aae=9007199254740991;function Oae(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Aae}var RC=Oae,Tae=Ms,Rae=RC,Mae=$s,$ae="[object Arguments]",Iae="[object Array]",Dae="[object Boolean]",Lae="[object Date]",Bae="[object Error]",Fae="[object Function]",zae="[object Map]",Uae="[object Number]",Vae="[object Object]",Wae="[object RegExp]",Hae="[object Set]",qae="[object String]",Kae="[object WeakMap]",Yae="[object ArrayBuffer]",Gae="[object DataView]",Xae="[object Float32Array]",Qae="[object Float64Array]",Jae="[object Int8Array]",Zae="[object Int16Array]",eie="[object Int32Array]",tie="[object Uint8Array]",rie="[object Uint8ClampedArray]",nie="[object Uint16Array]",aie="[object Uint32Array]",or={};or[Xae]=or[Qae]=or[Jae]=or[Zae]=or[eie]=or[tie]=or[rie]=or[nie]=or[aie]=!0;or[$ae]=or[Iae]=or[Yae]=or[Dae]=or[Gae]=or[Lae]=or[Bae]=or[Fae]=or[zae]=or[Uae]=or[Vae]=or[Wae]=or[Hae]=or[qae]=or[Kae]=!1;function iie(e){return Mae(e)&&Rae(e.length)&&!!or[Tae(e)]}var sie=iie;function oie(e){return function(t){return e(t)}}var vL=oie,Pv={exports:{}};Pv.exports;(function(e,t){var r=S3,n=t&&!t.nodeType&&t,a=n&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===n,o=i&&r.process,l=function(){try{var c=a&&a.require&&a.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=l})(Pv,Pv.exports);var lie=Pv.exports,cie=sie,uie=vL,HE=lie,qE=HE&&HE.isTypedArray,die=qE?uie(qE):cie,yL=die,fie=pae,hie=OC,mie=ea,pie=gL,gie=TC,vie=yL,yie=Object.prototype,xie=yie.hasOwnProperty;function bie(e,t){var r=mie(e),n=!r&&hie(e),a=!r&&!n&&pie(e),i=!r&&!n&&!a&&vie(e),o=r||n||a||i,l=o?fie(e.length,String):[],c=l.length;for(var u in e)(t||xie.call(e,u))&&!(o&&(u=="length"||a&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||gie(u,c)))&&l.push(u);return l}var wie=bie,jie=Object.prototype;function _ie(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||jie;return e===r}var Sie=_ie;function Cie(e,t){return function(r){return e(t(r))}}var xL=Cie,Nie=xL,Pie=Nie(Object.keys,Object),kie=Pie,Eie=Sie,Aie=kie,Oie=Object.prototype,Tie=Oie.hasOwnProperty;function Rie(e){if(!Eie(e))return Aie(e);var t=[];for(var r in Object(e))Tie.call(e,r)&&r!="constructor"&&t.push(r);return t}var Mie=Rie,$ie=pC,Iie=RC;function Die(e){return e!=null&&Iie(e.length)&&!$ie(e)}var ep=Die,Lie=wie,Bie=Mie,Fie=ep;function zie(e){return Fie(e)?Lie(e):Bie(e)}var Wx=zie,Uie=nae,Vie=hae,Wie=Wx;function Hie(e){return Uie(e,Wie,Vie)}var qie=Hie,KE=qie,Kie=1,Yie=Object.prototype,Gie=Yie.hasOwnProperty;function Xie(e,t,r,n,a,i){var o=r&Kie,l=KE(e),c=l.length,u=KE(t),d=u.length;if(c!=d&&!o)return!1;for(var f=c;f--;){var h=l[f];if(!(o?h in t:Gie.call(t,h)))return!1}var m=i.get(e),y=i.get(t);if(m&&y)return m==t&&y==e;var g=!0;i.set(e,t),i.set(t,e);for(var p=o;++f<c;){h=l[f];var v=e[h],x=t[h];if(n)var b=o?n(x,v,h,t,e,i):n(v,x,h,e,t,i);if(!(b===void 0?v===x||a(v,x,r,n,i):b)){g=!1;break}p||(p=h=="constructor")}if(g&&!p){var _=e.constructor,j=t.constructor;_!=j&&"constructor"in e&&"constructor"in t&&!(typeof _=="function"&&_ instanceof _&&typeof j=="function"&&j instanceof j)&&(g=!1)}return i.delete(e),i.delete(t),g}var Qie=Xie,Jie=ac,Zie=Yi,ese=Jie(Zie,"DataView"),tse=ese,rse=ac,nse=Yi,ase=rse(nse,"Promise"),ise=ase,sse=ac,ose=Yi,lse=sse(ose,"Set"),bL=lse,cse=ac,use=Yi,dse=cse(use,"WeakMap"),fse=dse,u1=tse,d1=vC,f1=ise,h1=bL,m1=fse,wL=Ms,Gd=N3,YE="[object Map]",hse="[object Object]",GE="[object Promise]",XE="[object Set]",QE="[object WeakMap]",JE="[object DataView]",mse=Gd(u1),pse=Gd(d1),gse=Gd(f1),vse=Gd(h1),yse=Gd(m1),ol=wL;(u1&&ol(new u1(new ArrayBuffer(1)))!=JE||d1&&ol(new d1)!=YE||f1&&ol(f1.resolve())!=GE||h1&&ol(new h1)!=XE||m1&&ol(new m1)!=QE)&&(ol=function(e){var t=wL(e),r=t==hse?e.constructor:void 0,n=r?Gd(r):"";if(n)switch(n){case mse:return JE;case pse:return YE;case gse:return GE;case vse:return XE;case yse:return QE}return t});var xse=ol,$b=cL,bse=hL,wse=Jne,jse=Qie,ZE=xse,eA=ea,tA=gL,_se=yL,Sse=1,rA="[object Arguments]",nA="[object Array]",zp="[object Object]",Cse=Object.prototype,aA=Cse.hasOwnProperty;function Nse(e,t,r,n,a,i){var o=eA(e),l=eA(t),c=o?nA:ZE(e),u=l?nA:ZE(t);c=c==rA?zp:c,u=u==rA?zp:u;var d=c==zp,f=u==zp,h=c==u;if(h&&tA(e)){if(!tA(t))return!1;o=!0,d=!1}if(h&&!d)return i||(i=new $b),o||_se(e)?bse(e,t,r,n,a,i):wse(e,t,c,r,n,a,i);if(!(r&Sse)){var m=d&&aA.call(e,"__wrapped__"),y=f&&aA.call(t,"__wrapped__");if(m||y){var g=m?e.value():e,p=y?t.value():t;return i||(i=new $b),a(g,p,r,n,i)}}return h?(i||(i=new $b),jse(e,t,r,n,a,i)):!1}var Pse=Nse,kse=Pse,iA=$s;function jL(e,t,r,n,a){return e===t?!0:e==null||t==null||!iA(e)&&!iA(t)?e!==e&&t!==t:kse(e,t,r,n,jL,a)}var MC=jL,Ese=cL,Ase=MC,Ose=1,Tse=2;function Rse(e,t,r,n){var a=r.length,i=a,o=!n;if(e==null)return!i;for(e=Object(e);a--;){var l=r[a];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++a<i;){l=r[a];var c=l[0],u=e[c],d=l[1];if(o&&l[2]){if(u===void 0&&!(c in e))return!1}else{var f=new Ese;if(n)var h=n(u,d,c,e,t,f);if(!(h===void 0?Ase(d,u,Ose|Tse,n,f):h))return!1}}return!0}var Mse=Rse,$se=Uo;function Ise(e){return e===e&&!$se(e)}var _L=Ise,Dse=_L,Lse=Wx;function Bse(e){for(var t=Lse(e),r=t.length;r--;){var n=t[r],a=e[n];t[r]=[n,a,Dse(a)]}return t}var Fse=Bse;function zse(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var SL=zse,Use=Mse,Vse=Fse,Wse=SL;function Hse(e){var t=Vse(e);return t.length==1&&t[0][2]?Wse(t[0][0],t[0][1]):function(r){return r===e||Use(r,e,t)}}var qse=Hse;function Kse(e,t){return e!=null&&t in Object(e)}var Yse=Kse,Gse=O3,Xse=OC,Qse=ea,Jse=TC,Zse=RC,eoe=kx;function toe(e,t,r){t=Gse(t,e);for(var n=-1,a=t.length,i=!1;++n<a;){var o=eoe(t[n]);if(!(i=e!=null&&r(e,o)))break;e=e[o]}return i||++n!=a?i:(a=e==null?0:e.length,!!a&&Zse(a)&&Jse(o,a)&&(Qse(e)||Xse(e)))}var roe=toe,noe=Yse,aoe=roe;function ioe(e,t){return e!=null&&aoe(e,t,noe)}var soe=ioe,ooe=MC,loe=T3,coe=soe,uoe=mC,doe=_L,foe=SL,hoe=kx,moe=1,poe=2;function goe(e,t){return uoe(e)&&doe(t)?foe(hoe(e),t):function(r){var n=loe(r,e);return n===void 0&&n===t?coe(r,e):ooe(t,n,moe|poe)}}var voe=goe;function yoe(e){return e}var Xd=yoe;function xoe(e){return function(t){return t==null?void 0:t[e]}}var boe=xoe,woe=wC;function joe(e){return function(t){return woe(t,e)}}var _oe=joe,Soe=boe,Coe=_oe,Noe=mC,Poe=kx;function koe(e){return Noe(e)?Soe(Poe(e)):Coe(e)}var Eoe=koe,Aoe=qse,Ooe=voe,Toe=Xd,Roe=ea,Moe=Eoe;function $oe(e){return typeof e=="function"?e:e==null?Toe:typeof e=="object"?Roe(e)?Ooe(e[0],e[1]):Aoe(e):Moe(e)}var Gi=$oe;function Ioe(e,t,r,n){for(var a=e.length,i=r+(n?1:-1);n?i--:++i<a;)if(t(e[i],i,e))return i;return-1}var CL=Ioe;function Doe(e){return e!==e}var Loe=Doe;function Boe(e,t,r){for(var n=r-1,a=e.length;++n<a;)if(e[n]===t)return n;return-1}var Foe=Boe,zoe=CL,Uoe=Loe,Voe=Foe;function Woe(e,t,r){return t===t?Voe(e,t,r):zoe(e,Uoe,r)}var Hoe=Woe,qoe=Hoe;function Koe(e,t){var r=e==null?0:e.length;return!!r&&qoe(e,t,0)>-1}var Yoe=Koe;function Goe(e,t,r){for(var n=-1,a=e==null?0:e.length;++n<a;)if(r(t,e[n]))return!0;return!1}var Xoe=Goe;function Qoe(){}var Joe=Qoe,Ib=bL,Zoe=Joe,ele=AC,tle=1/0,rle=Ib&&1/ele(new Ib([,-0]))[1]==tle?function(e){return new Ib(e)}:Zoe,nle=rle,ale=uL,ile=Yoe,sle=Xoe,ole=fL,lle=nle,cle=AC,ule=200;function dle(e,t,r){var n=-1,a=ile,i=e.length,o=!0,l=[],c=l;if(r)o=!1,a=sle;else if(i>=ule){var u=t?null:lle(e);if(u)return cle(u);o=!1,a=ole,c=new ale}else c=t?[]:l;e:for(;++n<i;){var d=e[n],f=t?t(d):d;if(d=r||d!==0?d:0,o&&f===f){for(var h=c.length;h--;)if(c[h]===f)continue e;t&&c.push(f),l.push(d)}else a(c,f,r)||(c!==l&&c.push(f),l.push(d))}return l}var fle=dle,hle=Gi,mle=fle;function ple(e,t){return e&&e.length?mle(e,hle(t)):[]}var gle=ple;const sA=It(gle);function NL(e,t,r){return t===!0?sA(e,r):Je(t)?sA(e,t):e}function zu(e){"@babel/helpers - typeof";return zu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zu(e)}var vle=["ref"];function oA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function es(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oA(Object(r),!0).forEach(function(n){Hx(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yle(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lA(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,kL(n.key),n)}}function xle(e,t,r){return t&&lA(e.prototype,t),r&&lA(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function ble(e,t,r){return t=kv(t),wle(e,PL()?Reflect.construct(t,r||[],kv(e).constructor):t.apply(e,r))}function wle(e,t){if(t&&(zu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jle(e)}function jle(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function PL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(PL=function(){return!!e})()}function kv(e){return kv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},kv(e)}function _le(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p1(e,t)}function p1(e,t){return p1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},p1(e,t)}function Hx(e,t,r){return t=kL(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kL(e){var t=Sle(e,"string");return zu(t)=="symbol"?t:t+""}function Sle(e,t){if(zu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(zu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Cle(e,t){if(e==null)return{};var r=Nle(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Nle(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Ple(e){return e.value}function kle(e,t){if($.isValidElement(e))return $.cloneElement(e,t);if(typeof e=="function")return $.createElement(e,t);t.ref;var r=Cle(t,vle);return $.createElement(EC,r)}var cA=1,Vr=function(e){function t(){var r;yle(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=ble(this,t,[].concat(a)),Hx(r,"lastBoundingBox",{width:-1,height:-1}),r}return _le(t,e),xle(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>cA||Math.abs(a.height-this.lastBoundingBox.height)>cA)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,n&&n(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?es({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var a=this.props,i=a.layout,o=a.align,l=a.verticalAlign,c=a.margin,u=a.chartWidth,d=a.chartHeight,f,h;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(o==="center"&&i==="vertical"){var m=this.getBBoxSnapshot();f={left:((u||0)-m.width)/2}}else f=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(l==="middle"){var y=this.getBBoxSnapshot();h={top:((d||0)-y.height)/2}}else h=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return es(es({},f),h)}},{key:"render",value:function(){var n=this,a=this.props,i=a.content,o=a.width,l=a.height,c=a.wrapperStyle,u=a.payloadUniqBy,d=a.payload,f=es(es({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return $.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(m){n.wrapperNode=m}},kle(i,es(es({},this.props),{},{payload:NL(d,u,Ple)})))}}],[{key:"getWithHeight",value:function(n,a){var i=es(es({},this.defaultProps),n.props),o=i.layout;return o==="vertical"&&we(n.props.height)?{height:n.props.height}:o==="horizontal"?{width:n.props.width||a}:null}}])}(w.PureComponent);Hx(Vr,"displayName","Legend");Hx(Vr,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var uA=Zm,Ele=OC,Ale=ea,dA=uA?uA.isConcatSpreadable:void 0;function Ole(e){return Ale(e)||Ele(e)||!!(dA&&e&&e[dA])}var Tle=Ole,Rle=mL,Mle=Tle;function EL(e,t,r,n,a){var i=-1,o=e.length;for(r||(r=Mle),a||(a=[]);++i<o;){var l=e[i];t>0&&r(l)?t>1?EL(l,t-1,r,n,a):Rle(a,l):n||(a[a.length]=l)}return a}var AL=EL;function $le(e){return function(t,r,n){for(var a=-1,i=Object(t),o=n(t),l=o.length;l--;){var c=o[e?l:++a];if(r(i[c],c,i)===!1)break}return t}}var Ile=$le,Dle=Ile,Lle=Dle(),Ble=Lle,Fle=Ble,zle=Wx;function Ule(e,t){return e&&Fle(e,t,zle)}var OL=Ule,Vle=ep;function Wle(e,t){return function(r,n){if(r==null)return r;if(!Vle(r))return e(r,n);for(var a=r.length,i=t?a:-1,o=Object(r);(t?i--:++i<a)&&n(o[i],i,o)!==!1;);return r}}var Hle=Wle,qle=OL,Kle=Hle,Yle=Kle(qle),$C=Yle,Gle=$C,Xle=ep;function Qle(e,t){var r=-1,n=Xle(e)?Array(e.length):[];return Gle(e,function(a,i,o){n[++r]=t(a,i,o)}),n}var TL=Qle;function Jle(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var Zle=Jle,fA=Ud;function ece(e,t){if(e!==t){var r=e!==void 0,n=e===null,a=e===e,i=fA(e),o=t!==void 0,l=t===null,c=t===t,u=fA(t);if(!l&&!u&&!i&&e>t||i&&o&&c&&!l&&!u||n&&o&&c||!r&&c||!a)return 1;if(!n&&!i&&!u&&e<t||u&&r&&a&&!n&&!i||l&&r&&a||!o&&a||!c)return-1}return 0}var tce=ece,rce=tce;function nce(e,t,r){for(var n=-1,a=e.criteria,i=t.criteria,o=a.length,l=r.length;++n<o;){var c=rce(a[n],i[n]);if(c){if(n>=l)return c;var u=r[n];return c*(u=="desc"?-1:1)}}return e.index-t.index}var ace=nce,Db=bC,ice=wC,sce=Gi,oce=TL,lce=Zle,cce=vL,uce=ace,dce=Xd,fce=ea;function hce(e,t,r){t.length?t=Db(t,function(i){return fce(i)?function(o){return ice(o,i.length===1?i[0]:i)}:i}):t=[dce];var n=-1;t=Db(t,cce(sce));var a=oce(e,function(i,o,l){var c=Db(t,function(u){return u(i)});return{criteria:c,index:++n,value:i}});return lce(a,function(i,o){return uce(i,o,r)})}var mce=hce;function pce(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var gce=pce,vce=gce,hA=Math.max;function yce(e,t,r){return t=hA(t===void 0?e.length-1:t,0),function(){for(var n=arguments,a=-1,i=hA(n.length-t,0),o=Array(i);++a<i;)o[a]=n[t+a];a=-1;for(var l=Array(t+1);++a<t;)l[a]=n[a];return l[t]=r(o),vce(e,this,l)}}var xce=yce;function bce(e){return function(){return e}}var wce=bce,jce=ac,_ce=function(){try{var e=jce(Object,"defineProperty");return e({},"",{}),e}catch{}}(),RL=_ce,Sce=wce,mA=RL,Cce=Xd,Nce=mA?function(e,t){return mA(e,"toString",{configurable:!0,enumerable:!1,value:Sce(t),writable:!0})}:Cce,Pce=Nce,kce=800,Ece=16,Ace=Date.now;function Oce(e){var t=0,r=0;return function(){var n=Ace(),a=Ece-(n-r);if(r=n,a>0){if(++t>=kce)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var Tce=Oce,Rce=Pce,Mce=Tce,$ce=Mce(Rce),Ice=$ce,Dce=Xd,Lce=xce,Bce=Ice;function Fce(e,t){return Bce(Lce(e,t,Dce),e+"")}var zce=Fce,Uce=gC,Vce=ep,Wce=TC,Hce=Uo;function qce(e,t,r){if(!Hce(r))return!1;var n=typeof t;return(n=="number"?Vce(r)&&Wce(t,r.length):n=="string"&&t in r)?Uce(r[t],e):!1}var qx=qce,Kce=AL,Yce=mce,Gce=zce,pA=qx,Xce=Gce(function(e,t){if(e==null)return[];var r=t.length;return r>1&&pA(e,t[0],t[1])?t=[]:r>2&&pA(t[0],t[1],t[2])&&(t=[t[0]]),Yce(e,Kce(t,1),[])}),Qce=Xce;const IC=It(Qce);function Xh(e){"@babel/helpers - typeof";return Xh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xh(e)}function g1(){return g1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},g1.apply(this,arguments)}function Jce(e,t){return rue(e)||tue(e,t)||eue(e,t)||Zce()}function Zce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eue(e,t){if(e){if(typeof e=="string")return gA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gA(e,t)}}function gA(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function tue(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function rue(e){if(Array.isArray(e))return e}function vA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Lb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vA(Object(r),!0).forEach(function(n){nue(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nue(e,t,r){return t=aue(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aue(e){var t=iue(e,"string");return Xh(t)=="symbol"?t:t+""}function iue(e,t){if(Xh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Xh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sue(e){return Array.isArray(e)&&rn(e[0])&&rn(e[1])?e.join(" ~ "):e}var oue=function(t){var r=t.separator,n=r===void 0?" : ":r,a=t.contentStyle,i=a===void 0?{}:a,o=t.itemStyle,l=o===void 0?{}:o,c=t.labelStyle,u=c===void 0?{}:c,d=t.payload,f=t.formatter,h=t.itemSorter,m=t.wrapperClassName,y=t.labelClassName,g=t.label,p=t.labelFormatter,v=t.accessibilityLayer,x=v===void 0?!1:v,b=function(){if(d&&d.length){var T={padding:0,margin:0},R=(h?IC(d,h):d).map(function(k,O){if(k.type==="none")return null;var M=Lb({display:"block",paddingTop:4,paddingBottom:4,color:k.color||"#000"},l),D=k.formatter||f||sue,L=k.value,B=k.name,z=L,Z=B;if(D&&z!=null&&Z!=null){var ee=D(L,B,k,O,d);if(Array.isArray(ee)){var le=Jce(ee,2);z=le[0],Z=le[1]}else z=ee}return $.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(O),style:M},rn(Z)?$.createElement("span",{className:"recharts-tooltip-item-name"},Z):null,rn(Z)?$.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,$.createElement("span",{className:"recharts-tooltip-item-value"},z),$.createElement("span",{className:"recharts-tooltip-item-unit"},k.unit||""))});return $.createElement("ul",{className:"recharts-tooltip-item-list",style:T},R)}return null},_=Lb({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),j=Lb({margin:0},u),S=!Qe(g),C=S?g:"",P=ct("recharts-default-tooltip",m),N=ct("recharts-tooltip-label",y);S&&p&&d!==void 0&&d!==null&&(C=p(g,d));var E=x?{role:"status","aria-live":"assertive"}:{};return $.createElement("div",g1({className:P,style:_},E),$.createElement("p",{className:N,style:j},$.isValidElement(C)?C:"".concat(C)),b())};function Qh(e){"@babel/helpers - typeof";return Qh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qh(e)}function Up(e,t,r){return t=lue(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lue(e){var t=cue(e,"string");return Qh(t)=="symbol"?t:t+""}function cue(e,t){if(Qh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Qh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var yf="recharts-tooltip-wrapper",uue={visibility:"hidden"};function due(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return ct(yf,Up(Up(Up(Up({},"".concat(yf,"-right"),we(r)&&t&&we(t.x)&&r>=t.x),"".concat(yf,"-left"),we(r)&&t&&we(t.x)&&r<t.x),"".concat(yf,"-bottom"),we(n)&&t&&we(t.y)&&n>=t.y),"".concat(yf,"-top"),we(n)&&t&&we(t.y)&&n<t.y))}function yA(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,a=e.offsetTopLeft,i=e.position,o=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,u=e.viewBoxDimension;if(i&&we(i[n]))return i[n];var d=r[n]-l-a,f=r[n]+a;if(t[n])return o[n]?d:f;if(o[n]){var h=d,m=c[n];return h<m?Math.max(f,c[n]):Math.max(d,c[n])}var y=f+l,g=c[n]+u;return y>g?Math.max(d,c[n]):Math.max(f,c[n])}function fue(e){var t=e.translateX,r=e.translateY,n=e.useTranslate3d;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function hue(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.offsetTopLeft,a=e.position,i=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,u,d,f;return o.height>0&&o.width>0&&r?(d=yA({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),f=yA({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=fue({translateX:d,translateY:f,useTranslate3d:l})):u=uue,{cssProperties:u,cssClasses:due({translateX:d,translateY:f,coordinate:r})}}function Uu(e){"@babel/helpers - typeof";return Uu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Uu(e)}function xA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function bA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xA(Object(r),!0).forEach(function(n){y1(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pue(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,$L(n.key),n)}}function gue(e,t,r){return t&&pue(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function vue(e,t,r){return t=Ev(t),yue(e,ML()?Reflect.construct(t,r||[],Ev(e).constructor):t.apply(e,r))}function yue(e,t){if(t&&(Uu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xue(e)}function xue(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ML(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ML=function(){return!!e})()}function Ev(e){return Ev=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ev(e)}function bue(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v1(e,t)}function v1(e,t){return v1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},v1(e,t)}function y1(e,t,r){return t=$L(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $L(e){var t=wue(e,"string");return Uu(t)=="symbol"?t:t+""}function wue(e,t){if(Uu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Uu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wA=1,jue=function(e){function t(){var r;mue(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=vue(this,t,[].concat(a)),y1(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),y1(r,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,u,d;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=r.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(d=r.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),r}return bue(t,e),gue(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>wA||Math.abs(n.height-this.state.lastBoundingBox.height)>wA)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.children,d=a.coordinate,f=a.hasPayload,h=a.isAnimationActive,m=a.offset,y=a.position,g=a.reverseDirection,p=a.useTranslate3d,v=a.viewBox,x=a.wrapperStyle,b=hue({allowEscapeViewBox:o,coordinate:d,offsetTopLeft:m,position:y,reverseDirection:g,tooltipBox:this.state.lastBoundingBox,useTranslate3d:p,viewBox:v}),_=b.cssClasses,j=b.cssProperties,S=bA(bA({transition:h&&i?"transform ".concat(l,"ms ").concat(c):void 0},j),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&f?"visible":"hidden",position:"absolute",top:0,left:0},x);return $.createElement("div",{tabIndex:-1,className:_,style:S,ref:function(P){n.wrapperNode=P}},u)}}])}(w.PureComponent),_ue=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Ta={isSsr:_ue(),get:function(t){return Ta[t]},set:function(t,r){if(typeof t=="string")Ta[t]=r;else{var n=Object.keys(t);n&&n.length&&n.forEach(function(a){Ta[a]=t[a]})}}};function Vu(e){"@babel/helpers - typeof";return Vu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vu(e)}function jA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function _A(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jA(Object(r),!0).forEach(function(n){DC(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Sue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Cue(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,DL(n.key),n)}}function Nue(e,t,r){return t&&Cue(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Pue(e,t,r){return t=Av(t),kue(e,IL()?Reflect.construct(t,r||[],Av(e).constructor):t.apply(e,r))}function kue(e,t){if(t&&(Vu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Eue(e)}function Eue(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function IL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(IL=function(){return!!e})()}function Av(e){return Av=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Av(e)}function Aue(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x1(e,t)}function x1(e,t){return x1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},x1(e,t)}function DC(e,t,r){return t=DL(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DL(e){var t=Oue(e,"string");return Vu(t)=="symbol"?t:t+""}function Oue(e,t){if(Vu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Vu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Tue(e){return e.dataKey}function Rue(e,t){return $.isValidElement(e)?$.cloneElement(e,t):typeof e=="function"?$.createElement(e,t):$.createElement(oue,t)}var $t=function(e){function t(){return Sue(this,t),Pue(this,t,arguments)}return Aue(t,e),Nue(t,[{key:"render",value:function(){var n=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.content,d=a.coordinate,f=a.filterNull,h=a.isAnimationActive,m=a.offset,y=a.payload,g=a.payloadUniqBy,p=a.position,v=a.reverseDirection,x=a.useTranslate3d,b=a.viewBox,_=a.wrapperStyle,j=y??[];f&&j.length&&(j=NL(y.filter(function(C){return C.value!=null&&(C.hide!==!0||n.props.includeHidden)}),g,Tue));var S=j.length>0;return $.createElement(jue,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:h,active:i,coordinate:d,hasPayload:S,offset:m,position:p,reverseDirection:v,useTranslate3d:x,viewBox:b,wrapperStyle:_},Rue(u,_A(_A({},this.props),{},{payload:j})))}}])}(w.PureComponent);DC($t,"displayName","Tooltip");DC($t,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Ta.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var Mue=Yi,$ue=function(){return Mue.Date.now()},Iue=$ue,Due=/\s/;function Lue(e){for(var t=e.length;t--&&Due.test(e.charAt(t)););return t}var Bue=Lue,Fue=Bue,zue=/^\s+/;function Uue(e){return e&&e.slice(0,Fue(e)+1).replace(zue,"")}var Vue=Uue,Wue=Vue,SA=Uo,Hue=Ud,CA=NaN,que=/^[-+]0x[0-9a-f]+$/i,Kue=/^0b[01]+$/i,Yue=/^0o[0-7]+$/i,Gue=parseInt;function Xue(e){if(typeof e=="number")return e;if(Hue(e))return CA;if(SA(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=SA(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Wue(e);var r=Kue.test(e);return r||Yue.test(e)?Gue(e.slice(2),r?2:8):que.test(e)?CA:+e}var LL=Xue,Que=Uo,Bb=Iue,NA=LL,Jue="Expected a function",Zue=Math.max,ede=Math.min;function tde(e,t,r){var n,a,i,o,l,c,u=0,d=!1,f=!1,h=!0;if(typeof e!="function")throw new TypeError(Jue);t=NA(t)||0,Que(r)&&(d=!!r.leading,f="maxWait"in r,i=f?Zue(NA(r.maxWait)||0,t):i,h="trailing"in r?!!r.trailing:h);function m(S){var C=n,P=a;return n=a=void 0,u=S,o=e.apply(P,C),o}function y(S){return u=S,l=setTimeout(v,t),d?m(S):o}function g(S){var C=S-c,P=S-u,N=t-C;return f?ede(N,i-P):N}function p(S){var C=S-c,P=S-u;return c===void 0||C>=t||C<0||f&&P>=i}function v(){var S=Bb();if(p(S))return x(S);l=setTimeout(v,g(S))}function x(S){return l=void 0,h&&n?m(S):(n=a=void 0,o)}function b(){l!==void 0&&clearTimeout(l),u=0,n=c=a=l=void 0}function _(){return l===void 0?o:x(Bb())}function j(){var S=Bb(),C=p(S);if(n=arguments,a=this,c=S,C){if(l===void 0)return y(c);if(f)return clearTimeout(l),l=setTimeout(v,t),m(c)}return l===void 0&&(l=setTimeout(v,t)),o}return j.cancel=b,j.flush=_,j}var rde=tde,nde=rde,ade=Uo,ide="Expected a function";function sde(e,t,r){var n=!0,a=!0;if(typeof e!="function")throw new TypeError(ide);return ade(r)&&(n="leading"in r?!!r.leading:n,a="trailing"in r?!!r.trailing:a),nde(e,t,{leading:n,maxWait:t,trailing:a})}var ode=sde;const BL=It(ode);function Jh(e){"@babel/helpers - typeof";return Jh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jh(e)}function PA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Vp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PA(Object(r),!0).forEach(function(n){lde(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lde(e,t,r){return t=cde(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cde(e){var t=ude(e,"string");return Jh(t)=="symbol"?t:t+""}function ude(e,t){if(Jh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Jh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dde(e,t){return pde(e)||mde(e,t)||hde(e,t)||fde()}function fde(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hde(e,t){if(e){if(typeof e=="string")return kA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kA(e,t)}}function kA(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function mde(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function pde(e){if(Array.isArray(e))return e}var Wr=w.forwardRef(function(e,t){var r=e.aspect,n=e.initialDimension,a=n===void 0?{width:-1,height:-1}:n,i=e.width,o=i===void 0?"100%":i,l=e.height,c=l===void 0?"100%":l,u=e.minWidth,d=u===void 0?0:u,f=e.minHeight,h=e.maxHeight,m=e.children,y=e.debounce,g=y===void 0?0:y,p=e.id,v=e.className,x=e.onResize,b=e.style,_=b===void 0?{}:b,j=w.useRef(null),S=w.useRef();S.current=x,w.useImperativeHandle(t,function(){return Object.defineProperty(j.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),j.current},configurable:!0})});var C=w.useState({containerWidth:a.width,containerHeight:a.height}),P=dde(C,2),N=P[0],E=P[1],A=w.useCallback(function(R,k){E(function(O){var M=Math.round(R),D=Math.round(k);return O.containerWidth===M&&O.containerHeight===D?O:{containerWidth:M,containerHeight:D}})},[]);w.useEffect(function(){var R=function(B){var z,Z=B[0].contentRect,ee=Z.width,le=Z.height;A(ee,le),(z=S.current)===null||z===void 0||z.call(S,ee,le)};g>0&&(R=BL(R,g,{trailing:!0,leading:!1}));var k=new ResizeObserver(R),O=j.current.getBoundingClientRect(),M=O.width,D=O.height;return A(M,D),k.observe(j.current),function(){k.disconnect()}},[A,g]);var T=w.useMemo(function(){var R=N.containerWidth,k=N.containerHeight;if(R<0||k<0)return null;di(yl(o)||yl(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),di(!r||r>0,"The aspect(%s) must be greater than zero.",r);var O=yl(o)?R:o,M=yl(c)?k:c;r&&r>0&&(O?M=O/r:M&&(O=M*r),h&&M>h&&(M=h)),di(O>0||M>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,O,M,o,c,d,f,r);var D=!Array.isArray(m)&&gs(m.type).endsWith("Chart");return $.Children.map(m,function(L){return $.isValidElement(L)?w.cloneElement(L,Vp({width:O,height:M},D?{style:Vp({height:"100%",width:"100%",maxHeight:M,maxWidth:O},L.props.style)}:{})):L})},[r,m,c,h,f,d,N,o]);return $.createElement("div",{id:p?"".concat(p):void 0,className:ct("recharts-responsive-container",v),style:Vp(Vp({},_),{},{width:o,height:c,minWidth:d,minHeight:f,maxHeight:h}),ref:j},T)}),ic=function(t){return null};ic.displayName="Cell";function Zh(e){"@babel/helpers - typeof";return Zh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zh(e)}function EA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function b1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?EA(Object(r),!0).forEach(function(n){gde(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gde(e,t,r){return t=vde(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vde(e){var t=yde(e,"string");return Zh(t)=="symbol"?t:t+""}function yde(e,t){if(Zh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Zh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var yc={widthCache:{},cacheCount:0},xde=2e3,bde={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},AA="recharts_measurement_span";function wde(e){var t=b1({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var th=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Ta.isSsr)return{width:0,height:0};var n=wde(r),a=JSON.stringify({text:t,copyStyle:n});if(yc.widthCache[a])return yc.widthCache[a];try{var i=document.getElementById(AA);i||(i=document.createElement("span"),i.setAttribute("id",AA),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=b1(b1({},bde),n);Object.assign(i.style,o),i.textContent="".concat(t);var l=i.getBoundingClientRect(),c={width:l.width,height:l.height};return yc.widthCache[a]=c,++yc.cacheCount>xde&&(yc.cacheCount=0,yc.widthCache={}),c}catch{return{width:0,height:0}}},jde=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function em(e){"@babel/helpers - typeof";return em=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},em(e)}function Ov(e,t){return Nde(e)||Cde(e,t)||Sde(e,t)||_de()}function _de(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Sde(e,t){if(e){if(typeof e=="string")return OA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return OA(e,t)}}function OA(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Cde(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Nde(e){if(Array.isArray(e))return e}function Pde(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function TA(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ede(n.key),n)}}function kde(e,t,r){return t&&TA(e.prototype,t),r&&TA(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ede(e){var t=Ade(e,"string");return em(t)=="symbol"?t:t+""}function Ade(e,t){if(em(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(em(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var RA=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,MA=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Ode=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Tde=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,FL={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Rde=Object.keys(FL),Qc="NaN";function Mde(e,t){return e*FL[t]}var Wp=function(){function e(t,r){Pde(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!Ode.test(r)&&(this.num=NaN,this.unit=""),Rde.includes(r)&&(this.num=Mde(t,r),this.unit="px")}return kde(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,a=(n=Tde.exec(r))!==null&&n!==void 0?n:[],i=Ov(a,3),o=i[1],l=i[2];return new e(parseFloat(o),l??"")}}])}();function zL(e){if(e.includes(Qc))return Qc;for(var t=e;t.includes("*")||t.includes("/");){var r,n=(r=RA.exec(t))!==null&&r!==void 0?r:[],a=Ov(n,4),i=a[1],o=a[2],l=a[3],c=Wp.parse(i??""),u=Wp.parse(l??""),d=o==="*"?c.multiply(u):c.divide(u);if(d.isNaN())return Qc;t=t.replace(RA,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var f,h=(f=MA.exec(t))!==null&&f!==void 0?f:[],m=Ov(h,4),y=m[1],g=m[2],p=m[3],v=Wp.parse(y??""),x=Wp.parse(p??""),b=g==="+"?v.add(x):v.subtract(x);if(b.isNaN())return Qc;t=t.replace(MA,b.toString())}return t}var $A=/\(([^()]*)\)/;function $de(e){for(var t=e;t.includes("(");){var r=$A.exec(t),n=Ov(r,2),a=n[1];t=t.replace($A,zL(a))}return t}function Ide(e){var t=e.replace(/\s+/g,"");return t=$de(t),t=zL(t),t}function Dde(e){try{return Ide(e)}catch{return Qc}}function Fb(e){var t=Dde(e.slice(5,-1));return t===Qc?"":t}var Lde=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Bde=["dx","dy","angle","className","breakAll"];function w1(){return w1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},w1.apply(this,arguments)}function IA(e,t){if(e==null)return{};var r=Fde(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Fde(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function DA(e,t){return Wde(e)||Vde(e,t)||Ude(e,t)||zde()}function zde(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ude(e,t){if(e){if(typeof e=="string")return LA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return LA(e,t)}}function LA(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Vde(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Wde(e){if(Array.isArray(e))return e}var UL=/[ \f\n\r\t\v\u2028\u2029]+/,VL=function(t){var r=t.children,n=t.breakAll,a=t.style;try{var i=[];Qe(r)||(n?i=r.toString().split(""):i=r.toString().split(UL));var o=i.map(function(c){return{word:c,width:th(c,a).width}}),l=n?0:th("",a).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},Hde=function(t,r,n,a,i){var o=t.maxLines,l=t.children,c=t.style,u=t.breakAll,d=we(o),f=l,h=function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return O.reduce(function(M,D){var L=D.word,B=D.width,z=M[M.length-1];if(z&&(a==null||i||z.width+B+n<Number(a)))z.words.push(L),z.width+=B+n;else{var Z={words:[L],width:B};M.push(Z)}return M},[])},m=h(r),y=function(O){return O.reduce(function(M,D){return M.width>D.width?M:D})};if(!d)return m;for(var g="",p=function(O){var M=f.slice(0,O),D=VL({breakAll:u,style:c,children:M+g}).wordsWithComputedWidth,L=h(D),B=L.length>o||y(L).width>Number(a);return[B,L]},v=0,x=f.length-1,b=0,_;v<=x&&b<=f.length-1;){var j=Math.floor((v+x)/2),S=j-1,C=p(S),P=DA(C,2),N=P[0],E=P[1],A=p(j),T=DA(A,1),R=T[0];if(!N&&!R&&(v=j+1),N&&R&&(x=j-1),!N&&R){_=E;break}b++}return _||m},BA=function(t){var r=Qe(t)?[]:t.toString().split(UL);return[{words:r}]},qde=function(t){var r=t.width,n=t.scaleToFit,a=t.children,i=t.style,o=t.breakAll,l=t.maxLines;if((r||n)&&!Ta.isSsr){var c,u,d=VL({breakAll:o,children:a,style:i});if(d){var f=d.wordsWithComputedWidth,h=d.spaceWidth;c=f,u=h}else return BA(a);return Hde({breakAll:o,children:a,maxLines:l,style:i},c,u,r,n)}return BA(a)},FA="#808080",Wl=function(t){var r=t.x,n=r===void 0?0:r,a=t.y,i=a===void 0?0:a,o=t.lineHeight,l=o===void 0?"1em":o,c=t.capHeight,u=c===void 0?"0.71em":c,d=t.scaleToFit,f=d===void 0?!1:d,h=t.textAnchor,m=h===void 0?"start":h,y=t.verticalAnchor,g=y===void 0?"end":y,p=t.fill,v=p===void 0?FA:p,x=IA(t,Lde),b=w.useMemo(function(){return qde({breakAll:x.breakAll,children:x.children,maxLines:x.maxLines,scaleToFit:f,style:x.style,width:x.width})},[x.breakAll,x.children,x.maxLines,f,x.style,x.width]),_=x.dx,j=x.dy,S=x.angle,C=x.className,P=x.breakAll,N=IA(x,Bde);if(!rn(n)||!rn(i))return null;var E=n+(we(_)?_:0),A=i+(we(j)?j:0),T;switch(g){case"start":T=Fb("calc(".concat(u,")"));break;case"middle":T=Fb("calc(".concat((b.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:T=Fb("calc(".concat(b.length-1," * -").concat(l,")"));break}var R=[];if(f){var k=b[0].width,O=x.width;R.push("scale(".concat((we(O)?O/k:1)/k,")"))}return S&&R.push("rotate(".concat(S,", ").concat(E,", ").concat(A,")")),R.length&&(N.transform=R.join(" ")),$.createElement("text",w1({},Ve(N,!0),{x:E,y:A,className:ct("recharts-text",C),textAnchor:m,fill:v.includes("url")?FA:v}),b.map(function(M,D){var L=M.words.join(P?"":" ");return $.createElement("tspan",{x:E,dy:D===0?T:l,key:"".concat(L,"-").concat(D)},L)}))};function No(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Kde(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function LC(e){let t,r,n;e.length!==2?(t=No,r=(l,c)=>No(e(l),c),n=(l,c)=>e(l)-c):(t=e===No||e===Kde?e:Yde,r=e,n=e);function a(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<0?u=f+1:d=f}while(u<d)}return u}function i(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function o(l,c,u=0,d=l.length){const f=a(l,c,u,d-1);return f>u&&n(l[f-1],c)>-n(l[f],c)?f-1:f}return{left:a,center:o,right:i}}function Yde(){return 0}function WL(e){return e===null?NaN:+e}function*Gde(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const Xde=LC(No),tp=Xde.right;LC(WL).center;class zA extends Map{constructor(t,r=Zde){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(UA(this,t))}has(t){return super.has(UA(this,t))}set(t,r){return super.set(Qde(this,t),r)}delete(t){return super.delete(Jde(this,t))}}function UA({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function Qde({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function Jde({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function Zde(e){return e!==null&&typeof e=="object"?e.valueOf():e}function efe(e=No){if(e===No)return HL;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function HL(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const tfe=Math.sqrt(50),rfe=Math.sqrt(10),nfe=Math.sqrt(2);function Tv(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),i=n/Math.pow(10,a),o=i>=tfe?10:i>=rfe?5:i>=nfe?2:1;let l,c,u;return a<0?(u=Math.pow(10,-a)/o,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,a)*o,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=r&&r<2?Tv(e,t,r*2):[l,c,u]}function j1(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,i,o]=n?Tv(t,e,r):Tv(e,t,r);if(!(i>=a))return[];const l=i-a+1,c=new Array(l);if(n)if(o<0)for(let u=0;u<l;++u)c[u]=(i-u)/-o;else for(let u=0;u<l;++u)c[u]=(i-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(a+u)/-o;else for(let u=0;u<l;++u)c[u]=(a+u)*o;return c}function _1(e,t,r){return t=+t,e=+e,r=+r,Tv(e,t,r)[2]}function S1(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?_1(t,e,r):_1(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function VA(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function WA(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function qL(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?HL:efe(a);n>r;){if(n-r>600){const c=n-r+1,u=t-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),m=Math.max(r,Math.floor(t-u*f/c+h)),y=Math.min(n,Math.floor(t+(c-u)*f/c+h));qL(e,t,m,y,a)}const i=e[t];let o=r,l=n;for(xf(e,r,t),a(e[n],i)>0&&xf(e,r,n);o<l;){for(xf(e,o,l),++o,--l;a(e[o],i)<0;)++o;for(;a(e[l],i)>0;)--l}a(e[r],i)===0?xf(e,r,l):(++l,xf(e,l,n)),l<=t&&(r=l+1),t<=l&&(n=l-1)}return e}function xf(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function afe(e,t,r){if(e=Float64Array.from(Gde(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return WA(e);if(t>=1)return VA(e);var n,a=(n-1)*t,i=Math.floor(a),o=VA(qL(e,i).subarray(0,i+1)),l=WA(e.subarray(i+1));return o+(l-o)*(a-i)}}function ife(e,t,r=WL){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,i=Math.floor(a),o=+r(e[i],i,e),l=+r(e[i+1],i+1,e);return o+(l-o)*(a-i)}}function sfe(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(a);++n<a;)i[n]=e+n*r;return i}function Ba(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Is(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const C1=Symbol("implicit");function BC(){var e=new zA,t=[],r=[],n=C1;function a(i){let o=e.get(i);if(o===void 0){if(n!==C1)return n;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new zA;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return a},a.range=function(i){return arguments.length?(r=Array.from(i),a):r.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return BC(t,r).unknown(n)},Ba.apply(a,arguments),a}function tm(){var e=BC().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,i,o,l=!1,c=0,u=0,d=.5;delete e.unknown;function f(){var h=t().length,m=a<n,y=m?a:n,g=m?n:a;i=(g-y)/Math.max(1,h-c+u*2),l&&(i=Math.floor(i)),y+=(g-y-i*(h-c))*d,o=i*(1-c),l&&(y=Math.round(y),o=Math.round(o));var p=sfe(h).map(function(v){return y+i*v});return r(m?p.reverse():p)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([n,a]=h,n=+n,a=+a,f()):[n,a]},e.rangeRound=function(h){return[n,a]=h,n=+n,a=+a,l=!0,f()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(h){return arguments.length?(l=!!h,f()):l},e.padding=function(h){return arguments.length?(c=Math.min(1,u=+h),f()):c},e.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),f()):c},e.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},e.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),f()):d},e.copy=function(){return tm(t(),[n,a]).round(l).paddingInner(c).paddingOuter(u).align(d)},Ba.apply(f(),arguments)}function KL(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return KL(t())},e}function rh(){return KL(tm.apply(null,arguments).paddingInner(1))}function FC(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function YL(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function rp(){}var rm=.7,Rv=1/rm,hu="\\s*([+-]?\\d+)\\s*",nm="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",zi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ofe=/^#([0-9a-f]{3,8})$/,lfe=new RegExp(`^rgb\\(${hu},${hu},${hu}\\)$`),cfe=new RegExp(`^rgb\\(${zi},${zi},${zi}\\)$`),ufe=new RegExp(`^rgba\\(${hu},${hu},${hu},${nm}\\)$`),dfe=new RegExp(`^rgba\\(${zi},${zi},${zi},${nm}\\)$`),ffe=new RegExp(`^hsl\\(${nm},${zi},${zi}\\)$`),hfe=new RegExp(`^hsla\\(${nm},${zi},${zi},${nm}\\)$`),HA={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};FC(rp,am,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:qA,formatHex:qA,formatHex8:mfe,formatHsl:pfe,formatRgb:KA,toString:KA});function qA(){return this.rgb().formatHex()}function mfe(){return this.rgb().formatHex8()}function pfe(){return GL(this).formatHsl()}function KA(){return this.rgb().formatRgb()}function am(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=ofe.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?YA(t):r===3?new Yn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Hp(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Hp(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=lfe.exec(e))?new Yn(t[1],t[2],t[3],1):(t=cfe.exec(e))?new Yn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=ufe.exec(e))?Hp(t[1],t[2],t[3],t[4]):(t=dfe.exec(e))?Hp(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=ffe.exec(e))?QA(t[1],t[2]/100,t[3]/100,1):(t=hfe.exec(e))?QA(t[1],t[2]/100,t[3]/100,t[4]):HA.hasOwnProperty(e)?YA(HA[e]):e==="transparent"?new Yn(NaN,NaN,NaN,0):null}function YA(e){return new Yn(e>>16&255,e>>8&255,e&255,1)}function Hp(e,t,r,n){return n<=0&&(e=t=r=NaN),new Yn(e,t,r,n)}function gfe(e){return e instanceof rp||(e=am(e)),e?(e=e.rgb(),new Yn(e.r,e.g,e.b,e.opacity)):new Yn}function N1(e,t,r,n){return arguments.length===1?gfe(e):new Yn(e,t,r,n??1)}function Yn(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}FC(Yn,N1,YL(rp,{brighter(e){return e=e==null?Rv:Math.pow(Rv,e),new Yn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?rm:Math.pow(rm,e),new Yn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Yn(Tl(this.r),Tl(this.g),Tl(this.b),Mv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:GA,formatHex:GA,formatHex8:vfe,formatRgb:XA,toString:XA}));function GA(){return`#${xl(this.r)}${xl(this.g)}${xl(this.b)}`}function vfe(){return`#${xl(this.r)}${xl(this.g)}${xl(this.b)}${xl((isNaN(this.opacity)?1:this.opacity)*255)}`}function XA(){const e=Mv(this.opacity);return`${e===1?"rgb(":"rgba("}${Tl(this.r)}, ${Tl(this.g)}, ${Tl(this.b)}${e===1?")":`, ${e})`}`}function Mv(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Tl(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function xl(e){return e=Tl(e),(e<16?"0":"")+e.toString(16)}function QA(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new ii(e,t,r,n)}function GL(e){if(e instanceof ii)return new ii(e.h,e.s,e.l,e.opacity);if(e instanceof rp||(e=am(e)),!e)return new ii;if(e instanceof ii)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),i=Math.max(t,r,n),o=NaN,l=i-a,c=(i+a)/2;return l?(t===i?o=(r-n)/l+(r<n)*6:r===i?o=(n-t)/l+2:o=(t-r)/l+4,l/=c<.5?i+a:2-i-a,o*=60):l=c>0&&c<1?0:o,new ii(o,l,c,e.opacity)}function yfe(e,t,r,n){return arguments.length===1?GL(e):new ii(e,t,r,n??1)}function ii(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}FC(ii,yfe,YL(rp,{brighter(e){return e=e==null?Rv:Math.pow(Rv,e),new ii(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?rm:Math.pow(rm,e),new ii(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new Yn(zb(e>=240?e-240:e+120,a,n),zb(e,a,n),zb(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new ii(JA(this.h),qp(this.s),qp(this.l),Mv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Mv(this.opacity);return`${e===1?"hsl(":"hsla("}${JA(this.h)}, ${qp(this.s)*100}%, ${qp(this.l)*100}%${e===1?")":`, ${e})`}`}}));function JA(e){return e=(e||0)%360,e<0?e+360:e}function qp(e){return Math.max(0,Math.min(1,e||0))}function zb(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const zC=e=>()=>e;function xfe(e,t){return function(r){return e+r*t}}function bfe(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function wfe(e){return(e=+e)==1?XL:function(t,r){return r-t?bfe(t,r,e):zC(isNaN(t)?r:t)}}function XL(e,t){var r=t-e;return r?xfe(e,r):zC(isNaN(e)?t:e)}const ZA=function e(t){var r=wfe(t);function n(a,i){var o=r((a=N1(a)).r,(i=N1(i)).r),l=r(a.g,i.g),c=r(a.b,i.b),u=XL(a.opacity,i.opacity);return function(d){return a.r=o(d),a.g=l(d),a.b=c(d),a.opacity=u(d),a+""}}return n.gamma=e,n}(1);function jfe(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(i){for(a=0;a<r;++a)n[a]=e[a]*(1-i)+t[a]*i;return n}}function _fe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Sfe(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)a[o]=Qd(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(l){for(o=0;o<n;++o)i[o]=a[o](l);return i}}function Cfe(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function $v(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function Nfe(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=Qd(e[a],t[a]):n[a]=t[a];return function(i){for(a in r)n[a]=r[a](i);return n}}var P1=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ub=new RegExp(P1.source,"g");function Pfe(e){return function(){return e}}function kfe(e){return function(t){return e(t)+""}}function Efe(e,t){var r=P1.lastIndex=Ub.lastIndex=0,n,a,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(n=P1.exec(e))&&(a=Ub.exec(t));)(i=a.index)>r&&(i=t.slice(r,i),l[o]?l[o]+=i:l[++o]=i),(n=n[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,c.push({i:o,x:$v(n,a)})),r=Ub.lastIndex;return r<t.length&&(i=t.slice(r),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?kfe(c[0].x):Pfe(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}function Qd(e,t){var r=typeof t,n;return t==null||r==="boolean"?zC(t):(r==="number"?$v:r==="string"?(n=am(t))?(t=n,ZA):Efe:t instanceof am?ZA:t instanceof Date?Cfe:_fe(t)?jfe:Array.isArray(t)?Sfe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Nfe:$v)(e,t)}function UC(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function Afe(e,t){t===void 0&&(t=e,e=Qd);for(var r=0,n=t.length-1,a=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(a,a=t[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[l](o-l)}}function Ofe(e){return function(){return e}}function Iv(e){return+e}var eO=[0,1];function In(e){return e}function k1(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:Ofe(isNaN(t)?NaN:.5)}function Tfe(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function Rfe(e,t,r){var n=e[0],a=e[1],i=t[0],o=t[1];return a<n?(n=k1(a,n),i=r(o,i)):(n=k1(n,a),i=r(i,o)),function(l){return i(n(l))}}function Mfe(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),i=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)a[o]=k1(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(l){var c=tp(e,l,1,n)-1;return i[c](a[c](l))}}function np(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Kx(){var e=eO,t=eO,r=Qd,n,a,i,o=In,l,c,u;function d(){var h=Math.min(e.length,t.length);return o!==In&&(o=Tfe(e[0],e[h-1])),l=h>2?Mfe:Rfe,c=u=null,f}function f(h){return h==null||isNaN(h=+h)?i:(c||(c=l(e.map(n),t,r)))(n(o(h)))}return f.invert=function(h){return o(a((u||(u=l(t,e.map(n),$v)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,Iv),d()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),d()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),r=UC,d()},f.clamp=function(h){return arguments.length?(o=h?!0:In,d()):o!==In},f.interpolate=function(h){return arguments.length?(r=h,d()):r},f.unknown=function(h){return arguments.length?(i=h,f):i},function(h,m){return n=h,a=m,d()}}function VC(){return Kx()(In,In)}function $fe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Dv(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Wu(e){return e=Dv(Math.abs(e)),e?e[1]:NaN}function Ife(e,t){return function(r,n){for(var a=r.length,i=[],o=0,l=e[0],c=0;a>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),i.push(r.substring(a-=l,a+l)),!((c+=l+1)>n));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function Dfe(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var Lfe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function im(e){if(!(t=Lfe.exec(e)))throw new Error("invalid format: "+e);var t;return new WC({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}im.prototype=WC.prototype;function WC(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}WC.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Bfe(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var QL;function Ffe(e,t){var r=Dv(e,t);if(!r)return e+"";var n=r[0],a=r[1],i=a-(QL=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+Dv(e,Math.max(0,t+i-1))[0]}function tO(e,t){var r=Dv(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const rO={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:$fe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>tO(e*100,t),r:tO,s:Ffe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function nO(e){return e}var aO=Array.prototype.map,iO=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function zfe(e){var t=e.grouping===void 0||e.thousands===void 0?nO:Ife(aO.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?nO:Dfe(aO.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(f){f=im(f);var h=f.fill,m=f.align,y=f.sign,g=f.symbol,p=f.zero,v=f.width,x=f.comma,b=f.precision,_=f.trim,j=f.type;j==="n"?(x=!0,j="g"):rO[j]||(b===void 0&&(b=12),_=!0,j="g"),(p||h==="0"&&m==="=")&&(p=!0,h="0",m="=");var S=g==="$"?r:g==="#"&&/[boxX]/.test(j)?"0"+j.toLowerCase():"",C=g==="$"?n:/[%p]/.test(j)?o:"",P=rO[j],N=/[defgprs%]/.test(j);b=b===void 0?6:/[gprs]/.test(j)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function E(A){var T=S,R=C,k,O,M;if(j==="c")R=P(A)+R,A="";else{A=+A;var D=A<0||1/A<0;if(A=isNaN(A)?c:P(Math.abs(A),b),_&&(A=Bfe(A)),D&&+A==0&&y!=="+"&&(D=!1),T=(D?y==="("?y:l:y==="-"||y==="("?"":y)+T,R=(j==="s"?iO[8+QL/3]:"")+R+(D&&y==="("?")":""),N){for(k=-1,O=A.length;++k<O;)if(M=A.charCodeAt(k),48>M||M>57){R=(M===46?a+A.slice(k+1):A.slice(k))+R,A=A.slice(0,k);break}}}x&&!p&&(A=t(A,1/0));var L=T.length+A.length+R.length,B=L<v?new Array(v-L+1).join(h):"";switch(x&&p&&(A=t(B+A,B.length?v-R.length:1/0),B=""),m){case"<":A=T+A+R+B;break;case"=":A=T+B+A+R;break;case"^":A=B.slice(0,L=B.length>>1)+T+A+R+B.slice(L);break;default:A=B+T+A+R;break}return i(A)}return E.toString=function(){return f+""},E}function d(f,h){var m=u((f=im(f),f.type="f",f)),y=Math.max(-8,Math.min(8,Math.floor(Wu(h)/3)))*3,g=Math.pow(10,-y),p=iO[8+y/3];return function(v){return m(g*v)+p}}return{format:u,formatPrefix:d}}var Kp,HC,JL;Ufe({thousands:",",grouping:[3],currency:["$",""]});function Ufe(e){return Kp=zfe(e),HC=Kp.format,JL=Kp.formatPrefix,Kp}function Vfe(e){return Math.max(0,-Wu(Math.abs(e)))}function Wfe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Wu(t)/3)))*3-Wu(Math.abs(e)))}function Hfe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Wu(t)-Wu(e))+1}function ZL(e,t,r,n){var a=S1(e,t,r),i;switch(n=im(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=Wfe(a,o))&&(n.precision=i),JL(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=Hfe(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=Vfe(a))&&(n.precision=i-(n.type==="%")*2);break}}return HC(n)}function Wo(e){var t=e.domain;return e.ticks=function(r){var n=t();return j1(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return ZL(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,i=n.length-1,o=n[a],l=n[i],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=a,a=i,i=u);d-- >0;){if(u=_1(o,l,r),u===c)return n[a]=o,n[i]=l,t(n);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function Lv(){var e=VC();return e.copy=function(){return np(e,Lv())},Ba.apply(e,arguments),Wo(e)}function e4(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,Iv),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return e4(e).unknown(t)},e=arguments.length?Array.from(e,Iv):[0,1],Wo(r)}function t4(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],i=e[n],o;return i<a&&(o=r,r=n,n=o,o=a,a=i,i=o),e[r]=t.floor(a),e[n]=t.ceil(i),e}function sO(e){return Math.log(e)}function oO(e){return Math.exp(e)}function qfe(e){return-Math.log(-e)}function Kfe(e){return-Math.exp(-e)}function Yfe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Gfe(e){return e===10?Yfe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Xfe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function lO(e){return(t,r)=>-e(-t,r)}function qC(e){const t=e(sO,oO),r=t.domain;let n=10,a,i;function o(){return a=Xfe(n),i=Gfe(n),r()[0]<0?(a=lO(a),i=lO(i),e(qfe,Kfe)):e(sO,oO),t}return t.base=function(l){return arguments.length?(n=+l,o()):n},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let h=a(u),m=a(d),y,g;const p=l==null?10:+l;let v=[];if(!(n%1)&&m-h<p){if(h=Math.floor(h),m=Math.ceil(m),u>0){for(;h<=m;++h)for(y=1;y<n;++y)if(g=h<0?y/i(-h):y*i(h),!(g<u)){if(g>d)break;v.push(g)}}else for(;h<=m;++h)for(y=n-1;y>=1;--y)if(g=h>0?y/i(-h):y*i(h),!(g<u)){if(g>d)break;v.push(g)}v.length*2<p&&(v=j1(u,d,p))}else v=j1(h,m,Math.min(m-h,p)).map(i);return f?v.reverse():v},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=im(c)).precision==null&&(c.trim=!0),c=HC(c)),l===1/0)return c;const u=Math.max(1,n*l/t.ticks().length);return d=>{let f=d/i(Math.round(a(d)));return f*n<n-.5&&(f*=n),f<=u?c(d):""}},t.nice=()=>r(t4(r(),{floor:l=>i(Math.floor(a(l))),ceil:l=>i(Math.ceil(a(l)))})),t}function r4(){const e=qC(Kx()).domain([1,10]);return e.copy=()=>np(e,r4()).base(e.base()),Ba.apply(e,arguments),e}function cO(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function uO(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function KC(e){var t=1,r=e(cO(t),uO(t));return r.constant=function(n){return arguments.length?e(cO(t=+n),uO(t)):t},Wo(r)}function n4(){var e=KC(Kx());return e.copy=function(){return np(e,n4()).constant(e.constant())},Ba.apply(e,arguments)}function dO(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Qfe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Jfe(e){return e<0?-e*e:e*e}function YC(e){var t=e(In,In),r=1;function n(){return r===1?e(In,In):r===.5?e(Qfe,Jfe):e(dO(r),dO(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},Wo(t)}function GC(){var e=YC(Kx());return e.copy=function(){return np(e,GC()).exponent(e.exponent())},Ba.apply(e,arguments),e}function Zfe(){return GC.apply(null,arguments).exponent(.5)}function fO(e){return Math.sign(e)*e*e}function ehe(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function a4(){var e=VC(),t=[0,1],r=!1,n;function a(i){var o=ehe(e(i));return isNaN(o)?n:r?Math.round(o):o}return a.invert=function(i){return e.invert(fO(i))},a.domain=function(i){return arguments.length?(e.domain(i),a):e.domain()},a.range=function(i){return arguments.length?(e.range((t=Array.from(i,Iv)).map(fO)),a):t.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(r=!!i,a):r},a.clamp=function(i){return arguments.length?(e.clamp(i),a):e.clamp()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return a4(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Ba.apply(a,arguments),Wo(a)}function i4(){var e=[],t=[],r=[],n;function a(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=ife(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?n:t[tp(r,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(No),a()},i.range=function(o){return arguments.length?(t=Array.from(o),a()):t.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return i4().domain(e).range(t).unknown(n)},Ba.apply(i,arguments)}function s4(){var e=0,t=1,r=1,n=[.5],a=[0,1],i;function o(c){return c!=null&&c<=c?a[tp(n,c,0,r)]:i}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,l()):a.slice()},o.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return s4().domain([e,t]).range(a).unknown(i)},Ba.apply(Wo(o),arguments)}function o4(){var e=[.5],t=[0,1],r,n=1;function a(i){return i!=null&&i<=i?t[tp(e,i,0,n)]:r}return a.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return o4().domain(e).range(t).unknown(r)},Ba.apply(a,arguments)}const Vb=new Date,Wb=new Date;function nn(e,t,r,n){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(e(i=new Date(+i)),i),a.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),a.round=i=>{const o=a(i),l=a.ceil(i);return i-o<l-i?o:l},a.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),a.range=(i,o,l)=>{const c=[];if(i=a.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let u;do c.push(u=new Date(+i)),t(i,l),e(i);while(u<i&&i<o);return c},a.filter=i=>nn(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),r&&(a.count=(i,o)=>(Vb.setTime(+i),Wb.setTime(+o),e(Vb),e(Wb),Math.floor(r(Vb,Wb))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(n?o=>n(o)%i===0:o=>a.count(0,o)%i===0):a)),a}const Bv=nn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Bv.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?nn(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Bv);Bv.range;const ds=1e3,Aa=ds*60,fs=Aa*60,Ss=fs*24,XC=Ss*7,hO=Ss*30,Hb=Ss*365,bl=nn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*ds)},(e,t)=>(t-e)/ds,e=>e.getUTCSeconds());bl.range;const QC=nn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ds)},(e,t)=>{e.setTime(+e+t*Aa)},(e,t)=>(t-e)/Aa,e=>e.getMinutes());QC.range;const JC=nn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Aa)},(e,t)=>(t-e)/Aa,e=>e.getUTCMinutes());JC.range;const ZC=nn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ds-e.getMinutes()*Aa)},(e,t)=>{e.setTime(+e+t*fs)},(e,t)=>(t-e)/fs,e=>e.getHours());ZC.range;const eN=nn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*fs)},(e,t)=>(t-e)/fs,e=>e.getUTCHours());eN.range;const ap=nn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Aa)/Ss,e=>e.getDate()-1);ap.range;const Yx=nn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ss,e=>e.getUTCDate()-1);Yx.range;const l4=nn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ss,e=>Math.floor(e/Ss));l4.range;function sc(e){return nn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Aa)/XC)}const Gx=sc(0),Fv=sc(1),the=sc(2),rhe=sc(3),Hu=sc(4),nhe=sc(5),ahe=sc(6);Gx.range;Fv.range;the.range;rhe.range;Hu.range;nhe.range;ahe.range;function oc(e){return nn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/XC)}const Xx=oc(0),zv=oc(1),ihe=oc(2),she=oc(3),qu=oc(4),ohe=oc(5),lhe=oc(6);Xx.range;zv.range;ihe.range;she.range;qu.range;ohe.range;lhe.range;const tN=nn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());tN.range;const rN=nn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());rN.range;const Cs=nn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Cs.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:nn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Cs.range;const Ns=nn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ns.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:nn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Ns.range;function c4(e,t,r,n,a,i){const o=[[bl,1,ds],[bl,5,5*ds],[bl,15,15*ds],[bl,30,30*ds],[i,1,Aa],[i,5,5*Aa],[i,15,15*Aa],[i,30,30*Aa],[a,1,fs],[a,3,3*fs],[a,6,6*fs],[a,12,12*fs],[n,1,Ss],[n,2,2*Ss],[r,1,XC],[t,1,hO],[t,3,3*hO],[e,1,Hb]];function l(u,d,f){const h=d<u;h&&([u,d]=[d,u]);const m=f&&typeof f.range=="function"?f:c(u,d,f),y=m?m.range(u,+d+1):[];return h?y.reverse():y}function c(u,d,f){const h=Math.abs(d-u)/f,m=LC(([,,p])=>p).right(o,h);if(m===o.length)return e.every(S1(u/Hb,d/Hb,f));if(m===0)return Bv.every(Math.max(S1(u,d,f),1));const[y,g]=o[h/o[m-1][2]<o[m][2]/h?m-1:m];return y.every(g)}return[l,c]}const[che,uhe]=c4(Ns,rN,Xx,l4,eN,JC),[dhe,fhe]=c4(Cs,tN,Gx,ap,ZC,QC);function qb(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Kb(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function bf(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function hhe(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,u=wf(a),d=jf(a),f=wf(i),h=jf(i),m=wf(o),y=jf(o),g=wf(l),p=jf(l),v=wf(c),x=jf(c),b={a:D,A:L,b:B,B:z,c:null,d:xO,e:xO,f:Ihe,g:qhe,G:Yhe,H:Rhe,I:Mhe,j:$he,L:u4,m:Dhe,M:Lhe,p:Z,q:ee,Q:jO,s:_O,S:Bhe,u:Fhe,U:zhe,V:Uhe,w:Vhe,W:Whe,x:null,X:null,y:Hhe,Y:Khe,Z:Ghe,"%":wO},_={a:le,A:V,b:I,B:F,c:null,d:bO,e:bO,f:Zhe,g:cme,G:dme,H:Xhe,I:Qhe,j:Jhe,L:f4,m:eme,M:tme,p:q,q:de,Q:jO,s:_O,S:rme,u:nme,U:ame,V:ime,w:sme,W:ome,x:null,X:null,y:lme,Y:ume,Z:fme,"%":wO},j={a:E,A,b:T,B:R,c:k,d:vO,e:vO,f:Ehe,g:gO,G:pO,H:yO,I:yO,j:Che,L:khe,m:She,M:Nhe,p:N,q:_he,Q:Ohe,s:The,S:Phe,u:yhe,U:xhe,V:bhe,w:vhe,W:whe,x:O,X:M,y:gO,Y:pO,Z:jhe,"%":Ahe};b.x=S(r,b),b.X=S(n,b),b.c=S(t,b),_.x=S(r,_),_.X=S(n,_),_.c=S(t,_);function S(re,H){return function(Y){var G=[],J=-1,ge=0,Ce=re.length,$e,Ge,dt;for(Y instanceof Date||(Y=new Date(+Y));++J<Ce;)re.charCodeAt(J)===37&&(G.push(re.slice(ge,J)),(Ge=mO[$e=re.charAt(++J)])!=null?$e=re.charAt(++J):Ge=$e==="e"?" ":"0",(dt=H[$e])&&($e=dt(Y,Ge)),G.push($e),ge=J+1);return G.push(re.slice(ge,J)),G.join("")}}function C(re,H){return function(Y){var G=bf(1900,void 0,1),J=P(G,re,Y+="",0),ge,Ce;if(J!=Y.length)return null;if("Q"in G)return new Date(G.Q);if("s"in G)return new Date(G.s*1e3+("L"in G?G.L:0));if(H&&!("Z"in G)&&(G.Z=0),"p"in G&&(G.H=G.H%12+G.p*12),G.m===void 0&&(G.m="q"in G?G.q:0),"V"in G){if(G.V<1||G.V>53)return null;"w"in G||(G.w=1),"Z"in G?(ge=Kb(bf(G.y,0,1)),Ce=ge.getUTCDay(),ge=Ce>4||Ce===0?zv.ceil(ge):zv(ge),ge=Yx.offset(ge,(G.V-1)*7),G.y=ge.getUTCFullYear(),G.m=ge.getUTCMonth(),G.d=ge.getUTCDate()+(G.w+6)%7):(ge=qb(bf(G.y,0,1)),Ce=ge.getDay(),ge=Ce>4||Ce===0?Fv.ceil(ge):Fv(ge),ge=ap.offset(ge,(G.V-1)*7),G.y=ge.getFullYear(),G.m=ge.getMonth(),G.d=ge.getDate()+(G.w+6)%7)}else("W"in G||"U"in G)&&("w"in G||(G.w="u"in G?G.u%7:"W"in G?1:0),Ce="Z"in G?Kb(bf(G.y,0,1)).getUTCDay():qb(bf(G.y,0,1)).getDay(),G.m=0,G.d="W"in G?(G.w+6)%7+G.W*7-(Ce+5)%7:G.w+G.U*7-(Ce+6)%7);return"Z"in G?(G.H+=G.Z/100|0,G.M+=G.Z%100,Kb(G)):qb(G)}}function P(re,H,Y,G){for(var J=0,ge=H.length,Ce=Y.length,$e,Ge;J<ge;){if(G>=Ce)return-1;if($e=H.charCodeAt(J++),$e===37){if($e=H.charAt(J++),Ge=j[$e in mO?H.charAt(J++):$e],!Ge||(G=Ge(re,Y,G))<0)return-1}else if($e!=Y.charCodeAt(G++))return-1}return G}function N(re,H,Y){var G=u.exec(H.slice(Y));return G?(re.p=d.get(G[0].toLowerCase()),Y+G[0].length):-1}function E(re,H,Y){var G=m.exec(H.slice(Y));return G?(re.w=y.get(G[0].toLowerCase()),Y+G[0].length):-1}function A(re,H,Y){var G=f.exec(H.slice(Y));return G?(re.w=h.get(G[0].toLowerCase()),Y+G[0].length):-1}function T(re,H,Y){var G=v.exec(H.slice(Y));return G?(re.m=x.get(G[0].toLowerCase()),Y+G[0].length):-1}function R(re,H,Y){var G=g.exec(H.slice(Y));return G?(re.m=p.get(G[0].toLowerCase()),Y+G[0].length):-1}function k(re,H,Y){return P(re,t,H,Y)}function O(re,H,Y){return P(re,r,H,Y)}function M(re,H,Y){return P(re,n,H,Y)}function D(re){return o[re.getDay()]}function L(re){return i[re.getDay()]}function B(re){return c[re.getMonth()]}function z(re){return l[re.getMonth()]}function Z(re){return a[+(re.getHours()>=12)]}function ee(re){return 1+~~(re.getMonth()/3)}function le(re){return o[re.getUTCDay()]}function V(re){return i[re.getUTCDay()]}function I(re){return c[re.getUTCMonth()]}function F(re){return l[re.getUTCMonth()]}function q(re){return a[+(re.getUTCHours()>=12)]}function de(re){return 1+~~(re.getUTCMonth()/3)}return{format:function(re){var H=S(re+="",b);return H.toString=function(){return re},H},parse:function(re){var H=C(re+="",!1);return H.toString=function(){return re},H},utcFormat:function(re){var H=S(re+="",_);return H.toString=function(){return re},H},utcParse:function(re){var H=C(re+="",!0);return H.toString=function(){return re},H}}}var mO={"-":"",_:" ",0:"0"},dn=/^\s*\d+/,mhe=/^%/,phe=/[\\^$*+?|[\]().{}]/g;function Tt(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(t)+a:a)}function ghe(e){return e.replace(phe,"\\$&")}function wf(e){return new RegExp("^(?:"+e.map(ghe).join("|")+")","i")}function jf(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function vhe(e,t,r){var n=dn.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function yhe(e,t,r){var n=dn.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function xhe(e,t,r){var n=dn.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function bhe(e,t,r){var n=dn.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function whe(e,t,r){var n=dn.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function pO(e,t,r){var n=dn.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function gO(e,t,r){var n=dn.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function jhe(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function _he(e,t,r){var n=dn.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function She(e,t,r){var n=dn.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function vO(e,t,r){var n=dn.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function Che(e,t,r){var n=dn.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function yO(e,t,r){var n=dn.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function Nhe(e,t,r){var n=dn.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function Phe(e,t,r){var n=dn.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function khe(e,t,r){var n=dn.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function Ehe(e,t,r){var n=dn.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function Ahe(e,t,r){var n=mhe.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function Ohe(e,t,r){var n=dn.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function The(e,t,r){var n=dn.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function xO(e,t){return Tt(e.getDate(),t,2)}function Rhe(e,t){return Tt(e.getHours(),t,2)}function Mhe(e,t){return Tt(e.getHours()%12||12,t,2)}function $he(e,t){return Tt(1+ap.count(Cs(e),e),t,3)}function u4(e,t){return Tt(e.getMilliseconds(),t,3)}function Ihe(e,t){return u4(e,t)+"000"}function Dhe(e,t){return Tt(e.getMonth()+1,t,2)}function Lhe(e,t){return Tt(e.getMinutes(),t,2)}function Bhe(e,t){return Tt(e.getSeconds(),t,2)}function Fhe(e){var t=e.getDay();return t===0?7:t}function zhe(e,t){return Tt(Gx.count(Cs(e)-1,e),t,2)}function d4(e){var t=e.getDay();return t>=4||t===0?Hu(e):Hu.ceil(e)}function Uhe(e,t){return e=d4(e),Tt(Hu.count(Cs(e),e)+(Cs(e).getDay()===4),t,2)}function Vhe(e){return e.getDay()}function Whe(e,t){return Tt(Fv.count(Cs(e)-1,e),t,2)}function Hhe(e,t){return Tt(e.getFullYear()%100,t,2)}function qhe(e,t){return e=d4(e),Tt(e.getFullYear()%100,t,2)}function Khe(e,t){return Tt(e.getFullYear()%1e4,t,4)}function Yhe(e,t){var r=e.getDay();return e=r>=4||r===0?Hu(e):Hu.ceil(e),Tt(e.getFullYear()%1e4,t,4)}function Ghe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Tt(t/60|0,"0",2)+Tt(t%60,"0",2)}function bO(e,t){return Tt(e.getUTCDate(),t,2)}function Xhe(e,t){return Tt(e.getUTCHours(),t,2)}function Qhe(e,t){return Tt(e.getUTCHours()%12||12,t,2)}function Jhe(e,t){return Tt(1+Yx.count(Ns(e),e),t,3)}function f4(e,t){return Tt(e.getUTCMilliseconds(),t,3)}function Zhe(e,t){return f4(e,t)+"000"}function eme(e,t){return Tt(e.getUTCMonth()+1,t,2)}function tme(e,t){return Tt(e.getUTCMinutes(),t,2)}function rme(e,t){return Tt(e.getUTCSeconds(),t,2)}function nme(e){var t=e.getUTCDay();return t===0?7:t}function ame(e,t){return Tt(Xx.count(Ns(e)-1,e),t,2)}function h4(e){var t=e.getUTCDay();return t>=4||t===0?qu(e):qu.ceil(e)}function ime(e,t){return e=h4(e),Tt(qu.count(Ns(e),e)+(Ns(e).getUTCDay()===4),t,2)}function sme(e){return e.getUTCDay()}function ome(e,t){return Tt(zv.count(Ns(e)-1,e),t,2)}function lme(e,t){return Tt(e.getUTCFullYear()%100,t,2)}function cme(e,t){return e=h4(e),Tt(e.getUTCFullYear()%100,t,2)}function ume(e,t){return Tt(e.getUTCFullYear()%1e4,t,4)}function dme(e,t){var r=e.getUTCDay();return e=r>=4||r===0?qu(e):qu.ceil(e),Tt(e.getUTCFullYear()%1e4,t,4)}function fme(){return"+0000"}function wO(){return"%"}function jO(e){return+e}function _O(e){return Math.floor(+e/1e3)}var xc,m4,p4;hme({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function hme(e){return xc=hhe(e),m4=xc.format,xc.parse,p4=xc.utcFormat,xc.utcParse,xc}function mme(e){return new Date(e)}function pme(e){return e instanceof Date?+e:+new Date(+e)}function nN(e,t,r,n,a,i,o,l,c,u){var d=VC(),f=d.invert,h=d.domain,m=u(".%L"),y=u(":%S"),g=u("%I:%M"),p=u("%I %p"),v=u("%a %d"),x=u("%b %d"),b=u("%B"),_=u("%Y");function j(S){return(c(S)<S?m:l(S)<S?y:o(S)<S?g:i(S)<S?p:n(S)<S?a(S)<S?v:x:r(S)<S?b:_)(S)}return d.invert=function(S){return new Date(f(S))},d.domain=function(S){return arguments.length?h(Array.from(S,pme)):h().map(mme)},d.ticks=function(S){var C=h();return e(C[0],C[C.length-1],S??10)},d.tickFormat=function(S,C){return C==null?j:u(C)},d.nice=function(S){var C=h();return(!S||typeof S.range!="function")&&(S=t(C[0],C[C.length-1],S??10)),S?h(t4(C,S)):d},d.copy=function(){return np(d,nN(e,t,r,n,a,i,o,l,c,u))},d}function gme(){return Ba.apply(nN(dhe,fhe,Cs,tN,Gx,ap,ZC,QC,bl,m4).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function vme(){return Ba.apply(nN(che,uhe,Ns,rN,Xx,Yx,eN,JC,bl,p4).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Qx(){var e=0,t=1,r,n,a,i,o=In,l=!1,c;function u(f){return f==null||isNaN(f=+f)?c:o(a===0?.5:(f=(i(f)-r)*a,l?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=i(e=+e),n=i(t=+t),a=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(f){return arguments.length?(l=!!f,u):l},u.interpolator=function(f){return arguments.length?(o=f,u):o};function d(f){return function(h){var m,y;return arguments.length?([m,y]=h,o=f(m,y),u):[o(0),o(1)]}}return u.range=d(Qd),u.rangeRound=d(UC),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return i=f,r=f(e),n=f(t),a=r===n?0:1/(n-r),u}}function Ho(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function g4(){var e=Wo(Qx()(In));return e.copy=function(){return Ho(e,g4())},Is.apply(e,arguments)}function v4(){var e=qC(Qx()).domain([1,10]);return e.copy=function(){return Ho(e,v4()).base(e.base())},Is.apply(e,arguments)}function y4(){var e=KC(Qx());return e.copy=function(){return Ho(e,y4()).constant(e.constant())},Is.apply(e,arguments)}function aN(){var e=YC(Qx());return e.copy=function(){return Ho(e,aN()).exponent(e.exponent())},Is.apply(e,arguments)}function yme(){return aN.apply(null,arguments).exponent(.5)}function x4(){var e=[],t=In;function r(n){if(n!=null&&!isNaN(n=+n))return t((tp(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(No),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,i)=>afe(e,i/n))},r.copy=function(){return x4(t).domain(e)},Is.apply(r,arguments)}function Jx(){var e=0,t=.5,r=1,n=1,a,i,o,l,c,u=In,d,f=!1,h;function m(g){return isNaN(g=+g)?h:(g=.5+((g=+d(g))-i)*(n*g<n*i?l:c),u(f?Math.max(0,Math.min(1,g)):g))}m.domain=function(g){return arguments.length?([e,t,r]=g,a=d(e=+e),i=d(t=+t),o=d(r=+r),l=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),n=i<a?-1:1,m):[e,t,r]},m.clamp=function(g){return arguments.length?(f=!!g,m):f},m.interpolator=function(g){return arguments.length?(u=g,m):u};function y(g){return function(p){var v,x,b;return arguments.length?([v,x,b]=p,u=Afe(g,[v,x,b]),m):[u(0),u(.5),u(1)]}}return m.range=y(Qd),m.rangeRound=y(UC),m.unknown=function(g){return arguments.length?(h=g,m):h},function(g){return d=g,a=g(e),i=g(t),o=g(r),l=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),n=i<a?-1:1,m}}function b4(){var e=Wo(Jx()(In));return e.copy=function(){return Ho(e,b4())},Is.apply(e,arguments)}function w4(){var e=qC(Jx()).domain([.1,1,10]);return e.copy=function(){return Ho(e,w4()).base(e.base())},Is.apply(e,arguments)}function j4(){var e=KC(Jx());return e.copy=function(){return Ho(e,j4()).constant(e.constant())},Is.apply(e,arguments)}function iN(){var e=YC(Jx());return e.copy=function(){return Ho(e,iN()).exponent(e.exponent())},Is.apply(e,arguments)}function xme(){return iN.apply(null,arguments).exponent(.5)}const SO=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:tm,scaleDiverging:b4,scaleDivergingLog:w4,scaleDivergingPow:iN,scaleDivergingSqrt:xme,scaleDivergingSymlog:j4,scaleIdentity:e4,scaleImplicit:C1,scaleLinear:Lv,scaleLog:r4,scaleOrdinal:BC,scalePoint:rh,scalePow:GC,scaleQuantile:i4,scaleQuantize:s4,scaleRadial:a4,scaleSequential:g4,scaleSequentialLog:v4,scaleSequentialPow:aN,scaleSequentialQuantile:x4,scaleSequentialSqrt:yme,scaleSequentialSymlog:y4,scaleSqrt:Zfe,scaleSymlog:n4,scaleThreshold:o4,scaleTime:gme,scaleUtc:vme,tickFormat:ZL},Symbol.toStringTag,{value:"Module"}));var bme=Ud;function wme(e,t,r){for(var n=-1,a=e.length;++n<a;){var i=e[n],o=t(i);if(o!=null&&(l===void 0?o===o&&!bme(o):r(o,l)))var l=o,c=i}return c}var Zx=wme;function jme(e,t){return e>t}var _4=jme,_me=Zx,Sme=_4,Cme=Xd;function Nme(e){return e&&e.length?_me(e,Cme,Sme):void 0}var Pme=Nme;const co=It(Pme);function kme(e,t){return e<t}var S4=kme,Eme=Zx,Ame=S4,Ome=Xd;function Tme(e){return e&&e.length?Eme(e,Ome,Ame):void 0}var Rme=Tme;const e0=It(Rme);var Mme=bC,$me=Gi,Ime=TL,Dme=ea;function Lme(e,t){var r=Dme(e)?Mme:Ime;return r(e,$me(t))}var Bme=Lme,Fme=AL,zme=Bme;function Ume(e,t){return Fme(zme(e,t),1)}var Vme=Ume;const Wme=It(Vme);var Hme=MC;function qme(e,t){return Hme(e,t)}var Kme=qme;const $o=It(Kme);var Jd=1e9,Yme={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},oN,gr=!0,Ia="[DecimalError] ",Rl=Ia+"Invalid argument: ",sN=Ia+"Exponent out of range: ",Zd=Math.floor,ll=Math.pow,Gme=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ca,sn=1e7,lr=7,C4=9007199254740991,Uv=Zd(C4/lr),Be={};Be.absoluteValue=Be.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Be.comparedTo=Be.cmp=function(e){var t,r,n,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===a?0:n>a^i.s<0?1:-1};Be.decimalPlaces=Be.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*lr;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Be.dividedBy=Be.div=function(e){return vs(this,new this.constructor(e))};Be.dividedToIntegerBy=Be.idiv=function(e){var t=this,r=t.constructor;return Yt(vs(t,new r(e),0,1),r.precision)};Be.equals=Be.eq=function(e){return!this.cmp(e)};Be.exponent=function(){return Hr(this)};Be.greaterThan=Be.gt=function(e){return this.cmp(e)>0};Be.greaterThanOrEqualTo=Be.gte=function(e){return this.cmp(e)>=0};Be.isInteger=Be.isint=function(){return this.e>this.d.length-2};Be.isNegative=Be.isneg=function(){return this.s<0};Be.isPositive=Be.ispos=function(){return this.s>0};Be.isZero=function(){return this.s===0};Be.lessThan=Be.lt=function(e){return this.cmp(e)<0};Be.lessThanOrEqualTo=Be.lte=function(e){return this.cmp(e)<1};Be.logarithm=Be.log=function(e){var t,r=this,n=r.constructor,a=n.precision,i=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(ca))throw Error(Ia+"NaN");if(r.s<1)throw Error(Ia+(r.s?"NaN":"-Infinity"));return r.eq(ca)?new n(0):(gr=!1,t=vs(sm(r,i),sm(e,i),i),gr=!0,Yt(t,a))};Be.minus=Be.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?k4(t,e):N4(t,(e.s=-e.s,e))};Be.modulo=Be.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(Ia+"NaN");return r.s?(gr=!1,t=vs(r,e,0,1).times(e),gr=!0,r.minus(t)):Yt(new n(r),a)};Be.naturalExponential=Be.exp=function(){return P4(this)};Be.naturalLogarithm=Be.ln=function(){return sm(this)};Be.negated=Be.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Be.plus=Be.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?N4(t,e):k4(t,(e.s=-e.s,e))};Be.precision=Be.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Rl+e);if(t=Hr(a)+1,n=a.d.length-1,r=n*lr+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Be.squareRoot=Be.sqrt=function(){var e,t,r,n,a,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Ia+"NaN")}for(e=Hr(l),gr=!1,a=Math.sqrt(+l),a==0||a==1/0?(t=Ri(l.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=Zd((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(a.toString()),r=c.precision,a=o=r+3;;)if(i=n,n=i.plus(vs(l,i,o+2)).times(.5),Ri(i.d).slice(0,o)===(t=Ri(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),a==o&&t=="4999"){if(Yt(i,r+1,0),i.times(i).eq(l)){n=i;break}}else if(t!="9999")break;o+=4}return gr=!0,Yt(n,r)};Be.times=Be.mul=function(e){var t,r,n,a,i,o,l,c,u,d=this,f=d.constructor,h=d.d,m=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,c=h.length,u=m.length,c<u&&(i=h,h=m,m=i,o=c,c=u,u=o),i=[],o=c+u,n=o;n--;)i.push(0);for(n=u;--n>=0;){for(t=0,a=c+n;a>n;)l=i[a]+m[n]*h[a-n-1]+t,i[a--]=l%sn|0,t=l/sn|0;i[a]=(i[a]+t)%sn|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,gr?Yt(e,f.precision):e};Be.toDecimalPlaces=Be.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(Hi(e,0,Jd),t===void 0?t=n.rounding:Hi(t,0,8),Yt(r,e+Hr(r)+1,t))};Be.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=Hl(n,!0):(Hi(e,0,Jd),t===void 0?t=a.rounding:Hi(t,0,8),n=Yt(new a(n),e+1,t),r=Hl(n,!0,e+1)),r};Be.toFixed=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?Hl(a):(Hi(e,0,Jd),t===void 0?t=i.rounding:Hi(t,0,8),n=Yt(new i(a),e+Hr(a)+1,t),r=Hl(n.abs(),!1,e+Hr(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};Be.toInteger=Be.toint=function(){var e=this,t=e.constructor;return Yt(new t(e),Hr(e)+1,t.rounding)};Be.toNumber=function(){return+this};Be.toPower=Be.pow=function(e){var t,r,n,a,i,o,l=this,c=l.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(ca);if(l=new c(l),!l.s){if(e.s<1)throw Error(Ia+"Infinity");return l}if(l.eq(ca))return l;if(n=c.precision,e.eq(ca))return Yt(l,n);if(t=e.e,r=e.d.length-1,o=t>=r,i=l.s,o){if((r=d<0?-d:d)<=C4){for(a=new c(ca),t=Math.ceil(n/lr+4),gr=!1;r%2&&(a=a.times(l),NO(a.d,t)),r=Zd(r/2),r!==0;)l=l.times(l),NO(l.d,t);return gr=!0,e.s<0?new c(ca).div(a):Yt(a,n)}}else if(i<0)throw Error(Ia+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,gr=!1,a=e.times(sm(l,n+u)),gr=!0,a=P4(a),a.s=i,a};Be.toPrecision=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?(r=Hr(a),n=Hl(a,r<=i.toExpNeg||r>=i.toExpPos)):(Hi(e,1,Jd),t===void 0?t=i.rounding:Hi(t,0,8),a=Yt(new i(a),e,t),r=Hr(a),n=Hl(a,e<=r||r<=i.toExpNeg,e)),n};Be.toSignificantDigits=Be.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(Hi(e,1,Jd),t===void 0?t=n.rounding:Hi(t,0,8)),Yt(new n(r),e,t)};Be.toString=Be.valueOf=Be.val=Be.toJSON=Be[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Hr(e),r=e.constructor;return Hl(e,t<=r.toExpNeg||t>=r.toExpPos)};function N4(e,t){var r,n,a,i,o,l,c,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),gr?Yt(t,f):t;if(c=e.d,u=t.d,o=e.e,a=t.e,c=c.slice(),i=o-a,i){for(i<0?(n=c,i=-i,l=u.length):(n=u,a=o,l=c.length),o=Math.ceil(f/lr),l=o>l?o+1:l+1,i>l&&(i=l,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(l=c.length,i=u.length,l-i<0&&(i=l,n=u,u=c,c=n),r=0;i;)r=(c[--i]=c[i]+u[i]+r)/sn|0,c[i]%=sn;for(r&&(c.unshift(r),++a),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=a,gr?Yt(t,f):t}function Hi(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Rl+e)}function Ri(e){var t,r,n,a=e.length-1,i="",o=e[0];if(a>0){for(i+=o,t=1;t<a;t++)n=e[t]+"",r=lr-n.length,r&&(i+=Gs(r)),i+=n;o=e[t],n=o+"",r=lr-n.length,r&&(i+=Gs(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var vs=function(){function e(n,a){var i,o=0,l=n.length;for(n=n.slice();l--;)i=n[l]*a+o,n[l]=i%sn|0,o=i/sn|0;return o&&n.unshift(o),n}function t(n,a,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(n[l]!=a[l]){c=n[l]>a[l]?1:-1;break}return c}function r(n,a,i){for(var o=0;i--;)n[i]-=o,o=n[i]<a[i]?1:0,n[i]=o*sn+n[i]-a[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,i,o){var l,c,u,d,f,h,m,y,g,p,v,x,b,_,j,S,C,P,N=n.constructor,E=n.s==a.s?1:-1,A=n.d,T=a.d;if(!n.s)return new N(n);if(!a.s)throw Error(Ia+"Division by zero");for(c=n.e-a.e,C=T.length,j=A.length,m=new N(E),y=m.d=[],u=0;T[u]==(A[u]||0);)++u;if(T[u]>(A[u]||0)&&--c,i==null?x=i=N.precision:o?x=i+(Hr(n)-Hr(a))+1:x=i,x<0)return new N(0);if(x=x/lr+2|0,u=0,C==1)for(d=0,T=T[0],x++;(u<j||d)&&x--;u++)b=d*sn+(A[u]||0),y[u]=b/T|0,d=b%T|0;else{for(d=sn/(T[0]+1)|0,d>1&&(T=e(T,d),A=e(A,d),C=T.length,j=A.length),_=C,g=A.slice(0,C),p=g.length;p<C;)g[p++]=0;P=T.slice(),P.unshift(0),S=T[0],T[1]>=sn/2&&++S;do d=0,l=t(T,g,C,p),l<0?(v=g[0],C!=p&&(v=v*sn+(g[1]||0)),d=v/S|0,d>1?(d>=sn&&(d=sn-1),f=e(T,d),h=f.length,p=g.length,l=t(f,g,h,p),l==1&&(d--,r(f,C<h?P:T,h))):(d==0&&(l=d=1),f=T.slice()),h=f.length,h<p&&f.unshift(0),r(g,f,p),l==-1&&(p=g.length,l=t(T,g,C,p),l<1&&(d++,r(g,C<p?P:T,p))),p=g.length):l===0&&(d++,g=[0]),y[u++]=d,l&&g[0]?g[p++]=A[_]||0:(g=[A[_]],p=1);while((_++<j||g[0]!==void 0)&&x--)}return y[0]||y.shift(),m.e=c,Yt(m,o?i+Hr(m)+1:i)}}();function P4(e,t){var r,n,a,i,o,l,c=0,u=0,d=e.constructor,f=d.precision;if(Hr(e)>16)throw Error(sN+Hr(e));if(!e.s)return new d(ca);for(t==null?(gr=!1,l=f):l=t,o=new d(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(n=Math.log(ll(2,u))/Math.LN10*2+5|0,l+=n,r=a=i=new d(ca),d.precision=l;;){if(a=Yt(a.times(e),l),r=r.times(++c),o=i.plus(vs(a,r,l)),Ri(o.d).slice(0,l)===Ri(i.d).slice(0,l)){for(;u--;)i=Yt(i.times(i),l);return d.precision=f,t==null?(gr=!0,Yt(i,f)):i}i=o}}function Hr(e){for(var t=e.e*lr,r=e.d[0];r>=10;r/=10)t++;return t}function Yb(e,t,r){if(t>e.LN10.sd())throw gr=!0,r&&(e.precision=r),Error(Ia+"LN10 precision limit exceeded");return Yt(new e(e.LN10),t)}function Gs(e){for(var t="";e--;)t+="0";return t}function sm(e,t){var r,n,a,i,o,l,c,u,d,f=1,h=10,m=e,y=m.d,g=m.constructor,p=g.precision;if(m.s<1)throw Error(Ia+(m.s?"NaN":"-Infinity"));if(m.eq(ca))return new g(0);if(t==null?(gr=!1,u=p):u=t,m.eq(10))return t==null&&(gr=!0),Yb(g,u);if(u+=h,g.precision=u,r=Ri(y),n=r.charAt(0),i=Hr(m),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)m=m.times(e),r=Ri(m.d),n=r.charAt(0),f++;i=Hr(m),n>1?(m=new g("0."+r),i++):m=new g(n+"."+r.slice(1))}else return c=Yb(g,u+2,p).times(i+""),m=sm(new g(n+"."+r.slice(1)),u-h).plus(c),g.precision=p,t==null?(gr=!0,Yt(m,p)):m;for(l=o=m=vs(m.minus(ca),m.plus(ca),u),d=Yt(m.times(m),u),a=3;;){if(o=Yt(o.times(d),u),c=l.plus(vs(o,new g(a),u)),Ri(c.d).slice(0,u)===Ri(l.d).slice(0,u))return l=l.times(2),i!==0&&(l=l.plus(Yb(g,u+2,p).times(i+""))),l=vs(l,new g(f),u),g.precision=p,t==null?(gr=!0,Yt(l,p)):l;l=c,a+=2}}function CO(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=Zd(r/lr),e.d=[],n=(r+1)%lr,r<0&&(n+=lr),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=lr;n<a;)e.d.push(+t.slice(n,n+=lr));t=t.slice(n),n=lr-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),gr&&(e.e>Uv||e.e<-Uv))throw Error(sN+r)}else e.s=0,e.e=0,e.d=[0];return e}function Yt(e,t,r){var n,a,i,o,l,c,u,d,f=e.d;for(o=1,i=f[0];i>=10;i/=10)o++;if(n=t-o,n<0)n+=lr,a=t,u=f[d=0];else{if(d=Math.ceil((n+1)/lr),i=f.length,d>=i)return e;for(u=i=f[d],o=1;i>=10;i/=10)o++;n%=lr,a=n-lr+o}if(r!==void 0&&(i=ll(10,o-a-1),l=u/i%10|0,c=t<0||f[d+1]!==void 0||u%i,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?a>0?u/ll(10,o-a):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return c?(i=Hr(e),f.length=1,t=t-i-1,f[0]=ll(10,(lr-t%lr)%lr),e.e=Zd(-t/lr)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=d,i=1,d--):(f.length=d+1,i=ll(10,lr-n),f[d]=a>0?(u/ll(10,o-a)%ll(10,a)|0)*i:0),c)for(;;)if(d==0){(f[0]+=i)==sn&&(f[0]=1,++e.e);break}else{if(f[d]+=i,f[d]!=sn)break;f[d--]=0,i=1}for(n=f.length;f[--n]===0;)f.pop();if(gr&&(e.e>Uv||e.e<-Uv))throw Error(sN+Hr(e));return e}function k4(e,t){var r,n,a,i,o,l,c,u,d,f,h=e.constructor,m=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),gr?Yt(t,m):t;if(c=e.d,f=t.d,n=t.e,u=e.e,c=c.slice(),o=u-n,o){for(d=o<0,d?(r=c,o=-o,l=f.length):(r=f,n=u,l=c.length),a=Math.max(Math.ceil(m/lr),l)+2,o>a&&(o=a,r.length=1),r.reverse(),a=o;a--;)r.push(0);r.reverse()}else{for(a=c.length,l=f.length,d=a<l,d&&(l=a),a=0;a<l;a++)if(c[a]!=f[a]){d=c[a]<f[a];break}o=0}for(d&&(r=c,c=f,f=r,t.s=-t.s),l=c.length,a=f.length-l;a>0;--a)c[l++]=0;for(a=f.length;a>o;){if(c[--a]<f[a]){for(i=a;i&&c[--i]===0;)c[i]=sn-1;--c[i],c[a]+=sn}c[a]-=f[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,gr?Yt(t,m):t):new h(0)}function Hl(e,t,r){var n,a=Hr(e),i=Ri(e.d),o=i.length;return t?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+Gs(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+Gs(-a-1)+i,r&&(n=r-o)>0&&(i+=Gs(n))):a>=o?(i+=Gs(a+1-o),r&&(n=r-a-1)>0&&(i=i+"."+Gs(n))):((n=a+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(a+1===o&&(i+="."),i+=Gs(n))),e.s<0?"-"+i:i}function NO(e,t){if(e.length>t)return e.length=t,!0}function E4(e){var t,r,n;function a(i){var o=this;if(!(o instanceof a))return new a(i);if(o.constructor=a,i instanceof a){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Rl+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return CO(o,i.toString())}else if(typeof i!="string")throw Error(Rl+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,Gme.test(i))CO(o,i);else throw Error(Rl+i)}if(a.prototype=Be,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=E4,a.config=a.set=Xme,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function Xme(e){if(!e||typeof e!="object")throw Error(Ia+"Object expected");var t,r,n,a=["precision",1,Jd,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(Zd(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(Rl+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Rl+r+": "+n);return this}var oN=E4(Yme);ca=new oN(1);const Vt=oN;function Qme(e){return tpe(e)||epe(e)||Zme(e)||Jme()}function Jme(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zme(e,t){if(e){if(typeof e=="string")return E1(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return E1(e,t)}}function epe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function tpe(e){if(Array.isArray(e))return E1(e)}function E1(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var rpe=function(t){return t},A4={"@@functional/placeholder":!0},O4=function(t){return t===A4},PO=function(t){return function r(){return arguments.length===0||arguments.length===1&&O4(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},npe=function e(t,r){return t===1?r:PO(function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];var o=a.filter(function(l){return l!==A4}).length;return o>=t?r.apply(void 0,a):e(t-o,PO(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var d=a.map(function(f){return O4(f)?c.shift():f});return r.apply(void 0,Qme(d).concat(c))}))})},t0=function(t){return npe(t.length,t)},A1=function(t,r){for(var n=[],a=t;a<r;++a)n[a-t]=a;return n},ape=t0(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),ipe=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return rpe;var a=r.reverse(),i=a[0],o=a.slice(1);return function(){return o.reduce(function(l,c){return c(l)},i.apply(void 0,arguments))}},O1=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},T4=function(t){var r=null,n=null;return function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r&&i.every(function(l,c){return l===r[c]})||(r=i,n=t.apply(void 0,i)),n}};function spe(e){var t;return e===0?t=1:t=Math.floor(new Vt(e).abs().log(10).toNumber())+1,t}function ope(e,t,r){for(var n=new Vt(e),a=0,i=[];n.lt(t)&&a<1e5;)i.push(n.toNumber()),n=n.add(r),a++;return i}var lpe=t0(function(e,t,r){var n=+e,a=+t;return n+r*(a-n)}),cpe=t0(function(e,t,r){var n=t-+e;return n=n||1/0,(r-e)/n}),upe=t0(function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});const r0={rangeStep:ope,getDigitCount:spe,interpolateNumber:lpe,uninterpolateNumber:cpe,uninterpolateTruncation:upe};function T1(e){return hpe(e)||fpe(e)||R4(e)||dpe()}function dpe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fpe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function hpe(e){if(Array.isArray(e))return R1(e)}function om(e,t){return gpe(e)||ppe(e,t)||R4(e,t)||mpe()}function mpe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function R4(e,t){if(e){if(typeof e=="string")return R1(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return R1(e,t)}}function R1(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ppe(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,a=!1,i=void 0;try{for(var o=e[Symbol.iterator](),l;!(n=(l=o.next()).done)&&(r.push(l.value),!(t&&r.length===t));n=!0);}catch(c){a=!0,i=c}finally{try{!n&&o.return!=null&&o.return()}finally{if(a)throw i}}return r}}function gpe(e){if(Array.isArray(e))return e}function M4(e){var t=om(e,2),r=t[0],n=t[1],a=r,i=n;return r>n&&(a=n,i=r),[a,i]}function $4(e,t,r){if(e.lte(0))return new Vt(0);var n=r0.getDigitCount(e.toNumber()),a=new Vt(10).pow(n),i=e.div(a),o=n!==1?.05:.1,l=new Vt(Math.ceil(i.div(o).toNumber())).add(r).mul(o),c=l.mul(a);return t?c:new Vt(Math.ceil(c))}function vpe(e,t,r){var n=1,a=new Vt(e);if(!a.isint()&&r){var i=Math.abs(e);i<1?(n=new Vt(10).pow(r0.getDigitCount(e)-1),a=new Vt(Math.floor(a.div(n).toNumber())).mul(n)):i>1&&(a=new Vt(Math.floor(e)))}else e===0?a=new Vt(Math.floor((t-1)/2)):r||(a=new Vt(Math.floor(e)));var o=Math.floor((t-1)/2),l=ipe(ape(function(c){return a.add(new Vt(c-o).mul(n)).toNumber()}),A1);return l(0,t)}function I4(e,t,r,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new Vt(0),tickMin:new Vt(0),tickMax:new Vt(0)};var i=$4(new Vt(t).sub(e).div(r-1),n,a),o;e<=0&&t>=0?o=new Vt(0):(o=new Vt(e).add(t).div(2),o=o.sub(new Vt(o).mod(i)));var l=Math.ceil(o.sub(e).div(i).toNumber()),c=Math.ceil(new Vt(t).sub(o).div(i).toNumber()),u=l+c+1;return u>r?I4(e,t,r,n,a+1):(u<r&&(c=t>0?c+(r-u):c,l=t>0?l:l+(r-u)),{step:i,tickMin:o.sub(new Vt(l).mul(i)),tickMax:o.add(new Vt(c).mul(i))})}function ype(e){var t=om(e,2),r=t[0],n=t[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),l=M4([r,n]),c=om(l,2),u=c[0],d=c[1];if(u===-1/0||d===1/0){var f=d===1/0?[u].concat(T1(A1(0,a-1).map(function(){return 1/0}))):[].concat(T1(A1(0,a-1).map(function(){return-1/0})),[d]);return r>n?O1(f):f}if(u===d)return vpe(u,a,i);var h=I4(u,d,o,i),m=h.step,y=h.tickMin,g=h.tickMax,p=r0.rangeStep(y,g.add(new Vt(.1).mul(m)),m);return r>n?O1(p):p}function xpe(e,t){var r=om(e,2),n=r[0],a=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=M4([n,a]),l=om(o,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[n,a];if(c===u)return[c];var d=Math.max(t,2),f=$4(new Vt(u).sub(c).div(d-1),i,0),h=[].concat(T1(r0.rangeStep(new Vt(c),new Vt(u).sub(new Vt(.99).mul(f)),f)),[u]);return n>a?O1(h):h}var bpe=T4(ype),wpe=T4(xpe),jpe="Invariant failed";function ql(e,t){throw new Error(jpe)}var _pe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Ku(e){"@babel/helpers - typeof";return Ku=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ku(e)}function Vv(){return Vv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Vv.apply(this,arguments)}function Spe(e,t){return kpe(e)||Ppe(e,t)||Npe(e,t)||Cpe()}function Cpe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Npe(e,t){if(e){if(typeof e=="string")return kO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kO(e,t)}}function kO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ppe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function kpe(e){if(Array.isArray(e))return e}function Epe(e,t){if(e==null)return{};var r=Ape(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Ape(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Ope(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tpe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,B4(n.key),n)}}function Rpe(e,t,r){return t&&Tpe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Mpe(e,t,r){return t=Wv(t),$pe(e,D4()?Reflect.construct(t,r||[],Wv(e).constructor):t.apply(e,r))}function $pe(e,t){if(t&&(Ku(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ipe(e)}function Ipe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(D4=function(){return!!e})()}function Wv(e){return Wv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Wv(e)}function Dpe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&M1(e,t)}function M1(e,t){return M1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},M1(e,t)}function L4(e,t,r){return t=B4(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function B4(e){var t=Lpe(e,"string");return Ku(t)=="symbol"?t:t+""}function Lpe(e,t){if(Ku(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Ku(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ef=function(e){function t(){return Ope(this,t),Mpe(this,t,arguments)}return Dpe(t,e),Rpe(t,[{key:"render",value:function(){var n=this.props,a=n.offset,i=n.layout,o=n.width,l=n.dataKey,c=n.data,u=n.dataPointFormatter,d=n.xAxis,f=n.yAxis,h=Epe(n,_pe),m=Ve(h,!1);this.props.direction==="x"&&d.type!=="number"&&ql();var y=c.map(function(g){var p=u(g,l),v=p.x,x=p.y,b=p.value,_=p.errorVal;if(!_)return null;var j=[],S,C;if(Array.isArray(_)){var P=Spe(_,2);S=P[0],C=P[1]}else S=C=_;if(i==="vertical"){var N=d.scale,E=x+a,A=E+o,T=E-o,R=N(b-S),k=N(b+C);j.push({x1:k,y1:A,x2:k,y2:T}),j.push({x1:R,y1:E,x2:k,y2:E}),j.push({x1:R,y1:A,x2:R,y2:T})}else if(i==="horizontal"){var O=f.scale,M=v+a,D=M-o,L=M+o,B=O(b-S),z=O(b+C);j.push({x1:D,y1:z,x2:L,y2:z}),j.push({x1:M,y1:B,x2:M,y2:z}),j.push({x1:D,y1:B,x2:L,y2:B})}return $.createElement(gt,Vv({className:"recharts-errorBar",key:"bar-".concat(j.map(function(Z){return"".concat(Z.x1,"-").concat(Z.x2,"-").concat(Z.y1,"-").concat(Z.y2)}))},m),j.map(function(Z){return $.createElement("line",Vv({},Z,{key:"line-".concat(Z.x1,"-").concat(Z.x2,"-").concat(Z.y1,"-").concat(Z.y2)}))}))});return $.createElement(gt,{className:"recharts-errorBars"},y)}}])}($.Component);L4(ef,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});L4(ef,"displayName","ErrorBar");function lm(e){"@babel/helpers - typeof";return lm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lm(e)}function EO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Zo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?EO(Object(r),!0).forEach(function(n){Bpe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Bpe(e,t,r){return t=Fpe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fpe(e){var t=zpe(e,"string");return lm(t)=="symbol"?t:t+""}function zpe(e,t){if(lm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(lm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var F4=function(t){var r=t.children,n=t.formattedGraphicalItems,a=t.legendWidth,i=t.legendContent,o=ia(r,Vr);if(!o)return null;var l=Vr.defaultProps,c=l!==void 0?Zo(Zo({},l),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:i==="children"?u=(n||[]).reduce(function(d,f){var h=f.item,m=f.props,y=m.sectors||m.data||[];return d.concat(y.map(function(g){return{type:o.props.iconType||h.props.legendType,value:g.name,color:g.fill,payload:g}}))},[]):u=(n||[]).map(function(d){var f=d.item,h=f.type.defaultProps,m=h!==void 0?Zo(Zo({},h),f.props):{},y=m.dataKey,g=m.name,p=m.legendType,v=m.hide;return{inactive:v,dataKey:y,type:c.iconType||p||"square",color:lN(f),value:g||y,payload:m}}),Zo(Zo(Zo({},c),Vr.getWithHeight(o,a)),{},{payload:u,item:o})};function cm(e){"@babel/helpers - typeof";return cm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cm(e)}function AO(e){return Hpe(e)||Wpe(e)||Vpe(e)||Upe()}function Upe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vpe(e,t){if(e){if(typeof e=="string")return $1(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $1(e,t)}}function Wpe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Hpe(e){if(Array.isArray(e))return $1(e)}function $1(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function OO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Tr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?OO(Object(r),!0).forEach(function(n){mu(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mu(e,t,r){return t=qpe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qpe(e){var t=Kpe(e,"string");return cm(t)=="symbol"?t:t+""}function Kpe(e,t){if(cm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(cm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dr(e,t,r){return Qe(e)||Qe(t)?r:rn(t)?ha(e,t,r):Je(t)?t(e):r}function nh(e,t,r,n){var a=Wme(e,function(l){return dr(l,t)});if(r==="number"){var i=a.filter(function(l){return we(l)||parseFloat(l)});return i.length?[e0(i),co(i)]:[1/0,-1/0]}var o=n?a.filter(function(l){return!Qe(l)}):a;return o.map(function(l){return rn(l)||l instanceof Date?l:""})}var Ype=function(t){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,l=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var c=i.range,u=0;u<l;u++){var d=u>0?a[u-1].coordinate:a[l-1].coordinate,f=a[u].coordinate,h=u>=l-1?a[0].coordinate:a[u+1].coordinate,m=void 0;if(Mn(f-d)!==Mn(h-f)){var y=[];if(Mn(h-f)===Mn(c[1]-c[0])){m=h;var g=f+c[1]-c[0];y[0]=Math.min(g,(g+d)/2),y[1]=Math.max(g,(g+d)/2)}else{m=d;var p=h+c[1]-c[0];y[0]=Math.min(f,(p+f)/2),y[1]=Math.max(f,(p+f)/2)}var v=[Math.min(f,(m+f)/2),Math.max(f,(m+f)/2)];if(t>v[0]&&t<=v[1]||t>=y[0]&&t<=y[1]){o=a[u].index;break}}else{var x=Math.min(d,h),b=Math.max(d,h);if(t>(x+f)/2&&t<=(b+f)/2){o=a[u].index;break}}}else for(var _=0;_<l;_++)if(_===0&&t<=(n[_].coordinate+n[_+1].coordinate)/2||_>0&&_<l-1&&t>(n[_].coordinate+n[_-1].coordinate)/2&&t<=(n[_].coordinate+n[_+1].coordinate)/2||_===l-1&&t>(n[_].coordinate+n[_-1].coordinate)/2){o=n[_].index;break}return o},lN=function(t){var r,n=t,a=n.type.displayName,i=(r=t.type)!==null&&r!==void 0&&r.defaultProps?Tr(Tr({},t.type.defaultProps),t.props):t.props,o=i.stroke,l=i.fill,c;switch(a){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},Gpe=function(t){var r=t.barSize,n=t.totalSize,a=t.stackGroups,i=a===void 0?{}:a;if(!i)return{};for(var o={},l=Object.keys(i),c=0,u=l.length;c<u;c++)for(var d=i[l[c]].stackGroups,f=Object.keys(d),h=0,m=f.length;h<m;h++){var y=d[f[h]],g=y.items,p=y.cateAxisId,v=g.filter(function(C){return gs(C.type).indexOf("Bar")>=0});if(v&&v.length){var x=v[0].type.defaultProps,b=x!==void 0?Tr(Tr({},x),v[0].props):v[0].props,_=b.barSize,j=b[p];o[j]||(o[j]=[]);var S=Qe(_)?r:_;o[j].push({item:v[0],stackList:v.slice(1),barSize:Qe(S)?void 0:$n(S,n,0)})}}return o},Xpe=function(t){var r=t.barGap,n=t.barCategoryGap,a=t.bandSize,i=t.sizeList,o=i===void 0?[]:i,l=t.maxBarSize,c=o.length;if(c<1)return null;var u=$n(r,a,0,!0),d,f=[];if(o[0].barSize===+o[0].barSize){var h=!1,m=a/c,y=o.reduce(function(_,j){return _+j.barSize||0},0);y+=(c-1)*u,y>=a&&(y-=(c-1)*u,u=0),y>=a&&m>0&&(h=!0,m*=.9,y=c*m);var g=(a-y)/2>>0,p={offset:g-u,size:0};d=o.reduce(function(_,j){var S={item:j.item,position:{offset:p.offset+p.size+u,size:h?m:j.barSize}},C=[].concat(AO(_),[S]);return p=C[C.length-1].position,j.stackList&&j.stackList.length&&j.stackList.forEach(function(P){C.push({item:P,position:p})}),C},f)}else{var v=$n(n,a,0,!0);a-2*v-(c-1)*u<=0&&(u=0);var x=(a-2*v-(c-1)*u)/c;x>1&&(x>>=0);var b=l===+l?Math.min(x,l):x;d=o.reduce(function(_,j,S){var C=[].concat(AO(_),[{item:j.item,position:{offset:v+(x+u)*S+(x-b)/2,size:b}}]);return j.stackList&&j.stackList.length&&j.stackList.forEach(function(P){C.push({item:P,position:C[C.length-1].position})}),C},f)}return d},Qpe=function(t,r,n,a){var i=n.children,o=n.width,l=n.margin,c=o-(l.left||0)-(l.right||0),u=F4({children:i,legendWidth:c});if(u){var d=a||{},f=d.width,h=d.height,m=u.align,y=u.verticalAlign,g=u.layout;if((g==="vertical"||g==="horizontal"&&y==="middle")&&m!=="center"&&we(t[m]))return Tr(Tr({},t),{},mu({},m,t[m]+(f||0)));if((g==="horizontal"||g==="vertical"&&m==="center")&&y!=="middle"&&we(t[y]))return Tr(Tr({},t),{},mu({},y,t[y]+(h||0)))}return t},Jpe=function(t,r,n){return Qe(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},z4=function(t,r,n,a,i){var o=r.props.children,l=Bn(o,ef).filter(function(u){return Jpe(a,i,u.props.direction)});if(l&&l.length){var c=l.map(function(u){return u.props.dataKey});return t.reduce(function(u,d){var f=dr(d,n);if(Qe(f))return u;var h=Array.isArray(f)?[e0(f),co(f)]:[f,f],m=c.reduce(function(y,g){var p=dr(d,g,0),v=h[0]-Math.abs(Array.isArray(p)?p[0]:p),x=h[1]+Math.abs(Array.isArray(p)?p[1]:p);return[Math.min(v,y[0]),Math.max(x,y[1])]},[1/0,-1/0]);return[Math.min(m[0],u[0]),Math.max(m[1],u[1])]},[1/0,-1/0])}return null},Zpe=function(t,r,n,a,i){var o=r.map(function(l){return z4(t,l,n,i,a)}).filter(function(l){return!Qe(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},U4=function(t,r,n,a,i){var o=r.map(function(c){var u=c.props.dataKey;return n==="number"&&u&&z4(t,c,u,a)||nh(t,u,n,i)});if(n==="number")return o.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,u){for(var d=0,f=u.length;d<f;d++)l[u[d]]||(l[u[d]]=!0,c.push(u[d]));return c},[])},V4=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},W4=function(t,r,n,a){if(a)return t.map(function(c){return c.coordinate});var i,o,l=t.map(function(c){return c.coordinate===r&&(i=!0),c.coordinate===n&&(o=!0),c.coordinate});return i||l.push(r),o||l.push(n),l},hs=function(t,r,n){if(!t)return null;var a=t.scale,i=t.duplicateDomain,o=t.type,l=t.range,c=t.realScaleType==="scaleBand"?a.bandwidth()/2:2,u=(r||n)&&o==="category"&&a.bandwidth?a.bandwidth()/c:0;if(u=t.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?Mn(l[0]-l[1])*2*u:u,r&&(t.ticks||t.niceTicks)){var d=(t.ticks||t.niceTicks).map(function(f){var h=i?i.indexOf(f):f;return{coordinate:a(h)+u,value:f,offset:u}});return d.filter(function(f){return!Kd(f.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(f,h){return{coordinate:a(f)+u,value:f,index:h,offset:u}}):a.ticks&&!n?a.ticks(t.tickCount).map(function(f){return{coordinate:a(f)+u,value:f,offset:u}}):a.domain().map(function(f,h){return{coordinate:a(f)+u,value:i?i[f]:f,index:h,offset:u}})},Gb=new WeakMap,Yp=function(t,r){if(typeof r!="function")return t;Gb.has(t)||Gb.set(t,new WeakMap);var n=Gb.get(t);if(n.has(r))return n.get(r);var a=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,a),a},H4=function(t,r,n){var a=t.scale,i=t.type,o=t.layout,l=t.axisType;if(a==="auto")return o==="radial"&&l==="radiusAxis"?{scale:tm(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:Lv(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:rh(),realScaleType:"point"}:i==="category"?{scale:tm(),realScaleType:"band"}:{scale:Lv(),realScaleType:"linear"};if(Vl(a)){var c="scale".concat(Bx(a));return{scale:(SO[c]||rh)(),realScaleType:SO[c]?c:"point"}}return Je(a)?{scale:a}:{scale:rh(),realScaleType:"point"}},TO=1e-4,q4=function(t){var r=t.domain();if(!(!r||r.length<=2)){var n=r.length,a=t.range(),i=Math.min(a[0],a[1])-TO,o=Math.max(a[0],a[1])+TO,l=t(r[0]),c=t(r[n-1]);(l<i||l>o||c<i||c>o)&&t.domain([r[0],r[n-1]])}},ege=function(t,r){if(!t)return null;for(var n=0,a=t.length;n<a;n++)if(t[n].item===r)return t[n].position;return null},tge=function(t,r){if(!r||r.length!==2||!we(r[0])||!we(r[1]))return t;var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]),i=[t[0],t[1]];return(!we(t[0])||t[0]<n)&&(i[0]=n),(!we(t[1])||t[1]>a)&&(i[1]=a),i[0]>a&&(i[0]=a),i[1]<n&&(i[1]=n),i},rge=function(t){var r=t.length;if(!(r<=0))for(var n=0,a=t[0].length;n<a;++n)for(var i=0,o=0,l=0;l<r;++l){var c=Kd(t[l][n][1])?t[l][n][0]:t[l][n][1];c>=0?(t[l][n][0]=i,t[l][n][1]=i+c,i=t[l][n][1]):(t[l][n][0]=o,t[l][n][1]=o+c,o=t[l][n][1])}},nge=function(t){var r=t.length;if(!(r<=0))for(var n=0,a=t[0].length;n<a;++n)for(var i=0,o=0;o<r;++o){var l=Kd(t[o][n][1])?t[o][n][0]:t[o][n][1];l>=0?(t[o][n][0]=i,t[o][n][1]=i+l,i=t[o][n][1]):(t[o][n][0]=0,t[o][n][1]=0)}},age={sign:rge,expand:_re,none:Bu,silhouette:Sre,wiggle:Cre,positive:nge},ige=function(t,r,n){var a=r.map(function(l){return l.props.dataKey}),i=age[n],o=jre().keys(a).value(function(l,c){return+dr(l,c,0)}).order(s1).offset(i);return o(t)},sge=function(t,r,n,a,i,o){if(!t)return null;var l=o?r.reverse():r,c={},u=l.reduce(function(f,h){var m,y=(m=h.type)!==null&&m!==void 0&&m.defaultProps?Tr(Tr({},h.type.defaultProps),h.props):h.props,g=y.stackId,p=y.hide;if(p)return f;var v=y[n],x=f[v]||{hasStack:!1,stackGroups:{}};if(rn(g)){var b=x.stackGroups[g]||{numericAxisId:n,cateAxisId:a,items:[]};b.items.push(h),x.hasStack=!0,x.stackGroups[g]=b}else x.stackGroups[Vo("_stackId_")]={numericAxisId:n,cateAxisId:a,items:[h]};return Tr(Tr({},f),{},mu({},v,x))},c),d={};return Object.keys(u).reduce(function(f,h){var m=u[h];if(m.hasStack){var y={};m.stackGroups=Object.keys(m.stackGroups).reduce(function(g,p){var v=m.stackGroups[p];return Tr(Tr({},g),{},mu({},p,{numericAxisId:n,cateAxisId:a,items:v.items,stackedData:ige(t,v.items,i)}))},y)}return Tr(Tr({},f),{},mu({},h,m))},d)},K4=function(t,r){var n=r.realScaleType,a=r.type,i=r.tickCount,o=r.originalDomain,l=r.allowDecimals,c=n||r.scale;if(c!=="auto"&&c!=="linear")return null;if(i&&a==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=t.domain();if(!u.length)return null;var d=bpe(u,i,l);return t.domain([e0(d),co(d)]),{niceTicks:d}}if(i&&a==="number"){var f=t.domain(),h=wpe(f,i,l);return{niceTicks:h}}return null};function Yu(e){var t=e.axis,r=e.ticks,n=e.bandSize,a=e.entry,i=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Qe(a[t.dataKey])){var l=vv(r,"value",a[t.dataKey]);if(l)return l.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var c=dr(a,Qe(o)?t.dataKey:o);return Qe(c)?null:t.scale(c)}var RO=function(t){var r=t.axis,n=t.ticks,a=t.offset,i=t.bandSize,o=t.entry,l=t.index;if(r.type==="category")return n[l]?n[l].coordinate+a:null;var c=dr(o,r.dataKey,r.domain[l]);return Qe(c)?null:r.scale(c)-i/2+a},oge=function(t){var r=t.numericAxis,n=r.scale.domain();if(r.type==="number"){var a=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return a<=0&&i>=0?0:i<0?i:a}return n[0]},lge=function(t,r){var n,a=(n=t.type)!==null&&n!==void 0&&n.defaultProps?Tr(Tr({},t.type.defaultProps),t.props):t.props,i=a.stackId;if(rn(i)){var o=r[i];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},cge=function(t){return t.reduce(function(r,n){return[e0(n.concat([r[0]]).filter(we)),co(n.concat([r[1]]).filter(we))]},[1/0,-1/0])},Y4=function(t,r,n){return Object.keys(t).reduce(function(a,i){var o=t[i],l=o.stackedData,c=l.reduce(function(u,d){var f=cge(d.slice(r,n+1));return[Math.min(u[0],f[0]),Math.max(u[1],f[1])]},[1/0,-1/0]);return[Math.min(c[0],a[0]),Math.max(c[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},MO=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,$O=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,I1=function(t,r,n){if(Je(t))return t(r,n);if(!Array.isArray(t))return r;var a=[];if(we(t[0]))a[0]=n?t[0]:Math.min(t[0],r[0]);else if(MO.test(t[0])){var i=+MO.exec(t[0])[1];a[0]=r[0]-i}else Je(t[0])?a[0]=t[0](r[0]):a[0]=r[0];if(we(t[1]))a[1]=n?t[1]:Math.max(t[1],r[1]);else if($O.test(t[1])){var o=+$O.exec(t[1])[1];a[1]=r[1]+o}else Je(t[1])?a[1]=t[1](r[1]):a[1]=r[1];return a},Hv=function(t,r,n){if(t&&t.scale&&t.scale.bandwidth){var a=t.scale.bandwidth();if(!n||a>0)return a}if(t&&r&&r.length>=2){for(var i=IC(r,function(f){return f.coordinate}),o=1/0,l=1,c=i.length;l<c;l++){var u=i[l],d=i[l-1];o=Math.min((u.coordinate||0)-(d.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},IO=function(t,r,n){return!t||!t.length||$o(t,ha(n,"type.defaultProps.domain"))?r:t},G4=function(t,r){var n=t.type.defaultProps?Tr(Tr({},t.type.defaultProps),t.props):t.props,a=n.dataKey,i=n.name,o=n.unit,l=n.formatter,c=n.tooltipType,u=n.chartType,d=n.hide;return Tr(Tr({},Ve(t,!1)),{},{dataKey:a,unit:o,formatter:l,name:i||a,color:lN(t),value:dr(r,a),type:c,payload:r,chartType:u,hide:d})};function um(e){"@babel/helpers - typeof";return um=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},um(e)}function DO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function is(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DO(Object(r),!0).forEach(function(n){X4(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function X4(e,t,r){return t=uge(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uge(e){var t=dge(e,"string");return um(t)=="symbol"?t:t+""}function dge(e,t){if(um(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(um(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fge(e,t){return gge(e)||pge(e,t)||mge(e,t)||hge()}function hge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mge(e,t){if(e){if(typeof e=="string")return LO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return LO(e,t)}}function LO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function pge(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function gge(e){if(Array.isArray(e))return e}var qv=Math.PI/180,vge=function(t){return t*180/Math.PI},tr=function(t,r,n,a){return{x:t+Math.cos(-qv*a)*n,y:r+Math.sin(-qv*a)*n}},Q4=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},yge=function(t,r,n,a,i){var o=t.width,l=t.height,c=t.startAngle,u=t.endAngle,d=$n(t.cx,o,o/2),f=$n(t.cy,l,l/2),h=Q4(o,l,n),m=$n(t.innerRadius,h,0),y=$n(t.outerRadius,h,h*.8),g=Object.keys(r);return g.reduce(function(p,v){var x=r[v],b=x.domain,_=x.reversed,j;if(Qe(x.range))a==="angleAxis"?j=[c,u]:a==="radiusAxis"&&(j=[m,y]),_&&(j=[j[1],j[0]]);else{j=x.range;var S=j,C=fge(S,2);c=C[0],u=C[1]}var P=H4(x,i),N=P.realScaleType,E=P.scale;E.domain(b).range(j),q4(E);var A=K4(E,is(is({},x),{},{realScaleType:N})),T=is(is(is({},x),A),{},{range:j,radius:y,realScaleType:N,scale:E,cx:d,cy:f,innerRadius:m,outerRadius:y,startAngle:c,endAngle:u});return is(is({},p),{},X4({},v,T))},{})},xge=function(t,r){var n=t.x,a=t.y,i=r.x,o=r.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(a-o,2))},bge=function(t,r){var n=t.x,a=t.y,i=r.cx,o=r.cy,l=xge({x:n,y:a},{x:i,y:o});if(l<=0)return{radius:l};var c=(n-i)/l,u=Math.acos(c);return a>o&&(u=2*Math.PI-u),{radius:l,angle:vge(u),angleInRadian:u}},wge=function(t){var r=t.startAngle,n=t.endAngle,a=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(a,i);return{startAngle:r-o*360,endAngle:n-o*360}},jge=function(t,r){var n=r.startAngle,a=r.endAngle,i=Math.floor(n/360),o=Math.floor(a/360),l=Math.min(i,o);return t+l*360},BO=function(t,r){var n=t.x,a=t.y,i=bge({x:n,y:a},r),o=i.radius,l=i.angle,c=r.innerRadius,u=r.outerRadius;if(o<c||o>u)return!1;if(o===0)return!0;var d=wge(r),f=d.startAngle,h=d.endAngle,m=l,y;if(f<=h){for(;m>h;)m-=360;for(;m<f;)m+=360;y=m>=f&&m<=h}else{for(;m>f;)m-=360;for(;m<h;)m+=360;y=m>=h&&m<=f}return y?is(is({},r),{},{radius:o,angle:jge(m,r)}):null},J4=function(t){return!w.isValidElement(t)&&!Je(t)&&typeof t!="boolean"?t.className:""};function dm(e){"@babel/helpers - typeof";return dm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dm(e)}var _ge=["offset"];function Sge(e){return kge(e)||Pge(e)||Nge(e)||Cge()}function Cge(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nge(e,t){if(e){if(typeof e=="string")return D1(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return D1(e,t)}}function Pge(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function kge(e){if(Array.isArray(e))return D1(e)}function D1(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ege(e,t){if(e==null)return{};var r=Age(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Age(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function FO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Gr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FO(Object(r),!0).forEach(function(n){Oge(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Oge(e,t,r){return t=Tge(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Tge(e){var t=Rge(e,"string");return dm(t)=="symbol"?t:t+""}function Rge(e,t){if(dm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(dm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fm(){return fm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fm.apply(this,arguments)}var Mge=function(t){var r=t.value,n=t.formatter,a=Qe(t.children)?r:t.children;return Je(n)?n(a):a},$ge=function(t,r){var n=Mn(r-t),a=Math.min(Math.abs(r-t),360);return n*a},Ige=function(t,r,n){var a=t.position,i=t.viewBox,o=t.offset,l=t.className,c=i,u=c.cx,d=c.cy,f=c.innerRadius,h=c.outerRadius,m=c.startAngle,y=c.endAngle,g=c.clockWise,p=(f+h)/2,v=$ge(m,y),x=v>=0?1:-1,b,_;a==="insideStart"?(b=m+x*o,_=g):a==="insideEnd"?(b=y-x*o,_=!g):a==="end"&&(b=y+x*o,_=g),_=v<=0?_:!_;var j=tr(u,d,p,b),S=tr(u,d,p,b+(_?1:-1)*359),C="M".concat(j.x,",").concat(j.y,`
    A`).concat(p,",").concat(p,",0,1,").concat(_?0:1,`,
    `).concat(S.x,",").concat(S.y),P=Qe(t.id)?Vo("recharts-radial-line-"):t.id;return $.createElement("text",fm({},n,{dominantBaseline:"central",className:ct("recharts-radial-bar-label",l)}),$.createElement("defs",null,$.createElement("path",{id:P,d:C})),$.createElement("textPath",{xlinkHref:"#".concat(P)},r))},Dge=function(t){var r=t.viewBox,n=t.offset,a=t.position,i=r,o=i.cx,l=i.cy,c=i.innerRadius,u=i.outerRadius,d=i.startAngle,f=i.endAngle,h=(d+f)/2;if(a==="outside"){var m=tr(o,l,u+n,h),y=m.x,g=m.y;return{x:y,y:g,textAnchor:y>=o?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var p=(c+u)/2,v=tr(o,l,p,h),x=v.x,b=v.y;return{x,y:b,textAnchor:"middle",verticalAnchor:"middle"}},Lge=function(t){var r=t.viewBox,n=t.parentViewBox,a=t.offset,i=t.position,o=r,l=o.x,c=o.y,u=o.width,d=o.height,f=d>=0?1:-1,h=f*a,m=f>0?"end":"start",y=f>0?"start":"end",g=u>=0?1:-1,p=g*a,v=g>0?"end":"start",x=g>0?"start":"end";if(i==="top"){var b={x:l+u/2,y:c-f*a,textAnchor:"middle",verticalAnchor:m};return Gr(Gr({},b),n?{height:Math.max(c-n.y,0),width:u}:{})}if(i==="bottom"){var _={x:l+u/2,y:c+d+h,textAnchor:"middle",verticalAnchor:y};return Gr(Gr({},_),n?{height:Math.max(n.y+n.height-(c+d),0),width:u}:{})}if(i==="left"){var j={x:l-p,y:c+d/2,textAnchor:v,verticalAnchor:"middle"};return Gr(Gr({},j),n?{width:Math.max(j.x-n.x,0),height:d}:{})}if(i==="right"){var S={x:l+u+p,y:c+d/2,textAnchor:x,verticalAnchor:"middle"};return Gr(Gr({},S),n?{width:Math.max(n.x+n.width-S.x,0),height:d}:{})}var C=n?{width:u,height:d}:{};return i==="insideLeft"?Gr({x:l+p,y:c+d/2,textAnchor:x,verticalAnchor:"middle"},C):i==="insideRight"?Gr({x:l+u-p,y:c+d/2,textAnchor:v,verticalAnchor:"middle"},C):i==="insideTop"?Gr({x:l+u/2,y:c+h,textAnchor:"middle",verticalAnchor:y},C):i==="insideBottom"?Gr({x:l+u/2,y:c+d-h,textAnchor:"middle",verticalAnchor:m},C):i==="insideTopLeft"?Gr({x:l+p,y:c+h,textAnchor:x,verticalAnchor:y},C):i==="insideTopRight"?Gr({x:l+u-p,y:c+h,textAnchor:v,verticalAnchor:y},C):i==="insideBottomLeft"?Gr({x:l+p,y:c+d-h,textAnchor:x,verticalAnchor:m},C):i==="insideBottomRight"?Gr({x:l+u-p,y:c+d-h,textAnchor:v,verticalAnchor:m},C):Vd(i)&&(we(i.x)||yl(i.x))&&(we(i.y)||yl(i.y))?Gr({x:l+$n(i.x,u),y:c+$n(i.y,d),textAnchor:"end",verticalAnchor:"end"},C):Gr({x:l+u/2,y:c+d/2,textAnchor:"middle",verticalAnchor:"middle"},C)},Bge=function(t){return"cx"in t&&we(t.cx)};function ln(e){var t=e.offset,r=t===void 0?5:t,n=Ege(e,_ge),a=Gr({offset:r},n),i=a.viewBox,o=a.position,l=a.value,c=a.children,u=a.content,d=a.className,f=d===void 0?"":d,h=a.textBreakAll;if(!i||Qe(l)&&Qe(c)&&!w.isValidElement(u)&&!Je(u))return null;if(w.isValidElement(u))return w.cloneElement(u,a);var m;if(Je(u)){if(m=w.createElement(u,a),w.isValidElement(m))return m}else m=Mge(a);var y=Bge(i),g=Ve(a,!0);if(y&&(o==="insideStart"||o==="insideEnd"||o==="end"))return Ige(a,m,g);var p=y?Dge(a):Lge(a);return $.createElement(Wl,fm({className:ct("recharts-label",f)},g,p,{breakAll:h}),m)}ln.displayName="Label";var Z4=function(t){var r=t.cx,n=t.cy,a=t.angle,i=t.startAngle,o=t.endAngle,l=t.r,c=t.radius,u=t.innerRadius,d=t.outerRadius,f=t.x,h=t.y,m=t.top,y=t.left,g=t.width,p=t.height,v=t.clockWise,x=t.labelViewBox;if(x)return x;if(we(g)&&we(p)){if(we(f)&&we(h))return{x:f,y:h,width:g,height:p};if(we(m)&&we(y))return{x:m,y,width:g,height:p}}return we(f)&&we(h)?{x:f,y:h,width:0,height:0}:we(r)&&we(n)?{cx:r,cy:n,startAngle:i||a||0,endAngle:o||a||0,innerRadius:u||0,outerRadius:d||c||l||0,clockWise:v}:t.viewBox?t.viewBox:{}},Fge=function(t,r){return t?t===!0?$.createElement(ln,{key:"label-implicit",viewBox:r}):rn(t)?$.createElement(ln,{key:"label-implicit",viewBox:r,value:t}):w.isValidElement(t)?t.type===ln?w.cloneElement(t,{key:"label-implicit",viewBox:r}):$.createElement(ln,{key:"label-implicit",content:t,viewBox:r}):Je(t)?$.createElement(ln,{key:"label-implicit",content:t,viewBox:r}):Vd(t)?$.createElement(ln,fm({viewBox:r},t,{key:"label-implicit"})):null:null},zge=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var a=t.children,i=Z4(t),o=Bn(a,ln).map(function(c,u){return w.cloneElement(c,{viewBox:r||i,key:"label-".concat(u)})});if(!n)return o;var l=Fge(t.label,r||i);return[l].concat(Sge(o))};ln.parseViewBox=Z4;ln.renderCallByParent=zge;function Uge(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var Vge=Uge;const Wge=It(Vge);function hm(e){"@babel/helpers - typeof";return hm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hm(e)}var Hge=["valueAccessor"],qge=["data","dataKey","clockWise","id","textBreakAll"];function Kge(e){return Qge(e)||Xge(e)||Gge(e)||Yge()}function Yge(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gge(e,t){if(e){if(typeof e=="string")return L1(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return L1(e,t)}}function Xge(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Qge(e){if(Array.isArray(e))return L1(e)}function L1(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Kv(){return Kv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Kv.apply(this,arguments)}function zO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function UO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zO(Object(r),!0).forEach(function(n){Jge(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Jge(e,t,r){return t=Zge(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zge(e){var t=eve(e,"string");return hm(t)=="symbol"?t:t+""}function eve(e,t){if(hm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(hm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function VO(e,t){if(e==null)return{};var r=tve(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function tve(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var rve=function(t){return Array.isArray(t.value)?Wge(t.value):t.value};function fi(e){var t=e.valueAccessor,r=t===void 0?rve:t,n=VO(e,Hge),a=n.data,i=n.dataKey,o=n.clockWise,l=n.id,c=n.textBreakAll,u=VO(n,qge);return!a||!a.length?null:$.createElement(gt,{className:"recharts-label-list"},a.map(function(d,f){var h=Qe(i)?r(d,f):dr(d&&d.payload,i),m=Qe(l)?{}:{id:"".concat(l,"-").concat(f)};return $.createElement(ln,Kv({},Ve(d,!0),u,m,{parentViewBox:d.parentViewBox,value:h,textBreakAll:c,viewBox:ln.parseViewBox(Qe(o)?d:UO(UO({},d),{},{clockWise:o})),key:"label-".concat(f),index:f}))}))}fi.displayName="LabelList";function nve(e,t){return e?e===!0?$.createElement(fi,{key:"labelList-implicit",data:t}):$.isValidElement(e)||Je(e)?$.createElement(fi,{key:"labelList-implicit",data:t,content:e}):Vd(e)?$.createElement(fi,Kv({data:t},e,{key:"labelList-implicit"})):null:null}function ave(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var n=e.children,a=Bn(n,fi).map(function(o,l){return w.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!r)return a;var i=nve(e.label,t);return[i].concat(Kge(a))}fi.renderCallByParent=ave;function mm(e){"@babel/helpers - typeof";return mm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mm(e)}function B1(){return B1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},B1.apply(this,arguments)}function WO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function HO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WO(Object(r),!0).forEach(function(n){ive(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ive(e,t,r){return t=sve(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sve(e){var t=ove(e,"string");return mm(t)=="symbol"?t:t+""}function ove(e,t){if(mm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(mm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var lve=function(t,r){var n=Mn(r-t),a=Math.min(Math.abs(r-t),359.999);return n*a},Gp=function(t){var r=t.cx,n=t.cy,a=t.radius,i=t.angle,o=t.sign,l=t.isExternal,c=t.cornerRadius,u=t.cornerIsExternal,d=c*(l?1:-1)+a,f=Math.asin(c/d)/qv,h=u?i:i+o*f,m=tr(r,n,d,h),y=tr(r,n,a,h),g=u?i-o*f:i,p=tr(r,n,d*Math.cos(f*qv),g);return{center:m,circleTangency:y,lineTangency:p,theta:f}},eB=function(t){var r=t.cx,n=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.startAngle,l=t.endAngle,c=lve(o,l),u=o+c,d=tr(r,n,i,o),f=tr(r,n,i,u),h="M ".concat(d.x,",").concat(d.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>u),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(a>0){var m=tr(r,n,a,o),y=tr(r,n,a,u);h+="L ".concat(y.x,",").concat(y.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=u),`,
            `).concat(m.x,",").concat(m.y," Z")}else h+="L ".concat(r,",").concat(n," Z");return h},cve=function(t){var r=t.cx,n=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,u=t.startAngle,d=t.endAngle,f=Mn(d-u),h=Gp({cx:r,cy:n,radius:i,angle:u,sign:f,cornerRadius:o,cornerIsExternal:c}),m=h.circleTangency,y=h.lineTangency,g=h.theta,p=Gp({cx:r,cy:n,radius:i,angle:d,sign:-f,cornerRadius:o,cornerIsExternal:c}),v=p.circleTangency,x=p.lineTangency,b=p.theta,_=c?Math.abs(u-d):Math.abs(u-d)-g-b;if(_<0)return l?"M ".concat(y.x,",").concat(y.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):eB({cx:r,cy:n,innerRadius:a,outerRadius:i,startAngle:u,endAngle:d});var j="M ".concat(y.x,",").concat(y.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(_>180),",").concat(+(f<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(x.x,",").concat(x.y,`
  `);if(a>0){var S=Gp({cx:r,cy:n,radius:a,angle:u,sign:f,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),C=S.circleTangency,P=S.lineTangency,N=S.theta,E=Gp({cx:r,cy:n,radius:a,angle:d,sign:-f,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),A=E.circleTangency,T=E.lineTangency,R=E.theta,k=c?Math.abs(u-d):Math.abs(u-d)-N-R;if(k<0&&o===0)return"".concat(j,"L").concat(r,",").concat(n,"Z");j+="L".concat(T.x,",").concat(T.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(A.x,",").concat(A.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(k>180),",").concat(+(f>0),",").concat(C.x,",").concat(C.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(P.x,",").concat(P.y,"Z")}else j+="L".concat(r,",").concat(n,"Z");return j},uve={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},tB=function(t){var r=HO(HO({},uve),t),n=r.cx,a=r.cy,i=r.innerRadius,o=r.outerRadius,l=r.cornerRadius,c=r.forceCornerRadius,u=r.cornerIsExternal,d=r.startAngle,f=r.endAngle,h=r.className;if(o<i||d===f)return null;var m=ct("recharts-sector",h),y=o-i,g=$n(l,y,0,!0),p;return g>0&&Math.abs(d-f)<360?p=cve({cx:n,cy:a,innerRadius:i,outerRadius:o,cornerRadius:Math.min(g,y/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:f}):p=eB({cx:n,cy:a,innerRadius:i,outerRadius:o,startAngle:d,endAngle:f}),$.createElement("path",B1({},Ve(r,!0),{className:m,d:p,role:"img"}))};function pm(e){"@babel/helpers - typeof";return pm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pm(e)}function F1(){return F1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},F1.apply(this,arguments)}function qO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function KO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qO(Object(r),!0).forEach(function(n){dve(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dve(e,t,r){return t=fve(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fve(e){var t=hve(e,"string");return pm(t)=="symbol"?t:t+""}function hve(e,t){if(pm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(pm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var YO={curveBasisClosed:dre,curveBasisOpen:fre,curveBasis:ure,curveBumpX:Xte,curveBumpY:Qte,curveLinearClosed:hre,curveLinear:zx,curveMonotoneX:mre,curveMonotoneY:pre,curveNatural:gre,curveStep:vre,curveStepAfter:xre,curveStepBefore:yre},Xp=function(t){return t.x===+t.x&&t.y===+t.y},_f=function(t){return t.x},Sf=function(t){return t.y},mve=function(t,r){if(Je(t))return t;var n="curve".concat(Bx(t));return(n==="curveMonotone"||n==="curveBump")&&r?YO["".concat(n).concat(r==="vertical"?"Y":"X")]:YO[n]||zx},pve=function(t){var r=t.type,n=r===void 0?"linear":r,a=t.points,i=a===void 0?[]:a,o=t.baseLine,l=t.layout,c=t.connectNulls,u=c===void 0?!1:c,d=mve(n,l),f=u?i.filter(function(g){return Xp(g)}):i,h;if(Array.isArray(o)){var m=u?o.filter(function(g){return Xp(g)}):o,y=f.map(function(g,p){return KO(KO({},g),{},{base:m[p]})});return l==="vertical"?h=Fp().y(Sf).x1(_f).x0(function(g){return g.base.x}):h=Fp().x(_f).y1(Sf).y0(function(g){return g.base.y}),h.defined(Xp).curve(d),h(y)}return l==="vertical"&&we(o)?h=Fp().y(Sf).x1(_f).x0(o):we(o)?h=Fp().x(_f).y1(Sf).y0(o):h=G3().x(_f).y(Sf),h.defined(Xp).curve(d),h(f)},Po=function(t){var r=t.className,n=t.points,a=t.path,i=t.pathRef;if((!n||!n.length)&&!a)return null;var o=n&&n.length?pve(t):a;return w.createElement("path",F1({},Ve(t,!1),yv(t),{className:ct("recharts-curve",r),d:o,ref:i}))},rB={exports:{}},gve="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",vve=gve,yve=vve;function nB(){}function aB(){}aB.resetWarningCache=nB;var xve=function(){function e(n,a,i,o,l,c){if(c!==yve){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:aB,resetWarningCache:nB};return r.PropTypes=r,r};rB.exports=xve();var bve=rB.exports;const Mt=It(bve);var wve=Object.getOwnPropertyNames,jve=Object.getOwnPropertySymbols,_ve=Object.prototype.hasOwnProperty;function GO(e,t){return function(n,a,i){return e(n,a,i)&&t(n,a,i)}}function Qp(e){return function(r,n,a){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,a);var i=a.cache,o=i.get(r),l=i.get(n);if(o&&l)return o===n&&l===r;i.set(r,n),i.set(n,r);var c=e(r,n,a);return i.delete(r),i.delete(n),c}}function XO(e){return wve(e).concat(jve(e))}var Sve=Object.hasOwn||function(e,t){return _ve.call(e,t)};function lc(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var Cve="__v",Nve="__o",Pve="_owner",QO=Object.getOwnPropertyDescriptor,JO=Object.keys;function kve(e,t,r){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function Eve(e,t){return lc(e.getTime(),t.getTime())}function Ave(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function Ove(e,t){return e===t}function ZO(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var a=new Array(n),i=e.entries(),o,l,c=0;(o=i.next())&&!o.done;){for(var u=t.entries(),d=!1,f=0;(l=u.next())&&!l.done;){if(a[f]){f++;continue}var h=o.value,m=l.value;if(r.equals(h[0],m[0],c,f,e,t,r)&&r.equals(h[1],m[1],h[0],m[0],e,t,r)){d=a[f]=!0;break}f++}if(!d)return!1;c++}return!0}var Tve=lc;function Rve(e,t,r){var n=JO(e),a=n.length;if(JO(t).length!==a)return!1;for(;a-- >0;)if(!iB(e,t,r,n[a]))return!1;return!0}function Cf(e,t,r){var n=XO(e),a=n.length;if(XO(t).length!==a)return!1;for(var i,o,l;a-- >0;)if(i=n[a],!iB(e,t,r,i)||(o=QO(e,i),l=QO(t,i),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function Mve(e,t){return lc(e.valueOf(),t.valueOf())}function $ve(e,t){return e.source===t.source&&e.flags===t.flags}function e2(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var a=new Array(n),i=e.values(),o,l;(o=i.next())&&!o.done;){for(var c=t.values(),u=!1,d=0;(l=c.next())&&!l.done;){if(!a[d]&&r.equals(o.value,l.value,o.value,l.value,e,t,r)){u=a[d]=!0;break}d++}if(!u)return!1}return!0}function Ive(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function Dve(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function iB(e,t,r,n){return(n===Pve||n===Nve||n===Cve)&&(e.$$typeof||t.$$typeof)?!0:Sve(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}var Lve="[object Arguments]",Bve="[object Boolean]",Fve="[object Date]",zve="[object Error]",Uve="[object Map]",Vve="[object Number]",Wve="[object Object]",Hve="[object RegExp]",qve="[object Set]",Kve="[object String]",Yve="[object URL]",Gve=Array.isArray,t2=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,r2=Object.assign,Xve=Object.prototype.toString.call.bind(Object.prototype.toString);function Qve(e){var t=e.areArraysEqual,r=e.areDatesEqual,n=e.areErrorsEqual,a=e.areFunctionsEqual,i=e.areMapsEqual,o=e.areNumbersEqual,l=e.areObjectsEqual,c=e.arePrimitiveWrappersEqual,u=e.areRegExpsEqual,d=e.areSetsEqual,f=e.areTypedArraysEqual,h=e.areUrlsEqual;return function(y,g,p){if(y===g)return!0;if(y==null||g==null)return!1;var v=typeof y;if(v!==typeof g)return!1;if(v!=="object")return v==="number"?o(y,g,p):v==="function"?a(y,g,p):!1;var x=y.constructor;if(x!==g.constructor)return!1;if(x===Object)return l(y,g,p);if(Gve(y))return t(y,g,p);if(t2!=null&&t2(y))return f(y,g,p);if(x===Date)return r(y,g,p);if(x===RegExp)return u(y,g,p);if(x===Map)return i(y,g,p);if(x===Set)return d(y,g,p);var b=Xve(y);return b===Fve?r(y,g,p):b===Hve?u(y,g,p):b===Uve?i(y,g,p):b===qve?d(y,g,p):b===Wve?typeof y.then!="function"&&typeof g.then!="function"&&l(y,g,p):b===Yve?h(y,g,p):b===zve?n(y,g,p):b===Lve?l(y,g,p):b===Bve||b===Vve||b===Kve?c(y,g,p):!1}}function Jve(e){var t=e.circular,r=e.createCustomConfig,n=e.strict,a={areArraysEqual:n?Cf:kve,areDatesEqual:Eve,areErrorsEqual:Ave,areFunctionsEqual:Ove,areMapsEqual:n?GO(ZO,Cf):ZO,areNumbersEqual:Tve,areObjectsEqual:n?Cf:Rve,arePrimitiveWrappersEqual:Mve,areRegExpsEqual:$ve,areSetsEqual:n?GO(e2,Cf):e2,areTypedArraysEqual:n?Cf:Ive,areUrlsEqual:Dve};if(r&&(a=r2({},a,r(a))),t){var i=Qp(a.areArraysEqual),o=Qp(a.areMapsEqual),l=Qp(a.areObjectsEqual),c=Qp(a.areSetsEqual);a=r2({},a,{areArraysEqual:i,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return a}function Zve(e){return function(t,r,n,a,i,o,l){return e(t,r,l)}}function eye(e){var t=e.circular,r=e.comparator,n=e.createState,a=e.equals,i=e.strict;if(n)return function(c,u){var d=n(),f=d.cache,h=f===void 0?t?new WeakMap:void 0:f,m=d.meta;return r(c,u,{cache:h,equals:a,meta:m,strict:i})};if(t)return function(c,u){return r(c,u,{cache:new WeakMap,equals:a,meta:void 0,strict:i})};var o={cache:void 0,equals:a,meta:void 0,strict:i};return function(c,u){return r(c,u,o)}}var tye=qo();qo({strict:!0});qo({circular:!0});qo({circular:!0,strict:!0});qo({createInternalComparator:function(){return lc}});qo({strict:!0,createInternalComparator:function(){return lc}});qo({circular:!0,createInternalComparator:function(){return lc}});qo({circular:!0,createInternalComparator:function(){return lc},strict:!0});function qo(e){e===void 0&&(e={});var t=e.circular,r=t===void 0?!1:t,n=e.createInternalComparator,a=e.createState,i=e.strict,o=i===void 0?!1:i,l=Jve(e),c=Qve(l),u=n?n(c):Zve(c);return eye({circular:r,comparator:c,createState:a,equals:u,strict:o})}function rye(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function n2(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function a(i){r<0&&(r=i),i-r>t?(e(i),r=-1):rye(a)};requestAnimationFrame(n)}function z1(e){"@babel/helpers - typeof";return z1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},z1(e)}function nye(e){return oye(e)||sye(e)||iye(e)||aye()}function aye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iye(e,t){if(e){if(typeof e=="string")return a2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a2(e,t)}}function a2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function sye(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function oye(e){if(Array.isArray(e))return e}function lye(){var e={},t=function(){return null},r=!1,n=function a(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var o=i,l=nye(o),c=l[0],u=l.slice(1);if(typeof c=="number"){n2(a.bind(null,u),c);return}a(c),n2(a.bind(null,u));return}z1(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,n(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function gm(e){"@babel/helpers - typeof";return gm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gm(e)}function i2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function s2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?i2(Object(r),!0).forEach(function(n){sB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sB(e,t,r){return t=cye(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cye(e){var t=uye(e,"string");return gm(t)==="symbol"?t:String(t)}function uye(e,t){if(gm(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(gm(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dye=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(n,a){return n.filter(function(i){return a.includes(i)})})},fye=function(t){return t},hye=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},ah=function(t,r){return Object.keys(r).reduce(function(n,a){return s2(s2({},n),{},sB({},a,t(a,r[a])))},{})},o2=function(t,r,n){return t.map(function(a){return"".concat(hye(a)," ").concat(r,"ms ").concat(n)}).join(",")};function mye(e,t){return vye(e)||gye(e,t)||oB(e,t)||pye()}function pye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gye(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function vye(e){if(Array.isArray(e))return e}function yye(e){return wye(e)||bye(e)||oB(e)||xye()}function xye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oB(e,t){if(e){if(typeof e=="string")return U1(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return U1(e,t)}}function bye(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function wye(e){if(Array.isArray(e))return U1(e)}function U1(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Yv=1e-4,lB=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},cB=function(t,r){return t.map(function(n,a){return n*Math.pow(r,a)}).reduce(function(n,a){return n+a})},l2=function(t,r){return function(n){var a=lB(t,r);return cB(a,n)}},jye=function(t,r){return function(n){var a=lB(t,r),i=[].concat(yye(a.map(function(o,l){return o*l}).slice(1)),[0]);return cB(i,n)}},c2=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0],i=r[1],o=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":a=0,i=0,o=1,l=1;break;case"ease":a=.25,i=.1,o=.25,l=1;break;case"ease-in":a=.42,i=0,o=1,l=1;break;case"ease-out":a=.42,i=0,o=.58,l=1;break;case"ease-in-out":a=0,i=0,o=.58,l=1;break;default:{var c=r[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(p){return parseFloat(p)}),d=mye(u,4);a=d[0],i=d[1],o=d[2],l=d[3]}}}var f=l2(a,o),h=l2(i,l),m=jye(a,o),y=function(v){return v>1?1:v<0?0:v},g=function(v){for(var x=v>1?1:v,b=x,_=0;_<8;++_){var j=f(b)-x,S=m(b);if(Math.abs(j-x)<Yv||S<Yv)return h(b);b=y(b-j/S)}return h(b)};return g.isStepper=!1,g},_ye=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,n=r===void 0?100:r,a=t.damping,i=a===void 0?8:a,o=t.dt,l=o===void 0?17:o,c=function(d,f,h){var m=-(d-f)*n,y=h*i,g=h+(m-y)*l/1e3,p=h*l/1e3+d;return Math.abs(p-f)<Yv&&Math.abs(g)<Yv?[f,0]:[p,g]};return c.isStepper=!0,c.dt=l,c},Sye=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return c2(a);case"spring":return _ye();default:if(a.split("(")[0]==="cubic-bezier")return c2(a)}return typeof a=="function"?a:null};function vm(e){"@babel/helpers - typeof";return vm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vm(e)}function u2(e){return Pye(e)||Nye(e)||uB(e)||Cye()}function Cye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nye(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Pye(e){if(Array.isArray(e))return W1(e)}function d2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function mn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?d2(Object(r),!0).forEach(function(n){V1(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function V1(e,t,r){return t=kye(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kye(e){var t=Eye(e,"string");return vm(t)==="symbol"?t:String(t)}function Eye(e,t){if(vm(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(vm(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Aye(e,t){return Rye(e)||Tye(e,t)||uB(e,t)||Oye()}function Oye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uB(e,t){if(e){if(typeof e=="string")return W1(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return W1(e,t)}}function W1(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Tye(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Rye(e){if(Array.isArray(e))return e}var Gv=function(t,r,n){return t+(r-t)*n},H1=function(t){var r=t.from,n=t.to;return r!==n},Mye=function e(t,r,n){var a=ah(function(i,o){if(H1(o)){var l=t(o.from,o.to,o.velocity),c=Aye(l,2),u=c[0],d=c[1];return mn(mn({},o),{},{from:u,velocity:d})}return o},r);return n<1?ah(function(i,o){return H1(o)?mn(mn({},o),{},{velocity:Gv(o.velocity,a[i].velocity,n),from:Gv(o.from,a[i].from,n)}):o},r):e(t,a,n-1)};const $ye=function(e,t,r,n,a){var i=dye(e,t),o=i.reduce(function(p,v){return mn(mn({},p),{},V1({},v,[e[v],t[v]]))},{}),l=i.reduce(function(p,v){return mn(mn({},p),{},V1({},v,{from:e[v],velocity:0,to:t[v]}))},{}),c=-1,u,d,f=function(){return null},h=function(){return ah(function(v,x){return x.from},l)},m=function(){return!Object.values(l).filter(H1).length},y=function(v){u||(u=v);var x=v-u,b=x/r.dt;l=Mye(r,l,b),a(mn(mn(mn({},e),t),h())),u=v,m()||(c=requestAnimationFrame(f))},g=function(v){d||(d=v);var x=(v-d)/n,b=ah(function(j,S){return Gv.apply(void 0,u2(S).concat([r(x)]))},o);if(a(mn(mn(mn({},e),t),b)),x<1)c=requestAnimationFrame(f);else{var _=ah(function(j,S){return Gv.apply(void 0,u2(S).concat([r(1)]))},o);a(mn(mn(mn({},e),t),_))}};return f=r.isStepper?y:g,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(c)}}};function Gu(e){"@babel/helpers - typeof";return Gu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gu(e)}var Iye=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Dye(e,t){if(e==null)return{};var r=Lye(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Lye(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function Xb(e){return Uye(e)||zye(e)||Fye(e)||Bye()}function Bye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fye(e,t){if(e){if(typeof e=="string")return q1(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return q1(e,t)}}function zye(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Uye(e){if(Array.isArray(e))return q1(e)}function q1(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function f2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ha(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?f2(Object(r),!0).forEach(function(n){Bf(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Bf(e,t,r){return t=dB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Wye(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,dB(n.key),n)}}function Hye(e,t,r){return t&&Wye(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function dB(e){var t=qye(e,"string");return Gu(t)==="symbol"?t:String(t)}function qye(e,t){if(Gu(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Gu(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Kye(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&K1(e,t)}function K1(e,t){return K1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},K1(e,t)}function Yye(e){var t=Gye();return function(){var n=Xv(e),a;if(t){var i=Xv(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return Y1(this,a)}}function Y1(e,t){if(t&&(Gu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return G1(e)}function G1(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gye(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Xv(e){return Xv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Xv(e)}var Da=function(e){Kye(r,e);var t=Yye(r);function r(n,a){var i;Vye(this,r),i=t.call(this,n,a);var o=i.props,l=o.isActive,c=o.attributeName,u=o.from,d=o.to,f=o.steps,h=o.children,m=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(G1(i)),i.changeStyle=i.changeStyle.bind(G1(i)),!l||m<=0)return i.state={style:{}},typeof h=="function"&&(i.state={style:d}),Y1(i);if(f&&f.length)i.state={style:f[0].style};else if(u){if(typeof h=="function")return i.state={style:u},Y1(i);i.state={style:c?Bf({},c,u):u}}else i.state={style:{}};return i}return Hye(r,[{key:"componentDidMount",value:function(){var a=this.props,i=a.isActive,o=a.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var i=this.props,o=i.isActive,l=i.canBegin,c=i.attributeName,u=i.shouldReAnimate,d=i.to,f=i.from,h=this.state.style;if(l){if(!o){var m={style:c?Bf({},c,d):d};this.state&&h&&(c&&h[c]!==d||!c&&h!==d)&&this.setState(m);return}if(!(tye(a.to,d)&&a.canBegin&&a.isActive)){var y=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var g=y||u?f:a.to;if(this.state&&h){var p={style:c?Bf({},c,g):g};(c&&h[c]!==g||!c&&h!==g)&&this.setState(p)}this.runAnimation(Ha(Ha({},this.props),{},{from:g,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var i=this,o=a.from,l=a.to,c=a.duration,u=a.easing,d=a.begin,f=a.onAnimationEnd,h=a.onAnimationStart,m=$ye(o,l,Sye(u),c,this.changeStyle),y=function(){i.stopJSAnimation=m()};this.manager.start([h,d,y,c,f])}},{key:"runStepAnimation",value:function(a){var i=this,o=a.steps,l=a.begin,c=a.onAnimationStart,u=o[0],d=u.style,f=u.duration,h=f===void 0?0:f,m=function(g,p,v){if(v===0)return g;var x=p.duration,b=p.easing,_=b===void 0?"ease":b,j=p.style,S=p.properties,C=p.onAnimationEnd,P=v>0?o[v-1]:p,N=S||Object.keys(j);if(typeof _=="function"||_==="spring")return[].concat(Xb(g),[i.runJSAnimation.bind(i,{from:P.style,to:j,duration:x,easing:_}),x]);var E=o2(N,x,_),A=Ha(Ha(Ha({},P.style),j),{},{transition:E});return[].concat(Xb(g),[A,x,C]).filter(fye)};return this.manager.start([c].concat(Xb(o.reduce(m,[d,Math.max(h,l)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=lye());var i=a.begin,o=a.duration,l=a.attributeName,c=a.to,u=a.easing,d=a.onAnimationStart,f=a.onAnimationEnd,h=a.steps,m=a.children,y=this.manager;if(this.unSubscribe=y.subscribe(this.handleStyleChange),typeof u=="function"||typeof m=="function"||u==="spring"){this.runJSAnimation(a);return}if(h.length>1){this.runStepAnimation(a);return}var g=l?Bf({},l,c):c,p=o2(Object.keys(g),o,u);y.start([d,i,Ha(Ha({},g),{},{transition:p}),o,f])}},{key:"render",value:function(){var a=this.props,i=a.children;a.begin;var o=a.duration;a.attributeName,a.easing;var l=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var c=Dye(a,Iye),u=w.Children.count(i),d=this.state.style;if(typeof i=="function")return i(d);if(!l||u===0||o<=0)return i;var f=function(m){var y=m.props,g=y.style,p=g===void 0?{}:g,v=y.className,x=w.cloneElement(m,Ha(Ha({},c),{},{style:Ha(Ha({},p),d),className:v}));return x};return u===1?f(w.Children.only(i)):$.createElement("div",null,w.Children.map(i,function(h){return f(h)}))}}]),r}(w.PureComponent);Da.displayName="Animate";Da.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Da.propTypes={from:Mt.oneOfType([Mt.object,Mt.string]),to:Mt.oneOfType([Mt.object,Mt.string]),attributeName:Mt.string,duration:Mt.number,begin:Mt.number,easing:Mt.oneOfType([Mt.string,Mt.func]),steps:Mt.arrayOf(Mt.shape({duration:Mt.number.isRequired,style:Mt.object.isRequired,easing:Mt.oneOfType([Mt.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Mt.func]),properties:Mt.arrayOf("string"),onAnimationEnd:Mt.func})),children:Mt.oneOfType([Mt.node,Mt.func]),isActive:Mt.bool,canBegin:Mt.bool,onAnimationEnd:Mt.func,shouldReAnimate:Mt.bool,onAnimationStart:Mt.func,onAnimationReStart:Mt.func};function ym(e){"@babel/helpers - typeof";return ym=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ym(e)}function Qv(){return Qv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qv.apply(this,arguments)}function Xye(e,t){return exe(e)||Zye(e,t)||Jye(e,t)||Qye()}function Qye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jye(e,t){if(e){if(typeof e=="string")return h2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h2(e,t)}}function h2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Zye(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function exe(e){if(Array.isArray(e))return e}function m2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function p2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?m2(Object(r),!0).forEach(function(n){txe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function txe(e,t,r){return t=rxe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rxe(e){var t=nxe(e,"string");return ym(t)=="symbol"?t:t+""}function nxe(e,t){if(ym(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(ym(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var g2=function(t,r,n,a,i){var o=Math.min(Math.abs(n)/2,Math.abs(a)/2),l=a>=0?1:-1,c=n>=0?1:-1,u=a>=0&&n>=0||a<0&&n<0?1:0,d;if(o>0&&i instanceof Array){for(var f=[0,0,0,0],h=0,m=4;h<m;h++)f[h]=i[h]>o?o:i[h];d="M".concat(t,",").concat(r+l*f[0]),f[0]>0&&(d+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(u,",").concat(t+c*f[0],",").concat(r)),d+="L ".concat(t+n-c*f[1],",").concat(r),f[1]>0&&(d+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(u,`,
        `).concat(t+n,",").concat(r+l*f[1])),d+="L ".concat(t+n,",").concat(r+a-l*f[2]),f[2]>0&&(d+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(u,`,
        `).concat(t+n-c*f[2],",").concat(r+a)),d+="L ".concat(t+c*f[3],",").concat(r+a),f[3]>0&&(d+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(r+a-l*f[3])),d+="Z"}else if(o>0&&i===+i&&i>0){var y=Math.min(o,i);d="M ".concat(t,",").concat(r+l*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(t+c*y,",").concat(r,`
            L `).concat(t+n-c*y,",").concat(r,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(t+n,",").concat(r+l*y,`
            L `).concat(t+n,",").concat(r+a-l*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(t+n-c*y,",").concat(r+a,`
            L `).concat(t+c*y,",").concat(r+a,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(t,",").concat(r+a-l*y," Z")}else d="M ".concat(t,",").concat(r," h ").concat(n," v ").concat(a," h ").concat(-n," Z");return d},axe=function(t,r){if(!t||!r)return!1;var n=t.x,a=t.y,i=r.x,o=r.y,l=r.width,c=r.height;if(Math.abs(l)>0&&Math.abs(c)>0){var u=Math.min(i,i+l),d=Math.max(i,i+l),f=Math.min(o,o+c),h=Math.max(o,o+c);return n>=u&&n<=d&&a>=f&&a<=h}return!1},ixe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},cN=function(t){var r=p2(p2({},ixe),t),n=w.useRef(),a=w.useState(-1),i=Xye(a,2),o=i[0],l=i[1];w.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var _=n.current.getTotalLength();_&&l(_)}catch{}},[]);var c=r.x,u=r.y,d=r.width,f=r.height,h=r.radius,m=r.className,y=r.animationEasing,g=r.animationDuration,p=r.animationBegin,v=r.isAnimationActive,x=r.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||d===0||f===0)return null;var b=ct("recharts-rectangle",m);return x?$.createElement(Da,{canBegin:o>0,from:{width:d,height:f,x:c,y:u},to:{width:d,height:f,x:c,y:u},duration:g,animationEasing:y,isActive:x},function(_){var j=_.width,S=_.height,C=_.x,P=_.y;return $.createElement(Da,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:g,isActive:v,easing:y},$.createElement("path",Qv({},Ve(r,!0),{className:b,d:g2(C,P,j,S,h),ref:n})))}):$.createElement("path",Qv({},Ve(r,!0),{className:b,d:g2(c,u,d,f,h)}))},sxe=["points","className","baseLinePoints","connectNulls"];function Jc(){return Jc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Jc.apply(this,arguments)}function oxe(e,t){if(e==null)return{};var r=lxe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function lxe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function v2(e){return fxe(e)||dxe(e)||uxe(e)||cxe()}function cxe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uxe(e,t){if(e){if(typeof e=="string")return X1(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return X1(e,t)}}function dxe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function fxe(e){if(Array.isArray(e))return X1(e)}function X1(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var y2=function(t){return t&&t.x===+t.x&&t.y===+t.y},hxe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(function(n){y2(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),y2(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},ih=function(t,r){var n=hxe(t);r&&(n=[n.reduce(function(i,o){return[].concat(v2(i),v2(o))},[])]);var a=n.map(function(i){return i.reduce(function(o,l,c){return"".concat(o).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return n.length===1?"".concat(a,"Z"):a},mxe=function(t,r,n){var a=ih(t,n);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(ih(r.reverse(),n).slice(1))},pxe=function(t){var r=t.points,n=t.className,a=t.baseLinePoints,i=t.connectNulls,o=oxe(t,sxe);if(!r||!r.length)return null;var l=ct("recharts-polygon",n);if(a&&a.length){var c=o.stroke&&o.stroke!=="none",u=mxe(r,a,i);return $.createElement("g",{className:l},$.createElement("path",Jc({},Ve(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:u})),c?$.createElement("path",Jc({},Ve(o,!0),{fill:"none",d:ih(r,i)})):null,c?$.createElement("path",Jc({},Ve(o,!0),{fill:"none",d:ih(a,i)})):null)}var d=ih(r,i);return $.createElement("path",Jc({},Ve(o,!0),{fill:d.slice(-1)==="Z"?o.fill:"none",className:l,d}))};function Q1(){return Q1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Q1.apply(this,arguments)}var ip=function(t){var r=t.cx,n=t.cy,a=t.r,i=t.className,o=ct("recharts-dot",i);return r===+r&&n===+n&&a===+a?w.createElement("circle",Q1({},Ve(t,!1),yv(t),{className:o,cx:r,cy:n,r:a})):null};function xm(e){"@babel/helpers - typeof";return xm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xm(e)}var gxe=["x","y","top","left","width","height","className"];function J1(){return J1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},J1.apply(this,arguments)}function x2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function vxe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?x2(Object(r),!0).forEach(function(n){yxe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yxe(e,t,r){return t=xxe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xxe(e){var t=bxe(e,"string");return xm(t)=="symbol"?t:t+""}function bxe(e,t){if(xm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(xm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wxe(e,t){if(e==null)return{};var r=jxe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function jxe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var _xe=function(t,r,n,a,i,o){return"M".concat(t,",").concat(i,"v").concat(a,"M").concat(o,",").concat(r,"h").concat(n)},Sxe=function(t){var r=t.x,n=r===void 0?0:r,a=t.y,i=a===void 0?0:a,o=t.top,l=o===void 0?0:o,c=t.left,u=c===void 0?0:c,d=t.width,f=d===void 0?0:d,h=t.height,m=h===void 0?0:h,y=t.className,g=wxe(t,gxe),p=vxe({x:n,y:i,top:l,left:u,width:f,height:m},g);return!we(n)||!we(i)||!we(f)||!we(m)||!we(l)||!we(u)?null:$.createElement("path",J1({},Ve(p,!0),{className:ct("recharts-cross",y),d:_xe(n,i,f,m,l,u)}))},Cxe=Zx,Nxe=_4,Pxe=Gi;function kxe(e,t){return e&&e.length?Cxe(e,Pxe(t),Nxe):void 0}var Exe=kxe;const Axe=It(Exe);var Oxe=Zx,Txe=Gi,Rxe=S4;function Mxe(e,t){return e&&e.length?Oxe(e,Txe(t),Rxe):void 0}var $xe=Mxe;const Ixe=It($xe);var Dxe=["cx","cy","angle","ticks","axisLine"],Lxe=["ticks","tick","angle","tickFormatter","stroke"];function Xu(e){"@babel/helpers - typeof";return Xu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xu(e)}function sh(){return sh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sh.apply(this,arguments)}function b2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function el(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?b2(Object(r),!0).forEach(function(n){n0(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function w2(e,t){if(e==null)return{};var r=Bxe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Bxe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Fxe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j2(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,hB(n.key),n)}}function zxe(e,t,r){return t&&j2(e.prototype,t),r&&j2(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Uxe(e,t,r){return t=Jv(t),Vxe(e,fB()?Reflect.construct(t,r||[],Jv(e).constructor):t.apply(e,r))}function Vxe(e,t){if(t&&(Xu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Wxe(e)}function Wxe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fB=function(){return!!e})()}function Jv(e){return Jv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Jv(e)}function Hxe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Z1(e,t)}function Z1(e,t){return Z1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Z1(e,t)}function n0(e,t,r){return t=hB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hB(e){var t=qxe(e,"string");return Xu(t)=="symbol"?t:t+""}function qxe(e,t){if(Xu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Xu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var a0=function(e){function t(){return Fxe(this,t),Uxe(this,t,arguments)}return Hxe(t,e),zxe(t,[{key:"getTickValueCoord",value:function(n){var a=n.coordinate,i=this.props,o=i.angle,l=i.cx,c=i.cy;return tr(l,c,a,o)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,a;switch(n){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a}},{key:"getViewBox",value:function(){var n=this.props,a=n.cx,i=n.cy,o=n.angle,l=n.ticks,c=Axe(l,function(d){return d.coordinate||0}),u=Ixe(l,function(d){return d.coordinate||0});return{cx:a,cy:i,startAngle:o,endAngle:o,innerRadius:u.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,o=n.angle,l=n.ticks,c=n.axisLine,u=w2(n,Dxe),d=l.reduce(function(y,g){return[Math.min(y[0],g.coordinate),Math.max(y[1],g.coordinate)]},[1/0,-1/0]),f=tr(a,i,d[0],o),h=tr(a,i,d[1],o),m=el(el(el({},Ve(u,!1)),{},{fill:"none"},Ve(c,!1)),{},{x1:f.x,y1:f.y,x2:h.x,y2:h.y});return $.createElement("line",sh({className:"recharts-polar-radius-axis-line"},m))}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,o=a.tick,l=a.angle,c=a.tickFormatter,u=a.stroke,d=w2(a,Lxe),f=this.getTickTextAnchor(),h=Ve(d,!1),m=Ve(o,!1),y=i.map(function(g,p){var v=n.getTickValueCoord(g),x=el(el(el(el({textAnchor:f,transform:"rotate(".concat(90-l,", ").concat(v.x,", ").concat(v.y,")")},h),{},{stroke:"none",fill:u},m),{},{index:p},v),{},{payload:g});return $.createElement(gt,sh({className:ct("recharts-polar-radius-axis-tick",J4(o)),key:"tick-".concat(g.coordinate)},Mo(n.props,g,p)),t.renderTickItem(o,x,c?c(g.value,p):g.value))});return $.createElement(gt,{className:"recharts-polar-radius-axis-ticks"},y)}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.axisLine,o=n.tick;return!a||!a.length?null:$.createElement(gt,{className:ct("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),o&&this.renderTicks(),ln.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,a,i){var o;return $.isValidElement(n)?o=$.cloneElement(n,a):Je(n)?o=n(a):o=$.createElement(Wl,sh({},a,{className:"recharts-polar-radius-axis-tick-value"}),i),o}}])}(w.PureComponent);n0(a0,"displayName","PolarRadiusAxis");n0(a0,"axisType","radiusAxis");n0(a0,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Qu(e){"@babel/helpers - typeof";return Qu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qu(e)}function fl(){return fl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fl.apply(this,arguments)}function _2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function tl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_2(Object(r),!0).forEach(function(n){i0(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Kxe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S2(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,pB(n.key),n)}}function Yxe(e,t,r){return t&&S2(e.prototype,t),r&&S2(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Gxe(e,t,r){return t=Zv(t),Xxe(e,mB()?Reflect.construct(t,r||[],Zv(e).constructor):t.apply(e,r))}function Xxe(e,t){if(t&&(Qu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Qxe(e)}function Qxe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mB=function(){return!!e})()}function Zv(e){return Zv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Zv(e)}function Jxe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&e_(e,t)}function e_(e,t){return e_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},e_(e,t)}function i0(e,t,r){return t=pB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pB(e){var t=Zxe(e,"string");return Qu(t)=="symbol"?t:t+""}function Zxe(e,t){if(Qu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Qu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var e0e=Math.PI/180,C2=1e-5,s0=function(e){function t(){return Kxe(this,t),Gxe(this,t,arguments)}return Jxe(t,e),Yxe(t,[{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.cx,o=a.cy,l=a.radius,c=a.orientation,u=a.tickSize,d=u||8,f=tr(i,o,l,n.coordinate),h=tr(i,o,l+(c==="inner"?-1:1)*d,n.coordinate);return{x1:f.x,y1:f.y,x2:h.x,y2:h.y}}},{key:"getTickTextAnchor",value:function(n){var a=this.props.orientation,i=Math.cos(-n.coordinate*e0e),o;return i>C2?o=a==="outer"?"start":"end":i<-C2?o=a==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,o=n.radius,l=n.axisLine,c=n.axisLineType,u=tl(tl({},Ve(this.props,!1)),{},{fill:"none"},Ve(l,!1));if(c==="circle")return $.createElement(ip,fl({className:"recharts-polar-angle-axis-line"},u,{cx:a,cy:i,r:o}));var d=this.props.ticks,f=d.map(function(h){return tr(a,i,o,h.coordinate)});return $.createElement(pxe,fl({className:"recharts-polar-angle-axis-line"},u,{points:f}))}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,o=a.tick,l=a.tickLine,c=a.tickFormatter,u=a.stroke,d=Ve(this.props,!1),f=Ve(o,!1),h=tl(tl({},d),{},{fill:"none"},Ve(l,!1)),m=i.map(function(y,g){var p=n.getTickLineCoord(y),v=n.getTickTextAnchor(y),x=tl(tl(tl({textAnchor:v},d),{},{stroke:"none",fill:u},f),{},{index:g,payload:y,x:p.x2,y:p.y2});return $.createElement(gt,fl({className:ct("recharts-polar-angle-axis-tick",J4(o)),key:"tick-".concat(y.coordinate)},Mo(n.props,y,g)),l&&$.createElement("line",fl({className:"recharts-polar-angle-axis-tick-line"},h,p)),o&&t.renderTickItem(o,x,c?c(y.value,g):y.value))});return $.createElement(gt,{className:"recharts-polar-angle-axis-ticks"},m)}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.radius,o=n.axisLine;return i<=0||!a||!a.length?null:$.createElement(gt,{className:ct("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,a,i){var o;return $.isValidElement(n)?o=$.cloneElement(n,a):Je(n)?o=n(a):o=$.createElement(Wl,fl({},a,{className:"recharts-polar-angle-axis-tick-value"}),i),o}}])}(w.PureComponent);i0(s0,"displayName","PolarAngleAxis");i0(s0,"axisType","angleAxis");i0(s0,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var t0e=xL,r0e=t0e(Object.getPrototypeOf,Object),n0e=r0e,a0e=Ms,i0e=n0e,s0e=$s,o0e="[object Object]",l0e=Function.prototype,c0e=Object.prototype,gB=l0e.toString,u0e=c0e.hasOwnProperty,d0e=gB.call(Object);function f0e(e){if(!s0e(e)||a0e(e)!=o0e)return!1;var t=i0e(e);if(t===null)return!0;var r=u0e.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&gB.call(r)==d0e}var h0e=f0e;const m0e=It(h0e);var p0e=Ms,g0e=$s,v0e="[object Boolean]";function y0e(e){return e===!0||e===!1||g0e(e)&&p0e(e)==v0e}var x0e=y0e;const b0e=It(x0e);function bm(e){"@babel/helpers - typeof";return bm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bm(e)}function ey(){return ey=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ey.apply(this,arguments)}function w0e(e,t){return C0e(e)||S0e(e,t)||_0e(e,t)||j0e()}function j0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _0e(e,t){if(e){if(typeof e=="string")return N2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N2(e,t)}}function N2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function S0e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function C0e(e){if(Array.isArray(e))return e}function P2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function k2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?P2(Object(r),!0).forEach(function(n){N0e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function N0e(e,t,r){return t=P0e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P0e(e){var t=k0e(e,"string");return bm(t)=="symbol"?t:t+""}function k0e(e,t){if(bm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(bm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var E2=function(t,r,n,a,i){var o=n-a,l;return l="M ".concat(t,",").concat(r),l+="L ".concat(t+n,",").concat(r),l+="L ".concat(t+n-o/2,",").concat(r+i),l+="L ".concat(t+n-o/2-a,",").concat(r+i),l+="L ".concat(t,",").concat(r," Z"),l},E0e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},A0e=function(t){var r=k2(k2({},E0e),t),n=w.useRef(),a=w.useState(-1),i=w0e(a,2),o=i[0],l=i[1];w.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var b=n.current.getTotalLength();b&&l(b)}catch{}},[]);var c=r.x,u=r.y,d=r.upperWidth,f=r.lowerWidth,h=r.height,m=r.className,y=r.animationEasing,g=r.animationDuration,p=r.animationBegin,v=r.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||h!==+h||d===0&&f===0||h===0)return null;var x=ct("recharts-trapezoid",m);return v?$.createElement(Da,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:h,x:c,y:u},to:{upperWidth:d,lowerWidth:f,height:h,x:c,y:u},duration:g,animationEasing:y,isActive:v},function(b){var _=b.upperWidth,j=b.lowerWidth,S=b.height,C=b.x,P=b.y;return $.createElement(Da,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:g,easing:y},$.createElement("path",ey({},Ve(r,!0),{className:x,d:E2(C,P,_,j,S),ref:n})))}):$.createElement("g",null,$.createElement("path",ey({},Ve(r,!0),{className:x,d:E2(c,u,d,f,h)})))},O0e=["option","shapeType","propTransformer","activeClassName","isActive"];function wm(e){"@babel/helpers - typeof";return wm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wm(e)}function T0e(e,t){if(e==null)return{};var r=R0e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function R0e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function A2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ty(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?A2(Object(r),!0).forEach(function(n){M0e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function M0e(e,t,r){return t=$0e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $0e(e){var t=I0e(e,"string");return wm(t)=="symbol"?t:t+""}function I0e(e,t){if(wm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(wm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function D0e(e,t){return ty(ty({},t),e)}function L0e(e,t){return e==="symbols"}function O2(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return $.createElement(cN,r);case"trapezoid":return $.createElement(A0e,r);case"sector":return $.createElement(tB,r);case"symbols":if(L0e(t))return $.createElement(Vx,r);break;default:return null}}function B0e(e){return w.isValidElement(e)?e.props:e}function ry(e){var t=e.option,r=e.shapeType,n=e.propTransformer,a=n===void 0?D0e:n,i=e.activeClassName,o=i===void 0?"recharts-active-shape":i,l=e.isActive,c=T0e(e,O0e),u;if(w.isValidElement(t))u=w.cloneElement(t,ty(ty({},c),B0e(t)));else if(Je(t))u=t(c);else if(m0e(t)&&!b0e(t)){var d=a(t,c);u=$.createElement(O2,{shapeType:r,elementProps:d})}else{var f=c;u=$.createElement(O2,{shapeType:r,elementProps:f})}return l?$.createElement(gt,{className:o},u):u}function o0(e,t){return t!=null&&"trapezoids"in e.props}function l0(e,t){return t!=null&&"sectors"in e.props}function jm(e,t){return t!=null&&"points"in e.props}function F0e(e,t){var r,n,a=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,i=e.y===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.y)||e.y===t.y;return a&&i}function z0e(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function U0e(e,t){var r=e.x===t.x,n=e.y===t.y,a=e.z===t.z;return r&&n&&a}function V0e(e,t){var r;return o0(e,t)?r=F0e:l0(e,t)?r=z0e:jm(e,t)&&(r=U0e),r}function W0e(e,t){var r;return o0(e,t)?r="trapezoids":l0(e,t)?r="sectors":jm(e,t)&&(r="points"),r}function H0e(e,t){if(o0(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(l0(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return jm(e,t)?t.payload:{}}function q0e(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,a=W0e(r,t),i=H0e(r,t),o=n.filter(function(c,u){var d=$o(i,c),f=r.props[a].filter(function(y){var g=V0e(r,t);return g(y,t)}),h=r.props[a].indexOf(f[f.length-1]),m=u===h;return d&&m}),l=n.indexOf(o[o.length-1]);return l}var Ng;function Ju(e){"@babel/helpers - typeof";return Ju=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ju(e)}function Zc(){return Zc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zc.apply(this,arguments)}function T2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Jt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?T2(Object(r),!0).forEach(function(n){ka(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function K0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R2(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,yB(n.key),n)}}function Y0e(e,t,r){return t&&R2(e.prototype,t),r&&R2(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function G0e(e,t,r){return t=ny(t),X0e(e,vB()?Reflect.construct(t,r||[],ny(e).constructor):t.apply(e,r))}function X0e(e,t){if(t&&(Ju(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Q0e(e)}function Q0e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vB=function(){return!!e})()}function ny(e){return ny=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ny(e)}function J0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&t_(e,t)}function t_(e,t){return t_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},t_(e,t)}function ka(e,t,r){return t=yB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yB(e){var t=Z0e(e,"string");return Ju(t)=="symbol"?t:t+""}function Z0e(e,t){if(Ju(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Ju(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Xi=function(e){function t(r){var n;return K0e(this,t),n=G0e(this,t,[r]),ka(n,"pieRef",null),ka(n,"sectorRefs",[]),ka(n,"id",Vo("recharts-pie-")),ka(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Je(a)&&a()}),ka(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Je(a)&&a()}),n.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},n}return J0e(t,e),Y0e(t,[{key:"isActiveIndex",value:function(n){var a=this.props.activeIndex;return Array.isArray(a)?a.indexOf(n)!==-1:n===a}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.label,l=i.labelLine,c=i.dataKey,u=i.valueKey,d=Ve(this.props,!1),f=Ve(o,!1),h=Ve(l,!1),m=o&&o.offsetRadius||20,y=n.map(function(g,p){var v=(g.startAngle+g.endAngle)/2,x=tr(g.cx,g.cy,g.outerRadius+m,v),b=Jt(Jt(Jt(Jt({},d),g),{},{stroke:"none"},f),{},{index:p,textAnchor:t.getTextAnchor(x.x,g.cx)},x),_=Jt(Jt(Jt(Jt({},d),g),{},{fill:"none",stroke:g.fill},h),{},{index:p,points:[tr(g.cx,g.cy,g.outerRadius,v),x]}),j=c;return Qe(c)&&Qe(u)?j="value":Qe(c)&&(j=u),$.createElement(gt,{key:"label-".concat(g.startAngle,"-").concat(g.endAngle,"-").concat(g.midAngle,"-").concat(p)},l&&t.renderLabelLineItem(l,_,"line"),t.renderLabelItem(o,b,dr(g,j)))});return $.createElement(gt,{className:"recharts-pie-labels"},y)}},{key:"renderSectorsStatically",value:function(n){var a=this,i=this.props,o=i.activeShape,l=i.blendStroke,c=i.inactiveShape;return n.map(function(u,d){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&n.length!==1)return null;var f=a.isActiveIndex(d),h=c&&a.hasActiveIndex()?c:null,m=f?o:h,y=Jt(Jt({},u),{},{stroke:l?u.fill:u.stroke,tabIndex:-1});return $.createElement(gt,Zc({ref:function(p){p&&!a.sectorRefs.includes(p)&&a.sectorRefs.push(p)},tabIndex:-1,className:"recharts-pie-sector"},Mo(a.props,u,d),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(d)}),$.createElement(ry,Zc({option:m,isActive:f,shapeType:"sector"},y)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,a=this.props,i=a.sectors,o=a.isAnimationActive,l=a.animationBegin,c=a.animationDuration,u=a.animationEasing,d=a.animationId,f=this.state,h=f.prevSectors,m=f.prevIsAnimationActive;return $.createElement(Da,{begin:l,duration:c,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(d,"-").concat(m),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(y){var g=y.t,p=[],v=i&&i[0],x=v.startAngle;return i.forEach(function(b,_){var j=h&&h[_],S=_>0?ha(b,"paddingAngle",0):0;if(j){var C=wr(j.endAngle-j.startAngle,b.endAngle-b.startAngle),P=Jt(Jt({},b),{},{startAngle:x+S,endAngle:x+C(g)+S});p.push(P),x=P.endAngle}else{var N=b.endAngle,E=b.startAngle,A=wr(0,N-E),T=A(g),R=Jt(Jt({},b),{},{startAngle:x+S,endAngle:x+T+S});p.push(R),x=R.endAngle}}),$.createElement(gt,null,n.renderSectorsStatically(p))})}},{key:"attachKeyboardHandlers",value:function(n){var a=this;n.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var o=++a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[o].focus(),a.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--a.state.sectorToFocus<0?a.sectorRefs.length-1:a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[l].focus(),a.setState({sectorToFocus:l});break}case"Escape":{a.sectorRefs[a.state.sectorToFocus].blur(),a.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,a=n.sectors,i=n.isAnimationActive,o=this.state.prevSectors;return i&&a&&a.length&&(!o||!$o(o,a))?this.renderSectorsWithAnimation():this.renderSectorsStatically(a)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,a=this.props,i=a.hide,o=a.sectors,l=a.className,c=a.label,u=a.cx,d=a.cy,f=a.innerRadius,h=a.outerRadius,m=a.isAnimationActive,y=this.state.isAnimationFinished;if(i||!o||!o.length||!we(u)||!we(d)||!we(f)||!we(h))return null;var g=ct("recharts-pie",l);return $.createElement(gt,{tabIndex:this.props.rootTabIndex,className:g,ref:function(v){n.pieRef=v}},this.renderSectors(),c&&this.renderLabels(o),ln.renderCallByParent(this.props,null,!1),(!m||y)&&fi.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return a.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:a.curSectors,isAnimationFinished:!0}:n.sectors!==a.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,a){return n>a?"start":n<a?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,a,i){if($.isValidElement(n))return $.cloneElement(n,a);if(Je(n))return n(a);var o=ct("recharts-pie-label-line",typeof n!="boolean"?n.className:"");return $.createElement(Po,Zc({},a,{key:i,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(n,a,i){if($.isValidElement(n))return $.cloneElement(n,a);var o=i;if(Je(n)&&(o=n(a),$.isValidElement(o)))return o;var l=ct("recharts-pie-label-text",typeof n!="boolean"&&!Je(n)?n.className:"");return $.createElement(Wl,Zc({},a,{alignmentBaseline:"middle",className:l}),o)}}])}(w.PureComponent);Ng=Xi;ka(Xi,"displayName","Pie");ka(Xi,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Ta.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});ka(Xi,"parseDeltaAngle",function(e,t){var r=Mn(t-e),n=Math.min(Math.abs(t-e),360);return r*n});ka(Xi,"getRealPieData",function(e){var t=e.data,r=e.children,n=Ve(e,!1),a=Bn(r,ic);return t&&t.length?t.map(function(i,o){return Jt(Jt(Jt({payload:i},n),i),a&&a[o]&&a[o].props)}):a&&a.length?a.map(function(i){return Jt(Jt({},n),i.props)}):[]});ka(Xi,"parseCoordinateOfPie",function(e,t){var r=t.top,n=t.left,a=t.width,i=t.height,o=Q4(a,i),l=n+$n(e.cx,a,a/2),c=r+$n(e.cy,i,i/2),u=$n(e.innerRadius,o,0),d=$n(e.outerRadius,o,o*.8),f=e.maxRadius||Math.sqrt(a*a+i*i)/2;return{cx:l,cy:c,innerRadius:u,outerRadius:d,maxRadius:f}});ka(Xi,"getComposedData",function(e){var t=e.item,r=e.offset,n=t.type.defaultProps!==void 0?Jt(Jt({},t.type.defaultProps),t.props):t.props,a=Ng.getRealPieData(n);if(!a||!a.length)return null;var i=n.cornerRadius,o=n.startAngle,l=n.endAngle,c=n.paddingAngle,u=n.dataKey,d=n.nameKey,f=n.valueKey,h=n.tooltipType,m=Math.abs(n.minAngle),y=Ng.parseCoordinateOfPie(n,r),g=Ng.parseDeltaAngle(o,l),p=Math.abs(g),v=u;Qe(u)&&Qe(f)?(di(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),v="value"):Qe(u)&&(di(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),v=f);var x=a.filter(function(P){return dr(P,v,0)!==0}).length,b=(p>=360?x:x-1)*c,_=p-x*m-b,j=a.reduce(function(P,N){var E=dr(N,v,0);return P+(we(E)?E:0)},0),S;if(j>0){var C;S=a.map(function(P,N){var E=dr(P,v,0),A=dr(P,d,N),T=(we(E)?E:0)/j,R;N?R=C.endAngle+Mn(g)*c*(E!==0?1:0):R=o;var k=R+Mn(g)*((E!==0?m:0)+T*_),O=(R+k)/2,M=(y.innerRadius+y.outerRadius)/2,D=[{name:A,value:E,payload:P,dataKey:v,type:h}],L=tr(y.cx,y.cy,M,O);return C=Jt(Jt(Jt({percent:T,cornerRadius:i,name:A,tooltipPayload:D,midAngle:O,middleRadius:M,tooltipPosition:L},P),y),{},{value:dr(P,v),startAngle:R,endAngle:k,payload:P,paddingAngle:Mn(g)*c}),C})}return Jt(Jt({},y),{},{sectors:S,data:a})});var ebe=Math.ceil,tbe=Math.max;function rbe(e,t,r,n){for(var a=-1,i=tbe(ebe((t-e)/(r||1)),0),o=Array(i);i--;)o[n?i:++a]=e,e+=r;return o}var nbe=rbe,abe=LL,M2=1/0,ibe=17976931348623157e292;function sbe(e){if(!e)return e===0?e:0;if(e=abe(e),e===M2||e===-M2){var t=e<0?-1:1;return t*ibe}return e===e?e:0}var xB=sbe,obe=nbe,lbe=qx,Qb=xB;function cbe(e){return function(t,r,n){return n&&typeof n!="number"&&lbe(t,r,n)&&(r=n=void 0),t=Qb(t),r===void 0?(r=t,t=0):r=Qb(r),n=n===void 0?t<r?1:-1:Qb(n),obe(t,r,n,e)}}var ube=cbe,dbe=ube,fbe=dbe(),hbe=fbe;const ay=It(hbe);function _m(e){"@babel/helpers - typeof";return _m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_m(e)}function $2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function I2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$2(Object(r),!0).forEach(function(n){bB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bB(e,t,r){return t=mbe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mbe(e){var t=pbe(e,"string");return _m(t)=="symbol"?t:t+""}function pbe(e,t){if(_m(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(_m(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gbe=["Webkit","Moz","O","ms"],vbe=function(t,r){var n=t.replace(/(\w)/,function(i){return i.toUpperCase()}),a=gbe.reduce(function(i,o){return I2(I2({},i),{},bB({},o+n,r))},{});return a[t]=r,a};function Zu(e){"@babel/helpers - typeof";return Zu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zu(e)}function iy(){return iy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},iy.apply(this,arguments)}function D2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Jb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?D2(Object(r),!0).forEach(function(n){na(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ybe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L2(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,jB(n.key),n)}}function xbe(e,t,r){return t&&L2(e.prototype,t),r&&L2(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function bbe(e,t,r){return t=sy(t),wbe(e,wB()?Reflect.construct(t,r||[],sy(e).constructor):t.apply(e,r))}function wbe(e,t){if(t&&(Zu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jbe(e)}function jbe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wB=function(){return!!e})()}function sy(e){return sy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},sy(e)}function _be(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r_(e,t)}function r_(e,t){return r_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},r_(e,t)}function na(e,t,r){return t=jB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jB(e){var t=Sbe(e,"string");return Zu(t)=="symbol"?t:t+""}function Sbe(e,t){if(Zu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Zu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Cbe=function(t){var r=t.data,n=t.startIndex,a=t.endIndex,i=t.x,o=t.width,l=t.travellerWidth;if(!r||!r.length)return{};var c=r.length,u=rh().domain(ay(0,c)).range([i,i+o-l]),d=u.domain().map(function(f){return u(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(n),endX:u(a),scale:u,scaleValues:d}},B2=function(t){return t.changedTouches&&!!t.changedTouches.length},ed=function(e){function t(r){var n;return ybe(this,t),n=bbe(this,t,[r]),na(n,"handleDrag",function(a){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(a):n.state.isSlideMoving&&n.handleSlideDrag(a)}),na(n,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&n.handleDrag(a.changedTouches[0])}),na(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=n.props,i=a.endIndex,o=a.onDragEnd,l=a.startIndex;o==null||o({endIndex:i,startIndex:l})}),n.detachDragEndListener()}),na(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),na(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),na(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),na(n,"handleSlideDragStart",function(a){var i=B2(a)?a.changedTouches[0]:a;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return _be(t,e),xbe(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var a=n.startX,i=n.endX,o=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,d=u.length-1,f=Math.min(a,i),h=Math.max(a,i),m=t.getIndexInRange(o,f),y=t.getIndexInRange(o,h);return{startIndex:m-m%c,endIndex:y===d?d:y-y%c}}},{key:"getTextOfTick",value:function(n){var a=this.props,i=a.data,o=a.tickFormatter,l=a.dataKey,c=dr(i[n],l,n);return Je(o)?o(c,n):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var a=this.state,i=a.slideMoveStartX,o=a.startX,l=a.endX,c=this.props,u=c.x,d=c.width,f=c.travellerWidth,h=c.startIndex,m=c.endIndex,y=c.onChange,g=n.pageX-i;g>0?g=Math.min(g,u+d-f-l,u+d-f-o):g<0&&(g=Math.max(g,u-o,u-l));var p=this.getIndex({startX:o+g,endX:l+g});(p.startIndex!==h||p.endIndex!==m)&&y&&y(p),this.setState({startX:o+g,endX:l+g,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,a){var i=B2(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var a=this.state,i=a.brushMoveStartX,o=a.movingTravellerId,l=a.endX,c=a.startX,u=this.state[o],d=this.props,f=d.x,h=d.width,m=d.travellerWidth,y=d.onChange,g=d.gap,p=d.data,v={startX:this.state.startX,endX:this.state.endX},x=n.pageX-i;x>0?x=Math.min(x,f+h-m-u):x<0&&(x=Math.max(x,f-u)),v[o]=u+x;var b=this.getIndex(v),_=b.startIndex,j=b.endIndex,S=function(){var P=p.length-1;return o==="startX"&&(l>c?_%g===0:j%g===0)||l<c&&j===P||o==="endX"&&(l>c?j%g===0:_%g===0)||l>c&&j===P};this.setState(na(na({},o,u+x),"brushMoveStartX",n.pageX),function(){y&&S()&&y(b)})}},{key:"handleTravellerMoveKeyboard",value:function(n,a){var i=this,o=this.state,l=o.scaleValues,c=o.startX,u=o.endX,d=this.state[a],f=l.indexOf(d);if(f!==-1){var h=f+n;if(!(h===-1||h>=l.length)){var m=l[h];a==="startX"&&m>=u||a==="endX"&&m<=c||this.setState(na({},a,m),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,l=n.height,c=n.fill,u=n.stroke;return $.createElement("rect",{stroke:u,fill:c,x:a,y:i,width:o,height:l})}},{key:"renderPanorama",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,l=n.height,c=n.data,u=n.children,d=n.padding,f=w.Children.only(u);return f?$.cloneElement(f,{x:a,y:i,width:o,height:l,margin:d,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(n,a){var i,o,l=this,c=this.props,u=c.y,d=c.travellerWidth,f=c.height,h=c.traveller,m=c.ariaLabel,y=c.data,g=c.startIndex,p=c.endIndex,v=Math.max(n,this.props.x),x=Jb(Jb({},Ve(this.props,!1)),{},{x:v,y:u,width:d,height:f}),b=m||"Min value: ".concat((i=y[g])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=y[p])===null||o===void 0?void 0:o.name);return $.createElement(gt,{tabIndex:0,role:"slider","aria-label":b,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(j){["ArrowLeft","ArrowRight"].includes(j.key)&&(j.preventDefault(),j.stopPropagation(),l.handleTravellerMoveKeyboard(j.key==="ArrowRight"?1:-1,a))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(h,x))}},{key:"renderSlide",value:function(n,a){var i=this.props,o=i.y,l=i.height,c=i.stroke,u=i.travellerWidth,d=Math.min(n,a)+u,f=Math.max(Math.abs(a-n)-u,0);return $.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:d,y:o,width:f,height:l})}},{key:"renderText",value:function(){var n=this.props,a=n.startIndex,i=n.endIndex,o=n.y,l=n.height,c=n.travellerWidth,u=n.stroke,d=this.state,f=d.startX,h=d.endX,m=5,y={pointerEvents:"none",fill:u};return $.createElement(gt,{className:"recharts-brush-texts"},$.createElement(Wl,iy({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,h)-m,y:o+l/2},y),this.getTextOfTick(a)),$.createElement(Wl,iy({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,h)+c+m,y:o+l/2},y),this.getTextOfTick(i)))}},{key:"render",value:function(){var n=this.props,a=n.data,i=n.className,o=n.children,l=n.x,c=n.y,u=n.width,d=n.height,f=n.alwaysShowText,h=this.state,m=h.startX,y=h.endX,g=h.isTextActive,p=h.isSlideMoving,v=h.isTravellerMoving,x=h.isTravellerFocused;if(!a||!a.length||!we(l)||!we(c)||!we(u)||!we(d)||u<=0||d<=0)return null;var b=ct("recharts-brush",i),_=$.Children.count(o)===1,j=vbe("userSelect","none");return $.createElement(gt,{className:b,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:j},this.renderBackground(),_&&this.renderPanorama(),this.renderSlide(m,y),this.renderTravellerLayer(m,"startX"),this.renderTravellerLayer(y,"endX"),(g||p||v||x||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var a=n.x,i=n.y,o=n.width,l=n.height,c=n.stroke,u=Math.floor(i+l/2)-1;return $.createElement($.Fragment,null,$.createElement("rect",{x:a,y:i,width:o,height:l,fill:c,stroke:"none"}),$.createElement("line",{x1:a+1,y1:u,x2:a+o-1,y2:u,fill:"none",stroke:"#fff"}),$.createElement("line",{x1:a+1,y1:u+2,x2:a+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,a){var i;return $.isValidElement(n)?i=$.cloneElement(n,a):Je(n)?i=n(a):i=t.renderDefaultTraveller(a),i}},{key:"getDerivedStateFromProps",value:function(n,a){var i=n.data,o=n.width,l=n.x,c=n.travellerWidth,u=n.updateId,d=n.startIndex,f=n.endIndex;if(i!==a.prevData||u!==a.prevUpdateId)return Jb({prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o},i&&i.length?Cbe({data:i,width:o,x:l,travellerWidth:c,startIndex:d,endIndex:f}):{scale:null,scaleValues:null});if(a.scale&&(o!==a.prevWidth||l!==a.prevX||c!==a.prevTravellerWidth)){a.scale.range([l,l+o-c]);var h=a.scale.domain().map(function(m){return a.scale(m)});return{prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o,startX:a.scale(n.startIndex),endX:a.scale(n.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(n,a){for(var i=n.length,o=0,l=i-1;l-o>1;){var c=Math.floor((o+l)/2);n[c]>a?l=c:o=c}return a>=n[l]?l:o}}])}(w.PureComponent);na(ed,"displayName","Brush");na(ed,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Nbe=$C;function Pbe(e,t){var r;return Nbe(e,function(n,a,i){return r=t(n,a,i),!r}),!!r}var kbe=Pbe,Ebe=dL,Abe=Gi,Obe=kbe,Tbe=ea,Rbe=qx;function Mbe(e,t,r){var n=Tbe(e)?Ebe:Obe;return r&&Rbe(e,t,r)&&(t=void 0),n(e,Abe(t))}var $be=Mbe;const Ibe=It($be);var Ui=function(t,r){var n=t.alwaysShow,a=t.ifOverflow;return n&&(a="extendDomain"),a===r},F2=RL;function Dbe(e,t,r){t=="__proto__"&&F2?F2(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var Lbe=Dbe,Bbe=Lbe,Fbe=OL,zbe=Gi;function Ube(e,t){var r={};return t=zbe(t),Fbe(e,function(n,a,i){Bbe(r,a,t(n,a,i))}),r}var Vbe=Ube;const Wbe=It(Vbe);function Hbe(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}var qbe=Hbe,Kbe=$C;function Ybe(e,t){var r=!0;return Kbe(e,function(n,a,i){return r=!!t(n,a,i),r}),r}var Gbe=Ybe,Xbe=qbe,Qbe=Gbe,Jbe=Gi,Zbe=ea,ewe=qx;function twe(e,t,r){var n=Zbe(e)?Xbe:Qbe;return r&&ewe(e,t,r)&&(t=void 0),n(e,Jbe(t))}var rwe=twe;const _B=It(rwe);var nwe=["x","y"];function Sm(e){"@babel/helpers - typeof";return Sm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sm(e)}function n_(){return n_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n_.apply(this,arguments)}function z2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Nf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?z2(Object(r),!0).forEach(function(n){awe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function awe(e,t,r){return t=iwe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iwe(e){var t=swe(e,"string");return Sm(t)=="symbol"?t:t+""}function swe(e,t){if(Sm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Sm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function owe(e,t){if(e==null)return{};var r=lwe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function lwe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function cwe(e,t){var r=e.x,n=e.y,a=owe(e,nwe),i="".concat(r),o=parseInt(i,10),l="".concat(n),c=parseInt(l,10),u="".concat(t.height||a.height),d=parseInt(u,10),f="".concat(t.width||a.width),h=parseInt(f,10);return Nf(Nf(Nf(Nf(Nf({},t),a),o?{x:o}:{}),c?{y:c}:{}),{},{height:d,width:h,name:t.name,radius:t.radius})}function U2(e){return $.createElement(ry,n_({shapeType:"rectangle",propTransformer:cwe,activeClassName:"recharts-active-bar"},e))}var uwe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,a){if(typeof t=="number")return t;var i=we(n)||$ee(n);return i?t(n,a):(i||ql(),r)}},dwe=["value","background"],SB;function td(e){"@babel/helpers - typeof";return td=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},td(e)}function fwe(e,t){if(e==null)return{};var r=hwe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function hwe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function oy(){return oy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},oy.apply(this,arguments)}function V2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Fr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?V2(Object(r),!0).forEach(function(n){uo(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mwe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function W2(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,NB(n.key),n)}}function pwe(e,t,r){return t&&W2(e.prototype,t),r&&W2(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function gwe(e,t,r){return t=ly(t),vwe(e,CB()?Reflect.construct(t,r||[],ly(e).constructor):t.apply(e,r))}function vwe(e,t){if(t&&(td(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ywe(e)}function ywe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function CB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(CB=function(){return!!e})()}function ly(e){return ly=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ly(e)}function xwe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a_(e,t)}function a_(e,t){return a_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},a_(e,t)}function uo(e,t,r){return t=NB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NB(e){var t=bwe(e,"string");return td(t)=="symbol"?t:t+""}function bwe(e,t){if(td(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(td(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var rr=function(e){function t(){var r;mwe(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=gwe(this,t,[].concat(a)),uo(r,"state",{isAnimationFinished:!1}),uo(r,"id",Vo("recharts-bar-")),uo(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),uo(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return xwe(t,e),pwe(t,[{key:"renderRectanglesStatically",value:function(n){var a=this,i=this.props,o=i.shape,l=i.dataKey,c=i.activeIndex,u=i.activeBar,d=Ve(this.props,!1);return n&&n.map(function(f,h){var m=h===c,y=m?u:o,g=Fr(Fr(Fr({},d),f),{},{isActive:m,option:y,index:h,dataKey:l,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return $.createElement(gt,oy({className:"recharts-bar-rectangle"},Mo(a.props,f,h),{key:"rectangle-".concat(f==null?void 0:f.x,"-").concat(f==null?void 0:f.y,"-").concat(f==null?void 0:f.value,"-").concat(h)}),$.createElement(U2,g))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,a=this.props,i=a.data,o=a.layout,l=a.isAnimationActive,c=a.animationBegin,u=a.animationDuration,d=a.animationEasing,f=a.animationId,h=this.state.prevData;return $.createElement(Da,{begin:c,duration:u,isActive:l,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(m){var y=m.t,g=i.map(function(p,v){var x=h&&h[v];if(x){var b=wr(x.x,p.x),_=wr(x.y,p.y),j=wr(x.width,p.width),S=wr(x.height,p.height);return Fr(Fr({},p),{},{x:b(y),y:_(y),width:j(y),height:S(y)})}if(o==="horizontal"){var C=wr(0,p.height),P=C(y);return Fr(Fr({},p),{},{y:p.y+p.height-P,height:P})}var N=wr(0,p.width),E=N(y);return Fr(Fr({},p),{},{width:E})});return $.createElement(gt,null,n.renderRectanglesStatically(g))})}},{key:"renderRectangles",value:function(){var n=this.props,a=n.data,i=n.isAnimationActive,o=this.state.prevData;return i&&a&&a.length&&(!o||!$o(o,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var n=this,a=this.props,i=a.data,o=a.dataKey,l=a.activeIndex,c=Ve(this.props.background,!1);return i.map(function(u,d){u.value;var f=u.background,h=fwe(u,dwe);if(!f)return null;var m=Fr(Fr(Fr(Fr(Fr({},h),{},{fill:"#eee"},f),c),Mo(n.props,u,d)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:o,index:d,className:"recharts-bar-background-rectangle"});return $.createElement(U2,oy({key:"background-bar-".concat(d),option:n.props.background,isActive:d===l},m))})}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,l=i.xAxis,c=i.yAxis,u=i.layout,d=i.children,f=Bn(d,ef);if(!f)return null;var h=u==="vertical"?o[0].height/2:o[0].width/2,m=function(p,v){var x=Array.isArray(p.value)?p.value[1]:p.value;return{x:p.x,y:p.y,value:x,errorVal:dr(p,v)}},y={clipPath:n?"url(#clipPath-".concat(a,")"):null};return $.createElement(gt,y,f.map(function(g){return $.cloneElement(g,{key:"error-bar-".concat(a,"-").concat(g.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,offset:h,dataPointFormatter:m})}))}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.data,o=n.className,l=n.xAxis,c=n.yAxis,u=n.left,d=n.top,f=n.width,h=n.height,m=n.isAnimationActive,y=n.background,g=n.id;if(a||!i||!i.length)return null;var p=this.state.isAnimationFinished,v=ct("recharts-bar",o),x=l&&l.allowDataOverflow,b=c&&c.allowDataOverflow,_=x||b,j=Qe(g)?this.id:g;return $.createElement(gt,{className:v},x||b?$.createElement("defs",null,$.createElement("clipPath",{id:"clipPath-".concat(j)},$.createElement("rect",{x:x?u:u-f/2,y:b?d:d-h/2,width:x?f:f*2,height:b?h:h*2}))):null,$.createElement(gt,{className:"recharts-bar-rectangles",clipPath:_?"url(#clipPath-".concat(j,")"):null},y?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(_,j),(!m||p)&&fi.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:a.curData}:n.data!==a.curData?{curData:n.data}:null}}])}(w.PureComponent);SB=rr;uo(rr,"displayName","Bar");uo(rr,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Ta.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});uo(rr,"getComposedData",function(e){var t=e.props,r=e.item,n=e.barPosition,a=e.bandSize,i=e.xAxis,o=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,u=e.stackedData,d=e.dataStartIndex,f=e.displayedData,h=e.offset,m=ege(n,r);if(!m)return null;var y=t.layout,g=r.type.defaultProps,p=g!==void 0?Fr(Fr({},g),r.props):r.props,v=p.dataKey,x=p.children,b=p.minPointSize,_=y==="horizontal"?o:i,j=u?_.scale.domain():null,S=oge({numericAxis:_}),C=Bn(x,ic),P=f.map(function(N,E){var A,T,R,k,O,M;u?A=tge(u[d+E],j):(A=dr(N,v),Array.isArray(A)||(A=[S,A]));var D=uwe(b,SB.defaultProps.minPointSize)(A[1],E);if(y==="horizontal"){var L,B=[o.scale(A[0]),o.scale(A[1])],z=B[0],Z=B[1];T=RO({axis:i,ticks:l,bandSize:a,offset:m.offset,entry:N,index:E}),R=(L=Z??z)!==null&&L!==void 0?L:void 0,k=m.size;var ee=z-Z;if(O=Number.isNaN(ee)?0:ee,M={x:T,y:o.y,width:k,height:o.height},Math.abs(D)>0&&Math.abs(O)<Math.abs(D)){var le=Mn(O||D)*(Math.abs(D)-Math.abs(O));R-=le,O+=le}}else{var V=[i.scale(A[0]),i.scale(A[1])],I=V[0],F=V[1];if(T=I,R=RO({axis:o,ticks:c,bandSize:a,offset:m.offset,entry:N,index:E}),k=F-I,O=m.size,M={x:i.x,y:R,width:i.width,height:O},Math.abs(D)>0&&Math.abs(k)<Math.abs(D)){var q=Mn(k||D)*(Math.abs(D)-Math.abs(k));k+=q}}return Fr(Fr(Fr({},N),{},{x:T,y:R,width:k,height:O,value:u?A:A[1],payload:N,background:M},C&&C[E]&&C[E].props),{},{tooltipPayload:[G4(r,N)],tooltipPosition:{x:T+k/2,y:R+O/2}})});return Fr({data:P,layout:y},h)});function Cm(e){"@babel/helpers - typeof";return Cm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cm(e)}function wwe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H2(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,PB(n.key),n)}}function jwe(e,t,r){return t&&H2(e.prototype,t),r&&H2(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function q2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ri(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?q2(Object(r),!0).forEach(function(n){c0(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function c0(e,t,r){return t=PB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PB(e){var t=_we(e,"string");return Cm(t)=="symbol"?t:t+""}function _we(e,t){if(Cm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Cm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var u0=function(t,r,n,a,i){var o=t.width,l=t.height,c=t.layout,u=t.children,d=Object.keys(r),f={left:n.left,leftMirror:n.left,right:o-n.right,rightMirror:o-n.right,top:n.top,topMirror:n.top,bottom:l-n.bottom,bottomMirror:l-n.bottom},h=!!ia(u,rr);return d.reduce(function(m,y){var g=r[y],p=g.orientation,v=g.domain,x=g.padding,b=x===void 0?{}:x,_=g.mirror,j=g.reversed,S="".concat(p).concat(_?"Mirror":""),C,P,N,E,A;if(g.type==="number"&&(g.padding==="gap"||g.padding==="no-gap")){var T=v[1]-v[0],R=1/0,k=g.categoricalDomain.sort(Bee);if(k.forEach(function(V,I){I>0&&(R=Math.min((V||0)-(k[I-1]||0),R))}),Number.isFinite(R)){var O=R/T,M=g.layout==="vertical"?n.height:n.width;if(g.padding==="gap"&&(C=O*M/2),g.padding==="no-gap"){var D=$n(t.barCategoryGap,O*M),L=O*M/2;C=L-D-(L-D)/M*D}}}a==="xAxis"?P=[n.left+(b.left||0)+(C||0),n.left+n.width-(b.right||0)-(C||0)]:a==="yAxis"?P=c==="horizontal"?[n.top+n.height-(b.bottom||0),n.top+(b.top||0)]:[n.top+(b.top||0)+(C||0),n.top+n.height-(b.bottom||0)-(C||0)]:P=g.range,j&&(P=[P[1],P[0]]);var B=H4(g,i,h),z=B.scale,Z=B.realScaleType;z.domain(v).range(P),q4(z);var ee=K4(z,ri(ri({},g),{},{realScaleType:Z}));a==="xAxis"?(A=p==="top"&&!_||p==="bottom"&&_,N=n.left,E=f[S]-A*g.height):a==="yAxis"&&(A=p==="left"&&!_||p==="right"&&_,N=f[S]-A*g.width,E=n.top);var le=ri(ri(ri({},g),ee),{},{realScaleType:Z,x:N,y:E,scale:z,width:a==="xAxis"?n.width:g.width,height:a==="yAxis"?n.height:g.height});return le.bandSize=Hv(le,ee),!g.hide&&a==="xAxis"?f[S]+=(A?-1:1)*le.height:g.hide||(f[S]+=(A?-1:1)*le.width),ri(ri({},m),{},c0({},y,le))},{})},kB=function(t,r){var n=t.x,a=t.y,i=r.x,o=r.y;return{x:Math.min(n,i),y:Math.min(a,o),width:Math.abs(i-n),height:Math.abs(o-a)}},Swe=function(t){var r=t.x1,n=t.y1,a=t.x2,i=t.y2;return kB({x:r,y:n},{x:a,y:i})},EB=function(){function e(t){wwe(this,e),this.scale=t}return jwe(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.bandAware,i=n.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(a){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+c}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),a=n[0],i=n[n.length-1];return a<=i?r>=a&&r<=i:r>=i&&r<=a}}],[{key:"create",value:function(r){return new e(r)}}])}();c0(EB,"EPS",1e-4);var uN=function(t){var r=Object.keys(t).reduce(function(n,a){return ri(ri({},n),{},c0({},a,EB.create(t[a])))},{});return ri(ri({},r),{},{apply:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,l=i.position;return Wbe(a,function(c,u){return r[u].apply(c,{bandAware:o,position:l})})},isInRange:function(a){return _B(a,function(i,o){return r[o].isInRange(i)})}})};function Cwe(e){return(e%180+180)%180}var Nwe=function(t){var r=t.width,n=t.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=Cwe(a),o=i*Math.PI/180,l=Math.atan(n/r),c=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(c)},Pwe=Gi,kwe=ep,Ewe=Wx;function Awe(e){return function(t,r,n){var a=Object(t);if(!kwe(t)){var i=Pwe(r);t=Ewe(t),r=function(l){return i(a[l],l,a)}}var o=e(t,r,n);return o>-1?a[i?t[o]:o]:void 0}}var Owe=Awe,Twe=xB;function Rwe(e){var t=Twe(e),r=t%1;return t===t?r?t-r:t:0}var Mwe=Rwe,$we=CL,Iwe=Gi,Dwe=Mwe,Lwe=Math.max;function Bwe(e,t,r){var n=e==null?0:e.length;if(!n)return-1;var a=r==null?0:Dwe(r);return a<0&&(a=Lwe(n+a,0)),$we(e,Iwe(t),a)}var Fwe=Bwe,zwe=Owe,Uwe=Fwe,Vwe=zwe(Uwe),Wwe=Vwe;const Hwe=It(Wwe);var qwe=BZ(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),dN=w.createContext(void 0),fN=w.createContext(void 0),AB=w.createContext(void 0),OB=w.createContext({}),TB=w.createContext(void 0),RB=w.createContext(0),MB=w.createContext(0),K2=function(t){var r=t.state,n=r.xAxisMap,a=r.yAxisMap,i=r.offset,o=t.clipPathId,l=t.children,c=t.width,u=t.height,d=qwe(i);return $.createElement(dN.Provider,{value:n},$.createElement(fN.Provider,{value:a},$.createElement(OB.Provider,{value:i},$.createElement(AB.Provider,{value:d},$.createElement(TB.Provider,{value:o},$.createElement(RB.Provider,{value:u},$.createElement(MB.Provider,{value:c},l)))))))},Kwe=function(){return w.useContext(TB)},$B=function(t){var r=w.useContext(dN);r==null&&ql();var n=r[t];return n==null&&ql(),n},Ywe=function(){var t=w.useContext(dN);return eo(t)},Gwe=function(){var t=w.useContext(fN),r=Hwe(t,function(n){return _B(n.domain,Number.isFinite)});return r||eo(t)},IB=function(t){var r=w.useContext(fN);r==null&&ql();var n=r[t];return n==null&&ql(),n},Xwe=function(){var t=w.useContext(AB);return t},Qwe=function(){return w.useContext(OB)},hN=function(){return w.useContext(MB)},mN=function(){return w.useContext(RB)};function rd(e){"@babel/helpers - typeof";return rd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rd(e)}function Jwe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zwe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,LB(n.key),n)}}function eje(e,t,r){return t&&Zwe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function tje(e,t,r){return t=cy(t),rje(e,DB()?Reflect.construct(t,r||[],cy(e).constructor):t.apply(e,r))}function rje(e,t){if(t&&(rd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nje(e)}function nje(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function DB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DB=function(){return!!e})()}function cy(e){return cy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},cy(e)}function aje(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i_(e,t)}function i_(e,t){return i_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},i_(e,t)}function Y2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function G2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Y2(Object(r),!0).forEach(function(n){pN(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pN(e,t,r){return t=LB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LB(e){var t=ije(e,"string");return rd(t)=="symbol"?t:t+""}function ije(e,t){if(rd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(rd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sje(e,t){return uje(e)||cje(e,t)||lje(e,t)||oje()}function oje(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lje(e,t){if(e){if(typeof e=="string")return X2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return X2(e,t)}}function X2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function cje(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function uje(e){if(Array.isArray(e))return e}function s_(){return s_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s_.apply(this,arguments)}var dje=function(t,r){var n;return $.isValidElement(t)?n=$.cloneElement(t,r):Je(t)?n=t(r):n=$.createElement("line",s_({},r,{className:"recharts-reference-line-line"})),n},fje=function(t,r,n,a,i,o,l,c,u){var d=i.x,f=i.y,h=i.width,m=i.height;if(n){var y=u.y,g=t.y.apply(y,{position:o});if(Ui(u,"discard")&&!t.y.isInRange(g))return null;var p=[{x:d+h,y:g},{x:d,y:g}];return c==="left"?p.reverse():p}if(r){var v=u.x,x=t.x.apply(v,{position:o});if(Ui(u,"discard")&&!t.x.isInRange(x))return null;var b=[{x,y:f+m},{x,y:f}];return l==="top"?b.reverse():b}if(a){var _=u.segment,j=_.map(function(S){return t.apply(S,{position:o})});return Ui(u,"discard")&&Ibe(j,function(S){return!t.isInRange(S)})?null:j}return null};function hje(e){var t=e.x,r=e.y,n=e.segment,a=e.xAxisId,i=e.yAxisId,o=e.shape,l=e.className,c=e.alwaysShow,u=Kwe(),d=$B(a),f=IB(i),h=Xwe();if(!u||!h)return null;di(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=uN({x:d.scale,y:f.scale}),y=rn(t),g=rn(r),p=n&&n.length===2,v=fje(m,y,g,p,h,e.position,d.orientation,f.orientation,e);if(!v)return null;var x=sje(v,2),b=x[0],_=b.x,j=b.y,S=x[1],C=S.x,P=S.y,N=Ui(e,"hidden")?"url(#".concat(u,")"):void 0,E=G2(G2({clipPath:N},Ve(e,!0)),{},{x1:_,y1:j,x2:C,y2:P});return $.createElement(gt,{className:ct("recharts-reference-line",l)},dje(o,E),ln.renderCallByParent(e,Swe({x1:_,y1:j,x2:C,y2:P})))}var d0=function(e){function t(){return Jwe(this,t),tje(this,t,arguments)}return aje(t,e),eje(t,[{key:"render",value:function(){return $.createElement(hje,this.props)}}])}($.Component);pN(d0,"displayName","ReferenceLine");pN(d0,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function o_(){return o_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o_.apply(this,arguments)}function nd(e){"@babel/helpers - typeof";return nd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nd(e)}function Q2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function J2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Q2(Object(r),!0).forEach(function(n){f0(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mje(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pje(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,FB(n.key),n)}}function gje(e,t,r){return t&&pje(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function vje(e,t,r){return t=uy(t),yje(e,BB()?Reflect.construct(t,r||[],uy(e).constructor):t.apply(e,r))}function yje(e,t){if(t&&(nd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xje(e)}function xje(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function BB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(BB=function(){return!!e})()}function uy(e){return uy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},uy(e)}function bje(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l_(e,t)}function l_(e,t){return l_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},l_(e,t)}function f0(e,t,r){return t=FB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FB(e){var t=wje(e,"string");return nd(t)=="symbol"?t:t+""}function wje(e,t){if(nd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(nd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jje=function(t){var r=t.x,n=t.y,a=t.xAxis,i=t.yAxis,o=uN({x:a.scale,y:i.scale}),l=o.apply({x:r,y:n},{bandAware:!0});return Ui(t,"discard")&&!o.isInRange(l)?null:l},h0=function(e){function t(){return mje(this,t),vje(this,t,arguments)}return bje(t,e),gje(t,[{key:"render",value:function(){var n=this.props,a=n.x,i=n.y,o=n.r,l=n.alwaysShow,c=n.clipPathId,u=rn(a),d=rn(i);if(di(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var f=jje(this.props);if(!f)return null;var h=f.x,m=f.y,y=this.props,g=y.shape,p=y.className,v=Ui(this.props,"hidden")?"url(#".concat(c,")"):void 0,x=J2(J2({clipPath:v},Ve(this.props,!0)),{},{cx:h,cy:m});return $.createElement(gt,{className:ct("recharts-reference-dot",p)},t.renderDot(g,x),ln.renderCallByParent(this.props,{x:h-o,y:m-o,width:2*o,height:2*o}))}}])}($.Component);f0(h0,"displayName","ReferenceDot");f0(h0,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});f0(h0,"renderDot",function(e,t){var r;return $.isValidElement(e)?r=$.cloneElement(e,t):Je(e)?r=e(t):r=$.createElement(ip,o_({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function c_(){return c_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c_.apply(this,arguments)}function ad(e){"@babel/helpers - typeof";return ad=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ad(e)}function Z2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function eT(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Z2(Object(r),!0).forEach(function(n){m0(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _je(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sje(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,UB(n.key),n)}}function Cje(e,t,r){return t&&Sje(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Nje(e,t,r){return t=dy(t),Pje(e,zB()?Reflect.construct(t,r||[],dy(e).constructor):t.apply(e,r))}function Pje(e,t){if(t&&(ad(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kje(e)}function kje(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zB=function(){return!!e})()}function dy(e){return dy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},dy(e)}function Eje(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u_(e,t)}function u_(e,t){return u_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},u_(e,t)}function m0(e,t,r){return t=UB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UB(e){var t=Aje(e,"string");return ad(t)=="symbol"?t:t+""}function Aje(e,t){if(ad(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(ad(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Oje=function(t,r,n,a,i){var o=i.x1,l=i.x2,c=i.y1,u=i.y2,d=i.xAxis,f=i.yAxis;if(!d||!f)return null;var h=uN({x:d.scale,y:f.scale}),m={x:t?h.x.apply(o,{position:"start"}):h.x.rangeMin,y:n?h.y.apply(c,{position:"start"}):h.y.rangeMin},y={x:r?h.x.apply(l,{position:"end"}):h.x.rangeMax,y:a?h.y.apply(u,{position:"end"}):h.y.rangeMax};return Ui(i,"discard")&&(!h.isInRange(m)||!h.isInRange(y))?null:kB(m,y)},p0=function(e){function t(){return _je(this,t),Nje(this,t,arguments)}return Eje(t,e),Cje(t,[{key:"render",value:function(){var n=this.props,a=n.x1,i=n.x2,o=n.y1,l=n.y2,c=n.className,u=n.alwaysShow,d=n.clipPathId;di(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=rn(a),h=rn(i),m=rn(o),y=rn(l),g=this.props.shape;if(!f&&!h&&!m&&!y&&!g)return null;var p=Oje(f,h,m,y,this.props);if(!p&&!g)return null;var v=Ui(this.props,"hidden")?"url(#".concat(d,")"):void 0;return $.createElement(gt,{className:ct("recharts-reference-area",c)},t.renderRect(g,eT(eT({clipPath:v},Ve(this.props,!0)),p)),ln.renderCallByParent(this.props,p))}}])}($.Component);m0(p0,"displayName","ReferenceArea");m0(p0,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});m0(p0,"renderRect",function(e,t){var r;return $.isValidElement(e)?r=$.cloneElement(e,t):Je(e)?r=e(t):r=$.createElement(cN,c_({},t,{className:"recharts-reference-area-rect"})),r});function VB(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],a=0;a<e.length;a+=t)n.push(e[a]);return n}function Tje(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return Nwe(n,r)}function Rje(e,t,r){var n=r==="width",a=e.x,i=e.y,o=e.width,l=e.height;return t===1?{start:n?a:i,end:n?a+o:i+l}:{start:n?a+o:i+l,end:n?a:i}}function fy(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-a)<=0}function Mje(e,t){return VB(e,t+1)}function $je(e,t,r,n,a){for(var i=(n||[]).slice(),o=t.start,l=t.end,c=0,u=1,d=o,f=function(){var y=n==null?void 0:n[c];if(y===void 0)return{v:VB(n,u)};var g=c,p,v=function(){return p===void 0&&(p=r(y,g)),p},x=y.coordinate,b=c===0||fy(e,x,v,d,l);b||(c=0,d=o,u+=1),b&&(d=x+e*(v()/2+a),c+=u)},h;u<=i.length;)if(h=f(),h)return h.v;return[]}function Nm(e){"@babel/helpers - typeof";return Nm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nm(e)}function tT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Cn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tT(Object(r),!0).forEach(function(n){Ije(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ije(e,t,r){return t=Dje(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dje(e){var t=Lje(e,"string");return Nm(t)=="symbol"?t:t+""}function Lje(e,t){if(Nm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Nm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bje(e,t,r,n,a){for(var i=(n||[]).slice(),o=i.length,l=t.start,c=t.end,u=function(h){var m=i[h],y,g=function(){return y===void 0&&(y=r(m,h)),y};if(h===o-1){var p=e*(m.coordinate+e*g()/2-c);i[h]=m=Cn(Cn({},m),{},{tickCoord:p>0?m.coordinate-p*e:m.coordinate})}else i[h]=m=Cn(Cn({},m),{},{tickCoord:m.coordinate});var v=fy(e,m.tickCoord,g,l,c);v&&(c=m.tickCoord-e*(g()/2+a),i[h]=Cn(Cn({},m),{},{isShow:!0}))},d=o-1;d>=0;d--)u(d);return i}function Fje(e,t,r,n,a,i){var o=(n||[]).slice(),l=o.length,c=t.start,u=t.end;if(i){var d=n[l-1],f=r(d,l-1),h=e*(d.coordinate+e*f/2-u);o[l-1]=d=Cn(Cn({},d),{},{tickCoord:h>0?d.coordinate-h*e:d.coordinate});var m=fy(e,d.tickCoord,function(){return f},c,u);m&&(u=d.tickCoord-e*(f/2+a),o[l-1]=Cn(Cn({},d),{},{isShow:!0}))}for(var y=i?l-1:l,g=function(x){var b=o[x],_,j=function(){return _===void 0&&(_=r(b,x)),_};if(x===0){var S=e*(b.coordinate-e*j()/2-c);o[x]=b=Cn(Cn({},b),{},{tickCoord:S<0?b.coordinate-S*e:b.coordinate})}else o[x]=b=Cn(Cn({},b),{},{tickCoord:b.coordinate});var C=fy(e,b.tickCoord,j,c,u);C&&(c=b.tickCoord+e*(j()/2+a),o[x]=Cn(Cn({},b),{},{isShow:!0}))},p=0;p<y;p++)g(p);return o}function gN(e,t,r){var n=e.tick,a=e.ticks,i=e.viewBox,o=e.minTickGap,l=e.orientation,c=e.interval,u=e.tickFormatter,d=e.unit,f=e.angle;if(!a||!a.length||!n)return[];if(we(c)||Ta.isSsr)return Mje(a,typeof c=="number"&&we(c)?c:0);var h=[],m=l==="top"||l==="bottom"?"width":"height",y=d&&m==="width"?th(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},g=function(b,_){var j=Je(u)?u(b.value,_):b.value;return m==="width"?Tje(th(j,{fontSize:t,letterSpacing:r}),y,f):th(j,{fontSize:t,letterSpacing:r})[m]},p=a.length>=2?Mn(a[1].coordinate-a[0].coordinate):1,v=Rje(i,p,m);return c==="equidistantPreserveStart"?$je(p,v,g,a,o):(c==="preserveStart"||c==="preserveStartEnd"?h=Fje(p,v,g,a,o,c==="preserveStartEnd"):h=Bje(p,v,g,a,o),h.filter(function(x){return x.isShow}))}var zje=["viewBox"],Uje=["viewBox"],Vje=["ticks"];function id(e){"@babel/helpers - typeof";return id=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},id(e)}function eu(){return eu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},eu.apply(this,arguments)}function rT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Yr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rT(Object(r),!0).forEach(function(n){vN(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Zb(e,t){if(e==null)return{};var r=Wje(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Wje(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Hje(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,HB(n.key),n)}}function qje(e,t,r){return t&&nT(e.prototype,t),r&&nT(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Kje(e,t,r){return t=hy(t),Yje(e,WB()?Reflect.construct(t,r||[],hy(e).constructor):t.apply(e,r))}function Yje(e,t){if(t&&(id(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Gje(e)}function Gje(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function WB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(WB=function(){return!!e})()}function hy(e){return hy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},hy(e)}function Xje(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d_(e,t)}function d_(e,t){return d_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},d_(e,t)}function vN(e,t,r){return t=HB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HB(e){var t=Qje(e,"string");return id(t)=="symbol"?t:t+""}function Qje(e,t){if(id(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(id(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var tf=function(e){function t(r){var n;return Hje(this,t),n=Kje(this,t,[r]),n.state={fontSize:"",letterSpacing:""},n}return Xje(t,e),qje(t,[{key:"shouldComponentUpdate",value:function(n,a){var i=n.viewBox,o=Zb(n,zje),l=this.props,c=l.viewBox,u=Zb(l,Uje);return!fu(i,c)||!fu(o,u)||!fu(a,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var a=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.x,o=a.y,l=a.width,c=a.height,u=a.orientation,d=a.tickSize,f=a.mirror,h=a.tickMargin,m,y,g,p,v,x,b=f?-1:1,_=n.tickSize||d,j=we(n.tickCoord)?n.tickCoord:n.coordinate;switch(u){case"top":m=y=n.coordinate,p=o+ +!f*c,g=p-b*_,x=g-b*h,v=j;break;case"left":g=p=n.coordinate,y=i+ +!f*l,m=y-b*_,v=m-b*h,x=j;break;case"right":g=p=n.coordinate,y=i+ +f*l,m=y+b*_,v=m+b*h,x=j;break;default:m=y=n.coordinate,p=o+ +f*c,g=p+b*_,x=g+b*h,v=j;break}return{line:{x1:m,y1:g,x2:y,y2:p},tick:{x:v,y:x}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,o;switch(a){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,o="end";switch(a){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,l=n.height,c=n.orientation,u=n.mirror,d=n.axisLine,f=Yr(Yr(Yr({},Ve(this.props,!1)),Ve(d,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var h=+(c==="top"&&!u||c==="bottom"&&u);f=Yr(Yr({},f),{},{x1:a,y1:i+h*l,x2:a+o,y2:i+h*l})}else{var m=+(c==="left"&&!u||c==="right"&&u);f=Yr(Yr({},f),{},{x1:a+m*o,y1:i,x2:a+m*o,y2:i+l})}return $.createElement("line",eu({},f,{className:ct("recharts-cartesian-axis-line",ha(d,"className"))}))}},{key:"renderTicks",value:function(n,a,i){var o=this,l=this.props,c=l.tickLine,u=l.stroke,d=l.tick,f=l.tickFormatter,h=l.unit,m=gN(Yr(Yr({},this.props),{},{ticks:n}),a,i),y=this.getTickTextAnchor(),g=this.getTickVerticalAnchor(),p=Ve(this.props,!1),v=Ve(d,!1),x=Yr(Yr({},p),{},{fill:"none"},Ve(c,!1)),b=m.map(function(_,j){var S=o.getTickLineCoord(_),C=S.line,P=S.tick,N=Yr(Yr(Yr(Yr({textAnchor:y,verticalAnchor:g},p),{},{stroke:"none",fill:u},v),P),{},{index:j,payload:_,visibleTicksCount:m.length,tickFormatter:f});return $.createElement(gt,eu({className:"recharts-cartesian-axis-tick",key:"tick-".concat(_.value,"-").concat(_.coordinate,"-").concat(_.tickCoord)},Mo(o.props,_,j)),c&&$.createElement("line",eu({},x,C,{className:ct("recharts-cartesian-axis-tick-line",ha(c,"className"))})),d&&t.renderTickItem(d,N,"".concat(Je(f)?f(_.value,j):_.value).concat(h||"")))});return $.createElement("g",{className:"recharts-cartesian-axis-ticks"},b)}},{key:"render",value:function(){var n=this,a=this.props,i=a.axisLine,o=a.width,l=a.height,c=a.ticksGenerator,u=a.className,d=a.hide;if(d)return null;var f=this.props,h=f.ticks,m=Zb(f,Vje),y=h;return Je(c)&&(y=h&&h.length>0?c(this.props):c(m)),o<=0||l<=0||!y||!y.length?null:$.createElement(gt,{className:ct("recharts-cartesian-axis",u),ref:function(p){n.layerReference=p}},i&&this.renderAxisLine(),this.renderTicks(y,this.state.fontSize,this.state.letterSpacing),ln.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,a,i){var o,l=ct(a.className,"recharts-cartesian-axis-tick-value");return $.isValidElement(n)?o=$.cloneElement(n,Yr(Yr({},a),{},{className:l})):Je(n)?o=n(Yr(Yr({},a),{},{className:l})):o=$.createElement(Wl,eu({},a,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])}(w.Component);vN(tf,"displayName","CartesianAxis");vN(tf,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Jje=["x1","y1","x2","y2","key"],Zje=["offset"];function Kl(e){"@babel/helpers - typeof";return Kl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kl(e)}function aT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Pn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aT(Object(r),!0).forEach(function(n){e1e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function e1e(e,t,r){return t=t1e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function t1e(e){var t=r1e(e,"string");return Kl(t)=="symbol"?t:t+""}function r1e(e,t){if(Kl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Kl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wl(){return wl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wl.apply(this,arguments)}function iT(e,t){if(e==null)return{};var r=n1e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function n1e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var a1e=function(t){var r=t.fill;if(!r||r==="none")return null;var n=t.fillOpacity,a=t.x,i=t.y,o=t.width,l=t.height,c=t.ry;return $.createElement("rect",{x:a,y:i,ry:c,width:o,height:l,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function qB(e,t){var r;if($.isValidElement(e))r=$.cloneElement(e,t);else if(Je(e))r=e(t);else{var n=t.x1,a=t.y1,i=t.x2,o=t.y2,l=t.key,c=iT(t,Jje),u=Ve(c,!1);u.offset;var d=iT(u,Zje);r=$.createElement("line",wl({},d,{x1:n,y1:a,x2:i,y2:o,fill:"none",key:l}))}return r}function i1e(e){var t=e.x,r=e.width,n=e.horizontal,a=n===void 0?!0:n,i=e.horizontalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(l,c){var u=Pn(Pn({},e),{},{x1:t,y1:l,x2:t+r,y2:l,key:"line-".concat(c),index:c});return qB(a,u)});return $.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function s1e(e){var t=e.y,r=e.height,n=e.vertical,a=n===void 0?!0:n,i=e.verticalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(l,c){var u=Pn(Pn({},e),{},{x1:l,y1:t,x2:l,y2:t+r,key:"line-".concat(c),index:c});return qB(a,u)});return $.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function o1e(e){var t=e.horizontalFill,r=e.fillOpacity,n=e.x,a=e.y,i=e.width,o=e.height,l=e.horizontalPoints,c=e.horizontal,u=c===void 0?!0:c;if(!u||!t||!t.length)return null;var d=l.map(function(h){return Math.round(h+a-a)}).sort(function(h,m){return h-m});a!==d[0]&&d.unshift(0);var f=d.map(function(h,m){var y=!d[m+1],g=y?a+o-h:d[m+1]-h;if(g<=0)return null;var p=m%t.length;return $.createElement("rect",{key:"react-".concat(m),y:h,x:n,height:g,width:i,stroke:"none",fill:t[p],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return $.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function l1e(e){var t=e.vertical,r=t===void 0?!0:t,n=e.verticalFill,a=e.fillOpacity,i=e.x,o=e.y,l=e.width,c=e.height,u=e.verticalPoints;if(!r||!n||!n.length)return null;var d=u.map(function(h){return Math.round(h+i-i)}).sort(function(h,m){return h-m});i!==d[0]&&d.unshift(0);var f=d.map(function(h,m){var y=!d[m+1],g=y?i+l-h:d[m+1]-h;if(g<=0)return null;var p=m%n.length;return $.createElement("rect",{key:"react-".concat(m),x:h,y:o,width:g,height:c,stroke:"none",fill:n[p],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return $.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var c1e=function(t,r){var n=t.xAxis,a=t.width,i=t.height,o=t.offset;return W4(gN(Pn(Pn(Pn({},tf.defaultProps),n),{},{ticks:hs(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.left,o.left+o.width,r)},u1e=function(t,r){var n=t.yAxis,a=t.width,i=t.height,o=t.offset;return W4(gN(Pn(Pn(Pn({},tf.defaultProps),n),{},{ticks:hs(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.top,o.top+o.height,r)},bc={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function qr(e){var t,r,n,a,i,o,l=hN(),c=mN(),u=Qwe(),d=Pn(Pn({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:bc.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:bc.fill,horizontal:(n=e.horizontal)!==null&&n!==void 0?n:bc.horizontal,horizontalFill:(a=e.horizontalFill)!==null&&a!==void 0?a:bc.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:bc.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:bc.verticalFill,x:we(e.x)?e.x:u.left,y:we(e.y)?e.y:u.top,width:we(e.width)?e.width:u.width,height:we(e.height)?e.height:u.height}),f=d.x,h=d.y,m=d.width,y=d.height,g=d.syncWithTicks,p=d.horizontalValues,v=d.verticalValues,x=Ywe(),b=Gwe();if(!we(m)||m<=0||!we(y)||y<=0||!we(f)||f!==+f||!we(h)||h!==+h)return null;var _=d.verticalCoordinatesGenerator||c1e,j=d.horizontalCoordinatesGenerator||u1e,S=d.horizontalPoints,C=d.verticalPoints;if((!S||!S.length)&&Je(j)){var P=p&&p.length,N=j({yAxis:b?Pn(Pn({},b),{},{ticks:P?p:b.ticks}):void 0,width:l,height:c,offset:u},P?!0:g);di(Array.isArray(N),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Kl(N),"]")),Array.isArray(N)&&(S=N)}if((!C||!C.length)&&Je(_)){var E=v&&v.length,A=_({xAxis:x?Pn(Pn({},x),{},{ticks:E?v:x.ticks}):void 0,width:l,height:c,offset:u},E?!0:g);di(Array.isArray(A),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Kl(A),"]")),Array.isArray(A)&&(C=A)}return $.createElement("g",{className:"recharts-cartesian-grid"},$.createElement(a1e,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),$.createElement(i1e,wl({},d,{offset:u,horizontalPoints:S,xAxis:x,yAxis:b})),$.createElement(s1e,wl({},d,{offset:u,verticalPoints:C,xAxis:x,yAxis:b})),$.createElement(o1e,wl({},d,{horizontalPoints:S})),$.createElement(l1e,wl({},d,{verticalPoints:C})))}qr.displayName="CartesianGrid";var d1e=["type","layout","connectNulls","ref"],f1e=["key"];function sd(e){"@babel/helpers - typeof";return sd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sd(e)}function sT(e,t){if(e==null)return{};var r=h1e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function h1e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function oh(){return oh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},oh.apply(this,arguments)}function oT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ra(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oT(Object(r),!0).forEach(function(n){ni(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wc(e){return v1e(e)||g1e(e)||p1e(e)||m1e()}function m1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function p1e(e,t){if(e){if(typeof e=="string")return f_(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f_(e,t)}}function g1e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function v1e(e){if(Array.isArray(e))return f_(e)}function f_(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function y1e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,YB(n.key),n)}}function x1e(e,t,r){return t&&lT(e.prototype,t),r&&lT(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function b1e(e,t,r){return t=my(t),w1e(e,KB()?Reflect.construct(t,r||[],my(e).constructor):t.apply(e,r))}function w1e(e,t){if(t&&(sd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return j1e(e)}function j1e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function KB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(KB=function(){return!!e})()}function my(e){return my=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},my(e)}function _1e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h_(e,t)}function h_(e,t){return h_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},h_(e,t)}function ni(e,t,r){return t=YB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YB(e){var t=S1e(e,"string");return sd(t)=="symbol"?t:t+""}function S1e(e,t){if(sd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(sd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Dn=function(e){function t(){var r;y1e(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=b1e(this,t,[].concat(a)),ni(r,"state",{isAnimationFinished:!0,totalLength:0}),ni(r,"generateSimpleStrokeDasharray",function(o,l){return"".concat(l,"px ").concat(o-l,"px")}),ni(r,"getStrokeDasharray",function(o,l,c){var u=c.reduce(function(v,x){return v+x});if(!u)return r.generateSimpleStrokeDasharray(l,o);for(var d=Math.floor(o/u),f=o%u,h=l-o,m=[],y=0,g=0;y<c.length;g+=c[y],++y)if(g+c[y]>f){m=[].concat(wc(c.slice(0,y)),[f-g]);break}var p=m.length%2===0?[0,h]:[h];return[].concat(wc(t.repeat(c,d)),wc(m),p).map(function(v){return"".concat(v,"px")}).join(", ")}),ni(r,"id",Vo("recharts-line-")),ni(r,"pathRef",function(o){r.mainCurve=o}),ni(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),ni(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return _1e(t,e),x1e(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();this.setState({totalLength:n})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();n!==this.state.totalLength&&this.setState({totalLength:n})}}},{key:"getTotalLength",value:function(){var n=this.mainCurve;try{return n&&n.getTotalLength&&n.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.points,l=i.xAxis,c=i.yAxis,u=i.layout,d=i.children,f=Bn(d,ef);if(!f)return null;var h=function(g,p){return{x:g.x,y:g.y,value:g.value,errorVal:dr(g.payload,p)}},m={clipPath:n?"url(#clipPath-".concat(a,")"):null};return $.createElement(gt,m,f.map(function(y){return $.cloneElement(y,{key:"bar-".concat(y.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,dataPointFormatter:h})}))}},{key:"renderDots",value:function(n,a,i){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,u=l.points,d=l.dataKey,f=Ve(this.props,!1),h=Ve(c,!0),m=u.map(function(g,p){var v=ra(ra(ra({key:"dot-".concat(p),r:3},f),h),{},{index:p,cx:g.x,cy:g.y,value:g.value,dataKey:d,payload:g.payload,points:u});return t.renderDotItem(c,v)}),y={clipPath:n?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return $.createElement(gt,oh({className:"recharts-line-dots",key:"dots"},y),m)}},{key:"renderCurveStatically",value:function(n,a,i,o){var l=this.props,c=l.type,u=l.layout,d=l.connectNulls;l.ref;var f=sT(l,d1e),h=ra(ra(ra({},Ve(f,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:a?"url(#clipPath-".concat(i,")"):null,points:n},o),{},{type:c,layout:u,connectNulls:d});return $.createElement(Po,oh({},h,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(n,a){var i=this,o=this.props,l=o.points,c=o.strokeDasharray,u=o.isAnimationActive,d=o.animationBegin,f=o.animationDuration,h=o.animationEasing,m=o.animationId,y=o.animateNewValues,g=o.width,p=o.height,v=this.state,x=v.prevPoints,b=v.totalLength;return $.createElement(Da,{begin:d,duration:f,isActive:u,easing:h,from:{t:0},to:{t:1},key:"line-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(_){var j=_.t;if(x){var S=x.length/l.length,C=l.map(function(T,R){var k=Math.floor(R*S);if(x[k]){var O=x[k],M=wr(O.x,T.x),D=wr(O.y,T.y);return ra(ra({},T),{},{x:M(j),y:D(j)})}if(y){var L=wr(g*2,T.x),B=wr(p/2,T.y);return ra(ra({},T),{},{x:L(j),y:B(j)})}return ra(ra({},T),{},{x:T.x,y:T.y})});return i.renderCurveStatically(C,n,a)}var P=wr(0,b),N=P(j),E;if(c){var A="".concat(c).split(/[,\s]+/gim).map(function(T){return parseFloat(T)});E=i.getStrokeDasharray(N,b,A)}else E=i.generateSimpleStrokeDasharray(b,N);return i.renderCurveStatically(l,n,a,{strokeDasharray:E})})}},{key:"renderCurve",value:function(n,a){var i=this.props,o=i.points,l=i.isAnimationActive,c=this.state,u=c.prevPoints,d=c.totalLength;return l&&o&&o.length&&(!u&&d>0||!$o(u,o))?this.renderCurveWithAnimation(n,a):this.renderCurveStatically(o,n,a)}},{key:"render",value:function(){var n,a=this.props,i=a.hide,o=a.dot,l=a.points,c=a.className,u=a.xAxis,d=a.yAxis,f=a.top,h=a.left,m=a.width,y=a.height,g=a.isAnimationActive,p=a.id;if(i||!l||!l.length)return null;var v=this.state.isAnimationFinished,x=l.length===1,b=ct("recharts-line",c),_=u&&u.allowDataOverflow,j=d&&d.allowDataOverflow,S=_||j,C=Qe(p)?this.id:p,P=(n=Ve(o,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},N=P.r,E=N===void 0?3:N,A=P.strokeWidth,T=A===void 0?2:A,R=I3(o)?o:{},k=R.clipDot,O=k===void 0?!0:k,M=E*2+T;return $.createElement(gt,{className:b},_||j?$.createElement("defs",null,$.createElement("clipPath",{id:"clipPath-".concat(C)},$.createElement("rect",{x:_?h:h-m/2,y:j?f:f-y/2,width:_?m:m*2,height:j?y:y*2})),!O&&$.createElement("clipPath",{id:"clipPath-dots-".concat(C)},$.createElement("rect",{x:h-M/2,y:f-M/2,width:m+M,height:y+M}))):null,!x&&this.renderCurve(S,C),this.renderErrorBar(S,C),(x||o)&&this.renderDots(S,O,C),(!g||v)&&fi.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:a.curPoints}:n.points!==a.curPoints?{curPoints:n.points}:null}},{key:"repeat",value:function(n,a){for(var i=n.length%2!==0?[].concat(wc(n),[0]):n,o=[],l=0;l<a;++l)o=[].concat(wc(o),wc(i));return o}},{key:"renderDotItem",value:function(n,a){var i;if($.isValidElement(n))i=$.cloneElement(n,a);else if(Je(n))i=n(a);else{var o=a.key,l=sT(a,f1e),c=ct("recharts-line-dot",typeof n!="boolean"?n.className:"");i=$.createElement(ip,oh({key:o},l,{className:c}))}return i}}])}(w.PureComponent);ni(Dn,"displayName","Line");ni(Dn,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Ta.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});ni(Dn,"getComposedData",function(e){var t=e.props,r=e.xAxis,n=e.yAxis,a=e.xAxisTicks,i=e.yAxisTicks,o=e.dataKey,l=e.bandSize,c=e.displayedData,u=e.offset,d=t.layout,f=c.map(function(h,m){var y=dr(h,o);return d==="horizontal"?{x:Yu({axis:r,ticks:a,bandSize:l,entry:h,index:m}),y:Qe(y)?null:n.scale(y),value:y,payload:h}:{x:Qe(y)?null:r.scale(y),y:Yu({axis:n,ticks:i,bandSize:l,entry:h,index:m}),value:y,payload:h}});return ra({points:f,layout:d},u)});var C1e=["layout","type","stroke","connectNulls","isRange","ref"],N1e=["key"],GB;function od(e){"@babel/helpers - typeof";return od=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},od(e)}function XB(e,t){if(e==null)return{};var r=P1e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function P1e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function jl(){return jl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jl.apply(this,arguments)}function cT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ws(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cT(Object(r),!0).forEach(function(n){Mi(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function k1e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,JB(n.key),n)}}function E1e(e,t,r){return t&&uT(e.prototype,t),r&&uT(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function A1e(e,t,r){return t=py(t),O1e(e,QB()?Reflect.construct(t,r||[],py(e).constructor):t.apply(e,r))}function O1e(e,t){if(t&&(od(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return T1e(e)}function T1e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function QB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(QB=function(){return!!e})()}function py(e){return py=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},py(e)}function R1e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m_(e,t)}function m_(e,t){return m_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},m_(e,t)}function Mi(e,t,r){return t=JB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JB(e){var t=M1e(e,"string");return od(t)=="symbol"?t:t+""}function M1e(e,t){if(od(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(od(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ma=function(e){function t(){var r;k1e(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=A1e(this,t,[].concat(a)),Mi(r,"state",{isAnimationFinished:!0}),Mi(r,"id",Vo("recharts-area-")),Mi(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Je(o)&&o()}),Mi(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Je(o)&&o()}),r}return R1e(t,e),E1e(t,[{key:"renderDots",value:function(n,a,i){var o=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(o&&!l)return null;var c=this.props,u=c.dot,d=c.points,f=c.dataKey,h=Ve(this.props,!1),m=Ve(u,!0),y=d.map(function(p,v){var x=Ws(Ws(Ws({key:"dot-".concat(v),r:3},h),m),{},{index:v,cx:p.x,cy:p.y,dataKey:f,value:p.value,payload:p.payload,points:d});return t.renderDotItem(u,x)}),g={clipPath:n?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return $.createElement(gt,jl({className:"recharts-area-dots"},g),y)}},{key:"renderHorizontalRect",value:function(n){var a=this.props,i=a.baseLine,o=a.points,l=a.strokeWidth,c=o[0].x,u=o[o.length-1].x,d=n*Math.abs(c-u),f=co(o.map(function(h){return h.y||0}));return we(i)&&typeof i=="number"?f=Math.max(i,f):i&&Array.isArray(i)&&i.length&&(f=Math.max(co(i.map(function(h){return h.y||0})),f)),we(f)?$.createElement("rect",{x:c<u?c:c-d,y:0,width:d,height:Math.floor(f+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(n){var a=this.props,i=a.baseLine,o=a.points,l=a.strokeWidth,c=o[0].y,u=o[o.length-1].y,d=n*Math.abs(c-u),f=co(o.map(function(h){return h.x||0}));return we(i)&&typeof i=="number"?f=Math.max(i,f):i&&Array.isArray(i)&&i.length&&(f=Math.max(co(i.map(function(h){return h.x||0})),f)),we(f)?$.createElement("rect",{x:0,y:c<u?c:c-d,width:f+(l?parseInt("".concat(l),10):1),height:Math.floor(d)}):null}},{key:"renderClipRect",value:function(n){var a=this.props.layout;return a==="vertical"?this.renderVerticalRect(n):this.renderHorizontalRect(n)}},{key:"renderAreaStatically",value:function(n,a,i,o){var l=this.props,c=l.layout,u=l.type,d=l.stroke,f=l.connectNulls,h=l.isRange;l.ref;var m=XB(l,C1e);return $.createElement(gt,{clipPath:i?"url(#clipPath-".concat(o,")"):null},$.createElement(Po,jl({},Ve(m,!0),{points:n,connectNulls:f,type:u,baseLine:a,layout:c,stroke:"none",className:"recharts-area-area"})),d!=="none"&&$.createElement(Po,jl({},Ve(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:f,fill:"none",points:n})),d!=="none"&&h&&$.createElement(Po,jl({},Ve(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:f,fill:"none",points:a})))}},{key:"renderAreaWithAnimation",value:function(n,a){var i=this,o=this.props,l=o.points,c=o.baseLine,u=o.isAnimationActive,d=o.animationBegin,f=o.animationDuration,h=o.animationEasing,m=o.animationId,y=this.state,g=y.prevPoints,p=y.prevBaseLine;return $.createElement(Da,{begin:d,duration:f,isActive:u,easing:h,from:{t:0},to:{t:1},key:"area-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(v){var x=v.t;if(g){var b=g.length/l.length,_=l.map(function(P,N){var E=Math.floor(N*b);if(g[E]){var A=g[E],T=wr(A.x,P.x),R=wr(A.y,P.y);return Ws(Ws({},P),{},{x:T(x),y:R(x)})}return P}),j;if(we(c)&&typeof c=="number"){var S=wr(p,c);j=S(x)}else if(Qe(c)||Kd(c)){var C=wr(p,0);j=C(x)}else j=c.map(function(P,N){var E=Math.floor(N*b);if(p[E]){var A=p[E],T=wr(A.x,P.x),R=wr(A.y,P.y);return Ws(Ws({},P),{},{x:T(x),y:R(x)})}return P});return i.renderAreaStatically(_,j,n,a)}return $.createElement(gt,null,$.createElement("defs",null,$.createElement("clipPath",{id:"animationClipPath-".concat(a)},i.renderClipRect(x))),$.createElement(gt,{clipPath:"url(#animationClipPath-".concat(a,")")},i.renderAreaStatically(l,c,n,a)))})}},{key:"renderArea",value:function(n,a){var i=this.props,o=i.points,l=i.baseLine,c=i.isAnimationActive,u=this.state,d=u.prevPoints,f=u.prevBaseLine,h=u.totalLength;return c&&o&&o.length&&(!d&&h>0||!$o(d,o)||!$o(f,l))?this.renderAreaWithAnimation(n,a):this.renderAreaStatically(o,l,n,a)}},{key:"render",value:function(){var n,a=this.props,i=a.hide,o=a.dot,l=a.points,c=a.className,u=a.top,d=a.left,f=a.xAxis,h=a.yAxis,m=a.width,y=a.height,g=a.isAnimationActive,p=a.id;if(i||!l||!l.length)return null;var v=this.state.isAnimationFinished,x=l.length===1,b=ct("recharts-area",c),_=f&&f.allowDataOverflow,j=h&&h.allowDataOverflow,S=_||j,C=Qe(p)?this.id:p,P=(n=Ve(o,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},N=P.r,E=N===void 0?3:N,A=P.strokeWidth,T=A===void 0?2:A,R=I3(o)?o:{},k=R.clipDot,O=k===void 0?!0:k,M=E*2+T;return $.createElement(gt,{className:b},_||j?$.createElement("defs",null,$.createElement("clipPath",{id:"clipPath-".concat(C)},$.createElement("rect",{x:_?d:d-m/2,y:j?u:u-y/2,width:_?m:m*2,height:j?y:y*2})),!O&&$.createElement("clipPath",{id:"clipPath-dots-".concat(C)},$.createElement("rect",{x:d-M/2,y:u-M/2,width:m+M,height:y+M}))):null,x?null:this.renderArea(S,C),(o||x)&&this.renderDots(S,O,C),(!g||v)&&fi.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,curBaseLine:n.baseLine,prevPoints:a.curPoints,prevBaseLine:a.curBaseLine}:n.points!==a.curPoints||n.baseLine!==a.curBaseLine?{curPoints:n.points,curBaseLine:n.baseLine}:null}}])}(w.PureComponent);GB=ma;Mi(ma,"displayName","Area");Mi(ma,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Ta.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Mi(ma,"getBaseValue",function(e,t,r,n){var a=e.layout,i=e.baseValue,o=t.props.baseValue,l=o??i;if(we(l)&&typeof l=="number")return l;var c=a==="horizontal"?n:r,u=c.scale.domain();if(c.type==="number"){var d=Math.max(u[0],u[1]),f=Math.min(u[0],u[1]);return l==="dataMin"?f:l==="dataMax"||d<0?d:Math.max(Math.min(u[0],u[1]),0)}return l==="dataMin"?u[0]:l==="dataMax"?u[1]:u[0]});Mi(ma,"getComposedData",function(e){var t=e.props,r=e.item,n=e.xAxis,a=e.yAxis,i=e.xAxisTicks,o=e.yAxisTicks,l=e.bandSize,c=e.dataKey,u=e.stackedData,d=e.dataStartIndex,f=e.displayedData,h=e.offset,m=t.layout,y=u&&u.length,g=GB.getBaseValue(t,r,n,a),p=m==="horizontal",v=!1,x=f.map(function(_,j){var S;y?S=u[d+j]:(S=dr(_,c),Array.isArray(S)?v=!0:S=[g,S]);var C=S[1]==null||y&&dr(_,c)==null;return p?{x:Yu({axis:n,ticks:i,bandSize:l,entry:_,index:j}),y:C?null:a.scale(S[1]),value:S,payload:_}:{x:C?null:n.scale(S[1]),y:Yu({axis:a,ticks:o,bandSize:l,entry:_,index:j}),value:S,payload:_}}),b;return y||v?b=x.map(function(_){var j=Array.isArray(_.value)?_.value[0]:null;return p?{x:_.x,y:j!=null&&_.y!=null?a.scale(j):null}:{x:j!=null?n.scale(j):null,y:_.y}}):b=p?a.scale(g):n.scale(g),Ws({points:x,baseLine:b,layout:m,isRange:v},h)});Mi(ma,"renderDotItem",function(e,t){var r;if($.isValidElement(e))r=$.cloneElement(e,t);else if(Je(e))r=e(t);else{var n=ct("recharts-area-dot",typeof e!="boolean"?e.className:""),a=t.key,i=XB(t,N1e);r=$.createElement(ip,jl({},i,{key:a,className:n}))}return r});function ld(e){"@babel/helpers - typeof";return ld=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ld(e)}function $1e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I1e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,tF(n.key),n)}}function D1e(e,t,r){return t&&I1e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function L1e(e,t,r){return t=gy(t),B1e(e,ZB()?Reflect.construct(t,r||[],gy(e).constructor):t.apply(e,r))}function B1e(e,t){if(t&&(ld(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return F1e(e)}function F1e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ZB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ZB=function(){return!!e})()}function gy(e){return gy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},gy(e)}function z1e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p_(e,t)}function p_(e,t){return p_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},p_(e,t)}function eF(e,t,r){return t=tF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tF(e){var t=U1e(e,"string");return ld(t)=="symbol"?t:t+""}function U1e(e,t){if(ld(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(ld(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var g0=function(e){function t(){return $1e(this,t),L1e(this,t,arguments)}return z1e(t,e),D1e(t,[{key:"render",value:function(){return null}}])}(w.Component);eF(g0,"displayName","ZAxis");eF(g0,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var V1e=["option","isActive"];function lh(){return lh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lh.apply(this,arguments)}function W1e(e,t){if(e==null)return{};var r=H1e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function H1e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function q1e(e){var t=e.option,r=e.isActive,n=W1e(e,V1e);return typeof t=="string"?w.createElement(ry,lh({option:w.createElement(Vx,lh({type:t},n)),isActive:r,shapeType:"symbols"},n)):w.createElement(ry,lh({option:t,isActive:r,shapeType:"symbols"},n))}function cd(e){"@babel/helpers - typeof";return cd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cd(e)}function ch(){return ch=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ch.apply(this,arguments)}function dT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Sa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dT(Object(r),!0).forEach(function(n){fo(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function K1e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,nF(n.key),n)}}function Y1e(e,t,r){return t&&fT(e.prototype,t),r&&fT(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function G1e(e,t,r){return t=vy(t),X1e(e,rF()?Reflect.construct(t,r||[],vy(e).constructor):t.apply(e,r))}function X1e(e,t){if(t&&(cd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Q1e(e)}function Q1e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(rF=function(){return!!e})()}function vy(e){return vy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},vy(e)}function J1e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g_(e,t)}function g_(e,t){return g_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},g_(e,t)}function fo(e,t,r){return t=nF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nF(e){var t=Z1e(e,"string");return cd(t)=="symbol"?t:t+""}function Z1e(e,t){if(cd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(cd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var v0=function(e){function t(){var r;K1e(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=G1e(this,t,[].concat(a)),fo(r,"state",{isAnimationFinished:!1}),fo(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0})}),fo(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1})}),fo(r,"id",Vo("recharts-scatter-")),r}return J1e(t,e),Y1e(t,[{key:"renderSymbolsStatically",value:function(n){var a=this,i=this.props,o=i.shape,l=i.activeShape,c=i.activeIndex,u=Ve(this.props,!1);return n.map(function(d,f){var h=c===f,m=h?l:o,y=Sa(Sa({},u),d);return $.createElement(gt,ch({className:"recharts-scatter-symbol",key:"symbol-".concat(d==null?void 0:d.cx,"-").concat(d==null?void 0:d.cy,"-").concat(d==null?void 0:d.size,"-").concat(f)},Mo(a.props,d,f),{role:"img"}),$.createElement(q1e,ch({option:m,isActive:h,key:"symbol-".concat(f)},y)))})}},{key:"renderSymbolsWithAnimation",value:function(){var n=this,a=this.props,i=a.points,o=a.isAnimationActive,l=a.animationBegin,c=a.animationDuration,u=a.animationEasing,d=a.animationId,f=this.state.prevPoints;return $.createElement(Da,{begin:l,duration:c,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(h){var m=h.t,y=i.map(function(g,p){var v=f&&f[p];if(v){var x=wr(v.cx,g.cx),b=wr(v.cy,g.cy),_=wr(v.size,g.size);return Sa(Sa({},g),{},{cx:x(m),cy:b(m),size:_(m)})}var j=wr(0,g.size);return Sa(Sa({},g),{},{size:j(m)})});return $.createElement(gt,null,n.renderSymbolsStatically(y))})}},{key:"renderSymbols",value:function(){var n=this.props,a=n.points,i=n.isAnimationActive,o=this.state.prevPoints;return i&&a&&a.length&&(!o||!$o(o,a))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(a)}},{key:"renderErrorBar",value:function(){var n=this.props.isAnimationActive;if(n&&!this.state.isAnimationFinished)return null;var a=this.props,i=a.points,o=a.xAxis,l=a.yAxis,c=a.children,u=Bn(c,ef);return u?u.map(function(d,f){var h=d.props,m=h.direction,y=h.dataKey;return $.cloneElement(d,{key:"".concat(m,"-").concat(y,"-").concat(i[f]),data:i,xAxis:o,yAxis:l,layout:m==="x"?"vertical":"horizontal",dataPointFormatter:function(p,v){return{x:p.cx,y:p.cy,value:m==="x"?+p.node.x:+p.node.y,errorVal:dr(p,v)}}})}):null}},{key:"renderLine",value:function(){var n=this.props,a=n.points,i=n.line,o=n.lineType,l=n.lineJointType,c=Ve(this.props,!1),u=Ve(i,!1),d,f;if(o==="joint")d=a.map(function(b){return{x:b.cx,y:b.cy}});else if(o==="fitting"){var h=Lee(a),m=h.xmin,y=h.xmax,g=h.a,p=h.b,v=function(_){return g*_+p};d=[{x:m,y:v(m)},{x:y,y:v(y)}]}var x=Sa(Sa(Sa({},c),{},{fill:"none",stroke:c&&c.fill},u),{},{points:d});return $.isValidElement(i)?f=$.cloneElement(i,x):Je(i)?f=i(x):f=$.createElement(Po,ch({},x,{type:l})),$.createElement(gt,{className:"recharts-scatter-line",key:"recharts-scatter-line"},f)}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.points,o=n.line,l=n.className,c=n.xAxis,u=n.yAxis,d=n.left,f=n.top,h=n.width,m=n.height,y=n.id,g=n.isAnimationActive;if(a||!i||!i.length)return null;var p=this.state.isAnimationFinished,v=ct("recharts-scatter",l),x=c&&c.allowDataOverflow,b=u&&u.allowDataOverflow,_=x||b,j=Qe(y)?this.id:y;return $.createElement(gt,{className:v,clipPath:_?"url(#clipPath-".concat(j,")"):null},x||b?$.createElement("defs",null,$.createElement("clipPath",{id:"clipPath-".concat(j)},$.createElement("rect",{x:x?d:d-h/2,y:b?f:f-m/2,width:x?h:h*2,height:b?m:m*2}))):null,o&&this.renderLine(),this.renderErrorBar(),$.createElement(gt,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!g||p)&&fi.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:a.curPoints}:n.points!==a.curPoints?{curPoints:n.points}:null}}])}(w.PureComponent);fo(v0,"displayName","Scatter");fo(v0,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!Ta.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"});fo(v0,"getComposedData",function(e){var t=e.xAxis,r=e.yAxis,n=e.zAxis,a=e.item,i=e.displayedData,o=e.xAxisTicks,l=e.yAxisTicks,c=e.offset,u=a.props.tooltipType,d=Bn(a.props.children,ic),f=Qe(t.dataKey)?a.props.dataKey:t.dataKey,h=Qe(r.dataKey)?a.props.dataKey:r.dataKey,m=n&&n.dataKey,y=n?n.range:g0.defaultProps.range,g=y&&y[0],p=t.scale.bandwidth?t.scale.bandwidth():0,v=r.scale.bandwidth?r.scale.bandwidth():0,x=i.map(function(b,_){var j=dr(b,f),S=dr(b,h),C=!Qe(m)&&dr(b,m)||"-",P=[{name:Qe(t.dataKey)?a.props.name:t.name||t.dataKey,unit:t.unit||"",value:j,payload:b,dataKey:f,type:u},{name:Qe(r.dataKey)?a.props.name:r.name||r.dataKey,unit:r.unit||"",value:S,payload:b,dataKey:h,type:u}];C!=="-"&&P.push({name:n.name||n.dataKey,unit:n.unit||"",value:C,payload:b,dataKey:m,type:u});var N=Yu({axis:t,ticks:o,bandSize:p,entry:b,index:_,dataKey:f}),E=Yu({axis:r,ticks:l,bandSize:v,entry:b,index:_,dataKey:h}),A=C!=="-"?n.scale(C):g,T=Math.sqrt(Math.max(A,0)/Math.PI);return Sa(Sa({},b),{},{cx:N,cy:E,x:N-T,y:E-T,xAxis:t,yAxis:r,zAxis:n,width:2*T,height:2*T,size:A,node:{x:j,y:S,z:C},tooltipPayload:P,tooltipPosition:{x:N,y:E},payload:b},d&&d[_]&&d[_].props)});return Sa({points:x},c)});function ud(e){"@babel/helpers - typeof";return ud=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ud(e)}function e_e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t_e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,sF(n.key),n)}}function r_e(e,t,r){return t&&t_e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function n_e(e,t,r){return t=yy(t),a_e(e,aF()?Reflect.construct(t,r||[],yy(e).constructor):t.apply(e,r))}function a_e(e,t){if(t&&(ud(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return i_e(e)}function i_e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(aF=function(){return!!e})()}function yy(e){return yy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},yy(e)}function s_e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v_(e,t)}function v_(e,t){return v_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},v_(e,t)}function iF(e,t,r){return t=sF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sF(e){var t=o_e(e,"string");return ud(t)=="symbol"?t:t+""}function o_e(e,t){if(ud(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(ud(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function y_(){return y_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},y_.apply(this,arguments)}function l_e(e){var t=e.xAxisId,r=hN(),n=mN(),a=$B(t);return a==null?null:w.createElement(tf,y_({},a,{className:ct("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(o){return hs(o,!0)}}))}var mr=function(e){function t(){return e_e(this,t),n_e(this,t,arguments)}return s_e(t,e),r_e(t,[{key:"render",value:function(){return w.createElement(l_e,this.props)}}])}(w.Component);iF(mr,"displayName","XAxis");iF(mr,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function dd(e){"@babel/helpers - typeof";return dd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dd(e)}function c_e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u_e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,cF(n.key),n)}}function d_e(e,t,r){return t&&u_e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function f_e(e,t,r){return t=xy(t),h_e(e,oF()?Reflect.construct(t,r||[],xy(e).constructor):t.apply(e,r))}function h_e(e,t){if(t&&(dd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return m_e(e)}function m_e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oF=function(){return!!e})()}function xy(e){return xy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},xy(e)}function p_e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x_(e,t)}function x_(e,t){return x_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},x_(e,t)}function lF(e,t,r){return t=cF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cF(e){var t=g_e(e,"string");return dd(t)=="symbol"?t:t+""}function g_e(e,t){if(dd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(dd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function b_(){return b_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},b_.apply(this,arguments)}var v_e=function(t){var r=t.yAxisId,n=hN(),a=mN(),i=IB(r);return i==null?null:w.createElement(tf,b_({},i,{className:ct("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(l){return hs(l,!0)}}))},nr=function(e){function t(){return c_e(this,t),f_e(this,t,arguments)}return p_e(t,e),d_e(t,[{key:"render",value:function(){return w.createElement(v_e,this.props)}}])}(w.Component);lF(nr,"displayName","YAxis");lF(nr,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function hT(e){return w_e(e)||b_e(e)||x_e(e)||y_e()}function y_e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function x_e(e,t){if(e){if(typeof e=="string")return w_(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w_(e,t)}}function b_e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function w_e(e){if(Array.isArray(e))return w_(e)}function w_(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var j_=function(t,r,n,a,i){var o=Bn(t,d0),l=Bn(t,h0),c=[].concat(hT(o),hT(l)),u=Bn(t,p0),d="".concat(a,"Id"),f=a[0],h=r;if(c.length&&(h=c.reduce(function(g,p){if(p.props[d]===n&&Ui(p.props,"extendDomain")&&we(p.props[f])){var v=p.props[f];return[Math.min(g[0],v),Math.max(g[1],v)]}return g},h)),u.length){var m="".concat(f,"1"),y="".concat(f,"2");h=u.reduce(function(g,p){if(p.props[d]===n&&Ui(p.props,"extendDomain")&&we(p.props[m])&&we(p.props[y])){var v=p.props[m],x=p.props[y];return[Math.min(g[0],v,x),Math.max(g[1],v,x)]}return g},h)}return i&&i.length&&(h=i.reduce(function(g,p){return we(p)?[Math.min(g[0],p),Math.max(g[1],p)]:g},h)),h},uF={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function i(c,u,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var m=new a(d,f||c,h),y=r?r+u:u;return c._events[y]?c._events[y].fn?c._events[y]=[c._events[y],m]:c._events[y].push(m):(c._events[y]=m,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,m=f.length,y=new Array(m);h<m;h++)y[h]=f[h].fn;return y},l.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},l.prototype.emit=function(u,d,f,h,m,y){var g=r?r+u:u;if(!this._events[g])return!1;var p=this._events[g],v=arguments.length,x,b;if(p.fn){switch(p.once&&this.removeListener(u,p.fn,void 0,!0),v){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,d),!0;case 3:return p.fn.call(p.context,d,f),!0;case 4:return p.fn.call(p.context,d,f,h),!0;case 5:return p.fn.call(p.context,d,f,h,m),!0;case 6:return p.fn.call(p.context,d,f,h,m,y),!0}for(b=1,x=new Array(v-1);b<v;b++)x[b-1]=arguments[b];p.fn.apply(p.context,x)}else{var _=p.length,j;for(b=0;b<_;b++)switch(p[b].once&&this.removeListener(u,p[b].fn,void 0,!0),v){case 1:p[b].fn.call(p[b].context);break;case 2:p[b].fn.call(p[b].context,d);break;case 3:p[b].fn.call(p[b].context,d,f);break;case 4:p[b].fn.call(p[b].context,d,f,h);break;default:if(!x)for(j=1,x=new Array(v-1);j<v;j++)x[j-1]=arguments[j];p[b].fn.apply(p[b].context,x)}}return!0},l.prototype.on=function(u,d,f){return i(this,u,d,f,!1)},l.prototype.once=function(u,d,f){return i(this,u,d,f,!0)},l.prototype.removeListener=function(u,d,f,h){var m=r?r+u:u;if(!this._events[m])return this;if(!d)return o(this,m),this;var y=this._events[m];if(y.fn)y.fn===d&&(!h||y.once)&&(!f||y.context===f)&&o(this,m);else{for(var g=0,p=[],v=y.length;g<v;g++)(y[g].fn!==d||h&&!y[g].once||f&&y[g].context!==f)&&p.push(y[g]);p.length?this._events[m]=p.length===1?p[0]:p:o(this,m)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&o(this,d)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(uF);var j_e=uF.exports;const __e=It(j_e);var ew=new __e,tw="recharts.syncMouseEvents";function Pm(e){"@babel/helpers - typeof";return Pm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pm(e)}function S_e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C_e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,dF(n.key),n)}}function N_e(e,t,r){return t&&C_e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function rw(e,t,r){return t=dF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dF(e){var t=P_e(e,"string");return Pm(t)=="symbol"?t:t+""}function P_e(e,t){if(Pm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Pm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var k_e=function(){function e(){S_e(this,e),rw(this,"activeIndex",0),rw(this,"coordinateList",[]),rw(this,"layout","horizontal")}return N_e(e,[{key:"setDetails",value:function(r){var n,a=r.coordinateList,i=a===void 0?null:a,o=r.container,l=o===void 0?null:o,c=r.layout,u=c===void 0?null:c,d=r.offset,f=d===void 0?null:d,h=r.mouseHandlerCallback,m=h===void 0?null:h;this.coordinateList=(n=i??this.coordinateList)!==null&&n!==void 0?n:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=m??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),i=a.x,o=a.y,l=a.height,c=this.coordinateList[this.activeIndex].coordinate,u=((r=window)===null||r===void 0?void 0:r.scrollX)||0,d=((n=window)===null||n===void 0?void 0:n.scrollY)||0,f=i+c+u,h=o+this.offset.top+l/2+d;this.mouseHandlerCallback({pageX:f,pageY:h})}}}])}();function E_e(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var n=e==null?void 0:e[0],a=e==null?void 0:e[1];if(n&&a&&we(n)&&we(a))return!0}return!1}function A_e(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function fF(e){var t=e.cx,r=e.cy,n=e.radius,a=e.startAngle,i=e.endAngle,o=tr(t,r,n,a),l=tr(t,r,n,i);return{points:[o,l],cx:t,cy:r,radius:n,startAngle:a,endAngle:i}}function O_e(e,t,r){var n,a,i,o;if(e==="horizontal")n=t.x,i=n,a=r.top,o=r.top+r.height;else if(e==="vertical")a=t.y,o=a,n=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,u=t.innerRadius,d=t.outerRadius,f=t.angle,h=tr(l,c,u,f),m=tr(l,c,d,f);n=h.x,a=h.y,i=m.x,o=m.y}else return fF(t);return[{x:n,y:a},{x:i,y:o}]}function km(e){"@babel/helpers - typeof";return km=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},km(e)}function mT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Jp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mT(Object(r),!0).forEach(function(n){T_e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function T_e(e,t,r){return t=R_e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function R_e(e){var t=M_e(e,"string");return km(t)=="symbol"?t:t+""}function M_e(e,t){if(km(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(km(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $_e(e){var t,r,n=e.element,a=e.tooltipEventType,i=e.isActive,o=e.activeCoordinate,l=e.activePayload,c=e.offset,u=e.activeTooltipIndex,d=e.tooltipAxisBandSize,f=e.layout,h=e.chartName,m=(t=n.props.cursor)!==null&&t!==void 0?t:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!m||!i||!o||h!=="ScatterChart"&&a!=="axis")return null;var y,g=Po;if(h==="ScatterChart")y=o,g=Sxe;else if(h==="BarChart")y=A_e(f,o,c,d),g=cN;else if(f==="radial"){var p=fF(o),v=p.cx,x=p.cy,b=p.radius,_=p.startAngle,j=p.endAngle;y={cx:v,cy:x,startAngle:_,endAngle:j,innerRadius:b,outerRadius:b},g=tB}else y={points:O_e(f,o,c)},g=Po;var S=Jp(Jp(Jp(Jp({stroke:"#ccc",pointerEvents:"none"},c),y),Ve(m,!1)),{},{payload:l,payloadIndex:u,className:ct("recharts-tooltip-cursor",m.className)});return w.isValidElement(m)?w.cloneElement(m,S):w.createElement(g,S)}var I_e=["item"],D_e=["children","className","width","height","style","compact","title","desc"];function fd(e){"@babel/helpers - typeof";return fd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fd(e)}function tu(){return tu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tu.apply(this,arguments)}function pT(e,t){return F_e(e)||B_e(e,t)||mF(e,t)||L_e()}function L_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function B_e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function F_e(e){if(Array.isArray(e))return e}function gT(e,t){if(e==null)return{};var r=z_e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function z_e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function U_e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V_e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,pF(n.key),n)}}function W_e(e,t,r){return t&&V_e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function H_e(e,t,r){return t=by(t),q_e(e,hF()?Reflect.construct(t,r||[],by(e).constructor):t.apply(e,r))}function q_e(e,t){if(t&&(fd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return K_e(e)}function K_e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hF=function(){return!!e})()}function by(e){return by=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},by(e)}function Y_e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&__(e,t)}function __(e,t){return __=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},__(e,t)}function hd(e){return Q_e(e)||X_e(e)||mF(e)||G_e()}function G_e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mF(e,t){if(e){if(typeof e=="string")return S_(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S_(e,t)}}function X_e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Q_e(e){if(Array.isArray(e))return S_(e)}function S_(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function vT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function me(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vT(Object(r),!0).forEach(function(n){Ze(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ze(e,t,r){return t=pF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pF(e){var t=J_e(e,"string");return fd(t)=="symbol"?t:t+""}function J_e(e,t){if(fd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(fd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Z_e={xAxis:["bottom","top"],yAxis:["left","right"]},eSe={width:"100%",height:"100%"},gF={x:0,y:0};function Zp(e){return e}var tSe=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},rSe=function(t,r,n,a){var i=r.find(function(d){return d&&d.index===n});if(i){if(t==="horizontal")return{x:i.coordinate,y:a.y};if(t==="vertical")return{x:a.x,y:i.coordinate};if(t==="centric"){var o=i.coordinate,l=a.radius;return me(me(me({},a),tr(a.cx,a.cy,l,o)),{},{angle:o,radius:l})}var c=i.coordinate,u=a.angle;return me(me(me({},a),tr(a.cx,a.cy,c,u)),{},{angle:u,radius:c})}return gF},y0=function(t,r){var n=r.graphicalItems,a=r.dataStartIndex,i=r.dataEndIndex,o=(n??[]).reduce(function(l,c){var u=c.props.data;return u&&u.length?[].concat(hd(l),hd(u)):l},[]);return o.length>0?o:t&&t.length&&we(a)&&we(i)?t.slice(a,i+1):[]};function vF(e){return e==="number"?[0,"auto"]:void 0}var C_=function(t,r,n,a){var i=t.graphicalItems,o=t.tooltipAxis,l=y0(r,t);return n<0||!i||!i.length||n>=l.length?null:i.reduce(function(c,u){var d,f=(d=u.props.data)!==null&&d!==void 0?d:r;f&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=n&&(f=f.slice(t.dataStartIndex,t.dataEndIndex+1));var h;if(o.dataKey&&!o.allowDuplicatedCategory){var m=f===void 0?l:f;h=vv(m,o.dataKey,a)}else h=f&&f[n]||l[n];return h?[].concat(hd(c),[G4(u,h)]):c},[])},yT=function(t,r,n,a){var i=a||{x:t.chartX,y:t.chartY},o=tSe(i,n),l=t.orderedTooltipTicks,c=t.tooltipAxis,u=t.tooltipTicks,d=Ype(o,l,u,c);if(d>=0&&u){var f=u[d]&&u[d].value,h=C_(t,r,d,f),m=rSe(n,l,d,i);return{activeTooltipIndex:d,activeLabel:f,activePayload:h,activeCoordinate:m}}return null},nSe=function(t,r){var n=r.axes,a=r.graphicalItems,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.layout,f=t.children,h=t.stackOffset,m=V4(d,i);return n.reduce(function(y,g){var p,v=g.type.defaultProps!==void 0?me(me({},g.type.defaultProps),g.props):g.props,x=v.type,b=v.dataKey,_=v.allowDataOverflow,j=v.allowDuplicatedCategory,S=v.scale,C=v.ticks,P=v.includeHidden,N=v[o];if(y[N])return y;var E=y0(t.data,{graphicalItems:a.filter(function(ee){var le,V=o in ee.props?ee.props[o]:(le=ee.type.defaultProps)===null||le===void 0?void 0:le[o];return V===N}),dataStartIndex:c,dataEndIndex:u}),A=E.length,T,R,k;E_e(v.domain,_,x)&&(T=I1(v.domain,null,_),m&&(x==="number"||S!=="auto")&&(k=nh(E,b,"category")));var O=vF(x);if(!T||T.length===0){var M,D=(M=v.domain)!==null&&M!==void 0?M:O;if(b){if(T=nh(E,b,x),x==="category"&&m){var L=Dee(T);j&&L?(R=T,T=ay(0,A)):j||(T=IO(D,T,g).reduce(function(ee,le){return ee.indexOf(le)>=0?ee:[].concat(hd(ee),[le])},[]))}else if(x==="category")j?T=T.filter(function(ee){return ee!==""&&!Qe(ee)}):T=IO(D,T,g).reduce(function(ee,le){return ee.indexOf(le)>=0||le===""||Qe(le)?ee:[].concat(hd(ee),[le])},[]);else if(x==="number"){var B=Zpe(E,a.filter(function(ee){var le,V,I=o in ee.props?ee.props[o]:(le=ee.type.defaultProps)===null||le===void 0?void 0:le[o],F="hide"in ee.props?ee.props.hide:(V=ee.type.defaultProps)===null||V===void 0?void 0:V.hide;return I===N&&(P||!F)}),b,i,d);B&&(T=B)}m&&(x==="number"||S!=="auto")&&(k=nh(E,b,"category"))}else m?T=ay(0,A):l&&l[N]&&l[N].hasStack&&x==="number"?T=h==="expand"?[0,1]:Y4(l[N].stackGroups,c,u):T=U4(E,a.filter(function(ee){var le=o in ee.props?ee.props[o]:ee.type.defaultProps[o],V="hide"in ee.props?ee.props.hide:ee.type.defaultProps.hide;return le===N&&(P||!V)}),x,d,!0);if(x==="number")T=j_(f,T,N,i,C),D&&(T=I1(D,T,_));else if(x==="category"&&D){var z=D,Z=T.every(function(ee){return z.indexOf(ee)>=0});Z&&(T=z)}}return me(me({},y),{},Ze({},N,me(me({},v),{},{axisType:i,domain:T,categoricalDomain:k,duplicateDomain:R,originalDomain:(p=v.domain)!==null&&p!==void 0?p:O,isCategorical:m,layout:d})))},{})},aSe=function(t,r){var n=r.graphicalItems,a=r.Axis,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.layout,f=t.children,h=y0(t.data,{graphicalItems:n,dataStartIndex:c,dataEndIndex:u}),m=h.length,y=V4(d,i),g=-1;return n.reduce(function(p,v){var x=v.type.defaultProps!==void 0?me(me({},v.type.defaultProps),v.props):v.props,b=x[o],_=vF("number");if(!p[b]){g++;var j;return y?j=ay(0,m):l&&l[b]&&l[b].hasStack?(j=Y4(l[b].stackGroups,c,u),j=j_(f,j,b,i)):(j=I1(_,U4(h,n.filter(function(S){var C,P,N=o in S.props?S.props[o]:(C=S.type.defaultProps)===null||C===void 0?void 0:C[o],E="hide"in S.props?S.props.hide:(P=S.type.defaultProps)===null||P===void 0?void 0:P.hide;return N===b&&!E}),"number",d),a.defaultProps.allowDataOverflow),j=j_(f,j,b,i)),me(me({},p),{},Ze({},b,me(me({axisType:i},a.defaultProps),{},{hide:!0,orientation:ha(Z_e,"".concat(i,".").concat(g%2),null),domain:j,originalDomain:_,isCategorical:y,layout:d})))}return p},{})},iSe=function(t,r){var n=r.axisType,a=n===void 0?"xAxis":n,i=r.AxisComp,o=r.graphicalItems,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.children,f="".concat(a,"Id"),h=Bn(d,i),m={};return h&&h.length?m=nSe(t,{axes:h,graphicalItems:o,axisType:a,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:u}):o&&o.length&&(m=aSe(t,{Axis:i,graphicalItems:o,axisType:a,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:u})),m},sSe=function(t){var r=eo(t),n=hs(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:IC(n,function(a){return a.coordinate}),tooltipAxis:r,tooltipAxisBandSize:Hv(r,n)}},xT=function(t){var r=t.children,n=t.defaultShowTooltip,a=ia(r,ed),i=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(i=a.props.startIndex),a.props.endIndex>=0&&(o=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!n}},oSe=function(t){return!t||!t.length?!1:t.some(function(r){var n=gs(r&&r.type);return n&&n.indexOf("Bar")>=0})},bT=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},lSe=function(t,r){var n=t.props,a=t.graphicalItems,i=t.xAxisMap,o=i===void 0?{}:i,l=t.yAxisMap,c=l===void 0?{}:l,u=n.width,d=n.height,f=n.children,h=n.margin||{},m=ia(f,ed),y=ia(f,Vr),g=Object.keys(c).reduce(function(j,S){var C=c[S],P=C.orientation;return!C.mirror&&!C.hide?me(me({},j),{},Ze({},P,j[P]+C.width)):j},{left:h.left||0,right:h.right||0}),p=Object.keys(o).reduce(function(j,S){var C=o[S],P=C.orientation;return!C.mirror&&!C.hide?me(me({},j),{},Ze({},P,ha(j,"".concat(P))+C.height)):j},{top:h.top||0,bottom:h.bottom||0}),v=me(me({},p),g),x=v.bottom;m&&(v.bottom+=m.props.height||ed.defaultProps.height),y&&r&&(v=Qpe(v,a,n,r));var b=u-v.left-v.right,_=d-v.top-v.bottom;return me(me({brushBottom:x},v),{},{width:Math.max(b,0),height:Math.max(_,0)})},cSe=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},sp=function(t){var r=t.chartName,n=t.GraphicalChild,a=t.defaultTooltipEventType,i=a===void 0?"axis":a,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=t.axisComponents,u=t.legendContent,d=t.formatAxisMap,f=t.defaultProps,h=function(v,x){var b=x.graphicalItems,_=x.stackGroups,j=x.offset,S=x.updateId,C=x.dataStartIndex,P=x.dataEndIndex,N=v.barSize,E=v.layout,A=v.barGap,T=v.barCategoryGap,R=v.maxBarSize,k=bT(E),O=k.numericAxisName,M=k.cateAxisName,D=oSe(b),L=[];return b.forEach(function(B,z){var Z=y0(v.data,{graphicalItems:[B],dataStartIndex:C,dataEndIndex:P}),ee=B.type.defaultProps!==void 0?me(me({},B.type.defaultProps),B.props):B.props,le=ee.dataKey,V=ee.maxBarSize,I=ee["".concat(O,"Id")],F=ee["".concat(M,"Id")],q={},de=c.reduce(function(X,se){var Q=x["".concat(se.axisType,"Map")],ce=ee["".concat(se.axisType,"Id")];Q&&Q[ce]||se.axisType==="zAxis"||ql();var pe=Q[ce];return me(me({},X),{},Ze(Ze({},se.axisType,pe),"".concat(se.axisType,"Ticks"),hs(pe)))},q),re=de[M],H=de["".concat(M,"Ticks")],Y=_&&_[I]&&_[I].hasStack&&lge(B,_[I].stackGroups),G=gs(B.type).indexOf("Bar")>=0,J=Hv(re,H),ge=[],Ce=D&&Gpe({barSize:N,stackGroups:_,totalSize:cSe(de,M)});if(G){var $e,Ge,dt=Qe(V)?R:V,Rt=($e=(Ge=Hv(re,H,!0))!==null&&Ge!==void 0?Ge:dt)!==null&&$e!==void 0?$e:0;ge=Xpe({barGap:A,barCategoryGap:T,bandSize:Rt!==J?Rt:J,sizeList:Ce[F],maxBarSize:dt}),Rt!==J&&(ge=ge.map(function(X){return me(me({},X),{},{position:me(me({},X.position),{},{offset:X.position.offset-Rt/2})})}))}var U=B&&B.type&&B.type.getComposedData;U&&L.push({props:me(me({},U(me(me({},de),{},{displayedData:Z,props:v,dataKey:le,item:B,bandSize:J,barPosition:ge,offset:j,stackedData:Y,layout:E,dataStartIndex:C,dataEndIndex:P}))),{},Ze(Ze(Ze({key:B.key||"item-".concat(z)},O,de[O]),M,de[M]),"animationId",S)),childIndex:Xee(B,v.children),item:B})}),L},m=function(v,x){var b=v.props,_=v.dataStartIndex,j=v.dataEndIndex,S=v.updateId;if(!AE({props:b}))return null;var C=b.children,P=b.layout,N=b.stackOffset,E=b.data,A=b.reverseStackOrder,T=bT(P),R=T.numericAxisName,k=T.cateAxisName,O=Bn(C,n),M=sge(E,O,"".concat(R,"Id"),"".concat(k,"Id"),N,A),D=c.reduce(function(ee,le){var V="".concat(le.axisType,"Map");return me(me({},ee),{},Ze({},V,iSe(b,me(me({},le),{},{graphicalItems:O,stackGroups:le.axisType===R&&M,dataStartIndex:_,dataEndIndex:j}))))},{}),L=lSe(me(me({},D),{},{props:b,graphicalItems:O}),x==null?void 0:x.legendBBox);Object.keys(D).forEach(function(ee){D[ee]=d(b,D[ee],L,ee.replace("Map",""),r)});var B=D["".concat(k,"Map")],z=sSe(B),Z=h(b,me(me({},D),{},{dataStartIndex:_,dataEndIndex:j,updateId:S,graphicalItems:O,stackGroups:M,offset:L}));return me(me({formattedGraphicalItems:Z,graphicalItems:O,offset:L,stackGroups:M},z),D)},y=function(p){function v(x){var b,_,j;return U_e(this,v),j=H_e(this,v,[x]),Ze(j,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Ze(j,"accessibilityManager",new k_e),Ze(j,"handleLegendBBoxUpdate",function(S){if(S){var C=j.state,P=C.dataStartIndex,N=C.dataEndIndex,E=C.updateId;j.setState(me({legendBBox:S},m({props:j.props,dataStartIndex:P,dataEndIndex:N,updateId:E},me(me({},j.state),{},{legendBBox:S}))))}}),Ze(j,"handleReceiveSyncEvent",function(S,C,P){if(j.props.syncId===S){if(P===j.eventEmitterSymbol&&typeof j.props.syncMethod!="function")return;j.applySyncEvent(C)}}),Ze(j,"handleBrushChange",function(S){var C=S.startIndex,P=S.endIndex;if(C!==j.state.dataStartIndex||P!==j.state.dataEndIndex){var N=j.state.updateId;j.setState(function(){return me({dataStartIndex:C,dataEndIndex:P},m({props:j.props,dataStartIndex:C,dataEndIndex:P,updateId:N},j.state))}),j.triggerSyncEvent({dataStartIndex:C,dataEndIndex:P})}}),Ze(j,"handleMouseEnter",function(S){var C=j.getMouseInfo(S);if(C){var P=me(me({},C),{},{isTooltipActive:!0});j.setState(P),j.triggerSyncEvent(P);var N=j.props.onMouseEnter;Je(N)&&N(P,S)}}),Ze(j,"triggeredAfterMouseMove",function(S){var C=j.getMouseInfo(S),P=C?me(me({},C),{},{isTooltipActive:!0}):{isTooltipActive:!1};j.setState(P),j.triggerSyncEvent(P);var N=j.props.onMouseMove;Je(N)&&N(P,S)}),Ze(j,"handleItemMouseEnter",function(S){j.setState(function(){return{isTooltipActive:!0,activeItem:S,activePayload:S.tooltipPayload,activeCoordinate:S.tooltipPosition||{x:S.cx,y:S.cy}}})}),Ze(j,"handleItemMouseLeave",function(){j.setState(function(){return{isTooltipActive:!1}})}),Ze(j,"handleMouseMove",function(S){S.persist(),j.throttleTriggeredAfterMouseMove(S)}),Ze(j,"handleMouseLeave",function(S){j.throttleTriggeredAfterMouseMove.cancel();var C={isTooltipActive:!1};j.setState(C),j.triggerSyncEvent(C);var P=j.props.onMouseLeave;Je(P)&&P(C,S)}),Ze(j,"handleOuterEvent",function(S){var C=Gee(S),P=ha(j.props,"".concat(C));if(C&&Je(P)){var N,E;/.*touch.*/i.test(C)?E=j.getMouseInfo(S.changedTouches[0]):E=j.getMouseInfo(S),P((N=E)!==null&&N!==void 0?N:{},S)}}),Ze(j,"handleClick",function(S){var C=j.getMouseInfo(S);if(C){var P=me(me({},C),{},{isTooltipActive:!0});j.setState(P),j.triggerSyncEvent(P);var N=j.props.onClick;Je(N)&&N(P,S)}}),Ze(j,"handleMouseDown",function(S){var C=j.props.onMouseDown;if(Je(C)){var P=j.getMouseInfo(S);C(P,S)}}),Ze(j,"handleMouseUp",function(S){var C=j.props.onMouseUp;if(Je(C)){var P=j.getMouseInfo(S);C(P,S)}}),Ze(j,"handleTouchMove",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&j.throttleTriggeredAfterMouseMove(S.changedTouches[0])}),Ze(j,"handleTouchStart",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&j.handleMouseDown(S.changedTouches[0])}),Ze(j,"handleTouchEnd",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&j.handleMouseUp(S.changedTouches[0])}),Ze(j,"handleDoubleClick",function(S){var C=j.props.onDoubleClick;if(Je(C)){var P=j.getMouseInfo(S);C(P,S)}}),Ze(j,"handleContextMenu",function(S){var C=j.props.onContextMenu;if(Je(C)){var P=j.getMouseInfo(S);C(P,S)}}),Ze(j,"triggerSyncEvent",function(S){j.props.syncId!==void 0&&ew.emit(tw,j.props.syncId,S,j.eventEmitterSymbol)}),Ze(j,"applySyncEvent",function(S){var C=j.props,P=C.layout,N=C.syncMethod,E=j.state.updateId,A=S.dataStartIndex,T=S.dataEndIndex;if(S.dataStartIndex!==void 0||S.dataEndIndex!==void 0)j.setState(me({dataStartIndex:A,dataEndIndex:T},m({props:j.props,dataStartIndex:A,dataEndIndex:T,updateId:E},j.state)));else if(S.activeTooltipIndex!==void 0){var R=S.chartX,k=S.chartY,O=S.activeTooltipIndex,M=j.state,D=M.offset,L=M.tooltipTicks;if(!D)return;if(typeof N=="function")O=N(L,S);else if(N==="value"){O=-1;for(var B=0;B<L.length;B++)if(L[B].value===S.activeLabel){O=B;break}}var z=me(me({},D),{},{x:D.left,y:D.top}),Z=Math.min(R,z.x+z.width),ee=Math.min(k,z.y+z.height),le=L[O]&&L[O].value,V=C_(j.state,j.props.data,O),I=L[O]?{x:P==="horizontal"?L[O].coordinate:Z,y:P==="horizontal"?ee:L[O].coordinate}:gF;j.setState(me(me({},S),{},{activeLabel:le,activeCoordinate:I,activePayload:V,activeTooltipIndex:O}))}else j.setState(S)}),Ze(j,"renderCursor",function(S){var C,P=j.state,N=P.isTooltipActive,E=P.activeCoordinate,A=P.activePayload,T=P.offset,R=P.activeTooltipIndex,k=P.tooltipAxisBandSize,O=j.getTooltipEventType(),M=(C=S.props.active)!==null&&C!==void 0?C:N,D=j.props.layout,L=S.key||"_recharts-cursor";return $.createElement($_e,{key:L,activeCoordinate:E,activePayload:A,activeTooltipIndex:R,chartName:r,element:S,isActive:M,layout:D,offset:T,tooltipAxisBandSize:k,tooltipEventType:O})}),Ze(j,"renderPolarAxis",function(S,C,P){var N=ha(S,"type.axisType"),E=ha(j.state,"".concat(N,"Map")),A=S.type.defaultProps,T=A!==void 0?me(me({},A),S.props):S.props,R=E&&E[T["".concat(N,"Id")]];return w.cloneElement(S,me(me({},R),{},{className:ct(N,R.className),key:S.key||"".concat(C,"-").concat(P),ticks:hs(R,!0)}))}),Ze(j,"renderPolarGrid",function(S){var C=S.props,P=C.radialLines,N=C.polarAngles,E=C.polarRadius,A=j.state,T=A.radiusAxisMap,R=A.angleAxisMap,k=eo(T),O=eo(R),M=O.cx,D=O.cy,L=O.innerRadius,B=O.outerRadius;return w.cloneElement(S,{polarAngles:Array.isArray(N)?N:hs(O,!0).map(function(z){return z.coordinate}),polarRadius:Array.isArray(E)?E:hs(k,!0).map(function(z){return z.coordinate}),cx:M,cy:D,innerRadius:L,outerRadius:B,key:S.key||"polar-grid",radialLines:P})}),Ze(j,"renderLegend",function(){var S=j.state.formattedGraphicalItems,C=j.props,P=C.children,N=C.width,E=C.height,A=j.props.margin||{},T=N-(A.left||0)-(A.right||0),R=F4({children:P,formattedGraphicalItems:S,legendWidth:T,legendContent:u});if(!R)return null;var k=R.item,O=gT(R,I_e);return w.cloneElement(k,me(me({},O),{},{chartWidth:N,chartHeight:E,margin:A,onBBoxUpdate:j.handleLegendBBoxUpdate}))}),Ze(j,"renderTooltip",function(){var S,C=j.props,P=C.children,N=C.accessibilityLayer,E=ia(P,$t);if(!E)return null;var A=j.state,T=A.isTooltipActive,R=A.activeCoordinate,k=A.activePayload,O=A.activeLabel,M=A.offset,D=(S=E.props.active)!==null&&S!==void 0?S:T;return w.cloneElement(E,{viewBox:me(me({},M),{},{x:M.left,y:M.top}),active:D,label:O,payload:D?k:[],coordinate:R,accessibilityLayer:N})}),Ze(j,"renderBrush",function(S){var C=j.props,P=C.margin,N=C.data,E=j.state,A=E.offset,T=E.dataStartIndex,R=E.dataEndIndex,k=E.updateId;return w.cloneElement(S,{key:S.key||"_recharts-brush",onChange:Yp(j.handleBrushChange,S.props.onChange),data:N,x:we(S.props.x)?S.props.x:A.left,y:we(S.props.y)?S.props.y:A.top+A.height+A.brushBottom-(P.bottom||0),width:we(S.props.width)?S.props.width:A.width,startIndex:T,endIndex:R,updateId:"brush-".concat(k)})}),Ze(j,"renderReferenceElement",function(S,C,P){if(!S)return null;var N=j,E=N.clipPathId,A=j.state,T=A.xAxisMap,R=A.yAxisMap,k=A.offset,O=S.type.defaultProps||{},M=S.props,D=M.xAxisId,L=D===void 0?O.xAxisId:D,B=M.yAxisId,z=B===void 0?O.yAxisId:B;return w.cloneElement(S,{key:S.key||"".concat(C,"-").concat(P),xAxis:T[L],yAxis:R[z],viewBox:{x:k.left,y:k.top,width:k.width,height:k.height},clipPathId:E})}),Ze(j,"renderActivePoints",function(S){var C=S.item,P=S.activePoint,N=S.basePoint,E=S.childIndex,A=S.isRange,T=[],R=C.props.key,k=C.item.type.defaultProps!==void 0?me(me({},C.item.type.defaultProps),C.item.props):C.item.props,O=k.activeDot,M=k.dataKey,D=me(me({index:E,dataKey:M,cx:P.x,cy:P.y,r:4,fill:lN(C.item),strokeWidth:2,stroke:"#fff",payload:P.payload,value:P.value},Ve(O,!1)),yv(O));return T.push(v.renderActiveDot(O,D,"".concat(R,"-activePoint-").concat(E))),N?T.push(v.renderActiveDot(O,me(me({},D),{},{cx:N.x,cy:N.y}),"".concat(R,"-basePoint-").concat(E))):A&&T.push(null),T}),Ze(j,"renderGraphicChild",function(S,C,P){var N=j.filterFormatItem(S,C,P);if(!N)return null;var E=j.getTooltipEventType(),A=j.state,T=A.isTooltipActive,R=A.tooltipAxis,k=A.activeTooltipIndex,O=A.activeLabel,M=j.props.children,D=ia(M,$t),L=N.props,B=L.points,z=L.isRange,Z=L.baseLine,ee=N.item.type.defaultProps!==void 0?me(me({},N.item.type.defaultProps),N.item.props):N.item.props,le=ee.activeDot,V=ee.hide,I=ee.activeBar,F=ee.activeShape,q=!!(!V&&T&&D&&(le||I||F)),de={};E!=="axis"&&D&&D.props.trigger==="click"?de={onClick:Yp(j.handleItemMouseEnter,S.props.onClick)}:E!=="axis"&&(de={onMouseLeave:Yp(j.handleItemMouseLeave,S.props.onMouseLeave),onMouseEnter:Yp(j.handleItemMouseEnter,S.props.onMouseEnter)});var re=w.cloneElement(S,me(me({},N.props),de));function H(se){return typeof R.dataKey=="function"?R.dataKey(se.payload):null}if(q)if(k>=0){var Y,G;if(R.dataKey&&!R.allowDuplicatedCategory){var J=typeof R.dataKey=="function"?H:"payload.".concat(R.dataKey.toString());Y=vv(B,J,O),G=z&&Z&&vv(Z,J,O)}else Y=B==null?void 0:B[k],G=z&&Z&&Z[k];if(F||I){var ge=S.props.activeIndex!==void 0?S.props.activeIndex:k;return[w.cloneElement(S,me(me(me({},N.props),de),{},{activeIndex:ge})),null,null]}if(!Qe(Y))return[re].concat(hd(j.renderActivePoints({item:N,activePoint:Y,basePoint:G,childIndex:k,isRange:z})))}else{var Ce,$e=(Ce=j.getItemByXY(j.state.activeCoordinate))!==null&&Ce!==void 0?Ce:{graphicalItem:re},Ge=$e.graphicalItem,dt=Ge.item,Rt=dt===void 0?S:dt,U=Ge.childIndex,X=me(me(me({},N.props),de),{},{activeIndex:U});return[w.cloneElement(Rt,X),null,null]}return z?[re,null,null]:[re,null]}),Ze(j,"renderCustomized",function(S,C,P){return w.cloneElement(S,me(me({key:"recharts-customized-".concat(P)},j.props),j.state))}),Ze(j,"renderMap",{CartesianGrid:{handler:Zp,once:!0},ReferenceArea:{handler:j.renderReferenceElement},ReferenceLine:{handler:Zp},ReferenceDot:{handler:j.renderReferenceElement},XAxis:{handler:Zp},YAxis:{handler:Zp},Brush:{handler:j.renderBrush,once:!0},Bar:{handler:j.renderGraphicChild},Line:{handler:j.renderGraphicChild},Area:{handler:j.renderGraphicChild},Radar:{handler:j.renderGraphicChild},RadialBar:{handler:j.renderGraphicChild},Scatter:{handler:j.renderGraphicChild},Pie:{handler:j.renderGraphicChild},Funnel:{handler:j.renderGraphicChild},Tooltip:{handler:j.renderCursor,once:!0},PolarGrid:{handler:j.renderPolarGrid,once:!0},PolarAngleAxis:{handler:j.renderPolarAxis},PolarRadiusAxis:{handler:j.renderPolarAxis},Customized:{handler:j.renderCustomized}}),j.clipPathId="".concat((b=x.id)!==null&&b!==void 0?b:Vo("recharts"),"-clip"),j.throttleTriggeredAfterMouseMove=BL(j.triggeredAfterMouseMove,(_=x.throttleDelay)!==null&&_!==void 0?_:1e3/60),j.state={},j}return Y_e(v,p),W_e(v,[{key:"componentDidMount",value:function(){var b,_;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(b=this.props.margin.left)!==null&&b!==void 0?b:0,top:(_=this.props.margin.top)!==null&&_!==void 0?_:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var b=this.props,_=b.children,j=b.data,S=b.height,C=b.layout,P=ia(_,$t);if(P){var N=P.props.defaultIndex;if(!(typeof N!="number"||N<0||N>this.state.tooltipTicks.length-1)){var E=this.state.tooltipTicks[N]&&this.state.tooltipTicks[N].value,A=C_(this.state,j,N,E),T=this.state.tooltipTicks[N].coordinate,R=(this.state.offset.top+S)/2,k=C==="horizontal",O=k?{x:T,y:R}:{y:T,x:R},M=this.state.formattedGraphicalItems.find(function(L){var B=L.item;return B.type.name==="Scatter"});M&&(O=me(me({},O),M.props.points[N].tooltipPosition),A=M.props.points[N].tooltipPayload);var D={activeTooltipIndex:N,isTooltipActive:!0,activeLabel:E,activePayload:A,activeCoordinate:O};this.setState(D),this.renderCursor(P),this.accessibilityManager.setIndex(N)}}}},{key:"getSnapshotBeforeUpdate",value:function(b,_){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==_.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==b.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==b.margin){var j,S;this.accessibilityManager.setDetails({offset:{left:(j=this.props.margin.left)!==null&&j!==void 0?j:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0}})}return null}},{key:"componentDidUpdate",value:function(b){Qj([ia(b.children,$t)],[ia(this.props.children,$t)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var b=ia(this.props.children,$t);if(b&&typeof b.props.shared=="boolean"){var _=b.props.shared?"axis":"item";return l.indexOf(_)>=0?_:i}return i}},{key:"getMouseInfo",value:function(b){if(!this.container)return null;var _=this.container,j=_.getBoundingClientRect(),S=jde(j),C={chartX:Math.round(b.pageX-S.left),chartY:Math.round(b.pageY-S.top)},P=j.width/_.offsetWidth||1,N=this.inRange(C.chartX,C.chartY,P);if(!N)return null;var E=this.state,A=E.xAxisMap,T=E.yAxisMap,R=this.getTooltipEventType(),k=yT(this.state,this.props.data,this.props.layout,N);if(R!=="axis"&&A&&T){var O=eo(A).scale,M=eo(T).scale,D=O&&O.invert?O.invert(C.chartX):null,L=M&&M.invert?M.invert(C.chartY):null;return me(me({},C),{},{xValue:D,yValue:L},k)}return k?me(me({},C),k):null}},{key:"inRange",value:function(b,_){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,S=this.props.layout,C=b/j,P=_/j;if(S==="horizontal"||S==="vertical"){var N=this.state.offset,E=C>=N.left&&C<=N.left+N.width&&P>=N.top&&P<=N.top+N.height;return E?{x:C,y:P}:null}var A=this.state,T=A.angleAxisMap,R=A.radiusAxisMap;if(T&&R){var k=eo(T);return BO({x:C,y:P},k)}return null}},{key:"parseEventsOfWrapper",value:function(){var b=this.props.children,_=this.getTooltipEventType(),j=ia(b,$t),S={};j&&_==="axis"&&(j.props.trigger==="click"?S={onClick:this.handleClick}:S={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var C=yv(this.props,this.handleOuterEvent);return me(me({},C),S)}},{key:"addListener",value:function(){ew.on(tw,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){ew.removeListener(tw,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(b,_,j){for(var S=this.state.formattedGraphicalItems,C=0,P=S.length;C<P;C++){var N=S[C];if(N.item===b||N.props.key===b.key||_===gs(N.item.type)&&j===N.childIndex)return N}return null}},{key:"renderClipPath",value:function(){var b=this.clipPathId,_=this.state.offset,j=_.left,S=_.top,C=_.height,P=_.width;return $.createElement("defs",null,$.createElement("clipPath",{id:b},$.createElement("rect",{x:j,y:S,height:C,width:P})))}},{key:"getXScales",value:function(){var b=this.state.xAxisMap;return b?Object.entries(b).reduce(function(_,j){var S=pT(j,2),C=S[0],P=S[1];return me(me({},_),{},Ze({},C,P.scale))},{}):null}},{key:"getYScales",value:function(){var b=this.state.yAxisMap;return b?Object.entries(b).reduce(function(_,j){var S=pT(j,2),C=S[0],P=S[1];return me(me({},_),{},Ze({},C,P.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(b){var _;return(_=this.state.xAxisMap)===null||_===void 0||(_=_[b])===null||_===void 0?void 0:_.scale}},{key:"getYScaleByAxisId",value:function(b){var _;return(_=this.state.yAxisMap)===null||_===void 0||(_=_[b])===null||_===void 0?void 0:_.scale}},{key:"getItemByXY",value:function(b){var _=this.state,j=_.formattedGraphicalItems,S=_.activeItem;if(j&&j.length)for(var C=0,P=j.length;C<P;C++){var N=j[C],E=N.props,A=N.item,T=A.type.defaultProps!==void 0?me(me({},A.type.defaultProps),A.props):A.props,R=gs(A.type);if(R==="Bar"){var k=(E.data||[]).find(function(L){return axe(b,L)});if(k)return{graphicalItem:N,payload:k}}else if(R==="RadialBar"){var O=(E.data||[]).find(function(L){return BO(b,L)});if(O)return{graphicalItem:N,payload:O}}else if(o0(N,S)||l0(N,S)||jm(N,S)){var M=q0e({graphicalItem:N,activeTooltipItem:S,itemData:T.data}),D=T.activeIndex===void 0?M:T.activeIndex;return{graphicalItem:me(me({},N),{},{childIndex:D}),payload:jm(N,S)?T.data[M]:N.props.data[M]}}}return null}},{key:"render",value:function(){var b=this;if(!AE(this))return null;var _=this.props,j=_.children,S=_.className,C=_.width,P=_.height,N=_.style,E=_.compact,A=_.title,T=_.desc,R=gT(_,D_e),k=Ve(R,!1);if(E)return $.createElement(K2,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},$.createElement(Zj,tu({},k,{width:C,height:P,title:A,desc:T}),this.renderClipPath(),TE(j,this.renderMap)));if(this.props.accessibilityLayer){var O,M;k.tabIndex=(O=this.props.tabIndex)!==null&&O!==void 0?O:0,k.role=(M=this.props.role)!==null&&M!==void 0?M:"application",k.onKeyDown=function(L){b.accessibilityManager.keyboardEvent(L)},k.onFocus=function(){b.accessibilityManager.focus()}}var D=this.parseEventsOfWrapper();return $.createElement(K2,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},$.createElement("div",tu({className:ct("recharts-wrapper",S),style:me({position:"relative",cursor:"default",width:C,height:P},N)},D,{ref:function(B){b.container=B}}),$.createElement(Zj,tu({},k,{width:C,height:P,title:A,desc:T,style:eSe}),this.renderClipPath(),TE(j,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(w.Component);Ze(y,"displayName",r),Ze(y,"defaultProps",me({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),Ze(y,"getDerivedStateFromProps",function(p,v){var x=p.dataKey,b=p.data,_=p.children,j=p.width,S=p.height,C=p.layout,P=p.stackOffset,N=p.margin,E=v.dataStartIndex,A=v.dataEndIndex;if(v.updateId===void 0){var T=xT(p);return me(me(me({},T),{},{updateId:0},m(me(me({props:p},T),{},{updateId:0}),v)),{},{prevDataKey:x,prevData:b,prevWidth:j,prevHeight:S,prevLayout:C,prevStackOffset:P,prevMargin:N,prevChildren:_})}if(x!==v.prevDataKey||b!==v.prevData||j!==v.prevWidth||S!==v.prevHeight||C!==v.prevLayout||P!==v.prevStackOffset||!fu(N,v.prevMargin)){var R=xT(p),k={chartX:v.chartX,chartY:v.chartY,isTooltipActive:v.isTooltipActive},O=me(me({},yT(v,b,C)),{},{updateId:v.updateId+1}),M=me(me(me({},R),k),O);return me(me(me({},M),m(me({props:p},M),v)),{},{prevDataKey:x,prevData:b,prevWidth:j,prevHeight:S,prevLayout:C,prevStackOffset:P,prevMargin:N,prevChildren:_})}if(!Qj(_,v.prevChildren)){var D,L,B,z,Z=ia(_,ed),ee=Z&&(D=(L=Z.props)===null||L===void 0?void 0:L.startIndex)!==null&&D!==void 0?D:E,le=Z&&(B=(z=Z.props)===null||z===void 0?void 0:z.endIndex)!==null&&B!==void 0?B:A,V=ee!==E||le!==A,I=!Qe(b),F=I&&!V?v.updateId:v.updateId+1;return me(me({updateId:F},m(me(me({props:p},v),{},{updateId:F,dataStartIndex:ee,dataEndIndex:le}),v)),{},{prevChildren:_,dataStartIndex:ee,dataEndIndex:le})}return null}),Ze(y,"renderActiveDot",function(p,v,x){var b;return w.isValidElement(p)?b=w.cloneElement(p,v):Je(p)?b=p(v):b=$.createElement(ip,v),$.createElement(gt,{className:"recharts-active-dot",key:x},b)});var g=w.forwardRef(function(v,x){return $.createElement(y,tu({},v,{ref:x}))});return g.displayName=y.displayName,g},yF=sp({chartName:"LineChart",GraphicalChild:Dn,axisComponents:[{axisType:"xAxis",AxisComp:mr},{axisType:"yAxis",AxisComp:nr}],formatAxisMap:u0}),Ps=sp({chartName:"BarChart",GraphicalChild:rr,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:mr},{axisType:"yAxis",AxisComp:nr}],formatAxisMap:u0}),xF=sp({chartName:"PieChart",GraphicalChild:Xi,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:s0},{axisType:"radiusAxis",AxisComp:a0}],formatAxisMap:yge,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),bF=sp({chartName:"AreaChart",GraphicalChild:ma,axisComponents:[{axisType:"xAxis",AxisComp:mr},{axisType:"yAxis",AxisComp:nr}],formatAxisMap:u0}),md=sp({chartName:"ComposedChart",GraphicalChild:[Dn,ma,rr,v0],axisComponents:[{axisType:"xAxis",AxisComp:mr},{axisType:"yAxis",AxisComp:nr},{axisType:"zAxis",AxisComp:g0}],formatAxisMap:u0});const eg={B2C:"hsl(var(--primary))",B2B:"hsl(38, 92%, 50%)",OEM:"hsl(150, 60%, 40%)"},wT=["hsl(var(--primary))","hsl(var(--accent))","hsl(150, 60%, 40%)","hsl(38, 92%, 50%)","hsl(280, 60%, 50%)"];function uSe({products:e,years:t}){const[r,n]=w.useState("by-product"),a=t.map(c=>{const u={year:c};return e.forEach(d=>{if(d.volumesByChannel){const f=d.volumesByChannel.B2C[c]||0,h=d.volumesByChannel.B2B[c]||0,m=d.volumesByChannel.OEM[c]||0;u[d.name]=(f*d.priceHT+h*(d.priceHT_B2B||d.priceHT)+m*(d.priceHT_OEM||d.priceHT))/1e3}else u[d.name]=(d.volumesByYear[c]||0)*d.priceHT/1e3}),u}),i=t.map(c=>{let u=0,d=0,f=0;return e.forEach(h=>{const m=h.volumesByChannel||{B2C:{},B2B:{},OEM:{}};u+=(m.B2C[c]||0)*h.priceHT,d+=(m.B2B[c]||0)*(h.priceHT_B2B||h.priceHT),f+=(m.OEM[c]||0)*(h.priceHT_OEM||h.priceHT)}),{year:c,B2C:u/1e3,B2B:d/1e3,OEM:f/1e3}}),o={B2C:0,B2B:0,OEM:0};e.forEach(c=>{const u=c.volumesByChannel||{B2C:{},B2B:{},OEM:{}};t.forEach(d=>{o.B2C+=(u.B2C[d]||0)*c.priceHT,o.B2B+=(u.B2B[d]||0)*(c.priceHT_B2B||c.priceHT),o.OEM+=(u.OEM[d]||0)*(c.priceHT_OEM||c.priceHT)})});const l=["B2C","B2B","OEM"].map(c=>({name:c,value:Math.round(o[c])})).filter(c=>c.value>0);return s.jsxs(Ye,{title:"CA par Produit & Canal",children:[s.jsxs("div",{className:"flex gap-2 mb-4",children:[s.jsx(ae,{variant:r==="by-product"?"default":"outline",size:"sm",onClick:()=>n("by-product"),children:"Par Produit"}),s.jsx(ae,{variant:r==="by-channel"?"default":"outline",size:"sm",onClick:()=>n("by-channel"),children:"Par Canal"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[s.jsx("div",{className:"lg:col-span-2 h-64",children:s.jsx(Wr,{width:"100%",height:"100%",children:r==="by-product"?s.jsxs(Ps,{data:a,children:[s.jsx(qr,{strokeDasharray:"3 3"}),s.jsx(mr,{dataKey:"year"}),s.jsx(nr,{tickFormatter:c=>`${c}k`}),s.jsx($t,{formatter:c=>`${c.toFixed(0)}k`}),s.jsx(Vr,{}),e.map((c,u)=>s.jsx(rr,{dataKey:c.name,stackId:"a",fill:wT[u%wT.length]},c.id))]}):s.jsxs(Ps,{data:i,children:[s.jsx(qr,{strokeDasharray:"3 3"}),s.jsx(mr,{dataKey:"year"}),s.jsx(nr,{tickFormatter:c=>`${c}k`}),s.jsx($t,{formatter:c=>`${c.toFixed(0)}k`}),s.jsx(Vr,{}),s.jsx(rr,{dataKey:"B2C",stackId:"a",fill:eg.B2C}),s.jsx(rr,{dataKey:"B2B",stackId:"a",fill:eg.B2B}),s.jsx(rr,{dataKey:"OEM",stackId:"a",fill:eg.OEM})]})})}),s.jsxs("div",{className:"h-64",children:[s.jsx("p",{className:"text-xs text-muted-foreground text-center mb-1",children:"Rpartition CA par canal"}),s.jsx(Wr,{width:"100%",height:"90%",children:s.jsxs(xF,{children:[s.jsx(Xi,{data:l,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:70,label:({name:c,percent:u})=>`${c} ${(u*100).toFixed(0)}%`,children:l.map(c=>s.jsx(ic,{fill:eg[c.name]},c.name))}),s.jsx($t,{formatter:c=>te(c,!0)})]})})]})]})]})}const Pf=["B2C","B2B","OEM"];function dSe({products:e,years:t,onChannelVolumeChange:r}){const[n,a]=w.useState({B2C:0,B2B:0,OEM:0}),i=(c,u)=>{const d=e.find(m=>m.id===c);if(!d)return;const f=d.volumesByChannel||{B2C:{},B2B:{},OEM:{}},h=n[u]/100;t.forEach((m,y)=>{if(m<d.launchYear||y===0||t[y-1]<d.launchYear)return;const g=f[u][t[y-1]]||0,p=Math.round(g*(1+h));p!==(f[u][m]||0)&&(r(c,m,u,p),f[u][m]=p)})},o=t.map(c=>{let u=0,d=0,f=0,h=0,m=0,y=0;return e.forEach(g=>{const p=g.volumesByChannel||{B2C:{},B2B:{},OEM:{}},v=p.B2C[c]||0,x=p.B2B[c]||0,b=p.OEM[c]||0;u+=v,d+=x,f+=b,h+=v*g.priceHT,m+=x*(g.priceHT_B2B||g.priceHT),y+=b*(g.priceHT_OEM||g.priceHT)}),{year:c,b2c:u,b2b:d,oem:f,caB2C:h,caB2B:m,caOEM:y,caTotal:h+m+y}}),l=o.reduce((c,u)=>c+u.caTotal,0);return s.jsxs(Ye,{title:"Volumes par Anne & Canal",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-4 p-3 bg-muted/30 rounded-lg border",children:[s.jsx(rc,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"text-sm font-medium",children:"Croissance annuelle :"}),Pf.map(c=>s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"text-xs font-medium",children:c}),s.jsx(be,{type:"number",value:n[c],onChange:u=>a(d=>({...d,[c]:Number(u.target.value)})),className:"h-7 w-16 text-center text-xs",step:5}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"%"})]},c)),s.jsx("span",{className:"text-xs text-muted-foreground ml-2",children:"Cliquez sur le nom d'un produit pour appliquer la croissance."})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Ht,{children:[s.jsxs(qt,{children:[s.jsxs(_e,{children:[s.jsx(ie,{rowSpan:2,className:"min-w-[120px]",children:"Produit"}),t.map(c=>s.jsx(ie,{colSpan:3,className:"text-center border-l",children:c},c)),s.jsx(ie,{rowSpan:2,className:"text-right border-l",children:"CA Total"})]}),s.jsx(_e,{children:t.map(c=>Pf.map(u=>s.jsx(ie,{className:`text-center text-xs ${u==="B2C"?"border-l":""}`,children:u},`${c}-${u}`)))})]}),s.jsxs(Kt,{children:[e.map(c=>{const u=c.volumesByChannel||{B2C:{},B2B:{},OEM:{}},d=t.reduce((f,h)=>{const m=u.B2C[h]||0,y=u.B2B[h]||0,g=u.OEM[h]||0;return f+m*c.priceHT+y*(c.priceHT_B2B||c.priceHT)+g*(c.priceHT_OEM||c.priceHT)},0);return s.jsxs(_e,{children:[s.jsx(W,{children:s.jsxs("button",{className:"text-left hover:underline cursor-pointer",onClick:()=>Pf.forEach(f=>i(c.id,f)),title:"Appliquer la croissance sur ce produit",children:[s.jsx("div",{className:"font-medium",children:c.name}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:["Cot: ",te(c.unitCost)]})]})}),t.map(f=>Pf.map(h=>s.jsx(W,{className:`text-center ${h==="B2C"?"border-l":""}`,children:f>=c.launchYear?s.jsx(be,{type:"number",value:u[h][f]||0,onChange:m=>r(c.id,f,h,Number(m.target.value)),className:"h-7 w-16 mx-auto text-center text-xs"}):s.jsx("span",{className:"text-muted-foreground text-xs",children:"-"})},`${c.id}-${f}-${h}`))),s.jsx(W,{className:"text-right font-mono-numbers font-medium border-l",children:te(d,!0)})]},c.id)}),s.jsxs(_e,{className:"bg-muted/40 font-semibold border-t-2",children:[s.jsx(W,{children:"Total Volumes"}),o.map(c=>Pf.map(u=>s.jsx(W,{className:`text-center text-xs ${u==="B2C"?"border-l":""}`,children:u==="B2C"?c.b2c:u==="B2B"?c.b2b:c.oem},`total-vol-${c.year}-${u}`))),s.jsx(W,{className:"text-right border-l",children:"-"})]}),s.jsxs(_e,{className:"bg-primary/10 font-bold",children:[s.jsx(W,{children:"CA par Anne"}),o.map(c=>s.jsxs(W,{colSpan:3,className:"text-center border-l text-xs",children:[te(c.caTotal,!0),s.jsxs("div",{className:"text-[10px] font-normal text-muted-foreground",children:["B2C: ",te(c.caB2C,!0)," | B2B: ",te(c.caB2B,!0)," | OEM: ",te(c.caOEM,!0)]})]},`total-ca-${c.year}`)),s.jsx(W,{className:"text-right font-mono-numbers border-l",children:te(l,!0)})]})]})]})})]})}const fSe=kd("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Oe({className:e,variant:t,...r}){return s.jsx("div",{className:ue(fSe({variant:t}),e),...r})}var nw=0;function yN(){w.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??jT()),document.body.insertAdjacentElement("beforeend",e[1]??jT()),nw++,()=>{nw===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),nw--}},[])}function jT(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var aw="focusScope.autoFocusOnMount",iw="focusScope.autoFocusOnUnmount",_T={bubbles:!1,cancelable:!0},hSe="FocusScope",x0=w.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...o}=e,[l,c]=w.useState(null),u=Zr(a),d=Zr(i),f=w.useRef(null),h=ut(t,g=>c(g)),m=w.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;w.useEffect(()=>{if(n){let g=function(b){if(m.paused||!l)return;const _=b.target;l.contains(_)?f.current=_:Hs(f.current,{select:!0})},p=function(b){if(m.paused||!l)return;const _=b.relatedTarget;_!==null&&(l.contains(_)||Hs(f.current,{select:!0}))},v=function(b){if(document.activeElement===document.body)for(const j of b)j.removedNodes.length>0&&Hs(l)};document.addEventListener("focusin",g),document.addEventListener("focusout",p);const x=new MutationObserver(v);return l&&x.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",p),x.disconnect()}}},[n,l,m.paused]),w.useEffect(()=>{if(l){CT.add(m);const g=document.activeElement;if(!l.contains(g)){const v=new CustomEvent(aw,_T);l.addEventListener(aw,u),l.dispatchEvent(v),v.defaultPrevented||(mSe(xSe(wF(l)),{select:!0}),document.activeElement===g&&Hs(l))}return()=>{l.removeEventListener(aw,u),setTimeout(()=>{const v=new CustomEvent(iw,_T);l.addEventListener(iw,d),l.dispatchEvent(v),v.defaultPrevented||Hs(g??document.body,{select:!0}),l.removeEventListener(iw,d),CT.remove(m)},0)}}},[l,u,d,m]);const y=w.useCallback(g=>{if(!r&&!n||m.paused)return;const p=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,v=document.activeElement;if(p&&v){const x=g.currentTarget,[b,_]=pSe(x);b&&_?!g.shiftKey&&v===_?(g.preventDefault(),r&&Hs(b,{select:!0})):g.shiftKey&&v===b&&(g.preventDefault(),r&&Hs(_,{select:!0})):v===x&&g.preventDefault()}},[r,n,m.paused]);return s.jsx(We.div,{tabIndex:-1,...o,ref:h,onKeyDown:y})});x0.displayName=hSe;function mSe(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(Hs(n,{select:t}),document.activeElement!==r)return}function pSe(e){const t=wF(e),r=ST(t,e),n=ST(t.reverse(),e);return[r,n]}function wF(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function ST(e,t){for(const r of e)if(!gSe(r,{upTo:t}))return r}function gSe(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function vSe(e){return e instanceof HTMLInputElement&&"select"in e}function Hs(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&vSe(e)&&t&&e.select()}}var CT=ySe();function ySe(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=NT(e,t),e.unshift(t)},remove(t){var r;e=NT(e,t),(r=e[0])==null||r.resume()}}}function NT(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function xSe(e){return e.filter(t=>t.tagName!=="A")}var bSe=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},jc=new WeakMap,tg=new WeakMap,rg={},sw=0,jF=function(e){return e&&(e.host||jF(e.parentNode))},wSe=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=jF(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},jSe=function(e,t,r,n){var a=wSe(t,Array.isArray(e)?e:[e]);rg[r]||(rg[r]=new WeakMap);var i=rg[r],o=[],l=new Set,c=new Set(a),u=function(f){!f||l.has(f)||(l.add(f),u(f.parentNode))};a.forEach(u);var d=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(h){if(l.has(h))d(h);else try{var m=h.getAttribute(n),y=m!==null&&m!=="false",g=(jc.get(h)||0)+1,p=(i.get(h)||0)+1;jc.set(h,g),i.set(h,p),o.push(h),g===1&&y&&tg.set(h,!0),p===1&&h.setAttribute(r,"true"),y||h.setAttribute(n,"true")}catch(v){console.error("aria-hidden: cannot operate on ",h,v)}})};return d(t),l.clear(),sw++,function(){o.forEach(function(f){var h=jc.get(f)-1,m=i.get(f)-1;jc.set(f,h),i.set(f,m),h||(tg.has(f)||f.removeAttribute(n),tg.delete(f)),m||f.removeAttribute(r)}),sw--,sw||(jc=new WeakMap,jc=new WeakMap,tg=new WeakMap,rg={})}},xN=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),a=bSe(e);return a?(n.push.apply(n,Array.from(a.querySelectorAll("[aria-live]"))),jSe(n,a,r,"aria-hidden")):function(){return null}},Pg="right-scroll-bar-position",kg="width-before-scroll-bar",_Se="with-scroll-bars-hidden",SSe="--removed-body-scroll-bar-size";function ow(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function CSe(e,t){var r=w.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var a=r.value;a!==n&&(r.value=n,r.callback(n,a))}}}})[0];return r.callback=t,r.facade}var NSe=typeof window<"u"?w.useLayoutEffect:w.useEffect,PT=new WeakMap;function PSe(e,t){var r=CSe(null,function(n){return e.forEach(function(a){return ow(a,n)})});return NSe(function(){var n=PT.get(r);if(n){var a=new Set(n),i=new Set(e),o=r.current;a.forEach(function(l){i.has(l)||ow(l,null)}),i.forEach(function(l){a.has(l)||ow(l,o)})}PT.set(r,e)},[e]),r}function kSe(e){return e}function ESe(e,t){t===void 0&&(t=kSe);var r=[],n=!1,a={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(i){var o=t(i,n);return r.push(o),function(){r=r.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(n=!0;r.length;){var o=r;r=[],o.forEach(i)}r={push:function(l){return i(l)},filter:function(){return r}}},assignMedium:function(i){n=!0;var o=[];if(r.length){var l=r;r=[],l.forEach(i),o=r}var c=function(){var d=o;o=[],d.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),r={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),r}}}};return a}function ASe(e){e===void 0&&(e={});var t=ESe(null);return t.options=Ei({async:!0,ssr:!1},e),t}var _F=function(e){var t=e.sideCar,r=Bd(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return w.createElement(n,Ei({},r))};_F.isSideCarExport=!0;function OSe(e,t){return e.useMedium(t),_F}var SF=ASe(),lw=function(){},b0=w.forwardRef(function(e,t){var r=w.useRef(null),n=w.useState({onScrollCapture:lw,onWheelCapture:lw,onTouchMoveCapture:lw}),a=n[0],i=n[1],o=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,f=e.shards,h=e.sideCar,m=e.noRelative,y=e.noIsolation,g=e.inert,p=e.allowPinchZoom,v=e.as,x=v===void 0?"div":v,b=e.gapMode,_=Bd(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),j=h,S=PSe([r,t]),C=Ei(Ei({},_),a);return w.createElement(w.Fragment,null,d&&w.createElement(j,{sideCar:SF,removeScrollBar:u,shards:f,noRelative:m,noIsolation:y,inert:g,setCallbacks:i,allowPinchZoom:!!p,lockRef:r,gapMode:b}),o?w.cloneElement(w.Children.only(l),Ei(Ei({},C),{ref:S})):w.createElement(x,Ei({},C,{className:c,ref:S}),l))});b0.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};b0.classNames={fullWidth:kg,zeroRight:Pg};var TSe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function RSe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=TSe();return t&&e.setAttribute("nonce",t),e}function MSe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function $Se(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var ISe=function(){var e=0,t=null;return{add:function(r){e==0&&(t=RSe())&&(MSe(t,r),$Se(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},DSe=function(){var e=ISe();return function(t,r){w.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},CF=function(){var e=DSe(),t=function(r){var n=r.styles,a=r.dynamic;return e(n,a),null};return t},LSe={left:0,top:0,right:0,gap:0},cw=function(e){return parseInt(e||"",10)||0},BSe=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[cw(r),cw(n),cw(a)]},FSe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return LSe;var t=BSe(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},zSe=CF(),pu="data-scroll-locked",USe=function(e,t,r,n){var a=e.left,i=e.top,o=e.right,l=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(_Se,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(pu,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Pg,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(kg,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Pg," .").concat(Pg,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(kg," .").concat(kg,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(pu,`] {
    `).concat(SSe,": ").concat(l,`px;
  }
`)},kT=function(){var e=parseInt(document.body.getAttribute(pu)||"0",10);return isFinite(e)?e:0},VSe=function(){w.useEffect(function(){return document.body.setAttribute(pu,(kT()+1).toString()),function(){var e=kT()-1;e<=0?document.body.removeAttribute(pu):document.body.setAttribute(pu,e.toString())}},[])},WSe=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,a=n===void 0?"margin":n;VSe();var i=w.useMemo(function(){return FSe(a)},[a]);return w.createElement(zSe,{styles:USe(i,!t,a,r?"":"!important")})},N_=!1;if(typeof window<"u")try{var ng=Object.defineProperty({},"passive",{get:function(){return N_=!0,!0}});window.addEventListener("test",ng,ng),window.removeEventListener("test",ng,ng)}catch{N_=!1}var _c=N_?{passive:!1}:!1,HSe=function(e){return e.tagName==="TEXTAREA"},NF=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!HSe(e)&&r[t]==="visible")},qSe=function(e){return NF(e,"overflowY")},KSe=function(e){return NF(e,"overflowX")},ET=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var a=PF(e,n);if(a){var i=kF(e,n),o=i[1],l=i[2];if(o>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},YSe=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},GSe=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},PF=function(e,t){return e==="v"?qSe(t):KSe(t)},kF=function(e,t){return e==="v"?YSe(t):GSe(t)},XSe=function(e,t){return e==="h"&&t==="rtl"?-1:1},QSe=function(e,t,r,n,a){var i=XSe(e,window.getComputedStyle(t).direction),o=i*n,l=r.target,c=t.contains(l),u=!1,d=o>0,f=0,h=0;do{if(!l)break;var m=kF(e,l),y=m[0],g=m[1],p=m[2],v=g-p-i*y;(y||v)&&PF(e,l)&&(f+=v,h+=y);var x=l.parentNode;l=x&&x.nodeType===Node.DOCUMENT_FRAGMENT_NODE?x.host:x}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(d&&(Math.abs(f)<1||!a)||!d&&(Math.abs(h)<1||!a))&&(u=!0),u},ag=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},AT=function(e){return[e.deltaX,e.deltaY]},OT=function(e){return e&&"current"in e?e.current:e},JSe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},ZSe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},eCe=0,Sc=[];function tCe(e){var t=w.useRef([]),r=w.useRef([0,0]),n=w.useRef(),a=w.useState(eCe++)[0],i=w.useState(CF)[0],o=w.useRef(e);w.useEffect(function(){o.current=e},[e]),w.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var g=bY([e.lockRef.current],(e.shards||[]).map(OT),!0).filter(Boolean);return g.forEach(function(p){return p.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),g.forEach(function(p){return p.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=w.useCallback(function(g,p){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!o.current.allowPinchZoom;var v=ag(g),x=r.current,b="deltaX"in g?g.deltaX:x[0]-v[0],_="deltaY"in g?g.deltaY:x[1]-v[1],j,S=g.target,C=Math.abs(b)>Math.abs(_)?"h":"v";if("touches"in g&&C==="h"&&S.type==="range")return!1;var P=ET(C,S);if(!P)return!0;if(P?j=C:(j=C==="v"?"h":"v",P=ET(C,S)),!P)return!1;if(!n.current&&"changedTouches"in g&&(b||_)&&(n.current=j),!j)return!0;var N=n.current||j;return QSe(N,p,g,N==="h"?b:_,!0)},[]),c=w.useCallback(function(g){var p=g;if(!(!Sc.length||Sc[Sc.length-1]!==i)){var v="deltaY"in p?AT(p):ag(p),x=t.current.filter(function(j){return j.name===p.type&&(j.target===p.target||p.target===j.shadowParent)&&JSe(j.delta,v)})[0];if(x&&x.should){p.cancelable&&p.preventDefault();return}if(!x){var b=(o.current.shards||[]).map(OT).filter(Boolean).filter(function(j){return j.contains(p.target)}),_=b.length>0?l(p,b[0]):!o.current.noIsolation;_&&p.cancelable&&p.preventDefault()}}},[]),u=w.useCallback(function(g,p,v,x){var b={name:g,delta:p,target:v,should:x,shadowParent:rCe(v)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(_){return _!==b})},1)},[]),d=w.useCallback(function(g){r.current=ag(g),n.current=void 0},[]),f=w.useCallback(function(g){u(g.type,AT(g),g.target,l(g,e.lockRef.current))},[]),h=w.useCallback(function(g){u(g.type,ag(g),g.target,l(g,e.lockRef.current))},[]);w.useEffect(function(){return Sc.push(i),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:h}),document.addEventListener("wheel",c,_c),document.addEventListener("touchmove",c,_c),document.addEventListener("touchstart",d,_c),function(){Sc=Sc.filter(function(g){return g!==i}),document.removeEventListener("wheel",c,_c),document.removeEventListener("touchmove",c,_c),document.removeEventListener("touchstart",d,_c)}},[]);var m=e.removeScrollBar,y=e.inert;return w.createElement(w.Fragment,null,y?w.createElement(i,{styles:ZSe(a)}):null,m?w.createElement(WSe,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function rCe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const nCe=OSe(SF,tCe);var w0=w.forwardRef(function(e,t){return w.createElement(b0,Ei({},e,{ref:t,sideCar:nCe}))});w0.classNames=b0.classNames;var aCe=[" ","Enter","ArrowUp","ArrowDown"],iCe=[" ","Enter"],Yl="Select",[j0,_0,sCe]=rx(Yl),[rf,c2e]=Un(Yl,[sCe,Rd]),S0=Rd(),[oCe,Ko]=rf(Yl),[lCe,cCe]=rf(Yl),EF=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:a,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:f,disabled:h,required:m,form:y}=e,g=S0(t),[p,v]=w.useState(null),[x,b]=w.useState(null),[_,j]=w.useState(!1),S=Dd(u),[C,P]=Jn({prop:n,defaultProp:a??!1,onChange:i,caller:Yl}),[N,E]=Jn({prop:o,defaultProp:l,onChange:c,caller:Yl}),A=w.useRef(null),T=p?y||!!p.closest("form"):!0,[R,k]=w.useState(new Set),O=Array.from(R).map(M=>M.props.value).join(";");return s.jsx(ZS,{...g,children:s.jsxs(oCe,{required:m,scope:t,trigger:p,onTriggerChange:v,valueNode:x,onValueNodeChange:b,valueNodeHasChildren:_,onValueNodeHasChildrenChange:j,contentId:Bi(),value:N,onValueChange:E,open:C,onOpenChange:P,dir:S,triggerPointerDownPosRef:A,disabled:h,children:[s.jsx(j0.Provider,{scope:t,children:s.jsx(lCe,{scope:e.__scopeSelect,onNativeOptionAdd:w.useCallback(M=>{k(D=>new Set(D).add(M))},[]),onNativeOptionRemove:w.useCallback(M=>{k(D=>{const L=new Set(D);return L.delete(M),L})},[]),children:r})}),T?s.jsxs(ZF,{"aria-hidden":!0,required:m,tabIndex:-1,name:d,autoComplete:f,value:N,onChange:M=>E(M.target.value),disabled:h,form:y,children:[N===void 0?s.jsx("option",{value:""}):null,Array.from(R)]},O):null]})})};EF.displayName=Yl;var AF="SelectTrigger",OF=w.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...a}=e,i=S0(r),o=Ko(AF,r),l=o.disabled||n,c=ut(t,o.onTriggerChange),u=_0(r),d=w.useRef("touch"),[f,h,m]=t5(g=>{const p=u().filter(b=>!b.disabled),v=p.find(b=>b.value===o.value),x=r5(p,g,v);x!==void 0&&o.onValueChange(x.value)}),y=g=>{l||(o.onOpenChange(!0),m()),g&&(o.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return s.jsx(ux,{asChild:!0,...i,children:s.jsx(We.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":e5(o.value)?"":void 0,...a,ref:c,onClick:Te(a.onClick,g=>{g.currentTarget.focus(),d.current!=="mouse"&&y(g)}),onPointerDown:Te(a.onPointerDown,g=>{d.current=g.pointerType;const p=g.target;p.hasPointerCapture(g.pointerId)&&p.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(y(g),g.preventDefault())}),onKeyDown:Te(a.onKeyDown,g=>{const p=f.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&h(g.key),!(p&&g.key===" ")&&aCe.includes(g.key)&&(y(),g.preventDefault())})})})});OF.displayName=AF;var TF="SelectValue",RF=w.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:a,children:i,placeholder:o="",...l}=e,c=Ko(TF,r),{onValueNodeHasChildrenChange:u}=c,d=i!==void 0,f=ut(t,c.onValueNodeChange);return un(()=>{u(d)},[u,d]),s.jsx(We.span,{...l,ref:f,style:{pointerEvents:"none"},children:e5(c.value)?s.jsx(s.Fragment,{children:o}):i})});RF.displayName=TF;var uCe="SelectIcon",MF=w.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...a}=e;return s.jsx(We.span,{"aria-hidden":!0,...a,ref:t,children:n||""})});MF.displayName=uCe;var dCe="SelectPortal",$F=e=>s.jsx(qm,{asChild:!0,...e});$F.displayName=dCe;var Gl="SelectContent",IF=w.forwardRef((e,t)=>{const r=Ko(Gl,e.__scopeSelect),[n,a]=w.useState();if(un(()=>{a(new DocumentFragment)},[]),!r.open){const i=n;return i?tc.createPortal(s.jsx(DF,{scope:e.__scopeSelect,children:s.jsx(j0.Slot,{scope:e.__scopeSelect,children:s.jsx("div",{children:e.children})})}),i):null}return s.jsx(LF,{...e,ref:t})});IF.displayName=Gl;var Ka=10,[DF,Yo]=rf(Gl),fCe="SelectContentImpl",hCe=Bl("SelectContent.RemoveScroll"),LF=w.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:h,collisionPadding:m,sticky:y,hideWhenDetached:g,avoidCollisions:p,...v}=e,x=Ko(Gl,r),[b,_]=w.useState(null),[j,S]=w.useState(null),C=ut(t,q=>_(q)),[P,N]=w.useState(null),[E,A]=w.useState(null),T=_0(r),[R,k]=w.useState(!1),O=w.useRef(!1);w.useEffect(()=>{if(b)return xN(b)},[b]),yN();const M=w.useCallback(q=>{const[de,...re]=T().map(G=>G.ref.current),[H]=re.slice(-1),Y=document.activeElement;for(const G of q)if(G===Y||(G==null||G.scrollIntoView({block:"nearest"}),G===de&&j&&(j.scrollTop=0),G===H&&j&&(j.scrollTop=j.scrollHeight),G==null||G.focus(),document.activeElement!==Y))return},[T,j]),D=w.useCallback(()=>M([P,b]),[M,P,b]);w.useEffect(()=>{R&&D()},[R,D]);const{onOpenChange:L,triggerPointerDownPosRef:B}=x;w.useEffect(()=>{if(b){let q={x:0,y:0};const de=H=>{var Y,G;q={x:Math.abs(Math.round(H.pageX)-(((Y=B.current)==null?void 0:Y.x)??0)),y:Math.abs(Math.round(H.pageY)-(((G=B.current)==null?void 0:G.y)??0))}},re=H=>{q.x<=10&&q.y<=10?H.preventDefault():b.contains(H.target)||L(!1),document.removeEventListener("pointermove",de),B.current=null};return B.current!==null&&(document.addEventListener("pointermove",de),document.addEventListener("pointerup",re,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",de),document.removeEventListener("pointerup",re,{capture:!0})}}},[b,L,B]),w.useEffect(()=>{const q=()=>L(!1);return window.addEventListener("blur",q),window.addEventListener("resize",q),()=>{window.removeEventListener("blur",q),window.removeEventListener("resize",q)}},[L]);const[z,Z]=t5(q=>{const de=T().filter(Y=>!Y.disabled),re=de.find(Y=>Y.ref.current===document.activeElement),H=r5(de,q,re);H&&setTimeout(()=>H.ref.current.focus())}),ee=w.useCallback((q,de,re)=>{const H=!O.current&&!re;(x.value!==void 0&&x.value===de||H)&&(N(q),H&&(O.current=!0))},[x.value]),le=w.useCallback(()=>b==null?void 0:b.focus(),[b]),V=w.useCallback((q,de,re)=>{const H=!O.current&&!re;(x.value!==void 0&&x.value===de||H)&&A(q)},[x.value]),I=n==="popper"?P_:BF,F=I===P_?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:h,collisionPadding:m,sticky:y,hideWhenDetached:g,avoidCollisions:p}:{};return s.jsx(DF,{scope:r,content:b,viewport:j,onViewportChange:S,itemRefCallback:ee,selectedItem:P,onItemLeave:le,itemTextRefCallback:V,focusSelectedItem:D,selectedItemText:E,position:n,isPositioned:R,searchRef:z,children:s.jsx(w0,{as:hCe,allowPinchZoom:!0,children:s.jsx(x0,{asChild:!0,trapped:x.open,onMountAutoFocus:q=>{q.preventDefault()},onUnmountAutoFocus:Te(a,q=>{var de;(de=x.trigger)==null||de.focus({preventScroll:!0}),q.preventDefault()}),children:s.jsx(Pd,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:q=>q.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:s.jsx(I,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:q=>q.preventDefault(),...v,...F,onPlaced:()=>k(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:Te(v.onKeyDown,q=>{const de=q.ctrlKey||q.altKey||q.metaKey;if(q.key==="Tab"&&q.preventDefault(),!de&&q.key.length===1&&Z(q.key),["ArrowUp","ArrowDown","Home","End"].includes(q.key)){let H=T().filter(Y=>!Y.disabled).map(Y=>Y.ref.current);if(["ArrowUp","End"].includes(q.key)&&(H=H.slice().reverse()),["ArrowUp","ArrowDown"].includes(q.key)){const Y=q.target,G=H.indexOf(Y);H=H.slice(G+1)}setTimeout(()=>M(H)),q.preventDefault()}})})})})})})});LF.displayName=fCe;var mCe="SelectItemAlignedPosition",BF=w.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...a}=e,i=Ko(Gl,r),o=Yo(Gl,r),[l,c]=w.useState(null),[u,d]=w.useState(null),f=ut(t,C=>d(C)),h=_0(r),m=w.useRef(!1),y=w.useRef(!0),{viewport:g,selectedItem:p,selectedItemText:v,focusSelectedItem:x}=o,b=w.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&u&&g&&p&&v){const C=i.trigger.getBoundingClientRect(),P=u.getBoundingClientRect(),N=i.valueNode.getBoundingClientRect(),E=v.getBoundingClientRect();if(i.dir!=="rtl"){const Y=E.left-P.left,G=N.left-Y,J=C.left-G,ge=C.width+J,Ce=Math.max(ge,P.width),$e=window.innerWidth-Ka,Ge=Fh(G,[Ka,Math.max(Ka,$e-Ce)]);l.style.minWidth=ge+"px",l.style.left=Ge+"px"}else{const Y=P.right-E.right,G=window.innerWidth-N.right-Y,J=window.innerWidth-C.right-G,ge=C.width+J,Ce=Math.max(ge,P.width),$e=window.innerWidth-Ka,Ge=Fh(G,[Ka,Math.max(Ka,$e-Ce)]);l.style.minWidth=ge+"px",l.style.right=Ge+"px"}const A=h(),T=window.innerHeight-Ka*2,R=g.scrollHeight,k=window.getComputedStyle(u),O=parseInt(k.borderTopWidth,10),M=parseInt(k.paddingTop,10),D=parseInt(k.borderBottomWidth,10),L=parseInt(k.paddingBottom,10),B=O+M+R+L+D,z=Math.min(p.offsetHeight*5,B),Z=window.getComputedStyle(g),ee=parseInt(Z.paddingTop,10),le=parseInt(Z.paddingBottom,10),V=C.top+C.height/2-Ka,I=T-V,F=p.offsetHeight/2,q=p.offsetTop+F,de=O+M+q,re=B-de;if(de<=V){const Y=A.length>0&&p===A[A.length-1].ref.current;l.style.bottom="0px";const G=u.clientHeight-g.offsetTop-g.offsetHeight,J=Math.max(I,F+(Y?le:0)+G+D),ge=de+J;l.style.height=ge+"px"}else{const Y=A.length>0&&p===A[0].ref.current;l.style.top="0px";const J=Math.max(V,O+g.offsetTop+(Y?ee:0)+F)+re;l.style.height=J+"px",g.scrollTop=de-V+g.offsetTop}l.style.margin=`${Ka}px 0`,l.style.minHeight=z+"px",l.style.maxHeight=T+"px",n==null||n(),requestAnimationFrame(()=>m.current=!0)}},[h,i.trigger,i.valueNode,l,u,g,p,v,i.dir,n]);un(()=>b(),[b]);const[_,j]=w.useState();un(()=>{u&&j(window.getComputedStyle(u).zIndex)},[u]);const S=w.useCallback(C=>{C&&y.current===!0&&(b(),x==null||x(),y.current=!1)},[b,x]);return s.jsx(gCe,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:m,onScrollButtonChange:S,children:s.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:_},children:s.jsx(We.div,{...a,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});BF.displayName=mCe;var pCe="SelectPopperPosition",P_=w.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:a=Ka,...i}=e,o=S0(r);return s.jsx(eC,{...o,...i,ref:t,align:n,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});P_.displayName=pCe;var[gCe,bN]=rf(Gl,{}),k_="SelectViewport",FF=w.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:n,...a}=e,i=Yo(k_,r),o=bN(k_,r),l=ut(t,i.onViewportChange),c=w.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),s.jsx(j0.Slot,{scope:r,children:s.jsx(We.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:Te(a.onScroll,u=>{const d=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:h}=o;if(h!=null&&h.current&&f){const m=Math.abs(c.current-d.scrollTop);if(m>0){const y=window.innerHeight-Ka*2,g=parseFloat(f.style.minHeight),p=parseFloat(f.style.height),v=Math.max(g,p);if(v<y){const x=v+m,b=Math.min(y,x),_=x-b;f.style.height=b+"px",f.style.bottom==="0px"&&(d.scrollTop=_>0?_:0,f.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});FF.displayName=k_;var zF="SelectGroup",[vCe,yCe]=rf(zF),xCe=w.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=Bi();return s.jsx(vCe,{scope:r,id:a,children:s.jsx(We.div,{role:"group","aria-labelledby":a,...n,ref:t})})});xCe.displayName=zF;var UF="SelectLabel",VF=w.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=yCe(UF,r);return s.jsx(We.div,{id:a.id,...n,ref:t})});VF.displayName=UF;var wy="SelectItem",[bCe,WF]=rf(wy),HF=w.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:a=!1,textValue:i,...o}=e,l=Ko(wy,r),c=Yo(wy,r),u=l.value===n,[d,f]=w.useState(i??""),[h,m]=w.useState(!1),y=ut(t,x=>{var b;return(b=c.itemRefCallback)==null?void 0:b.call(c,x,n,a)}),g=Bi(),p=w.useRef("touch"),v=()=>{a||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(bCe,{scope:r,value:n,disabled:a,textId:g,isSelected:u,onItemTextChange:w.useCallback(x=>{f(b=>b||((x==null?void 0:x.textContent)??"").trim())},[]),children:s.jsx(j0.ItemSlot,{scope:r,value:n,disabled:a,textValue:d,children:s.jsx(We.div,{role:"option","aria-labelledby":g,"data-highlighted":h?"":void 0,"aria-selected":u&&h,"data-state":u?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...o,ref:y,onFocus:Te(o.onFocus,()=>m(!0)),onBlur:Te(o.onBlur,()=>m(!1)),onClick:Te(o.onClick,()=>{p.current!=="mouse"&&v()}),onPointerUp:Te(o.onPointerUp,()=>{p.current==="mouse"&&v()}),onPointerDown:Te(o.onPointerDown,x=>{p.current=x.pointerType}),onPointerMove:Te(o.onPointerMove,x=>{var b;p.current=x.pointerType,a?(b=c.onItemLeave)==null||b.call(c):p.current==="mouse"&&x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Te(o.onPointerLeave,x=>{var b;x.currentTarget===document.activeElement&&((b=c.onItemLeave)==null||b.call(c))}),onKeyDown:Te(o.onKeyDown,x=>{var _;((_=c.searchRef)==null?void 0:_.current)!==""&&x.key===" "||(iCe.includes(x.key)&&v(),x.key===" "&&x.preventDefault())})})})})});HF.displayName=wy;var Ff="SelectItemText",qF=w.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:a,...i}=e,o=Ko(Ff,r),l=Yo(Ff,r),c=WF(Ff,r),u=cCe(Ff,r),[d,f]=w.useState(null),h=ut(t,v=>f(v),c.onItemTextChange,v=>{var x;return(x=l.itemTextRefCallback)==null?void 0:x.call(l,v,c.value,c.disabled)}),m=d==null?void 0:d.textContent,y=w.useMemo(()=>s.jsx("option",{value:c.value,disabled:c.disabled,children:m},c.value),[c.disabled,c.value,m]),{onNativeOptionAdd:g,onNativeOptionRemove:p}=u;return un(()=>(g(y),()=>p(y)),[g,p,y]),s.jsxs(s.Fragment,{children:[s.jsx(We.span,{id:c.textId,...i,ref:h}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?tc.createPortal(i.children,o.valueNode):null]})});qF.displayName=Ff;var KF="SelectItemIndicator",YF=w.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return WF(KF,r).isSelected?s.jsx(We.span,{"aria-hidden":!0,...n,ref:t}):null});YF.displayName=KF;var E_="SelectScrollUpButton",GF=w.forwardRef((e,t)=>{const r=Yo(E_,e.__scopeSelect),n=bN(E_,e.__scopeSelect),[a,i]=w.useState(!1),o=ut(t,n.onScrollButtonChange);return un(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollTop>0;i(u)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?s.jsx(QF,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});GF.displayName=E_;var A_="SelectScrollDownButton",XF=w.forwardRef((e,t)=>{const r=Yo(A_,e.__scopeSelect),n=bN(A_,e.__scopeSelect),[a,i]=w.useState(!1),o=ut(t,n.onScrollButtonChange);return un(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;i(d)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?s.jsx(QF,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});XF.displayName=A_;var QF=w.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:n,...a}=e,i=Yo("SelectScrollButton",r),o=w.useRef(null),l=_0(r),c=w.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return w.useEffect(()=>()=>c(),[c]),un(()=>{var d;const u=l().find(f=>f.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[l]),s.jsx(We.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:Te(a.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(n,50))}),onPointerMove:Te(a.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),o.current===null&&(o.current=window.setInterval(n,50))}),onPointerLeave:Te(a.onPointerLeave,()=>{c()})})}),wCe="SelectSeparator",JF=w.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return s.jsx(We.div,{"aria-hidden":!0,...n,ref:t})});JF.displayName=wCe;var O_="SelectArrow",jCe=w.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=S0(r),i=Ko(O_,r),o=Yo(O_,r);return i.open&&o.position==="popper"?s.jsx(tC,{...a,...n,ref:t}):null});jCe.displayName=O_;var _Ce="SelectBubbleInput",ZF=w.forwardRef(({__scopeSelect:e,value:t,...r},n)=>{const a=w.useRef(null),i=ut(n,a),o=xx(t);return w.useEffect(()=>{const l=a.current;if(!l)return;const c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==t&&d){const f=new Event("change",{bubbles:!0});d.call(l,t),l.dispatchEvent(f)}},[o,t]),s.jsx(We.select,{...r,style:{...sI,...r.style},ref:i,defaultValue:t})});ZF.displayName=_Ce;function e5(e){return e===""||e===void 0}function t5(e){const t=Zr(e),r=w.useRef(""),n=w.useRef(0),a=w.useCallback(o=>{const l=r.current+o;t(l),function c(u){r.current=u,window.clearTimeout(n.current),u!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),i=w.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return w.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,a,i]}function r5(e,t,r){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let o=SCe(e,Math.max(i,0));a.length===1&&(o=o.filter(u=>u!==r));const c=o.find(u=>u.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function SCe(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var CCe=EF,n5=OF,NCe=RF,PCe=MF,kCe=$F,a5=IF,ECe=FF,i5=VF,s5=HF,ACe=qF,OCe=YF,o5=GF,l5=XF,c5=JF;const st=CCe,ot=NCe,at=w.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(n5,{ref:n,className:ue("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,s.jsx(PCe,{asChild:!0,children:s.jsx(Ah,{className:"h-4 w-4 opacity-50"})})]}));at.displayName=n5.displayName;const u5=w.forwardRef(({className:e,...t},r)=>s.jsx(o5,{ref:r,className:ue("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(DW,{className:"h-4 w-4"})}));u5.displayName=o5.displayName;const d5=w.forwardRef(({className:e,...t},r)=>s.jsx(l5,{ref:r,className:ue("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(Ah,{className:"h-4 w-4"})}));d5.displayName=l5.displayName;const it=w.forwardRef(({className:e,children:t,position:r="popper",...n},a)=>s.jsx(kCe,{children:s.jsxs(a5,{ref:a,className:ue("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[s.jsx(u5,{}),s.jsx(ECe,{className:ue("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),s.jsx(d5,{})]})}));it.displayName=a5.displayName;const TCe=w.forwardRef(({className:e,...t},r)=>s.jsx(i5,{ref:r,className:ue("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));TCe.displayName=i5.displayName;const Le=w.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(s5,{ref:n,className:ue("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(OCe,{children:s.jsx(So,{className:"h-4 w-4"})})}),s.jsx(ACe,{children:t})]}));Le.displayName=s5.displayName;const RCe=w.forwardRef(({className:e,...t},r)=>s.jsx(c5,{ref:r,className:ue("-mx-1 my-1 h-px bg-muted",e),...t}));RCe.displayName=c5.displayName;function f5(){const{toast:e}=$S(),{user:t}=xa(),[r,n]=w.useState([]),[a,i]=w.useState([]),[o,l]=w.useState([]),[c,u]=w.useState([]),[d,f]=w.useState([]),[h,m]=w.useState([]),[y,g]=w.useState(!0),p=w.useCallback(async()=>{if(t)try{g(!0);const[O,M,D,L,B,z]=await Promise.all([xe.from("b2b_clients").select("*").order("company_name"),xe.from("b2b_client_projections").select("*"),xe.from("b2b_delivery_fee_tiers").select("*").order("min_pieces"),xe.from("b2b_payment_terms_options").select("*").order("label"),xe.from("b2b_delivery_methods").select("*").order("label"),xe.from("b2b_client_categories").select("*").order("sort_order")]);if(O.error)throw O.error;if(M.error)throw M.error;if(D.error)throw D.error;if(L.error)throw L.error;if(B.error)throw B.error;if(z.error)throw z.error;n(O.data),i(M.data),l(D.data),u(L.data),f(B.data),m(z.data)}catch(O){console.error("B2B fetch error:",O),e({title:"Erreur",description:"Impossible de charger les donnes B2B",variant:"destructive"})}finally{g(!1)}},[t,e]);w.useEffect(()=>{p()},[p]);const v=w.useCallback(async O=>{if(!t)return null;const M={...O,user_id:t.id};if(O.id){const{data:D,error:L}=await xe.from("b2b_clients").update(M).eq("id",O.id).select().single();return L?(e({title:"Erreur",description:L.message,variant:"destructive"}),null):(await p(),D)}else{const{data:D,error:L}=await xe.from("b2b_clients").insert(M).select().single();return L?(e({title:"Erreur",description:L.message,variant:"destructive"}),null):(await p(),D)}},[t,e,p]),x=w.useCallback(async O=>{const{error:M}=await xe.from("b2b_clients").delete().eq("id",O);if(M){e({title:"Erreur",description:M.message,variant:"destructive"});return}await p()},[e,p]),b=w.useCallback(async(O,M,D,L)=>{if(!t)return;const B=a.find(z=>z.client_id===O&&z.year===M);B?await xe.from("b2b_client_projections").update({projected_revenue:D,notes:L||null}).eq("id",B.id):await xe.from("b2b_client_projections").insert({client_id:O,year:M,projected_revenue:D,notes:L||null,user_id:t.id}),await p()},[t,a,p]),_=w.useCallback(async(O,M)=>{t&&(await xe.from("b2b_client_categories").insert({name:O,color:M||"#6366f1",user_id:t.id,sort_order:h.length}),await p())},[t,h.length,p]),j=w.useCallback(async O=>{await xe.from("b2b_client_categories").delete().eq("id",O),await p()},[p]),S=w.useCallback(async(O,M)=>{await xe.from("b2b_client_categories").update(M).eq("id",O),await p()},[p]),C=w.useCallback(async(O,M,D,L)=>{t&&(await xe.from("b2b_delivery_fee_tiers").insert({label:O,fee_amount:M,min_pieces:D,max_pieces:L,user_id:t.id}),await p())},[t,p]),P=w.useCallback(async O=>{await xe.from("b2b_delivery_fee_tiers").delete().eq("id",O),await p()},[p]),N=w.useCallback(async(O,M)=>{t&&(await xe.from("b2b_payment_terms_options").insert({label:O,description:M||null,user_id:t.id}),await p())},[t,p]),E=w.useCallback(async O=>{await xe.from("b2b_payment_terms_options").delete().eq("id",O),await p()},[p]),A=w.useCallback(async(O,M)=>{t&&(await xe.from("b2b_delivery_methods").insert({label:O,description:M||null,user_id:t.id}),await p())},[t,p]),T=w.useCallback(async O=>{await xe.from("b2b_delivery_methods").delete().eq("id",O),await p()},[p]),R=w.useCallback(async O=>{if(!t)return 0;const M=O.map(B=>({...B,user_id:t.id,company_name:B.company_name||"Sans nom"})),{data:D,error:L}=await xe.from("b2b_clients").insert(M).select();return L?(e({title:"Erreur import",description:L.message,variant:"destructive"}),0):(await p(),(D==null?void 0:D.length)||0)},[t,e,p]),k=w.useCallback(O=>a.filter(M=>M.client_id===O),[a]);return{clients:r,projections:a,deliveryFeeTiers:o,paymentTermsOptions:c,deliveryMethods:d,categories:h,isLoading:y,refreshData:p,upsertClient:v,deleteClient:x,bulkImportClients:R,upsertProjection:b,getClientProjections:k,addDeliveryFeeTier:C,deleteDeliveryFeeTier:P,addPaymentTerm:N,deletePaymentTerm:E,addDeliveryMethod:A,deleteDeliveryMethod:T,addCategory:_,deleteCategory:j,updateCategory:S}}function TT(e){return e&&e.toLowerCase().includes("oem")?"OEM":"B2B"}function MCe({config:e,onChange:t,years:r}){const{clients:n,categories:a,projections:i}=f5(),o=r[0],l={entries:((e==null?void 0:e.entries)??[]).map(N=>({...N,channel:N.channel??"B2B",individualGrowthRate:N.individualGrowthRate??null,revenueByYear:N.revenueByYear??{}})),growthRate:(e==null?void 0:e.growthRate)??.1,marginRate:(e==null?void 0:e.marginRate)??.5,marginB2C:(e==null?void 0:e.marginB2C)??.6,marginByCategory:(e==null?void 0:e.marginByCategory)??{}},c=N=>t({...l,...N}),u=(N,E)=>{c({entries:l.entries.map(A=>A.clientId===N?{...A,...E}:A)})},d=N=>{const E=n.find(k=>k.id===N);if(!E||l.entries.some(k=>k.clientId===N))return;const A=a.find(k=>k.id===E.category_id),T=TT(A==null?void 0:A.name),R=i==null?void 0:i.find(k=>k.client_id===N&&k.year===o-1);c({entries:[...l.entries,{clientId:E.id,clientName:E.company_name,categoryId:E.category_id,categoryName:(A==null?void 0:A.name)||null,channel:T,baseRevenue:(R==null?void 0:R.projected_revenue)??0,individualGrowthRate:null,revenueByYear:{}}]})},f=()=>{const N=`b2c_${Date.now()}`;c({entries:[...l.entries,{clientId:N,clientName:"Ventes B2C",categoryId:null,categoryName:null,channel:"B2C",baseRevenue:0,individualGrowthRate:null,revenueByYear:{}}]})},h=N=>{const E=l.entries.find(R=>R.clientId===N);if(!E||!E.baseRevenue)return;const A=E.individualGrowthRate??l.growthRate,T={};r.forEach((R,k)=>{T[R]=Math.round(E.baseRevenue*Math.pow(1+A,k))}),u(N,{revenueByYear:T})},m=(N,E)=>{var R;if(((R=N.revenueByYear)==null?void 0:R[E])!==void 0)return N.revenueByYear[E];const A=E-o,T=N.individualGrowthRate??l.growthRate;return N.baseRevenue*Math.pow(1+T,A)},y=N=>N.channel==="B2C"?l.marginB2C:N.categoryId&&l.marginByCategory[N.categoryId]!==void 0?l.marginByCategory[N.categoryId]:l.marginRate,g=r.map(N=>l.entries.reduce((E,A)=>E+m(A,N),0)),p=g.reduce((N,E)=>N+E,0),x=r.map(N=>l.entries.reduce((E,A)=>E+m(A,N)*y(A),0)).reduce((N,E)=>N+E,0),_=["B2B","OEM","B2C"].map(N=>({channel:N,entries:l.entries.filter(E=>E.channel===N)})).filter(N=>N.entries.length>0),j=n.filter(N=>N.is_active&&!l.entries.some(E=>E.clientId===N.id)),S=l.entries.some(N=>N.channel==="B2C"),P=[...new Set(l.entries.map(N=>N.categoryId).filter(Boolean))].map(N=>a.find(E=>E.id===N)).filter(Boolean);return s.jsxs("div",{className:"space-y-4",children:[s.jsxs(Ye,{title:"Paramtres globaux",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2 p-3 rounded-lg border bg-muted/20",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"font-medium",children:"Croissance globale"}),s.jsxs("span",{className:"font-mono text-primary",children:[(l.growthRate*100).toFixed(0),"%"]})]}),s.jsx(Ir,{value:[l.growthRate*100],onValueChange:([N])=>c({growthRate:N/100}),min:-20,max:100,step:1}),s.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Par dfaut si pas de taux individuel"})]}),s.jsxs("div",{className:"space-y-2 p-3 rounded-lg border bg-muted/20",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"font-medium",children:"Marge B2B/OEM"}),s.jsxs("span",{className:"font-mono text-primary",children:[(l.marginRate*100).toFixed(0),"%"]})]}),s.jsx(Ir,{value:[l.marginRate*100],onValueChange:([N])=>c({marginRate:N/100}),min:0,max:100,step:1}),s.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Marge par dfaut"})]}),s.jsxs("div",{className:"space-y-2 p-3 rounded-lg border bg-muted/20",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"font-medium",children:"Marge B2C"}),s.jsxs("span",{className:"font-mono text-primary",children:[(l.marginB2C*100).toFixed(0),"%"]})]}),s.jsx(Ir,{value:[l.marginB2C*100],onValueChange:([N])=>c({marginB2C:N/100}),min:0,max:100,step:1})]})]}),P.length>0&&s.jsxs("div",{className:"mt-4 pt-4 border-t",children:[s.jsx("p",{className:"text-sm font-medium mb-3",children:"Marge par catgorie"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:P.map(N=>{const E=l.marginByCategory[N.id]??l.marginRate;return s.jsxs("div",{className:"space-y-1 p-2 rounded border bg-muted/10",children:[s.jsxs("div",{className:"flex justify-between text-xs",children:[s.jsx("span",{children:N.name}),s.jsxs("span",{className:"font-mono text-primary",children:[(E*100).toFixed(0),"%"]})]}),s.jsx(Ir,{value:[E*100],onValueChange:([A])=>c({marginByCategory:{...l.marginByCategory,[N.id]:A/100}}),min:0,max:100,step:1})]},N.id)})})]})]}),s.jsxs(Ye,{title:"CA par Client",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-4",children:[s.jsxs(st,{onValueChange:d,children:[s.jsx(at,{className:"w-60",children:s.jsx(ot,{placeholder:"Ajouter client CRM..."})}),s.jsx(it,{children:j.map(N=>{const E=a.find(A=>A.id===N.category_id);return s.jsxs(Le,{value:N.id,children:[N.company_name," ",s.jsxs("span",{className:"text-muted-foreground text-xs ml-1",children:["(",TT(E==null?void 0:E.name),")"]})]},N.id)})})]}),!S&&s.jsxs(ae,{size:"sm",variant:"outline",onClick:f,children:[s.jsx(ar,{className:"h-3 w-3 mr-1"})," Canal B2C"]}),s.jsxs(Oe,{variant:"secondary",className:"text-xs",children:[l.entries.length," entre(s)"]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Ht,{children:[s.jsx(qt,{children:s.jsxs(_e,{children:[s.jsx(ie,{className:"text-xs min-w-[120px]",children:"Client"}),s.jsx(ie,{className:"text-xs w-12",children:"Canal"}),s.jsx(ie,{className:"text-xs text-right w-14",children:"Marge"}),s.jsx(ie,{className:"text-xs text-right w-16",children:"% Croiss."}),s.jsx(ie,{className:"text-xs text-center w-10"}),s.jsx(ie,{className:"text-xs text-right w-20",children:"CA N-1"}),r.map(N=>s.jsx(ie,{className:"text-xs text-right min-w-[85px]",children:N},N)),s.jsx(ie,{className:"text-xs text-right min-w-[85px]",children:"Total"}),s.jsx(ie,{className:"text-xs text-right min-w-[70px]",children:"Marge "}),s.jsx(ie,{className:"text-xs w-10"})]})}),s.jsxs(Kt,{children:[l.entries.length===0&&s.jsx(_e,{children:s.jsxs(W,{colSpan:r.length+9,className:"text-center text-muted-foreground py-6",children:[s.jsx(zl,{className:"h-8 w-8 mx-auto mb-2 opacity-30"}),s.jsx("p",{className:"text-sm",children:"Ajoutez des clients CRM ou un canal B2C"})]})}),_.map(N=>s.jsxs(s.Fragment,{children:[s.jsx(_e,{className:"bg-muted/30",children:s.jsxs(W,{colSpan:r.length+9,className:"py-1",children:[s.jsx(Oe,{variant:N.channel==="B2C"?"default":"outline",className:"text-[10px]",children:N.channel}),s.jsx("span",{className:"text-xs text-muted-foreground ml-2",children:te(r.reduce((E,A)=>E+N.entries.reduce((T,R)=>T+m(R,A),0),0),!0)})]})},`h-${N.channel}`),N.entries.map(E=>{const A=r.reduce((O,M)=>O+m(E,M),0),T=y(E),R=A*T,k=E.individualGrowthRate!==null&&E.individualGrowthRate!==void 0;return s.jsxs(_e,{children:[s.jsx(W,{className:"font-medium text-xs",children:E.clientName}),s.jsx(W,{children:s.jsx(Oe,{variant:"outline",className:"text-[10px]",children:E.channel})}),s.jsxs(W,{className:"text-right font-mono text-[10px] text-muted-foreground",children:[(T*100).toFixed(0),"%"]}),s.jsx(W,{className:"text-right",children:s.jsx(be,{type:"number",value:k?(E.individualGrowthRate*100).toFixed(0):"",onChange:O=>u(E.clientId,{individualGrowthRate:O.target.value===""?null:Number(O.target.value)/100}),className:"h-7 w-14 text-right text-[10px] ml-auto",placeholder:`${(l.growthRate*100).toFixed(0)}`})}),s.jsx(W,{className:"text-center",children:s.jsx(ae,{size:"sm",variant:"ghost",onClick:()=>h(E.clientId),title:"Appliquer la croissance",className:"h-6 w-6 p-0",children:s.jsx(Oh,{className:"h-3 w-3"})})}),s.jsx(W,{className:"text-right",children:s.jsx(be,{type:"number",value:E.baseRevenue||"",onChange:O=>u(E.clientId,{baseRevenue:Number(O.target.value)||0}),className:"h-7 w-20 text-right text-[10px] ml-auto",placeholder:"0"})}),r.map(O=>{var L;const M=((L=E.revenueByYear)==null?void 0:L[O])!==void 0,D=m(E,O);return s.jsx(W,{className:"text-right p-1",children:s.jsx(be,{type:"number",value:M?E.revenueByYear[O]:"",onChange:B=>{const z=B.target.value,Z={...E.revenueByYear};z===""?delete Z[O]:Z[O]=Number(z),u(E.clientId,{revenueByYear:Z})},className:`h-7 w-20 text-right text-[10px] ml-auto ${M?"border-primary/50":""}`,placeholder:te(D,!0)})},O)}),s.jsx(W,{className:"text-right font-mono text-xs font-medium",children:te(A,!0)}),s.jsx(W,{className:"text-right font-mono text-xs text-muted-foreground",children:te(R,!0)}),s.jsx(W,{children:s.jsx(ae,{size:"sm",variant:"ghost",onClick:()=>c({entries:l.entries.filter(O=>O.clientId!==E.clientId)}),children:s.jsx(hr,{className:"h-3 w-3 text-destructive"})})})]},E.clientId)})]})),l.entries.length>0&&s.jsx(s.Fragment,{children:s.jsxs(_e,{className:"font-semibold border-t-2",children:[s.jsx(W,{colSpan:6,children:"Total CA"}),r.map((N,E)=>s.jsx(W,{className:"text-right font-mono text-xs",children:te(g[E],!0)},N)),s.jsx(W,{className:"text-right font-mono text-xs",children:te(p,!0)}),s.jsx(W,{className:"text-right font-mono text-xs",children:te(x,!0)}),s.jsx(W,{})]})})]})]})})]})]})}function nf({pageTitle:e,fileName:t}){const r=()=>{window.print()};return s.jsxs(ae,{variant:"outline",size:"sm",onClick:r,children:[s.jsx(Ym,{className:"h-4 w-4 mr-1"}),"PDF"]})}const $Ce=w.createContext(!1);function Qi({children:e,tabKey:t}){const{getTabPermission:r}=xa(),a=r(t)==="read";return s.jsx($Ce.Provider,{value:a,children:s.jsxs("div",{className:a?"read-only-mode":"",children:[a&&s.jsx("div",{className:"mb-4 p-3 bg-muted border border-border rounded-md text-sm text-muted-foreground text-center font-medium",children:" Mode lecture seule  Vous pouvez consulter les donnes mais pas les modifier"}),e]})})}var uw="rovingFocusGroup.onEntryFocus",ICe={bubbles:!1,cancelable:!0},op="RovingFocusGroup",[T_,h5,DCe]=rx(op),[LCe,C0]=Un(op,[DCe]),[BCe,FCe]=LCe(op),m5=w.forwardRef((e,t)=>s.jsx(T_.Provider,{scope:e.__scopeRovingFocusGroup,children:s.jsx(T_.Slot,{scope:e.__scopeRovingFocusGroup,children:s.jsx(zCe,{...e,ref:t})})}));m5.displayName=op;var zCe=w.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:a=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...f}=e,h=w.useRef(null),m=ut(t,h),y=Dd(i),[g,p]=Jn({prop:o,defaultProp:l??null,onChange:c,caller:op}),[v,x]=w.useState(!1),b=Zr(u),_=h5(r),j=w.useRef(!1),[S,C]=w.useState(0);return w.useEffect(()=>{const P=h.current;if(P)return P.addEventListener(uw,b),()=>P.removeEventListener(uw,b)},[b]),s.jsx(BCe,{scope:r,orientation:n,dir:y,loop:a,currentTabStopId:g,onItemFocus:w.useCallback(P=>p(P),[p]),onItemShiftTab:w.useCallback(()=>x(!0),[]),onFocusableItemAdd:w.useCallback(()=>C(P=>P+1),[]),onFocusableItemRemove:w.useCallback(()=>C(P=>P-1),[]),children:s.jsx(We.div,{tabIndex:v||S===0?-1:0,"data-orientation":n,...f,ref:m,style:{outline:"none",...e.style},onMouseDown:Te(e.onMouseDown,()=>{j.current=!0}),onFocus:Te(e.onFocus,P=>{const N=!j.current;if(P.target===P.currentTarget&&N&&!v){const E=new CustomEvent(uw,ICe);if(P.currentTarget.dispatchEvent(E),!E.defaultPrevented){const A=_().filter(M=>M.focusable),T=A.find(M=>M.active),R=A.find(M=>M.id===g),O=[T,R,...A].filter(Boolean).map(M=>M.ref.current);v5(O,d)}}j.current=!1}),onBlur:Te(e.onBlur,()=>x(!1))})})}),p5="RovingFocusGroupItem",g5=w.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:a=!1,tabStopId:i,children:o,...l}=e,c=Bi(),u=i||c,d=FCe(p5,r),f=d.currentTabStopId===u,h=h5(r),{onFocusableItemAdd:m,onFocusableItemRemove:y,currentTabStopId:g}=d;return w.useEffect(()=>{if(n)return m(),()=>y()},[n,m,y]),s.jsx(T_.ItemSlot,{scope:r,id:u,focusable:n,active:a,children:s.jsx(We.span,{tabIndex:f?0:-1,"data-orientation":d.orientation,...l,ref:t,onMouseDown:Te(e.onMouseDown,p=>{n?d.onItemFocus(u):p.preventDefault()}),onFocus:Te(e.onFocus,()=>d.onItemFocus(u)),onKeyDown:Te(e.onKeyDown,p=>{if(p.key==="Tab"&&p.shiftKey){d.onItemShiftTab();return}if(p.target!==p.currentTarget)return;const v=WCe(p,d.orientation,d.dir);if(v!==void 0){if(p.metaKey||p.ctrlKey||p.altKey||p.shiftKey)return;p.preventDefault();let b=h().filter(_=>_.focusable).map(_=>_.ref.current);if(v==="last")b.reverse();else if(v==="prev"||v==="next"){v==="prev"&&b.reverse();const _=b.indexOf(p.currentTarget);b=d.loop?HCe(b,_+1):b.slice(_+1)}setTimeout(()=>v5(b))}}),children:typeof o=="function"?o({isCurrentTabStop:f,hasTabStop:g!=null}):o})})});g5.displayName=p5;var UCe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function VCe(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function WCe(e,t,r){const n=VCe(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return UCe[n]}function v5(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function HCe(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var y5=m5,x5=g5,N0="Tabs",[qCe,u2e]=Un(N0,[C0]),b5=C0(),[KCe,wN]=qCe(N0),w5=w.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:a,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=e,d=Dd(l),[f,h]=Jn({prop:n,onChange:a,defaultProp:i??"",caller:N0});return s.jsx(KCe,{scope:r,baseId:Bi(),value:f,onValueChange:h,orientation:o,dir:d,activationMode:c,children:s.jsx(We.div,{dir:d,"data-orientation":o,...u,ref:t})})});w5.displayName=N0;var j5="TabsList",_5=w.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...a}=e,i=wN(j5,r),o=b5(r);return s.jsx(y5,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:n,children:s.jsx(We.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});_5.displayName=j5;var S5="TabsTrigger",C5=w.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:a=!1,...i}=e,o=wN(S5,r),l=b5(r),c=k5(o.baseId,n),u=E5(o.baseId,n),d=n===o.value;return s.jsx(x5,{asChild:!0,...l,focusable:!a,active:d,children:s.jsx(We.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...i,ref:t,onMouseDown:Te(e.onMouseDown,f=>{!a&&f.button===0&&f.ctrlKey===!1?o.onValueChange(n):f.preventDefault()}),onKeyDown:Te(e.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(n)}),onFocus:Te(e.onFocus,()=>{const f=o.activationMode!=="manual";!d&&!a&&f&&o.onValueChange(n)})})})});C5.displayName=S5;var N5="TabsContent",P5=w.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:a,children:i,...o}=e,l=wN(N5,r),c=k5(l.baseId,n),u=E5(l.baseId,n),d=n===l.value,f=w.useRef(d);return w.useEffect(()=>{const h=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(h)},[]),s.jsx(Zn,{present:a||d,children:({present:h})=>s.jsx(We.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!h,id:u,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0},children:h&&i})})});P5.displayName=N5;function k5(e,t){return`${e}-trigger-${t}`}function E5(e,t){return`${e}-content-${t}`}var YCe=w5,A5=_5,O5=C5,T5=P5;const xi=YCe,Fa=w.forwardRef(({className:e,...t},r)=>s.jsx(A5,{ref:r,className:ue("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));Fa.displayName=A5.displayName;const At=w.forwardRef(({className:e,...t},r)=>s.jsx(O5,{ref:r,className:ue("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",e),...t}));At.displayName=O5.displayName;const Ft=w.forwardRef(({className:e,...t},r)=>s.jsx(T5,{ref:r,className:ue("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Ft.displayName=T5.displayName;const GCe=[{id:"kpis",label:"KPIs Produits",elementId:"product-kpis"},{id:"revenue-viz",label:"Visualisation CA",elementId:"product-revenue-viz"},{id:"revenue-chart",label:"Projection CA",elementId:"product-revenue-chart"},{id:"pricing",label:"Pricing Produits",elementId:"product-pricing"},{id:"volumes",label:"Volumes par Anne",elementId:"product-volumes"}];function XCe(){var b;const{state:e,computed:t,updateProducts:r,addProduct:n,removeProduct:a,saveAll:i,setRevenueMode:o,updateGlobalRevenueConfig:l,updateClientRevenueConfig:c}=Ki(),u=e.scenarioSettings,d=Array.from({length:u.durationYears},(_,j)=>u.startYear+j),f=_=>{n(_)},h=_=>{const j=e.products.map(S=>S.id===_.id?_:S);r(j)},m=(_,j,S,C)=>{const P=e.products.map(N=>{if(N.id!==_)return N;const E=N.volumesByChannel||{B2C:{},B2B:{},OEM:{}},A={...E,[S]:{...E[S],[j]:C}},T=(A.B2C[j]||0)+(A.B2B[j]||0)+(A.OEM[j]||0);return{...N,volumesByChannel:A,volumesByYear:{...N.volumesByYear,[j]:T}}});r(P)},y=t.totalDevCost,g=d[d.length-1],p=((b=t.revenueByYear.find(_=>_.year===g))==null?void 0:b.revenue)||0,v=t.revenueByYear.length>0?t.revenueByYear.reduce((_,j)=>_+(j.revenue>0?(j.revenue-j.cogs)/j.revenue:0),0)/t.revenueByYear.length:0,x=d.map(_=>{const j=t.revenueByYear.find(S=>S.year===_);return{year:_,revenue:((j==null?void 0:j.revenue)||0)/1e3,cogs:((j==null?void 0:j.cogs)||0)/1e3,margin:(((j==null?void 0:j.revenue)||0)-((j==null?void 0:j.cogs)||0))/1e3}});return s.jsx(Qi,{tabKey:"product-plan",children:s.jsxs("div",{className:"space-y-6",children:[s.jsx(Rs,{image:"ccd-evo",title:"Plan Produit",subtitle:"Source unique du chiffre d'affaires et des investissements R&D",height:"sm"}),s.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 p-4 bg-muted/30 rounded-lg border",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("span",{className:"text-sm font-medium",children:"Mode de calcul du CA :"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(ae,{variant:e.revenueMode==="by-product"?"default":"outline",size:"sm",onClick:()=>o("by-product"),children:[s.jsx($I,{className:"h-4 w-4 mr-1"}),"Par Produit"]}),s.jsxs(ae,{variant:e.revenueMode==="by-channel-global"?"default":"outline",size:"sm",onClick:()=>o("by-channel-global"),children:[s.jsx(rv,{className:"h-4 w-4 mr-1"}),"CA Global par Canal"]}),s.jsxs(ae,{variant:e.revenueMode==="by-client"?"default":"outline",size:"sm",onClick:()=>o("by-client"),children:[s.jsx(zl,{className:"h-4 w-4 mr-1"}),"Par Client"]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Oe,{variant:e.revenueMode==="by-product"?"default":e.revenueMode==="by-channel-global"?"secondary":"outline",children:e.revenueMode==="by-product"?"Dtail produits":e.revenueMode==="by-channel-global"?"Global canaux":"Par client"}),s.jsx(nf,{pageTitle:"Plan Produit",sections:GCe,fileName:"Plan_Produit"}),s.jsx(zd,{onSave:i,hasUnsavedChanges:e.hasUnsavedChanges,lastSaved:e.lastSaved?new Date(e.lastSaved):null})]})]}),s.jsxs("div",{id:"product-kpis",className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsx(yt,{label:"Investissement R&D",value:te(y,!0),subValue:`${e.products.filter(_=>_.devCost>0).length} produits`}),s.jsx(yt,{label:`CA ${g}`,value:te(p,!0),subValue:"Projection",trend:"up"}),s.jsx(yt,{label:"Marge Brute Moy.",value:tn(v),subValue:"Sur la priode"}),s.jsx(yt,{label:"Produits Actifs",value:e.products.length.toString(),subValue:"En portefeuille"})]}),s.jsx("div",{id:"product-revenue-chart",children:s.jsx(Ye,{title:"Projection du Chiffre d'Affaires",children:s.jsx("div",{className:"h-64",children:s.jsx(Wr,{width:"100%",height:"100%",children:s.jsxs(Ps,{data:x,children:[s.jsx(qr,{strokeDasharray:"3 3"}),s.jsx(mr,{dataKey:"year"}),s.jsx(nr,{tickFormatter:_=>`${_}k`}),s.jsx($t,{formatter:_=>`${_.toFixed(0)}k`}),s.jsx(Vr,{}),s.jsx(rr,{dataKey:"revenue",name:"CA",fill:"hsl(var(--primary))"}),s.jsx(rr,{dataKey:"margin",name:"Marge",fill:"hsl(150, 60%, 40%)"})]})})})})}),s.jsxs(xi,{defaultValue:"visualization",className:"space-y-4",children:[s.jsxs(Fa,{children:[s.jsxs(At,{value:"visualization",children:[s.jsx($W,{className:"h-4 w-4 mr-1"}),"Visualisation CA"]}),s.jsxs(At,{value:"pricing",children:[s.jsx(ev,{className:"h-4 w-4 mr-1"}),"Pricing Produits"]}),s.jsxs(At,{value:"volumes",children:[s.jsx(Fl,{className:"h-4 w-4 mr-1"}),"Volumes par Anne"]})]}),e.revenueMode==="by-channel-global"&&s.jsx(Ft,{value:"visualization",children:s.jsx(mY,{config:e.globalRevenueConfig,onChange:l,years:d})}),e.revenueMode==="by-client"&&s.jsx(Ft,{value:"visualization",children:s.jsx(MCe,{config:e.clientRevenueConfig,onChange:c,years:d})}),e.revenueMode==="by-product"&&s.jsx(Ft,{value:"visualization",children:s.jsx("div",{id:"product-revenue-viz",children:s.jsx(uSe,{products:e.products,years:d})})}),s.jsx(Ft,{value:"pricing",children:e.revenueMode==="by-product"?s.jsx("div",{id:"product-pricing",children:s.jsx(rQ,{products:e.products,onUpdateProduct:h,onAddProduct:f,onRemoveProduct:a})}):s.jsx(Ye,{title:"Pricing Produits",children:s.jsxs("div",{className:"p-8 text-center text-muted-foreground",children:[s.jsx(rv,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{className:"text-lg font-medium mb-2",children:"Mode CA Global actif"}),s.jsxs("p",{className:"text-sm",children:[`Le pricing par produit n'est pas disponible en mode "CA Global par Canal".`,s.jsx("br",{}),'Passez en mode "Par Produit" pour grer les prix individuellement.']})]})})}),s.jsx(Ft,{value:"volumes",children:s.jsx("div",{id:"product-volumes",children:s.jsx(dSe,{products:e.products,years:d,onChannelVolumeChange:m})})})]})]})})}const QCe=["R&D","Production","Sales","Support","Admin"];function JCe({roles:e,onEdit:t,onRemove:r,onAddToTeam:n}){return s.jsx("div",{className:"grid md:grid-cols-3 lg:grid-cols-5 gap-4",children:QCe.map(a=>{const i=e.filter(o=>o.department===a);return s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx(Oe,{variant:"outline",children:a}),s.jsx(ae,{size:"sm",variant:"ghost",onClick:()=>n(a),children:s.jsx(ar,{className:"h-3 w-3"})})]}),s.jsx("div",{className:"space-y-2",children:i.map(o=>s.jsx(Bt,{className:"bg-muted/30",children:s.jsxs(Wt,{className:"p-3",children:[s.jsx("div",{className:"text-sm font-medium",children:o.title}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:[o.startYear,"  ",(o.annualCostLoaded/1e3).toFixed(0),"k"]}),s.jsxs("div",{className:"flex gap-1 mt-2",children:[s.jsx(ae,{size:"sm",variant:"ghost",className:"h-6 px-2",onClick:()=>t(o),children:s.jsx(ix,{className:"h-3 w-3"})}),s.jsx(ae,{size:"sm",variant:"ghost",className:"h-6 px-2 text-destructive",onClick:()=>r(o.id),children:s.jsx(hr,{className:"h-3 w-3"})})]})]})},o.id))})]},a)})})}var R5="Toggle",jN=w.forwardRef((e,t)=>{const{pressed:r,defaultPressed:n,onPressedChange:a,...i}=e,[o,l]=Jn({prop:r,onChange:a,defaultProp:n??!1,caller:R5});return s.jsx(We.button,{type:"button","aria-pressed":o,"data-state":o?"on":"off","data-disabled":e.disabled?"":void 0,...i,ref:t,onClick:Te(e.onClick,()=>{e.disabled||l(!o)})})});jN.displayName=R5;var M5=jN,Go="ToggleGroup",[$5,d2e]=Un(Go,[C0]),I5=C0(),_N=$.forwardRef((e,t)=>{const{type:r,...n}=e;if(r==="single"){const a=n;return s.jsx(ZCe,{...a,ref:t})}if(r==="multiple"){const a=n;return s.jsx(eNe,{...a,ref:t})}throw new Error(`Missing prop \`type\` expected on \`${Go}\``)});_N.displayName=Go;var[D5,L5]=$5(Go),ZCe=$.forwardRef((e,t)=>{const{value:r,defaultValue:n,onValueChange:a=()=>{},...i}=e,[o,l]=Jn({prop:r,defaultProp:n??"",onChange:a,caller:Go});return s.jsx(D5,{scope:e.__scopeToggleGroup,type:"single",value:$.useMemo(()=>o?[o]:[],[o]),onItemActivate:l,onItemDeactivate:$.useCallback(()=>l(""),[l]),children:s.jsx(B5,{...i,ref:t})})}),eNe=$.forwardRef((e,t)=>{const{value:r,defaultValue:n,onValueChange:a=()=>{},...i}=e,[o,l]=Jn({prop:r,defaultProp:n??[],onChange:a,caller:Go}),c=$.useCallback(d=>l((f=[])=>[...f,d]),[l]),u=$.useCallback(d=>l((f=[])=>f.filter(h=>h!==d)),[l]);return s.jsx(D5,{scope:e.__scopeToggleGroup,type:"multiple",value:o,onItemActivate:c,onItemDeactivate:u,children:s.jsx(B5,{...i,ref:t})})});_N.displayName=Go;var[tNe,rNe]=$5(Go),B5=$.forwardRef((e,t)=>{const{__scopeToggleGroup:r,disabled:n=!1,rovingFocus:a=!0,orientation:i,dir:o,loop:l=!0,...c}=e,u=I5(r),d=Dd(o),f={role:"group",dir:d,...c};return s.jsx(tNe,{scope:r,rovingFocus:a,disabled:n,children:a?s.jsx(y5,{asChild:!0,...u,orientation:i,dir:d,loop:l,children:s.jsx(We.div,{...f,ref:t})}):s.jsx(We.div,{...f,ref:t})})}),jy="ToggleGroupItem",F5=$.forwardRef((e,t)=>{const r=L5(jy,e.__scopeToggleGroup),n=rNe(jy,e.__scopeToggleGroup),a=I5(e.__scopeToggleGroup),i=r.value.includes(e.value),o=n.disabled||e.disabled,l={...e,pressed:i,disabled:o},c=$.useRef(null);return n.rovingFocus?s.jsx(x5,{asChild:!0,...a,focusable:!o,active:i,ref:c,children:s.jsx(RT,{...l,ref:t})}):s.jsx(RT,{...l,ref:t})});F5.displayName=jy;var RT=$.forwardRef((e,t)=>{const{__scopeToggleGroup:r,value:n,...a}=e,i=L5(jy,r),o={role:"radio","aria-checked":e.pressed,"aria-pressed":void 0},l=i.type==="single"?o:void 0;return s.jsx(jN,{...l,...a,ref:t,onPressedChange:c=>{c?i.onItemActivate(n):i.onItemDeactivate(n)}})}),z5=_N,U5=F5;const V5=kd("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground"},size:{default:"h-10 px-3",sm:"h-9 px-2.5",lg:"h-11 px-5"}},defaultVariants:{variant:"default",size:"default"}}),nNe=w.forwardRef(({className:e,variant:t,size:r,...n},a)=>s.jsx(M5,{ref:a,className:ue(V5({variant:t,size:r,className:e})),...n}));nNe.displayName=M5.displayName;const W5=w.createContext({size:"default",variant:"default"}),P0=w.forwardRef(({className:e,variant:t,size:r,children:n,...a},i)=>s.jsx(z5,{ref:i,className:ue("flex items-center justify-center gap-1",e),...a,children:s.jsx(W5.Provider,{value:{variant:t,size:r},children:n})}));P0.displayName=z5.displayName;const Xl=w.forwardRef(({className:e,children:t,variant:r,size:n,...a},i)=>{const o=w.useContext(W5);return s.jsx(U5,{ref:i,className:ue(V5({variant:o.variant||r,size:o.size||n}),e),...a,children:t})});Xl.displayName=U5.displayName;var k0="Dialog",[H5,q5]=Un(k0),[aNe,bi]=H5(k0),K5=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:a,onOpenChange:i,modal:o=!0}=e,l=w.useRef(null),c=w.useRef(null),[u,d]=Jn({prop:n,defaultProp:a??!1,onChange:i,caller:k0});return s.jsx(aNe,{scope:t,triggerRef:l,contentRef:c,contentId:Bi(),titleId:Bi(),descriptionId:Bi(),open:u,onOpenChange:d,onOpenToggle:w.useCallback(()=>d(f=>!f),[d]),modal:o,children:r})};K5.displayName=k0;var Y5="DialogTrigger",G5=w.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=bi(Y5,r),i=ut(t,a.triggerRef);return s.jsx(We.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":NN(a.open),...n,ref:i,onClick:Te(e.onClick,a.onOpenToggle)})});G5.displayName=Y5;var SN="DialogPortal",[iNe,X5]=H5(SN,{forceMount:void 0}),Q5=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:a}=e,i=bi(SN,t);return s.jsx(iNe,{scope:t,forceMount:r,children:w.Children.map(n,o=>s.jsx(Zn,{present:r||i.open,children:s.jsx(qm,{asChild:!0,container:a,children:o})}))})};Q5.displayName=SN;var _y="DialogOverlay",J5=w.forwardRef((e,t)=>{const r=X5(_y,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,i=bi(_y,e.__scopeDialog);return i.modal?s.jsx(Zn,{present:n||i.open,children:s.jsx(oNe,{...a,ref:t})}):null});J5.displayName=_y;var sNe=Bl("DialogOverlay.RemoveScroll"),oNe=w.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=bi(_y,r);return s.jsx(w0,{as:sNe,allowPinchZoom:!0,shards:[a.contentRef],children:s.jsx(We.div,{"data-state":NN(a.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),Ql="DialogContent",Z5=w.forwardRef((e,t)=>{const r=X5(Ql,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,i=bi(Ql,e.__scopeDialog);return s.jsx(Zn,{present:n||i.open,children:i.modal?s.jsx(lNe,{...a,ref:t}):s.jsx(cNe,{...a,ref:t})})});Z5.displayName=Ql;var lNe=w.forwardRef((e,t)=>{const r=bi(Ql,e.__scopeDialog),n=w.useRef(null),a=ut(t,r.contentRef,n);return w.useEffect(()=>{const i=n.current;if(i)return xN(i)},[]),s.jsx(ez,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Te(e.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=r.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Te(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:Te(e.onFocusOutside,i=>i.preventDefault())})}),cNe=w.forwardRef((e,t)=>{const r=bi(Ql,e.__scopeDialog),n=w.useRef(!1),a=w.useRef(!1);return s.jsx(ez,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((u=r.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),ez=w.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,...o}=e,l=bi(Ql,r),c=w.useRef(null),u=ut(t,c);return yN(),s.jsxs(s.Fragment,{children:[s.jsx(x0,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:s.jsx(Pd,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":NN(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),s.jsxs(s.Fragment,{children:[s.jsx(dNe,{titleId:l.titleId}),s.jsx(hNe,{contentRef:c,descriptionId:l.descriptionId})]})]})}),CN="DialogTitle",tz=w.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=bi(CN,r);return s.jsx(We.h2,{id:a.titleId,...n,ref:t})});tz.displayName=CN;var rz="DialogDescription",nz=w.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=bi(rz,r);return s.jsx(We.p,{id:a.descriptionId,...n,ref:t})});nz.displayName=rz;var az="DialogClose",iz=w.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=bi(az,r);return s.jsx(We.button,{type:"button",...n,ref:t,onClick:Te(e.onClick,()=>a.onOpenChange(!1))})});iz.displayName=az;function NN(e){return e?"open":"closed"}var sz="DialogTitleWarning",[uNe,oz]=F6(sz,{contentName:Ql,titleName:CN,docsSlug:"dialog"}),dNe=({titleId:e})=>{const t=oz(sz),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return w.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},fNe="DialogDescriptionWarning",hNe=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${oz(fNe).contentName}}.`;return w.useEffect(()=>{var i;const a=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},lz=K5,cz=G5,uz=Q5,PN=J5,kN=Z5,EN=tz,AN=nz,ON=iz;const Cr=lz,pd=cz,mNe=uz,dz=w.forwardRef(({className:e,...t},r)=>s.jsx(PN,{ref:r,className:ue("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));dz.displayName=PN.displayName;const vr=w.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(mNe,{children:[s.jsx(dz,{}),s.jsxs(kN,{ref:n,className:ue("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,s.jsxs(ON,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[s.jsx($a,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));vr.displayName=kN.displayName;const yr=({className:e,...t})=>s.jsx("div",{className:ue("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});yr.displayName="DialogHeader";const gd=({className:e,...t})=>s.jsx("div",{className:ue("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});gd.displayName="DialogFooter";const xr=w.forwardRef(({className:e,...t},r)=>s.jsx(EN,{ref:r,className:ue("text-lg font-semibold leading-none tracking-tight",e),...t}));xr.displayName=EN.displayName;const pNe=w.forwardRef(({className:e,...t},r)=>s.jsx(AN,{ref:r,className:ue("text-sm text-muted-foreground",e),...t}));pNe.displayName=AN.displayName;const gNe=["R&D","Production","Sales","Support","Admin"],vNe=[2025,2026,2027,2028,2029,2030],yNe=[{id:"kpis",label:"KPIs RH",elementId:"org-kpis"},{id:"payroll-chart",label:"volution Masse Salariale",elementId:"org-payroll-chart"},{id:"hiring-plan",label:"Plan de Recrutement",elementId:"org-hiring-plan"},{id:"team",label:"quipe / Organigramme",elementId:"org-team"}];function xNe(){var _;const{state:e,computed:t,updateRoles:r,addRole:n,removeRole:a,saveAll:i}=Ki(),[o,l]=w.useState("orgchart"),[c,u]=w.useState(null),[d,f]=w.useState(!1),[h,m]=w.useState({}),y=j=>{const S={id:`role-${Date.now()}`,title:"Nouveau Poste",department:j||"R&D",startYear:2026,annualCostLoaded:5e4};m(S),u(null),f(!0)},g=j=>{u(j),m(j),f(!0)},p=()=>{if(h.title&&h.department){if(c){const j=e.roles.map(S=>S.id===c.id?{...S,...h}:S);r(j)}else n(h);f(!1),m({}),u(null)}},v=t.payrollByYear.map(j=>({year:j.year,payroll:j.payroll/1e3,headcount:j.headcount})),x=e.roles.filter(j=>j.startYear>2025),b=vNe.slice(1).map(j=>({year:j,count:e.roles.filter(S=>S.startYear===j).length,cost:e.roles.filter(S=>S.startYear===j).reduce((S,C)=>S+C.annualCostLoaded,0)})).filter(j=>j.count>0);return s.jsx(Qi,{tabKey:"organisation",children:s.jsxs("div",{className:"space-y-6",children:[s.jsx(Rs,{image:"rd",title:"Organisation & Masse Salariale",subtitle:"Structure de l'quipe et projection des cots RH",height:"sm"}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(Oe,{variant:"outline",className:"text-xs",children:[t.totalHeadcount," collaborateurs"]}),s.jsxs(P0,{type:"single",value:o,onValueChange:j=>j&&l(j),children:[s.jsx(Xl,{value:"orgchart","aria-label":"Vue organigramme",children:s.jsx(zW,{className:"h-4 w-4"})}),s.jsx(Xl,{value:"table","aria-label":"Vue tableau",children:s.jsx(HW,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(nf,{pageTitle:"Organisation & RH",sections:yNe,fileName:"Organisation_RH"}),s.jsxs(ae,{variant:"outline",size:"sm",onClick:()=>y(),children:[s.jsx(ar,{className:"h-4 w-4 mr-1"}),"Ajouter Poste"]}),s.jsx(zd,{onSave:i,hasUnsavedChanges:e.hasUnsavedChanges,lastSaved:e.lastSaved?new Date(e.lastSaved):null})]})]}),s.jsxs("div",{id:"org-kpis",className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsx(yt,{label:"Masse Salariale 2025",value:te(t.currentPayroll,!0),subValue:`${t.totalHeadcount} personnes`}),s.jsx(yt,{label:"Recrutements Prvus",value:x.length.toString(),subValue:"2026-2030"}),s.jsx(yt,{label:"Cot Moyen / ETP",value:te(t.currentPayroll/(t.totalHeadcount||1),!0),subValue:"Charg"}),s.jsx(yt,{label:"Masse Salariale 2030",value:te(((_=t.payrollByYear.find(j=>j.year===2030))==null?void 0:_.payroll)||0,!0),subValue:"Projection",trend:"up"})]}),s.jsx("div",{id:"org-payroll-chart",children:s.jsx(Ye,{title:"volution de la Masse Salariale",children:s.jsx("div",{className:"h-64",children:s.jsx(Wr,{width:"100%",height:"100%",children:s.jsxs(bF,{data:v,children:[s.jsx(qr,{strokeDasharray:"3 3"}),s.jsx(mr,{dataKey:"year"}),s.jsx(nr,{tickFormatter:j=>`${j}k`}),s.jsx($t,{formatter:(j,S)=>S==="payroll"?`${j.toFixed(0)}k`:j}),s.jsx(Vr,{}),s.jsx(ma,{type:"monotone",dataKey:"payroll",name:"Masse salariale",fill:"hsl(var(--primary))",stroke:"hsl(var(--primary))",fillOpacity:.3})]})})})})}),s.jsx("div",{id:"org-hiring-plan",children:b.length>0&&s.jsx(Ye,{title:"Plan de Recrutement",children:s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:b.map(({year:j,count:S,cost:C})=>s.jsxs("div",{className:"p-4 bg-muted/30 rounded-lg text-center",children:[s.jsx("div",{className:"text-lg font-semibold",children:j}),s.jsxs("div",{className:"text-2xl font-bold text-primary",children:["+",S]}),s.jsx("div",{className:"text-xs text-muted-foreground",children:te(C,!0)})]},j))})})}),s.jsx("div",{id:"org-team",children:o==="orgchart"?s.jsx(Ye,{title:"Organigramme",children:s.jsx(JCe,{roles:e.roles,onEdit:g,onRemove:a,onAddToTeam:y})}):s.jsx(Ye,{title:"quipe & Recrutements",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Ht,{children:[s.jsx(qt,{children:s.jsxs(_e,{children:[s.jsx(ie,{children:"Poste"}),s.jsx(ie,{children:"Dpartement"}),s.jsx(ie,{children:"Dbut"}),s.jsx(ie,{className:"text-right",children:"Cot Annuel"}),s.jsx(ie,{})]})}),s.jsx(Kt,{children:e.roles.map(j=>s.jsxs(_e,{className:j.startYear>2025?"bg-muted/20":"",children:[s.jsxs(W,{className:"font-medium",children:[j.title,j.startYear>2025&&s.jsx(Oe,{variant:"secondary",className:"ml-2 text-xs",children:"Prvu"})]}),s.jsx(W,{children:s.jsx(Oe,{variant:"outline",children:j.department})}),s.jsx(W,{children:j.startYear}),s.jsx(W,{className:"text-right font-mono-numbers",children:te(j.annualCostLoaded)}),s.jsx(W,{children:s.jsxs("div",{className:"flex gap-1",children:[s.jsx(ae,{size:"sm",variant:"ghost",onClick:()=>g(j),children:"Modifier"}),s.jsx(ae,{size:"sm",variant:"ghost",className:"text-destructive",onClick:()=>a(j.id),children:"Suppr."})]})})]},j.id))})]})})})}),s.jsx(Cr,{open:d,onOpenChange:f,children:s.jsxs(vr,{children:[s.jsx(yr,{children:s.jsx(xr,{children:c?"Modifier le poste":"Nouveau poste"})}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Titre du poste"}),s.jsx(be,{value:h.title||"",onChange:j=>m({...h,title:j.target.value}),placeholder:"Ex: Dveloppeur Full Stack"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Dpartement"}),s.jsxs(st,{value:h.department,onValueChange:j=>m({...h,department:j}),children:[s.jsx(at,{children:s.jsx(ot,{placeholder:"Slectionner un dpartement"})}),s.jsx(it,{children:gNe.map(j=>s.jsx(Le,{value:j,children:j},j))})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Anne de dbut"}),s.jsx(be,{type:"number",value:h.startYear||2026,onChange:j=>m({...h,startYear:Number(j.target.value)}),min:2025,max:2030})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Cot annuel charg ()"}),s.jsx(be,{type:"number",value:h.annualCostLoaded||5e4,onChange:j=>m({...h,annualCostLoaded:Number(j.target.value)}),step:1e3})]})]})]}),s.jsxs(gd,{children:[s.jsx(ae,{variant:"outline",onClick:()=>f(!1),children:"Annuler"}),s.jsx(ae,{onClick:p,children:"Sauvegarder"})]})]})})]})})}const MT=["R&D","Production","Sales & Marketing","G&A","Logistics","IT & Tools"],$T=[{value:"fixed",label:"Fixe"},{value:"growth_rate",label:"Taux de croissance"},{value:"linked_to_revenue",label:"Li au CA"},{value:"linked_to_volume",label:"Li aux volumes"},{value:"step",label:"Par paliers"}],bNe=["hsl(0, 85%, 50%)","hsl(0, 0%, 30%)","hsl(38, 92%, 50%)","hsl(210, 70%, 50%)","hsl(150, 60%, 40%)","hsl(280, 60%, 50%)"],wNe=[0,.02,.03,.05,.07,.1,.15,.2],jNe=[{id:"kpis",label:"KPIs Charges",elementId:"charges-kpis"},{id:"chart",label:"Graphique OPEX",elementId:"charges-chart"},{id:"breakdown",label:"Rpartition par Catgorie",elementId:"charges-breakdown"},{id:"table",label:"Tableau des Charges",elementId:"charges-table"}];function _Ne(){var k,O,M;const{state:e,computed:t,updateExpenses:r,addExpense:n,removeExpense:a,setOpexMode:i,updateSimpleOpexConfig:o,saveAll:l}=Ki(),[c,u]=w.useState(null),[d,f]=w.useState({}),{startYear:h,durationYears:m}=e.scenarioSettings,y=Array.from({length:m},(D,L)=>h+L),[g,p]=w.useState(h),v=()=>{const D={id:`expense-${Date.now()}`,name:"Nouvelle Charge",category:"G&A",startYear:h,baseAnnualCost:1e4,evolutionType:"fixed",description:"Description de la charge"};n(D)},x=D=>{u(D.id),f(D)},b=()=>{if(c&&d){const D=e.expenses.map(L=>L.id===c?{...L,...d}:L);r(D),u(null),f({})}},_=()=>{u(null),f({})},j=y[0],S=y[y.length-1],C=((k=t.opexByYear.find(D=>D.year===j))==null?void 0:k.opex)||0,P=((O=t.opexByYear.find(D=>D.year===S))==null?void 0:O.opex)||0,N=((M=t.revenueByYear.find(D=>D.year===j))==null?void 0:M.revenue)||1,E=C/N,A=t.opexByYear.find(D=>D.year===g),T=A?MT.map((D,L)=>({name:D,value:A.byCategory[D]||0,color:bNe[L]})).filter(D=>D.value>0):[],R=t.opexByYear.map(D=>({year:D.year,opex:D.opex/1e3}));return s.jsx(Qi,{tabKey:"charges",children:s.jsxs("div",{className:"space-y-6",children:[s.jsx(Rs,{image:"rd",title:"Structure des Charges",subtitle:"OPEX dtailles avec volution automatique",height:"sm"}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs(Oe,{variant:"outline",className:"text-xs",children:[e.opexMode==="detailed"?`${e.expenses.length} postes de charges`:"Mode simplifi","  volution automatique"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(nf,{pageTitle:"Structure des Charges",sections:jNe,fileName:"Charges_OPEX"}),e.opexMode==="detailed"&&s.jsxs(ae,{variant:"outline",size:"sm",onClick:v,children:[s.jsx(ar,{className:"h-4 w-4 mr-1"}),"Ajouter Charge"]}),s.jsx(zd,{onSave:l,hasUnsavedChanges:e.hasUnsavedChanges,lastSaved:e.lastSaved?new Date(e.lastSaved):null})]})]}),s.jsx(Ye,{title:"Mode de Calcul",children:s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("button",{onClick:()=>i("detailed"),className:ue("flex flex-col items-center justify-center p-6 rounded-lg border-2 transition-all",e.opexMode==="detailed"?"border-primary bg-primary/5":"border-border hover:border-muted-foreground/50"),children:[s.jsx(WW,{className:ue("h-8 w-8 mb-2",e.opexMode==="detailed"?"text-primary":"text-muted-foreground")}),s.jsx("span",{className:ue("font-medium",e.opexMode==="detailed"?"text-primary":"text-foreground"),children:"Dtail par Poste"}),s.jsx("span",{className:"text-xs text-muted-foreground mt-1",children:"Saisie poste par poste avec volution spcifique"})]}),s.jsxs("button",{onClick:()=>i("simple"),className:ue("flex flex-col items-center justify-center p-6 rounded-lg border-2 transition-all",e.opexMode==="simple"?"border-primary bg-primary/5":"border-border hover:border-muted-foreground/50"),children:[s.jsx(ev,{className:ue("h-8 w-8 mb-2",e.opexMode==="simple"?"text-primary":"text-muted-foreground")}),s.jsx("span",{className:ue("font-medium",e.opexMode==="simple"?"text-primary":"text-foreground"),children:"Montant Global"}),s.jsx("span",{className:"text-xs text-muted-foreground mt-1",children:"Un montant total avec taux d'volution"})]})]})}),e.opexMode==="simple"&&s.jsxs(Ye,{title:"Configuration Simplifie",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Ne,{children:["Montant OPEX annuel de base (",j,")"]}),s.jsx(be,{type:"number",value:e.simpleOpexConfig.baseAmount,onChange:D=>o({baseAmount:Number(D.target.value)}),className:"font-mono-numbers"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Montant total des charges oprationnelles pour l'anne de dpart"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ne,{children:"volution annuelle (%)"}),s.jsxs(st,{value:(e.simpleOpexConfig.growthRate*100).toString(),onValueChange:D=>o({growthRate:Number(D)/100}),children:[s.jsx(at,{children:s.jsx(ot,{})}),s.jsx(it,{children:wNe.map(D=>s.jsxs(Le,{value:(D*100).toString(),children:["+",(D*100).toFixed(0),"% / an"]},D))})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Taux d'augmentation appliqu chaque anne"})]})]}),s.jsxs("div",{className:"mt-6 p-4 bg-muted/50 rounded-lg",children:[s.jsx("h4",{className:"text-sm font-medium mb-3",children:"Projection sur la priode"}),s.jsx("div",{className:"flex gap-4 flex-wrap",children:y.map((D,L)=>{const B=e.simpleOpexConfig.baseAmount*Math.pow(1+e.simpleOpexConfig.growthRate,L);return s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xs text-muted-foreground",children:D}),s.jsx("div",{className:"font-mono-numbers text-sm font-medium",children:te(B,!0)})]},D)})})]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",id:"charges-kpis",children:[s.jsx(yt,{label:`OPEX ${j}`,value:te(C,!0),subValue:e.opexMode==="detailed"?`${e.expenses.length} postes`:"Mode simplifi"}),s.jsx(yt,{label:"Ratio OPEX / CA",value:tn(E),subValue:j.toString()}),s.jsx(yt,{label:`OPEX ${S}`,value:te(P,!0),subValue:"Projection",trend:"up"}),s.jsx(yt,{label:"Croissance OPEX",value:C>0?tn(P/C-1):"N/A",subValue:`${j}-${S}`})]}),s.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[s.jsx(Ye,{title:"volution des Charges",id:"charges-chart",children:s.jsx("div",{className:"h-64",children:s.jsx(Wr,{width:"100%",height:"100%",children:s.jsxs(Ps,{data:R,children:[s.jsx(qr,{strokeDasharray:"3 3"}),s.jsx(mr,{dataKey:"year"}),s.jsx(nr,{tickFormatter:D=>`${D}k`}),s.jsx($t,{formatter:D=>`${D.toFixed(0)}k`}),s.jsx(rr,{dataKey:"opex",name:"OPEX",fill:"hsl(0, 85%, 50%)"})]})})})}),e.opexMode==="detailed"&&T.length>0&&s.jsxs(Ye,{title:"Rpartition par Catgorie",id:"charges-breakdown",children:[s.jsx("div",{className:"flex justify-end mb-4",children:s.jsxs(st,{value:g.toString(),onValueChange:D=>p(parseInt(D)),children:[s.jsx(at,{className:"w-24 h-8",children:s.jsx(ot,{})}),s.jsx(it,{children:y.map(D=>s.jsx(Le,{value:D.toString(),children:D},D))})]})}),s.jsx("div",{className:"h-56",children:s.jsx(Wr,{width:"100%",height:"100%",children:s.jsxs(xF,{children:[s.jsx(Xi,{data:T,cx:"50%",cy:"50%",innerRadius:40,outerRadius:80,paddingAngle:2,dataKey:"value",label:({name:D})=>D,children:T.map((D,L)=>s.jsx(ic,{fill:D.color},`cell-${L}`))}),s.jsx($t,{formatter:D=>te(D)})]})})}),s.jsxs("div",{className:"mt-2 text-center text-sm text-muted-foreground",children:["Total ",g,": ",s.jsx("span",{className:"font-mono-numbers font-medium",children:te((A==null?void 0:A.opex)||0,!0)})]})]}),e.opexMode==="simple"&&s.jsx(Ye,{title:"Rcapitulatif",id:"charges-breakdown",children:s.jsx("div",{className:"flex flex-col items-center justify-center h-56",children:s.jsxs("div",{className:"text-center space-y-4",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"Montant de base"}),s.jsx("div",{className:"text-3xl font-mono-numbers font-bold",children:te(e.simpleOpexConfig.baseAmount,!0)})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"volution annuelle"}),s.jsxs("div",{className:"text-xl font-medium text-primary",children:["+",(e.simpleOpexConfig.growthRate*100).toFixed(0),"%"]})]}),s.jsx("div",{className:"text-xs text-muted-foreground pt-2",children:"Les donnes sont synchronises avec les autres modules (Financement, Synthse)"})]})})})]}),e.opexMode==="detailed"&&s.jsx(Ye,{title:"Dtail des Charges",id:"charges-table",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Ht,{children:[s.jsx(qt,{children:s.jsxs(_e,{children:[s.jsx(ie,{children:"Charge"}),s.jsx(ie,{children:"Catgorie"}),s.jsx(ie,{children:"Type d'volution"}),s.jsx(ie,{className:"text-right",children:"Cot Base"}),s.jsx(ie,{children:"Paramtre"}),s.jsx(ie,{})]})}),s.jsx(Kt,{children:e.expenses.map(D=>{var L,B;return s.jsx(_e,{children:c===D.id?s.jsxs(s.Fragment,{children:[s.jsx(W,{children:s.jsx(be,{value:d.name||"",onChange:z=>f({...d,name:z.target.value}),className:"h-8"})}),s.jsx(W,{children:s.jsxs(st,{value:d.category,onValueChange:z=>f({...d,category:z}),children:[s.jsx(at,{className:"h-8 w-40",children:s.jsx(ot,{})}),s.jsx(it,{children:MT.map(z=>s.jsx(Le,{value:z,children:z},z))})]})}),s.jsx(W,{children:s.jsxs(st,{value:d.evolutionType,onValueChange:z=>f({...d,evolutionType:z}),children:[s.jsx(at,{className:"h-8 w-40",children:s.jsx(ot,{})}),s.jsx(it,{children:$T.map(z=>s.jsx(Le,{value:z.value,children:z.label},z.value))})]})}),s.jsx(W,{children:s.jsx(be,{type:"number",value:d.baseAnnualCost||0,onChange:z=>f({...d,baseAnnualCost:Number(z.target.value)}),className:"h-8 w-28 text-right"})}),s.jsxs(W,{children:[d.evolutionType==="growth_rate"&&s.jsx(be,{type:"number",step:"0.01",value:(d.growthRate||0)*100,onChange:z=>f({...d,growthRate:Number(z.target.value)/100}),className:"h-8 w-20",placeholder:"%"}),d.evolutionType==="linked_to_revenue"&&s.jsx(be,{type:"number",step:"0.01",value:(d.revenueRatio||0)*100,onChange:z=>f({...d,revenueRatio:Number(z.target.value)/100}),className:"h-8 w-20",placeholder:"% CA"})]}),s.jsx(W,{children:s.jsxs("div",{className:"flex gap-1",children:[s.jsx(ae,{size:"icon",variant:"ghost",onClick:b,children:s.jsx(So,{className:"h-4 w-4 text-accent"})}),s.jsx(ae,{size:"icon",variant:"ghost",onClick:_,children:s.jsx($a,{className:"h-4 w-4 text-destructive"})})]})})]}):s.jsxs(s.Fragment,{children:[s.jsx(W,{className:"font-medium",children:s.jsxs("div",{className:"flex items-center gap-2",children:[D.name,D.description&&s.jsxs(e7,{children:[s.jsx(t7,{children:s.jsx(Th,{className:"h-3 w-3 text-muted-foreground"})}),s.jsx(SD,{children:s.jsx("p",{className:"max-w-xs",children:D.description})})]})]})}),s.jsx(W,{children:s.jsx(Oe,{variant:"outline",children:D.category})}),s.jsx(W,{children:s.jsx(Oe,{variant:"secondary",children:(L=$T.find(z=>z.value===D.evolutionType))==null?void 0:L.label})}),s.jsx(W,{className:"text-right font-mono-numbers",children:te(D.baseAnnualCost)}),s.jsxs(W,{className:"text-muted-foreground text-sm",children:[D.evolutionType==="growth_rate"&&`+${tn(D.growthRate||0)}/an`,D.evolutionType==="linked_to_revenue"&&`${tn(D.revenueRatio||0)} du CA`,D.evolutionType==="linked_to_volume"&&`${D.volumeRatio||0}/unit`,D.evolutionType==="step"&&`${((B=D.steps)==null?void 0:B.length)||0} paliers`,D.evolutionType==="fixed"&&"Constant"]}),s.jsx(W,{children:s.jsxs("div",{className:"flex gap-1",children:[s.jsx(ae,{size:"icon",variant:"ghost",onClick:()=>x(D),children:s.jsx(ix,{className:"h-4 w-4"})}),s.jsx(ae,{size:"icon",variant:"ghost",onClick:()=>a(D.id),children:s.jsx(hr,{className:"h-4 w-4 text-destructive"})})]})})]})},D.id)})})]})})})]})})}var E0="Switch",[SNe,f2e]=Un(E0),[CNe,NNe]=SNe(E0),fz=w.forwardRef((e,t)=>{const{__scopeSwitch:r,name:n,checked:a,defaultChecked:i,required:o,disabled:l,value:c="on",onCheckedChange:u,form:d,...f}=e,[h,m]=w.useState(null),y=ut(t,b=>m(b)),g=w.useRef(!1),p=h?d||!!h.closest("form"):!0,[v,x]=Jn({prop:a,defaultProp:i??!1,onChange:u,caller:E0});return s.jsxs(CNe,{scope:r,checked:v,disabled:l,children:[s.jsx(We.button,{type:"button",role:"switch","aria-checked":v,"aria-required":o,"data-state":gz(v),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:y,onClick:Te(e.onClick,b=>{x(_=>!_),p&&(g.current=b.isPropagationStopped(),g.current||b.stopPropagation())})}),p&&s.jsx(pz,{control:h,bubbles:!g.current,name:n,value:c,checked:v,required:o,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});fz.displayName=E0;var hz="SwitchThumb",mz=w.forwardRef((e,t)=>{const{__scopeSwitch:r,...n}=e,a=NNe(hz,r);return s.jsx(We.span,{"data-state":gz(a.checked),"data-disabled":a.disabled?"":void 0,...n,ref:t})});mz.displayName=hz;var PNe="SwitchBubbleInput",pz=w.forwardRef(({__scopeSwitch:e,control:t,checked:r,bubbles:n=!0,...a},i)=>{const o=w.useRef(null),l=ut(o,i),c=xx(r),u=cx(t);return w.useEffect(()=>{const d=o.current;if(!d)return;const f=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(f,"checked").set;if(c!==r&&m){const y=new Event("click",{bubbles:n});m.call(d,r),d.dispatchEvent(y)}},[c,r,n]),s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:l,style:{...a.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});pz.displayName=PNe;function gz(e){return e?"checked":"unchecked"}var vz=fz,kNe=mz;const A0=w.forwardRef(({className:e,...t},r)=>s.jsx(vz,{className:ue("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",e),...t,ref:r,children:s.jsx(kNe,{className:ue("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));A0.displayName=vz.displayName;var yz="AlertDialog",[ENe,h2e]=Un(yz,[q5]),Ds=q5(),xz=e=>{const{__scopeAlertDialog:t,...r}=e,n=Ds(t);return s.jsx(lz,{...n,...r,modal:!0})};xz.displayName=yz;var ANe="AlertDialogTrigger",bz=w.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Ds(r);return s.jsx(cz,{...a,...n,ref:t})});bz.displayName=ANe;var ONe="AlertDialogPortal",wz=e=>{const{__scopeAlertDialog:t,...r}=e,n=Ds(t);return s.jsx(uz,{...n,...r})};wz.displayName=ONe;var TNe="AlertDialogOverlay",jz=w.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Ds(r);return s.jsx(PN,{...a,...n,ref:t})});jz.displayName=TNe;var gu="AlertDialogContent",[RNe,MNe]=ENe(gu),$Ne=tI("AlertDialogContent"),_z=w.forwardRef((e,t)=>{const{__scopeAlertDialog:r,children:n,...a}=e,i=Ds(r),o=w.useRef(null),l=ut(t,o),c=w.useRef(null);return s.jsx(uNe,{contentName:gu,titleName:Sz,docsSlug:"alert-dialog",children:s.jsx(RNe,{scope:r,cancelRef:c,children:s.jsxs(kN,{role:"alertdialog",...i,...a,ref:l,onOpenAutoFocus:Te(a.onOpenAutoFocus,u=>{var d;u.preventDefault(),(d=c.current)==null||d.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[s.jsx($Ne,{children:n}),s.jsx(DNe,{contentRef:o})]})})})});_z.displayName=gu;var Sz="AlertDialogTitle",Cz=w.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Ds(r);return s.jsx(EN,{...a,...n,ref:t})});Cz.displayName=Sz;var Nz="AlertDialogDescription",Pz=w.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Ds(r);return s.jsx(AN,{...a,...n,ref:t})});Pz.displayName=Nz;var INe="AlertDialogAction",kz=w.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Ds(r);return s.jsx(ON,{...a,...n,ref:t})});kz.displayName=INe;var Ez="AlertDialogCancel",Az=w.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,{cancelRef:a}=MNe(Ez,r),i=Ds(r),o=ut(t,a);return s.jsx(ON,{...i,...n,ref:o})});Az.displayName=Ez;var DNe=({contentRef:e})=>{const t=`\`${gu}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${gu}\` by passing a \`${Nz}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${gu}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return w.useEffect(()=>{var n;document.getElementById((n=e.current)==null?void 0:n.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},LNe=xz,BNe=bz,FNe=wz,Oz=jz,Tz=_z,Rz=kz,Mz=Az,$z=Cz,Iz=Pz;const Sy=LNe,IT=BNe,zNe=FNe,Dz=w.forwardRef(({className:e,...t},r)=>s.jsx(Oz,{className:ue("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));Dz.displayName=Oz.displayName;const Em=w.forwardRef(({className:e,...t},r)=>s.jsxs(zNe,{children:[s.jsx(Dz,{}),s.jsx(Tz,{ref:r,className:ue("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));Em.displayName=Tz.displayName;const Am=({className:e,...t})=>s.jsx("div",{className:ue("flex flex-col space-y-2 text-center sm:text-left",e),...t});Am.displayName="AlertDialogHeader";const Om=({className:e,...t})=>s.jsx("div",{className:ue("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Om.displayName="AlertDialogFooter";const Tm=w.forwardRef(({className:e,...t},r)=>s.jsx($z,{ref:r,className:ue("text-lg font-semibold",e),...t}));Tm.displayName=$z.displayName;const Rm=w.forwardRef(({className:e,...t},r)=>s.jsx(Iz,{ref:r,className:ue("text-sm text-muted-foreground",e),...t}));Rm.displayName=Iz.displayName;const Mm=w.forwardRef(({className:e,...t},r)=>s.jsx(Rz,{ref:r,className:ue(cC(),e),...t}));Mm.displayName=Rz.displayName;const $m=w.forwardRef(({className:e,...t},r)=>s.jsx(Mz,{ref:r,className:ue(cC({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));$m.displayName=Mz.displayName;const vi=w.forwardRef(({className:e,...t},r)=>s.jsx("textarea",{className:ue("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));vi.displayName="Textarea";const UNe=["Actif","Clients B2B","Pays","Zone Gographique","Mail du contact","Date d'EER","Date dernier achat","Type de Client","Pricing rules","Delais de paiement","Modalits de livraison","Rgles transport","Frais de livraison","Contrat/Exclusivit","MOQ","Avantages Spcifiques"];function VNe({open:e,onOpenChange:t,onImport:r}){const[n,a]=w.useState(""),[i,o]=w.useState([]),[l,c]=w.useState(!1),u=f=>{var y,g,p,v,x,b,_,j,S,C,P,N;const h=f.trim().split(`
`).filter(E=>E.trim()),m=[];for(const E of h){const A=E.split("	");A.length<2||m.push({is_active:(A[0]||"").toLowerCase().includes("oui"),company_name:((y=A[1])==null?void 0:y.trim())||"Sans nom",country:((g=A[2])==null?void 0:g.trim())||null,geographic_zone:((p=A[3])==null?void 0:p.trim())||null,contact_email:((v=A[4])==null?void 0:v.trim())||null,eer_date:parseInt(A[5])||null,last_purchase_date:parseInt(A[6])||null,client_type:((x=A[7])==null?void 0:x.trim())||null,pricing_rule:((b=A[8])==null?void 0:b.trim())||null,payment_terms:((_=A[9])==null?void 0:_.trim())||null,delivery_method:((j=A[10])==null?void 0:j.trim())||null,transport_rules:((S=A[11])==null?void 0:S.trim())||null,delivery_fee_rule:((C=A[12])==null?void 0:C.trim())||null,contract_exclusivity:(A[13]||"").toLowerCase().includes("oui"),moq:((P=A[14])==null?void 0:P.trim())||null,specific_advantages:((N=A[15])==null?void 0:N.trim())||null})}o(m)},d=async()=>{c(!0);const f=await r(i);c(!1),f>0&&(a(""),o([]),t(!1))};return s.jsx(Cr,{open:e,onOpenChange:t,children:s.jsxs(vr,{className:"max-w-3xl max-h-[80vh] overflow-y-auto",children:[s.jsx(yr,{children:s.jsx(xr,{children:"Import Clients B2B (copier-coller)"})}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"Collez les lignes depuis Excel/Google Sheets (spares par tabulations). Colonnes attendues :"}),s.jsx("div",{className:"flex flex-wrap gap-1",children:UNe.map((f,h)=>s.jsx(Oe,{variant:"outline",className:"text-[10px]",children:f},h))}),s.jsx(vi,{placeholder:"Collez vos lignes ici...",rows:6,value:n,onChange:f=>{a(f.target.value),u(f.target.value)}}),i.length>0&&s.jsxs("div",{className:"border rounded p-3",children:[s.jsxs("p",{className:"text-sm font-medium mb-2",children:[i.length," client(s) dtect(s) :"]}),s.jsx("div",{className:"space-y-1 max-h-40 overflow-y-auto",children:i.map((f,h)=>s.jsxs("div",{className:"text-xs flex gap-2 items-center",children:[s.jsx(Oe,{variant:f.is_active?"default":"secondary",className:"text-[9px]",children:f.is_active?"Actif":"Inactif"}),s.jsx("span",{className:"font-medium",children:f.company_name}),s.jsx("span",{className:"text-muted-foreground",children:f.country}),s.jsx("span",{className:"text-muted-foreground",children:f.client_type})]},h))})]})]}),s.jsxs(gd,{children:[s.jsx(ae,{variant:"outline",onClick:()=>t(!1),children:"Annuler"}),s.jsx(ae,{onClick:d,disabled:i.length===0||l,children:l?"Import...":`Importer ${i.length} client(s)`})]})]})})}function WNe({deliveryFeeTiers:e,paymentTermsOptions:t,deliveryMethods:r,onAddDeliveryFee:n,onDeleteDeliveryFee:a,onAddPaymentTerm:i,onDeletePaymentTerm:o,onAddDeliveryMethod:l,onDeleteDeliveryMethod:c}){const[u,d]=w.useState(""),[f,h]=w.useState(""),[m,y]=w.useState(""),[g,p]=w.useState(""),[v,x]=w.useState(""),[b,_]=w.useState("");return s.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[s.jsxs(Bt,{children:[s.jsx(cr,{className:"pb-2",children:s.jsx(ur,{className:"text-sm",children:"Frais de livraison (tranches)"})}),s.jsxs(Wt,{className:"space-y-2",children:[e.map(j=>s.jsxs("div",{className:"flex items-center justify-between text-xs p-2 bg-muted/30 rounded",children:[s.jsxs("span",{children:[j.label,"  ",j.fee_amount," (",j.min_pieces,j.max_pieces?`-${j.max_pieces}`:"+"," pcs)"]}),s.jsx(ae,{size:"sm",variant:"ghost",onClick:()=>a(j.id),children:s.jsx(hr,{className:"h-3 w-3"})})]},j.id)),s.jsxs("div",{className:"grid grid-cols-4 gap-1",children:[s.jsx(be,{placeholder:"Label",value:u,onChange:j=>d(j.target.value),className:"text-xs h-8"}),s.jsx(be,{placeholder:"",type:"number",value:f,onChange:j=>h(j.target.value),className:"text-xs h-8"}),s.jsx(be,{placeholder:"Min",type:"number",value:m,onChange:j=>y(j.target.value),className:"text-xs h-8"}),s.jsx(be,{placeholder:"Max",type:"number",value:g,onChange:j=>p(j.target.value),className:"text-xs h-8"})]}),s.jsxs(ae,{size:"sm",className:"w-full",variant:"outline",disabled:!u,onClick:async()=>{await n(u,parseFloat(f)||0,parseInt(m)||0,g?parseInt(g):null),d(""),h(""),y(""),p("")},children:[s.jsx(ar,{className:"h-3 w-3 mr-1"})," Ajouter"]})]})]}),s.jsxs(Bt,{children:[s.jsx(cr,{className:"pb-2",children:s.jsx(ur,{className:"text-sm",children:"Dlais de paiement"})}),s.jsxs(Wt,{className:"space-y-2",children:[t.map(j=>s.jsxs("div",{className:"flex items-center justify-between text-xs p-2 bg-muted/30 rounded",children:[s.jsx("span",{children:j.label}),s.jsx(ae,{size:"sm",variant:"ghost",onClick:()=>o(j.id),children:s.jsx(hr,{className:"h-3 w-3"})})]},j.id)),s.jsxs("div",{className:"flex gap-1",children:[s.jsx(be,{placeholder:"Ex: 30 jours fin de mois",value:v,onChange:j=>x(j.target.value),className:"text-xs h-8"}),s.jsx(ae,{size:"sm",variant:"outline",disabled:!v,onClick:async()=>{await i(v),x("")},children:s.jsx(ar,{className:"h-3 w-3"})})]})]})]}),s.jsxs(Bt,{children:[s.jsx(cr,{className:"pb-2",children:s.jsx(ur,{className:"text-sm",children:"Modalits de livraison"})}),s.jsxs(Wt,{className:"space-y-2",children:[r.map(j=>s.jsxs("div",{className:"flex items-center justify-between text-xs p-2 bg-muted/30 rounded",children:[s.jsx("span",{children:j.label}),s.jsx(ae,{size:"sm",variant:"ghost",onClick:()=>c(j.id),children:s.jsx(hr,{className:"h-3 w-3"})})]},j.id)),s.jsxs("div",{className:"flex gap-1",children:[s.jsx(be,{placeholder:"Ex: DHL, TNT...",value:b,onChange:j=>_(j.target.value),className:"text-xs h-8"}),s.jsx(ae,{size:"sm",variant:"outline",disabled:!b,onClick:async()=>{await l(b),_("")},children:s.jsx(ar,{className:"h-3 w-3"})})]})]})]})]})}const HNe=[{id:"default-b2b",name:"B2B Standard",type:"b2b",tvaRate:20,intermediaries:[{label:"Distributeur",coefficient:1.3},{label:"Shop",coefficient:1.8}]},{id:"default-oem",name:"OEM",type:"oem",tvaRate:0,intermediaries:[{label:"Partenaire OEM",coefficient:1.4}]}];function Lz(){const[e,t]=w.useState(HNe),[r,n]=w.useState("from_public"),[a,i]=w.useState("default-b2b"),[o,l]=w.useState({}),[c,u]=w.useState({}),[d,f]=w.useState(!1);w.useEffect(()=>{(async()=>{var v,x,b,_,j;const{data:{user:g}}=await xe.auth.getUser();if(!g){f(!0);return}const{data:p}=await xe.from("pricing_config").select("config_data").eq("user_id",g.id).maybeSingle();if(p!=null&&p.config_data){const S=p.config_data;if((v=S.salesRules)!=null&&v.length&&t(S.salesRules),S.pricingMode&&n(S.pricingMode),S.activeRuleId&&i(S.activeRuleId),S.editedPrices){const C=Object.keys(S.editedPrices)[0];if(C&&typeof S.editedPrices[C]=="object"&&!Array.isArray(S.editedPrices[C]))l(S.editedPrices);else if(C&&typeof S.editedPrices[C]=="number"){const P=S.activeRuleId||((b=(x=S.salesRules)==null?void 0:x[0])==null?void 0:b.id)||"default-b2b";l({[P]:S.editedPrices})}}if(S.editedOurPrices){const C=Object.keys(S.editedOurPrices)[0];if(C&&typeof S.editedOurPrices[C]=="object"&&!Array.isArray(S.editedOurPrices[C]))u(S.editedOurPrices);else if(C&&typeof S.editedOurPrices[C]=="number"){const P=S.activeRuleId||((j=(_=S.salesRules)==null?void 0:_[0])==null?void 0:j.id)||"default-b2b";u({[P]:S.editedOurPrices})}}}f(!0)})()},[]);const h=w.useCallback((y,g)=>{const v=o[g||a]||{};return v[y.id]!==void 0?v[y.id]:y.price_ttc},[o,a]),m=w.useCallback((y,g)=>{if(!g||y<=0)return null;const p=g.tvaRate??20;let x=y/(1+p/100);const b=[...g.intermediaries].reverse();for(const _ of b)x=x/_.coefficient;return{ourB2BPrice:x}},[]);return{salesRules:e,pricingMode:r,activeRuleId:a,editedPrices:o,editedOurPrices:c,loaded:d,getEffectivePrice:h,computeChainFromPublicTTC:m}}const ig=[2022,2023,2024,2025];function qNe({clients:e,projections:t,deliveryFeeTiers:r,paymentTermsOptions:n,deliveryMethods:a,categories:i,onUpsertClient:o,onDeleteClient:l,onBulkImport:c,onUpsertProjection:u,getClientProjections:d,onAddDeliveryFee:f,onDeleteDeliveryFee:h,onAddPaymentTerm:m,onDeletePaymentTerm:y,onAddDeliveryMethod:g,onDeleteDeliveryMethod:p,onAddCategory:v,onDeleteCategory:x,onUpdateCategory:b}){var se;const[_,j]=w.useState(!1),[S,C]=w.useState(!1),[P,N]=w.useState(!1),[E,A]=w.useState(null),[T,R]=w.useState({}),[k,O]=w.useState(new Set),[M,D]=w.useState(""),[L,B]=w.useState(!1),[z,Z]=w.useState(null),[ee,le]=w.useState({}),{salesRules:V}=Lz(),[I,F]=w.useState({company_name:"",country:"",geographic_zone:"",contact_email:"",eer_date:"",client_type:"",pricing_rule:"",payment_terms:"",delivery_method:"",delivery_fee_rule:"",moq:"",category_id:""}),q=Q=>{A(Q.id),R({...Q})},de=async()=>{!E||!T.company_name||(await o({...T,id:E,company_name:T.company_name}),A(null))},re=async()=>{I.company_name.trim()&&(await o({company_name:I.company_name,country:I.country||null,geographic_zone:I.geographic_zone||null,contact_email:I.contact_email||null,eer_date:parseInt(I.eer_date)||null,client_type:I.client_type||null,pricing_rule:I.pricing_rule||null,payment_terms:I.payment_terms||null,delivery_method:I.delivery_method||null,delivery_fee_rule:I.delivery_fee_rule||null,moq:I.moq||null,category_id:I.category_id||null,is_active:!0}),N(!1),F({company_name:"",country:"",geographic_zone:"",contact_email:"",eer_date:"",client_type:"",pricing_rule:"",payment_terms:"",delivery_method:"",delivery_fee_rule:"",moq:"",category_id:""}))},H=Q=>{O(ce=>{const pe=new Set(ce);return pe.has(Q)?pe.delete(Q):pe.add(Q),pe})},Y=(Q,ce)=>{const pe=t.find(fe=>fe.client_id===Q&&fe.year===ce);return pe?Number(pe.projected_revenue):0},G=async(Q,ce,pe)=>{const fe=parseFloat(pe);isNaN(fe)||await u(Q,ce,fe),le(ye=>{const Pe={...ye};return Pe[Q]&&delete Pe[Q][ce],Pe})},J=r.map(Q=>Q.label),ge=n.map(Q=>Q.label),Ce=a.map(Q=>Q.label),$e=()=>{const Q=["Actif","Client","Pays","Zone Go","Email","Pricing","Dlai paiement","Livraison","Frais livraison","MOQ",...ig.map(tt=>`CA ${tt}`),"Catgorie"],ce=e.map(tt=>{var Ke;return[tt.is_active?"Oui":"Non",tt.company_name,tt.country||"",tt.geographic_zone||"",tt.contact_email||"",tt.pricing_rule||"",tt.payment_terms||"",tt.delivery_method||"",tt.delivery_fee_rule||"",tt.moq||"",...ig.map(pt=>String(Y(tt.id,pt)||"")),((Ke=i.find(pt=>pt.id===tt.category_id))==null?void 0:Ke.name)||""]}),pe=[Q,...ce].map(tt=>tt.map(Ke=>`"${String(Ke).replace(/"/g,'""')}"`).join(";")).join(`
`),fe=new Blob(["\uFEFF"+pe],{type:"text/csv;charset=utf-8;"}),ye=URL.createObjectURL(fe),Pe=document.createElement("a");Pe.href=ye,Pe.download=`clients_b2b_${new Date().toISOString().slice(0,10)}.csv`,Pe.click(),URL.revokeObjectURL(ye),Ee.success("Fichier CSV export")},Ge=async()=>{z&&(await l(z),Z(null))},dt=e.filter(Q=>!Q.category_id),Rt=i.map(Q=>({category:Q,clients:e.filter(ce=>ce.category_id===Q.id)})),U=Q=>{var fe;const ce=E===Q.id,pe=ce?T:Q;return s.jsxs(_e,{className:"text-xs",children:[s.jsx(W,{children:ce?s.jsx(A0,{checked:pe.is_active,onCheckedChange:ye=>R(Pe=>({...Pe,is_active:ye}))}):s.jsx(Oe,{variant:Q.is_active?"default":"secondary",className:"text-[9px]",children:Q.is_active?"Oui":"Non"})}),s.jsx(W,{className:"font-medium",children:ce?s.jsx(be,{className:"h-7 text-xs w-32",value:pe.company_name||"",onChange:ye=>R(Pe=>({...Pe,company_name:ye.target.value}))}):Q.company_name}),s.jsx(W,{children:ce?s.jsx(be,{className:"h-7 text-xs w-20",value:pe.country||"",onChange:ye=>R(Pe=>({...Pe,country:ye.target.value}))}):Q.country}),s.jsx(W,{children:ce?s.jsx(be,{className:"h-7 text-xs w-20",value:pe.geographic_zone||"",onChange:ye=>R(Pe=>({...Pe,geographic_zone:ye.target.value}))}):Q.geographic_zone}),s.jsx(W,{children:ce?s.jsx(be,{className:"h-7 text-xs w-36",value:pe.contact_email||"",onChange:ye=>R(Pe=>({...Pe,contact_email:ye.target.value}))}):Q.contact_email?s.jsx("a",{href:`mailto:${Q.contact_email}`,className:"text-primary underline",children:Q.contact_email}):""}),s.jsx(W,{children:ce?s.jsxs(st,{value:pe.pricing_rule||"",onValueChange:ye=>R(Pe=>({...Pe,pricing_rule:ye})),children:[s.jsx(at,{className:"h-7 text-xs w-28",children:s.jsx(ot,{placeholder:""})}),s.jsx(it,{children:V.map(ye=>s.jsx(Le,{value:ye.name,children:ye.name},ye.id))})]}):Q.pricing_rule||""}),s.jsx(W,{children:ce?s.jsxs(st,{value:pe.payment_terms||"",onValueChange:ye=>R(Pe=>({...Pe,payment_terms:ye})),children:[s.jsx(at,{className:"h-7 text-xs w-24",children:s.jsx(ot,{placeholder:""})}),s.jsx(it,{children:ge.map(ye=>s.jsx(Le,{value:ye,children:ye},ye))})]}):Q.payment_terms||""}),s.jsx(W,{children:ce?s.jsxs(st,{value:pe.delivery_method||"",onValueChange:ye=>R(Pe=>({...Pe,delivery_method:ye})),children:[s.jsx(at,{className:"h-7 text-xs w-24",children:s.jsx(ot,{placeholder:""})}),s.jsx(it,{children:Ce.map(ye=>s.jsx(Le,{value:ye,children:ye},ye))})]}):Q.delivery_method||""}),s.jsx(W,{children:ce?s.jsxs(st,{value:pe.delivery_fee_rule||"",onValueChange:ye=>R(Pe=>({...Pe,delivery_fee_rule:ye})),children:[s.jsx(at,{className:"h-7 text-xs w-24",children:s.jsx(ot,{placeholder:""})}),s.jsx(it,{children:J.map(ye=>s.jsx(Le,{value:ye,children:ye},ye))})]}):Q.delivery_fee_rule||""}),s.jsx(W,{children:ce?s.jsx(be,{className:"h-7 text-xs w-16",value:pe.moq||"",onChange:ye=>R(Pe=>({...Pe,moq:ye.target.value}))}):Q.moq||""}),ig.map(ye=>{var Ke;const Pe=Y(Q.id,ye),tt=(Ke=ee[Q.id])==null?void 0:Ke[ye];return s.jsx(W,{className:"text-right font-mono",children:s.jsx(be,{className:"h-7 text-xs w-20 text-right",type:"number",value:tt!==void 0?tt:Pe||"",onChange:pt=>le(he=>({...he,[Q.id]:{...he[Q.id]||{},[ye]:pt.target.value}})),onBlur:pt=>G(Q.id,ye,pt.target.value),placeholder:"0"})},ye)}),s.jsx(W,{children:ce?s.jsxs(st,{value:pe.category_id||"none",onValueChange:ye=>R(Pe=>({...Pe,category_id:ye==="none"?null:ye})),children:[s.jsx(at,{className:"h-7 text-xs w-24",children:s.jsx(ot,{placeholder:""})}),s.jsxs(it,{children:[s.jsx(Le,{value:"none",children:"Sans catgorie"}),i.map(ye=>s.jsx(Le,{value:ye.id,children:ye.name},ye.id))]})]}):((fe=i.find(ye=>ye.id===Q.category_id))==null?void 0:fe.name)||""}),s.jsx(W,{children:s.jsx("div",{className:"flex gap-1",children:ce?s.jsxs(s.Fragment,{children:[s.jsx(ae,{size:"sm",variant:"ghost",onClick:de,children:s.jsx(Gm,{className:"h-3 w-3"})}),s.jsx(ae,{size:"sm",variant:"ghost",onClick:()=>A(null),children:s.jsx($a,{className:"h-3 w-3"})})]}):s.jsxs(s.Fragment,{children:[s.jsx(ae,{size:"sm",variant:"ghost",onClick:()=>q(Q),children:s.jsx(ix,{className:"h-3 w-3"})}),s.jsx(ae,{size:"sm",variant:"ghost",onClick:()=>Z(Q.id),children:s.jsx(hr,{className:"h-3 w-3 text-destructive"})})]})})})]},Q.id)},X=(Q,ce)=>{const pe=k.has(Q.id);return s.jsx(_e,{className:"bg-muted/40 hover:bg-muted/60 cursor-pointer",onClick:()=>H(Q.id),children:s.jsx(W,{colSpan:15,className:"py-2",children:s.jsxs("div",{className:"flex items-center gap-2",children:[pe?s.jsx(Oh,{className:"h-4 w-4"}):s.jsx(Ah,{className:"h-4 w-4"}),s.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:Q.color||"#6366f1"}}),s.jsx("span",{className:"font-semibold text-sm",children:Q.name}),s.jsx(Oe,{variant:"secondary",className:"text-[9px]",children:ce})]})})},`cat-${Q.id}`)};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsxs(ae,{size:"sm",onClick:()=>N(!0),children:[s.jsx(ar,{className:"h-4 w-4 mr-1"})," Nouveau client"]}),s.jsxs(ae,{size:"sm",variant:"outline",onClick:()=>j(!0),children:[s.jsx(Li,{className:"h-4 w-4 mr-1"})," Import copier-coller"]}),s.jsxs(ae,{size:"sm",variant:"outline",onClick:()=>B(!0),children:[s.jsx(FW,{className:"h-4 w-4 mr-1"})," Catgorie"]}),s.jsxs(ae,{size:"sm",variant:"outline",onClick:()=>C(!S),children:[s.jsx(II,{className:"h-4 w-4 mr-1"})," Paramtres"]}),s.jsxs(ae,{size:"sm",variant:"outline",onClick:$e,children:[s.jsx(Ym,{className:"h-4 w-4 mr-1"})," Export CSV"]}),s.jsxs("span",{className:"text-xs text-muted-foreground ml-auto",children:[e.length," client(s)"]})]}),S&&s.jsx(WNe,{deliveryFeeTiers:r,paymentTermsOptions:n,deliveryMethods:a,onAddDeliveryFee:f,onDeleteDeliveryFee:h,onAddPaymentTerm:m,onDeletePaymentTerm:y,onAddDeliveryMethod:g,onDeleteDeliveryMethod:p}),i.length>0&&s.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:i.map(Q=>s.jsxs(Oe,{variant:"outline",className:"gap-1 text-xs",children:[s.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:Q.color||"#6366f1"}}),Q.name,s.jsx("button",{onClick:()=>x(Q.id),className:"ml-1 text-destructive hover:text-destructive/80",children:s.jsx($a,{className:"h-3 w-3"})})]},Q.id))}),s.jsx("div",{className:"border rounded-lg overflow-x-auto",children:s.jsxs(Ht,{children:[s.jsx(qt,{children:s.jsxs(_e,{children:[s.jsx(ie,{className:"text-[10px] min-w-[50px]",children:"Actif"}),s.jsx(ie,{className:"text-[10px] min-w-[130px]",children:"Client"}),s.jsx(ie,{className:"text-[10px] min-w-[80px]",children:"Pays"}),s.jsx(ie,{className:"text-[10px] min-w-[80px]",children:"Zone Go"}),s.jsx(ie,{className:"text-[10px] min-w-[140px]",children:"Mail contact"}),s.jsx(ie,{className:"text-[10px] min-w-[100px]",children:"Pricing"}),s.jsx(ie,{className:"text-[10px] min-w-[90px]",children:"Dlai paie."}),s.jsx(ie,{className:"text-[10px] min-w-[80px]",children:"Livraison"}),s.jsx(ie,{className:"text-[10px] min-w-[80px]",children:"Frais liv."}),s.jsx(ie,{className:"text-[10px] min-w-[60px]",children:"MOQ"}),ig.map(Q=>s.jsxs(ie,{className:"text-[10px] text-right min-w-[80px] bg-accent/20",children:["CA ",Q]},Q)),s.jsx(ie,{className:"text-[10px] min-w-[90px]",children:"Catgorie"}),s.jsx(ie,{className:"text-[10px] min-w-[70px]",children:"Actions"})]})}),s.jsxs(Kt,{children:[e.length===0&&s.jsx(_e,{children:s.jsx(W,{colSpan:15,className:"text-center text-muted-foreground py-8 text-sm",children:"Aucun client  Ajoutez-en ou importez via copier-coller"})}),Rt.map(({category:Q,clients:ce})=>{if(ce.length===0)return null;const pe=k.has(Q.id);return[X(Q,ce.length),...pe?[]:ce.map(U)]}),dt.length>0&&s.jsxs(s.Fragment,{children:[i.length>0&&s.jsx(_e,{className:"bg-muted/20",children:s.jsx(W,{colSpan:15,className:"py-2",children:s.jsxs("span",{className:"text-xs text-muted-foreground font-medium",children:["Sans catgorie (",dt.length,")"]})})}),dt.map(U)]})]})]})}),s.jsx(VNe,{open:_,onOpenChange:j,onImport:c}),s.jsx(Cr,{open:P,onOpenChange:N,children:s.jsxs(vr,{children:[s.jsx(yr,{children:s.jsx(xr,{children:"Nouveau Client"})}),s.jsxs("div",{className:"space-y-3 py-2",children:[s.jsx(be,{placeholder:"Nom de l'entreprise *",value:I.company_name,onChange:Q=>F(ce=>({...ce,company_name:Q.target.value}))}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsx(be,{placeholder:"Pays",value:I.country,onChange:Q=>F(ce=>({...ce,country:Q.target.value}))}),s.jsx(be,{placeholder:"Zone gographique",value:I.geographic_zone,onChange:Q=>F(ce=>({...ce,geographic_zone:Q.target.value}))})]}),s.jsx(be,{placeholder:"Email contact",value:I.contact_email,onChange:Q=>F(ce=>({...ce,contact_email:Q.target.value}))}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs(st,{value:I.pricing_rule,onValueChange:Q=>F(ce=>({...ce,pricing_rule:Q})),children:[s.jsx(at,{children:s.jsx(ot,{placeholder:"Pricing rule"})}),s.jsx(it,{children:V.map(Q=>s.jsx(Le,{value:Q.name,children:Q.name},Q.id))})]}),s.jsxs(st,{value:I.category_id,onValueChange:Q=>F(ce=>({...ce,category_id:Q})),children:[s.jsx(at,{children:s.jsx(ot,{placeholder:"Catgorie"})}),s.jsxs(it,{children:[s.jsx(Le,{value:"none",children:"Sans catgorie"}),i.map(Q=>s.jsx(Le,{value:Q.id,children:Q.name},Q.id))]})]})]}),s.jsx(be,{placeholder:"MOQ",value:I.moq,onChange:Q=>F(ce=>({...ce,moq:Q.target.value}))})]}),s.jsxs(gd,{children:[s.jsx(ae,{variant:"outline",onClick:()=>N(!1),children:"Annuler"}),s.jsx(ae,{onClick:re,disabled:!I.company_name.trim(),children:"Crer"})]})]})}),s.jsx(Cr,{open:L,onOpenChange:B,children:s.jsxs(vr,{className:"max-w-sm",children:[s.jsx(yr,{children:s.jsx(xr,{children:"Nouvelle catgorie"})}),s.jsx(be,{placeholder:"Nom de la catgorie",value:M,onChange:Q=>D(Q.target.value)}),s.jsxs(gd,{children:[s.jsx(ae,{variant:"outline",onClick:()=>B(!1),children:"Annuler"}),s.jsx(ae,{onClick:async()=>{M.trim()&&(await v(M.trim()),D(""),B(!1))},disabled:!M.trim(),children:"Crer"})]})]})}),s.jsx(Sy,{open:!!z,onOpenChange:Q=>!Q&&Z(null),children:s.jsxs(Em,{children:[s.jsxs(Am,{children:[s.jsx(Tm,{children:"Supprimer ce client ?"}),s.jsxs(Rm,{children:["Cette action est irrversible. Le client  ",(se=e.find(Q=>Q.id===z))==null?void 0:se.company_name,"  et toutes ses donnes associes seront dfinitivement supprims."]})]}),s.jsxs(Om,{children:[s.jsx($m,{children:"Annuler"}),s.jsx(Mm,{onClick:Ge,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Supprimer"})]})]})})]})}function KNe(){const e=f5(),t=e.clients.length,r=e.clients.filter(i=>i.is_active).length,n=new Date().getFullYear(),a=e.projections.filter(i=>i.year===n).reduce((i,o)=>i+Number(o.projected_revenue||0),0);return e.isLoading?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"CRM  Clients"}),s.jsx("p",{className:"text-muted-foreground",children:"Gestion des clients, catgories et suivi commercial"})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[s.jsx(yt,{label:"Total Clients",value:t}),s.jsx(yt,{label:"Clients Actifs",value:r,trend:r>0?"up":"neutral"}),s.jsx(yt,{label:`CA ${n}`,value:`${(a/1e3).toFixed(0)} k`}),s.jsx(yt,{label:"Catgories",value:e.categories.length})]}),s.jsx(qNe,{clients:e.clients,projections:e.projections,deliveryFeeTiers:e.deliveryFeeTiers,paymentTermsOptions:e.paymentTermsOptions,deliveryMethods:e.deliveryMethods,categories:e.categories,onUpsertClient:e.upsertClient,onDeleteClient:e.deleteClient,onBulkImport:e.bulkImportClients,onUpsertProjection:e.upsertProjection,getClientProjections:e.getClientProjections,onAddDeliveryFee:e.addDeliveryFeeTier,onDeleteDeliveryFee:e.deleteDeliveryFeeTier,onAddPaymentTerm:e.addPaymentTerm,onDeletePaymentTerm:e.deletePaymentTerm,onAddDeliveryMethod:e.addDeliveryMethod,onDeleteDeliveryMethod:e.deleteDeliveryMethod,onAddCategory:e.addCategory,onDeleteCategory:e.deleteCategory,onUpdateCategory:e.updateCategory})]})}var O0="Popover",[Bz,m2e]=Un(O0,[Rd]),lp=Rd(),[YNe,Xo]=Bz(O0),Fz=e=>{const{__scopePopover:t,children:r,open:n,defaultOpen:a,onOpenChange:i,modal:o=!1}=e,l=lp(t),c=w.useRef(null),[u,d]=w.useState(!1),[f,h]=Jn({prop:n,defaultProp:a??!1,onChange:i,caller:O0});return s.jsx(ZS,{...l,children:s.jsx(YNe,{scope:t,contentId:Bi(),triggerRef:c,open:f,onOpenChange:h,onOpenToggle:w.useCallback(()=>h(m=>!m),[h]),hasCustomAnchor:u,onCustomAnchorAdd:w.useCallback(()=>d(!0),[]),onCustomAnchorRemove:w.useCallback(()=>d(!1),[]),modal:o,children:r})})};Fz.displayName=O0;var zz="PopoverAnchor",GNe=w.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=Xo(zz,r),i=lp(r),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=a;return w.useEffect(()=>(o(),()=>l()),[o,l]),s.jsx(ux,{...i,...n,ref:t})});GNe.displayName=zz;var Uz="PopoverTrigger",Vz=w.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=Xo(Uz,r),i=lp(r),o=ut(t,a.triggerRef),l=s.jsx(We.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":Yz(a.open),...n,ref:o,onClick:Te(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?l:s.jsx(ux,{asChild:!0,...i,children:l})});Vz.displayName=Uz;var TN="PopoverPortal",[XNe,QNe]=Bz(TN,{forceMount:void 0}),Wz=e=>{const{__scopePopover:t,forceMount:r,children:n,container:a}=e,i=Xo(TN,t);return s.jsx(XNe,{scope:t,forceMount:r,children:s.jsx(Zn,{present:r||i.open,children:s.jsx(qm,{asChild:!0,container:a,children:n})})})};Wz.displayName=TN;var vd="PopoverContent",Hz=w.forwardRef((e,t)=>{const r=QNe(vd,e.__scopePopover),{forceMount:n=r.forceMount,...a}=e,i=Xo(vd,e.__scopePopover);return s.jsx(Zn,{present:n||i.open,children:i.modal?s.jsx(ZNe,{...a,ref:t}):s.jsx(ePe,{...a,ref:t})})});Hz.displayName=vd;var JNe=Bl("PopoverContent.RemoveScroll"),ZNe=w.forwardRef((e,t)=>{const r=Xo(vd,e.__scopePopover),n=w.useRef(null),a=ut(t,n),i=w.useRef(!1);return w.useEffect(()=>{const o=n.current;if(o)return xN(o)},[]),s.jsx(w0,{as:JNe,allowPinchZoom:!0,children:s.jsx(qz,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Te(e.onCloseAutoFocus,o=>{var l;o.preventDefault(),i.current||(l=r.triggerRef.current)==null||l.focus()}),onPointerDownOutside:Te(e.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;i.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:Te(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),ePe=w.forwardRef((e,t)=>{const r=Xo(vd,e.__scopePopover),n=w.useRef(!1),a=w.useRef(!1);return s.jsx(qz,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((u=r.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),qz=w.forwardRef((e,t)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:d,...f}=e,h=Xo(vd,r),m=lp(r);return yN(),s.jsx(x0,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:s.jsx(Pd,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:d,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>h.onOpenChange(!1),children:s.jsx(eC,{"data-state":Yz(h.open),role:"dialog",id:h.contentId,...m,...f,ref:t,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Kz="PopoverClose",tPe=w.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=Xo(Kz,r);return s.jsx(We.button,{type:"button",...n,ref:t,onClick:Te(e.onClick,()=>a.onOpenChange(!1))})});tPe.displayName=Kz;var rPe="PopoverArrow",nPe=w.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=lp(r);return s.jsx(tC,{...a,...n,ref:t})});nPe.displayName=rPe;function Yz(e){return e?"open":"closed"}var aPe=Fz,iPe=Vz,sPe=Wz,Gz=Hz;const Xz=aPe,Qz=iPe,RN=w.forwardRef(({className:e,align:t="center",sideOffset:r=4,...n},a)=>s.jsx(sPe,{children:s.jsx(Gz,{ref:a,align:t,sideOffset:r,className:ue("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));RN.displayName=Gz.displayName;function oPe(){const{computed:e}=Ki(),{monthlyTreasuryProjection:t}=e;if(!t.months.length)return s.jsx(Ye,{title:"Plan de Trsorerie Mensuel",children:s.jsx("p",{className:"text-muted-foreground text-center py-8",children:"Aucune donne mensuelle disponible."})});const r=[...new Set(t.months.map(n=>n.year))];return s.jsx("div",{className:"space-y-6",children:r.map(n=>{const a=t.months.filter(i=>i.year===n);return s.jsx(Ye,{title:`Trsorerie ${n}`,children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-xs",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b",children:[s.jsx("th",{className:"text-left py-2 px-2",children:"Mois"}),s.jsx("th",{className:"text-right py-2 px-2",children:"Entres"}),s.jsx("th",{className:"text-right py-2 px-2",children:"Sorties"}),s.jsx("th",{className:"text-right py-2 px-2",children:"Solde"}),s.jsx("th",{className:"text-right py-2 px-2",children:"Trsorerie"})]})}),s.jsx("tbody",{children:a.map(i=>s.jsxs("tr",{className:ue("border-b",i.treasuryEnd<0&&"bg-destructive/5"),children:[s.jsx("td",{className:"py-1.5 px-2",children:i.monthName}),s.jsx("td",{className:"py-1.5 px-2 text-right font-mono-numbers",children:te(i.totalInflows,!0)}),s.jsx("td",{className:"py-1.5 px-2 text-right font-mono-numbers text-muted-foreground",children:te(i.totalOutflows,!0)}),s.jsxs("td",{className:ue("py-1.5 px-2 text-right font-mono-numbers",i.netCashFlow>=0?"text-[hsl(var(--positive))]":"text-destructive"),children:[i.netCashFlow>=0?"+":"",te(i.netCashFlow,!0)]}),s.jsx("td",{className:ue("py-1.5 px-2 text-right font-mono-numbers font-medium",i.treasuryEnd<0&&"text-destructive"),children:te(i.treasuryEnd,!0)})]},`${i.year}-${i.month}`))})]})})},n)})})}const dw={name:"",inputMode:"calculated",principalAmount:5e4,interestRate:.03,fixedPaymentAmount:0,startDate:{year:2025,month:0},endDate:{year:2028,month:0},frequency:"monthly"},fw={monthly:"Mensuel",quarterly:"Trimestriel",annual:"Annuel"},lPe={monthly:"/mois",quarterly:"/trim.",annual:"/an"};function cPe({loans:e,onChange:t,startYear:r,durationYears:n}){const[a,i]=w.useState(!1),[o,l]=w.useState(null),[c,u]=w.useState(dw),d=Array.from({length:n+2},(v,x)=>r+x),f=()=>{l(null),u({...dw,startDate:{year:r,month:0},endDate:{year:r+3,month:0}}),i(!0)},h=v=>{l(v.id);const{id:x,...b}=v;u({...dw,...b}),i(!0)},m=()=>{c.name.trim()&&(t(o?e.map(v=>v.id===o?{...v,...c}:v):[...e,{id:`loan-${Date.now()}`,...c}]),i(!1))},y=v=>{t(e.filter(x=>x.id!==v))},g=v=>{if(v.inputMode==="fixed")return v.fixedPaymentAmount||0;const x=v.startDate.year*12+v.startDate.month,_=v.endDate.year*12+v.endDate.month-x;if(_<=0)return 0;if(v.frequency==="annual"){const S=Math.max(1,Math.round(_/12)),C=v.interestRate;return C===0?v.principalAmount/S:v.principalAmount*C*Math.pow(1+C,S)/(Math.pow(1+C,S)-1)}if(v.frequency==="quarterly"){const S=Math.max(1,Math.round(_/3)),C=v.interestRate/4;return C===0?v.principalAmount/S:v.principalAmount*C*Math.pow(1+C,S)/(Math.pow(1+C,S)-1)}const j=v.interestRate/12;return j===0?v.principalAmount/_:v.principalAmount*j*Math.pow(1+j,_)/(Math.pow(1+j,_)-1)},p=v=>{const x=g(v),b=v.startDate.year*12+v.startDate.month,j=v.endDate.year*12+v.endDate.month-b;return j<=0?0:v.frequency==="annual"?x*Math.max(1,Math.round(j/12)):v.frequency==="quarterly"?x*Math.max(1,Math.round(j/3)):x*j};return s.jsxs(s.Fragment,{children:[s.jsx(Ye,{title:"Gestion des Prts",action:s.jsxs(ae,{variant:"outline",size:"sm",onClick:f,children:[s.jsx(ar,{className:"h-4 w-4 mr-1"}),"Ajouter un Prt"]}),children:e.length===0?s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(UW,{className:"h-10 w-10 mx-auto mb-3 opacity-40"}),s.jsx("p",{children:"Aucun prt configur"}),s.jsx("p",{className:"text-xs mt-1",children:"Ajoutez vos prts pour intgrer les chances dans le plan de trsorerie."})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Ht,{children:[s.jsx(qt,{children:s.jsxs(_e,{children:[s.jsx(ie,{children:"Nom"}),s.jsx(ie,{children:"Mode"}),s.jsx(ie,{className:"text-right",children:"Capital"}),s.jsx(ie,{className:"text-right",children:"Taux"}),s.jsx(ie,{children:"Frquence"}),s.jsx(ie,{children:"Priode"}),s.jsx(ie,{className:"text-right",children:"chance"}),s.jsx(ie,{className:"text-right",children:"Cot Total"}),s.jsx(ie,{})]})}),s.jsx(Kt,{children:e.map(v=>{const x=g(v),b=p(v);return s.jsxs(_e,{children:[s.jsx(W,{className:"font-medium",children:v.name}),s.jsx(W,{children:s.jsx(Oe,{variant:"outline",className:"text-xs",children:v.inputMode==="fixed"?s.jsxs(s.Fragment,{children:[s.jsx(pk,{className:"h-3 w-3 mr-1"}),"Fixe"]}):s.jsxs(s.Fragment,{children:[s.jsx(ev,{className:"h-3 w-3 mr-1"}),"Calcul"]})})}),s.jsx(W,{className:"text-right font-mono-numbers",children:v.inputMode==="calculated"?te(v.principalAmount,!0):"-"}),s.jsx(W,{className:"text-right font-mono-numbers",children:v.inputMode==="calculated"?`${(v.interestRate*100).toFixed(1)}%`:"-"}),s.jsx(W,{children:s.jsx(Oe,{variant:"secondary",className:"text-xs",children:fw[v.frequency]})}),s.jsxs(W,{className:"text-xs",children:[gl[v.startDate.month].slice(0,3)," ",v.startDate.year,"  ",gl[v.endDate.month].slice(0,3)," ",v.endDate.year]}),s.jsxs(W,{className:"text-right font-mono-numbers font-medium",children:[te(x),s.jsx("span",{className:"text-xs text-muted-foreground ml-1",children:lPe[v.frequency]})]}),s.jsx(W,{className:"text-right font-mono-numbers text-muted-foreground",children:te(b,!0)}),s.jsx(W,{children:s.jsxs("div",{className:"flex gap-1",children:[s.jsx(ae,{size:"sm",variant:"ghost",onClick:()=>h(v),children:s.jsx(ix,{className:"h-3 w-3"})}),s.jsx(ae,{size:"sm",variant:"ghost",className:"text-destructive",onClick:()=>y(v.id),children:s.jsx(hr,{className:"h-3 w-3"})})]})})]},v.id)})})]})})}),s.jsx(Cr,{open:a,onOpenChange:i,children:s.jsxs(vr,{className:"max-w-lg",children:[s.jsx(yr,{children:s.jsx(xr,{children:o?"Modifier le Prt":"Nouveau Prt"})}),s.jsxs("div",{className:"space-y-4 py-2",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ne,{children:"Nom du prt"}),s.jsx(be,{value:c.name,onChange:v=>u(x=>({...x,name:v.target.value})),placeholder:"Ex: BPI Innovation"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ne,{children:"Mode de saisie"}),s.jsx(xi,{value:c.inputMode,onValueChange:v=>u(x=>({...x,inputMode:v})),children:s.jsxs(Fa,{className:"w-full",children:[s.jsxs(At,{value:"calculated",className:"flex-1",children:[s.jsx(ev,{className:"h-4 w-4 mr-1"}),"Calculer l'chance"]}),s.jsxs(At,{value:"fixed",className:"flex-1",children:[s.jsx(pk,{className:"h-4 w-4 mr-1"}),"Saisir l'chance"]})]})})]}),c.inputMode==="calculated"&&s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ne,{children:"Montant emprunt ()"}),s.jsx(be,{type:"number",value:c.principalAmount,onChange:v=>u(x=>({...x,principalAmount:Number(v.target.value)}))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ne,{children:"Taux d'intrt annuel (%)"}),s.jsx(be,{type:"number",step:"0.1",value:(c.interestRate*100).toFixed(1),onChange:v=>u(x=>({...x,interestRate:Number(v.target.value)/100}))})]})]}),c.inputMode==="fixed"&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ne,{children:"Montant de l'chance ()"}),s.jsx(be,{type:"number",value:c.fixedPaymentAmount||0,onChange:v=>u(x=>({...x,fixedPaymentAmount:Number(v.target.value)})),placeholder:"Montant fixe par priode"}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Ce montant sera appliqu  chaque chance (",fw[c.frequency].toLowerCase(),")."]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ne,{children:"Frquence des chances"}),s.jsxs(st,{value:c.frequency,onValueChange:v=>u(x=>({...x,frequency:v})),children:[s.jsx(at,{children:s.jsx(ot,{})}),s.jsxs(it,{children:[s.jsx(Le,{value:"monthly",children:"Mensuel"}),s.jsx(Le,{value:"quarterly",children:"Trimestriel"}),s.jsx(Le,{value:"annual",children:"Annuel"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ne,{children:"Date de dbut"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(st,{value:c.startDate.month.toString(),onValueChange:v=>u(x=>({...x,startDate:{...x.startDate,month:Number(v)}})),children:[s.jsx(at,{className:"flex-1",children:s.jsx(ot,{})}),s.jsx(it,{children:gl.map((v,x)=>s.jsx(Le,{value:x.toString(),children:v.slice(0,3)},x))})]}),s.jsxs(st,{value:c.startDate.year.toString(),onValueChange:v=>u(x=>({...x,startDate:{...x.startDate,year:Number(v)}})),children:[s.jsx(at,{className:"w-24",children:s.jsx(ot,{})}),s.jsx(it,{children:d.map(v=>s.jsx(Le,{value:v.toString(),children:v},v))})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ne,{children:"Date de fin"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(st,{value:c.endDate.month.toString(),onValueChange:v=>u(x=>({...x,endDate:{...x.endDate,month:Number(v)}})),children:[s.jsx(at,{className:"flex-1",children:s.jsx(ot,{})}),s.jsx(it,{children:gl.map((v,x)=>s.jsx(Le,{value:x.toString(),children:v.slice(0,3)},x))})]}),s.jsxs(st,{value:c.endDate.year.toString(),onValueChange:v=>u(x=>({...x,endDate:{...x.endDate,year:Number(v)}})),children:[s.jsx(at,{className:"w-24",children:s.jsx(ot,{})}),s.jsx(it,{children:d.map(v=>s.jsx(Le,{value:v.toString(),children:v},v))})]})]})]})]}),c.name.trim()&&s.jsxs("div",{className:"p-3 rounded-lg bg-muted/40 border text-sm space-y-1",children:[s.jsx("div",{className:"font-medium",children:"Aperu"}),s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{className:"text-muted-foreground",children:["chance ",fw[c.frequency].toLowerCase()," :"]}),s.jsx("span",{className:"font-mono-numbers font-medium",children:te(g({id:"",...c}))})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Cot total :"}),s.jsx("span",{className:"font-mono-numbers",children:te(p({id:"",...c}),!0)})]})]})]}),s.jsxs(gd,{children:[s.jsx(ae,{variant:"outline",onClick:()=>i(!1),children:"Annuler"}),s.jsx(ae,{onClick:m,disabled:!c.name.trim(),children:"Sauvegarder"})]})]})})]})}function uPe({capexPayments:e,onChange:t,products:r,startYear:n,durationYears:a}){const i=Array.from({length:a},(f,h)=>n+h),o=w.useMemo(()=>{const f=new Map;return e.forEach(h=>{const m=f.get(h.productId)||[];m.push(h),f.set(h.productId,m)}),f},[e]),l=r.filter(f=>f.devCost>0),c=f=>{const m=e.filter(v=>v.productId===f.id).reduce((v,x)=>v+x.percentageOfTotal,0),y=Math.max(0,100-m),g=Math.min(y,25),p={id:`capex-${Date.now()}`,productId:f.id,productName:f.name,year:f.launchYear,month:0,percentageOfTotal:g,amount:f.devCost*g/100};t([...e,p])},u=(f,h)=>{t(e.map(m=>{if(m.id!==f)return m;const y={...m,...h},g=r.find(p=>p.id===y.productId);return g&&(y.amount=g.devCost*y.percentageOfTotal/100),y}))},d=f=>{t(e.filter(h=>h.id!==f))};return s.jsx(Ye,{title:"Dblocage CAPEX Produits",children:l.length===0?s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(Fl,{className:"h-10 w-10 mx-auto mb-3 opacity-40"}),s.jsx("p",{children:"Aucun produit avec cot de dveloppement"})]}):s.jsx("div",{className:"space-y-6",children:l.map(f=>{const h=o.get(f.id)||[],m=h.reduce((y,g)=>y+g.percentageOfTotal,0);return h.reduce((y,g)=>y+g.amount,0),s.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:f.name}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["R&D : ",te(f.devCost,!0),"  Lancement : ",f.launchYear]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(Oe,{variant:m===100?"default":"secondary",children:[m,"% planifi"]}),s.jsxs(ae,{size:"sm",variant:"outline",onClick:()=>c(f),disabled:m>=100,children:[s.jsx(ar,{className:"h-3 w-3 mr-1"}),"Tranche"]})]})]}),h.length>0&&s.jsxs(Ht,{children:[s.jsx(qt,{children:s.jsxs(_e,{children:[s.jsx(ie,{children:"Mois"}),s.jsx(ie,{children:"Anne"}),s.jsx(ie,{className:"text-right",children:"% du total"}),s.jsx(ie,{className:"text-right",children:"Montant"}),s.jsx(ie,{})]})}),s.jsx(Kt,{children:h.map(y=>s.jsxs(_e,{children:[s.jsx(W,{children:s.jsxs(st,{value:y.month.toString(),onValueChange:g=>u(y.id,{month:Number(g)}),children:[s.jsx(at,{className:"h-8 w-28",children:s.jsx(ot,{})}),s.jsx(it,{children:gl.map((g,p)=>s.jsx(Le,{value:p.toString(),children:g},p))})]})}),s.jsx(W,{children:s.jsxs(st,{value:y.year.toString(),onValueChange:g=>u(y.id,{year:Number(g)}),children:[s.jsx(at,{className:"h-8 w-20",children:s.jsx(ot,{})}),s.jsx(it,{children:i.map(g=>s.jsx(Le,{value:g.toString(),children:g},g))})]})}),s.jsx(W,{className:"text-right",children:s.jsx(be,{type:"number",className:"h-8 w-20 text-right ml-auto",value:y.percentageOfTotal,min:1,max:100,onChange:g=>u(y.id,{percentageOfTotal:Number(g.target.value)})})}),s.jsx(W,{className:"text-right font-mono-numbers font-medium",children:te(y.amount,!0)}),s.jsx(W,{children:s.jsx(ae,{size:"sm",variant:"ghost",className:"text-destructive",onClick:()=>d(y.id),children:s.jsx(hr,{className:"h-3 w-3"})})})]},y.id))})]}),h.length===0&&s.jsx("p",{className:"text-xs text-muted-foreground text-center py-2",children:"Aucune tranche planifie. Le CAPEX sera considr  l'anne de lancement."})]},f.id)})})})}var T0="Checkbox",[dPe,p2e]=Un(T0),[fPe,MN]=dPe(T0);function hPe(e){const{__scopeCheckbox:t,checked:r,children:n,defaultChecked:a,disabled:i,form:o,name:l,onCheckedChange:c,required:u,value:d="on",internal_do_not_use_render:f}=e,[h,m]=Jn({prop:r,defaultProp:a??!1,onChange:c,caller:T0}),[y,g]=w.useState(null),[p,v]=w.useState(null),x=w.useRef(!1),b=y?!!o||!!y.closest("form"):!0,_={checked:h,disabled:i,setChecked:m,control:y,setControl:g,name:l,form:o,value:d,hasConsumerStoppedPropagationRef:x,required:u,defaultChecked:ko(a)?!1:a,isFormControl:b,bubbleInput:p,setBubbleInput:v};return s.jsx(fPe,{scope:t,..._,children:mPe(f)?f(_):n})}var Jz="CheckboxTrigger",Zz=w.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:r,...n},a)=>{const{control:i,value:o,disabled:l,checked:c,required:u,setControl:d,setChecked:f,hasConsumerStoppedPropagationRef:h,isFormControl:m,bubbleInput:y}=MN(Jz,e),g=ut(a,d),p=w.useRef(c);return w.useEffect(()=>{const v=i==null?void 0:i.form;if(v){const x=()=>f(p.current);return v.addEventListener("reset",x),()=>v.removeEventListener("reset",x)}},[i,f]),s.jsx(We.button,{type:"button",role:"checkbox","aria-checked":ko(c)?"mixed":c,"aria-required":u,"data-state":aU(c),"data-disabled":l?"":void 0,disabled:l,value:o,...n,ref:g,onKeyDown:Te(t,v=>{v.key==="Enter"&&v.preventDefault()}),onClick:Te(r,v=>{f(x=>ko(x)?!0:!x),y&&m&&(h.current=v.isPropagationStopped(),h.current||v.stopPropagation())})})});Zz.displayName=Jz;var $N=w.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:n,checked:a,defaultChecked:i,required:o,disabled:l,value:c,onCheckedChange:u,form:d,...f}=e;return s.jsx(hPe,{__scopeCheckbox:r,checked:a,defaultChecked:i,disabled:l,required:o,onCheckedChange:u,name:n,form:d,value:c,internal_do_not_use_render:({isFormControl:h})=>s.jsxs(s.Fragment,{children:[s.jsx(Zz,{...f,ref:t,__scopeCheckbox:r}),h&&s.jsx(nU,{__scopeCheckbox:r})]})})});$N.displayName=T0;var eU="CheckboxIndicator",tU=w.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:n,...a}=e,i=MN(eU,r);return s.jsx(Zn,{present:n||ko(i.checked)||i.checked===!0,children:s.jsx(We.span,{"data-state":aU(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});tU.displayName=eU;var rU="CheckboxBubbleInput",nU=w.forwardRef(({__scopeCheckbox:e,...t},r)=>{const{control:n,hasConsumerStoppedPropagationRef:a,checked:i,defaultChecked:o,required:l,disabled:c,name:u,value:d,form:f,bubbleInput:h,setBubbleInput:m}=MN(rU,e),y=ut(r,m),g=xx(i),p=cx(n);w.useEffect(()=>{const x=h;if(!x)return;const b=window.HTMLInputElement.prototype,j=Object.getOwnPropertyDescriptor(b,"checked").set,S=!a.current;if(g!==i&&j){const C=new Event("click",{bubbles:S});x.indeterminate=ko(i),j.call(x,ko(i)?!1:i),x.dispatchEvent(C)}},[h,g,i,a]);const v=w.useRef(ko(i)?!1:i);return s.jsx(We.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??v.current,required:l,disabled:c,name:u,value:d,form:f,...t,tabIndex:-1,ref:y,style:{...t.style,...p,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});nU.displayName=rU;function mPe(e){return typeof e=="function"}function ko(e){return e==="indeterminate"}function aU(e){return ko(e)?"indeterminate":e?"checked":"unchecked"}const hi=w.forwardRef(({className:e,...t},r)=>s.jsx($N,{ref:r,className:ue("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:s.jsx(tU,{className:ue("flex items-center justify-center text-current"),children:s.jsx(So,{className:"h-4 w-4"})})}));hi.displayName=$N.displayName;const sg=[{key:"ca",name:"CA",color:"hsl(150, 60%, 40%)",type:"bar",defaultVisible:!1},{key:"cogs",name:"Achats matire",color:"hsl(38, 92%, 50%)",type:"bar",defaultVisible:!0},{key:"payroll",name:"Masse salariale",color:"hsl(210, 70%, 50%)",type:"bar",defaultVisible:!0},{key:"opex",name:"OPEX",color:"hsl(280, 60%, 50%)",type:"bar",defaultVisible:!0},{key:"capex",name:"CAPEX",color:"hsl(0, 0%, 45%)",type:"bar",defaultVisible:!0},{key:"loans",name:"chances prts",color:"hsl(0, 85%, 50%)",type:"bar",defaultVisible:!0},{key:"tresorerie",name:"Trsorerie",color:"hsl(150, 60%, 40%)",type:"line",defaultVisible:!0},{key:"cashFlow",name:"Cash Flow",color:"hsl(210, 90%, 55%)",type:"line",defaultVisible:!1}];function pPe({projection:e,startYear:t,durationYears:r}){const[n,a]=w.useState("annual"),[i,o]=w.useState(t),[l,c]=w.useState(()=>new Set(sg.filter(p=>p.defaultVisible).map(p=>p.key))),u=Array.from({length:r},(p,v)=>t+v),d=p=>{c(v=>{const x=new Set(v);return x.has(p)?x.delete(p):x.add(p),x})},f=w.useMemo(()=>{const p=Id(e.months);return u.map(v=>{const x=p.get(v);if(!x)return{label:v.toString(),ca:0,cogs:0,payroll:0,opex:0,capex:0,loans:0,tresorerie:0,cashFlow:0};const _=e.months.filter(S=>S.year===v).reduce((S,C)=>S+C.capexPayments,0),j=x.loanPayments;return{label:v.toString(),ca:x.revenue/1e3,cogs:x.cogs/1e3,payroll:x.payroll/1e3,opex:x.opex/1e3,capex:_/1e3,loans:j/1e3,tresorerie:x.treasuryEnd/1e3,cashFlow:x.netCashFlow/1e3}})},[e,u]),h=w.useMemo(()=>e.months.filter(p=>p.year===i).map(p=>({label:p.monthName.slice(0,3),ca:p.revenue/1e3,cogs:p.cogs/1e3,payroll:p.payroll/1e3,opex:p.opex/1e3,capex:p.capexPayments/1e3,loans:p.loanPayments/1e3,tresorerie:p.treasuryEnd/1e3,cashFlow:p.netCashFlow/1e3})),[e,i]),m=n==="annual"?h:f,y=sg.filter(p=>p.type==="bar"&&l.has(p.key)),g=sg.filter(p=>p.type==="line"&&l.has(p.key));return s.jsx(Ye,{title:"Suivi de Trsorerie Dtaill",action:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(Xz,{children:[s.jsx(Qz,{asChild:!0,children:s.jsxs(ae,{variant:"outline",size:"sm",children:[s.jsx(Mu,{className:"h-3.5 w-3.5 mr-1"}),"Sries"]})}),s.jsxs(RN,{className:"w-56",align:"end",children:[s.jsx("p",{className:"text-xs font-medium mb-2",children:"Sries affiches"}),s.jsx("div",{className:"space-y-2",children:sg.map(p=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(hi,{id:`series-${p.key}`,checked:l.has(p.key),onCheckedChange:()=>d(p.key)}),s.jsx("div",{className:"w-3 h-3 rounded-sm flex-shrink-0",style:{backgroundColor:p.color}}),s.jsx(Ne,{htmlFor:`series-${p.key}`,className:"text-xs cursor-pointer",children:p.name})]},p.key))})]})]}),s.jsxs(st,{value:n,onValueChange:p=>a(p),children:[s.jsx(at,{className:"h-8 w-40",children:s.jsx(ot,{})}),s.jsxs(it,{children:[s.jsx(Le,{value:"full-period",children:"Toute la priode"}),s.jsx(Le,{value:"annual",children:"Vue annuelle"})]})]}),n==="annual"&&s.jsxs(st,{value:i.toString(),onValueChange:p=>o(Number(p)),children:[s.jsx(at,{className:"h-8 w-24",children:s.jsx(ot,{})}),s.jsx(it,{children:u.map(p=>s.jsx(Le,{value:p.toString(),children:p},p))})]})]}),children:s.jsx("div",{className:"h-80",children:s.jsx(Wr,{width:"100%",height:"100%",children:s.jsxs(md,{data:m,children:[s.jsx(qr,{strokeDasharray:"3 3"}),s.jsx(mr,{dataKey:"label"}),s.jsx(nr,{tickFormatter:p=>`${p}k`}),s.jsx($t,{formatter:p=>`${p.toFixed(0)}k`}),s.jsx(Vr,{}),y.map(p=>s.jsx(rr,{dataKey:p.key,name:p.name,stackId:"costs",fill:p.color},p.key)),g.map(p=>s.jsx(Dn,{type:"monotone",dataKey:p.key,name:p.name,stroke:p.color,strokeWidth:3,dot:{r:4}},p.key))]})})})})}function gPe({projection:e,startYear:t,durationYears:r}){const[n,a]=w.useState("annual"),[i,o]=w.useState(t),l=Array.from({length:r},(f,h)=>t+h),c=w.useMemo(()=>Id(e.months),[e]),u=w.useMemo(()=>e.months.filter(f=>f.year===i),[e,i]),d=(f,h,m,y)=>s.jsxs(_e,{className:m,children:[s.jsx(W,{className:"sticky left-0 bg-background z-10 font-medium",children:f}),h.map((g,p)=>s.jsx(W,{className:ue("text-right font-mono-numbers",y&&g>0&&"text-destructive"),children:y&&g>0?`(${te(g,!0)})`:te(g,!0)},p))]});if(n==="monthly"){const f=u;return s.jsx(Ye,{title:"Dtail Prvisionnel",action:s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(st,{value:n,onValueChange:h=>a(h),children:[s.jsx(at,{className:"h-8 w-36",children:s.jsx(ot,{})}),s.jsxs(it,{children:[s.jsx(Le,{value:"annual",children:"Par anne"}),s.jsx(Le,{value:"monthly",children:"Par mois"})]})]}),s.jsxs(st,{value:i.toString(),onValueChange:h=>o(Number(h)),children:[s.jsx(at,{className:"h-8 w-24",children:s.jsx(ot,{})}),s.jsx(it,{children:l.map(h=>s.jsx(Le,{value:h.toString(),children:h},h))})]})]}),children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Ht,{children:[s.jsx(qt,{children:s.jsxs(_e,{children:[s.jsx(ie,{className:"sticky left-0 bg-background z-10",children:"Poste"}),f.map(h=>s.jsx(ie,{className:"text-right min-w-20",children:gl[h.month].slice(0,3)},h.month))]})}),s.jsxs(Kt,{children:[d("CA (encaissements)",f.map(h=>h.revenue),"bg-muted/30"),d("Achats matire (COGS)",f.map(h=>h.cogs),"",!0),d("Masse salariale",f.map(h=>h.payroll),"",!0),d("OPEX",f.map(h=>h.opex),"",!0),d("Charges variables",f.map(h=>h.variableCharges),"",!0),d("chances prts",f.map(h=>h.loanPayments),"",!0),d("CAPEX produits",f.map(h=>h.capexPayments),"",!0),s.jsxs(_e,{className:"border-t-2",children:[s.jsx(W,{className:"sticky left-0 bg-background z-10 font-bold",children:"Cash Flow Net"}),f.map((h,m)=>s.jsxs(W,{className:ue("text-right font-mono-numbers font-bold",h.netCashFlow<0?"text-destructive":"text-green-600"),children:[h.netCashFlow>=0?"+":"",te(h.netCashFlow,!0)]},m))]}),s.jsxs(_e,{className:"bg-primary/5",children:[s.jsx(W,{className:"sticky left-0 bg-primary/5 z-10 font-bold",children:"Trsorerie Fin"}),f.map((h,m)=>s.jsx(W,{className:ue("text-right font-mono-numbers font-bold",h.treasuryEnd<0&&"text-destructive"),children:te(h.treasuryEnd,!0)},m))]})]})]})})})}return s.jsx(Ye,{title:"Dtail Prvisionnel",action:s.jsxs(st,{value:n,onValueChange:f=>a(f),children:[s.jsx(at,{className:"h-8 w-36",children:s.jsx(ot,{})}),s.jsxs(it,{children:[s.jsx(Le,{value:"annual",children:"Par anne"}),s.jsx(Le,{value:"monthly",children:"Par mois"})]})]}),children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Ht,{children:[s.jsx(qt,{children:s.jsxs(_e,{children:[s.jsx(ie,{className:"sticky left-0 bg-background z-10",children:"Poste"}),l.map(f=>s.jsx(ie,{className:"text-right min-w-24",children:f},f))]})}),s.jsxs(Kt,{children:[d("CA (encaissements)",l.map(f=>{var h;return((h=c.get(f))==null?void 0:h.revenue)||0}),"bg-muted/30"),d("Achats matire (COGS)",l.map(f=>{var h;return((h=c.get(f))==null?void 0:h.cogs)||0}),"",!0),d("Masse salariale",l.map(f=>{var h;return((h=c.get(f))==null?void 0:h.payroll)||0}),"",!0),d("OPEX",l.map(f=>{var h;return((h=c.get(f))==null?void 0:h.opex)||0}),"",!0),d("Charges variables",l.map(f=>{var h;return((h=c.get(f))==null?void 0:h.variableCharges)||0}),"",!0),d("chances prts",l.map(f=>{var h;return((h=c.get(f))==null?void 0:h.loanPayments)||0}),"",!0),d("CAPEX produits",l.map(f=>e.months.filter(m=>m.year===f).reduce((m,y)=>m+y.capexPayments,0)),"",!0),d("Leves de fonds",l.map(f=>{var h;return((h=c.get(f))==null?void 0:h.fundingInjection)||0}),"bg-green-50 dark:bg-green-950/20"),s.jsxs(_e,{className:"border-t-2",children:[s.jsx(W,{className:"sticky left-0 bg-background z-10 font-bold",children:"Cash Flow Net"}),l.map(f=>{const h=c.get(f),m=(h==null?void 0:h.netCashFlow)||0;return s.jsxs(W,{className:ue("text-right font-mono-numbers font-bold",m<0?"text-destructive":"text-green-600"),children:[m>=0?"+":"",te(m,!0)]},f)})]}),s.jsxs(_e,{className:"bg-primary/5",children:[s.jsx(W,{className:"sticky left-0 bg-primary/5 z-10 font-bold",children:"Trsorerie Fin"}),l.map(f=>{const h=c.get(f),m=(h==null?void 0:h.treasuryEnd)||0;return s.jsx(W,{className:ue("text-right font-mono-numbers font-bold",m<0&&"text-destructive"),children:te(m,!0)},f)})]})]})]})})})}const DT=["Jan","Fv","Mar","Avr","Mai","Jun","Jul","Ao","Sep","Oct","Nov","Dc"];function LT({title:e,description:t,seasonality:r,onChange:n}){const a=(d,f)=>{n({...r,[d]:f})},i=()=>{n({0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0})},o=Object.values(r).map(d=>1+d),l=o.reduce((d,f)=>d+f,0),c=l>0?o.map(d=>d/l*12):Array(12).fill(1),u=Object.values(r).every(d=>d===0);return s.jsxs(Ye,{title:e,action:s.jsxs("div",{className:"flex items-center gap-2",children:[u&&s.jsx(Oe,{variant:"secondary",className:"text-xs",children:"Rpartition uniforme"}),s.jsxs(ae,{variant:"ghost",size:"sm",onClick:i,disabled:u,children:[s.jsx(QW,{className:"h-3.5 w-3.5 mr-1"}),"Rinitialiser"]})]}),children:[t&&s.jsx("p",{className:"text-xs text-muted-foreground mb-4",children:t}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-x-6 gap-y-4",children:Array.from({length:12},(d,f)=>f).map(d=>{const f=r[d]||0,m=(c[d]/12*100).toFixed(1);return s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Ne,{className:"text-xs",children:DT[d]}),s.jsxs("span",{className:ue("text-xs font-mono-numbers",f>0?"text-[hsl(var(--positive))]":f<0?"text-destructive":"text-muted-foreground"),children:[f>0?"+":"",(f*100).toFixed(0),"%"]})]}),s.jsx(Ir,{value:[f*100],onValueChange:([y])=>a(d,y/100),min:-80,max:200,step:5}),s.jsxs("div",{className:"text-[10px] text-muted-foreground text-right",children:[" ",m,"% annuel"]})]},d)})}),s.jsx("div",{className:"mt-4 flex gap-0.5 h-8 rounded overflow-hidden",children:c.map((d,f)=>s.jsx("div",{className:"flex items-end justify-center transition-all",style:{flex:d,backgroundColor:`hsl(var(--primary) / ${.3+d/Math.max(...c)*.7})`},children:s.jsx("span",{className:"text-[9px] font-mono-numbers text-primary-foreground/80",children:DT[f]})},f))})]})}function vPe({terms:e,onChange:t}){const r=e.reduce((l,c)=>l+c.percentage,0),n=Math.abs(r-100)<.1,a=()=>{const l=Math.max(0,100-r),c=e.length>0?Math.max(...e.map(u=>u.delayMonths))+1:0;t([...e,{delayMonths:c,percentage:l}])},i=l=>{t(e.filter((c,u)=>u!==l))},o=(l,c,u)=>{const d=e.map((f,h)=>h===l?{...f,[c]:u}:f);t(d)};return s.jsxs(Ye,{title:"Conditions de Paiement Fournisseur",action:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(Oe,{variant:n?"default":"destructive",className:"text-xs",children:["Total: ",r.toFixed(0),"%"]}),s.jsxs(ae,{variant:"outline",size:"sm",onClick:a,children:[s.jsx(ar,{className:"h-3.5 w-3.5 mr-1"}),"Ajouter chance"]})]}),children:[s.jsx("p",{className:"text-xs text-muted-foreground mb-4",children:"Dfinissez comment les achats matire sont pays. Chaque ligne indique le dcalage en mois et le pourcentage du montant total."}),e.length===0?s.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Aucune condition configure  paiement comptant par dfaut."}):s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-[1fr_1fr_auto] gap-3 items-end",children:[s.jsx(Ne,{className:"text-xs",children:"Dlai (mois)"}),s.jsx(Ne,{className:"text-xs",children:"% du paiement"}),s.jsx("div",{className:"w-8"})]}),e.map((l,c)=>s.jsxs("div",{className:"grid grid-cols-[1fr_1fr_auto] gap-3 items-center",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-xs text-muted-foreground whitespace-nowrap",children:"M+"}),s.jsx(be,{type:"number",min:0,max:12,value:l.delayMonths,onChange:u=>o(c,"delayMonths",parseInt(u.target.value)||0),className:"h-8 text-sm"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(be,{type:"number",min:0,max:100,step:5,value:l.percentage,onChange:u=>o(c,"percentage",parseFloat(u.target.value)||0),className:ue("h-8 text-sm",!n&&"border-destructive")}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"%"})]}),s.jsx(ae,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>i(c),children:s.jsx(hr,{className:"h-3.5 w-3.5 text-destructive"})})]},c))]}),!n&&e.length>0&&s.jsxs("p",{className:"text-xs text-destructive mt-3",children:[" Le total doit tre gal  100%. Actuellement : ",r.toFixed(0),"%."]}),e.length>0&&s.jsxs("div",{className:"mt-4 p-3 bg-muted/30 rounded-lg",children:[s.jsx(Ne,{className:"text-xs mb-2 block",children:"chancier de paiement"}),s.jsx("div",{className:"flex items-end gap-1 h-16",children:e.sort((l,c)=>l.delayMonths-c.delayMonths).map((l,c)=>s.jsxs("div",{className:"flex flex-col items-center flex-1",children:[s.jsx("div",{className:"w-full bg-primary/60 rounded-t transition-all",style:{height:`${l.percentage/100*48}px`}}),s.jsxs("span",{className:"text-[10px] text-muted-foreground mt-1",children:["M+",l.delayMonths]}),s.jsxs("span",{className:"text-[10px] font-bold font-mono-numbers",children:[l.percentage,"%"]})]},c))})]})]})}const hw=[{id:"grossMargin",name:"Marge Brute",description:"CA - Cot des ventes",calculate:e=>e.grossMargin,format:"currency",category:"margin",defaultVisible:!0},{id:"grossMarginRate",name:"Taux de Marge Brute",description:"Marge Brute / CA",calculate:e=>e.revenue>0?e.grossMargin/e.revenue:0,format:"percent",category:"margin",defaultVisible:!0},{id:"valueAdded",name:"Valeur Ajoute",description:"Marge Brute - Charges externes (OPEX hors salaires)",calculate:e=>e.grossMargin-e.opex,format:"currency",category:"margin",defaultVisible:!0},{id:"valueAddedRate",name:"Taux de Valeur Ajoute",description:"Valeur Ajoute / CA",calculate:e=>e.revenue>0?(e.grossMargin-e.opex)/e.revenue:0,format:"percent",category:"margin",defaultVisible:!1},{id:"ebitda",name:"EBITDA (EBE)",description:"Excdent Brut d'Exploitation",calculate:e=>e.ebitda,format:"currency",category:"profitability",defaultVisible:!0},{id:"ebitdaMargin",name:"Marge EBITDA",description:"EBITDA / CA",calculate:e=>e.revenue>0?e.ebitda/e.revenue:0,format:"percent",category:"profitability",defaultVisible:!0},{id:"operatingResult",name:"Rsultat d'Exploitation",description:"EBITDA - Amortissements",calculate:e=>e.operatingResult,format:"currency",category:"profitability",defaultVisible:!0},{id:"operatingMargin",name:"Marge Oprationnelle",description:"Rsultat d'Exploitation / CA",calculate:e=>e.revenue>0?e.operatingResult/e.revenue:0,format:"percent",category:"profitability",defaultVisible:!1},{id:"cashFlow",name:"Cash Flow Oprationnel",description:"CA - COGS - OPEX - Salaires - CAPEX",calculate:e=>e.cashFlow,format:"currency",category:"cash",defaultVisible:!0},{id:"freeCashFlow",name:"Free Cash Flow",description:"Cash Flow hors financement",calculate:e=>e.cashFlow,format:"currency",category:"cash",defaultVisible:!1},{id:"treasuryEnd",name:"Trsorerie Fin de Priode",description:"Position de trsorerie en fin d'anne",calculate:e=>e.treasuryEnd,format:"currency",category:"cash",defaultVisible:!0},{id:"cashBurn",name:"Cash Burn",description:"Consommation de trsorerie (si ngatif)",calculate:e=>e.cashFlow<0?Math.abs(e.cashFlow):0,format:"currency",category:"cash",defaultVisible:!1},{id:"payrollRatio",name:"Ratio Masse Salariale / CA",description:"Poids des salaires dans le CA",calculate:e=>e.revenue>0?e.payroll/e.revenue:0,format:"percent",category:"ratio",defaultVisible:!0},{id:"opexRatio",name:"Ratio OPEX / CA",description:"Poids des charges oprationnelles",calculate:e=>e.revenue>0?e.opex/e.revenue:0,format:"percent",category:"ratio",defaultVisible:!0},{id:"capexRatio",name:"Ratio CAPEX / CA",description:"Intensit capitalistique",calculate:e=>e.revenue>0?e.capex/e.revenue:0,format:"percent",category:"ratio",defaultVisible:!1},{id:"productivityRatio",name:"Productivit par ",description:"CA / Masse Salariale",calculate:e=>e.payroll>0?e.revenue/e.payroll:0,format:"currency",category:"ratio",defaultVisible:!1}],yPe=[{id:"kpis",label:"KPIs Prvisionnel",elementId:"previsionnel-kpis"},{id:"treasury",label:"volution Trsorerie",elementId:"previsionnel-treasury"},{id:"cashflow",label:"Cash Flow",elementId:"previsionnel-cashflow"},{id:"sig",label:"Tableau SIG",elementId:"previsionnel-sig"}],xPe=[{id:"monthly-kpis",label:"KPIs Trsorerie",elementId:"monthly-treasury-kpis"},{id:"monthly-chart",label:"Graphique Trsorerie",elementId:"monthly-treasury-chart"},{id:"monthly-summary",label:"Rsum",elementId:"monthly-treasury-summary"}],bPe={margin:"Marges",profitability:"Rentabilit",cash:"Trsorerie",ratio:"Ratios"};function wPe(){var P;const{state:e,computed:t,saveAll:r,updateMonthlyTreasuryConfig:n}=Ki(),[a,i]=w.useState(()=>{const N=new Set;return hw.forEach(E=>{E.defaultVisible&&N.add(E.id)}),N}),[o,l]=w.useState("annual"),{startYear:c,durationYears:u}=e.scenarioSettings,d=Array.from({length:u},(N,E)=>c+E),f=e.excludeFundingFromTreasury,{monthlyTreasuryProjection:h}=t,m=w.useMemo(()=>{const N=Id(h.months);return d.map(E=>{const A=N.get(E);if(!A)return{year:E,revenue:0,cogs:0,grossMargin:0,payroll:0,opex:0,capex:0,depreciation:0,ebitda:0,operatingResult:0,cashFlow:0,treasuryStart:0,treasuryEnd:0,fundingInjection:0};const T=t.treasuryProjection.years.find(O=>O.year===E),R=(T==null?void 0:T.capex)||0,k=(T==null?void 0:T.depreciation)||0;return{year:A.year,revenue:A.revenue,cogs:A.cogs,grossMargin:A.grossMargin,payroll:A.payroll,opex:A.opex,capex:R,depreciation:k,ebitda:A.ebitda,operatingResult:A.ebitda-k,cashFlow:A.netCashFlow,treasuryStart:A.treasuryStart,treasuryEnd:A.treasuryEnd,fundingInjection:A.fundingInjection}})},[h,t.treasuryProjection,d]),y=m.map(N=>({year:N.year,tresorerie:N.treasuryEnd/1e3,cashFlow:N.cashFlow/1e3,levee:N.fundingInjection/1e3})),g=m.map(N=>({year:N.year,ca:N.revenue/1e3,margeBrute:N.grossMargin/1e3,ebitda:N.ebitda/1e3,resultat:N.operatingResult/1e3})),p=m[0],v=m[m.length-1],x=m.reduce((N,E)=>N+E.cashFlow,0),b=((P=h.breakEvenMonth)==null?void 0:P.year)||null,_=h.minTreasury,j=N=>{i(E=>{const A=new Set(E);return A.has(N)?A.delete(N):A.add(N),A})},S=hw.filter(N=>a.has(N.id)),C=(N,E)=>E==="percent"?tn(N):te(N,!0);return s.jsx(Qi,{tabKey:"previsionnel",children:s.jsxs("div",{className:"space-y-6",children:[s.jsx(Rs,{image:"rd",title:"Prvisionnel Financier",subtitle:"Projections de trsorerie, cash flow et SIG",height:"sm"}),s.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 p-4 bg-muted/30 rounded-lg border",children:[s.jsxs("div",{className:"flex items-center gap-6",children:[s.jsx(xi,{value:o,onValueChange:N=>l(N),children:s.jsxs(Fa,{children:[s.jsxs(At,{value:"annual",className:"flex items-center gap-2",children:[s.jsx(EI,{className:"h-4 w-4"}),"Vue Annuelle"]}),s.jsxs(At,{value:"monthly",className:"flex items-center gap-2",children:[s.jsx(Sg,{className:"h-4 w-4"}),"Plan de Trsorerie"]}),s.jsxs(At,{value:"params",className:"flex items-center gap-2",children:[s.jsx(Mu,{className:"h-4 w-4"}),"Prts & CAPEX"]})]})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Mode CA :"}),s.jsx(Oe,{variant:e.revenueMode==="by-product"?"default":"secondary",children:e.revenueMode==="by-product"?"Par Produit":e.revenueMode==="by-channel-global"?"Global Canaux":"Par Client"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Oe,{variant:f?"outline":"default",className:"text-xs",children:f?"Leve dsactive":"Leve active"}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"(configurable dans Scnarios)"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(Oe,{variant:"outline",className:"text-xs",children:[u," annes  ",S.length," indicateurs actifs"]}),s.jsx(nf,{pageTitle:o==="monthly"?"Plan de Trsorerie Mensuel":"Prvisionnel Financier",sections:o==="monthly"?xPe:yPe,fileName:o==="monthly"?"Plan_Tresorerie_Mensuel":"Previsionnel_Financier"}),s.jsx(zd,{onSave:r,hasUnsavedChanges:e.hasUnsavedChanges,lastSaved:e.lastSaved?new Date(e.lastSaved):null})]})]}),o==="params"?s.jsxs("div",{className:"space-y-6",children:[s.jsx(cPe,{loans:e.monthlyTreasuryConfig.loans,onChange:N=>n({...e.monthlyTreasuryConfig,loans:N}),startYear:c,durationYears:u}),s.jsx(uPe,{capexPayments:e.monthlyTreasuryConfig.capexPayments,onChange:N=>n({...e.monthlyTreasuryConfig,capexPayments:N}),products:e.products,startYear:c,durationYears:u})]}):o==="monthly"?s.jsxs("div",{className:"space-y-6",children:[s.jsx(pPe,{projection:h,startYear:c,durationYears:u}),s.jsx(LT,{title:"Saisonnalit du CA",description:"Ajustez la rpartition mensuelle du chiffre d'affaires. Par dfaut, le CA est rparti uniformment (1/12e par mois).",seasonality:e.monthlyTreasuryConfig.revenueSeasonality,onChange:N=>n({...e.monthlyTreasuryConfig,revenueSeasonality:N})}),s.jsx(LT,{title:"Saisonnalit des Achats Matire",description:"Modulation mensuelle des achats. Les achats peuvent suivre la mme saisonnalit que le CA ou tre dcals (anticipation, stockage).",seasonality:e.monthlyTreasuryConfig.cogsSeasonality,onChange:N=>n({...e.monthlyTreasuryConfig,cogsSeasonality:N})}),s.jsx(vPe,{terms:e.monthlyTreasuryConfig.cogsPaymentTerms||[{delayMonths:0,percentage:100}],onChange:N=>n({...e.monthlyTreasuryConfig,cogsPaymentTerms:N})}),s.jsxs(Ye,{title:"Vrification Cohrence Annuelle",action:s.jsx(Oe,{variant:"outline",className:"text-xs",children:"Plan Produit vs Trsorerie"}),children:[s.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Vrifiez que la somme annuelle du CA et des achats matire correspond aux donnes du Plan Produit / moteur financier."}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-xs",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b",children:[s.jsx("th",{className:"text-left py-2 px-2",children:"Anne"}),s.jsx("th",{className:"text-right py-2 px-2",children:"CA Plan Produit"}),s.jsx("th",{className:"text-right py-2 px-2",children:"CA Trsorerie ( mois)"}),s.jsx("th",{className:"text-right py-2 px-2",children:"cart CA"}),s.jsx("th",{className:"text-right py-2 px-2",children:"Achats Plan Produit"}),s.jsx("th",{className:"text-right py-2 px-2",children:"Achats Trsorerie ( mois)"}),s.jsx("th",{className:"text-right py-2 px-2",children:"cart Achats"})]})}),s.jsx("tbody",{children:d.map(N=>{const E=t.revenueByYear.find(z=>z.year===N),A=(E==null?void 0:E.revenue)||0,T=(E==null?void 0:E.cogs)||0,R=h.months.filter(z=>z.year===N),k=R.reduce((z,Z)=>z+Z.revenue,0),O=R.reduce((z,Z)=>z+Z.cogs,0),M=k-A,D=O-T,L=Math.abs(M)<1,B=Math.abs(D)<T*.01+1;return s.jsxs("tr",{className:"border-b",children:[s.jsx("td",{className:"py-1.5 px-2 font-medium",children:N}),s.jsx("td",{className:"py-1.5 px-2 text-right font-mono-numbers",children:te(A,!0)}),s.jsx("td",{className:"py-1.5 px-2 text-right font-mono-numbers",children:te(k,!0)}),s.jsx("td",{className:ue("py-1.5 px-2 text-right font-mono-numbers",L?"text-[hsl(var(--positive))]":"text-destructive"),children:L?"":te(M,!0)}),s.jsx("td",{className:"py-1.5 px-2 text-right font-mono-numbers",children:te(T,!0)}),s.jsx("td",{className:"py-1.5 px-2 text-right font-mono-numbers",children:te(O,!0)}),s.jsx("td",{className:ue("py-1.5 px-2 text-right font-mono-numbers",B?"text-[hsl(var(--positive))]":"text-amber-600"),children:B?"":te(D,!0)})]},N)})})]})}),s.jsx("p",{className:"text-[10px] text-muted-foreground mt-2",children:"Note : les carts sur les achats peuvent tre normaux si des conditions de paiement avec dlais sont configures (report entre annes)."})]}),s.jsx(gPe,{projection:h,startYear:c,durationYears:u}),s.jsx(oPe,{})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",id:"previsionnel-kpis",children:[s.jsx(yt,{label:`CA ${(v==null?void 0:v.year)||""}`,value:te((v==null?void 0:v.revenue)||0,!0),subValue:`vs ${te((p==null?void 0:p.revenue)||0,!0)} en ${p==null?void 0:p.year}`,trend:"up"}),s.jsx(yt,{label:"Cash Flow Cumul",value:te(x,!0),subValue:`${p==null?void 0:p.year}-${v==null?void 0:v.year}`,trend:x>=0?"up":"down"}),s.jsx(yt,{label:"Trsorerie Min",value:te(_,!0),subValue:"Point bas projet",trend:_>=0?"neutral":"down"}),s.jsx(yt,{label:"Break-even",value:b?b.toString():"N/A",subValue:"Cash flow positif"})]}),s.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[s.jsx(Ye,{title:"volution de la Trsorerie",id:"previsionnel-treasury",children:s.jsx("div",{className:"h-72",children:s.jsx(Wr,{width:"100%",height:"100%",children:s.jsxs(md,{data:y,children:[s.jsx(qr,{strokeDasharray:"3 3"}),s.jsx(mr,{dataKey:"year"}),s.jsx(nr,{tickFormatter:N=>`${N}k`}),s.jsx($t,{formatter:N=>`${N.toFixed(0)}k`}),s.jsx(Vr,{}),s.jsx(ma,{type:"monotone",dataKey:"tresorerie",name:"Trsorerie",fill:"hsl(210, 70%, 50%)",fillOpacity:.3,stroke:"hsl(210, 70%, 50%)",strokeWidth:2}),s.jsx(rr,{dataKey:"levee",name:"Leve",fill:"hsl(150, 60%, 40%)"})]})})})}),s.jsx(Ye,{title:"Cash Flow Annuel",id:"previsionnel-cashflow",children:s.jsx("div",{className:"h-72",children:s.jsx(Wr,{width:"100%",height:"100%",children:s.jsxs(Ps,{data:y,children:[s.jsx(qr,{strokeDasharray:"3 3"}),s.jsx(mr,{dataKey:"year"}),s.jsx(nr,{tickFormatter:N=>`${N}k`}),s.jsx($t,{formatter:N=>`${N.toFixed(0)}k`}),s.jsx(rr,{dataKey:"cashFlow",name:"Cash Flow",fill:"hsl(0, 85%, 50%)"})]})})})})]}),s.jsx(Ye,{title:"Soldes Intermdiaires de Gestion",children:s.jsx("div",{className:"h-72",children:s.jsx(Wr,{width:"100%",height:"100%",children:s.jsxs(yF,{data:g,children:[s.jsx(qr,{strokeDasharray:"3 3"}),s.jsx(mr,{dataKey:"year"}),s.jsx(nr,{tickFormatter:N=>`${N}k`}),s.jsx($t,{formatter:N=>`${N.toFixed(0)}k`}),s.jsx(Vr,{}),s.jsx(Dn,{type:"monotone",dataKey:"ca",name:"CA",stroke:"hsl(210, 70%, 50%)",strokeWidth:2}),s.jsx(Dn,{type:"monotone",dataKey:"margeBrute",name:"Marge Brute",stroke:"hsl(150, 60%, 40%)",strokeWidth:2}),s.jsx(Dn,{type:"monotone",dataKey:"ebitda",name:"EBITDA",stroke:"hsl(38, 92%, 50%)",strokeWidth:2}),s.jsx(Dn,{type:"monotone",dataKey:"resultat",name:"Rs. Exploitation",stroke:"hsl(0, 85%, 50%)",strokeWidth:2})]})})})}),s.jsxs(Ye,{title:"Tableau des Indicateurs",id:"previsionnel-sig",action:s.jsxs(Xz,{children:[s.jsx(Qz,{asChild:!0,children:s.jsxs(ae,{variant:"outline",size:"sm",children:[s.jsx(Mu,{className:"h-4 w-4 mr-2"}),"Personnaliser"]})}),s.jsx(RN,{className:"w-80 max-h-96 overflow-y-auto",align:"end",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"font-medium text-sm",children:"Indicateurs visibles"}),Object.entries(bPe).map(([N,E])=>s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:E}),hw.filter(A=>A.category===N).map(A=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1 min-w-0 pr-2",children:[s.jsx(Ne,{htmlFor:A.id,className:"text-sm cursor-pointer",children:A.name}),s.jsx("p",{className:"text-xs text-muted-foreground truncate",children:A.description})]}),s.jsx(A0,{id:A.id,checked:a.has(A.id),onCheckedChange:()=>j(A.id)})]},A.id))]},N))]})})]}),children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Ht,{children:[s.jsx(qt,{children:s.jsxs(_e,{children:[s.jsx(ie,{className:"sticky left-0 bg-background z-10",children:"Indicateur"}),d.map(N=>s.jsx(ie,{className:"text-right min-w-24",children:N},N)),s.jsx(ie,{className:"text-right min-w-28",children:"volution"})]})}),s.jsx(Kt,{children:S.map(N=>{const E=m.map(k=>N.calculate(k)),A=E[0]||0,T=E[E.length-1]||0,R=A!==0?(T-A)/Math.abs(A):0;return s.jsxs(_e,{children:[s.jsx(W,{className:"sticky left-0 bg-background z-10 font-medium",children:s.jsxs("div",{children:[s.jsx("span",{children:N.name}),s.jsx("span",{className:"block text-xs text-muted-foreground",children:N.description})]})}),E.map((k,O)=>s.jsx(W,{className:ue("text-right font-mono-numbers",N.format==="currency"&&k<0&&"text-destructive"),children:C(k,N.format)},O)),s.jsx(W,{className:"text-right",children:s.jsxs("div",{className:ue("flex items-center justify-end gap-1",R>0?"text-green-600":R<0?"text-destructive":"text-muted-foreground"),children:[R>0?s.jsx(rc,{className:"h-3 w-3"}):R<0?s.jsx(US,{className:"h-3 w-3"}):null,s.jsxs("span",{className:"font-mono-numbers text-sm",children:[R>0?"+":"",tn(R)]})]})})]},N.id)})})]})}),S.length===0&&s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(MI,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),s.jsx("p",{children:"Aucun indicateur slectionn"}),s.jsx("p",{className:"text-sm",children:'Cliquez sur "Personnaliser" pour ajouter des indicateurs'})]})]}),s.jsx(Ye,{title:"Compte de Rsultat Simplifi",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Ht,{children:[s.jsx(qt,{children:s.jsxs(_e,{children:[s.jsx(ie,{className:"sticky left-0 bg-background z-10",children:"Poste"}),d.map(N=>s.jsx(ie,{className:"text-right min-w-24",children:N},N))]})}),s.jsxs(Kt,{children:[s.jsxs(_e,{className:"bg-muted/30",children:[s.jsx(W,{className:"sticky left-0 bg-muted/30 z-10 font-medium",children:"Chiffre d'Affaires"}),m.map((N,E)=>s.jsx(W,{className:"text-right font-mono-numbers font-medium",children:te(N.revenue,!0)},E))]}),s.jsxs(_e,{children:[s.jsx(W,{className:"sticky left-0 bg-background z-10 text-muted-foreground",children:"- Cot des Ventes"}),m.map((N,E)=>s.jsxs(W,{className:"text-right font-mono-numbers text-muted-foreground",children:["(",te(N.cogs,!0),")"]},E))]}),s.jsxs(_e,{className:"border-t-2",children:[s.jsx(W,{className:"sticky left-0 bg-background z-10 font-medium",children:"= Marge Brute"}),m.map((N,E)=>s.jsx(W,{className:"text-right font-mono-numbers font-medium",children:te(N.grossMargin,!0)},E))]}),s.jsxs(_e,{children:[s.jsx(W,{className:"sticky left-0 bg-background z-10 text-muted-foreground",children:"- Masse Salariale"}),m.map((N,E)=>s.jsxs(W,{className:"text-right font-mono-numbers text-muted-foreground",children:["(",te(N.payroll,!0),")"]},E))]}),s.jsxs(_e,{children:[s.jsx(W,{className:"sticky left-0 bg-background z-10 text-muted-foreground",children:"- Charges Oprationnelles"}),m.map((N,E)=>s.jsxs(W,{className:"text-right font-mono-numbers text-muted-foreground",children:["(",te(N.opex,!0),")"]},E))]}),s.jsxs(_e,{className:"border-t-2 bg-muted/30",children:[s.jsx(W,{className:"sticky left-0 bg-muted/30 z-10 font-medium",children:"= EBITDA"}),m.map((N,E)=>s.jsx(W,{className:ue("text-right font-mono-numbers font-medium",N.ebitda<0&&"text-destructive"),children:te(N.ebitda,!0)},E))]}),s.jsxs(_e,{children:[s.jsx(W,{className:"sticky left-0 bg-background z-10 text-muted-foreground",children:"- Amortissements"}),m.map((N,E)=>s.jsxs(W,{className:"text-right font-mono-numbers text-muted-foreground",children:["(",te(N.depreciation,!0),")"]},E))]}),s.jsxs(_e,{className:"border-t-2 bg-primary/5",children:[s.jsx(W,{className:"sticky left-0 bg-primary/5 z-10 font-bold",children:"= Rsultat d'Exploitation"}),m.map((N,E)=>s.jsx(W,{className:ue("text-right font-mono-numbers font-bold",N.operatingResult<0&&"text-destructive"),children:te(N.operatingResult,!0)},E))]})]})]})})}),s.jsx(Ye,{title:"Tableau des Flux de Trsorerie",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Ht,{children:[s.jsx(qt,{children:s.jsxs(_e,{children:[s.jsx(ie,{className:"sticky left-0 bg-background z-10",children:"Flux"}),d.map(N=>s.jsx(ie,{className:"text-right min-w-24",children:N},N))]})}),s.jsxs(Kt,{children:[s.jsxs(_e,{children:[s.jsx(W,{className:"sticky left-0 bg-background z-10",children:"Trsorerie Dbut"}),m.map((N,E)=>s.jsx(W,{className:"text-right font-mono-numbers",children:te(N.treasuryStart,!0)},E))]}),s.jsxs(_e,{className:"bg-muted/30",children:[s.jsx(W,{className:"sticky left-0 bg-muted/30 z-10 font-medium",children:"+ Encaissements (CA)"}),m.map((N,E)=>s.jsxs(W,{className:"text-right font-mono-numbers text-green-600",children:["+",te(N.revenue,!0)]},E))]}),s.jsxs(_e,{children:[s.jsx(W,{className:"sticky left-0 bg-background z-10 text-muted-foreground",children:"- Dcaissements Exploitation"}),m.map((N,E)=>s.jsxs(W,{className:"text-right font-mono-numbers text-destructive",children:["-",te(N.cogs+N.payroll+N.opex,!0)]},E))]}),s.jsxs(_e,{children:[s.jsx(W,{className:"sticky left-0 bg-background z-10 text-muted-foreground",children:"- Investissements (CAPEX)"}),m.map((N,E)=>s.jsx(W,{className:"text-right font-mono-numbers text-destructive",children:N.capex>0?`-${te(N.capex,!0)}`:"-"},E))]}),s.jsxs(_e,{className:"border-t",children:[s.jsx(W,{className:"sticky left-0 bg-background z-10 font-medium",children:"= Cash Flow Oprationnel"}),m.map((N,E)=>s.jsxs(W,{className:ue("text-right font-mono-numbers font-medium",N.cashFlow<0?"text-destructive":"text-green-600"),children:[N.cashFlow>=0?"+":"",te(N.cashFlow,!0)]},E))]}),s.jsxs(_e,{className:"bg-green-50 dark:bg-green-950/20",children:[s.jsx(W,{className:"sticky left-0 bg-green-50 dark:bg-green-950/20 z-10",children:"+ Leve de Fonds"}),m.map((N,E)=>s.jsx(W,{className:"text-right font-mono-numbers text-green-600",children:N.fundingInjection>0?`+${te(N.fundingInjection,!0)}`:"-"},E))]}),s.jsxs(_e,{className:"border-t-2 bg-primary/5",children:[s.jsx(W,{className:"sticky left-0 bg-primary/5 z-10 font-bold",children:"= Trsorerie Fin"}),m.map((N,E)=>s.jsx(W,{className:ue("text-right font-mono-numbers font-bold",N.treasuryEnd<0&&"text-destructive"),children:te(N.treasuryEnd,!0)},E))]})]})]})})})]})]})})}const BT=[{key:"hiring",label:"Recrutement",color:"hsl(var(--primary))"},{key:"rd",label:"R&D",color:"hsl(var(--accent))"},{key:"marketing",label:"Marketing",color:"hsl(150, 60%, 40%)"},{key:"inventory",label:"Stock",color:"hsl(38, 92%, 50%)"},{key:"buffer",label:"Buffer",color:"hsl(0, 0%, 60%)"}];function jPe(){const{state:e}=Ki(),t=e.fundingRounds[0];if(!t)return null;const r=t.amount;return s.jsx(Ye,{title:"Allocation des Fonds",children:s.jsx("div",{className:"space-y-3",children:BT.map(n=>{const a=1/BT.length,i=r*a;return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[s.jsx("span",{children:n.label}),s.jsx("span",{className:"font-mono-numbers",children:te(i,!0)})]}),s.jsx("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full rounded-full",style:{width:`${a*100}%`,backgroundColor:n.color}})})]},n.key)})})})}function _Pe(){var A,T,R;const{state:e,computed:t,updateFundingRounds:r,updateScenarioSettings:n}=Ki(),{startYear:a,durationYears:i,initialCash:o}=e.scenarioSettings,l=Array.from({length:i},(k,O)=>a+O),c=e.fundingRounds[0]||{id:"round-1",name:"Leve",amount:15e5,preMoneyValuation:4e6,year:a,quarter:"Q1"},{monthlyTreasuryProjection:u}=t,d=w.useMemo(()=>{const k=Id(u.months);return l.map(O=>{const M=k.get(O);return M?{year:M.year,revenue:M.revenue,totalCosts:M.cogs+M.payroll+M.opex,cashFlow:M.netCashFlow,treasuryStart:M.treasuryStart,treasuryEnd:M.treasuryEnd,fundingInjection:M.fundingInjection,minTreasuryInYear:M.treasuryEnd}:{year:O,revenue:0,totalCosts:0,cashFlow:0,treasuryStart:0,treasuryEnd:0,fundingInjection:0,minTreasuryInYear:0}})},[u,l]),f=c.amount,h=c.preMoneyValuation,m=h+f,y=f/m,g=u.minTreasury,p=Math.max(0,-g),v=p>0?f/p:1,x=((A=u.breakEvenMonth)==null?void 0:A.year)||null,b=d.map(k=>({year:k.year,revenue:k.revenue/1e3,costs:k.totalCosts/1e3,cashFlow:k.cashFlow/1e3,treasury:k.treasuryEnd/1e3,isNegative:k.treasuryEnd<0})),_=k=>{r([{...c,amount:k}])},j=k=>{r([{...c,preMoneyValuation:k}])},S=k=>{r([{...c,year:parseInt(k)}])},C=k=>{r([{...c,quarter:k}])},P=k=>{n({initialCash:k})},N=g<0,E=((T=u.breakEvenMonth)==null?void 0:T.year)||((R=d.find(k=>k.treasuryEnd<0))==null?void 0:R.year);return s.jsx(Qi,{tabKey:"funding",children:s.jsxs("div",{className:"space-y-6",children:[s.jsx(Rs,{image:"rd",title:"Besoin de Financement",subtitle:"Calcul automatiquement  Autosave activ",height:"sm"}),N&&s.jsxs("div",{className:"p-3 bg-destructive/10 border border-destructive/30 rounded-lg flex items-center gap-3",children:[s.jsx($u,{className:"h-5 w-5 text-destructive"}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-destructive",children:"Alerte Trsorerie"}),s.jsxs("span",{className:"text-sm text-muted-foreground ml-2",children:["Point bas de ",te(g,!0)," en ",E]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[s.jsx(yt,{label:"Besoin Calcul",value:te(p,!0),subValue:"max(0, -trso min)",trend:p>0?"down":void 0}),s.jsx(yt,{label:"Montant  Lever",value:te(f,!0),subValue:"Ajustable ci-dessous"}),s.jsx(yt,{label:"Pre-Money",value:te(h,!0),subValue:"Valorisation"}),s.jsx(yt,{label:"Post-Money",value:te(m,!0),subValue:"Aprs leve"}),s.jsx(yt,{label:"Dilution",value:tn(y),subValue:"Sur le round"})]}),s.jsx(Ye,{title:"Calibrage de la Leve",children:s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm font-medium",children:"Trsorerie Initiale T0"}),s.jsx("span",{className:"text-lg font-bold font-mono-numbers",children:te(o,!0)})]}),s.jsx(Ir,{value:[o/1e3],onValueChange:([k])=>P(k*1e3),min:0,max:500,step:10}),s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[s.jsx("span",{children:"0"}),s.jsx("span",{children:"500k"})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm font-medium",children:"Montant  lever"}),s.jsx("span",{className:"text-lg font-bold font-mono-numbers",children:te(f,!0)})]}),s.jsx(Ir,{value:[f/1e3],onValueChange:([k])=>_(k*1e3),min:0,max:5e3,step:50}),s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[s.jsx("span",{children:"0"}),s.jsx("span",{children:"5M"})]}),f===0&&s.jsx("p",{className:"text-xs text-muted-foreground bg-muted/50 p-2 rounded",children:" Montant  lever rgl  0  Les projections de trsorerie n'incluent aucune leve de fonds."})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm font-medium",children:"Valorisation Pre-Money"}),s.jsx("span",{className:"text-lg font-bold font-mono-numbers",children:te(h,!0)})]}),s.jsx(Ir,{value:[h/1e3],onValueChange:([k])=>j(k*1e3),min:200,max:2e4,step:100}),s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[s.jsx("span",{children:"200k"}),s.jsx("span",{children:"20M"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(Jf,{className:"h-4 w-4"}),"Anne"]}),s.jsxs(st,{value:c.year.toString(),onValueChange:S,children:[s.jsx(at,{children:s.jsx(ot,{})}),s.jsx(it,{children:l.map(k=>s.jsx(Le,{value:k.toString(),children:k},k))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Trimestre"}),s.jsxs(st,{value:c.quarter,onValueChange:C,children:[s.jsx(at,{children:s.jsx(ot,{})}),s.jsx(it,{children:zK.map(k=>s.jsx(Le,{value:k,children:k},k))})]})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"p-4 bg-muted/30 rounded-lg",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("span",{className:"text-sm font-medium",children:"Besoin calcul (depuis hypothses)"}),s.jsx(Oe,{variant:"secondary",children:"Auto"})]}),s.jsx("div",{className:"text-3xl font-bold font-mono-numbers",children:te(p,!0)}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"= max(0, -trsorerie minimale projete)"})]}),s.jsxs("div",{className:"p-4 bg-muted/30 rounded-lg",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("span",{className:"text-sm font-medium",children:"Couverture du besoin"}),s.jsx("span",{className:"font-mono-numbers",children:tn(Math.min(v,2))})]}),s.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:s.jsx("div",{className:ue("h-2 rounded-full transition-all",v>=1?"bg-accent":v>=.8?"bg-primary":"bg-destructive"),style:{width:`${Math.min(v*100,100)}%`}})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"p-3 bg-muted/30 rounded-lg text-center",children:[s.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Break-even"}),s.jsx("div",{className:"text-lg font-bold",children:x||"N/A"})]}),s.jsxs("div",{className:"p-3 bg-muted/30 rounded-lg text-center",children:[s.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Point bas trso"}),s.jsx("div",{className:ue("text-lg font-bold font-mono-numbers",g<0?"text-destructive":""),children:te(g,!0)})]})]})]})]})}),s.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[s.jsx(Ye,{title:"Projection Cash Flow & Trsorerie",children:s.jsx("div",{className:"h-64",children:s.jsx(Wr,{width:"100%",height:"100%",children:s.jsxs(md,{data:b,children:[s.jsx(qr,{strokeDasharray:"3 3"}),s.jsx(mr,{dataKey:"year"}),s.jsx(nr,{tickFormatter:k=>`${k}k`}),s.jsx($t,{formatter:k=>`${k.toFixed(0)}k`}),s.jsx(Vr,{}),s.jsx(rr,{dataKey:"cashFlow",name:"Cash Flow",fill:"hsl(var(--accent))"}),s.jsx(Dn,{type:"monotone",dataKey:"treasury",name:"Trsorerie",stroke:"hsl(var(--primary))",strokeWidth:3,dot:{r:4}})]})})})}),s.jsx(jPe,{})]}),s.jsx(Ye,{title:"Projection Dtaille",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b",children:[s.jsx("th",{className:"text-left py-2 px-3",children:"Anne"}),s.jsx("th",{className:"text-right py-2 px-3",children:"CA"}),s.jsx("th",{className:"text-right py-2 px-3",children:"Cots Totaux"}),s.jsx("th",{className:"text-right py-2 px-3",children:"Cash Flow"}),s.jsx("th",{className:"text-right py-2 px-3",children:"Leve"}),s.jsx("th",{className:"text-right py-2 px-3",children:"Trso Dbut"}),s.jsx("th",{className:"text-right py-2 px-3",children:"Trso Fin"})]})}),s.jsx("tbody",{children:d.map(k=>s.jsxs("tr",{className:ue("border-b",k.treasuryEnd<0&&"bg-destructive/5"),children:[s.jsx("td",{className:"py-2 px-3 font-medium",children:k.year}),s.jsx("td",{className:"py-2 px-3 text-right font-mono-numbers",children:te(k.revenue,!0)}),s.jsx("td",{className:"py-2 px-3 text-right font-mono-numbers text-muted-foreground",children:te(k.totalCosts,!0)}),s.jsxs("td",{className:ue("py-2 px-3 text-right font-mono-numbers font-medium",k.cashFlow>=0?"text-accent":"text-destructive"),children:[k.cashFlow>=0?"+":"",te(k.cashFlow,!0)]}),s.jsx("td",{className:"py-2 px-3 text-right font-mono-numbers text-accent",children:k.fundingInjection>0?`+${te(k.fundingInjection,!0)}`:"-"}),s.jsx("td",{className:"py-2 px-3 text-right font-mono-numbers",children:te(k.treasuryStart,!0)}),s.jsx("td",{className:ue("py-2 px-3 text-right font-mono-numbers font-bold",k.treasuryEnd<0?"text-destructive":""),children:te(k.treasuryEnd,!0)})]},k.year))})]})})})]})})}const SPe=[{id:"settings",label:"Paramtres du Scnario",elementId:"scenario-settings"},{id:"treasury-params",label:"Paramtres Trsorerie",elementId:"treasury-params"},{id:"kpis",label:"KPIs par Scnario",elementId:"scenario-kpis"},{id:"adjustments",label:"Ajustements",elementId:"scenario-adjustments"},{id:"chart",label:"Comparaison des Scnarios",elementId:"scenario-chart"},{id:"cashflow",label:"Projection Cash Flow",elementId:"scenario-cashflow"}];function CPe(){var A,T,R;const{state:e,computed:t,setActiveScenario:r,updateScenarioConfig:n,updateScenarioSettings:a,updateFundingRounds:i,setExcludeFundingFromTreasury:o,saveAll:l}=Ki();e.scenarioConfigs[e.activeScenarioId];const{startYear:c,durationYears:u,initialCash:d}=e.scenarioSettings,f=e.fundingRounds[e.fundingRounds.length-1],h=(f==null?void 0:f.amount)||0,m=Array.from({length:u},(k,O)=>c+O),y=(k,O)=>{const M=e.scenarioConfigs[k];if(e.revenueMode==="by-channel-global")return zh(e.globalRevenueConfig,O)*(1+M.volumeAdjustment)*(1+M.priceAdjustment);let D=0;return e.products.forEach(L=>{const B=L.volumesByChannel;if(B){const z=L.priceHT||L.priceTTC_B2C/(1+(L.vatRate||.2)),Z=L.coef_shop||1.6,ee=L.coef_dist||1.3,le=L.coef_oem||1.4,V=z/Z/ee,I=L.unitCost*le,F=Math.round((B.B2C[O]||0)*(1+M.volumeAdjustment)),q=Math.round((B.B2B[O]||0)*(1+M.volumeAdjustment)),de=Math.round((B.OEM[O]||0)*(1+M.volumeAdjustment));D+=F*z*(1+M.priceAdjustment),D+=q*V*(1+M.priceAdjustment),D+=de*I*(1+M.priceAdjustment)}else if(L.volumesByYear[O]){const z=Math.round(L.volumesByYear[O]*(1+M.volumeAdjustment));D+=z*L.priceHT*(1+M.priceAdjustment)}}),D},g=k=>{const O=m.map(L=>y(k,L)),M=O[O.length-1]||0,D=O[0]||0;return{revenueLastYear:M,totalRevenue:O.reduce((L,B)=>L+B,0),cagr:M>0&&D>0&&u>1?Math.pow(M/D,1/(u-1))-1:0}},p=[{id:"conservative",name:"Prudent",color:"hsl(38, 92%, 50%)"},{id:"base",name:"Base",color:"hsl(0, 85%, 50%)"},{id:"ambitious",name:"Ambitieux",color:"hsl(150, 60%, 40%)"}],v=m.map(k=>{const O={year:k};return p.forEach(M=>{O[M.id]=y(M.id,k)/1e3}),O}),x=p.map(k=>{const O=g(k.id);return{...k,...O,config:e.scenarioConfigs[k.id]}}),b=k=>{a({startYear:k})},_=k=>{a({durationYears:k})},j=k=>{a({initialCash:k})},S=k=>{if(f){const O=e.fundingRounds.map(M=>M.id===f.id?{...M,amount:k}:M);i(O)}},{monthlyTreasuryProjection:C}=t,P=w.useMemo(()=>{const k=Id(C.months);return m.map(O=>{const M=k.get(O);return M?{year:M.year,revenue:M.revenue/1e3,cogs:M.cogs/1e3,payroll:M.payroll/1e3,opex:M.opex/1e3,grossMargin:M.grossMargin/1e3,ebitda:M.ebitda/1e3,cashFlow:M.netCashFlow/1e3,treasury:M.treasuryEnd/1e3}:{year:O,revenue:0,cogs:0,payroll:0,opex:0,grossMargin:0,ebitda:0,cashFlow:0,treasury:0}})},[C,m]),N=C.minTreasury/1e3,E=((A=C.breakEvenMonth)==null?void 0:A.year)||"N/A";return s.jsx(Qi,{tabKey:"scenarios",children:s.jsxs("div",{className:"space-y-6",children:[s.jsx(Rs,{image:"rd",title:"Scnarios",subtitle:"Modulation des projections bases sur le Plan Produit",height:"sm"}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(Oe,{variant:e.revenueMode==="by-product"?"outline":"secondary",className:"text-xs",children:["CA: ",e.revenueMode==="by-product"?"Par Produit":e.revenueMode==="by-channel-global"?"Global Canaux":"Par Client"]}),s.jsxs(Oe,{variant:"secondary",className:"text-xs",children:[c,"  ",c+u-1," (",u," ans)"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(nf,{pageTitle:"Scnarios",sections:SPe,fileName:"Scenarios"}),s.jsx(zd,{onSave:l,hasUnsavedChanges:e.hasUnsavedChanges,lastSaved:e.lastSaved?new Date(e.lastSaved):null})]})]}),s.jsx(Ye,{title:"Paramtres du Scnario",id:"scenario-settings",children:s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Jf,{className:"h-4 w-4 text-muted-foreground"}),s.jsx(Ne,{children:"Anne de dbut"})]}),s.jsx("div",{className:"flex gap-2",children:[2024,2025,2026,2027].map(k=>s.jsx(ae,{size:"sm",variant:c===k?"default":"outline",onClick:()=>b(k),children:k},k))}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Premire anne des projections"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(BS,{className:"h-4 w-4 text-muted-foreground"}),s.jsx(Ne,{children:"Dure (annes)"})]}),s.jsx("div",{className:"flex gap-2",children:[3,4,5,6,7].map(k=>s.jsxs(ae,{size:"sm",variant:u===k?"default":"outline",onClick:()=>_(k),children:[k," ans"]},k))}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Horizon de projection: ",c,"  ",c+u-1]})]})]})}),s.jsxs(Ye,{title:"Paramtres Trsorerie",id:"treasury-params",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6 p-3 rounded-lg border bg-muted/30",children:[s.jsx(hi,{id:"funding-toggle",checked:!e.excludeFundingFromTreasury,onCheckedChange:k=>o(!k)}),s.jsx(Ne,{htmlFor:"funding-toggle",className:"cursor-pointer text-sm font-medium",children:"Activer la leve de fonds dans le scnario"}),s.jsx(Oe,{variant:e.excludeFundingFromTreasury?"outline":"default",className:"ml-auto text-xs",children:e.excludeFundingFromTreasury?"Dsactive":"Active"})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(LI,{className:"h-4 w-4 text-muted-foreground"}),s.jsx(Ne,{children:"Trsorerie initiale (T0)"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm",children:"Cash disponible au dmarrage"}),s.jsx("span",{className:"text-lg font-bold font-mono-numbers",children:te(d,!0)})]}),s.jsx(Ir,{value:[d/1e3],onValueChange:([k])=>j(k*1e3),min:0,max:1e3,step:10}),s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[s.jsx("span",{children:"0"}),s.jsx("span",{children:"1M"})]})]})]}),!e.excludeFundingFromTreasury&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(rc,{className:"h-4 w-4 text-muted-foreground"}),s.jsx(Ne,{children:"Montant Lev"}),s.jsx(Oe,{variant:"outline",className:"text-xs ml-auto",children:"Depuis Financement"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm",children:(f==null?void 0:f.name)||"Tour de table"}),s.jsx("span",{className:"text-lg font-bold font-mono-numbers",children:te(h,!0)})]}),s.jsx(Ir,{value:[h/1e3],onValueChange:([k])=>S(k*1e3),min:100,max:5e3,step:50}),s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[s.jsx("span",{children:"100k"}),s.jsx("span",{children:"5M"})]})]})]})]}),s.jsxs("div",{className:"mt-6 pt-4 border-t grid md:grid-cols-4 gap-4",children:[s.jsx(yt,{label:"Cash Total T0",value:te(d+(e.excludeFundingFromTreasury?0:h),!0),subValue:e.excludeFundingFromTreasury?"Trso seule":"Trso + Leve"}),s.jsx(yt,{label:"Point Bas Trso",value:te(N*1e3,!0),subValue:"Sur la priode",trend:N<0?"down":void 0}),s.jsx(yt,{label:"Break-even",value:E.toString(),subValue:"Cash flow positif"}),s.jsx(yt,{label:"Trso Finale",value:te((((T=P[P.length-1])==null?void 0:T.treasury)||0)*1e3,!0),subValue:`En ${c+u-1}`})]})]}),s.jsx("div",{className:"grid md:grid-cols-3 gap-4",children:x.map(k=>s.jsxs("div",{className:ue("p-4 rounded-lg border-2 transition-all cursor-pointer",e.activeScenarioId===k.id?"border-accent bg-accent/5":"border-border hover:border-accent/50"),onClick:()=>r(k.id),children:[s.jsxs("div",{className:"flex justify-between items-center mb-3",children:[s.jsx("h3",{className:"font-semibold",children:k.name}),e.activeScenarioId===k.id&&s.jsx(Oe,{children:"Actif"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-xs text-muted-foreground",children:["CA ",c+u-1]}),s.jsx("p",{className:"font-mono-numbers font-semibold",children:te(k.revenueLastYear,!0)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"TCAM"}),s.jsx("p",{className:"font-mono-numbers font-semibold",children:tn(k.cagr)})]})]}),s.jsxs("div",{className:"space-y-3",onClick:O=>O.stopPropagation(),children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[s.jsx("span",{children:"Volumes"}),s.jsxs("span",{className:ue("font-mono-numbers",k.config.volumeAdjustment>0?"text-green-600":k.config.volumeAdjustment<0?"text-destructive":""),children:[k.config.volumeAdjustment>0?"+":"",(k.config.volumeAdjustment*100).toFixed(0),"%"]})]}),s.jsx(Ir,{value:[(k.config.volumeAdjustment+.5)*100],onValueChange:([O])=>n(k.id,{volumeAdjustment:O/100-.5}),min:0,max:100,step:5})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[s.jsx("span",{children:"Prix"}),s.jsxs("span",{className:ue("font-mono-numbers",k.config.priceAdjustment>0?"text-green-600":k.config.priceAdjustment<0?"text-destructive":""),children:[k.config.priceAdjustment>0?"+":"",(k.config.priceAdjustment*100).toFixed(0),"%"]})]}),s.jsx(Ir,{value:[(k.config.priceAdjustment+.2)*250],onValueChange:([O])=>n(k.id,{priceAdjustment:O/250-.2}),min:0,max:100,step:5})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[s.jsx("span",{children:"OPEX"}),s.jsxs("span",{className:ue("font-mono-numbers",k.config.opexAdjustment<0?"text-green-600":k.config.opexAdjustment>0?"text-destructive":""),children:[k.config.opexAdjustment>0?"+":"",(k.config.opexAdjustment*100).toFixed(0),"%"]})]}),s.jsx(Ir,{value:[(k.config.opexAdjustment+.3)*166],onValueChange:([O])=>n(k.id,{opexAdjustment:O/166-.3}),min:0,max:100,step:5})]})]})]},k.id))}),s.jsx(Ye,{title:"Comparaison des Trajectoires CA",id:"scenario-chart",children:s.jsx("div",{className:"h-80",children:s.jsx(Wr,{width:"100%",height:"100%",children:s.jsxs(yF,{data:v,children:[s.jsx(qr,{strokeDasharray:"3 3"}),s.jsx(mr,{dataKey:"year"}),s.jsx(nr,{tickFormatter:k=>`${k}k`}),s.jsx($t,{formatter:k=>`${k.toFixed(0)}k`}),s.jsx(Vr,{}),p.map(k=>s.jsx(Dn,{type:"monotone",dataKey:k.id,name:k.name,stroke:k.color,strokeWidth:e.activeScenarioId===k.id?3:1,dot:{fill:k.color}},k.id))]})})})}),s.jsxs(Ye,{title:"Projection Cash Flow & Trsorerie",id:"scenario-cashflow",children:[s.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["Bas sur le scnario ",s.jsx(Oe,{variant:"outline",children:(R=p.find(k=>k.id===e.activeScenarioId))==null?void 0:R.name})," avec trso initiale ",te(d,!0),!e.excludeFundingFromTreasury&&` + leve ${te(h,!0)}`," "," ",s.jsx("span",{className:"italic",children:"Source: moteur de trsorerie mensuel (identique au Prvisionnel)"})]}),s.jsx("div",{className:"h-80",children:s.jsx(Wr,{width:"100%",height:"100%",children:s.jsxs(md,{data:P,children:[s.jsx(qr,{strokeDasharray:"3 3"}),s.jsx(mr,{dataKey:"year"}),s.jsx(nr,{tickFormatter:k=>`${k}k`}),s.jsx($t,{formatter:k=>`${k.toFixed(0)}k`}),s.jsx(Vr,{}),s.jsx(rr,{dataKey:"cashFlow",name:"Cash Flow",fill:"hsl(38, 92%, 50%)"}),s.jsx(Dn,{type:"monotone",dataKey:"treasury",name:"Trsorerie",stroke:"hsl(0, 85%, 50%)",strokeWidth:3,dot:{r:4}})]})})})]}),s.jsx("div",{className:"grid md:grid-cols-3 gap-4",children:x.map(k=>s.jsx(Ye,{title:k.name,children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-xs text-muted-foreground",children:["CA ",c+u-1]}),s.jsx("p",{className:"text-xl font-bold font-mono-numbers",children:te(k.revenueLastYear,!0)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"TCAM"}),s.jsx("p",{className:"text-xl font-bold font-mono-numbers",children:tn(k.cagr)})]})]}),s.jsxs("div",{className:"pt-4 border-t space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{children:"Volumes"}),s.jsxs("span",{className:"font-mono-numbers",children:[k.config.volumeAdjustment>0?"+":"",(k.config.volumeAdjustment*100).toFixed(0),"%"]})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{children:"Prix"}),s.jsxs("span",{className:"font-mono-numbers",children:[k.config.priceAdjustment>0?"+":"",(k.config.priceAdjustment*100).toFixed(0),"%"]})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{children:"OPEX"}),s.jsxs("span",{className:"font-mono-numbers",children:[k.config.opexAdjustment>0?"+":"",(k.config.opexAdjustment*100).toFixed(0),"%"]})]})]}),s.jsxs("p",{className:"text-xs text-muted-foreground pt-2",children:[k.id==="conservative"&&"Hypothses prudentes avec volumes rduits de 20%",k.id==="base"&&"Trajectoire nominale aligne sur le Plan Produit",k.id==="ambitious"&&"Forte traction avec volumes augments de 25%"]})]})},k.id))})]})})}const Cy=e=>(e.salesB2B||0)+(e.salesB2C||0)+(e.salesOEM||0)||e.revenue,iU=e=>(e.stockVariation||0)+(e.purchasesGoods||0)+(e.transportCosts||0),sU=e=>Cy(e)-iU(e),oU=e=>(e.productionExercice||0)-(e.rawMaterials||0)-(e.subcontracting||0),IN=e=>sU(e)+oU(e),lU=e=>IN(e)-(e.otherPurchases||e.externalCosts||0),cU=e=>lU(e)+(e.operatingSubsidies||0)-(e.taxesAndDuties||0)-e.payroll,uU=e=>cU(e)+(e.otherOperatingIncome||0)-(e.otherOperatingExpenses||0)-e.depreciation,dU=e=>uU(e)+(e.financialIncome||0)-(e.financialExpenses||0),fU=e=>(e.exceptionalIncome||0)-(e.exceptionalExpenses||0),NPe=e=>dU(e)+fU(e)-(e.employeeParticipation||0)-(e.corporateTax||0),PPe=[{id:"h_ca",label:"CHIFFRE D'AFFAIRE",type:"calculated",calculate:Cy,bold:!0,highlight:!0},{id:"salesB2B",label:"Dont Ventes B2B",type:"input",field:"salesB2B",indent:2},{id:"salesB2C",label:"Dont Ventes B2C",type:"input",field:"salesB2C",indent:2},{id:"salesOEM",label:"Dont Ventes OEM",type:"input",field:"salesOEM",indent:2},{id:"sep1",label:"",type:"separator"},{id:"h_cogs",label:"- Cots d'achat des marchandises vendues",type:"calculated",calculate:iU,bold:!0,sign:"negative"},{id:"stockVariation",label:"Variation de stock",type:"input",field:"stockVariation",indent:2},{id:"purchasesGoods",label:"Achat de marchandises",type:"input",field:"purchasesGoods",indent:2},{id:"transportCosts",label:"Transport de marchandises",type:"input",field:"transportCosts",indent:2},{id:"sep2",label:"",type:"separator"},{id:"margeComm",label:"MARGE COMMERCIALE",type:"calculated",calculate:sU,bold:!0,highlight:!0},{id:"sep3",label:"",type:"separator"},{id:"prodExercice",label:"PRODUCTION DE L'EXERCICE",type:"input",field:"productionExercice"},{id:"rawMaterials",label:"- MP, appro. Consomms",type:"input",field:"rawMaterials",indent:1},{id:"subcontracting",label:"- Sous-traitance directe",type:"input",field:"subcontracting",indent:1},{id:"margeProd",label:"MARGE BRUTE DE PRODUCTION",type:"calculated",calculate:oU,bold:!0},{id:"sep4",label:"",type:"separator"},{id:"margeBrute",label:"MARGE (BRUTE GLOBALE) TOTALE",type:"calculated",calculate:IN,bold:!0,highlight:!0},{id:"otherPurchases",label:"- Autres achats & Charges externes",type:"input",field:"otherPurchases",sign:"negative"},{id:"sep5",label:"",type:"separator"},{id:"va",label:"VALEUR AJOUTE",type:"calculated",calculate:lU,bold:!0,highlight:!0},{id:"operatingSubsidies",label:"+ Subventions d'exploitation",type:"input",field:"operatingSubsidies",indent:1},{id:"taxesAndDuties",label:"- Impts, taxes et versements assimils",type:"input",field:"taxesAndDuties",indent:1,sign:"negative"},{id:"payroll",label:"- Charges de personnel",type:"input",field:"payroll",sign:"negative"},{id:"sep6",label:"",type:"separator"},{id:"ebe",label:"EXCDENT BRUT D'EXPLOITATION (EBE)",type:"calculated",calculate:cU,bold:!0,highlight:!0},{id:"otherOpIncome",label:"+ Autres produits de gestion courante",type:"input",field:"otherOperatingIncome",indent:1},{id:"depreciation",label:"- Dotations aux amortissements et aux provisions",type:"input",field:"depreciation",indent:1,sign:"negative"},{id:"otherOpExpenses",label:"- Autres charges de gestion courante",type:"input",field:"otherOperatingExpenses",indent:1,sign:"negative"},{id:"sep7",label:"",type:"separator"},{id:"rex",label:"RSULTAT D'EXPLOITATION",type:"calculated",calculate:uU,bold:!0,highlight:!0},{id:"financialIncome",label:"+ QP de rsultat positif & Produits Financiers",type:"input",field:"financialIncome",indent:1},{id:"financialExpenses",label:"- QP de rsultat ngatif & Charges Financires",type:"input",field:"financialExpenses",indent:1,sign:"negative"},{id:"sep8",label:"",type:"separator"},{id:"rcai",label:"RSULTAT COURANT AVANT IMPTS",type:"calculated",calculate:dU,bold:!0,highlight:!0},{id:"exceptionalIncome",label:"+ Produits exceptionnels",type:"input",field:"exceptionalIncome",indent:1},{id:"exceptionalExpenses",label:"- Charges exceptionnelles",type:"input",field:"exceptionalExpenses",indent:1,sign:"negative"},{id:"sep9",label:"",type:"separator"},{id:"rexcep",label:"RSULTAT EXCEPTIONNEL",type:"calculated",calculate:fU,bold:!0},{id:"employeeParticipation",label:"Participation des salaris",type:"input",field:"employeeParticipation",indent:1},{id:"corporateTax",label:"Impts sur les bnfices & CIR",type:"input",field:"corporateTax",indent:1},{id:"sep10",label:"",type:"separator"},{id:"rnet",label:"RSULTAT NET",type:"calculated",calculate:NPe,bold:!0,highlight:!0}];function kPe(e){return{year:e,revenue:0,grossMargin:0,payroll:0,externalCosts:0,depreciation:0}}function EPe({data:e,onChange:t}){const[r,n]=w.useState(new Date().getFullYear()),a=(c,u,d)=>{const f=[...e];f[c]={...f[c],[u]:d};const h=f[c],m=Cy(h);h.revenue=m;const y=IN(h);h.grossMargin=m>0?y/m:0,h.externalCosts=h.otherPurchases??h.externalCosts,t(f)},i=c=>{t(e.filter(u=>u.year!==c))},o=new Date().getFullYear(),l=Array.from({length:10},(c,u)=>o-9+u).filter(c=>!e.some(u=>u.year===c));return s.jsxs(Ye,{title:"Compte de Rsultat Historique",id:"valuation-historical",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6 p-3 bg-muted/30 rounded-lg border",children:[s.jsx("span",{className:"text-sm font-medium",children:"Ajouter une anne :"}),s.jsx("div",{className:"flex gap-1 flex-wrap",children:l.map(c=>s.jsx(ae,{size:"sm",variant:r===c?"default":"outline",className:"h-7 text-xs",onClick:()=>{if(n(c),!e.some(u=>u.year===c)){const u=[...e,kPe(c)].sort((d,f)=>d.year-f.year);t(u)}},children:c},c))})]}),e.length===0?s.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"Slectionnez une anne ci-dessus pour commencer la saisie."}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm border-collapse",children:[s.jsxs("thead",{children:[s.jsxs("tr",{className:"border-b-2 border-border",children:[s.jsx("th",{className:"text-left py-2 px-3 min-w-[280px] sticky left-0 bg-background z-10",children:"Poste"}),e.map(c=>s.jsx("th",{className:"text-center py-2 px-2 min-w-[140px]",colSpan:2,children:s.jsxs("div",{className:"flex items-center justify-center gap-1",children:[s.jsx("span",{className:"font-bold",children:c.year}),s.jsx(ae,{variant:"ghost",size:"sm",className:"h-5 w-5 p-0 text-muted-foreground hover:text-destructive",onClick:()=>i(c.year),children:s.jsx(hr,{className:"h-3 w-3"})})]})},c.year))]}),s.jsxs("tr",{className:"border-b text-xs text-muted-foreground",children:[s.jsx("th",{}),e.map(c=>s.jsx("th",{colSpan:2,className:"text-center py-1 px-2",children:s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"flex-1 text-right pr-2",children:"Montant"}),s.jsx("span",{className:"w-14 text-right",children:"% CA"})]})},c.year))]})]}),s.jsx("tbody",{children:PPe.map(c=>c.type==="separator"?s.jsx("tr",{children:s.jsx("td",{colSpan:1+e.length*2,className:"h-1"})},c.id):s.jsxs("tr",{className:ue("border-b border-border/50",c.highlight&&"bg-muted/40"),children:[s.jsx("td",{className:ue("py-1.5 px-3 sticky left-0 bg-background z-10",c.highlight&&"bg-muted/40",c.bold&&"font-bold",c.indent===1&&"pl-6",c.indent===2&&"pl-10","text-xs"),children:c.label}),e.map((u,d)=>{const f=Cy(u);if(c.type==="calculated"&&c.calculate){const y=c.calculate(u),g=f>0?y/f:0;return s.jsx("td",{colSpan:2,className:ue("py-1.5 px-2"),children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:ue("flex-1 text-right font-mono-numbers pr-2",c.bold&&"font-bold",y<0&&"text-destructive",y>0&&c.highlight&&"text-accent"),children:te(y,!0)}),s.jsx("span",{className:ue("w-14 text-right text-xs font-mono-numbers",g<0?"text-destructive":"text-muted-foreground"),children:f>0?`${(g*100).toFixed(0)}%`:"-"})]})},u.year)}const h=c.field?u[c.field]??0:0,m=f>0?h/f:0;return s.jsx("td",{colSpan:2,className:"py-1 px-2",children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(be,{type:"number",value:h||"",placeholder:"0",onChange:y=>{c.field&&a(d,c.field,Number(y.target.value)||0)},className:ue("h-7 text-right font-mono-numbers text-xs flex-1","border-transparent bg-transparent hover:border-border focus:border-primary focus:bg-background")}),s.jsx("span",{className:ue("w-14 text-right text-xs font-mono-numbers shrink-0",m<0?"text-destructive":"text-muted-foreground"),children:f>0&&h!==0?`${(m*100).toFixed(0)}%`:"-"})]})},u.year)})]},c.id))})]})})]})}const FT=[{id:"revenue_multiple",name:"Multiple de CA",description:"Valorisation base sur un multiple du chiffre d'affaires projet",applicability:"Startups en croissance avec CA significatif"},{id:"ebitda_multiple",name:"Multiple d'EBITDA",description:"Valorisation base sur un multiple de l'EBITDA projet",applicability:"Entreprises rentables ou proches de la rentabilit"},{id:"dcf",name:"DCF Simplifi",description:"Actualisation des flux de trsorerie futurs",applicability:"Modles conomiques tablis avec visibilit long terme"},{id:"scorecard",name:"Scorecard (Comparables)",description:"Pondration de facteurs qualitatifs vs startups similaires",applicability:"Startups early-stage avec peu de mtriques financires"},{id:"berkus",name:"Mthode Berkus",description:"Attribution de valeur  5 critres cls du projet",applicability:"Pre-revenue, valuation du potentiel"},{id:"risk_factor",name:"Risk Factor Summation",description:"Ajustement d'une valorisation de base selon 12 facteurs de risque",applicability:"Startups early-stage, ajustement du risque"}];function APe(e){return e.projectedRevenue*e.multiple}function OPe(e){return e.projectedEBITDA*e.multiple}function TPe(e){const{cashFlows:t,discountRate:r,terminalGrowthRate:n}=e;let a=0;t.forEach((c,u)=>{a+=c/Math.pow(1+r,u+1)});const l=(t[t.length-1]||0)*(1+n)/(r-n)/Math.pow(1+r,t.length);return a+l}function RPe(e){const{baseValuation:t,factors:r}=e,n={team:.3,market:.25,product:.15,competition:.1,marketing:.1,fundingNeed:.1};let a=1;return Object.entries(r).forEach(([i,o])=>{const l=n[i]||0;a+=l*o}),t*a}function MPe(e){return Object.values(e).reduce((t,r)=>t+r,0)}function $Pe(e){const{baseValuation:t,factors:r}=e,a=Object.values(r).reduce((i,o)=>i+o,0)*25e4;return t+a}function Cc(e,t){let r=0,n="medium",a="";switch(e){case"revenue_multiple":r=APe(t),n=t.projectedRevenue>5e5?"high":"medium",a=`Multiple de ${t.multiple}x sur CA de ${(t.projectedRevenue/1e6).toFixed(1)}M`;break;case"ebitda_multiple":r=OPe(t),n=t.projectedEBITDA>0?"high":"low",a=`Multiple de ${t.multiple}x sur EBITDA de ${(t.projectedEBITDA/1e3).toFixed(0)}k`;break;case"dcf":r=TPe(t),n="medium",a=`Taux d'actualisation: ${(t.discountRate*100).toFixed(0)}%`;break;case"scorecard":r=RPe(t),n="low",a="Bas sur comparables secteur";break;case"berkus":r=MPe(t),n="low",a="Mthode qualitative pour early-stage";break;case"risk_factor":r=$Pe(t),n="low",a="Ajustements sur 12 facteurs de risque";break}return{method:e,value:r,confidence:n,notes:a}}function IPe(e){if(e.length===0)return 0;const t={high:3,medium:2,low:1};let r=0,n=0;return e.forEach(a=>{const i=t[a.confidence];r+=a.value*i,n+=i}),n>0?r/n:0}const DPe=[{id:"kpis",label:"KPIs Valorisation",elementId:"valuation-kpis"},{id:"historical",label:"Donnes Historiques",elementId:"valuation-historical"},{id:"methods",label:"Mthodes de Valorisation",elementId:"valuation-methods"},{id:"dilution",label:"Simulation Dilution",elementId:"valuation-dilution"}];function LPe(){const{state:e,computed:t,updateHistoricalData:r,updateValuationConfig:n,saveAll:a}=Ki(),{startYear:i,durationYears:o}=e.scenarioSettings,l=Array.from({length:o},(V,I)=>i+I),c=e.valuationConfig,u=V=>n(V),d=c.selectedMethods,f=c.valuationBasis,h=c.historicalYear,m=c.projectedYear,y=c.mixWeight,g=c.averageYears,p=c.valuationParams,v=c.dilutionConfig,x=c.exitScenarios,b=(()=>{const V=e.historicalData[e.historicalData.length-1];return V?V.revenue*V.grossMargin-V.payroll-V.externalCosts:5e5})(),_=e.fundingRounds[e.fundingRounds.length-1],j=(_==null?void 0:_.amount)||15e5;$.useEffect(()=>{(v.totalRaise!==j||v.referenceEBITDA!==b)&&u({dilutionConfig:{...v,totalRaise:j,referenceEBITDA:b}})},[j,b]);const S=Math.max(2e5,v.referenceEBITDA*v.ebitdaMultiple),C=v.totalRaise*(1-v.ocRatio),P=S+C,N=P>0?C/P:0,E=e.historicalData.map(V=>V.year),A=[...E,...l],R=(()=>{const V=re=>{const H=e.historicalData.find(ge=>ge.year===re);if(!H)return{revenue:0,ebitda:0,ebit:0};const G=H.revenue*H.grossMargin-H.payroll-H.externalCosts,J=G-H.depreciation;return{revenue:H.revenue,ebitda:G,ebit:J}},I=re=>{const H=t.revenueByYear.find(dt=>dt.year===re),Y=t.payrollByYear.find(dt=>dt.year===re),G=t.opexByYear.find(dt=>dt.year===re),J=t.capexByYear.find(dt=>dt.year===re),ge=(H==null?void 0:H.revenue)||0,$e=ge-((H==null?void 0:H.cogs)||0)-((Y==null?void 0:Y.payroll)||0)-((G==null?void 0:G.opex)||0),Ge=$e-((J==null?void 0:J.depreciation)||0);return{revenue:ge,ebitda:$e,ebit:Ge}},F=re=>E.includes(re)?V(re):I(re);if(f==="average"){if(g.length===0)return{revenue:0,ebitda:0,ebit:0};const re=g.map(Y=>F(Y)),H=re.length;return{revenue:re.reduce((Y,G)=>Y+G.revenue,0)/H,ebitda:re.reduce((Y,G)=>Y+G.ebitda,0)/H,ebit:re.reduce((Y,G)=>Y+G.ebit,0)/H}}if(f==="historical")return V(h);if(f==="projected")return I(m);const q=V(h),de=I(m);return{revenue:q.revenue*(1-y)+de.revenue*y,ebitda:q.ebitda*(1-y)+de.ebitda*y,ebit:q.ebit*(1-y)+de.ebit*y}})(),O=(()=>{const V=[];if(d.includes("revenue_multiple")&&V.push(Cc("revenue_multiple",{projectedRevenue:R.revenue,multiple:p.revenue_multiple.multiple})),d.includes("ebitda_multiple")&&V.push(Cc("ebitda_multiple",{projectedEBITDA:R.ebitda,multiple:v.ebitdaMultiple})),d.includes("dcf")){const I=l.map(F=>{const q=t.revenueByYear.find(Y=>Y.year===F),de=t.payrollByYear.find(Y=>Y.year===F),re=t.opexByYear.find(Y=>Y.year===F),H=t.capexByYear.find(Y=>Y.year===F);return((q==null?void 0:q.revenue)||0)-((q==null?void 0:q.cogs)||0)-((de==null?void 0:de.payroll)||0)-((re==null?void 0:re.opex)||0)-((H==null?void 0:H.capex)||0)});V.push(Cc("dcf",{cashFlows:I,discountRate:p.dcf.discountRate,terminalGrowthRate:p.dcf.terminalGrowthRate}))}return d.includes("scorecard")&&V.push(Cc("scorecard",{baseValuation:p.scorecard.baseValuation,factors:{team:p.scorecard.team,market:p.scorecard.market,product:p.scorecard.product,competition:p.scorecard.competition,marketing:p.scorecard.marketing,fundingNeed:p.scorecard.fundingNeed}})),d.includes("berkus")&&V.push(Cc("berkus",p.berkus)),d.includes("risk_factor")&&V.push(Cc("risk_factor",{baseValuation:p.risk_factor.baseValuation,factors:{managementRisk:p.risk_factor.managementRisk,businessStage:p.risk_factor.businessStage,legislation:p.risk_factor.legislation,manufacturing:p.risk_factor.manufacturing,salesMarketing:p.risk_factor.salesMarketing,fundingCapital:p.risk_factor.fundingCapital,competition:p.risk_factor.competition,technology:p.risk_factor.technology,litigation:p.risk_factor.litigation,international:p.risk_factor.international,reputation:p.risk_factor.reputation,potentialExit:p.risk_factor.potentialExit}})),V})(),M=IPe(O),D=V=>{const I=d.includes(V)?d.filter(F=>F!==V):[...d,V];u({selectedMethods:I})},L=V=>{const I=g.includes(V)?g.filter(F=>F!==V):[...g,V].sort();u({averageYears:I})},B=O.map(V=>{var I;return{name:((I=FT.find(F=>F.id===V.method))==null?void 0:I.name)||V.method,value:V.value/1e6,confidence:V.confidence}}),z=(V,I,F)=>V<=0||I<=0||F<=0?0:Math.pow(I/V,1/F)-1,Z=V=>{const I=t.revenueByYear.find(de=>de.year===V),F=t.payrollByYear.find(de=>de.year===V),q=t.opexByYear.find(de=>de.year===V);return I?I.revenue-I.cogs-((F==null?void 0:F.payroll)||0)-((q==null?void 0:q.opex)||0):0},ee=Object.entries(x).map(([V,I])=>{const F=I.year,q=Z(F),de=q*I.exitMultiple,H=de*N,Y=F-e.scenarioSettings.startYear,G=z(C,H,Y),J=C>0?H/C:0;return{scenario:V,year:F,exitMultiple:I.exitMultiple,probability:I.probability,ebitdaAtExit:q,exitValuation:de,investorReturn:H,irr:G,multiple:J}}),le=l.map(V=>{const I=t.revenueByYear.find(J=>J.year===V),F=t.payrollByYear.find(J=>J.year===V),q=t.opexByYear.find(J=>J.year===V),de=t.capexByYear.find(J=>J.year===V),re=(I==null?void 0:I.revenue)||0,H=re-((I==null?void 0:I.cogs)||0),Y=H-((F==null?void 0:F.payroll)||0)-((q==null?void 0:q.opex)||0),G=Y-((de==null?void 0:de.depreciation)||0);return{year:V,revenue:re/1e3,grossMargin:H/1e3,ebitda:Y/1e3,ebit:G/1e3}});return s.jsx(Qi,{tabKey:"valuation",children:s.jsxs("div",{className:"space-y-6",children:[s.jsx(Rs,{image:"rd",title:"Valorisation & Analyse",subtitle:"Mthodes de valorisation, historique et simulation de dilution",height:"sm"}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(Oe,{variant:"outline",className:"text-xs",children:[d.length," mthodes slectionnes"]}),s.jsxs(Oe,{variant:"secondary",className:"text-xs",children:["Valorisation moyenne: ",te(M,!0)]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(nf,{pageTitle:"Valorisation & Analyse",sections:DPe,fileName:"Valorisation"}),s.jsx(zd,{onSave:a,hasUnsavedChanges:e.hasUnsavedChanges,lastSaved:e.lastSaved?new Date(e.lastSaved):null})]})]}),(()=>{const V=Math.max(2e5,R.ebitda*v.ebitdaMultiple),I=v.totalRaise*(1-v.ocRatio),F=V+I,q=F>0?I/F:0,de=ee.reduce((H,Y)=>H+Y.irr*Y.probability,0),re=f==="average"?"moyenne":f==="historical"?"historique":f==="mixed"?"mixte":"projet";return s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",id:"valuation-kpis",children:[s.jsx(yt,{label:"Pre-Money (EBITDA)",value:te(V,!0),subValue:`${v.ebitdaMultiple.toFixed(1)}x EBITDA ${re}`}),s.jsx(yt,{label:"Post-Money",value:te(F,!0),subValue:`Leve: ${te(v.totalRaise,!0)}`}),s.jsx(yt,{label:"Dilution Totale",value:tn(q),subValue:"Part investisseur"}),s.jsx(yt,{label:"TRI moyen",value:tn(de),subValue:"Pondr par probabilit"})]})})(),s.jsxs(xi,{defaultValue:"historical",className:"space-y-4",children:[s.jsxs(Fa,{className:"flex flex-wrap",children:[s.jsx(At,{value:"historical",children:"Historique Financier"}),s.jsx(At,{value:"methods",children:"Mthodes de Valorisation"}),s.jsx(At,{value:"dilution",children:"Simulation Dilution"}),s.jsx(At,{value:"exit",children:"Scnarios de Sortie"})]}),s.jsx(Ft,{value:"historical",className:"space-y-6",children:s.jsx(EPe,{data:e.historicalData,onChange:r})}),s.jsxs(Ft,{value:"methods",className:"space-y-6",children:[s.jsxs(Ye,{title:"Base de Calcul",children:[s.jsx("div",{className:"grid md:grid-cols-4 gap-4 mb-4",children:[{value:"historical",label:"Historique",desc:"Bas sur les donnes passes"},{value:"projected",label:"Projet",desc:"Bas sur les projections futures"},{value:"mixed",label:"Mixte",desc:"Combinaison historique + projet"},{value:"average",label:"Moyenne",desc:"Moyenne de plusieurs annes"}].map(V=>s.jsxs("button",{onClick:()=>u({valuationBasis:V.value}),className:ue("p-4 rounded-lg text-left transition-colors border-2",f===V.value?"bg-primary/10 border-primary":"bg-muted/30 border-transparent hover:bg-muted/50"),children:[s.jsx("div",{className:"font-medium",children:V.label}),s.jsx("div",{className:"text-xs text-muted-foreground",children:V.desc})]},V.value))}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[(f==="historical"||f==="mixed")&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ne,{children:"Anne historique de rfrence"}),s.jsx("div",{className:"flex gap-2",children:E.map(V=>s.jsx(ae,{size:"sm",variant:h===V?"default":"outline",onClick:()=>u({historicalYear:V}),children:V},V))})]}),(f==="projected"||f==="mixed")&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ne,{children:"Anne projete de rfrence"}),s.jsx("div",{className:"flex gap-2",children:l.filter((V,I)=>I>=Math.max(0,l.length-4)).map(V=>s.jsx(ae,{size:"sm",variant:m===V?"default":"outline",onClick:()=>u({projectedYear:V}),children:V},V))})]})]}),f==="average"&&s.jsxs("div",{className:"mt-4 space-y-3",children:[s.jsx(Ne,{children:"Slectionnez les annes de rfrence pour le calcul de la moyenne"}),s.jsx("div",{className:"flex flex-wrap gap-3",children:A.map(V=>{const I=g.includes(V),F=E.includes(V);return s.jsxs("label",{className:ue("flex items-center gap-2 px-3 py-2 rounded-lg border-2 cursor-pointer transition-colors",I?"bg-primary/10 border-primary":"bg-muted/30 border-transparent hover:bg-muted/50"),children:[s.jsx(hi,{checked:I,onCheckedChange:()=>L(V)}),s.jsx("span",{className:"text-sm font-medium",children:V}),s.jsx(Oe,{variant:"outline",className:"text-[10px]",children:F?"Hist.":"Proj."})]},V)})}),g.length>0&&s.jsxs("p",{className:"text-sm text-muted-foreground",children:[g.length," anne",g.length>1?"s":""," slectionne",g.length>1?"s":""," : ",g.join(", ")]})]}),f==="mixed"&&s.jsxs("div",{className:"mt-4 space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{children:"Pondration"}),s.jsxs("span",{children:[Math.round((1-y)*100),"% historique / ",Math.round(y*100),"% projet"]})]}),s.jsx(Ir,{value:[y*100],onValueChange:([V])=>u({mixWeight:V/100}),min:0,max:100,step:5})]}),s.jsxs("div",{className:"mt-4 p-4 bg-muted/30 rounded-lg grid grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"text-xs text-muted-foreground",children:["CA de rfrence",f==="average"?" (moyenne)":""]}),s.jsx("div",{className:"text-lg font-bold font-mono-numbers",children:te(R.revenue,!0)})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"text-xs text-muted-foreground",children:["EBITDA de rfrence",f==="average"?" (moyenne)":""]}),s.jsx("div",{className:ue("text-lg font-bold font-mono-numbers",R.ebitda<0&&"text-destructive"),children:te(R.ebitda,!0)})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"text-xs text-muted-foreground",children:["EBIT de rfrence",f==="average"?" (moyenne)":""]}),s.jsx("div",{className:ue("text-lg font-bold font-mono-numbers",R.ebit<0&&"text-destructive"),children:te(R.ebit,!0)})]})]})]}),s.jsxs(Ye,{title:"Slection des Mthodes",children:[s.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:FT.filter(V=>V.id==="revenue_multiple"||V.id==="ebitda_multiple").map(V=>{const I=d.includes(V.id),F=O.find(q=>q.method===V.id);return s.jsxs("button",{onClick:()=>D(V.id),className:ue("p-4 rounded-lg text-left transition-all border-2",I?"bg-primary/10 border-primary shadow-sm":"bg-muted/30 border-transparent hover:bg-muted/50"),children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"font-medium text-sm",children:V.name}),I&&s.jsx(Oe,{variant:"default",className:"text-xs",children:"Actif"})]}),s.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:V.description}),F&&s.jsx("div",{className:"text-lg font-bold font-mono-numbers",children:te(F.value,!0)})]},V.id)})}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mt-6 p-4 bg-muted/30 rounded-lg",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx(Ne,{children:"Multiple CA"}),s.jsxs("span",{className:"font-mono-numbers font-bold",children:[p.revenue_multiple.multiple.toFixed(1),"x"]})]}),s.jsx(Ir,{value:[p.revenue_multiple.multiple],onValueChange:([V])=>u({valuationParams:{...p,revenue_multiple:{...p.revenue_multiple,multiple:V}}}),min:.5,max:10,step:.5}),d.includes("revenue_multiple")&&s.jsxs("p",{className:"text-xs text-muted-foreground",children:["= ",te(R.revenue,!0),"  ",p.revenue_multiple.multiple.toFixed(1)," = ",s.jsx("span",{className:"font-bold",children:te(R.revenue*p.revenue_multiple.multiple,!0)})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx(Ne,{children:"Multiple EBITDA"}),s.jsxs("span",{className:"font-mono-numbers font-bold",children:[v.ebitdaMultiple.toFixed(1),"x"]})]}),s.jsx(Ir,{value:[v.ebitdaMultiple],onValueChange:([V])=>u({dilutionConfig:{...v,ebitdaMultiple:V}}),min:2,max:15,step:.5}),d.includes("ebitda_multiple")&&s.jsxs("p",{className:"text-xs text-muted-foreground",children:["= ",te(R.ebitda,!0),"  ",v.ebitdaMultiple.toFixed(1)," = ",s.jsx("span",{className:"font-bold",children:te(R.ebitda*v.ebitdaMultiple,!0)})]})]})]})]}),O.length>0&&s.jsx(Ye,{title:"Comparaison des Valorisations",children:s.jsx("div",{className:"h-64",children:s.jsx(Wr,{width:"100%",height:"100%",children:s.jsxs(Ps,{data:B,layout:"vertical",children:[s.jsx(qr,{strokeDasharray:"3 3"}),s.jsx(mr,{type:"number",tickFormatter:V=>`${V}M`}),s.jsx(nr,{type:"category",dataKey:"name",width:120}),s.jsx($t,{formatter:V=>`${V.toFixed(1)}M`}),s.jsx(rr,{dataKey:"value",fill:"hsl(var(--primary))",radius:[0,4,4,0]})]})})})})]}),s.jsx(Ft,{value:"dilution",className:"space-y-6",children:s.jsx(yY,{config:v,onChange:V=>u({dilutionConfig:V})})}),s.jsxs(Ft,{value:"exit",className:"space-y-6",children:[s.jsx(Ye,{title:"Paramtres des Scnarios de Sortie",children:s.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:[{key:"conservative",label:"Prudent",color:"text-muted-foreground"},{key:"base",label:"Base",color:"text-primary"},{key:"ambitious",label:"Ambitieux",color:"text-green-600 dark:text-green-400"}].map(({key:V,label:I,color:F})=>s.jsxs("div",{className:"space-y-3 p-4 bg-muted/30 rounded-lg",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:ue("font-medium",F),children:I}),s.jsx(Oe,{variant:"outline",children:x[V].year})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{children:"Multiple EBITDA sortie"}),s.jsxs("span",{className:"font-mono-numbers font-bold",children:[x[V].exitMultiple,"x"]})]}),s.jsx(Ir,{value:[x[V].exitMultiple],onValueChange:([q])=>u({exitScenarios:{...x,[V]:{...x[V],exitMultiple:q}}}),min:2,max:15,step:.5})]})]},V))})}),s.jsx("div",{className:"grid md:grid-cols-3 gap-4",children:ee.map(V=>s.jsx(Ye,{title:V.scenario==="conservative"?"Prudent":V.scenario==="base"?"Base":"Ambitieux",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"Anne sortie"}),s.jsx("p",{className:"text-xl font-bold",children:V.year})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"Multiple EBITDA"}),s.jsxs("p",{className:"text-xl font-bold",children:[V.exitMultiple,"x"]})]})]}),s.jsxs("div",{className:"p-3 bg-muted/30 rounded",children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"EBITDA  la sortie"}),s.jsx("p",{className:"font-bold font-mono-numbers",children:te(V.ebitdaAtExit,!0)})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"Valorisation sortie"}),s.jsx("p",{className:"font-bold font-mono-numbers",children:te(V.exitValuation,!0)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"Part investisseur"}),s.jsx("p",{className:"font-bold font-mono-numbers",children:te(V.investorReturn,!0)})]})]}),s.jsxs("div",{className:"pt-4 border-t",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm",children:"TRI"}),s.jsx("span",{className:ue("font-bold font-mono-numbers",V.irr>=.25?"text-green-600 dark:text-green-400":V.irr>=.15?"text-amber-600 dark:text-amber-400":"text-destructive"),children:tn(V.irr)})]}),s.jsxs("div",{className:"flex justify-between items-center mt-2",children:[s.jsx("span",{className:"text-sm",children:"Multiple"}),s.jsxs("span",{className:"font-bold font-mono-numbers",children:[V.multiple.toFixed(1),"x"]})]}),s.jsxs("div",{className:"flex justify-between items-center mt-2",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Probabilit"}),s.jsx("span",{className:"text-muted-foreground",children:tn(V.probability)})]})]})]})},V.scenario))}),s.jsx(Ye,{title:"volution Prvisionnelle P&L",children:s.jsx("div",{className:"h-64",children:s.jsx(Wr,{width:"100%",height:"100%",children:s.jsxs(bF,{data:le,children:[s.jsx(qr,{strokeDasharray:"3 3"}),s.jsx(mr,{dataKey:"year"}),s.jsx(nr,{tickFormatter:V=>`${V}k`}),s.jsx($t,{formatter:V=>`${V.toFixed(0)}k`}),s.jsx(Vr,{}),s.jsx(ma,{type:"monotone",dataKey:"revenue",name:"CA",stackId:"1",fill:"hsl(0, 85%, 50%)",stroke:"hsl(0, 85%, 50%)",fillOpacity:.3}),s.jsx(ma,{type:"monotone",dataKey:"ebitda",name:"EBITDA",stackId:"2",fill:"hsl(38, 92%, 50%)",stroke:"hsl(38, 92%, 50%)",fillOpacity:.6}),s.jsx(ma,{type:"monotone",dataKey:"ebit",name:"EBIT",stackId:"3",fill:"hsl(210, 70%, 50%)",stroke:"hsl(210, 70%, 50%)",fillOpacity:.8})]})})})})]})]})]})})}function BPe(){return s.jsxs(ae,{variant:"outline",size:"sm",onClick:()=>window.print(),children:[s.jsx(Ym,{className:"h-4 w-4 mr-1"}),"Export PDF"]})}const FPe={conservative:"Prudent",base:"Base",ambitious:"Ambitieux"},zPe={"by-product":"Par Produit","by-channel-global":"Global Canaux","by-client":"Par Client"},UPe={cash:!0,clientDeck:!0,needs:!0,payroll:!0,projection:!0,valuation:!0},zT={cash:"Approche Cash",clientDeck:"Deck CA Clients",needs:"Justification des Besoins",payroll:"Masse Salariale",projection:"Projection Dtaille",valuation:"Valorisation & Tours"};function VPe(){var Z,ee,le,V;const{state:e,computed:t,setRevenueMode:r}=Ki(),[n,a]=w.useState(UPe),[i,o]=w.useState(!1),l=I=>{a(F=>({...F,[I]:!F[I]}))},{monthlyTreasuryProjection:c}=t,{startYear:u,durationYears:d,initialCash:f}=e.scenarioSettings,h=u+d-1,m=Array.from({length:d},(I,F)=>u+F),y=w.useMemo(()=>{const I=Id(c.months);return m.map(F=>{const q=I.get(F);if(!q)return{year:F,revenue:0,cogs:0,grossMargin:0,payroll:0,opex:0,variableCharges:0,loanPayments:0,fundingInjection:0,netCashFlow:0,treasuryStart:0,treasuryEnd:0,ebitda:0,capex:0};const re=c.months.filter(H=>H.year===F).reduce((H,Y)=>H+Y.capexPayments,0);return{...q,capex:re}})},[c,m]),g=c.totalFundingRaised,p=f+g,v=c.minTreasury,x=((Z=c.breakEvenMonth)==null?void 0:Z.year)||"N/A",b=v<0,_=(ee=y.find(I=>I.treasuryEnd<0))==null?void 0:ee.year;w.useMemo(()=>{const I=c.months.filter(F=>F.netCashFlow<0);return I.length===0?0:Math.max(...I.map(F=>Math.abs(F.netCashFlow)))},[c]);const j=w.useMemo(()=>{const I=c.months.filter(F=>F.netCashFlow<0);return I.length===0?0:I.reduce((F,q)=>F+Math.abs(q.netCashFlow),0)/I.length},[c]),S=j>0?Math.round(p/j):99,C=y.reduce((I,F)=>I+F.revenue,0),P=y.reduce((I,F)=>I+F.payroll,0),N=y.reduce((I,F)=>I+F.opex,0),E=c.totalCapexPayments,A=y.reduce((I,F)=>I+F.cogs,0),T=P+N+E+A,R=Math.max(0,-v),k=g-R,O=y.map(I=>({year:I.year,"Cash Flow":I.netCashFlow/1e3,Trsorerie:I.treasuryEnd/1e3})),M=e.fundingRounds[e.fundingRounds.length-1],D=M?M.preMoneyValuation+M.amount:0,L=M?M.amount/D:0,B=w.useMemo(()=>{var G;if(e.revenueMode!=="by-client")return null;const I=e.clientRevenueConfig;if(!((G=I==null?void 0:I.entries)!=null&&G.length))return null;const F=(J,ge)=>{if(J.revenueByYear[ge]!==void 0)return J.revenueByYear[ge];const Ce=J.individualGrowthRate??I.growthRate,$e=m[0],Ge=ge-$e;return Ge<=0?J.baseRevenue:J.baseRevenue*Math.pow(1+Ce,Ge)},q=J=>{var ge;return J.channel==="B2C"?I.marginB2C??I.marginRate:J.categoryId&&((ge=I.marginByCategory)==null?void 0:ge[J.categoryId])!==void 0?I.marginByCategory[J.categoryId]:I.marginRate},re=["B2C","B2B","OEM"].map(J=>{const ge=I.entries.filter(Ce=>Ce.channel===J);return{channel:J,count:ge.length,revenueByYear:m.map(Ce=>ge.reduce(($e,Ge)=>$e+F(Ge,Ce),0)),totalRevenue:m.reduce((Ce,$e)=>Ce+ge.reduce((Ge,dt)=>Ge+F(dt,$e),0),0)}}).filter(J=>J.count>0),H=I.entries.map(J=>({name:J.clientName,channel:J.channel,category:J.categoryName||"Sans catgorie",marginRate:q(J),total:m.reduce((ge,Ce)=>ge+F(J,Ce),0),revenueByYear:m.map(ge=>F(J,ge))})).sort((J,ge)=>ge.total-J.total),Y=m.map((J,ge)=>{const Ce={year:J};return re.forEach($e=>{Ce[$e.channel]=$e.revenueByYear[ge]/1e3}),Ce});return{channelData:re,clientTotals:H,stackedChartData:Y}},[e.revenueMode,e.clientRevenueConfig,m]),z={B2C:"#e11d48",B2B:"hsl(var(--primary))",OEM:"#f59e0b"};return s.jsxs("div",{className:"space-y-6",children:[s.jsx(Rs,{image:"ccd-evo",title:"Synthse Investisseur",subtitle:"Vue consolide du projet - Approche Cash",height:"sm"}),s.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx(Oe,{variant:"default",children:FPe[e.activeScenarioId]}),s.jsxs(st,{value:e.revenueMode,onValueChange:I=>r(I),children:[s.jsx(at,{className:"h-8 w-[160px] text-xs",children:s.jsx(ot,{})}),s.jsxs(it,{children:[s.jsx(Le,{value:"by-product",children:"Par Produit"}),s.jsx(Le,{value:"by-channel-global",children:"Global Canaux"}),s.jsx(Le,{value:"by-client",children:"Par Client"})]})]}),s.jsxs(Oe,{variant:"outline",className:"text-xs",children:[u,"  ",h," (",d," ans)"]}),s.jsxs(Oe,{variant:"secondary",className:"text-xs gap-1",children:[s.jsx(Jf,{className:"h-3 w-3"}),e.products.length," produits"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(ae,{size:"sm",variant:"outline",onClick:()=>o(!i),className:"gap-1",children:[s.jsx(Mu,{className:"h-4 w-4"}),"Sections"]}),s.jsx(BPe,{})]})]}),i&&s.jsxs("div",{className:"p-4 bg-muted/30 border rounded-lg",children:[s.jsx("h4",{className:"text-sm font-semibold mb-3",children:"Afficher / Masquer les sections du rapport"}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:Object.keys(zT).map(I=>s.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[s.jsx(A0,{checked:n[I],onCheckedChange:()=>l(I)}),s.jsx("span",{className:ue(!n[I]&&"text-muted-foreground line-through"),children:zT[I]})]},I))})]}),b&&s.jsxs("div",{className:"p-4 bg-destructive/10 border border-destructive/30 rounded-lg flex items-center gap-3",children:[s.jsx($u,{className:"h-6 w-6 text-destructive flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold text-destructive",children:"Alerte : Trsorerie Ngative"}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Solde prvu ngatif en ",_,". Point bas: ",te(v,!0),". Financement additionnel de ",te(Math.abs(v),!0)," requis."]})]})]}),n.cash&&s.jsxs(Ye,{title:"Approche Cash",id:"cash-approach",children:[s.jsxs("div",{className:"grid md:grid-cols-5 gap-4 mb-6",children:[s.jsxs("div",{className:"p-4 rounded-lg bg-muted/50 border",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-1",children:[s.jsx(LI,{className:"h-4 w-4"}),"Cash Initial (T0)"]}),s.jsx("div",{className:"text-2xl font-bold font-mono-numbers",children:te(f,!0)})]}),s.jsxs("div",{className:"p-4 rounded-lg bg-primary/10 border border-primary/30",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-1",children:[s.jsx(gk,{className:"h-4 w-4"}),"Montant Lev"]}),s.jsx("div",{className:"text-2xl font-bold font-mono-numbers text-primary",children:te(g,!0)}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.fundingRounds.length," tour(s)"]})]}),s.jsxs("div",{className:"p-4 rounded-lg bg-accent/10 border border-accent/30",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-1",children:[s.jsx(rv,{className:"h-4 w-4"}),"Trso Dpart"]}),s.jsx("div",{className:"text-2xl font-bold font-mono-numbers",children:te(p,!0)})]}),s.jsxs("div",{className:ue("p-4 rounded-lg border",v<0?"bg-destructive/10 border-destructive/30":"bg-muted/50"),children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-1",children:[v<0?s.jsx(US,{className:"h-4 w-4"}):s.jsx(rc,{className:"h-4 w-4"}),"Point Bas"]}),s.jsx("div",{className:ue("text-2xl font-bold font-mono-numbers",v<0&&"text-destructive"),children:te(v,!0)})]}),s.jsxs("div",{className:"p-4 rounded-lg bg-muted/50 border",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-1",children:[s.jsx(Jf,{className:"h-4 w-4"}),"Break-even"]}),s.jsx("div",{className:"text-2xl font-bold font-mono-numbers",children:x}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:["Runway: ",S>60?"60+":S," mois"]})]})]}),s.jsx("div",{className:"h-72",children:s.jsx(Wr,{width:"100%",height:"100%",children:s.jsxs(md,{data:O,children:[s.jsx(qr,{strokeDasharray:"3 3"}),s.jsx(mr,{dataKey:"year"}),s.jsx(nr,{tickFormatter:I=>`${I}k`}),s.jsx($t,{formatter:I=>`${I.toFixed(0)}k`}),s.jsx(Vr,{}),s.jsx(rr,{dataKey:"Cash Flow",fill:"hsl(var(--accent))"}),s.jsx(Dn,{type:"monotone",dataKey:"Trsorerie",stroke:"hsl(var(--primary))",strokeWidth:3,dot:{r:4}})]})})})]}),n.clientDeck&&s.jsx(Ye,{title:"Deck  Chiffre d'Affaires",id:"client-deck",children:e.revenueMode==="by-client"&&B?s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"grid md:grid-cols-3 gap-4",children:B.channelData.map(I=>s.jsxs("div",{className:"p-5 rounded-xl border-2",style:{borderColor:z[I.channel]+"40",background:z[I.channel]+"08"},children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx(Oe,{style:{backgroundColor:z[I.channel],color:"white"},children:I.channel}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:[I.count," client(s)"]})]}),s.jsx("div",{className:"text-2xl font-bold font-mono-numbers mb-1",children:te(I.totalRevenue,!0)}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:["CA cumul ",u,"",h]}),s.jsx("div",{className:"flex gap-2 mt-3",children:I.revenueByYear.map((F,q)=>s.jsxs("div",{className:"text-center flex-1",children:[s.jsx("div",{className:"text-[10px] text-muted-foreground",children:m[q]}),s.jsxs("div",{className:"text-xs font-mono-numbers font-medium",children:[(F/1e3).toFixed(0),"k"]})]},m[q]))})]},I.channel))}),s.jsx("div",{className:"h-64",children:s.jsx(Wr,{width:"100%",height:"100%",children:s.jsxs(Ps,{data:B.stackedChartData,children:[s.jsx(qr,{strokeDasharray:"3 3"}),s.jsx(mr,{dataKey:"year"}),s.jsx(nr,{tickFormatter:I=>`${I}k`}),s.jsx($t,{formatter:I=>`${I.toFixed(0)}k`}),s.jsx(Vr,{}),B.channelData.map(I=>s.jsx(rr,{dataKey:I.channel,stackId:"a",fill:z[I.channel]},I.channel))]})})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold mb-3 text-sm",children:"Top Clients"}),s.jsx("div",{className:"overflow-x-auto border rounded-lg",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b bg-muted/30",children:[s.jsx("th",{className:"text-left py-2 px-3 font-semibold text-xs",children:"Client"}),s.jsx("th",{className:"text-left py-2 px-3 font-semibold text-xs",children:"Canal"}),s.jsx("th",{className:"text-left py-2 px-3 font-semibold text-xs",children:"Catgorie"}),s.jsx("th",{className:"text-right py-2 px-3 font-semibold text-xs",children:"Marge"}),m.map(I=>s.jsx("th",{className:"text-right py-2 px-3 font-semibold text-xs",children:I},I)),s.jsx("th",{className:"text-right py-2 px-3 font-semibold text-xs",children:"Total"})]})}),s.jsx("tbody",{children:B.clientTotals.slice(0,15).map((I,F)=>s.jsxs("tr",{className:"border-b hover:bg-muted/20 text-xs",children:[s.jsx("td",{className:"py-2 px-3 font-medium",children:I.name}),s.jsx("td",{className:"py-2 px-3",children:s.jsx(Oe,{variant:"outline",className:"text-[10px]",style:{borderColor:z[I.channel]},children:I.channel})}),s.jsx("td",{className:"py-2 px-3 text-muted-foreground",children:I.category}),s.jsxs("td",{className:"py-2 px-3 text-right font-mono-numbers",children:[(I.marginRate*100).toFixed(0),"%"]}),I.revenueByYear.map((q,de)=>s.jsx("td",{className:"py-2 px-3 text-right font-mono-numbers",children:te(q,!0)},m[de])),s.jsx("td",{className:"py-2 px-3 text-right font-mono-numbers font-semibold",children:te(I.total,!0)})]},F))})]})})]})]}):s.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[s.jsx(zl,{className:"h-12 w-12 mx-auto mb-3 opacity-30"}),s.jsx("p",{className:"font-medium",children:e.revenueMode==="by-client"?"Aucun client configur  ajoutez des entres dans le Plan Produit":`Mode actuel : ${zPe[e.revenueMode]}`}),s.jsx("p",{className:"text-sm mt-1",children:"Passez en mode  Par Client  pour afficher le deck CA dtaill par client."})]})}),n.needs&&s.jsxs(Ye,{title:"Justification des Besoins",id:"needs-justification",children:[s.jsxs("div",{className:"grid lg:grid-cols-2 gap-6 mb-6",children:[s.jsxs("div",{children:[s.jsxs("h4",{className:"font-semibold mb-4 flex items-center gap-2",children:[s.jsx(mk,{className:"h-4 w-4"}),"Rpartition Globale (",u,"-",h,")"]}),s.jsxs("div",{className:"space-y-3",children:[[{label:"Masse Salariale",value:P,icon:zl,color:"hsl(var(--primary))"},{label:"COGS (Cot des ventes)",value:A,icon:Fl,color:"hsl(var(--chart-4))"},{label:"OPEX (Charges)",value:N,icon:mk,color:"hsl(var(--accent))"},{label:"CAPEX (R&D)",value:E,icon:rv,color:"hsl(var(--chart-1))"}].map(I=>{const F=I.icon,q=T>0?I.value/T*100:0;return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(F,{className:"h-4 w-4",style:{color:I.color}}),s.jsx("span",{children:I.label})]}),s.jsx("span",{className:"font-mono-numbers font-medium",children:te(I.value,!0)})]}),s.jsx("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full rounded-full transition-all",style:{width:`${q}%`,backgroundColor:I.color}})}),s.jsxs("div",{className:"text-xs text-muted-foreground text-right",children:[q.toFixed(0),"%"]})]},I.label)}),s.jsxs("div",{className:"pt-3 border-t flex justify-between font-semibold",children:[s.jsx("span",{children:"Total Cots"}),s.jsx("span",{className:"font-mono-numbers",children:te(T,!0)})]})]})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"font-semibold mb-4 flex items-center gap-2",children:[s.jsx(gk,{className:"h-4 w-4"}),"Adquation Besoin / Financement"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"p-4 bg-muted/30 rounded-lg border",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("span",{className:"text-sm",children:"Besoin de Financement"}),s.jsx(Oe,{variant:"secondary",children:"Calcul"})]}),s.jsx("div",{className:"text-2xl font-bold font-mono-numbers",children:te(R,!0)}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Somme des cash-flows ngatifs sur la priode"})]}),s.jsxs("div",{className:"p-4 bg-primary/10 rounded-lg border border-primary/30",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("span",{className:"text-sm",children:"Montant Lev"}),s.jsx(Oe,{variant:"default",children:(M==null?void 0:M.name)||"Round"})]}),s.jsx("div",{className:"text-2xl font-bold font-mono-numbers text-primary",children:te(g,!0)})]}),s.jsxs("div",{className:ue("p-4 rounded-lg border-2",k>=0?"bg-chart-4/10 border-chart-4/30":"bg-destructive/10 border-destructive/30"),children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm font-medium",children:k>=0?"Marge de Scurit":"Dficit"}),s.jsxs("span",{className:ue("text-xl font-bold font-mono-numbers",k>=0?"text-chart-4":"text-destructive"),children:[k>=0?"+":"",te(k,!0)]})]}),k>=0&&s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Buffer de ",tn(k/g)," sur le montant lev"]})]})]})]})]}),s.jsxs("div",{className:"mt-6",children:[s.jsxs("h4",{className:"font-semibold mb-3 flex items-center gap-2 text-sm",children:[s.jsx(Jf,{className:"h-4 w-4"}),"Dtail Anne par Anne"]}),s.jsx("div",{className:"overflow-x-auto border rounded-lg",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b bg-muted/30",children:[s.jsx("th",{className:"text-left py-2 px-3 font-semibold text-xs",children:"Anne"}),s.jsx("th",{className:"text-right py-2 px-3 font-semibold text-xs",children:"CA"}),s.jsx("th",{className:"text-right py-2 px-3 font-semibold text-xs",children:"COGS"}),s.jsx("th",{className:"text-right py-2 px-3 font-semibold text-xs",children:"Masse Sal."}),s.jsx("th",{className:"text-right py-2 px-3 font-semibold text-xs",children:"OPEX"}),s.jsx("th",{className:"text-right py-2 px-3 font-semibold text-xs",children:"CAPEX"}),s.jsx("th",{className:"text-right py-2 px-3 font-semibold text-xs",children:"Total Cots"}),s.jsx("th",{className:"text-right py-2 px-3 font-semibold text-xs",children:"Cash Flow"})]})}),s.jsx("tbody",{children:y.map(I=>{const F=I.cogs+I.payroll+I.opex+I.capex;return s.jsxs("tr",{className:"border-b hover:bg-muted/20 text-xs",children:[s.jsx("td",{className:"py-2 px-3 font-semibold",children:I.year}),s.jsx("td",{className:"py-2 px-3 text-right font-mono-numbers",children:te(I.revenue,!0)}),s.jsx("td",{className:"py-2 px-3 text-right font-mono-numbers text-muted-foreground",children:te(I.cogs,!0)}),s.jsx("td",{className:"py-2 px-3 text-right font-mono-numbers text-muted-foreground",children:te(I.payroll,!0)}),s.jsx("td",{className:"py-2 px-3 text-right font-mono-numbers text-muted-foreground",children:te(I.opex,!0)}),s.jsx("td",{className:"py-2 px-3 text-right font-mono-numbers text-muted-foreground",children:te(I.capex,!0)}),s.jsx("td",{className:"py-2 px-3 text-right font-mono-numbers font-medium",children:te(F,!0)}),s.jsxs("td",{className:ue("py-2 px-3 text-right font-mono-numbers font-medium",I.netCashFlow>=0?"text-chart-4":"text-destructive"),children:[I.netCashFlow>=0?"+":"",te(I.netCashFlow,!0)]})]},I.year)})})]})})]})]}),n.payroll&&s.jsx(Ye,{title:"Masse Salariale & Embauches",id:"payroll-detail",children:(()=>{var Y,G;const I=e.roles||[],F={"R&D":"hsl(var(--chart-1))",Production:"hsl(var(--chart-4))",Sales:"hsl(var(--accent))",Support:"hsl(var(--chart-3))",Admin:"hsl(var(--primary))"},q=m.map(J=>{const ge=I.filter($e=>$e.startYear<=J),Ce={};return ge.forEach($e=>{Ce[$e.department]=(Ce[$e.department]||0)+$e.annualCostLoaded}),{year:J,total:ge.reduce(($e,Ge)=>$e+Ge.annualCostLoaded,0),byDept:Ce,headcount:ge.length}}),de=m.map(J=>({year:J,hires:I.filter(ge=>ge.startYear===J)})),re=[...new Set(I.map(J=>J.department))],H=q.map(J=>{const ge={year:J.year,Effectif:J.headcount};return re.forEach(Ce=>{ge[Ce]=(J.byDept[Ce]||0)/1e3}),ge});return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[s.jsx(yt,{label:"Effectif Final",value:((Y=q[q.length-1])==null?void 0:Y.headcount)||0,subValue:`en ${h}`}),s.jsx(yt,{label:"Masse Sal. Finale",value:te(((G=q[q.length-1])==null?void 0:G.total)||0,!0),subValue:`/an en ${h}`}),s.jsx(yt,{label:"Cot Total Priode",value:te(P,!0),subValue:`${u}${h}`}),s.jsx(yt,{label:"Cot Moyen / ETP",value:I.length>0?te(P/d/(I.length||1),!0):"",subValue:"/an moyen"})]}),s.jsx("div",{className:"h-64",children:s.jsx(Wr,{width:"100%",height:"100%",children:s.jsxs(md,{data:H,children:[s.jsx(qr,{strokeDasharray:"3 3"}),s.jsx(mr,{dataKey:"year"}),s.jsx(nr,{yAxisId:"left",tickFormatter:J=>`${J}k`}),s.jsx(nr,{yAxisId:"right",orientation:"right"}),s.jsx($t,{formatter:(J,ge)=>ge==="Effectif"?J:`${J.toFixed(0)}k`}),s.jsx(Vr,{}),re.map(J=>s.jsx(rr,{yAxisId:"left",dataKey:J,stackId:"a",fill:F[J]||"hsl(var(--muted-foreground))"},J)),s.jsx(Dn,{yAxisId:"right",type:"monotone",dataKey:"Effectif",stroke:"hsl(var(--foreground))",strokeWidth:2,dot:{r:3}})]})})}),s.jsxs("div",{children:[s.jsxs("h4",{className:"font-semibold mb-3 flex items-center gap-2 text-sm",children:[s.jsx(ZW,{className:"h-4 w-4"}),"Planning des Embauches"]}),s.jsxs("div",{className:"space-y-4",children:[de.filter(J=>J.hires.length>0).map(({year:J,hires:ge})=>s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(Oe,{variant:"outline",className:"text-xs",children:J}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:[ge.length," embauche(s)"]})]}),s.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-2",children:ge.map(Ce=>s.jsxs("div",{className:"p-3 bg-muted/30 rounded-lg border flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium",children:Ce.title}),s.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[s.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:F[Ce.department]||"hsl(var(--muted-foreground))"}}),s.jsx("span",{className:"text-[10px] text-muted-foreground",children:Ce.department})]})]}),s.jsx("div",{className:"text-sm font-mono-numbers font-semibold",children:te(Ce.annualCostLoaded,!0)})]},Ce.id))})]},J)),de.every(J=>J.hires.length===0)&&s.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Aucun poste configur  rendez-vous dans l'onglet Organisation"})]})]}),s.jsx("div",{className:"overflow-x-auto border rounded-lg",children:s.jsxs("table",{className:"w-full text-xs",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b bg-muted/30",children:[s.jsx("th",{className:"text-left py-2 px-3 font-semibold",children:"Poste"}),s.jsx("th",{className:"text-left py-2 px-3 font-semibold",children:"Dpartement"}),s.jsx("th",{className:"text-right py-2 px-3 font-semibold",children:"Arrive"}),s.jsx("th",{className:"text-right py-2 px-3 font-semibold",children:"Cot charg /an"}),m.map(J=>s.jsx("th",{className:"text-center py-2 px-3 font-semibold",children:J},J))]})}),s.jsx("tbody",{children:I.sort((J,ge)=>J.startYear-ge.startYear||J.department.localeCompare(ge.department)).map(J=>s.jsxs("tr",{className:"border-b hover:bg-muted/20",children:[s.jsx("td",{className:"py-2 px-3 font-medium",children:J.title}),s.jsx("td",{className:"py-2 px-3",children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:F[J.department]||"hsl(var(--muted-foreground))"}}),J.department]})}),s.jsx("td",{className:"py-2 px-3 text-right font-mono-numbers",children:J.startYear}),s.jsx("td",{className:"py-2 px-3 text-right font-mono-numbers",children:te(J.annualCostLoaded,!0)}),m.map(ge=>s.jsx("td",{className:"py-2 px-3 text-center",children:J.startYear<=ge?s.jsx("span",{className:"inline-block w-4 h-4 rounded-full bg-primary/20 text-primary text-[10px] leading-4",children:""}):s.jsx("span",{className:"text-muted-foreground/30",children:""})},ge))]},J.id))}),s.jsx("tfoot",{children:s.jsxs("tr",{className:"border-t-2 bg-muted/30 font-semibold text-xs",children:[s.jsx("td",{className:"py-2 px-3",colSpan:3,children:"Total"}),s.jsx("td",{className:"py-2 px-3 text-right font-mono-numbers",children:""}),q.map(J=>s.jsxs("td",{className:"py-2 px-3 text-center font-mono-numbers",children:[(J.total/1e3).toFixed(0),"k"]},J.year))]})})]})})]})})()}),n.projection&&s.jsx(Ye,{title:"Projection Dtaille",id:"detailed-projection",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b bg-muted/30",children:[s.jsx("th",{className:"text-left py-3 px-3 font-semibold",children:"Anne"}),s.jsx("th",{className:"text-right py-3 px-3 font-semibold",children:"CA"}),s.jsx("th",{className:"text-right py-3 px-3 font-semibold",children:"COGS"}),s.jsx("th",{className:"text-right py-3 px-3 font-semibold",children:"Marge Brute"}),s.jsx("th",{className:"text-right py-3 px-3 font-semibold",children:"Masse Sal."}),s.jsx("th",{className:"text-right py-3 px-3 font-semibold",children:"OPEX"}),s.jsx("th",{className:"text-right py-3 px-3 font-semibold",children:"EBITDA"}),s.jsx("th",{className:"text-right py-3 px-3 font-semibold",children:"Amort."}),s.jsx("th",{className:"text-right py-3 px-3 font-semibold",children:"CAPEX"}),s.jsx("th",{className:"text-right py-3 px-3 font-semibold",children:"Cash Flow"}),s.jsx("th",{className:"text-right py-3 px-3 font-semibold",children:"Trsorerie"})]})}),s.jsx("tbody",{children:y.map(I=>s.jsxs("tr",{className:ue("border-b hover:bg-muted/20",I.treasuryEnd<0&&"bg-destructive/5"),children:[s.jsx("td",{className:"py-3 px-3 font-semibold",children:I.year}),s.jsx("td",{className:"py-3 px-3 text-right font-mono-numbers",children:te(I.revenue,!0)}),s.jsx("td",{className:"py-3 px-3 text-right font-mono-numbers text-muted-foreground",children:te(I.cogs,!0)}),s.jsx("td",{className:"py-3 px-3 text-right font-mono-numbers",children:te(I.grossMargin,!0)}),s.jsx("td",{className:"py-3 px-3 text-right font-mono-numbers text-muted-foreground",children:te(I.payroll,!0)}),s.jsx("td",{className:"py-3 px-3 text-right font-mono-numbers text-muted-foreground",children:te(I.opex,!0)}),s.jsx("td",{className:ue("py-3 px-3 text-right font-mono-numbers font-medium",I.ebitda>=0?"text-chart-4":"text-destructive"),children:te(I.ebitda,!0)}),s.jsx("td",{className:"py-3 px-3 text-right font-mono-numbers text-muted-foreground",children:"-"}),s.jsx("td",{className:"py-3 px-3 text-right font-mono-numbers text-muted-foreground",children:te(I.capex,!0)}),s.jsxs("td",{className:ue("py-3 px-3 text-right font-mono-numbers font-medium",I.netCashFlow>=0?"text-chart-4":"text-accent"),children:[I.netCashFlow>=0?"+":"",te(I.netCashFlow,!0)]}),s.jsx("td",{className:ue("py-3 px-3 text-right font-mono-numbers font-bold",I.treasuryEnd<0&&"text-destructive"),children:te(I.treasuryEnd,!0)})]},I.year))}),s.jsx("tfoot",{children:s.jsxs("tr",{className:"border-t-2 bg-muted/30 font-semibold",children:[s.jsx("td",{className:"py-3 px-3",children:"TOTAL"}),s.jsx("td",{className:"py-3 px-3 text-right font-mono-numbers",children:te(C,!0)}),s.jsx("td",{className:"py-3 px-3 text-right font-mono-numbers",children:te(A,!0)}),s.jsx("td",{className:"py-3 px-3 text-right font-mono-numbers",children:te(C-A,!0)}),s.jsx("td",{className:"py-3 px-3 text-right font-mono-numbers",children:te(P,!0)}),s.jsx("td",{className:"py-3 px-3 text-right font-mono-numbers",children:te(N,!0)}),s.jsx("td",{className:"py-3 px-3 text-right font-mono-numbers",children:"-"}),s.jsx("td",{className:"py-3 px-3 text-right font-mono-numbers",children:"-"}),s.jsx("td",{className:"py-3 px-3 text-right font-mono-numbers",children:te(E,!0)}),s.jsx("td",{className:"py-3 px-3 text-right font-mono-numbers",children:"-"}),s.jsx("td",{className:"py-3 px-3 text-right font-mono-numbers",children:te(((le=y[y.length-1])==null?void 0:le.treasuryEnd)||0,!0)})]})})]})})}),n.valuation&&s.jsxs(Ye,{title:"Valorisation & Tours",id:"valuation",children:[s.jsxs("div",{className:"grid md:grid-cols-4 gap-4 mb-6",children:[s.jsx(yt,{label:"Pre-Money",value:te((M==null?void 0:M.preMoneyValuation)||0,!0),subValue:(M==null?void 0:M.name)||"-"}),s.jsx(yt,{label:"Post-Money",value:te(D,!0),subValue:"Aprs leve"}),s.jsx(yt,{label:"Dilution",value:tn(L),subValue:"Part cde",trend:L>.25?"down":void 0}),s.jsx(yt,{label:"Multiple CA",value:C>0?`${(D/(((V=y[y.length-1])==null?void 0:V.revenue)||1)).toFixed(1)}x`:"-",subValue:`sur CA ${h}`})]}),s.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.fundingRounds.map(I=>s.jsxs("div",{className:"p-4 bg-muted/30 rounded-lg border",children:[s.jsxs("div",{className:"flex justify-between items-start mb-3",children:[s.jsxs("div",{children:[s.jsx("h5",{className:"font-semibold",children:I.name}),s.jsx(Oe,{variant:"outline",className:"text-xs mt-1",children:I.year})]}),s.jsx("div",{className:"text-right",children:s.jsx("div",{className:"text-xl font-bold font-mono-numbers text-primary",children:te(I.amount,!0)})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-muted-foreground",children:[s.jsxs("div",{children:[s.jsx("span",{children:"Pre-money:"}),s.jsx("span",{className:"font-mono-numbers ml-1",children:te(I.preMoneyValuation,!0)})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("span",{children:"Dilution:"}),s.jsx("span",{className:"font-mono-numbers ml-1",children:tn(I.amount/(I.preMoneyValuation+I.amount))})]})]})]},I.id))})]})]})}var Ot;(function(e){e.assertEqual=a=>{};function t(a){}e.assertIs=t;function r(a){throw new Error}e.assertNever=r,e.arrayToEnum=a=>{const i={};for(const o of a)i[o]=o;return i},e.getValidEnumValues=a=>{const i=e.objectKeys(a).filter(l=>typeof a[a[l]]!="number"),o={};for(const l of i)o[l]=a[l];return e.objectValues(o)},e.objectValues=a=>e.objectKeys(a).map(function(i){return a[i]}),e.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const i=[];for(const o in a)Object.prototype.hasOwnProperty.call(a,o)&&i.push(o);return i},e.find=(a,i)=>{for(const o of a)if(i(o))return o},e.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&Number.isFinite(a)&&Math.floor(a)===a;function n(a,i=" | "){return a.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}e.joinValues=n,e.jsonStringifyReplacer=(a,i)=>typeof i=="bigint"?i.toString():i})(Ot||(Ot={}));var UT;(function(e){e.mergeShapes=(t,r)=>({...t,...r})})(UT||(UT={}));const ze=Ot.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Xs=e=>{switch(typeof e){case"undefined":return ze.undefined;case"string":return ze.string;case"number":return Number.isNaN(e)?ze.nan:ze.number;case"boolean":return ze.boolean;case"function":return ze.function;case"bigint":return ze.bigint;case"symbol":return ze.symbol;case"object":return Array.isArray(e)?ze.array:e===null?ze.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?ze.promise:typeof Map<"u"&&e instanceof Map?ze.map:typeof Set<"u"&&e instanceof Set?ze.set:typeof Date<"u"&&e instanceof Date?ze.date:ze.object;default:return ze.unknown}},Se=Ot.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class ks extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=t}format(t){const r=t||function(i){return i.message},n={_errors:[]},a=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(a);else if(o.code==="invalid_return_type")a(o.returnTypeError);else if(o.code==="invalid_arguments")a(o.argumentsError);else if(o.path.length===0)n._errors.push(r(o));else{let l=n,c=0;for(;c<o.path.length;){const u=o.path[c];c===o.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(r(o))):l[u]=l[u]||{_errors:[]},l=l[u],c++}}};return a(this),n}static assert(t){if(!(t instanceof ks))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ot.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=r=>r.message){const r={},n=[];for(const a of this.issues)if(a.path.length>0){const i=a.path[0];r[i]=r[i]||[],r[i].push(t(a))}else n.push(t(a));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}ks.create=e=>new ks(e);const R_=(e,t)=>{let r;switch(e.code){case Se.invalid_type:e.received===ze.undefined?r="Required":r=`Expected ${e.expected}, received ${e.received}`;break;case Se.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,Ot.jsonStringifyReplacer)}`;break;case Se.unrecognized_keys:r=`Unrecognized key(s) in object: ${Ot.joinValues(e.keys,", ")}`;break;case Se.invalid_union:r="Invalid input";break;case Se.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Ot.joinValues(e.options)}`;break;case Se.invalid_enum_value:r=`Invalid enum value. Expected ${Ot.joinValues(e.options)}, received '${e.received}'`;break;case Se.invalid_arguments:r="Invalid function arguments";break;case Se.invalid_return_type:r="Invalid function return type";break;case Se.invalid_date:r="Invalid date";break;case Se.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:Ot.assertNever(e.validation):e.validation!=="regex"?r=`Invalid ${e.validation}`:r="Invalid";break;case Se.too_small:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="bigint"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:r="Invalid input";break;case Se.too_big:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?r=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:r="Invalid input";break;case Se.custom:r="Invalid input";break;case Se.invalid_intersection_types:r="Intersection results could not be merged";break;case Se.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case Se.not_finite:r="Number must be finite";break;default:r=t.defaultError,Ot.assertNever(e)}return{message:r}};let WPe=R_;function HPe(){return WPe}const qPe=e=>{const{data:t,path:r,errorMaps:n,issueData:a}=e,i=[...r,...a.path||[]],o={...a,path:i};if(a.message!==void 0)return{...a,path:i,message:a.message};let l="";const c=n.filter(u=>!!u).slice().reverse();for(const u of c)l=u(o,{data:t,defaultError:l}).message;return{...a,path:i,message:l}};function Me(e,t){const r=HPe(),n=qPe({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===R_?void 0:R_].filter(a=>!!a)});e.common.issues.push(n)}class ga{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,r){const n=[];for(const a of r){if(a.status==="aborted")return ft;a.status==="dirty"&&t.dirty(),n.push(a.value)}return{status:t.value,value:n}}static async mergeObjectAsync(t,r){const n=[];for(const a of r){const i=await a.key,o=await a.value;n.push({key:i,value:o})}return ga.mergeObjectSync(t,n)}static mergeObjectSync(t,r){const n={};for(const a of r){const{key:i,value:o}=a;if(i.status==="aborted"||o.status==="aborted")return ft;i.status==="dirty"&&t.dirty(),o.status==="dirty"&&t.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||a.alwaysSet)&&(n[i.value]=o.value)}return{status:t.value,value:n}}}const ft=Object.freeze({status:"aborted"}),zf=e=>({status:"dirty",value:e}),za=e=>({status:"valid",value:e}),VT=e=>e.status==="aborted",WT=e=>e.status==="dirty",yd=e=>e.status==="valid",Ny=e=>typeof Promise<"u"&&e instanceof Promise;var He;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(He||(He={}));class Io{constructor(t,r,n,a){this._cachedPath=[],this.parent=t,this.data=r,this._path=n,this._key=a}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const HT=(e,t)=>{if(yd(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new ks(e.common.issues);return this._error=r,this._error}}};function jt(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:n,description:a}=e;if(t&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:a}:{errorMap:(o,l)=>{const{message:c}=e;return o.code==="invalid_enum_value"?{message:c??l.defaultError}:typeof l.data>"u"?{message:c??n??l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:c??r??l.defaultError}},description:a}}class Pt{get description(){return this._def.description}_getType(t){return Xs(t.data)}_getOrReturnCtx(t,r){return r||{common:t.parent.common,data:t.data,parsedType:Xs(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new ga,ctx:{common:t.parent.common,data:t.data,parsedType:Xs(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const r=this._parse(t);if(Ny(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(t){const r=this._parse(t);return Promise.resolve(r)}parse(t,r){const n=this.safeParse(t,r);if(n.success)return n.data;throw n.error}safeParse(t,r){const n={common:{issues:[],async:(r==null?void 0:r.async)??!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Xs(t)},a=this._parseSync({data:t,path:n.path,parent:n});return HT(n,a)}"~validate"(t){var n,a;const r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Xs(t)};if(!this["~standard"].async)try{const i=this._parseSync({data:t,path:[],parent:r});return yd(i)?{value:i.value}:{issues:r.common.issues}}catch(i){(a=(n=i==null?void 0:i.message)==null?void 0:n.toLowerCase())!=null&&a.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:r}).then(i=>yd(i)?{value:i.value}:{issues:r.common.issues})}async parseAsync(t,r){const n=await this.safeParseAsync(t,r);if(n.success)return n.data;throw n.error}async safeParseAsync(t,r){const n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Xs(t)},a=this._parse({data:t,path:n.path,parent:n}),i=await(Ny(a)?a:Promise.resolve(a));return HT(n,i)}refine(t,r){const n=a=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(a):r;return this._refinement((a,i)=>{const o=t(a),l=()=>i.addIssue({code:Se.custom,...n(a)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(t,r){return this._refinement((n,a)=>t(n)?!0:(a.addIssue(typeof r=="function"?r(n,a):r),!1))}_refinement(t){return new bd({schema:this,typeName:ht.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return Eo.create(this,this._def)}nullable(){return wd.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Vi.create(this)}promise(){return Ay.create(this,this._def)}or(t){return ky.create([this,t],this._def)}and(t){return Ey.create(this,t,this._def)}transform(t){return new bd({...jt(this._def),schema:this,typeName:ht.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const r=typeof t=="function"?t:()=>t;return new $_({...jt(this._def),innerType:this,defaultValue:r,typeName:ht.ZodDefault})}brand(){return new pke({typeName:ht.ZodBranded,type:this,...jt(this._def)})}catch(t){const r=typeof t=="function"?t:()=>t;return new I_({...jt(this._def),innerType:this,catchValue:r,typeName:ht.ZodCatch})}describe(t){const r=this.constructor;return new r({...this._def,description:t})}pipe(t){return DN.create(this,t)}readonly(){return D_.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const KPe=/^c[^\s-]{8,}$/i,YPe=/^[0-9a-z]+$/,GPe=/^[0-9A-HJKMNP-TV-Z]{26}$/i,XPe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,QPe=/^[a-z0-9_-]{21}$/i,JPe=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,ZPe=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,eke=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,tke="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let mw;const rke=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,nke=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ake=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,ike=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,ske=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,oke=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,hU="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",lke=new RegExp(`^${hU}$`);function mU(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`);const r=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${r}`}function cke(e){return new RegExp(`^${mU(e)}$`)}function uke(e){let t=`${hU}T${mU(e)}`;const r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function dke(e,t){return!!((t==="v4"||!t)&&rke.test(e)||(t==="v6"||!t)&&ake.test(e))}function fke(e,t){if(!JPe.test(e))return!1;try{const[r]=e.split(".");if(!r)return!1;const n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),a=JSON.parse(atob(n));return!(typeof a!="object"||a===null||"typ"in a&&(a==null?void 0:a.typ)!=="JWT"||!a.alg||t&&a.alg!==t)}catch{return!1}}function hke(e,t){return!!((t==="v4"||!t)&&nke.test(e)||(t==="v6"||!t)&&ike.test(e))}class ho extends Pt{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==ze.string){const i=this._getOrReturnCtx(t);return Me(i,{code:Se.invalid_type,expected:ze.string,received:i.parsedType}),ft}const n=new ga;let a;for(const i of this._def.checks)if(i.kind==="min")t.data.length<i.value&&(a=this._getOrReturnCtx(t,a),Me(a,{code:Se.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")t.data.length>i.value&&(a=this._getOrReturnCtx(t,a),Me(a,{code:Se.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){const o=t.data.length>i.value,l=t.data.length<i.value;(o||l)&&(a=this._getOrReturnCtx(t,a),o?Me(a,{code:Se.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):l&&Me(a,{code:Se.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")eke.test(t.data)||(a=this._getOrReturnCtx(t,a),Me(a,{validation:"email",code:Se.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")mw||(mw=new RegExp(tke,"u")),mw.test(t.data)||(a=this._getOrReturnCtx(t,a),Me(a,{validation:"emoji",code:Se.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")XPe.test(t.data)||(a=this._getOrReturnCtx(t,a),Me(a,{validation:"uuid",code:Se.invalid_string,message:i.message}),n.dirty());else if(i.kind==="nanoid")QPe.test(t.data)||(a=this._getOrReturnCtx(t,a),Me(a,{validation:"nanoid",code:Se.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")KPe.test(t.data)||(a=this._getOrReturnCtx(t,a),Me(a,{validation:"cuid",code:Se.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")YPe.test(t.data)||(a=this._getOrReturnCtx(t,a),Me(a,{validation:"cuid2",code:Se.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")GPe.test(t.data)||(a=this._getOrReturnCtx(t,a),Me(a,{validation:"ulid",code:Se.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(t.data)}catch{a=this._getOrReturnCtx(t,a),Me(a,{validation:"url",code:Se.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(t.data)||(a=this._getOrReturnCtx(t,a),Me(a,{validation:"regex",code:Se.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?t.data=t.data.trim():i.kind==="includes"?t.data.includes(i.value,i.position)||(a=this._getOrReturnCtx(t,a),Me(a,{code:Se.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?t.data=t.data.toLowerCase():i.kind==="toUpperCase"?t.data=t.data.toUpperCase():i.kind==="startsWith"?t.data.startsWith(i.value)||(a=this._getOrReturnCtx(t,a),Me(a,{code:Se.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?t.data.endsWith(i.value)||(a=this._getOrReturnCtx(t,a),Me(a,{code:Se.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?uke(i).test(t.data)||(a=this._getOrReturnCtx(t,a),Me(a,{code:Se.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="date"?lke.test(t.data)||(a=this._getOrReturnCtx(t,a),Me(a,{code:Se.invalid_string,validation:"date",message:i.message}),n.dirty()):i.kind==="time"?cke(i).test(t.data)||(a=this._getOrReturnCtx(t,a),Me(a,{code:Se.invalid_string,validation:"time",message:i.message}),n.dirty()):i.kind==="duration"?ZPe.test(t.data)||(a=this._getOrReturnCtx(t,a),Me(a,{validation:"duration",code:Se.invalid_string,message:i.message}),n.dirty()):i.kind==="ip"?dke(t.data,i.version)||(a=this._getOrReturnCtx(t,a),Me(a,{validation:"ip",code:Se.invalid_string,message:i.message}),n.dirty()):i.kind==="jwt"?fke(t.data,i.alg)||(a=this._getOrReturnCtx(t,a),Me(a,{validation:"jwt",code:Se.invalid_string,message:i.message}),n.dirty()):i.kind==="cidr"?hke(t.data,i.version)||(a=this._getOrReturnCtx(t,a),Me(a,{validation:"cidr",code:Se.invalid_string,message:i.message}),n.dirty()):i.kind==="base64"?ske.test(t.data)||(a=this._getOrReturnCtx(t,a),Me(a,{validation:"base64",code:Se.invalid_string,message:i.message}),n.dirty()):i.kind==="base64url"?oke.test(t.data)||(a=this._getOrReturnCtx(t,a),Me(a,{validation:"base64url",code:Se.invalid_string,message:i.message}),n.dirty()):Ot.assertNever(i);return{status:n.value,value:t.data}}_regex(t,r,n){return this.refinement(a=>t.test(a),{validation:r,code:Se.invalid_string,...He.errToObj(n)})}_addCheck(t){return new ho({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...He.errToObj(t)})}url(t){return this._addCheck({kind:"url",...He.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...He.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...He.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...He.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...He.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...He.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...He.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...He.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...He.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...He.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...He.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...He.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(t==null?void 0:t.offset)??!1,local:(t==null?void 0:t.local)??!1,...He.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...He.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...He.errToObj(t)})}regex(t,r){return this._addCheck({kind:"regex",regex:t,...He.errToObj(r)})}includes(t,r){return this._addCheck({kind:"includes",value:t,position:r==null?void 0:r.position,...He.errToObj(r==null?void 0:r.message)})}startsWith(t,r){return this._addCheck({kind:"startsWith",value:t,...He.errToObj(r)})}endsWith(t,r){return this._addCheck({kind:"endsWith",value:t,...He.errToObj(r)})}min(t,r){return this._addCheck({kind:"min",value:t,...He.errToObj(r)})}max(t,r){return this._addCheck({kind:"max",value:t,...He.errToObj(r)})}length(t,r){return this._addCheck({kind:"length",value:t,...He.errToObj(r)})}nonempty(t){return this.min(1,He.errToObj(t))}trim(){return new ho({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ho({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ho({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxLength(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}ho.create=e=>new ho({checks:[],typeName:ht.ZodString,coerce:(e==null?void 0:e.coerce)??!1,...jt(e)});function mke(e,t){const r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,a=r>n?r:n,i=Number.parseInt(e.toFixed(a).replace(".","")),o=Number.parseInt(t.toFixed(a).replace(".",""));return i%o/10**a}class Im extends Pt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==ze.number){const i=this._getOrReturnCtx(t);return Me(i,{code:Se.invalid_type,expected:ze.number,received:i.parsedType}),ft}let n;const a=new ga;for(const i of this._def.checks)i.kind==="int"?Ot.isInteger(t.data)||(n=this._getOrReturnCtx(t,n),Me(n,{code:Se.invalid_type,expected:"integer",received:"float",message:i.message}),a.dirty()):i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(n=this._getOrReturnCtx(t,n),Me(n,{code:Se.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(n=this._getOrReturnCtx(t,n),Me(n,{code:Se.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="multipleOf"?mke(t.data,i.value)!==0&&(n=this._getOrReturnCtx(t,n),Me(n,{code:Se.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):i.kind==="finite"?Number.isFinite(t.data)||(n=this._getOrReturnCtx(t,n),Me(n,{code:Se.not_finite,message:i.message}),a.dirty()):Ot.assertNever(i);return{status:a.value,value:t.data}}gte(t,r){return this.setLimit("min",t,!0,He.toString(r))}gt(t,r){return this.setLimit("min",t,!1,He.toString(r))}lte(t,r){return this.setLimit("max",t,!0,He.toString(r))}lt(t,r){return this.setLimit("max",t,!1,He.toString(r))}setLimit(t,r,n,a){return new Im({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:He.toString(a)}]})}_addCheck(t){return new Im({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:He.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:He.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:He.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:He.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:He.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:He.toString(r)})}finite(t){return this._addCheck({kind:"finite",message:He.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:He.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:He.toString(t)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&Ot.isInteger(t.value))}get isFinite(){let t=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(t===null||n.value<t)&&(t=n.value)}return Number.isFinite(r)&&Number.isFinite(t)}}Im.create=e=>new Im({checks:[],typeName:ht.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...jt(e)});class Dm extends Pt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==ze.bigint)return this._getInvalidInput(t);let n;const a=new ga;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(n=this._getOrReturnCtx(t,n),Me(n,{code:Se.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(n=this._getOrReturnCtx(t,n),Me(n,{code:Se.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="multipleOf"?t.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(t,n),Me(n,{code:Se.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):Ot.assertNever(i);return{status:a.value,value:t.data}}_getInvalidInput(t){const r=this._getOrReturnCtx(t);return Me(r,{code:Se.invalid_type,expected:ze.bigint,received:r.parsedType}),ft}gte(t,r){return this.setLimit("min",t,!0,He.toString(r))}gt(t,r){return this.setLimit("min",t,!1,He.toString(r))}lte(t,r){return this.setLimit("max",t,!0,He.toString(r))}lt(t,r){return this.setLimit("max",t,!1,He.toString(r))}setLimit(t,r,n,a){return new Dm({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:He.toString(a)}]})}_addCheck(t){return new Dm({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:He.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:He.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:He.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:He.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:He.toString(r)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}Dm.create=e=>new Dm({checks:[],typeName:ht.ZodBigInt,coerce:(e==null?void 0:e.coerce)??!1,...jt(e)});class qT extends Pt{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==ze.boolean){const n=this._getOrReturnCtx(t);return Me(n,{code:Se.invalid_type,expected:ze.boolean,received:n.parsedType}),ft}return za(t.data)}}qT.create=e=>new qT({typeName:ht.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...jt(e)});class Py extends Pt{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==ze.date){const i=this._getOrReturnCtx(t);return Me(i,{code:Se.invalid_type,expected:ze.date,received:i.parsedType}),ft}if(Number.isNaN(t.data.getTime())){const i=this._getOrReturnCtx(t);return Me(i,{code:Se.invalid_date}),ft}const n=new ga;let a;for(const i of this._def.checks)i.kind==="min"?t.data.getTime()<i.value&&(a=this._getOrReturnCtx(t,a),Me(a,{code:Se.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?t.data.getTime()>i.value&&(a=this._getOrReturnCtx(t,a),Me(a,{code:Se.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):Ot.assertNever(i);return{status:n.value,value:new Date(t.data.getTime())}}_addCheck(t){return new Py({...this._def,checks:[...this._def.checks,t]})}min(t,r){return this._addCheck({kind:"min",value:t.getTime(),message:He.toString(r)})}max(t,r){return this._addCheck({kind:"max",value:t.getTime(),message:He.toString(r)})}get minDate(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t!=null?new Date(t):null}}Py.create=e=>new Py({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:ht.ZodDate,...jt(e)});class KT extends Pt{_parse(t){if(this._getType(t)!==ze.symbol){const n=this._getOrReturnCtx(t);return Me(n,{code:Se.invalid_type,expected:ze.symbol,received:n.parsedType}),ft}return za(t.data)}}KT.create=e=>new KT({typeName:ht.ZodSymbol,...jt(e)});class YT extends Pt{_parse(t){if(this._getType(t)!==ze.undefined){const n=this._getOrReturnCtx(t);return Me(n,{code:Se.invalid_type,expected:ze.undefined,received:n.parsedType}),ft}return za(t.data)}}YT.create=e=>new YT({typeName:ht.ZodUndefined,...jt(e)});class GT extends Pt{_parse(t){if(this._getType(t)!==ze.null){const n=this._getOrReturnCtx(t);return Me(n,{code:Se.invalid_type,expected:ze.null,received:n.parsedType}),ft}return za(t.data)}}GT.create=e=>new GT({typeName:ht.ZodNull,...jt(e)});class XT extends Pt{constructor(){super(...arguments),this._any=!0}_parse(t){return za(t.data)}}XT.create=e=>new XT({typeName:ht.ZodAny,...jt(e)});class QT extends Pt{constructor(){super(...arguments),this._unknown=!0}_parse(t){return za(t.data)}}QT.create=e=>new QT({typeName:ht.ZodUnknown,...jt(e)});class Do extends Pt{_parse(t){const r=this._getOrReturnCtx(t);return Me(r,{code:Se.invalid_type,expected:ze.never,received:r.parsedType}),ft}}Do.create=e=>new Do({typeName:ht.ZodNever,...jt(e)});class JT extends Pt{_parse(t){if(this._getType(t)!==ze.undefined){const n=this._getOrReturnCtx(t);return Me(n,{code:Se.invalid_type,expected:ze.void,received:n.parsedType}),ft}return za(t.data)}}JT.create=e=>new JT({typeName:ht.ZodVoid,...jt(e)});class Vi extends Pt{_parse(t){const{ctx:r,status:n}=this._processInputParams(t),a=this._def;if(r.parsedType!==ze.array)return Me(r,{code:Se.invalid_type,expected:ze.array,received:r.parsedType}),ft;if(a.exactLength!==null){const o=r.data.length>a.exactLength.value,l=r.data.length<a.exactLength.value;(o||l)&&(Me(r,{code:o?Se.too_big:Se.too_small,minimum:l?a.exactLength.value:void 0,maximum:o?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),n.dirty())}if(a.minLength!==null&&r.data.length<a.minLength.value&&(Me(r,{code:Se.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),n.dirty()),a.maxLength!==null&&r.data.length>a.maxLength.value&&(Me(r,{code:Se.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((o,l)=>a.type._parseAsync(new Io(r,o,r.path,l)))).then(o=>ga.mergeArray(n,o));const i=[...r.data].map((o,l)=>a.type._parseSync(new Io(r,o,r.path,l)));return ga.mergeArray(n,i)}get element(){return this._def.type}min(t,r){return new Vi({...this._def,minLength:{value:t,message:He.toString(r)}})}max(t,r){return new Vi({...this._def,maxLength:{value:t,message:He.toString(r)}})}length(t,r){return new Vi({...this._def,exactLength:{value:t,message:He.toString(r)}})}nonempty(t){return this.min(1,t)}}Vi.create=(e,t)=>new Vi({type:e,minLength:null,maxLength:null,exactLength:null,typeName:ht.ZodArray,...jt(t)});function Rc(e){if(e instanceof Ar){const t={};for(const r in e.shape){const n=e.shape[r];t[r]=Eo.create(Rc(n))}return new Ar({...e._def,shape:()=>t})}else return e instanceof Vi?new Vi({...e._def,type:Rc(e.element)}):e instanceof Eo?Eo.create(Rc(e.unwrap())):e instanceof wd?wd.create(Rc(e.unwrap())):e instanceof Jl?Jl.create(e.items.map(t=>Rc(t))):e}class Ar extends Pt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),r=Ot.objectKeys(t);return this._cached={shape:t,keys:r},this._cached}_parse(t){if(this._getType(t)!==ze.object){const u=this._getOrReturnCtx(t);return Me(u,{code:Se.invalid_type,expected:ze.object,received:u.parsedType}),ft}const{status:n,ctx:a}=this._processInputParams(t),{shape:i,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof Do&&this._def.unknownKeys==="strip"))for(const u in a.data)o.includes(u)||l.push(u);const c=[];for(const u of o){const d=i[u],f=a.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new Io(a,f,a.path,u)),alwaysSet:u in a.data})}if(this._def.catchall instanceof Do){const u=this._def.unknownKeys;if(u==="passthrough")for(const d of l)c.push({key:{status:"valid",value:d},value:{status:"valid",value:a.data[d]}});else if(u==="strict")l.length>0&&(Me(a,{code:Se.unrecognized_keys,keys:l}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const d of l){const f=a.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new Io(a,f,a.path,d)),alwaysSet:d in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const u=[];for(const d of c){const f=await d.key,h=await d.value;u.push({key:f,value:h,alwaysSet:d.alwaysSet})}return u}).then(u=>ga.mergeObjectSync(n,u)):ga.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(t){return He.errToObj,new Ar({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(r,n)=>{var i,o;const a=((o=(i=this._def).errorMap)==null?void 0:o.call(i,r,n).message)??n.defaultError;return r.code==="unrecognized_keys"?{message:He.errToObj(t).message??a}:{message:a}}}:{}})}strip(){return new Ar({...this._def,unknownKeys:"strip"})}passthrough(){return new Ar({...this._def,unknownKeys:"passthrough"})}extend(t){return new Ar({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new Ar({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:ht.ZodObject})}setKey(t,r){return this.augment({[t]:r})}catchall(t){return new Ar({...this._def,catchall:t})}pick(t){const r={};for(const n of Ot.objectKeys(t))t[n]&&this.shape[n]&&(r[n]=this.shape[n]);return new Ar({...this._def,shape:()=>r})}omit(t){const r={};for(const n of Ot.objectKeys(this.shape))t[n]||(r[n]=this.shape[n]);return new Ar({...this._def,shape:()=>r})}deepPartial(){return Rc(this)}partial(t){const r={};for(const n of Ot.objectKeys(this.shape)){const a=this.shape[n];t&&!t[n]?r[n]=a:r[n]=a.optional()}return new Ar({...this._def,shape:()=>r})}required(t){const r={};for(const n of Ot.objectKeys(this.shape))if(t&&!t[n])r[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof Eo;)i=i._def.innerType;r[n]=i}return new Ar({...this._def,shape:()=>r})}keyof(){return pU(Ot.objectKeys(this.shape))}}Ar.create=(e,t)=>new Ar({shape:()=>e,unknownKeys:"strip",catchall:Do.create(),typeName:ht.ZodObject,...jt(t)});Ar.strictCreate=(e,t)=>new Ar({shape:()=>e,unknownKeys:"strict",catchall:Do.create(),typeName:ht.ZodObject,...jt(t)});Ar.lazycreate=(e,t)=>new Ar({shape:e,unknownKeys:"strip",catchall:Do.create(),typeName:ht.ZodObject,...jt(t)});class ky extends Pt{_parse(t){const{ctx:r}=this._processInputParams(t),n=this._def.options;function a(i){for(const l of i)if(l.result.status==="valid")return l.result;for(const l of i)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;const o=i.map(l=>new ks(l.ctx.common.issues));return Me(r,{code:Se.invalid_union,unionErrors:o}),ft}if(r.common.async)return Promise.all(n.map(async i=>{const o={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(a);{let i;const o=[];for(const c of n){const u={...r,common:{...r.common,issues:[]},parent:null},d=c._parseSync({data:r.data,path:r.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!i&&(i={result:d,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;const l=o.map(c=>new ks(c));return Me(r,{code:Se.invalid_union,unionErrors:l}),ft}}get options(){return this._def.options}}ky.create=(e,t)=>new ky({options:e,typeName:ht.ZodUnion,...jt(t)});function M_(e,t){const r=Xs(e),n=Xs(t);if(e===t)return{valid:!0,data:e};if(r===ze.object&&n===ze.object){const a=Ot.objectKeys(t),i=Ot.objectKeys(e).filter(l=>a.indexOf(l)!==-1),o={...e,...t};for(const l of i){const c=M_(e[l],t[l]);if(!c.valid)return{valid:!1};o[l]=c.data}return{valid:!0,data:o}}else if(r===ze.array&&n===ze.array){if(e.length!==t.length)return{valid:!1};const a=[];for(let i=0;i<e.length;i++){const o=e[i],l=t[i],c=M_(o,l);if(!c.valid)return{valid:!1};a.push(c.data)}return{valid:!0,data:a}}else return r===ze.date&&n===ze.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class Ey extends Pt{_parse(t){const{status:r,ctx:n}=this._processInputParams(t),a=(i,o)=>{if(VT(i)||VT(o))return ft;const l=M_(i.value,o.value);return l.valid?((WT(i)||WT(o))&&r.dirty(),{status:r.value,value:l.data}):(Me(n,{code:Se.invalid_intersection_types}),ft)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,o])=>a(i,o)):a(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}Ey.create=(e,t,r)=>new Ey({left:e,right:t,typeName:ht.ZodIntersection,...jt(r)});class Jl extends Pt{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==ze.array)return Me(n,{code:Se.invalid_type,expected:ze.array,received:n.parsedType}),ft;if(n.data.length<this._def.items.length)return Me(n,{code:Se.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ft;!this._def.rest&&n.data.length>this._def.items.length&&(Me(n,{code:Se.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const i=[...n.data].map((o,l)=>{const c=this._def.items[l]||this._def.rest;return c?c._parse(new Io(n,o,n.path,l)):null}).filter(o=>!!o);return n.common.async?Promise.all(i).then(o=>ga.mergeArray(r,o)):ga.mergeArray(r,i)}get items(){return this._def.items}rest(t){return new Jl({...this._def,rest:t})}}Jl.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Jl({items:e,typeName:ht.ZodTuple,rest:null,...jt(t)})};class ZT extends Pt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==ze.map)return Me(n,{code:Se.invalid_type,expected:ze.map,received:n.parsedType}),ft;const a=this._def.keyType,i=this._def.valueType,o=[...n.data.entries()].map(([l,c],u)=>({key:a._parse(new Io(n,l,n.path,[u,"key"])),value:i._parse(new Io(n,c,n.path,[u,"value"]))}));if(n.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const c of o){const u=await c.key,d=await c.value;if(u.status==="aborted"||d.status==="aborted")return ft;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(u.value,d.value)}return{status:r.value,value:l}})}else{const l=new Map;for(const c of o){const u=c.key,d=c.value;if(u.status==="aborted"||d.status==="aborted")return ft;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(u.value,d.value)}return{status:r.value,value:l}}}}ZT.create=(e,t,r)=>new ZT({valueType:t,keyType:e,typeName:ht.ZodMap,...jt(r)});class Lm extends Pt{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==ze.set)return Me(n,{code:Se.invalid_type,expected:ze.set,received:n.parsedType}),ft;const a=this._def;a.minSize!==null&&n.data.size<a.minSize.value&&(Me(n,{code:Se.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),r.dirty()),a.maxSize!==null&&n.data.size>a.maxSize.value&&(Me(n,{code:Se.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),r.dirty());const i=this._def.valueType;function o(c){const u=new Set;for(const d of c){if(d.status==="aborted")return ft;d.status==="dirty"&&r.dirty(),u.add(d.value)}return{status:r.value,value:u}}const l=[...n.data.values()].map((c,u)=>i._parse(new Io(n,c,n.path,u)));return n.common.async?Promise.all(l).then(c=>o(c)):o(l)}min(t,r){return new Lm({...this._def,minSize:{value:t,message:He.toString(r)}})}max(t,r){return new Lm({...this._def,maxSize:{value:t,message:He.toString(r)}})}size(t,r){return this.min(t,r).max(t,r)}nonempty(t){return this.min(1,t)}}Lm.create=(e,t)=>new Lm({valueType:e,minSize:null,maxSize:null,typeName:ht.ZodSet,...jt(t)});class eR extends Pt{get schema(){return this._def.getter()}_parse(t){const{ctx:r}=this._processInputParams(t);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}eR.create=(e,t)=>new eR({getter:e,typeName:ht.ZodLazy,...jt(t)});class tR extends Pt{_parse(t){if(t.data!==this._def.value){const r=this._getOrReturnCtx(t);return Me(r,{received:r.data,code:Se.invalid_literal,expected:this._def.value}),ft}return{status:"valid",value:t.data}}get value(){return this._def.value}}tR.create=(e,t)=>new tR({value:e,typeName:ht.ZodLiteral,...jt(t)});function pU(e,t){return new xd({values:e,typeName:ht.ZodEnum,...jt(t)})}class xd extends Pt{_parse(t){if(typeof t.data!="string"){const r=this._getOrReturnCtx(t),n=this._def.values;return Me(r,{expected:Ot.joinValues(n),received:r.parsedType,code:Se.invalid_type}),ft}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){const r=this._getOrReturnCtx(t),n=this._def.values;return Me(r,{received:r.data,code:Se.invalid_enum_value,options:n}),ft}return za(t.data)}get options(){return this._def.values}get enum(){const t={};for(const r of this._def.values)t[r]=r;return t}get Values(){const t={};for(const r of this._def.values)t[r]=r;return t}get Enum(){const t={};for(const r of this._def.values)t[r]=r;return t}extract(t,r=this._def){return xd.create(t,{...this._def,...r})}exclude(t,r=this._def){return xd.create(this.options.filter(n=>!t.includes(n)),{...this._def,...r})}}xd.create=pU;class rR extends Pt{_parse(t){const r=Ot.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(t);if(n.parsedType!==ze.string&&n.parsedType!==ze.number){const a=Ot.objectValues(r);return Me(n,{expected:Ot.joinValues(a),received:n.parsedType,code:Se.invalid_type}),ft}if(this._cache||(this._cache=new Set(Ot.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){const a=Ot.objectValues(r);return Me(n,{received:n.data,code:Se.invalid_enum_value,options:a}),ft}return za(t.data)}get enum(){return this._def.values}}rR.create=(e,t)=>new rR({values:e,typeName:ht.ZodNativeEnum,...jt(t)});class Ay extends Pt{unwrap(){return this._def.type}_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==ze.promise&&r.common.async===!1)return Me(r,{code:Se.invalid_type,expected:ze.promise,received:r.parsedType}),ft;const n=r.parsedType===ze.promise?r.data:Promise.resolve(r.data);return za(n.then(a=>this._def.type.parseAsync(a,{path:r.path,errorMap:r.common.contextualErrorMap})))}}Ay.create=(e,t)=>new Ay({type:e,typeName:ht.ZodPromise,...jt(t)});class bd extends Pt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ht.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:r,ctx:n}=this._processInputParams(t),a=this._def.effect||null,i={addIssue:o=>{Me(n,o),o.fatal?r.abort():r.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),a.type==="preprocess"){const o=a.transform(n.data,i);if(n.common.async)return Promise.resolve(o).then(async l=>{if(r.value==="aborted")return ft;const c=await this._def.schema._parseAsync({data:l,path:n.path,parent:n});return c.status==="aborted"?ft:c.status==="dirty"||r.value==="dirty"?zf(c.value):c});{if(r.value==="aborted")return ft;const l=this._def.schema._parseSync({data:o,path:n.path,parent:n});return l.status==="aborted"?ft:l.status==="dirty"||r.value==="dirty"?zf(l.value):l}}if(a.type==="refinement"){const o=l=>{const c=a.refinement(l,i);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){const l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?ft:(l.status==="dirty"&&r.dirty(),o(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?ft:(l.status==="dirty"&&r.dirty(),o(l.value).then(()=>({status:r.value,value:l.value}))))}if(a.type==="transform")if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!yd(o))return ft;const l=a.transform(o.value,i);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>yd(o)?Promise.resolve(a.transform(o.value,i)).then(l=>({status:r.value,value:l})):ft);Ot.assertNever(a)}}bd.create=(e,t,r)=>new bd({schema:e,typeName:ht.ZodEffects,effect:t,...jt(r)});bd.createWithPreprocess=(e,t,r)=>new bd({schema:t,effect:{type:"preprocess",transform:e},typeName:ht.ZodEffects,...jt(r)});class Eo extends Pt{_parse(t){return this._getType(t)===ze.undefined?za(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Eo.create=(e,t)=>new Eo({innerType:e,typeName:ht.ZodOptional,...jt(t)});class wd extends Pt{_parse(t){return this._getType(t)===ze.null?za(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}wd.create=(e,t)=>new wd({innerType:e,typeName:ht.ZodNullable,...jt(t)});class $_ extends Pt{_parse(t){const{ctx:r}=this._processInputParams(t);let n=r.data;return r.parsedType===ze.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}$_.create=(e,t)=>new $_({innerType:e,typeName:ht.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...jt(t)});class I_ extends Pt{_parse(t){const{ctx:r}=this._processInputParams(t),n={...r,common:{...r.common,issues:[]}},a=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Ny(a)?a.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new ks(n.common.issues)},input:n.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new ks(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}I_.create=(e,t)=>new I_({innerType:e,typeName:ht.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...jt(t)});class nR extends Pt{_parse(t){if(this._getType(t)!==ze.nan){const n=this._getOrReturnCtx(t);return Me(n,{code:Se.invalid_type,expected:ze.nan,received:n.parsedType}),ft}return{status:"valid",value:t.data}}}nR.create=e=>new nR({typeName:ht.ZodNaN,...jt(e)});class pke extends Pt{_parse(t){const{ctx:r}=this._processInputParams(t),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class DN extends Pt{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?ft:i.status==="dirty"?(r.dirty(),zf(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})})();{const a=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?ft:a.status==="dirty"?(r.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:n.path,parent:n})}}static create(t,r){return new DN({in:t,out:r,typeName:ht.ZodPipeline})}}class D_ extends Pt{_parse(t){const r=this._def.innerType._parse(t),n=a=>(yd(a)&&(a.value=Object.freeze(a.value)),a);return Ny(r)?r.then(a=>n(a)):n(r)}unwrap(){return this._def.innerType}}D_.create=(e,t)=>new D_({innerType:e,typeName:ht.ZodReadonly,...jt(t)});Ar.lazycreate;var ht;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(ht||(ht={}));const uh=ho.create;Do.create;Vi.create;const gU=Ar.create;Ar.strictCreate;ky.create;Ey.create;Jl.create;xd.create;Ay.create;Eo.create;wd.create;var cp=e=>e.type==="checkbox",_l=e=>e instanceof Date,Tn=e=>e==null;const vU=e=>typeof e=="object";var Dr=e=>!Tn(e)&&!Array.isArray(e)&&vU(e)&&!_l(e),yU=e=>Dr(e)&&e.target?cp(e.target)?e.target.checked:e.target.value:e,gke=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,xU=(e,t)=>e.has(gke(t)),vke=e=>{const t=e.constructor&&e.constructor.prototype;return Dr(t)&&t.hasOwnProperty("isPrototypeOf")},LN=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Qr(e){let t;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(LN&&(e instanceof Blob||n))&&(r||Dr(e)))if(t=r?[]:{},!r&&!vke(e))t=e;else for(const a in e)e.hasOwnProperty(a)&&(t[a]=Qr(e[a]));else return e;return t}var R0=e=>/^\w*$/.test(e),Mr=e=>e===void 0,BN=e=>Array.isArray(e)?e.filter(Boolean):[],FN=e=>BN(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Ae=(e,t,r)=>{if(!t||!Dr(e))return r;const n=(R0(t)?[t]:FN(t)).reduce((a,i)=>Tn(a)?a:a[i],e);return Mr(n)||n===e?Mr(e[t])?r:e[t]:n},sa=e=>typeof e=="boolean",Dt=(e,t,r)=>{let n=-1;const a=R0(t)?[t]:FN(t),i=a.length,o=i-1;for(;++n<i;){const l=a[n];let c=r;if(n!==o){const u=e[l];c=Dr(u)||Array.isArray(u)?u:isNaN(+a[n+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;e[l]=c,e=e[l]}};const Oy={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},si={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},ts={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},zN=$.createContext(null);zN.displayName="HookFormContext";const M0=()=>$.useContext(zN),yke=e=>{const{children:t,...r}=e;return $.createElement(zN.Provider,{value:r},t)};var bU=(e,t,r,n=!0)=>{const a={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(a,i,{get:()=>{const o=i;return t._proxyFormState[o]!==si.all&&(t._proxyFormState[o]=!n||si.all),r&&(r[o]=!0),e[o]}});return a};const UN=typeof window<"u"?$.useLayoutEffect:$.useEffect;function xke(e){const t=M0(),{control:r=t.control,disabled:n,name:a,exact:i}=e||{},[o,l]=$.useState(r._formState),c=$.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return UN(()=>r._subscribe({name:a,formState:c.current,exact:i,callback:u=>{!n&&l({...r._formState,...u})}}),[a,n,i]),$.useEffect(()=>{c.current.isValid&&r._setValid(!0)},[r]),$.useMemo(()=>bU(o,r,c.current,!1),[o,r])}var $i=e=>typeof e=="string",wU=(e,t,r,n,a)=>$i(e)?(n&&t.watch.add(e),Ae(r,e,a)):Array.isArray(e)?e.map(i=>(n&&t.watch.add(i),Ae(r,i))):(n&&(t.watchAll=!0),r),L_=e=>Tn(e)||!vU(e);function ls(e,t,r=new WeakSet){if(L_(e)||L_(t))return e===t;if(_l(e)&&_l(t))return e.getTime()===t.getTime();const n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const i of n){const o=e[i];if(!a.includes(i))return!1;if(i!=="ref"){const l=t[i];if(_l(o)&&_l(l)||Dr(o)&&Dr(l)||Array.isArray(o)&&Array.isArray(l)?!ls(o,l,r):o!==l)return!1}}return!0}function bke(e){const t=M0(),{control:r=t.control,name:n,defaultValue:a,disabled:i,exact:o,compute:l}=e||{},c=$.useRef(a),u=$.useRef(l),d=$.useRef(void 0);u.current=l;const f=$.useMemo(()=>r._getWatch(n,c.current),[r,n]),[h,m]=$.useState(u.current?u.current(f):f);return UN(()=>r._subscribe({name:n,formState:{values:!0},exact:o,callback:y=>{if(!i){const g=wU(n,r._names,y.values||r._formValues,!1,c.current);if(u.current){const p=u.current(g);ls(p,d.current)||(m(p),d.current=p)}else m(g)}}}),[r,i,n,o]),$.useEffect(()=>r._removeUnmounted()),h}function wke(e){const t=M0(),{name:r,disabled:n,control:a=t.control,shouldUnregister:i,defaultValue:o}=e,l=xU(a._names.array,r),c=$.useMemo(()=>Ae(a._formValues,r,Ae(a._defaultValues,r,o)),[a,r,o]),u=bke({control:a,name:r,defaultValue:c,exact:!0}),d=xke({control:a,name:r,exact:!0}),f=$.useRef(e),h=$.useRef(a.register(r,{...e.rules,value:u,...sa(e.disabled)?{disabled:e.disabled}:{}}));f.current=e;const m=$.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Ae(d.errors,r)},isDirty:{enumerable:!0,get:()=>!!Ae(d.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!Ae(d.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!Ae(d.validatingFields,r)},error:{enumerable:!0,get:()=>Ae(d.errors,r)}}),[d,r]),y=$.useCallback(x=>h.current.onChange({target:{value:yU(x),name:r},type:Oy.CHANGE}),[r]),g=$.useCallback(()=>h.current.onBlur({target:{value:Ae(a._formValues,r),name:r},type:Oy.BLUR}),[r,a._formValues]),p=$.useCallback(x=>{const b=Ae(a._fields,r);b&&x&&(b._f.ref={focus:()=>x.focus&&x.focus(),select:()=>x.select&&x.select(),setCustomValidity:_=>x.setCustomValidity(_),reportValidity:()=>x.reportValidity()})},[a._fields,r]),v=$.useMemo(()=>({name:r,value:u,...sa(n)||d.disabled?{disabled:d.disabled||n}:{},onChange:y,onBlur:g,ref:p}),[r,n,d.disabled,y,g,p,u]);return $.useEffect(()=>{const x=a._options.shouldUnregister||i;a.register(r,{...f.current.rules,...sa(f.current.disabled)?{disabled:f.current.disabled}:{}});const b=(_,j)=>{const S=Ae(a._fields,_);S&&S._f&&(S._f.mount=j)};if(b(r,!0),x){const _=Qr(Ae(a._options.defaultValues,r));Dt(a._defaultValues,r,_),Mr(Ae(a._formValues,r))&&Dt(a._formValues,r,_)}return!l&&a.register(r),()=>{(l?x&&!a._state.action:x)?a.unregister(r):b(r,!1)}},[r,a,l,i]),$.useEffect(()=>{a._setDisabledField({disabled:n,name:r})},[n,r,a]),$.useMemo(()=>({field:v,formState:d,fieldState:m}),[v,d,m])}const jke=e=>e.render(wke(e));var jU=(e,t,r,n,a)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:a||!0}}:{},dh=e=>Array.isArray(e)?e:[e],aR=()=>{let e=[];return{get observers(){return e},next:a=>{for(const i of e)i.next&&i.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(i=>i!==a)}}),unsubscribe:()=>{e=[]}}},Wn=e=>Dr(e)&&!Object.keys(e).length,VN=e=>e.type==="file",oi=e=>typeof e=="function",Ty=e=>{if(!LN)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},_U=e=>e.type==="select-multiple",WN=e=>e.type==="radio",_ke=e=>WN(e)||cp(e),pw=e=>Ty(e)&&e.isConnected;function Ske(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=Mr(e)?n++:e[t[n++]];return e}function Cke(e){for(const t in e)if(e.hasOwnProperty(t)&&!Mr(e[t]))return!1;return!0}function Br(e,t){const r=Array.isArray(t)?t:R0(t)?[t]:FN(t),n=r.length===1?e:Ske(e,r),a=r.length-1,i=r[a];return n&&delete n[i],a!==0&&(Dr(n)&&Wn(n)||Array.isArray(n)&&Cke(n))&&Br(e,r.slice(0,-1)),e}var SU=e=>{for(const t in e)if(oi(e[t]))return!0;return!1};function Ry(e,t={}){const r=Array.isArray(e);if(Dr(e)||r)for(const n in e)Array.isArray(e[n])||Dr(e[n])&&!SU(e[n])?(t[n]=Array.isArray(e[n])?[]:{},Ry(e[n],t[n])):Tn(e[n])||(t[n]=!0);return t}function CU(e,t,r){const n=Array.isArray(e);if(Dr(e)||n)for(const a in e)Array.isArray(e[a])||Dr(e[a])&&!SU(e[a])?Mr(t)||L_(r[a])?r[a]=Array.isArray(e[a])?Ry(e[a],[]):{...Ry(e[a])}:CU(e[a],Tn(t)?{}:t[a],r[a]):r[a]=!ls(e[a],t[a]);return r}var kf=(e,t)=>CU(e,t,Ry(t));const iR={value:!1,isValid:!1},sR={value:!0,isValid:!0};var NU=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Mr(e[0].attributes.value)?Mr(e[0].value)||e[0].value===""?sR:{value:e[0].value,isValid:!0}:sR:iR}return iR},PU=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>Mr(e)?e:t?e===""?NaN:e&&+e:r&&$i(e)?new Date(e):n?n(e):e;const oR={isValid:!1,value:null};var kU=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,oR):oR;function lR(e){const t=e.ref;return VN(t)?t.files:WN(t)?kU(e.refs).value:_U(t)?[...t.selectedOptions].map(({value:r})=>r):cp(t)?NU(e.refs).value:PU(Mr(t.value)?e.ref.value:t.value,e)}var Nke=(e,t,r,n)=>{const a={};for(const i of e){const o=Ae(t,i);o&&Dt(a,i,o._f)}return{criteriaMode:r,names:[...e],fields:a,shouldUseNativeValidation:n}},My=e=>e instanceof RegExp,Ef=e=>Mr(e)?e:My(e)?e.source:Dr(e)?My(e.value)?e.value.source:e.value:e,cR=e=>({isOnSubmit:!e||e===si.onSubmit,isOnBlur:e===si.onBlur,isOnChange:e===si.onChange,isOnAll:e===si.all,isOnTouch:e===si.onTouched});const uR="AsyncFunction";var Pke=e=>!!e&&!!e.validate&&!!(oi(e.validate)&&e.validate.constructor.name===uR||Dr(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===uR)),kke=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),dR=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const fh=(e,t,r,n)=>{for(const a of r||Object.keys(e)){const i=Ae(e,a);if(i){const{_f:o,...l}=i;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],a)&&!n)return!0;if(o.ref&&t(o.ref,o.name)&&!n)return!0;if(fh(l,t))break}else if(Dr(l)&&fh(l,t))break}}};function fR(e,t,r){const n=Ae(e,r);if(n||R0(r))return{error:n,name:r};const a=r.split(".");for(;a.length;){const i=a.join("."),o=Ae(t,i),l=Ae(e,i);if(o&&!Array.isArray(o)&&r!==i)return{name:r};if(l&&l.type)return{name:i,error:l};if(l&&l.root&&l.root.type)return{name:`${i}.root`,error:l.root};a.pop()}return{name:r}}var Eke=(e,t,r,n)=>{r(e);const{name:a,...i}=e;return Wn(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(o=>t[o]===(!n||si.all))},Ake=(e,t,r)=>!e||!t||e===t||dh(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),Oke=(e,t,r,n,a)=>a.isOnAll?!1:!r&&a.isOnTouch?!(t||e):(r?n.isOnBlur:a.isOnBlur)?!e:(r?n.isOnChange:a.isOnChange)?e:!0,Tke=(e,t)=>!BN(Ae(e,t)).length&&Br(e,t),Rke=(e,t,r)=>{const n=dh(Ae(e,r));return Dt(n,"root",t[r]),Dt(e,r,n),e},Eg=e=>$i(e);function hR(e,t,r="validate"){if(Eg(e)||Array.isArray(e)&&e.every(Eg)||sa(e)&&!e)return{type:r,message:Eg(e)?e:"",ref:t}}var Nc=e=>Dr(e)&&!My(e)?e:{value:e,message:""},mR=async(e,t,r,n,a,i)=>{const{ref:o,refs:l,required:c,maxLength:u,minLength:d,min:f,max:h,pattern:m,validate:y,name:g,valueAsNumber:p,mount:v}=e._f,x=Ae(r,g);if(!v||t.has(g))return{};const b=l?l[0]:o,_=T=>{a&&b.reportValidity&&(b.setCustomValidity(sa(T)?"":T||""),b.reportValidity())},j={},S=WN(o),C=cp(o),P=S||C,N=(p||VN(o))&&Mr(o.value)&&Mr(x)||Ty(o)&&o.value===""||x===""||Array.isArray(x)&&!x.length,E=jU.bind(null,g,n,j),A=(T,R,k,O=ts.maxLength,M=ts.minLength)=>{const D=T?R:k;j[g]={type:T?O:M,message:D,ref:o,...E(T?O:M,D)}};if(i?!Array.isArray(x)||!x.length:c&&(!P&&(N||Tn(x))||sa(x)&&!x||C&&!NU(l).isValid||S&&!kU(l).isValid)){const{value:T,message:R}=Eg(c)?{value:!!c,message:c}:Nc(c);if(T&&(j[g]={type:ts.required,message:R,ref:b,...E(ts.required,R)},!n))return _(R),j}if(!N&&(!Tn(f)||!Tn(h))){let T,R;const k=Nc(h),O=Nc(f);if(!Tn(x)&&!isNaN(x)){const M=o.valueAsNumber||x&&+x;Tn(k.value)||(T=M>k.value),Tn(O.value)||(R=M<O.value)}else{const M=o.valueAsDate||new Date(x),D=z=>new Date(new Date().toDateString()+" "+z),L=o.type=="time",B=o.type=="week";$i(k.value)&&x&&(T=L?D(x)>D(k.value):B?x>k.value:M>new Date(k.value)),$i(O.value)&&x&&(R=L?D(x)<D(O.value):B?x<O.value:M<new Date(O.value))}if((T||R)&&(A(!!T,k.message,O.message,ts.max,ts.min),!n))return _(j[g].message),j}if((u||d)&&!N&&($i(x)||i&&Array.isArray(x))){const T=Nc(u),R=Nc(d),k=!Tn(T.value)&&x.length>+T.value,O=!Tn(R.value)&&x.length<+R.value;if((k||O)&&(A(k,T.message,R.message),!n))return _(j[g].message),j}if(m&&!N&&$i(x)){const{value:T,message:R}=Nc(m);if(My(T)&&!x.match(T)&&(j[g]={type:ts.pattern,message:R,ref:o,...E(ts.pattern,R)},!n))return _(R),j}if(y){if(oi(y)){const T=await y(x,r),R=hR(T,b);if(R&&(j[g]={...R,...E(ts.validate,R.message)},!n))return _(R.message),j}else if(Dr(y)){let T={};for(const R in y){if(!Wn(T)&&!n)break;const k=hR(await y[R](x,r),b,R);k&&(T={...k,...E(R,k.message)},_(k.message),n&&(j[g]=T))}if(!Wn(T)&&(j[g]={ref:b,...T},!n))return j}}return _(!0),j};const Mke={mode:si.onSubmit,reValidateMode:si.onChange,shouldFocusError:!0};function $ke(e={}){let t={...Mke,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:oi(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},a=Dr(t.defaultValues)||Dr(t.values)?Qr(t.defaultValues||t.values)||{}:{},i=t.shouldUnregister?{}:Qr(a),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...d};const h={array:aR(),state:aR()},m=t.criteriaMode===si.all,y=U=>X=>{clearTimeout(u),u=setTimeout(U,X)},g=async U=>{if(!t.disabled&&(d.isValid||f.isValid||U)){const X=t.resolver?Wn((await C()).errors):await N(n,!0);X!==r.isValid&&h.state.next({isValid:X})}},p=(U,X)=>{!t.disabled&&(d.isValidating||d.validatingFields||f.isValidating||f.validatingFields)&&((U||Array.from(l.mount)).forEach(se=>{se&&(X?Dt(r.validatingFields,se,X):Br(r.validatingFields,se))}),h.state.next({validatingFields:r.validatingFields,isValidating:!Wn(r.validatingFields)}))},v=(U,X=[],se,Q,ce=!0,pe=!0)=>{if(Q&&se&&!t.disabled){if(o.action=!0,pe&&Array.isArray(Ae(n,U))){const fe=se(Ae(n,U),Q.argA,Q.argB);ce&&Dt(n,U,fe)}if(pe&&Array.isArray(Ae(r.errors,U))){const fe=se(Ae(r.errors,U),Q.argA,Q.argB);ce&&Dt(r.errors,U,fe),Tke(r.errors,U)}if((d.touchedFields||f.touchedFields)&&pe&&Array.isArray(Ae(r.touchedFields,U))){const fe=se(Ae(r.touchedFields,U),Q.argA,Q.argB);ce&&Dt(r.touchedFields,U,fe)}(d.dirtyFields||f.dirtyFields)&&(r.dirtyFields=kf(a,i)),h.state.next({name:U,isDirty:A(U,X),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Dt(i,U,X)},x=(U,X)=>{Dt(r.errors,U,X),h.state.next({errors:r.errors})},b=U=>{r.errors=U,h.state.next({errors:r.errors,isValid:!1})},_=(U,X,se,Q)=>{const ce=Ae(n,U);if(ce){const pe=Ae(i,U,Mr(se)?Ae(a,U):se);Mr(pe)||Q&&Q.defaultChecked||X?Dt(i,U,X?pe:lR(ce._f)):k(U,pe),o.mount&&g()}},j=(U,X,se,Q,ce)=>{let pe=!1,fe=!1;const ye={name:U};if(!t.disabled){if(!se||Q){(d.isDirty||f.isDirty)&&(fe=r.isDirty,r.isDirty=ye.isDirty=A(),pe=fe!==ye.isDirty);const Pe=ls(Ae(a,U),X);fe=!!Ae(r.dirtyFields,U),Pe?Br(r.dirtyFields,U):Dt(r.dirtyFields,U,!0),ye.dirtyFields=r.dirtyFields,pe=pe||(d.dirtyFields||f.dirtyFields)&&fe!==!Pe}if(se){const Pe=Ae(r.touchedFields,U);Pe||(Dt(r.touchedFields,U,se),ye.touchedFields=r.touchedFields,pe=pe||(d.touchedFields||f.touchedFields)&&Pe!==se)}pe&&ce&&h.state.next(ye)}return pe?ye:{}},S=(U,X,se,Q)=>{const ce=Ae(r.errors,U),pe=(d.isValid||f.isValid)&&sa(X)&&r.isValid!==X;if(t.delayError&&se?(c=y(()=>x(U,se)),c(t.delayError)):(clearTimeout(u),c=null,se?Dt(r.errors,U,se):Br(r.errors,U)),(se?!ls(ce,se):ce)||!Wn(Q)||pe){const fe={...Q,...pe&&sa(X)?{isValid:X}:{},errors:r.errors,name:U};r={...r,...fe},h.state.next(fe)}},C=async U=>{p(U,!0);const X=await t.resolver(i,t.context,Nke(U||l.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return p(U),X},P=async U=>{const{errors:X}=await C(U);if(U)for(const se of U){const Q=Ae(X,se);Q?Dt(r.errors,se,Q):Br(r.errors,se)}else r.errors=X;return X},N=async(U,X,se={valid:!0})=>{for(const Q in U){const ce=U[Q];if(ce){const{_f:pe,...fe}=ce;if(pe){const ye=l.array.has(pe.name),Pe=ce._f&&Pke(ce._f);Pe&&d.validatingFields&&p([Q],!0);const tt=await mR(ce,l.disabled,i,m,t.shouldUseNativeValidation&&!X,ye);if(Pe&&d.validatingFields&&p([Q]),tt[pe.name]&&(se.valid=!1,X))break;!X&&(Ae(tt,pe.name)?ye?Rke(r.errors,tt,pe.name):Dt(r.errors,pe.name,tt[pe.name]):Br(r.errors,pe.name))}!Wn(fe)&&await N(fe,X,se)}}return se.valid},E=()=>{for(const U of l.unMount){const X=Ae(n,U);X&&(X._f.refs?X._f.refs.every(se=>!pw(se)):!pw(X._f.ref))&&q(U)}l.unMount=new Set},A=(U,X)=>!t.disabled&&(U&&X&&Dt(i,U,X),!ls(z(),a)),T=(U,X,se)=>wU(U,l,{...o.mount?i:Mr(X)?a:$i(U)?{[U]:X}:X},se,X),R=U=>BN(Ae(o.mount?i:a,U,t.shouldUnregister?Ae(a,U,[]):[])),k=(U,X,se={})=>{const Q=Ae(n,U);let ce=X;if(Q){const pe=Q._f;pe&&(!pe.disabled&&Dt(i,U,PU(X,pe)),ce=Ty(pe.ref)&&Tn(X)?"":X,_U(pe.ref)?[...pe.ref.options].forEach(fe=>fe.selected=ce.includes(fe.value)):pe.refs?cp(pe.ref)?pe.refs.forEach(fe=>{(!fe.defaultChecked||!fe.disabled)&&(Array.isArray(ce)?fe.checked=!!ce.find(ye=>ye===fe.value):fe.checked=ce===fe.value||!!ce)}):pe.refs.forEach(fe=>fe.checked=fe.value===ce):VN(pe.ref)?pe.ref.value="":(pe.ref.value=ce,pe.ref.type||h.state.next({name:U,values:Qr(i)})))}(se.shouldDirty||se.shouldTouch)&&j(U,ce,se.shouldTouch,se.shouldDirty,!0),se.shouldValidate&&B(U)},O=(U,X,se)=>{for(const Q in X){if(!X.hasOwnProperty(Q))return;const ce=X[Q],pe=U+"."+Q,fe=Ae(n,pe);(l.array.has(U)||Dr(ce)||fe&&!fe._f)&&!_l(ce)?O(pe,ce,se):k(pe,ce,se)}},M=(U,X,se={})=>{const Q=Ae(n,U),ce=l.array.has(U),pe=Qr(X);Dt(i,U,pe),ce?(h.array.next({name:U,values:Qr(i)}),(d.isDirty||d.dirtyFields||f.isDirty||f.dirtyFields)&&se.shouldDirty&&h.state.next({name:U,dirtyFields:kf(a,i),isDirty:A(U,pe)})):Q&&!Q._f&&!Tn(pe)?O(U,pe,se):k(U,pe,se),dR(U,l)&&h.state.next({...r,name:U}),h.state.next({name:o.mount?U:void 0,values:Qr(i)})},D=async U=>{o.mount=!0;const X=U.target;let se=X.name,Q=!0;const ce=Ae(n,se),pe=Pe=>{Q=Number.isNaN(Pe)||_l(Pe)&&isNaN(Pe.getTime())||ls(Pe,Ae(i,se,Pe))},fe=cR(t.mode),ye=cR(t.reValidateMode);if(ce){let Pe,tt;const Ke=X.type?lR(ce._f):yU(U),pt=U.type===Oy.BLUR||U.type===Oy.FOCUS_OUT,he=!kke(ce._f)&&!t.resolver&&!Ae(r.errors,se)&&!ce._f.deps||Oke(pt,Ae(r.touchedFields,se),r.isSubmitted,ye,fe),Ue=dR(se,l,pt);Dt(i,se,Ke),pt?(ce._f.onBlur&&ce._f.onBlur(U),c&&c(0)):ce._f.onChange&&ce._f.onChange(U);const _t=j(se,Ke,pt),xt=!Wn(_t)||Ue;if(!pt&&h.state.next({name:se,type:U.type,values:Qr(i)}),he)return(d.isValid||f.isValid)&&(t.mode==="onBlur"?pt&&g():pt||g()),xt&&h.state.next({name:se,...Ue?{}:_t});if(!pt&&Ue&&h.state.next({...r}),t.resolver){const{errors:Xe}=await C([se]);if(pe(Ke),Q){const lt=fR(r.errors,n,se),Lr=fR(Xe,n,lt.name||se);Pe=Lr.error,se=Lr.name,tt=Wn(Xe)}}else p([se],!0),Pe=(await mR(ce,l.disabled,i,m,t.shouldUseNativeValidation))[se],p([se]),pe(Ke),Q&&(Pe?tt=!1:(d.isValid||f.isValid)&&(tt=await N(n,!0)));Q&&(ce._f.deps&&B(ce._f.deps),S(se,tt,Pe,_t))}},L=(U,X)=>{if(Ae(r.errors,X)&&U.focus)return U.focus(),1},B=async(U,X={})=>{let se,Q;const ce=dh(U);if(t.resolver){const pe=await P(Mr(U)?U:ce);se=Wn(pe),Q=U?!ce.some(fe=>Ae(pe,fe)):se}else U?(Q=(await Promise.all(ce.map(async pe=>{const fe=Ae(n,pe);return await N(fe&&fe._f?{[pe]:fe}:fe)}))).every(Boolean),!(!Q&&!r.isValid)&&g()):Q=se=await N(n);return h.state.next({...!$i(U)||(d.isValid||f.isValid)&&se!==r.isValid?{}:{name:U},...t.resolver||!U?{isValid:se}:{},errors:r.errors}),X.shouldFocus&&!Q&&fh(n,L,U?ce:l.mount),Q},z=U=>{const X={...o.mount?i:a};return Mr(U)?X:$i(U)?Ae(X,U):U.map(se=>Ae(X,se))},Z=(U,X)=>({invalid:!!Ae((X||r).errors,U),isDirty:!!Ae((X||r).dirtyFields,U),error:Ae((X||r).errors,U),isValidating:!!Ae(r.validatingFields,U),isTouched:!!Ae((X||r).touchedFields,U)}),ee=U=>{U&&dh(U).forEach(X=>Br(r.errors,X)),h.state.next({errors:U?r.errors:{}})},le=(U,X,se)=>{const Q=(Ae(n,U,{_f:{}})._f||{}).ref,ce=Ae(r.errors,U)||{},{ref:pe,message:fe,type:ye,...Pe}=ce;Dt(r.errors,U,{...Pe,...X,ref:Q}),h.state.next({name:U,errors:r.errors,isValid:!1}),se&&se.shouldFocus&&Q&&Q.focus&&Q.focus()},V=(U,X)=>oi(U)?h.state.subscribe({next:se=>"values"in se&&U(T(void 0,X),se)}):T(U,X,!0),I=U=>h.state.subscribe({next:X=>{Ake(U.name,X.name,U.exact)&&Eke(X,U.formState||d,Ge,U.reRenderRoot)&&U.callback({values:{...i},...r,...X,defaultValues:a})}}).unsubscribe,F=U=>(o.mount=!0,f={...f,...U.formState},I({...U,formState:f})),q=(U,X={})=>{for(const se of U?dh(U):l.mount)l.mount.delete(se),l.array.delete(se),X.keepValue||(Br(n,se),Br(i,se)),!X.keepError&&Br(r.errors,se),!X.keepDirty&&Br(r.dirtyFields,se),!X.keepTouched&&Br(r.touchedFields,se),!X.keepIsValidating&&Br(r.validatingFields,se),!t.shouldUnregister&&!X.keepDefaultValue&&Br(a,se);h.state.next({values:Qr(i)}),h.state.next({...r,...X.keepDirty?{isDirty:A()}:{}}),!X.keepIsValid&&g()},de=({disabled:U,name:X})=>{(sa(U)&&o.mount||U||l.disabled.has(X))&&(U?l.disabled.add(X):l.disabled.delete(X))},re=(U,X={})=>{let se=Ae(n,U);const Q=sa(X.disabled)||sa(t.disabled);return Dt(n,U,{...se||{},_f:{...se&&se._f?se._f:{ref:{name:U}},name:U,mount:!0,...X}}),l.mount.add(U),se?de({disabled:sa(X.disabled)?X.disabled:t.disabled,name:U}):_(U,!0,X.value),{...Q?{disabled:X.disabled||t.disabled}:{},...t.progressive?{required:!!X.required,min:Ef(X.min),max:Ef(X.max),minLength:Ef(X.minLength),maxLength:Ef(X.maxLength),pattern:Ef(X.pattern)}:{},name:U,onChange:D,onBlur:D,ref:ce=>{if(ce){re(U,X),se=Ae(n,U);const pe=Mr(ce.value)&&ce.querySelectorAll&&ce.querySelectorAll("input,select,textarea")[0]||ce,fe=_ke(pe),ye=se._f.refs||[];if(fe?ye.find(Pe=>Pe===pe):pe===se._f.ref)return;Dt(n,U,{_f:{...se._f,...fe?{refs:[...ye.filter(pw),pe,...Array.isArray(Ae(a,U))?[{}]:[]],ref:{type:pe.type,name:U}}:{ref:pe}}}),_(U,!1,void 0,pe)}else se=Ae(n,U,{}),se._f&&(se._f.mount=!1),(t.shouldUnregister||X.shouldUnregister)&&!(xU(l.array,U)&&o.action)&&l.unMount.add(U)}}},H=()=>t.shouldFocusError&&fh(n,L,l.mount),Y=U=>{sa(U)&&(h.state.next({disabled:U}),fh(n,(X,se)=>{const Q=Ae(n,se);Q&&(X.disabled=Q._f.disabled||U,Array.isArray(Q._f.refs)&&Q._f.refs.forEach(ce=>{ce.disabled=Q._f.disabled||U}))},0,!1))},G=(U,X)=>async se=>{let Q;se&&(se.preventDefault&&se.preventDefault(),se.persist&&se.persist());let ce=Qr(i);if(h.state.next({isSubmitting:!0}),t.resolver){const{errors:pe,values:fe}=await C();r.errors=pe,ce=Qr(fe)}else await N(n);if(l.disabled.size)for(const pe of l.disabled)Br(ce,pe);if(Br(r.errors,"root"),Wn(r.errors)){h.state.next({errors:{}});try{await U(ce,se)}catch(pe){Q=pe}}else X&&await X({...r.errors},se),H(),setTimeout(H);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Wn(r.errors)&&!Q,submitCount:r.submitCount+1,errors:r.errors}),Q)throw Q},J=(U,X={})=>{Ae(n,U)&&(Mr(X.defaultValue)?M(U,Qr(Ae(a,U))):(M(U,X.defaultValue),Dt(a,U,Qr(X.defaultValue))),X.keepTouched||Br(r.touchedFields,U),X.keepDirty||(Br(r.dirtyFields,U),r.isDirty=X.defaultValue?A(U,Qr(Ae(a,U))):A()),X.keepError||(Br(r.errors,U),d.isValid&&g()),h.state.next({...r}))},ge=(U,X={})=>{const se=U?Qr(U):a,Q=Qr(se),ce=Wn(U),pe=ce?a:Q;if(X.keepDefaultValues||(a=se),!X.keepValues){if(X.keepDirtyValues){const fe=new Set([...l.mount,...Object.keys(kf(a,i))]);for(const ye of Array.from(fe))Ae(r.dirtyFields,ye)?Dt(pe,ye,Ae(i,ye)):M(ye,Ae(pe,ye))}else{if(LN&&Mr(U))for(const fe of l.mount){const ye=Ae(n,fe);if(ye&&ye._f){const Pe=Array.isArray(ye._f.refs)?ye._f.refs[0]:ye._f.ref;if(Ty(Pe)){const tt=Pe.closest("form");if(tt){tt.reset();break}}}}if(X.keepFieldsRef)for(const fe of l.mount)M(fe,Ae(pe,fe));else n={}}i=t.shouldUnregister?X.keepDefaultValues?Qr(a):{}:Qr(pe),h.array.next({values:{...pe}}),h.state.next({values:{...pe}})}l={mount:X.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!X.keepIsValid||!!X.keepDirtyValues,o.watch=!!t.shouldUnregister,h.state.next({submitCount:X.keepSubmitCount?r.submitCount:0,isDirty:ce?!1:X.keepDirty?r.isDirty:!!(X.keepDefaultValues&&!ls(U,a)),isSubmitted:X.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:ce?{}:X.keepDirtyValues?X.keepDefaultValues&&i?kf(a,i):r.dirtyFields:X.keepDefaultValues&&U?kf(a,U):X.keepDirty?r.dirtyFields:{},touchedFields:X.keepTouched?r.touchedFields:{},errors:X.keepErrors?r.errors:{},isSubmitSuccessful:X.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},Ce=(U,X)=>ge(oi(U)?U(i):U,X),$e=(U,X={})=>{const se=Ae(n,U),Q=se&&se._f;if(Q){const ce=Q.refs?Q.refs[0]:Q.ref;ce.focus&&(ce.focus(),X.shouldSelect&&oi(ce.select)&&ce.select())}},Ge=U=>{r={...r,...U}},Rt={control:{register:re,unregister:q,getFieldState:Z,handleSubmit:G,setError:le,_subscribe:I,_runSchema:C,_focusError:H,_getWatch:T,_getDirty:A,_setValid:g,_setFieldArray:v,_setDisabledField:de,_setErrors:b,_getFieldArray:R,_reset:ge,_resetDefaultValues:()=>oi(t.defaultValues)&&t.defaultValues().then(U=>{Ce(U,t.resetOptions),h.state.next({isLoading:!1})}),_removeUnmounted:E,_disableForm:Y,_subjects:h,_proxyFormState:d,get _fields(){return n},get _formValues(){return i},get _state(){return o},set _state(U){o=U},get _defaultValues(){return a},get _names(){return l},set _names(U){l=U},get _formState(){return r},get _options(){return t},set _options(U){t={...t,...U}}},subscribe:F,trigger:B,register:re,handleSubmit:G,watch:V,setValue:M,getValues:z,reset:Ce,resetField:J,clearErrors:ee,unregister:q,setError:le,setFocus:$e,getFieldState:Z};return{...Rt,formControl:Rt}}function pR(e={}){const t=$.useRef(void 0),r=$.useRef(void 0),[n,a]=$.useState({isDirty:!1,isValidating:!1,isLoading:oi(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:oi(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:n},e.defaultValues&&!oi(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:o,...l}=$ke(e);t.current={...l,formState:n}}const i=t.current.control;return i._options=e,UN(()=>{const o=i._subscribe({formState:i._proxyFormState,callback:()=>a({...i._formState}),reRenderRoot:!0});return a(l=>({...l,isReady:!0})),i._formState.isReady=!0,o},[i]),$.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),$.useEffect(()=>{e.mode&&(i._options.mode=e.mode),e.reValidateMode&&(i._options.reValidateMode=e.reValidateMode)},[i,e.mode,e.reValidateMode]),$.useEffect(()=>{e.errors&&(i._setErrors(e.errors),i._focusError())},[i,e.errors]),$.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,e.shouldUnregister]),$.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==n.isDirty&&i._subjects.state.next({isDirty:o})}},[i,n.isDirty]),$.useEffect(()=>{e.values&&!ls(e.values,r.current)?(i._reset(e.values,{keepFieldsRef:!0,...i._options.resetOptions}),r.current=e.values,a(o=>({...o}))):i._resetDefaultValues()},[i,e.values]),$.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),t.current.formState=bU(n,i),t.current}const gR=(e,t,r)=>{if(e&&"reportValidity"in e){const n=Ae(r,t);e.setCustomValidity(n&&n.message||""),e.reportValidity()}},EU=(e,t)=>{for(const r in t.fields){const n=t.fields[r];n&&n.ref&&"reportValidity"in n.ref?gR(n.ref,r,e):n.refs&&n.refs.forEach(a=>gR(a,r,e))}},Ike=(e,t)=>{t.shouldUseNativeValidation&&EU(e,t);const r={};for(const n in e){const a=Ae(t.fields,n),i=Object.assign(e[n]||{},{ref:a&&a.ref});if(Dke(t.names||Object.keys(e),n)){const o=Object.assign({},Ae(r,n));Dt(o,"root",i),Dt(r,n,o)}else Dt(r,n,i)}return r},Dke=(e,t)=>e.some(r=>r.startsWith(t+"."));var Lke=function(e,t){for(var r={};e.length;){var n=e[0],a=n.code,i=n.message,o=n.path.join(".");if(!r[o])if("unionErrors"in n){var l=n.unionErrors[0].errors[0];r[o]={message:l.message,type:l.code}}else r[o]={message:i,type:a};if("unionErrors"in n&&n.unionErrors.forEach(function(d){return d.errors.forEach(function(f){return e.push(f)})}),t){var c=r[o].types,u=c&&c[n.code];r[o]=jU(o,t,r,a,u?[].concat(u,n.message):n.message)}e.shift()}return r},vR=function(e,t,r){return r===void 0&&(r={}),function(n,a,i){try{return Promise.resolve(function(o,l){try{var c=Promise.resolve(e[r.mode==="sync"?"parse":"parseAsync"](n,t)).then(function(u){return i.shouldUseNativeValidation&&EU({},i),{errors:{},values:r.raw?n:u}})}catch(u){return l(u)}return c&&c.then?c.then(void 0,l):c}(0,function(o){if(function(l){return Array.isArray(l==null?void 0:l.errors)}(o))return{values:{},errors:Ike(Lke(o.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw o}))}catch(o){return Promise.reject(o)}}};const yR=yke,AU=w.createContext({}),Af=({...e})=>s.jsx(AU.Provider,{value:{name:e.name},children:s.jsx(jke,{...e})}),$0=()=>{const e=w.useContext(AU),t=w.useContext(OU),{getFieldState:r,formState:n}=M0(),a=r(e.name,n);if(!e)throw new Error("useFormField should be used within <FormField>");const{id:i}=t;return{id:i,name:e.name,formItemId:`${i}-form-item`,formDescriptionId:`${i}-form-item-description`,formMessageId:`${i}-form-item-message`,...a}},OU=w.createContext({}),Mc=w.forwardRef(({className:e,...t},r)=>{const n=w.useId();return s.jsx(OU.Provider,{value:{id:n},children:s.jsx("div",{ref:r,className:ue("space-y-2",e),...t})})});Mc.displayName="FormItem";const $c=w.forwardRef(({className:e,...t},r)=>{const{error:n,formItemId:a}=$0();return s.jsx(Ne,{ref:r,className:ue(n&&"text-destructive",e),htmlFor:a,...t})});$c.displayName="FormLabel";const Ic=w.forwardRef(({...e},t)=>{const{error:r,formItemId:n,formDescriptionId:a,formMessageId:i}=$0();return s.jsx(Z$,{ref:t,id:n,"aria-describedby":r?`${a} ${i}`:`${a}`,"aria-invalid":!!r,...e})});Ic.displayName="FormControl";const Bke=w.forwardRef(({className:e,...t},r)=>{const{formDescriptionId:n}=$0();return s.jsx("p",{ref:r,id:n,className:ue("text-sm text-muted-foreground",e),...t})});Bke.displayName="FormDescription";const Dc=w.forwardRef(({className:e,children:t,...r},n)=>{const{error:a,formMessageId:i}=$0(),o=a?String(a==null?void 0:a.message):t;return o?s.jsx("p",{ref:n,id:i,className:ue("text-sm font-medium text-destructive",e),...r,children:o}):null});Dc.displayName="FormMessage";const Fke=gU({email:uh().trim().email({message:"Email invalide"}),password:uh().min(6,{message:"Le mot de passe doit contenir au moins 6 caractres"})}),zke=gU({email:uh().trim().email({message:"Email invalide"}),password:uh().min(6,{message:"Le mot de passe doit contenir au moins 6 caractres"}),displayName:uh().trim().min(2,{message:"Le nom doit contenir au moins 2 caractres"}).max(50)});function Uke(){const{user:e,loading:t,signIn:r,signUp:n}=xa(),a=Qm(),[i,o]=w.useState(!1);w.useEffect(()=>{e&&!t&&a("/")},[e,t,a]);const l=pR({resolver:vR(Fke),defaultValues:{email:"",password:""}}),c=pR({resolver:vR(zke),defaultValues:{email:"",password:"",displayName:""}}),u=async f=>{o(!0);const{error:h}=await r(f.email,f.password);o(!1),h?h.message.includes("Invalid login credentials")?gn({title:"Erreur de connexion",description:"Email ou mot de passe incorrect.",variant:"destructive"}):h.message.includes("Email not confirmed")?gn({title:"Email non vrifi",description:"Veuillez vrifier votre email avant de vous connecter.",variant:"destructive"}):gn({title:"Erreur",description:h.message,variant:"destructive"}):(gn({title:"Connexion russie",description:"Bienvenue sur Novaride FinPlan Studio"}),a("/"))},d=async f=>{o(!0);const{error:h}=await n(f.email,f.password,f.displayName);o(!1),h?h.message.includes("already registered")?gn({title:"Compte existant",description:"Un compte existe dj avec cet email.",variant:"destructive"}):gn({title:"Erreur d'inscription",description:h.message,variant:"destructive"}):gn({title:"Inscription russie",description:"Vrifiez votre email pour confirmer votre compte."})};return t?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:s.jsx(ui,{className:"h-8 w-8 animate-spin text-primary"})}):s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background to-muted p-4",children:s.jsxs(Bt,{className:"w-full max-w-md",children:[s.jsxs(cr,{className:"text-center",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx(hC,{variant:"full",color:"dark"})}),s.jsx(ur,{className:"whitespace-pre-line",children:"We engage, we move"}),s.jsx(ps,{children:"Plateforme de pilotage financier et de prsentation investisseurs"})]}),s.jsx(Wt,{children:s.jsxs(xi,{defaultValue:"login",className:"w-full",children:[s.jsxs(Fa,{className:"grid w-full grid-cols-2",children:[s.jsx(At,{value:"login",children:"Connexion"}),s.jsx(At,{value:"signup",children:"Inscription"})]}),s.jsx(Ft,{value:"login",className:"mt-4",children:s.jsx(yR,{...l,children:s.jsxs("form",{onSubmit:l.handleSubmit(u),className:"space-y-4",children:[s.jsx(Af,{control:l.control,name:"email",render:({field:f})=>s.jsxs(Mc,{children:[s.jsx($c,{children:"Email"}),s.jsx(Ic,{children:s.jsx(be,{type:"email",placeholder:"vous@exemple.com",...f})}),s.jsx(Dc,{})]})}),s.jsx(Af,{control:l.control,name:"password",render:({field:f})=>s.jsxs(Mc,{children:[s.jsx($c,{children:"Mot de passe"}),s.jsx(Ic,{children:s.jsx(be,{type:"password",placeholder:"",...f})}),s.jsx(Dc,{})]})}),s.jsxs(ae,{type:"submit",className:"w-full",disabled:i,children:[i&&s.jsx(ui,{className:"mr-2 h-4 w-4 animate-spin"}),"Se connecter"]})]})})}),s.jsx(Ft,{value:"signup",className:"mt-4",children:s.jsx(yR,{...c,children:s.jsxs("form",{onSubmit:c.handleSubmit(d),className:"space-y-4",children:[s.jsx(Af,{control:c.control,name:"displayName",render:({field:f})=>s.jsxs(Mc,{children:[s.jsx($c,{children:"Nom complet"}),s.jsx(Ic,{children:s.jsx(be,{placeholder:"Jean Dupont",...f})}),s.jsx(Dc,{})]})}),s.jsx(Af,{control:c.control,name:"email",render:({field:f})=>s.jsxs(Mc,{children:[s.jsx($c,{children:"Email"}),s.jsx(Ic,{children:s.jsx(be,{type:"email",placeholder:"vous@exemple.com",...f})}),s.jsx(Dc,{})]})}),s.jsx(Af,{control:c.control,name:"password",render:({field:f})=>s.jsxs(Mc,{children:[s.jsx($c,{children:"Mot de passe"}),s.jsx(Ic,{children:s.jsx(be,{type:"password",placeholder:"",...f})}),s.jsx(Dc,{})]})}),s.jsxs(ae,{type:"submit",className:"w-full",disabled:i,children:[i&&s.jsx(ui,{className:"mr-2 h-4 w-4 animate-spin"}),"S'inscrire"]})]})})})]})})]})})}const Vke=["admin","finance","board","investisseur","lecteur","bureau_etude","production","marketing"];function Wke(){const[e,t]=w.useState([]),[r,n]=w.useState(!0);w.useEffect(()=>{a()},[]);const a=async()=>{var o;try{const{data:l}=await xe.auth.getSession(),c=(o=l==null?void 0:l.session)==null?void 0:o.access_token,d=await(await fetch("https://twkcoxagbajvopzzinor.supabase.co/functions/v1/list-users",{headers:{Authorization:`Bearer ${c}`,"Content-Type":"application/json"}})).json(),{data:f}=await xe.from("user_roles").select("*"),h=new Map;f&&f.forEach(y=>h.set(y.user_id,y.role));const m=d.map(y=>({id:y.id,email:y.email,display_name:y.display_name,role:h.get(y.id)||"lecteur"}));t(m)}catch(l){console.error("Error fetching users:",l)}finally{n(!1)}},i=async(o,l)=>{try{await xe.from("user_roles").upsert({user_id:o,role:l},{onConflict:"user_id"}),t(c=>c.map(u=>u.id===o?{...u,role:l}:u)),gn({title:"Rle mis  jour"})}catch{gn({title:"Erreur",variant:"destructive"})}};return r?s.jsx(ui,{className:"h-6 w-6 animate-spin mx-auto"}):s.jsxs(Bt,{children:[s.jsx(cr,{children:s.jsx(ur,{children:"Gestion des Utilisateurs"})}),s.jsx(Wt,{children:s.jsxs(Ht,{children:[s.jsx(qt,{children:s.jsxs(_e,{children:[s.jsx(ie,{children:"Nom"}),s.jsx(ie,{children:"Email"}),s.jsx(ie,{children:"Rle"})]})}),s.jsxs(Kt,{children:[e.map(o=>s.jsxs(_e,{children:[s.jsx(W,{className:"font-medium",children:o.display_name||""}),s.jsx(W,{className:"text-sm text-muted-foreground",children:o.email}),s.jsx(W,{children:s.jsxs(st,{value:o.role,onValueChange:l=>i(o.id,l),children:[s.jsx(at,{className:"w-32",children:s.jsx(ot,{})}),s.jsx(it,{children:Vke.map(l=>s.jsx(Le,{value:l,children:l},l))})]})})]},o.id)),e.length===0&&s.jsx(_e,{children:s.jsx(W,{colSpan:3,className:"text-center text-muted-foreground",children:"Aucun utilisateur"})})]})]})})]})}const xR=["admin","finance","board","investisseur","lecteur","bureau_etude","production","marketing"],Hke=["hidden","read","write"],gw=[{key:"home",label:"Accueil"},{key:"product-plan",label:"Plan Produit"},{key:"organisation",label:"Organisation"},{key:"charges",label:"Structure des Charges"},{key:"crm",label:"CRM"},{key:"costflow",label:"Production et BE"},{key:"timetracking",label:"Suivi d'activit"},{key:"previsionnel",label:"Prvisionnel"},{key:"funding",label:"Besoin de Financement"},{key:"scenarios",label:"Scnarios"},{key:"valuation",label:"Valorisation & Analyse"},{key:"investment-summary",label:"Synthse Investisseur"},{key:"snapshots",label:"Sauvegardes"}],qke={admin:"Admin",finance:"Finance",board:"Board",investisseur:"Investisseur",lecteur:"Lecteur",bureau_etude:"Bureau d'tude",production:"Production",marketing:"Marketing"},vw={hidden:{label:"Masqu",icon:MI,color:"bg-muted text-muted-foreground"},read:{label:"Lecture",icon:LW,color:"bg-blue-100 text-blue-800"},write:{label:"criture",icon:tv,color:"bg-green-100 text-green-800"}};function Kke(){const{isAdmin:e,loading:t}=xa(),r=Qm(),[n,a]=w.useState({}),[i,o]=w.useState(!0),[l,c]=w.useState(null);w.useEffect(()=>{!t&&!e&&r("/")},[e,t,r]),w.useEffect(()=>{u()},[]);const u=async()=>{try{const{data:f,error:h}=await xe.from("tab_permissions").select("*");if(h)throw h;const m={};xR.forEach(y=>{m[y]={},gw.forEach(g=>{m[y][g.key]="hidden"})}),f==null||f.forEach(y=>{m[y.role]&&(m[y.role][y.tab_key]=y.permission)}),a(m)}catch{}finally{o(!1)}},d=async(f,h,m)=>{c(`${f}:${h}`);try{await xe.from("tab_permissions").upsert({role:f,tab_key:h,permission:m},{onConflict:"role,tab_key"}),a(y=>({...y,[f]:{...y[f],[h]:m}})),gn({title:"Permission mise  jour"})}catch{gn({title:"Erreur",variant:"destructive"})}finally{c(null)}};return t||i?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx(ui,{className:"h-8 w-8 animate-spin text-primary"})}):e?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(DI,{className:"h-8 w-8 text-primary"}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Administration"}),s.jsx("p",{className:"text-muted-foreground",children:"Gestion des utilisateurs et des permissions"})]})]}),s.jsxs(xi,{defaultValue:"users",className:"space-y-6",children:[s.jsxs(Fa,{className:"grid w-full max-w-md grid-cols-2",children:[s.jsxs(At,{value:"users",className:"flex items-center gap-2",children:[s.jsx(zl,{className:"h-4 w-4"}),"Utilisateurs"]}),s.jsxs(At,{value:"permissions",className:"flex items-center gap-2",children:[s.jsx(II,{className:"h-4 w-4"}),"Permissions"]})]}),s.jsx(Ft,{value:"users",children:s.jsx(Wke,{})}),s.jsx(Ft,{value:"permissions",className:"space-y-6",children:s.jsxs(Bt,{children:[s.jsxs(cr,{children:[s.jsx(ur,{children:"Matrice des Permissions"}),s.jsx(ps,{children:"HIDDEN = invisible  READ = lecture seule  WRITE = modification"})]}),s.jsx(Wt,{children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Ht,{children:[s.jsx(qt,{children:s.jsxs(_e,{children:[s.jsx(ie,{className:"w-32",children:"Rle"}),gw.map(f=>s.jsx(ie,{className:"text-center min-w-[140px]",children:f.label},f.key))]})}),s.jsx(Kt,{children:xR.map(f=>s.jsxs(_e,{children:[s.jsx(W,{children:s.jsx(Oe,{variant:f==="admin"?"default":"secondary",children:qke[f]})}),gw.map(h=>{var g;const m=((g=n[f])==null?void 0:g[h.key])||"hidden",y=`${f}:${h.key}`;return s.jsx(W,{className:"text-center p-2",children:f==="admin"?s.jsxs(Oe,{className:vw.write.color,children:[s.jsx(tv,{className:"h-3 w-3 mr-1"}),vw.write.label]}):s.jsxs(st,{value:m,onValueChange:p=>d(f,h.key,p),disabled:l===y,children:[s.jsx(at,{className:"w-28",children:s.jsx(ot,{})}),s.jsx(it,{children:Hke.map(p=>{const{label:v,icon:x}=vw[p];return s.jsx(Le,{value:p,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(x,{className:"h-3 w-3"}),v]})},p)})})]})},h.key)})]},f))})]})})})]})})]})]}):null}const yw=[50,100,200,500,1e3,2e3,5e3,1e4];function Yke(e){return{id:e.id,code:e.code,name:e.name,category:e.category||"Mcanique",revision:e.revision||"A",supplier:e.supplier||"",currency:e.currency||"EUR",prices:{50:Number(e.price_vol_50)||0,100:Number(e.price_vol_100)||0,200:Number(e.price_vol_200)||0,500:Number(e.price_vol_500)||0,1e3:Number(e.price_vol_1000)||0,2e3:Number(e.price_vol_2000)||0,5e3:Number(e.price_vol_5000)||0,1e4:Number(e.price_vol_10000)||0},comments:e.comments||"",created_at:e.created_at,updated_at:e.updated_at}}function HN(){const{user:e}=xa(),[t,r]=w.useState([]),[n,a]=w.useState([]),[i,o]=w.useState([]),[l,c]=w.useState([]),[u,d]=w.useState([]),[f,h]=w.useState([]),[m,y]=w.useState(!0),[g,p]=w.useState(!1),v=w.useCallback(async()=>{if(e){g||y(!0);try{const[I,F,q,de,re,H]=await Promise.all([xe.from("costflow_references").select("*").order("code"),xe.from("costflow_products").select("*").order("name"),xe.from("costflow_bom").select("*"),xe.from("costflow_reference_files").select("*").order("uploaded_at",{ascending:!1}),xe.from("costflow_suppliers").select("*").order("name"),xe.from("costflow_product_categories").select("*").order("name")]);I.data&&r(I.data.map(Yke)),F.data&&a(F.data.map(Y=>({id:Y.id,name:Y.name,family:Y.family||"Standard",main_supplier:Y.main_supplier||"",coefficient:Number(Y.coefficient)||1.3,price_ttc:Number(Y.price_ttc)||0,default_volume:Y.default_volume||500,comments:Y.comments||"",category_id:Y.category_id||null,created_at:Y.created_at,updated_at:Y.updated_at}))),q.data&&o(q.data.map(Y=>({id:Y.id,product_id:Y.product_id,reference_id:Y.reference_id,quantity:Number(Y.quantity)||1}))),de.data&&c(de.data.map(Y=>({id:Y.id,reference_id:Y.reference_id,file_name:Y.file_name,file_path:Y.file_path,file_size:Y.file_size||0,version:Y.version||1,uploaded_at:Y.uploaded_at}))),re.data&&d(re.data.map(Y=>({id:Y.id,name:Y.name,contact_name:Y.contact_name||"",email:Y.email||"",phone:Y.phone||"",country:Y.country||"France",comments:Y.comments||"",created_at:Y.created_at,updated_at:Y.updated_at}))),H.data&&h(H.data.map(Y=>({id:Y.id,name:Y.name,description:Y.description||"",color:Y.color||"#6366f1",created_at:Y.created_at})))}catch(I){console.error("CostFlow fetch error:",I)}finally{y(!1),p(!0)}}},[e,g]);w.useEffect(()=>{v()},[v]);const x=async I=>{if(!e)return;const F=I.prices||{},{error:q}=await xe.from("costflow_references").insert({user_id:e.id,code:I.code,name:I.name,category:I.category||"Mcanique",revision:I.revision||"A",supplier:I.supplier||"",currency:I.currency||"EUR",comments:I.comments||"",price_vol_50:F[50]||0,price_vol_100:F[100]||0,price_vol_200:F[200]||0,price_vol_500:F[500]||0,price_vol_1000:F[1e3]||0,price_vol_2000:F[2e3]||0,price_vol_5000:F[5e3]||0,price_vol_10000:F[1e4]||0});q?(Ee.error("Erreur cration rfrence"),console.error(q)):(Ee.success("Rfrence cre"),v())},b=async(I,F)=>{if(!e)return;const q={};F.code!==void 0&&(q.code=F.code),F.name!==void 0&&(q.name=F.name),F.category!==void 0&&(q.category=F.category),F.revision!==void 0&&(q.revision=F.revision),F.supplier!==void 0&&(q.supplier=F.supplier),F.currency!==void 0&&(q.currency=F.currency),F.comments!==void 0&&(q.comments=F.comments),F.prices&&(q.price_vol_50=F.prices[50]??0,q.price_vol_100=F.prices[100]??0,q.price_vol_200=F.prices[200]??0,q.price_vol_500=F.prices[500]??0,q.price_vol_1000=F.prices[1e3]??0,q.price_vol_2000=F.prices[2e3]??0,q.price_vol_5000=F.prices[5e3]??0,q.price_vol_10000=F.prices[1e4]??0);const{error:de}=await xe.from("costflow_references").update(q).eq("id",I);de?(Ee.error("Erreur mise  jour"),console.error(de)):(Ee.success("Rfrence mise  jour"),v())},_=async I=>{const{error:F}=await xe.from("costflow_references").delete().eq("id",I);F?(Ee.error("Erreur suppression"),console.error(F)):(Ee.success("Rfrence supprime"),v())},j=async(I,F="skip")=>{if(!e||I.length===0)return{imported:0,skipped:0,updated:0,errors:[]};const q={imported:0,skipped:0,updated:0,errors:[]},de=t.map(Y=>Y.code),re=I.filter(Y=>!de.includes(Y.code||"")),H=I.filter(Y=>de.includes(Y.code||""));if(re.length>0){const Y=re.map(J=>{const ge=J.prices||{};return{user_id:e.id,code:J.code,name:J.name||J.code,category:J.category||"Mcanique",revision:J.revision||"A",supplier:J.supplier||"",currency:J.currency||"EUR",comments:J.comments||"",price_vol_50:ge[50]||0,price_vol_100:ge[100]||0,price_vol_200:ge[200]||0,price_vol_500:ge[500]||0,price_vol_1000:ge[1e3]||0,price_vol_2000:ge[2e3]||0,price_vol_5000:ge[5e3]||0,price_vol_10000:ge[1e4]||0}}),{error:G}=await xe.from("costflow_references").insert(Y);G?q.errors.push(`Erreur insertion : ${G.message}`):q.imported=re.length}if(H.length>0)if(F==="skip")q.skipped=H.length;else for(const Y of H){const G=t.find(Ce=>Ce.code===Y.code);if(!G)continue;const J=Y.prices||{},{error:ge}=await xe.from("costflow_references").update({name:Y.name||Y.code,supplier:Y.supplier||"",currency:Y.currency||"EUR",comments:Y.comments||"",price_vol_50:J[50]||0,price_vol_100:J[100]||0,price_vol_200:J[200]||0,price_vol_500:J[500]||0,price_vol_1000:J[1e3]||0,price_vol_2000:J[2e3]||0,price_vol_5000:J[5e3]||0,price_vol_10000:J[1e4]||0}).eq("id",G.id);ge?q.errors.push(`Erreur mise  jour ${Y.code}`):q.updated++}return v(),q},S=async I=>{if(!e)return;const{error:F}=await xe.from("costflow_products").insert({user_id:e.id,name:I.name,family:I.family||"Standard",main_supplier:I.main_supplier||"",coefficient:I.coefficient||1.3,price_ttc:I.price_ttc||0,default_volume:I.default_volume||500,comments:I.comments||""});F?(Ee.error("Erreur cration produit"),console.error(F)):(Ee.success("Produit cr"),v())},C=async(I,F)=>{if(!e)return;const{error:q}=await xe.from("costflow_products").update(F).eq("id",I);q?(Ee.error("Erreur mise  jour"),console.error(q)):(Ee.success("Produit mis  jour"),v())},P=async I=>{const{error:F}=await xe.from("costflow_products").delete().eq("id",I);F?(Ee.error("Erreur suppression"),console.error(F)):(Ee.success("Produit supprim"),v())},N=async(I,F,q)=>{if(!e)return;const{error:de}=await xe.from("costflow_bom").insert({user_id:e.id,product_id:I,reference_id:F,quantity:q});de?(Ee.error("Erreur ajout nomenclature"),console.error(de)):v()},E=async(I,F)=>{const{error:q}=await xe.from("costflow_bom").update({quantity:F}).eq("id",I);q?(Ee.error("Erreur mise  jour"),console.error(q)):v()},A=async I=>{const{error:F}=await xe.from("costflow_bom").delete().eq("id",I);F?(Ee.error("Erreur suppression"),console.error(F)):v()},T=async(I,F)=>{if(!e)return;const q=`${e.id}/${I}/${Date.now()}_${F.name}`,{error:de}=await xe.storage.from("technical-plans").upload(q,F);if(de){Ee.error("Erreur upload fichier"),console.error(de);return}const re=l.filter(G=>G.reference_id===I),H=re.length>0?Math.max(...re.map(G=>G.version)):0,{error:Y}=await xe.from("costflow_reference_files").insert({user_id:e.id,reference_id:I,file_name:F.name,file_path:q,file_size:F.size,version:H+1});Y?(Ee.error("Erreur enregistrement fichier"),console.error(Y)):(Ee.success("Fichier upload"),v())},R=async(I,F)=>{await xe.storage.from("technical-plans").remove([F]);const{error:q}=await xe.from("costflow_reference_files").delete().eq("id",I);q?(Ee.error("Erreur suppression fichier"),console.error(q)):v()},k=I=>{const{data:F}=xe.storage.from("technical-plans").getPublicUrl(I);return F.publicUrl},O=async I=>{const{data:F,error:q}=await xe.storage.from("technical-plans").createSignedUrl(I,3600);return q?(Ee.error("Erreur accs fichier"),null):F.signedUrl},M=(I,F)=>{const q=i.filter(Y=>Y.product_id===I),de=n.find(Y=>Y.id===I);if(!de)return 0;const re=yw.reduce((Y,G)=>Math.abs(G-F)<Math.abs(Y-F)?G:Y);let H=0;for(const Y of q){const G=t.find(J=>J.id===Y.reference_id);G&&(H+=Y.quantity*(G.prices[re]||0))}return H*de.coefficient};return{references:t,products:n,bom:i,referenceFiles:l,suppliers:u,productCategories:f,loading:m,createReference:x,updateReference:b,deleteReference:_,bulkCreateReferences:j,createProduct:S,updateProduct:C,deleteProduct:P,createProductWithBom:async(I,F)=>{if(!e)return;const{data:q,error:de}=await xe.from("costflow_products").insert({user_id:e.id,name:I.name,family:I.family||"Standard",main_supplier:I.main_supplier||"",coefficient:I.coefficient||1.3,price_ttc:I.price_ttc||0,default_volume:I.default_volume||500,comments:I.comments||""}).select("id").single();if(de||!q){Ee.error("Erreur cration produit"),console.error(de);return}const re=q.id;if(F.length>0){const H=F.map(G=>({user_id:e.id,product_id:re,reference_id:G.referenceId,quantity:G.quantity})),{error:Y}=await xe.from("costflow_bom").insert(H);Y&&(Ee.error("Erreur ajout nomenclature"),console.error(Y))}Ee.success(`Produit "${I.name}" cr avec ${F.length} rfrence(s)`),v()},addBomEntry:N,updateBomEntry:E,removeBomEntry:A,uploadFile:T,deleteFile:R,getFileUrl:k,getSignedUrl:O,createSupplier:async I=>{if(!e)return;const{error:F}=await xe.from("costflow_suppliers").insert({user_id:e.id,name:I.name,contact_name:I.contact_name||"",email:I.email||"",phone:I.phone||"",country:I.country||"France",comments:I.comments||""});F?(Ee.error("Erreur cration fournisseur"),console.error(F)):(Ee.success("Fournisseur cr"),v())},updateSupplier:async(I,F)=>{if(!e)return;const{error:q}=await xe.from("costflow_suppliers").update(F).eq("id",I);q?(Ee.error("Erreur mise  jour fournisseur"),console.error(q)):(Ee.success("Fournisseur mis  jour"),v())},deleteSupplier:async I=>{const{error:F}=await xe.from("costflow_suppliers").delete().eq("id",I);F?(Ee.error("Erreur suppression fournisseur"),console.error(F)):(Ee.success("Fournisseur supprim"),v())},createProductCategory:async I=>{if(!e)return;const{error:F}=await xe.from("costflow_product_categories").insert({user_id:e.id,name:I.name,description:I.description||"",color:I.color||"#6366f1"});F?(Ee.error("Erreur cration catgorie"),console.error(F)):(Ee.success("Catgorie cre"),v())},updateProductCategory:async(I,F)=>{if(!e)return;const{error:q}=await xe.from("costflow_product_categories").update(F).eq("id",I);q?(Ee.error("Erreur mise  jour catgorie"),console.error(q)):(Ee.success("Catgorie mise  jour"),v())},deleteProductCategory:async I=>{await xe.from("costflow_products").update({category_id:null}).eq("category_id",I);const{error:F}=await xe.from("costflow_product_categories").delete().eq("id",I);F?(Ee.error("Erreur suppression catgorie"),console.error(F)):(Ee.success("Catgorie supprime"),v())},calculateProductCost:M,calculateProductCosts:I=>{const F={};for(const q of yw)F[q]=M(I,q);return F},VOLUME_TIERS:yw,refresh:v}}const Gke=kd("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),mo=w.forwardRef(({className:e,variant:t,...r},n)=>s.jsx("div",{ref:n,role:"alert",className:ue(Gke({variant:t}),e),...r}));mo.displayName="Alert";const Xke=w.forwardRef(({className:e,...t},r)=>s.jsx("h5",{ref:r,className:ue("mb-1 font-medium leading-none tracking-tight",e),...t}));Xke.displayName="AlertTitle";const po=w.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:ue("text-sm [&_p]:leading-relaxed",e),...t}));po.displayName="AlertDescription";const xw=["EUR","USD","GBP","CHF","CNY","JPY"],og=[50,100,200,500,1e3,2e3,5e3,1e4];function Pc(){return{code:"",name:"",supplier:"",currency:"EUR",prices:{},unit:"pice",comments:"",valid:!1,isDuplicate:!1}}function Of(e){return e.code.trim().length>0}function Qke({open:e,onOpenChange:t,onImport:r,existingCodes:n}){const[a,i]=w.useState([Pc()]),[o,l]=w.useState(!1),[c,u]=w.useState("skip"),[d,f]=w.useState(null),h=w.useRef(null),m=w.useRef(null),y=a.filter(P=>Of(P)).length,g=a.filter(P=>P.code&&n.includes(P.code)).length,p=(P,N,E)=>{i(A=>{const T=[...A];return T[P]={...T[P],[N]:E},T[P].valid=Of(T[P]),T[P].isDuplicate=T[P].code?n.includes(T[P].code):!1,T})},v=(P,N,E)=>{i(A=>{const T=[...A];return T[P]={...T[P],prices:{...T[P].prices,[N]:E}},T})},x=P=>{i(N=>N.length===1?[Pc()]:N.filter((E,A)=>A!==P))},b=()=>i(P=>[...P,Pc()]),_=w.useCallback(P=>{const N=P.clipboardData.getData("text/plain");if(!N.includes("	")&&!N.includes(`
`))return;P.preventDefault();const E=N.split(`
`).map(O=>O.trim()).filter(O=>O.length>0),A=E[0].toLowerCase(),k=(A.includes("code")||A.includes("nom")||A.includes("name")?E.slice(1):E).map(O=>{const M=O.split("	"),D=Pc();return D.code=(M[0]||"").trim(),D.name=(M[1]||"").trim(),D.supplier=(M[2]||"").trim(),D.currency=xw.includes((M[3]||"").trim().toUpperCase())?(M[3]||"EUR").trim().toUpperCase():"EUR",og.forEach((L,B)=>{const z=parseFloat((M[4+B]||"").replace(",","."));isNaN(z)||(D.prices[L]=z)}),D.unit=(M[12]||"pice").trim(),D.comments=(M[13]||"").trim(),D.valid=Of(D),D.isDuplicate=D.code?n.includes(D.code):!1,D}).filter(O=>O.code||O.name);k.length>0&&i(O=>O.length===1&&!O[0].code&&!O[0].name?k:[...O,...k])},[]),j=P=>{var A;const N=(A=P.target.files)==null?void 0:A[0];if(!N)return;const E=new FileReader;E.onload=T=>{var z;const R=(z=T.target)==null?void 0:z.result;if(!R)return;const k=R.includes("	")?"	":R.includes(";")?";":",",O=R.split(`
`).map(Z=>Z.trim()).filter(Z=>Z.length>0),M=O[0].toLowerCase(),B=(M.includes("code")||M.includes("nom")?O.slice(1):O).map(Z=>{const ee=Z.split(k),le=Pc();return le.code=(ee[0]||"").trim(),le.name=(ee[1]||"").trim(),le.supplier=(ee[2]||"").trim(),le.currency=xw.includes((ee[3]||"").trim().toUpperCase())?(ee[3]||"EUR").trim().toUpperCase():"EUR",og.forEach((V,I)=>{const F=parseFloat((ee[4+I]||"").replace(",","."));isNaN(F)||(le.prices[V]=F)}),le.unit=(ee[12]||"pice").trim(),le.comments=(ee[13]||"").trim(),le.valid=Of(le),le.isDuplicate=le.code?n.includes(le.code):!1,le}).filter(Z=>Z.code||Z.name);B.length>0&&i(B)},E.readAsText(N),m.current&&(m.current.value="")},S=async()=>{const P=a.filter(A=>Of(A));if(P.length===0)return;l(!0);const N=P.map(A=>({code:A.code,name:A.name||A.code,supplier:A.supplier||"",currency:A.currency||"EUR",prices:A.prices||{},comments:A.comments||"",category:"Mcanique",revision:"A"})),E=await r(N,c);f(E),l(!1)},C=()=>{i([Pc()]),f(null),t(!1)};return d?s.jsx(Cr,{open:e,onOpenChange:C,children:s.jsxs(vr,{className:"max-w-md",children:[s.jsx(yr,{children:s.jsxs(xr,{className:"flex items-center gap-2",children:[s.jsx(AI,{className:"h-5 w-5 text-green-500"}),"Import termin"]})}),s.jsxs("div",{className:"space-y-3 py-4",children:[d.imported>0&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Oe,{variant:"default",className:"bg-green-600",children:d.imported}),s.jsx("span",{className:"text-sm",children:"rfrence(s) importe(s)"})]}),d.updated>0&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Oe,{variant:"secondary",children:d.updated}),s.jsx("span",{className:"text-sm",children:"rfrence(s) mise(s)  jour"})]}),d.skipped>0&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Oe,{variant:"outline",children:d.skipped}),s.jsx("span",{className:"text-sm",children:"doublon(s) ignor(s)"})]}),d.errors.length>0&&s.jsx(mo,{variant:"destructive",children:s.jsx(po,{children:d.errors.map((P,N)=>s.jsx("div",{className:"text-xs",children:P},N))})})]}),s.jsx(ae,{onClick:C,className:"w-full",children:"Fermer"})]})}):s.jsx(Cr,{open:e,onOpenChange:C,children:s.jsxs(vr,{className:"max-w-[95vw] max-h-[90vh] overflow-hidden flex flex-col",children:[s.jsxs(yr,{children:[s.jsx(xr,{children:"Importer des rfrences"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Choisissez votre mthode d'import"})]}),s.jsxs(xi,{defaultValue:"paste",className:"flex-1 flex flex-col overflow-hidden",children:[s.jsxs(Fa,{className:"w-full",children:[s.jsxs(At,{value:"paste",className:"flex-1",children:[s.jsx(OI,{className:"h-4 w-4 mr-1"})," Coller depuis Excel"]}),s.jsxs(At,{value:"file",className:"flex-1",children:[s.jsx(Li,{className:"h-4 w-4 mr-1"})," Importer un fichier"]})]}),s.jsxs(Ft,{value:"paste",className:"flex-1 flex flex-col overflow-hidden space-y-3 mt-3",children:[s.jsxs(mo,{children:[s.jsx(Th,{className:"h-4 w-4"}),s.jsxs(po,{children:[s.jsx("strong",{children:"Comment coller depuis Excel :"})," Slectionnez vos lignes, copiez (Ctrl+C), cliquez dans le tableau et collez (Ctrl+V). Seul le ",s.jsx("strong",{children:"code"})," est obligatoire, les cases vides auront la valeur 0 par dfaut."]})]}),g>0&&s.jsxs(mo,{children:[s.jsx($u,{className:"h-4 w-4"}),s.jsxs(po,{className:"flex items-center justify-between",children:[s.jsxs("span",{children:[g," code(s) dj existant(s)"]}),s.jsxs("div",{className:"flex gap-2 ml-4",children:[s.jsx(ae,{size:"sm",variant:c==="skip"?"default":"outline",onClick:()=>u("skip"),children:"Ignorer"}),s.jsx(ae,{size:"sm",variant:c==="overwrite"?"default":"outline",onClick:()=>u("overwrite"),children:"craser"})]})]})]}),s.jsx("div",{ref:h,className:"flex-1 overflow-auto border rounded",onPaste:_,children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"bg-muted sticky top-0",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-2 py-2 text-left text-xs font-medium w-24",children:"Code *"}),s.jsx("th",{className:"px-2 py-2 text-left text-xs font-medium w-28",children:"Nom"}),s.jsx("th",{className:"px-2 py-2 text-left text-xs font-medium w-28",children:"Fournisseur"}),s.jsx("th",{className:"px-2 py-2 text-left text-xs font-medium w-20",children:"Devise"}),og.map(P=>s.jsx("th",{className:"px-1 py-2 text-center text-xs font-medium w-16",children:P},P)),s.jsx("th",{className:"px-2 py-2 text-left text-xs font-medium w-20",children:"Unit"}),s.jsx("th",{className:"px-2 py-2 text-left text-xs font-medium w-28",children:"Commentaire"}),s.jsx("th",{className:"px-1 py-2 w-8"})]})}),s.jsx("tbody",{children:a.map((P,N)=>s.jsxs("tr",{className:`border-t ${P.isDuplicate?"bg-yellow-50 dark:bg-yellow-900/10":""}`,children:[s.jsx("td",{className:"px-1 py-1",children:s.jsxs("div",{className:"relative",children:[s.jsx(be,{className:`h-8 text-xs ${P.isDuplicate?"border-yellow-400":""}`,placeholder:"NR...",value:P.code,onChange:E=>p(N,"code",E.target.value)}),P.isDuplicate&&s.jsx($u,{className:"absolute right-1 top-1.5 h-3 w-3 text-yellow-500"})]})}),s.jsx("td",{className:"px-1 py-1",children:s.jsx(be,{className:"h-8 text-xs",placeholder:"Nom...",value:P.name,onChange:E=>p(N,"name",E.target.value)})}),s.jsx("td",{className:"px-1 py-1",children:s.jsx(be,{className:"h-8 text-xs",value:P.supplier,onChange:E=>p(N,"supplier",E.target.value)})}),s.jsx("td",{className:"px-1 py-1",children:s.jsxs(st,{value:P.currency,onValueChange:E=>p(N,"currency",E),children:[s.jsx(at,{className:"h-8 text-xs",children:s.jsx(ot,{})}),s.jsx(it,{children:xw.map(E=>s.jsx(Le,{value:E,children:E},E))})]})}),og.map(E=>s.jsx("td",{className:"px-1 py-1",children:s.jsx(be,{type:"number",step:"0.01",className:"h-8 text-xs text-right font-mono-numbers",value:P.prices[E]??"",onChange:A=>v(N,E,parseFloat(A.target.value)||0),placeholder:"0"})},E)),s.jsx("td",{className:"px-1 py-1",children:s.jsx(be,{className:"h-8 text-xs",value:P.unit,onChange:E=>p(N,"unit",E.target.value)})}),s.jsx("td",{className:"px-1 py-1",children:s.jsx(be,{className:"h-8 text-xs",value:P.comments,onChange:E=>p(N,"comments",E.target.value)})}),s.jsx("td",{className:"px-1 py-1 text-center",children:s.jsx("button",{onClick:()=>x(N),className:"text-destructive hover:text-destructive/80",children:s.jsx($a,{className:"h-4 w-4"})})})]},N))})]})}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(ae,{variant:"outline",size:"sm",onClick:b,children:"+ Ajouter une ligne"}),s.jsxs("div",{className:"flex items-center gap-3",children:[g>0&&s.jsxs("span",{className:"text-xs text-yellow-600",children:[g," doublon(s)"]}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:[y," ligne(s) valide(s)"]})]})]})]}),s.jsxs(Ft,{value:"file",className:"space-y-4 mt-3",children:[s.jsxs(mo,{children:[s.jsx(Th,{className:"h-4 w-4"}),s.jsxs(po,{children:["Formats supports : ",s.jsx("strong",{children:".csv, .tsv"}),s.jsx("br",{}),"Colonnes attendues : Code, Nom, Fournisseur, Devise, 50, 100, 200, 500, 1000, 2000, 5000, 10000, Unit, Commentaire"]})]}),s.jsx("div",{className:"flex justify-center py-8 border-2 border-dashed rounded-lg",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Li,{className:"h-8 w-8 mx-auto text-muted-foreground mb-2"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Glissez un fichier ou cliquez pour slectionner"}),s.jsx("input",{ref:m,type:"file",className:"hidden",accept:".csv,.tsv,.txt",onChange:j}),s.jsx(ae,{variant:"outline",onClick:()=>{var P;return(P=m.current)==null?void 0:P.click()},children:"Choisir un fichier"})]})}),a.length>0&&a[0].code&&s.jsxs("p",{className:"text-sm text-muted-foreground",children:[y," ligne(s) charge(s) et prte(s)  importer"]})]})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[s.jsxs(ae,{variant:"outline",onClick:C,children:[s.jsx($a,{className:"h-4 w-4 mr-1"})," Annuler"]}),s.jsxs(ae,{onClick:S,disabled:y===0||o,children:[s.jsx(Li,{className:"h-4 w-4 mr-1"})," Importer ",y," rfrence(s)"]})]})]})})}const Jke=["Mcanique","lectronique","Plastique","Composite","Caoutchouc","Visserie","Cblage","Autre"],Zke=["EUR","USD","GBP","CHF","CNY","JPY"],eEe="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),tEe=[50,100,200,500,1e3,2e3,5e3,1e4];function rEe({references:e,suppliers:t,onCreateReference:r,onUpdateReference:n,onDeleteReference:a,onBulkImport:i,onSelectReference:o}){const[l,c]=w.useState(""),[u,d]=w.useState(!1),[f,h]=w.useState(!1),[m,y]=w.useState(null),[g,p]=w.useState({code:"",name:"",category:"Mcanique",revision:"A",supplier:"",currency:"EUR",comments:"",prices:{}}),v=e.filter(j=>j.code.toLowerCase().includes(l.toLowerCase())||j.name.toLowerCase().includes(l.toLowerCase())||j.supplier.toLowerCase().includes(l.toLowerCase())),x=()=>{y(null),p({code:"",name:"",category:"Mcanique",revision:"A",supplier:"",currency:"EUR",comments:"",prices:{}}),h(!0)},b=j=>{y(j),p({code:j.code,name:j.name,category:j.category,revision:j.revision,supplier:j.supplier,currency:j.currency,comments:j.comments,prices:{...j.prices}}),h(!0)},_=async()=>{if(!g.code||!g.name)return;const j={...g,supplier:g.supplier==="none"?"":g.supplier};m?await n(m.id,j):await r(j),h(!1)};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between gap-4",children:[s.jsxs("div",{className:"relative flex-1 max-w-sm",children:[s.jsx(FS,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(be,{placeholder:"Rechercher code, nom, fournisseur...",value:l,onChange:j=>c(j.target.value),className:"pl-9"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(ae,{variant:"outline",onClick:()=>d(!0),children:[s.jsx(Li,{className:"h-4 w-4 mr-1"})," Importer"]}),s.jsxs(Cr,{open:f,onOpenChange:h,children:[s.jsx(pd,{asChild:!0,children:s.jsxs(ae,{onClick:x,children:[s.jsx(ar,{className:"h-4 w-4 mr-1"})," Nouvelle rfrence"]})}),s.jsxs(vr,{className:"max-w-2xl max-h-[85vh] overflow-y-auto",children:[s.jsx(yr,{children:s.jsx(xr,{children:m?"Modifier la rfrence":"Nouvelle rfrence"})}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Ne,{children:"Code *"}),s.jsx(be,{value:g.code,onChange:j=>p({...g,code:j.target.value}),placeholder:"REF-001"})]}),s.jsxs("div",{children:[s.jsx(Ne,{children:"Nom *"}),s.jsx(be,{value:g.name,onChange:j=>p({...g,name:j.target.value}),placeholder:"Nom de la pice"})]}),s.jsxs("div",{children:[s.jsx(Ne,{children:"Catgorie"}),s.jsxs(st,{value:g.category,onValueChange:j=>p({...g,category:j}),children:[s.jsx(at,{children:s.jsx(ot,{})}),s.jsx(it,{children:Jke.map(j=>s.jsx(Le,{value:j,children:j},j))})]})]}),s.jsxs("div",{children:[s.jsx(Ne,{children:"Rvision"}),s.jsxs(st,{value:g.revision,onValueChange:j=>p({...g,revision:j}),children:[s.jsx(at,{children:s.jsx(ot,{})}),s.jsx(it,{children:eEe.map(j=>s.jsx(Le,{value:j,children:j},j))})]})]}),s.jsxs("div",{children:[s.jsx(Ne,{children:"Fournisseur"}),s.jsxs(st,{value:g.supplier,onValueChange:j=>p({...g,supplier:j}),children:[s.jsx(at,{children:s.jsx(ot,{placeholder:"Slectionner..."})}),s.jsxs(it,{children:[s.jsx(Le,{value:"none",children:"Aucun"}),t.map(j=>s.jsx(Le,{value:j.name,children:j.name},j.id))]})]})]}),s.jsxs("div",{children:[s.jsx(Ne,{children:"Devise"}),s.jsxs(st,{value:g.currency,onValueChange:j=>p({...g,currency:j}),children:[s.jsx(at,{children:s.jsx(ot,{})}),s.jsx(it,{children:Zke.map(j=>s.jsx(Le,{value:j,children:j},j))})]})]})]}),s.jsxs("div",{className:"mt-4",children:[s.jsxs(Ne,{className:"text-sm font-semibold",children:["Grille de prix par volume (",g.currency,")"]}),s.jsx("div",{className:"grid grid-cols-4 gap-2 mt-2",children:tEe.map(j=>s.jsxs("div",{children:[s.jsxs(Ne,{className:"text-xs text-muted-foreground",children:[j," units"]}),s.jsx(be,{type:"number",step:"0.01",className:"font-mono-numbers text-right",value:g.prices[j]||"",onChange:S=>p({...g,prices:{...g.prices,[j]:parseFloat(S.target.value)||0}}),placeholder:"0.00"})]},j))})]}),s.jsxs("div",{className:"mt-4",children:[s.jsx(Ne,{children:"Commentaires"}),s.jsx(vi,{value:g.comments,onChange:j=>p({...g,comments:j.target.value}),rows:2})]}),s.jsx("div",{className:"flex justify-end mt-4",children:s.jsx(ae,{onClick:_,children:m?"Mettre  jour":"Crer"})})]})]})]})]}),s.jsx("div",{className:"border rounded overflow-auto",children:s.jsxs(Ht,{children:[s.jsx(qt,{children:s.jsxs(_e,{children:[s.jsx(ie,{children:"Code"}),s.jsx(ie,{children:"Nom"}),s.jsx(ie,{children:"Catgorie"}),s.jsx(ie,{children:"Rv."}),s.jsx(ie,{children:"Fournisseur"}),s.jsx(ie,{children:"Devise"}),s.jsx(ie,{className:"text-right",children:"Prix @500"}),s.jsx(ie,{className:"text-right",children:"Prix @1000"}),s.jsx(ie,{})]})}),s.jsxs(Kt,{children:[v.length===0&&s.jsx(_e,{children:s.jsx(W,{colSpan:9,className:"text-center text-muted-foreground py-8",children:'Aucune rfrence. Cliquez sur "Nouvelle rfrence" pour commencer.'})}),v.map(j=>{var S,C;return s.jsxs(_e,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>o(j),children:[s.jsx(W,{className:"font-mono-numbers font-medium",children:j.code}),s.jsx(W,{children:j.name}),s.jsx(W,{children:s.jsx(Oe,{variant:"secondary",children:j.category})}),s.jsx(W,{children:j.revision}),s.jsx(W,{children:j.supplier||"-"}),s.jsx(W,{children:j.currency}),s.jsx(W,{className:"text-right font-mono-numbers",children:((S=j.prices[500])==null?void 0:S.toFixed(2))||"-"}),s.jsx(W,{className:"text-right font-mono-numbers",children:((C=j.prices[1e3])==null?void 0:C.toFixed(2))||"-"}),s.jsx(W,{children:s.jsxs("div",{className:"flex gap-1",children:[s.jsx(ae,{variant:"ghost",size:"icon",onClick:P=>{P.stopPropagation(),b(j)},children:s.jsx(Ed,{className:"h-3 w-3"})}),s.jsx(ae,{variant:"ghost",size:"icon",onClick:P=>{P.stopPropagation(),a(j.id)},children:s.jsx(hr,{className:"h-3 w-3 text-destructive"})})]})})]},j.id)})]})]})}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[v.length," rfrence(s)  Cliquez sur une ligne pour voir les dtails et plans techniques"]}),s.jsx(Qke,{open:u,onOpenChange:d,onImport:i,existingCodes:e.map(j=>j.code)})]})}const nEe=[50,100,200,500,1e3,2e3,5e3,1e4];function aEe({reference:e,files:t,onUploadFile:r,onDeleteFile:n,onGetSignedUrl:a,onBack:i}){const o=w.useRef(null),l=t.filter(f=>f.reference_id===e.id),c=async f=>{var m;const h=(m=f.target.files)==null?void 0:m[0];h&&await r(e.id,h),o.current&&(o.current.value="")},u=async f=>{const h=await a(f.file_path);h&&window.open(h,"_blank")},d=f=>f<1024?`${f} B`:f<1024*1024?`${(f/1024).toFixed(1)} KB`:`${(f/(1024*1024)).toFixed(1)} MB`;return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(ae,{variant:"ghost",size:"icon",onClick:i,children:s.jsx(kI,{className:"h-4 w-4"})}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold",children:[e.code,"  ",e.name]}),s.jsxs("div",{className:"flex gap-2 mt-1",children:[s.jsx(Oe,{variant:"secondary",children:e.category}),s.jsxs(Oe,{variant:"outline",children:["Rv. ",e.revision]}),e.supplier&&s.jsx(Oe,{variant:"outline",children:e.supplier})]})]})]}),s.jsxs("div",{className:"financial-card p-4",children:[s.jsxs("h4",{className:"section-title",children:["Grille de prix (",e.currency,")"]}),s.jsx("div",{className:"grid grid-cols-8 gap-2",children:nEe.map(f=>{var h;return s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-xs text-muted-foreground mb-1",children:[f," u."]}),s.jsx("div",{className:"font-mono-numbers font-medium",children:((h=e.prices[f])==null?void 0:h.toFixed(2))||""})]},f)})})]}),e.comments&&s.jsxs("div",{className:"financial-card p-4",children:[s.jsx("h4",{className:"section-title",children:"Commentaires"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:e.comments})]}),s.jsxs("div",{className:"financial-card p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h4",{className:"section-title mb-0",children:"Plans techniques"}),s.jsxs("div",{children:[s.jsx("input",{ref:o,type:"file",className:"hidden",onChange:c,accept:".pdf,.dwg,.dxf,.step,.stp,.iges,.igs,.png,.jpg,.jpeg"}),s.jsxs(ae,{variant:"outline",size:"sm",onClick:()=>{var f;return(f=o.current)==null?void 0:f.click()},children:[s.jsx(Li,{className:"h-3 w-3 mr-1"})," Ajouter un fichier"]})]})]}),l.length===0?s.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:'Aucun fichier. Cliquez sur "Ajouter un fichier" pour uploader un plan.'}):s.jsxs(Ht,{children:[s.jsx(qt,{children:s.jsxs(_e,{children:[s.jsx(ie,{children:"Fichier"}),s.jsx(ie,{children:"Version"}),s.jsx(ie,{children:"Taille"}),s.jsx(ie,{children:"Date"}),s.jsx(ie,{})]})}),s.jsx(Kt,{children:l.map(f=>s.jsxs(_e,{children:[s.jsxs(W,{className:"flex items-center gap-2",children:[s.jsx(Ru,{className:"h-4 w-4 text-muted-foreground"}),f.file_name]}),s.jsx(W,{children:s.jsxs(Oe,{variant:"outline",children:["v",f.version]})}),s.jsx(W,{className:"font-mono-numbers text-muted-foreground",children:d(f.file_size)}),s.jsx(W,{className:"text-muted-foreground",children:new Date(f.uploaded_at).toLocaleDateString("fr-FR")}),s.jsx(W,{children:s.jsxs("div",{className:"flex gap-1",children:[s.jsx(ae,{variant:"ghost",size:"icon",onClick:()=>u(f),children:s.jsx(Ym,{className:"h-3 w-3"})}),s.jsx(ae,{variant:"ghost",size:"icon",onClick:()=>n(f.id,f.file_path),children:s.jsx(hr,{className:"h-3 w-3 text-destructive"})})]})})]},f.id))})]})]})]})}const iEe=[50,100,200,500,1e3,2e3,5e3,1e4],sEe=["Standard","Premium","conomique","Custom"];function lg(){return{refCode:"",quantity:1,volume:200,found:!1,referenceId:null,referenceName:""}}function oEe({open:e,onOpenChange:t,existingReferences:r,existingSuppliers:n,onImportProduct:a}){const[i,o]=w.useState(""),[l,c]=w.useState("Standard"),[u,d]=w.useState(""),[f,h]=w.useState([lg()]),[m,y]=w.useState(!1),[g,p]=w.useState(null),v=w.useRef(null),x=w.useCallback(R=>{if(!R.trim())return{found:!1,referenceId:null,referenceName:""};const k=r.find(O=>O.code.toLowerCase()===R.trim().toLowerCase());return k?{found:!0,referenceId:k.id,referenceName:k.name}:{found:!1,referenceId:null,referenceName:""}},[r]),b=(R,k,O)=>{h(M=>{const D=[...M];if(D[R]={...D[R],[k]:O},k==="refCode"){const L=x(O);D[R]={...D[R],...L}}return D})},_=R=>{h(k=>k.length===1?[lg()]:k.filter((O,M)=>M!==R))},j=()=>h(R=>[...R,lg()]),S=w.useCallback(R=>{const k=R.clipboardData.getData("text/plain");if(!k.includes("	")&&!k.includes(`
`))return;R.preventDefault();const O=k.split(`
`).map(z=>z.trim()).filter(z=>z.length>0),M=O[0].toLowerCase(),B=(M.includes("code")||M.includes("ref")||M.includes("rfrence")?O.slice(1):O).map(z=>{const Z=z.split("	"),ee=(Z[0]||"").trim(),le=parseFloat((Z[1]||"1").replace(",","."))||1,V=parseInt(Z[2]||"200")||200,I=x(ee);return{refCode:ee,quantity:le,volume:V,...I}}).filter(z=>z.refCode.length>0);B.length>0&&h(z=>z.length===1&&!z[0].refCode?B:[...z,...B])},[x]),C=R=>{var M;const k=(M=R.target.files)==null?void 0:M[0];if(!k)return;const O=new FileReader;O.onload=D=>{var I;const L=(I=D.target)==null?void 0:I.result;if(!L)return;const B=L.includes("	")?"	":L.includes(";")?";":",",z=L.split(`
`).map(F=>F.trim()).filter(F=>F.length>0),Z=z[0].toLowerCase(),V=(Z.includes("code")||Z.includes("ref")?z.slice(1):z).map(F=>{const q=F.split(B),de=(q[0]||"").trim(),re=parseFloat((q[1]||"1").replace(",","."))||1,H=parseInt(q[2]||"200")||200,Y=x(de);return{refCode:de,quantity:re,volume:H,...Y}}).filter(F=>F.refCode.length>0);V.length>0&&h(V)},O.readAsText(k),v.current&&(v.current.value="")},P=f.filter(R=>R.refCode.trim()&&R.found&&R.referenceId),N=f.filter(R=>R.refCode.trim()&&!R.found),E=P.length,A=async()=>{if(!(!i.trim()||E===0)){y(!0);try{const R=P.map(k=>({referenceId:k.referenceId,quantity:k.quantity}));await a({name:i,family:l,main_supplier:u,coefficient:1.3,price_ttc:0,default_volume:500,comments:""},R),p({success:!0,productName:i,refCount:E,errors:N.map(k=>k.refCode)})}catch{p({success:!1,productName:i,refCount:0,errors:["Erreur lors de la cration"]})}finally{y(!1)}}},T=()=>{o(""),c("Standard"),d(""),h([lg()]),p(null),t(!1)};return g?s.jsx(Cr,{open:e,onOpenChange:T,children:s.jsxs(vr,{className:"max-w-md",children:[s.jsx(yr,{children:s.jsxs(xr,{className:"flex items-center gap-2",children:[g.success?s.jsx(AI,{className:"h-5 w-5 text-emerald-500"}):s.jsx($u,{className:"h-5 w-5 text-destructive"}),g.success?"Produit cr":"Erreur"]})}),s.jsxs("div",{className:"space-y-3 py-4",children:[g.success&&s.jsxs(s.Fragment,{children:[s.jsxs("p",{className:"text-sm",children:["Le produit ",s.jsx("strong",{children:g.productName})," a t cr avec ",s.jsx("strong",{children:g.refCount})," rfrence(s)."]}),g.errors.length>0&&s.jsxs(mo,{children:[s.jsx($u,{className:"h-4 w-4"}),s.jsxs(po,{children:[s.jsxs("span",{className:"font-medium",children:[g.errors.length," rfrence(s) non trouve(s) ignore(s) :"]}),s.jsx("span",{className:"text-xs ml-1",children:g.errors.join(", ")})]})]})]}),!g.success&&s.jsx("p",{className:"text-sm text-destructive",children:g.errors[0]})]}),s.jsx(ae,{onClick:T,className:"w-full",children:"Fermer"})]})}):s.jsx(Cr,{open:e,onOpenChange:T,children:s.jsxs(vr,{className:"max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[s.jsxs(yr,{children:[s.jsx(xr,{children:"Importer des produits"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Choisissez votre mthode d'import"})]}),s.jsxs(xi,{defaultValue:"paste",className:"flex-1 flex flex-col overflow-hidden",children:[s.jsxs(Fa,{className:"w-full",children:[s.jsxs(At,{value:"paste",className:"flex-1",children:[s.jsx(OI,{className:"h-4 w-4 mr-1"})," Coller depuis Excel"]}),s.jsxs(At,{value:"file",className:"flex-1",children:[s.jsx(Li,{className:"h-4 w-4 mr-1"})," Importer un fichier"]})]}),s.jsxs(Ft,{value:"paste",className:"flex-1 flex flex-col overflow-hidden space-y-3 mt-3",children:[s.jsxs(mo,{children:[s.jsx(Th,{className:"h-4 w-4"}),s.jsxs(po,{children:[s.jsx("strong",{children:"Comment utiliser :"}),s.jsxs("ol",{className:"list-decimal ml-4 mt-1 text-sm space-y-0.5",children:[s.jsxs("li",{children:["Saisissez le ",s.jsx("strong",{children:"nom du produit"})," et sa famille en haut"]}),s.jsx("li",{children:"Collez les codes de rfrences depuis Excel (Ctrl+V)"}),s.jsx("li",{children:"Ajustez quantit et volume d'achat pour chaque rfrence"}),s.jsxs("li",{children:["Les rfrences ",s.jsx("strong",{className:"text-destructive",children:"non trouves"})," apparaissent en rouge"]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 p-4 border rounded-lg bg-muted/30",children:[s.jsxs("div",{children:[s.jsx(Ne,{children:"Nom du produit *"}),s.jsx(be,{value:i,onChange:R=>o(R.target.value),placeholder:"Ex: CCD-Diaphrag-105 111"})]}),s.jsxs("div",{children:[s.jsx(Ne,{children:"Famille *"}),s.jsxs(st,{value:l,onValueChange:c,children:[s.jsx(at,{children:s.jsx(ot,{})}),s.jsx(it,{children:sEe.map(R=>s.jsx(Le,{value:R,children:R},R))})]})]}),s.jsxs("div",{children:[s.jsx(Ne,{children:"Fournisseur"}),s.jsxs(st,{value:u,onValueChange:d,children:[s.jsx(at,{children:s.jsx(ot,{placeholder:"Slectionner..."})}),s.jsxs(it,{children:[s.jsx(Le,{value:" ",children:"Aucun"}),n.map(R=>s.jsx(Le,{value:R,children:R},R))]})]})]})]}),s.jsxs("div",{className:"flex-1 overflow-auto border rounded",onPaste:S,children:[s.jsx("p",{className:"text-sm font-medium px-3 py-2 bg-muted/50 border-b",children:"Rfrences du produit"}),s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"bg-muted sticky top-0",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium",children:"Code Rfrence"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium w-24",children:"Quantit"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium w-32",children:"Volume d'achat"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium",children:"Statut"}),s.jsx("th",{className:"px-1 py-2 w-8"})]})}),s.jsx("tbody",{children:f.map((R,k)=>s.jsxs("tr",{className:`border-t ${R.refCode&&!R.found?"bg-destructive/5":""}`,children:[s.jsxs("td",{className:"px-2 py-1",children:[s.jsx(be,{className:`h-8 text-xs ${R.refCode&&!R.found?"border-destructive text-destructive":""}`,placeholder:"NR20200022",value:R.refCode,onChange:O=>b(k,"refCode",O.target.value)}),R.found&&s.jsx("span",{className:"text-xs text-muted-foreground ml-1",children:R.referenceName})]}),s.jsx("td",{className:"px-2 py-1",children:s.jsx(be,{type:"number",min:1,className:"h-8 text-xs font-mono-numbers",value:R.quantity,onChange:O=>b(k,"quantity",parseInt(O.target.value)||1)})}),s.jsx("td",{className:"px-2 py-1",children:s.jsxs(st,{value:String(R.volume),onValueChange:O=>b(k,"volume",parseInt(O)),children:[s.jsx(at,{className:"h-8 text-xs",children:s.jsx(ot,{})}),s.jsx(it,{children:iEe.map(O=>s.jsx(Le,{value:String(O),children:O},O))})]})}),s.jsx("td",{className:"px-2 py-1",children:R.refCode&&(R.found?s.jsx(Oe,{variant:"secondary",className:"text-xs",children:" Trouve"}):s.jsx(Oe,{variant:"destructive",className:"text-xs",children:"Non trouve"}))}),s.jsx("td",{className:"px-1 py-1 text-center",children:s.jsx("button",{onClick:()=>_(k),className:"text-destructive hover:text-destructive/80",children:s.jsx($a,{className:"h-4 w-4"})})})]},k))})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(ae,{variant:"outline",size:"sm",onClick:j,children:"+ Ajouter une rfrence"}),s.jsxs("div",{className:"flex items-center gap-3",children:[N.length>0&&s.jsxs("span",{className:"text-xs text-destructive",children:[N.length," non trouve(s)"]}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:[E," rfrence(s) valide(s)"]})]})]})]}),s.jsxs(Ft,{value:"file",className:"space-y-4 mt-3",children:[s.jsxs(mo,{children:[s.jsx(Th,{className:"h-4 w-4"}),s.jsxs(po,{children:["Formats supports : ",s.jsx("strong",{children:".csv, .tsv"}),s.jsx("br",{}),"Colonnes attendues : Code Rfrence, Quantit, Volume d'achat"]})]}),s.jsx("div",{className:"flex justify-center py-8 border-2 border-dashed rounded-lg",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Li,{className:"h-8 w-8 mx-auto text-muted-foreground mb-2"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Glissez un fichier ou cliquez pour slectionner"}),s.jsx("input",{ref:v,type:"file",className:"hidden",accept:".csv,.tsv,.txt",onChange:C}),s.jsx(ae,{variant:"outline",onClick:()=>{var R;return(R=v.current)==null?void 0:R.click()},children:"Choisir un fichier"})]})})]})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[s.jsxs(ae,{variant:"outline",onClick:T,children:[s.jsx($a,{className:"h-4 w-4 mr-1"})," Annuler"]}),s.jsxs(ae,{onClick:A,disabled:!i.trim()||E===0||m,children:[s.jsx(Li,{className:"h-4 w-4 mr-1"})," Crer le produit (",E," rf.)"]})]})]})})}function lEe({products:e,references:t,categories:r,onCreateProduct:n,onUpdateProduct:a,onDeleteProduct:i,onSelectProduct:o,onImportProduct:l,calculateProductCosts:c}){const[u,d]=w.useState(""),[f,h]=w.useState(!1),[m,y]=w.useState(!1),[g,p]=w.useState(null),[v,x]=w.useState({name:"",main_supplier:"",coefficient:1.3,price_ttc:0,default_volume:500,comments:"",category_id:""}),b=e.filter(C=>{var N;const P=((N=r.find(E=>E.id===C.category_id))==null?void 0:N.name)||"";return C.name.toLowerCase().includes(u.toLowerCase())||P.toLowerCase().includes(u.toLowerCase())}),_=()=>{p(null),x({name:"",main_supplier:"",coefficient:1.3,price_ttc:0,default_volume:500,comments:"",category_id:null}),y(!0)},j=C=>{p(C),x({name:C.name,main_supplier:C.main_supplier,coefficient:C.coefficient,price_ttc:C.price_ttc,default_volume:C.default_volume,comments:C.comments,category_id:C.category_id||null}),y(!0)},S=async()=>{v.name&&(g?await a(g.id,v):await n(v),y(!1))};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between gap-4",children:[s.jsxs("div",{className:"relative flex-1 max-w-sm",children:[s.jsx(FS,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(be,{placeholder:"Rechercher produit ou catgorie...",value:u,onChange:C=>d(C.target.value),className:"pl-9"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(ae,{variant:"outline",onClick:()=>h(!0),children:[s.jsx(Li,{className:"h-4 w-4 mr-1"})," Importer"]}),s.jsxs(Cr,{open:m,onOpenChange:y,children:[s.jsx(pd,{asChild:!0,children:s.jsxs(ae,{onClick:_,children:[s.jsx(ar,{className:"h-4 w-4 mr-1"})," Nouveau produit"]})}),s.jsxs(vr,{className:"max-w-lg",children:[s.jsx(yr,{children:s.jsx(xr,{children:g?"Modifier le produit":"Nouveau produit"})}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"col-span-2",children:[s.jsx(Ne,{children:"Nom *"}),s.jsx(be,{value:v.name,onChange:C=>x({...v,name:C.target.value}),placeholder:"Nom du produit"})]}),s.jsxs("div",{children:[s.jsx(Ne,{children:"Catgorie"}),s.jsxs(st,{value:v.category_id||"none",onValueChange:C=>x({...v,category_id:C==="none"?null:C}),children:[s.jsx(at,{children:s.jsx(ot,{placeholder:"Aucune catgorie"})}),s.jsxs(it,{children:[s.jsx(Le,{value:"none",children:"Aucune"}),r.map(C=>s.jsx(Le,{value:C.id,children:s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"inline-block h-3 w-3 rounded-full",style:{backgroundColor:C.color}}),C.name]})},C.id))]})]})]}),s.jsxs("div",{children:[s.jsx(Ne,{children:"Fournisseur principal"}),s.jsx(be,{value:v.main_supplier,onChange:C=>x({...v,main_supplier:C.target.value})})]}),s.jsxs("div",{children:[s.jsx(Ne,{children:"Coefficient (MO + assemblage)"}),s.jsx(be,{type:"number",step:"0.01",className:"font-mono-numbers",value:v.coefficient,onChange:C=>x({...v,coefficient:parseFloat(C.target.value)||1})})]}),s.jsxs("div",{children:[s.jsx(Ne,{children:"Volume d'achat par dfaut"}),s.jsx(be,{type:"number",className:"font-mono-numbers",value:v.default_volume,onChange:C=>x({...v,default_volume:parseInt(C.target.value)||500})})]}),s.jsxs("div",{children:[s.jsx(Ne,{children:"Prix TTC public ()"}),s.jsx(be,{type:"number",step:"0.01",className:"font-mono-numbers bg-muted",value:v.price_ttc,readOnly:!0,disabled:!0,title:"Gr depuis l'onglet Pricing"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Gr depuis l'onglet Pricing"})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx(Ne,{children:"Commentaires"}),s.jsx(vi,{value:v.comments,onChange:C=>x({...v,comments:C.target.value}),rows:2})]})]}),s.jsx("div",{className:"flex justify-end mt-4",children:s.jsx(ae,{onClick:S,children:g?"Mettre  jour":"Crer"})})]})]})]})]}),s.jsx("div",{className:"border rounded overflow-auto",children:s.jsxs(Ht,{children:[s.jsx(qt,{children:s.jsxs(_e,{children:[s.jsx(ie,{children:"Produit"}),s.jsx(ie,{children:"Catgorie"}),s.jsx(ie,{children:"Fournisseur"}),s.jsx(ie,{className:"text-right",children:"Coef."}),s.jsx(ie,{className:"text-right",children:"Cot @500"}),s.jsx(ie,{className:"text-right",children:"Prix TTC"}),s.jsx(ie,{className:"text-right",children:"Marge"}),s.jsx(ie,{})]})}),s.jsxs(Kt,{children:[b.length===0&&s.jsx(_e,{children:s.jsx(W,{colSpan:8,className:"text-center text-muted-foreground py-8",children:'Aucun produit. Cliquez sur "Nouveau produit" pour commencer.'})}),b.map(C=>{const N=c(C.id)[500]||0,E=C.price_ttc>0?(C.price_ttc/1.2-N)/(C.price_ttc/1.2)*100:0;return s.jsxs(_e,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>o(C),children:[s.jsx(W,{className:"font-medium",children:C.name}),s.jsx(W,{children:(()=>{const A=r.find(T=>T.id===C.category_id);return A?s.jsxs(Oe,{variant:"outline",className:"gap-1",children:[s.jsx("span",{className:"inline-block h-2 w-2 rounded-full",style:{backgroundColor:A.color}}),A.name]}):s.jsx("span",{className:"text-muted-foreground text-xs",children:""})})()}),s.jsx(W,{children:C.main_supplier||"-"}),s.jsx(W,{className:"text-right font-mono-numbers",children:C.coefficient.toFixed(2)}),s.jsx(W,{className:"text-right font-mono-numbers",children:N>0?`${N.toFixed(2)} `:"-"}),s.jsx(W,{className:"text-right font-mono-numbers",children:C.price_ttc>0?`${C.price_ttc.toFixed(2)} `:"-"}),s.jsx(W,{className:`text-right font-mono-numbers font-medium ${E>0?"positive-value":"negative-value"}`,children:C.price_ttc>0?`${E.toFixed(1)}%`:"-"}),s.jsx(W,{children:s.jsxs("div",{className:"flex gap-1",children:[s.jsx(ae,{variant:"ghost",size:"icon",onClick:A=>{A.stopPropagation(),j(C)},children:s.jsx(Ed,{className:"h-3 w-3"})}),s.jsx(ae,{variant:"ghost",size:"icon",onClick:A=>{A.stopPropagation(),i(C.id)},children:s.jsx(hr,{className:"h-3 w-3 text-destructive"})})]})})]},C.id)})]})]})}),s.jsx(oEe,{open:f,onOpenChange:h,existingReferences:t,existingSuppliers:[...new Set(t.map(C=>C.supplier).filter(Boolean))],onImportProduct:l})]})}const Tf=[50,100,200,500,1e3,2e3,5e3,1e4];function cEe({product:e,references:t,bom:r,onAddBomEntry:n,onUpdateBomEntry:a,onRemoveBomEntry:i,calculateProductCosts:o,onBack:l}){const[c,u]=w.useState(""),[d,f]=w.useState(1),h=r.filter(b=>b.product_id===e.id),m=o(e.id),y=e.price_ttc/1.2,g=Tf.map(b=>({volume:`${b}`,cost:m[b]||0,margin:y>0?Math.max(0,y-(m[b]||0)):0})),p=async()=>{c&&(await n(e.id,c,d),u(""),f(1))},v=new Set(h.map(b=>b.reference_id)),x=t.filter(b=>!v.has(b.id));return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(ae,{variant:"ghost",size:"icon",onClick:l,children:s.jsx(kI,{className:"h-4 w-4"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold",children:e.name}),s.jsxs("div",{className:"flex gap-2 mt-1",children:[s.jsxs(Oe,{variant:"outline",children:["Coef. ",e.coefficient]}),s.jsxs(Oe,{variant:"outline",children:["Prix TTC ",e.price_ttc.toFixed(2)," "]})]})]})]}),s.jsxs("div",{className:"financial-card p-4",children:[s.jsx("h4",{className:"section-title",children:"Nomenclature (BOM)"}),s.jsxs(Ht,{children:[s.jsx(qt,{children:s.jsxs(_e,{children:[s.jsx(ie,{children:"Code"}),s.jsx(ie,{children:"Rfrence"}),s.jsx(ie,{className:"text-right",children:"Qt"}),Tf.map(b=>s.jsxs(ie,{className:"text-right text-xs",children:["@",b]},b)),s.jsx(ie,{})]})}),s.jsxs(Kt,{children:[h.map(b=>{const _=t.find(j=>j.id===b.reference_id);return _?s.jsxs(_e,{children:[s.jsx(W,{className:"font-mono-numbers",children:_.code}),s.jsx(W,{children:_.name}),s.jsx(W,{className:"text-right",children:s.jsx(be,{type:"number",min:1,className:"w-16 text-right font-mono-numbers inline-block",value:b.quantity,onChange:j=>a(b.id,parseFloat(j.target.value)||1)})}),Tf.map(j=>s.jsx(W,{className:"text-right font-mono-numbers text-xs",children:((_.prices[j]||0)*b.quantity).toFixed(2)},j)),s.jsx(W,{children:s.jsx(ae,{variant:"ghost",size:"icon",onClick:()=>i(b.id),children:s.jsx(hr,{className:"h-3 w-3 text-destructive"})})})]},b.id):null}),s.jsxs(_e,{className:"font-semibold bg-muted/30",children:[s.jsxs(W,{colSpan:3,className:"text-right",children:["Cot total ( coef. ",e.coefficient,")"]}),Tf.map(b=>s.jsx(W,{className:"text-right font-mono-numbers text-xs",children:(m[b]||0).toFixed(2)},b)),s.jsx(W,{})]}),y>0&&s.jsxs(_e,{className:"font-semibold",children:[s.jsx(W,{colSpan:3,className:"text-right",children:"Marge ()"}),Tf.map(b=>{const _=y-(m[b]||0);return s.jsx(W,{className:`text-right font-mono-numbers text-xs ${_>=0?"positive-value":"negative-value"}`,children:_.toFixed(2)},b)}),s.jsx(W,{})]})]})]}),s.jsxs("div",{className:"flex items-end gap-2 mt-4 pt-4 border-t",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx(Ne,{className:"text-xs",children:"Rfrence"}),s.jsxs(st,{value:c,onValueChange:u,children:[s.jsx(at,{children:s.jsx(ot,{placeholder:"Choisir une rfrence..."})}),s.jsx(it,{children:x.map(b=>s.jsxs(Le,{value:b.id,children:[b.code,"  ",b.name]},b.id))})]})]}),s.jsxs("div",{className:"w-20",children:[s.jsx(Ne,{className:"text-xs",children:"Qt"}),s.jsx(be,{type:"number",min:1,className:"font-mono-numbers",value:d,onChange:b=>f(parseInt(b.target.value)||1)})]}),s.jsxs(ae,{size:"sm",onClick:p,disabled:!c,children:[s.jsx(ar,{className:"h-3 w-3 mr-1"})," Ajouter"]})]})]}),h.length>0&&s.jsxs("div",{className:"financial-card p-4",children:[s.jsx("h4",{className:"section-title",children:"Cot vs Marge par volume"}),s.jsx(Wr,{width:"100%",height:300,children:s.jsxs(Ps,{data:g,children:[s.jsx(qr,{strokeDasharray:"3 3",stroke:"hsl(var(--border))"}),s.jsx(mr,{dataKey:"volume",tick:{fontSize:12}}),s.jsx(nr,{tick:{fontSize:12}}),s.jsx($t,{formatter:b=>`${b.toFixed(2)} `}),s.jsx(rr,{dataKey:"cost",name:"Cot",fill:"hsl(var(--accent))",stackId:"a"}),y>0&&s.jsx(rr,{dataKey:"margin",name:"Marge",fill:"hsl(var(--positive))",stackId:"a"})]})})]})]})}function uEe({categories:e,onCreateCategory:t,onUpdateCategory:r,onDeleteCategory:n}){const[a,i]=w.useState(!1),[o,l]=w.useState(null),[c,u]=w.useState({name:"",description:"",color:"#6366f1"}),d=()=>{l(null),u({name:"",description:"",color:"#6366f1"}),i(!0)},f=m=>{l(m),u({name:m.name,description:m.description,color:m.color}),i(!0)},h=async()=>{c.name.trim()&&(o?await r(o.id,c):await t(c),i(!1))};return s.jsxs("div",{className:"financial-card p-4 space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h4",{className:"section-title flex items-center gap-2",children:[s.jsx(zS,{className:"h-4 w-4"})," Catgories de produits"]}),s.jsxs(Cr,{open:a,onOpenChange:i,children:[s.jsx(pd,{asChild:!0,children:s.jsxs(ae,{size:"sm",onClick:d,children:[s.jsx(ar,{className:"h-4 w-4 mr-1"})," Nouvelle catgorie"]})}),s.jsxs(vr,{className:"max-w-md",children:[s.jsx(yr,{children:s.jsx(xr,{children:o?"Modifier la catgorie":"Nouvelle catgorie"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Ne,{children:"Nom *"}),s.jsx(be,{value:c.name,onChange:m=>u({...c,name:m.target.value}),placeholder:"Ex: lectronique, Mcanique..."})]}),s.jsxs("div",{children:[s.jsx(Ne,{children:"Description"}),s.jsx(vi,{value:c.description,onChange:m=>u({...c,description:m.target.value}),rows:2,placeholder:"Description optionnelle"})]}),s.jsxs("div",{children:[s.jsx(Ne,{children:"Couleur"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"color",value:c.color,onChange:m=>u({...c,color:m.target.value}),className:"h-9 w-12 rounded border cursor-pointer"}),s.jsx(be,{value:c.color,onChange:m=>u({...c,color:m.target.value}),className:"font-mono-numbers flex-1"})]})]})]}),s.jsx("div",{className:"flex justify-end mt-4",children:s.jsx(ae,{onClick:h,children:o?"Mettre  jour":"Crer"})})]})]})]}),e.length===0?s.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Aucune catgorie. Crez-en pour organiser vos produits."}):s.jsxs(Ht,{children:[s.jsx(qt,{children:s.jsxs(_e,{children:[s.jsx(ie,{children:"Couleur"}),s.jsx(ie,{children:"Nom"}),s.jsx(ie,{children:"Description"}),s.jsx(ie,{})]})}),s.jsx(Kt,{children:e.map(m=>s.jsxs(_e,{children:[s.jsx(W,{children:s.jsx("div",{className:"h-5 w-5 rounded-full border",style:{backgroundColor:m.color}})}),s.jsx(W,{className:"font-medium",children:m.name}),s.jsx(W,{className:"text-muted-foreground text-sm",children:m.description||"-"}),s.jsx(W,{children:s.jsxs("div",{className:"flex gap-1",children:[s.jsx(ae,{variant:"ghost",size:"icon",onClick:()=>f(m),children:s.jsx(Ed,{className:"h-3 w-3"})}),s.jsx(ae,{variant:"ghost",size:"icon",onClick:()=>n(m.id),children:s.jsx(hr,{className:"h-3 w-3 text-destructive"})})]})})]},m.id))})]})]})}const _i=[50,100,200,500,1e3,2e3,5e3,1e4];function dEe({products:e,references:t,bom:r,calculateProductCosts:n}){const[a,i]=w.useState(!1),[o,l]=w.useState(!1),[c,u]=w.useState(new Set),[d,f]=w.useState(new Set),h=p=>{const v=new Set(c);v.has(p)?v.delete(p):v.add(p),u(v)},m=p=>{const v=new Set(d);v.has(p)?v.delete(p):v.add(p),f(v)},y=()=>{const p=e.filter(b=>c.size===0||c.has(b.id)),v=["Produit","Famille","Coef.",..._i.map(b=>`Cot @${b}`),"Prix TTC","Marge @500"].join("	"),x=p.map(b=>{const _=n(b.id),j=b.price_ttc/1.2,S=j>0?((j-(_[500]||0))/j*100).toFixed(1)+"%":"-";return[b.name,b.family,b.coefficient.toFixed(2),..._i.map(C=>(_[C]||0).toFixed(2)),b.price_ttc.toFixed(2),S].join("	")});navigator.clipboard.writeText([v,...x].join(`
`)),i(!0),setTimeout(()=>i(!1),2e3),Ee.success("Donnes produits copies")},g=()=>{const p=t.filter(b=>d.size===0||d.has(b.id)),v=["Code","Nom","Catgorie","Fournisseur",..._i.map(b=>`Prix @${b}`),"Devise","Commentaires"].join("	"),x=p.map(b=>[b.code,b.name,b.category,b.supplier,..._i.map(_=>(b.prices[_]||0).toFixed(2)),b.currency,b.comments].join("	"));navigator.clipboard.writeText([v,...x].join(`
`)),l(!0),setTimeout(()=>l(!1),2e3),Ee.success("Donnes rfrences copies")};return s.jsxs(xi,{defaultValue:"products",className:"space-y-4",children:[s.jsxs(Fa,{children:[s.jsx(At,{value:"products",children:"Export Produits"}),s.jsx(At,{value:"references",children:"Export Rfrences"}),s.jsx(At,{value:"margins",children:"Analyse Marges"})]}),s.jsxs(Ft,{value:"products",className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:c.size>0?`${c.size} produit(s) slectionn(s)`:"Tous les produits seront exports"}),s.jsxs(ae,{variant:"outline",onClick:y,children:[a?s.jsx(So,{className:"h-4 w-4 mr-1"}):s.jsx(wj,{className:"h-4 w-4 mr-1"}),"Copier vers Excel"]})]}),s.jsx("div",{className:"border rounded overflow-auto",children:s.jsxs(Ht,{children:[s.jsx(qt,{children:s.jsxs(_e,{children:[s.jsx(ie,{className:"w-8"}),s.jsx(ie,{children:"Produit"}),s.jsx(ie,{children:"Famille"}),_i.map(p=>s.jsxs(ie,{className:"text-right text-xs",children:["@",p]},p)),s.jsx(ie,{className:"text-right",children:"Prix TTC"})]})}),s.jsx(Kt,{children:e.map(p=>{const v=n(p.id);return s.jsxs(_e,{className:"cursor-pointer",onClick:()=>h(p.id),children:[s.jsx(W,{children:s.jsx("input",{type:"checkbox",checked:c.has(p.id),readOnly:!0})}),s.jsx(W,{className:"font-medium",children:p.name}),s.jsx(W,{children:s.jsx(Oe,{variant:"secondary",children:p.family})}),_i.map(x=>s.jsx(W,{className:"text-right font-mono-numbers text-xs",children:(v[x]||0).toFixed(2)},x)),s.jsx(W,{className:"text-right font-mono-numbers",children:p.price_ttc.toFixed(2)})]},p.id)})})]})})]}),s.jsxs(Ft,{value:"references",className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:d.size>0?`${d.size} rfrence(s) slectionne(s)`:"Toutes les rfrences seront exportes"}),s.jsxs(ae,{variant:"outline",onClick:g,children:[o?s.jsx(So,{className:"h-4 w-4 mr-1"}):s.jsx(wj,{className:"h-4 w-4 mr-1"}),"Copier vers Excel"]})]}),s.jsx("div",{className:"border rounded overflow-auto",children:s.jsxs(Ht,{children:[s.jsx(qt,{children:s.jsxs(_e,{children:[s.jsx(ie,{className:"w-8"}),s.jsx(ie,{children:"Code"}),s.jsx(ie,{children:"Nom"}),s.jsx(ie,{children:"Fournisseur"}),_i.map(p=>s.jsxs(ie,{className:"text-right text-xs",children:["@",p]},p)),s.jsx(ie,{children:"Devise"})]})}),s.jsx(Kt,{children:t.map(p=>s.jsxs(_e,{className:"cursor-pointer",onClick:()=>m(p.id),children:[s.jsx(W,{children:s.jsx("input",{type:"checkbox",checked:d.has(p.id),readOnly:!0})}),s.jsx(W,{className:"font-mono-numbers",children:p.code}),s.jsx(W,{children:p.name}),s.jsx(W,{children:p.supplier||"-"}),_i.map(v=>s.jsx(W,{className:"text-right font-mono-numbers text-xs",children:(p.prices[v]||0).toFixed(2)},v)),s.jsx(W,{children:p.currency})]},p.id))})]})})]}),s.jsx(Ft,{value:"margins",className:"space-y-4",children:s.jsx("div",{className:"border rounded overflow-auto",children:s.jsxs(Ht,{children:[s.jsx(qt,{children:s.jsxs(_e,{children:[s.jsx(ie,{children:"Produit"}),s.jsx(ie,{className:"text-right",children:"Prix HT"}),_i.map(p=>s.jsxs(ie,{className:"text-right text-xs",children:["Marge @",p]},p))]})}),s.jsx(Kt,{children:e.map(p=>{const v=n(p.id),x=p.price_ttc/1.2;return s.jsxs(_e,{children:[s.jsx(W,{className:"font-medium",children:p.name}),s.jsx(W,{className:"text-right font-mono-numbers",children:x>0?x.toFixed(2):"-"}),_i.map(b=>{const _=x>0?(x-(v[b]||0))/x*100:0;return s.jsx(W,{className:`text-right font-mono-numbers text-xs font-medium ${_>=30?"positive-value":_>=0?"text-warning":"negative-value"}`,children:x>0?`${_.toFixed(1)}%`:"-"},b)})]},p.id)})})]})})})]})}const bR={name:"",contact_name:"",email:"",phone:"",country:"France",comments:""};function fEe({suppliers:e,onCreateSupplier:t,onUpdateSupplier:r,onDeleteSupplier:n}){const[a,i]=w.useState(""),[o,l]=w.useState(!1),[c,u]=w.useState(null),[d,f]=w.useState(bR),h=e.filter(p=>p.name.toLowerCase().includes(a.toLowerCase())||p.contact_name.toLowerCase().includes(a.toLowerCase())||p.email.toLowerCase().includes(a.toLowerCase())),m=()=>{u(null),f(bR),l(!0)},y=p=>{u(p.id),f({name:p.name,contact_name:p.contact_name,email:p.email,phone:p.phone,country:p.country,comments:p.comments}),l(!0)},g=async()=>{d.name.trim()&&(c?await r(c,d):await t(d),l(!1))};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between gap-4",children:[s.jsxs("div",{className:"relative flex-1 max-w-sm",children:[s.jsx(FS,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(be,{placeholder:"Rechercher un fournisseur...",value:a,onChange:p=>i(p.target.value),className:"pl-9"})]}),s.jsxs(ae,{onClick:m,children:[s.jsx(ar,{className:"h-4 w-4 mr-1"})," Nouveau fournisseur"]})]}),s.jsx("div",{className:"border rounded overflow-auto",children:s.jsxs(Ht,{children:[s.jsx(qt,{children:s.jsxs(_e,{children:[s.jsx(ie,{children:"Nom"}),s.jsx(ie,{children:"Contact"}),s.jsx(ie,{children:"Email"}),s.jsx(ie,{children:"Tlphone"}),s.jsx(ie,{children:"Pays"}),s.jsx(ie,{})]})}),s.jsxs(Kt,{children:[h.length===0&&s.jsx(_e,{children:s.jsx(W,{colSpan:6,className:"text-center text-muted-foreground py-8",children:'Aucun fournisseur. Cliquez sur "Nouveau fournisseur" pour commencer.'})}),h.map(p=>s.jsxs(_e,{children:[s.jsx(W,{className:"font-medium",children:p.name}),s.jsx(W,{children:p.contact_name||"-"}),s.jsx(W,{children:p.email||"-"}),s.jsx(W,{children:p.phone||"-"}),s.jsx(W,{children:p.country}),s.jsx(W,{children:s.jsxs("div",{className:"flex gap-1",children:[s.jsx(ae,{variant:"ghost",size:"icon",onClick:()=>y(p),children:s.jsx(Ed,{className:"h-3 w-3"})}),s.jsx(ae,{variant:"ghost",size:"icon",onClick:()=>n(p.id),children:s.jsx(hr,{className:"h-3 w-3 text-destructive"})})]})})]},p.id))]})]})}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[h.length," fournisseur(s)"]}),s.jsx(Cr,{open:o,onOpenChange:l,children:s.jsxs(vr,{className:"max-w-lg",children:[s.jsx(yr,{children:s.jsx(xr,{children:c?"Modifier le fournisseur":"Nouveau fournisseur"})}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"col-span-2",children:[s.jsx(Ne,{children:"Nom *"}),s.jsx(be,{value:d.name,onChange:p=>f({...d,name:p.target.value}),placeholder:"Nom du fournisseur"})]}),s.jsxs("div",{children:[s.jsx(Ne,{children:"Contact"}),s.jsx(be,{value:d.contact_name,onChange:p=>f({...d,contact_name:p.target.value}),placeholder:"Nom du contact"})]}),s.jsxs("div",{children:[s.jsx(Ne,{children:"Email"}),s.jsx(be,{type:"email",value:d.email,onChange:p=>f({...d,email:p.target.value}),placeholder:"email@example.com"})]}),s.jsxs("div",{children:[s.jsx(Ne,{children:"Tlphone"}),s.jsx(be,{value:d.phone,onChange:p=>f({...d,phone:p.target.value}),placeholder:"+33 ..."})]}),s.jsxs("div",{children:[s.jsx(Ne,{children:"Pays"}),s.jsx(be,{value:d.country,onChange:p=>f({...d,country:p.target.value}),placeholder:"France"})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx(Ne,{children:"Commentaires"}),s.jsx(vi,{value:d.comments,onChange:p=>f({...d,comments:p.target.value}),rows:2})]})]}),s.jsx("div",{className:"flex justify-end mt-4",children:s.jsx(ae,{onClick:g,disabled:!d.name.trim(),children:c?"Mettre  jour":"Crer"})})]})})]})}function hEe(){const{user:e}=xa(),[t,r]=w.useState([]),[n,a]=w.useState([]),[i,o]=w.useState(!0),l=w.useCallback(async()=>{if(e)try{const[g,p]=await Promise.all([xe.from("costflow_meetings").select("*").order("meeting_date",{ascending:!1}),xe.from("costflow_meeting_tasks").select("*").order("sort_order")]);g.data&&r(g.data.map(v=>({id:v.id,meeting_date:v.meeting_date,title:v.title||"",content:v.content||"",created_at:v.created_at,updated_at:v.updated_at}))),p.data&&a(p.data.map(v=>({id:v.id,meeting_id:v.meeting_id,description:v.description,is_completed:v.is_completed||!1,sort_order:v.sort_order||0,created_at:v.created_at})))}catch(g){console.error("Meetings fetch error:",g)}finally{o(!1)}},[e]);return w.useEffect(()=>{l()},[l]),{meetings:t,tasks:n,loading:i,createMeeting:async g=>{if(!e)return;const{error:p}=await xe.from("costflow_meetings").insert({user_id:e.id,meeting_date:g.meeting_date||new Date().toISOString().split("T")[0],title:g.title||"",content:g.content||""});p?(Ee.error("Erreur cration runion"),console.error(p)):(Ee.success("Runion cre"),l())},updateMeeting:async(g,p)=>{if(!e)return;const{error:v}=await xe.from("costflow_meetings").update(p).eq("id",g);v?(Ee.error("Erreur mise  jour runion"),console.error(v)):l()},deleteMeeting:async g=>{const{error:p}=await xe.from("costflow_meetings").delete().eq("id",g);p?(Ee.error("Erreur suppression runion"),console.error(p)):(Ee.success("Runion supprime"),l())},createTask:async(g,p)=>{if(!e)return;const v=n.filter(_=>_.meeting_id===g),x=v.length>0?Math.max(...v.map(_=>_.sort_order)):-1,{error:b}=await xe.from("costflow_meeting_tasks").insert({user_id:e.id,meeting_id:g,description:p,sort_order:x+1});b?(Ee.error("Erreur ajout tche"),console.error(b)):l()},updateTask:async(g,p)=>{if(!e)return;const{error:v}=await xe.from("costflow_meeting_tasks").update(p).eq("id",g);v?(Ee.error("Erreur mise  jour tche"),console.error(v)):l()},deleteTask:async g=>{const{error:p}=await xe.from("costflow_meeting_tasks").delete().eq("id",g);p?(Ee.error("Erreur suppression tche"),console.error(p)):l()},getTasksForMeeting:g=>n.filter(p=>p.meeting_id===g),refresh:l}}function kn(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function Es(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function mEe(e,t){const r=kn(e);return isNaN(t)?Es(e,NaN):(t&&r.setDate(r.getDate()+t),r)}const TU=6048e5,pEe=864e5,RU=6e4,MU=36e5;let gEe={};function I0(){return gEe}function jd(e,t){var l,c,u,d;const r=I0(),n=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,a=kn(e),i=a.getDay(),o=(i<n?7:0)+i-n;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function $y(e){return jd(e,{weekStartsOn:1})}function $U(e){const t=kn(e),r=t.getFullYear(),n=Es(e,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const a=$y(n),i=Es(e,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const o=$y(i);return t.getTime()>=a.getTime()?r+1:t.getTime()>=o.getTime()?r:r-1}function Iy(e){const t=kn(e);return t.setHours(0,0,0,0),t}function wR(e){const t=kn(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function vEe(e,t){const r=Iy(e),n=Iy(t),a=+r-wR(r),i=+n-wR(n);return Math.round((a-i)/pEe)}function yEe(e){const t=$U(e),r=Es(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),$y(r)}function IU(e,t){const r=t*7;return mEe(e,r)}function xEe(e){return Es(e,Date.now())}function B_(e,t){const r=Iy(e),n=Iy(t);return+r==+n}function bEe(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function wEe(e){if(!bEe(e)&&typeof e!="number")return!1;const t=kn(e);return!isNaN(Number(t))}function jEe(e,t){const r=kn(e.start),n=kn(e.end);let a=+r>+n;const i=a?+r:+n,o=a?n:r;o.setHours(0,0,0,0);let l=1;const c=[];for(;+o<=i;)c.push(kn(o)),o.setDate(o.getDate()+l),o.setHours(0,0,0,0);return a?c.reverse():c}function _Ee(e){const t=kn(e),r=Es(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}function SEe(e,t){const r=t==null?void 0:t.weekStartsOn,n=kn(e),a=n.getDay(),i=(a<r?-7:0)+6-(a-r);return n.setDate(n.getDate()+i),n.setHours(23,59,59,999),n}const CEe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},NEe=(e,t,r)=>{let n;const a=CEe[e];return typeof a=="string"?n=a:t===1?n=a.one:n=a.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function vu(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const PEe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},kEe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},EEe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},AEe={date:vu({formats:PEe,defaultWidth:"full"}),time:vu({formats:kEe,defaultWidth:"full"}),dateTime:vu({formats:EEe,defaultWidth:"full"})},OEe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},TEe=(e,t,r,n)=>OEe[e];function Ai(e){return(t,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let a;if(n==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=r!=null&&r.width?String(r.width):o;a=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=r!=null&&r.width?String(r.width):e.defaultWidth;a=e.values[l]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return a[i]}}const REe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},MEe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},$Ee={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},IEe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},DEe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},LEe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},BEe=(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},FEe={ordinalNumber:BEe,era:Ai({values:REe,defaultWidth:"wide"}),quarter:Ai({values:MEe,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Ai({values:$Ee,defaultWidth:"wide"}),day:Ai({values:IEe,defaultWidth:"wide"}),dayPeriod:Ai({values:DEe,defaultWidth:"wide",formattingValues:LEe,defaultFormattingWidth:"wide"})};function Oi(e){return(t,r={})=>{const n=r.width,a=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const o=i[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?UEe(l,f=>f.test(o)):zEe(l,f=>f.test(o));let u;u=e.valueCallback?e.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;const d=t.slice(o.length);return{value:u,rest:d}}}function zEe(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function UEe(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function DU(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const a=n[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=r.valueCallback?r.valueCallback(o):o;const l=t.slice(a.length);return{value:o,rest:l}}}const VEe=/^(\d+)(th|st|nd|rd)?/i,WEe=/\d+/i,HEe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},qEe={any:[/^b/i,/^(a|c)/i]},KEe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},YEe={any:[/1/i,/2/i,/3/i,/4/i]},GEe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},XEe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},QEe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},JEe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},ZEe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},eAe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},tAe={ordinalNumber:DU({matchPattern:VEe,parsePattern:WEe,valueCallback:e=>parseInt(e,10)}),era:Oi({matchPatterns:HEe,defaultMatchWidth:"wide",parsePatterns:qEe,defaultParseWidth:"any"}),quarter:Oi({matchPatterns:KEe,defaultMatchWidth:"wide",parsePatterns:YEe,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Oi({matchPatterns:GEe,defaultMatchWidth:"wide",parsePatterns:XEe,defaultParseWidth:"any"}),day:Oi({matchPatterns:QEe,defaultMatchWidth:"wide",parsePatterns:JEe,defaultParseWidth:"any"}),dayPeriod:Oi({matchPatterns:ZEe,defaultMatchWidth:"any",parsePatterns:eAe,defaultParseWidth:"any"})},rAe={code:"en-US",formatDistance:NEe,formatLong:AEe,formatRelative:TEe,localize:FEe,match:tAe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function nAe(e){const t=kn(e);return vEe(t,_Ee(t))+1}function aAe(e){const t=kn(e),r=+$y(t)-+yEe(t);return Math.round(r/TU)+1}function LU(e,t){var d,f,h,m;const r=kn(e),n=r.getFullYear(),a=I0(),i=(t==null?void 0:t.firstWeekContainsDate)??((f=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??a.firstWeekContainsDate??((m=(h=a.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??1,o=Es(e,0);o.setFullYear(n+1,0,i),o.setHours(0,0,0,0);const l=jd(o,t),c=Es(e,0);c.setFullYear(n,0,i),c.setHours(0,0,0,0);const u=jd(c,t);return r.getTime()>=l.getTime()?n+1:r.getTime()>=u.getTime()?n:n-1}function iAe(e,t){var l,c,u,d;const r=I0(),n=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,a=LU(e,t),i=Es(e,0);return i.setFullYear(a,0,n),i.setHours(0,0,0,0),jd(i,t)}function sAe(e,t){const r=kn(e),n=+jd(r,t)-+iAe(r,t);return Math.round(n/TU)+1}function Lt(e,t){const r=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return r+n}const Us={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return Lt(t==="yy"?n%100:n,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):Lt(r+1,2)},d(e,t){return Lt(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return Lt(e.getHours()%12||12,t.length)},H(e,t){return Lt(e.getHours(),t.length)},m(e,t){return Lt(e.getMinutes(),t.length)},s(e,t){return Lt(e.getSeconds(),t.length)},S(e,t){const r=t.length,n=e.getMilliseconds(),a=Math.trunc(n*Math.pow(10,r-3));return Lt(a,t.length)}},kc={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},jR={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const n=e.getFullYear(),a=n>0?n:1-n;return r.ordinalNumber(a,{unit:"year"})}return Us.y(e,t)},Y:function(e,t,r,n){const a=LU(e,n),i=a>0?a:1-a;if(t==="YY"){const o=i%100;return Lt(o,2)}return t==="Yo"?r.ordinalNumber(i,{unit:"year"}):Lt(i,t.length)},R:function(e,t){const r=$U(e);return Lt(r,t.length)},u:function(e,t){const r=e.getFullYear();return Lt(r,t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return Lt(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return Lt(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return Us.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return Lt(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const a=sAe(e,n);return t==="wo"?r.ordinalNumber(a,{unit:"week"}):Lt(a,t.length)},I:function(e,t,r){const n=aAe(e);return t==="Io"?r.ordinalNumber(n,{unit:"week"}):Lt(n,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):Us.d(e,t)},D:function(e,t,r){const n=nAe(e);return t==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):Lt(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const a=e.getDay(),i=(a-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return Lt(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const a=e.getDay(),i=(a-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return Lt(i,t.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),a=n===0?7:n;switch(t){case"i":return String(a);case"ii":return Lt(a,t.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let a;switch(n===12?a=kc.noon:n===0?a=kc.midnight:a=n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let a;switch(n>=17?a=kc.evening:n>=12?a=kc.afternoon:n>=4?a=kc.morning:a=kc.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return Us.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):Us.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return t==="Ko"?r.ordinalNumber(n,{unit:"hour"}):Lt(n,t.length)},k:function(e,t,r){let n=e.getHours();return n===0&&(n=24),t==="ko"?r.ordinalNumber(n,{unit:"hour"}):Lt(n,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):Us.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):Us.s(e,t)},S:function(e,t){return Us.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return SR(n);case"XXXX":case"XX":return cl(n);case"XXXXX":case"XXX":default:return cl(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return SR(n);case"xxxx":case"xx":return cl(n);case"xxxxx":case"xxx":default:return cl(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+_R(n,":");case"OOOO":default:return"GMT"+cl(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+_R(n,":");case"zzzz":default:return"GMT"+cl(n,":")}},t:function(e,t,r){const n=Math.trunc(e.getTime()/1e3);return Lt(n,t.length)},T:function(e,t,r){const n=e.getTime();return Lt(n,t.length)}};function _R(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),a=Math.trunc(n/60),i=n%60;return i===0?r+String(a):r+String(a)+t+Lt(i,2)}function SR(e,t){return e%60===0?(e>0?"-":"+")+Lt(Math.abs(e)/60,2):cl(e,t)}function cl(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),a=Lt(Math.trunc(n/60),2),i=Lt(n%60,2);return r+a+t+i}const CR=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},BU=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},oAe=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],a=r[2];if(!a)return CR(e,t);let i;switch(n){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",CR(n,t)).replace("{{time}}",BU(a,t))},lAe={p:BU,P:oAe},cAe=/^D+$/,uAe=/^Y+$/,dAe=["D","DD","YY","YYYY"];function fAe(e){return cAe.test(e)}function hAe(e){return uAe.test(e)}function mAe(e,t,r){const n=pAe(e,t,r);if(console.warn(n),dAe.includes(e))throw new RangeError(n)}function pAe(e,t,r){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const gAe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,vAe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,yAe=/^'([^]*?)'?$/,xAe=/''/g,bAe=/[a-zA-Z]/;function Qa(e,t,r){var d,f,h,m,y,g,p,v;const n=I0(),a=(r==null?void 0:r.locale)??n.locale??rAe,i=(r==null?void 0:r.firstWeekContainsDate)??((f=(d=r==null?void 0:r.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??n.firstWeekContainsDate??((m=(h=n.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??1,o=(r==null?void 0:r.weekStartsOn)??((g=(y=r==null?void 0:r.locale)==null?void 0:y.options)==null?void 0:g.weekStartsOn)??n.weekStartsOn??((v=(p=n.locale)==null?void 0:p.options)==null?void 0:v.weekStartsOn)??0,l=kn(e);if(!wEe(l))throw new RangeError("Invalid time value");let c=t.match(vAe).map(x=>{const b=x[0];if(b==="p"||b==="P"){const _=lAe[b];return _(x,a.formatLong)}return x}).join("").match(gAe).map(x=>{if(x==="''")return{isToken:!1,value:"'"};const b=x[0];if(b==="'")return{isToken:!1,value:wAe(x)};if(jR[b])return{isToken:!0,value:x};if(b.match(bAe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:x}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const u={firstWeekContainsDate:i,weekStartsOn:o,locale:a};return c.map(x=>{if(!x.isToken)return x.value;const b=x.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&hAe(b)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&fAe(b))&&mAe(b,t,String(e));const _=jR[b[0]];return _(l,b,a.localize,u)}).join("")}function wAe(e){const t=e.match(yAe);return t?t[1].replace(xAe,"'"):e}function jAe(e){return B_(e,xEe(e))}function _Ae(e,t){const n=PAe(e);let a;if(n.date){const c=kAe(n.date,2);a=EAe(c.restDateString,c.year)}if(!a||isNaN(a.getTime()))return new Date(NaN);const i=a.getTime();let o=0,l;if(n.time&&(o=AAe(n.time),isNaN(o)))return new Date(NaN);if(n.timezone){if(l=OAe(n.timezone),isNaN(l))return new Date(NaN)}else{const c=new Date(i+o),u=new Date(0);return u.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),u.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),u}return new Date(i+o+l)}const cg={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},SAe=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,CAe=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,NAe=/^([+-])(\d{2})(?::?(\d{2}))?$/;function PAe(e){const t={},r=e.split(cg.dateTimeDelimiter);let n;if(r.length>2)return t;if(/:/.test(r[0])?n=r[0]:(t.date=r[0],n=r[1],cg.timeZoneDelimiter.test(t.date)&&(t.date=e.split(cg.timeZoneDelimiter)[0],n=e.substr(t.date.length,e.length))),n){const a=cg.timezone.exec(n);a?(t.time=n.replace(a[1],""),t.timezone=a[1]):t.time=n}return t}function kAe(e,t){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=e.match(r);if(!n)return{year:NaN,restDateString:""};const a=n[1]?parseInt(n[1]):null,i=n[2]?parseInt(n[2]):null;return{year:i===null?a:i*100,restDateString:e.slice((n[1]||n[2]).length)}}function EAe(e,t){if(t===null)return new Date(NaN);const r=e.match(SAe);if(!r)return new Date(NaN);const n=!!r[4],a=Rf(r[1]),i=Rf(r[2])-1,o=Rf(r[3]),l=Rf(r[4]),c=Rf(r[5])-1;if(n)return IAe(t,l,c)?TAe(t,l,c):new Date(NaN);{const u=new Date(0);return!MAe(t,i,o)||!$Ae(t,a)?new Date(NaN):(u.setUTCFullYear(t,i,Math.max(a,o)),u)}}function Rf(e){return e?parseInt(e):1}function AAe(e){const t=e.match(CAe);if(!t)return NaN;const r=bw(t[1]),n=bw(t[2]),a=bw(t[3]);return DAe(r,n,a)?r*MU+n*RU+a*1e3:NaN}function bw(e){return e&&parseFloat(e.replace(",","."))||0}function OAe(e){if(e==="Z")return 0;const t=e.match(NAe);if(!t)return 0;const r=t[1]==="+"?-1:1,n=parseInt(t[2]),a=t[3]&&parseInt(t[3])||0;return LAe(n,a)?r*(n*MU+a*RU):NaN}function TAe(e,t,r){const n=new Date(0);n.setUTCFullYear(e,0,4);const a=n.getUTCDay()||7,i=(t-1)*7+r+1-a;return n.setUTCDate(n.getUTCDate()+i),n}const RAe=[31,null,31,30,31,30,31,31,30,31,30,31];function FU(e){return e%400===0||e%4===0&&e%100!==0}function MAe(e,t,r){return t>=0&&t<=11&&r>=1&&r<=(RAe[t]||(FU(e)?29:28))}function $Ae(e,t){return t>=1&&t<=(FU(e)?366:365)}function IAe(e,t,r){return t>=1&&t<=53&&r>=0&&r<=6}function DAe(e,t,r){return e===24?t===0&&r===0:r>=0&&r<60&&t>=0&&t<60&&e>=0&&e<25}function LAe(e,t){return t>=0&&t<=59}function BAe(e,t){return IU(e,-t)}const FAe={lessThanXSeconds:{one:"moins dune seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins dune minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus dun an",other:"plus de {{count}} ans"},almostXYears:{one:"presquun an",other:"presque {{count}} ans"}},zAe=(e,t,r)=>{let n;const a=FAe[e];return typeof a=="string"?n=a:t===1?n=a.one:n=a.other.replace("{{count}}",String(t)),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"dans "+n:"il y a "+n:n},UAe={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},VAe={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},WAe={full:"{{date}} '' {{time}}",long:"{{date}} '' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},HAe={date:vu({formats:UAe,defaultWidth:"full"}),time:vu({formats:VAe,defaultWidth:"full"}),dateTime:vu({formats:WAe,defaultWidth:"full"})},qAe={lastWeek:"eeee 'dernier ' p",yesterday:"'hier ' p",today:"'aujourdhui ' p",tomorrow:"'demain ' p'",nextWeek:"eeee 'prochain ' p",other:"P"},KAe=(e,t,r,n)=>qAe[e],YAe={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jsus-Christ","aprs Jsus-Christ"]},GAe={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2me trim.","3me trim.","4me trim."],wide:["1er trimestre","2me trimestre","3me trimestre","4me trimestre"]},XAe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","fvr.","mars","avr.","mai","juin","juil.","aot","sept.","oct.","nov.","dc."],wide:["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"]},QAe={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},JAe={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"aprs-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de laprs-midi",evening:"du soir",night:"du matin"}},ZAe=(e,t)=>{const r=Number(e),n=t==null?void 0:t.unit;if(r===0)return"0";const a=["year","week","hour","minute","second"];let i;return r===1?i=n&&a.includes(n)?"re":"er":i="me",r+i},eOe=["MMM","MMMM"],tOe={preprocessor:(e,t)=>e.getDate()===1||!t.some(n=>n.isToken&&eOe.includes(n.value))?t:t.map(n=>n.isToken&&n.value==="do"?{isToken:!0,value:"d"}:n),ordinalNumber:ZAe,era:Ai({values:YAe,defaultWidth:"wide"}),quarter:Ai({values:GAe,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Ai({values:XAe,defaultWidth:"wide"}),day:Ai({values:QAe,defaultWidth:"wide"}),dayPeriod:Ai({values:JAe,defaultWidth:"wide"})},rOe=/^(\d+)(ime|re|me|er|e)?/i,nOe=/\d+/i,aOe={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jsus-Christ|aprs Jsus-Christ)/i},iOe={any:[/^av/i,/^ap/i]},sOe={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|me|e)? trim\.?/i,wide:/^[1234](er|me|e)? trimestre/i},oOe={any:[/1/i,/2/i,/3/i,/4/i]},lOe={narrow:/^[jfmasond]/i,abbreviated:/^(janv|fvr|mars|avr|mai|juin|juill|juil|aot|sept|oct|nov|dc)\.?/i,wide:/^(janvier|fvrier|mars|avril|mai|juin|juillet|aot|septembre|octobre|novembre|dcembre)/i},cOe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},uOe={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},dOe={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},fOe={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'aprs[-\s]midi|du soir|de la nuit)/i},hOe={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},mOe={ordinalNumber:DU({matchPattern:rOe,parsePattern:nOe,valueCallback:e=>parseInt(e)}),era:Oi({matchPatterns:aOe,defaultMatchWidth:"wide",parsePatterns:iOe,defaultParseWidth:"any"}),quarter:Oi({matchPatterns:sOe,defaultMatchWidth:"wide",parsePatterns:oOe,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Oi({matchPatterns:lOe,defaultMatchWidth:"wide",parsePatterns:cOe,defaultParseWidth:"any"}),day:Oi({matchPatterns:uOe,defaultMatchWidth:"wide",parsePatterns:dOe,defaultParseWidth:"any"}),dayPeriod:Oi({matchPatterns:fOe,defaultMatchWidth:"any",parsePatterns:hOe,defaultParseWidth:"any"})},ru={code:"fr",formatDistance:zAe,formatLong:HAe,formatRelative:KAe,localize:tOe,match:mOe,options:{weekStartsOn:1,firstWeekContainsDate:4}};var pOe="Separator",NR="horizontal",gOe=["horizontal","vertical"],zU=w.forwardRef((e,t)=>{const{decorative:r,orientation:n=NR,...a}=e,i=vOe(n)?n:NR,l=r?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return s.jsx(We.div,{"data-orientation":i,...l,...a,ref:t})});zU.displayName=pOe;function vOe(e){return gOe.includes(e)}var UU=zU;const Dy=w.forwardRef(({className:e,orientation:t="horizontal",decorative:r=!0,...n},a)=>s.jsx(UU,{ref:a,decorative:r,orientation:t,className:ue("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...n}));Dy.displayName=UU.displayName;function yOe(){const{meetings:e,loading:t,createMeeting:r,updateMeeting:n,deleteMeeting:a,createTask:i,updateTask:o,deleteTask:l,getTasksForMeeting:c}=hEe(),[u,d]=w.useState(null),[f,h]=w.useState(!1),[m,y]=w.useState(!1),[g,p]=w.useState(new Date().toISOString().split("T")[0]),[v,x]=w.useState(""),[b,_]=w.useState(""),[j,S]=w.useState(!1),[C,P]=w.useState(""),[N,E]=w.useState(""),A=e.find(B=>B.id===u),T=u?c(u):[],R=async()=>{v.trim()&&(await r({meeting_date:g,title:v}),x(""),p(new Date().toISOString().split("T")[0]),h(!1))},k=async()=>{!u||!b.trim()||(await i(u,b.trim()),_(""))},O=async()=>{!u||!N.trim()||(await i(u,N.trim()),E(""))},M=()=>{A&&(P(A.content),S(!0))},D=async()=>{u&&(await n(u,{content:C}),S(!1))},L=({tasks:B,inFullscreen:z=!1})=>s.jsxs("div",{className:"space-y-1.5",children:[B.map(Z=>s.jsxs("div",{className:"flex items-start gap-2 group",children:[s.jsx(hi,{checked:Z.is_completed,onCheckedChange:ee=>o(Z.id,{is_completed:!!ee}),className:"mt-0.5"}),s.jsx("span",{className:`text-sm flex-1 ${Z.is_completed?"line-through text-muted-foreground":""}`,children:Z.description}),s.jsx(ae,{variant:"ghost",size:"icon",className:"h-6 w-6 opacity-0 group-hover:opacity-100 text-destructive",onClick:()=>l(Z.id),children:s.jsx($a,{className:"h-3 w-3"})})]},Z.id)),s.jsxs("div",{className:"flex gap-2 mt-2",children:[s.jsx(be,{placeholder:"Nouvelle tche",value:z?N:b,onChange:Z=>z?E(Z.target.value):_(Z.target.value),onKeyDown:Z=>Z.key==="Enter"&&(z?O():k()),className:"text-sm"}),s.jsx(ae,{size:"sm",onClick:z?O:k,disabled:!(z?N:b).trim(),children:s.jsx(ar,{className:"h-4 w-4"})})]})]});return t?s.jsx("div",{className:"text-muted-foreground text-center py-8",children:"Chargement"}):s.jsxs("div",{className:"flex gap-4 h-[calc(100vh-320px)] min-h-[500px]",children:[s.jsxs(Bt,{className:"w-64 shrink-0 flex flex-col",children:[s.jsx(cr,{className:"pb-2",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(ur,{className:"text-sm font-medium",children:"Runions"}),s.jsxs(Cr,{open:f,onOpenChange:h,children:[s.jsx(pd,{asChild:!0,children:s.jsxs(ae,{size:"sm",variant:"outline",className:"h-7 text-xs",children:[s.jsx(ar,{className:"h-3 w-3 mr-1"})," Nouveau"]})}),s.jsxs(vr,{children:[s.jsx(yr,{children:s.jsx(xr,{children:"Nouvelle runion BE"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Ne,{children:"Date"}),s.jsx(be,{type:"date",value:g,onChange:B=>p(B.target.value)})]}),s.jsxs("div",{children:[s.jsx(Ne,{children:"Titre / Objet"}),s.jsx(be,{placeholder:"Ex: Runion BE hebdomadaire",value:v,onChange:B=>x(B.target.value),onKeyDown:B=>B.key==="Enter"&&R()})]}),s.jsx(ae,{onClick:R,disabled:!v.trim(),className:"w-full",children:"Crer la runion"})]})]})]})]})}),s.jsxs(Wt,{className:"flex-1 overflow-auto p-2 space-y-1",children:[e.length===0&&s.jsx("p",{className:"text-xs text-muted-foreground text-center py-4",children:"Aucune runion"}),e.map(B=>{const z=B.id===u,Z=c(B.id).length,ee=c(B.id).filter(le=>le.is_completed).length;return s.jsxs("button",{onClick:()=>d(B.id),className:`w-full text-left rounded-md px-3 py-2 text-sm transition-colors ${z?"bg-primary text-primary-foreground":"hover:bg-muted"}`,children:[s.jsx("div",{className:"font-medium truncate",children:Qa(new Date(B.meeting_date),"dd/MM/yyyy")}),s.jsx("div",{className:`text-xs truncate ${z?"text-primary-foreground/70":"text-muted-foreground"}`,children:B.title||"Sans titre"}),Z>0&&s.jsxs("div",{className:`text-xs mt-0.5 ${z?"text-primary-foreground/60":"text-muted-foreground"}`,children:[" ",ee,"/",Z," tches"]})]},B.id)})]})]}),s.jsx(Bt,{className:"flex-1 flex flex-col overflow-hidden",children:A?s.jsxs(s.Fragment,{children:[s.jsx(cr,{className:"pb-2 shrink-0",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(ur,{className:"text-lg flex items-center gap-2",children:[s.jsx(Sg,{className:"h-5 w-5 text-primary"}),Qa(new Date(A.meeting_date),"EEEE d MMMM yyyy",{locale:ru})]}),s.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:A.title})]}),s.jsx(ae,{variant:"ghost",size:"icon",className:"text-destructive hover:text-destructive",onClick:async()=>{confirm("Supprimer cette runion et toutes ses tches ?")&&(await a(A.id),d(null))},children:s.jsx(hr,{className:"h-4 w-4"})})]})}),s.jsxs(Wt,{className:"flex-1 overflow-auto space-y-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("h3",{className:"text-sm font-semibold flex items-center gap-1.5",children:[s.jsx(Ru,{className:"h-4 w-4"})," Compte-rendu"]}),s.jsxs("div",{className:"flex gap-1",children:[!j&&s.jsx(ae,{size:"sm",variant:"ghost",className:"h-7 text-xs",onClick:M,children:"Modifier"}),s.jsx(ae,{size:"sm",variant:"ghost",className:"h-7 text-xs",onClick:()=>y(!0),children:s.jsx(KW,{className:"h-3.5 w-3.5"})})]})]}),j?s.jsxs("div",{className:"space-y-2",children:[s.jsx(vi,{value:C,onChange:B=>P(B.target.value),rows:10,placeholder:"Rdigez le compte-rendu de la runion",className:"text-sm"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ae,{size:"sm",onClick:D,children:"Enregistrer"}),s.jsx(ae,{size:"sm",variant:"ghost",onClick:()=>S(!1),children:"Annuler"})]})]}):s.jsx("div",{className:"bg-muted/50 rounded-md p-3 min-h-[60px] text-sm whitespace-pre-wrap",children:A.content||s.jsx("span",{className:"text-muted-foreground italic",children:"Aucun compte-rendu rdig"})})]}),s.jsx(Dy,{}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold mb-2",children:"Tches :"}),s.jsx(L,{tasks:T})]})]}),s.jsx(Cr,{open:m,onOpenChange:y,children:s.jsxs(vr,{className:"max-w-4xl h-[80vh] flex flex-col",children:[s.jsx(yr,{children:s.jsxs(xr,{className:"flex items-center gap-2",children:[s.jsx(Sg,{className:"h-5 w-5 text-primary"}),A&&Qa(new Date(A.meeting_date),"EEEE d MMMM yyyy",{locale:ru}),A&&s.jsxs("span",{className:"text-muted-foreground font-normal text-base ml-2",children:[" ",A.title]})]})}),s.jsxs("div",{className:"flex-1 overflow-auto space-y-6 pr-2",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("h3",{className:"font-semibold flex items-center gap-1.5",children:[s.jsx(Ru,{className:"h-4 w-4"})," Compte-rendu"]}),!j&&s.jsx(ae,{size:"sm",variant:"ghost",className:"h-7 text-xs",onClick:M,children:"Modifier"})]}),j?s.jsxs("div",{className:"space-y-2",children:[s.jsx(vi,{value:C,onChange:B=>P(B.target.value),rows:16,placeholder:"Rdigez le compte-rendu de la runion",className:"text-sm"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ae,{size:"sm",onClick:D,children:"Enregistrer"}),s.jsx(ae,{size:"sm",variant:"ghost",onClick:()=>S(!1),children:"Annuler"})]})]}):s.jsx("div",{className:"bg-muted/50 rounded-md p-4 min-h-[120px] text-sm whitespace-pre-wrap",children:(A==null?void 0:A.content)||s.jsx("span",{className:"text-muted-foreground italic",children:"Aucun compte-rendu rdig"})})]}),s.jsx(Dy,{}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-3",children:"Tches :"}),s.jsx(L,{tasks:T,inFullscreen:!0})]})]})]})})]}):s.jsx("div",{className:"flex-1 flex items-center justify-center text-muted-foreground",children:s.jsxs("div",{className:"text-center space-y-2",children:[s.jsx(Sg,{className:"h-12 w-12 mx-auto opacity-30"}),s.jsx("p",{children:"Slectionnez une runion ou crez-en une nouvelle"})]})})})]})}function VU(){const[e,t]=w.useState([]),[r,n]=w.useState([]),[a,i]=w.useState([]),[o,l]=w.useState(!0),c=w.useCallback(async()=>{try{const[b,_,j]=await Promise.all([xe.from("costflow_planning_colors").select("*").order("sort_order"),xe.from("costflow_planning_rows").select("*").order("sort_order"),xe.from("costflow_planning_blocks").select("*")]);if(b.error)throw b.error;if(_.error)throw _.error;if(j.error)throw j.error;t(b.data||[]),n(_.data||[]),i(j.data||[])}catch(b){Ee.error("Erreur chargement planning: "+b.message)}finally{l(!1)}},[]);w.useEffect(()=>{c()},[c]);const u=async()=>{var _;const{data:b}=await xe.auth.getUser();return(_=b.user)==null?void 0:_.id};return{colors:e,rows:r,blocks:a,loading:o,createColor:async(b,_)=>{const j=await u();if(!j)return;const{data:S,error:C}=await xe.from("costflow_planning_colors").insert({user_id:j,name:b,color:_,sort_order:e.length}).select().single();if(C){Ee.error(C.message);return}t(P=>[...P,S])},updateColor:async(b,_)=>{const{error:j}=await xe.from("costflow_planning_colors").update(_).eq("id",b);if(j){Ee.error(j.message);return}t(S=>S.map(C=>C.id===b?{...C,..._}:C))},deleteColor:async b=>{const{error:_}=await xe.from("costflow_planning_colors").delete().eq("id",b);if(_){Ee.error(_.message);return}t(j=>j.filter(S=>S.id!==b))},createRow:async b=>{const _=await u();if(!_)return;const{data:j,error:S}=await xe.from("costflow_planning_rows").insert({user_id:_,label:b,sort_order:r.length}).select().single();if(S){Ee.error(S.message);return}n(C=>[...C,j])},updateRow:async(b,_)=>{const{error:j}=await xe.from("costflow_planning_rows").update({label:_}).eq("id",b);if(j){Ee.error(j.message);return}n(S=>S.map(C=>C.id===b?{...C,label:_}:C))},deleteRow:async b=>{const{error:_}=await xe.from("costflow_planning_rows").delete().eq("id",b);if(_){Ee.error(_.message);return}n(j=>j.filter(S=>S.id!==b)),i(j=>j.filter(S=>S.row_id!==b))},createBlock:async(b,_,j,S,C)=>{const P=await u();if(!P)return;const{data:N,error:E}=await xe.from("costflow_planning_blocks").insert({user_id:P,row_id:b,start_month:_,duration:j,color_id:S,label:C}).select().single();if(E){Ee.error(E.message);return}i(A=>[...A,N])},updateBlock:async(b,_)=>{const{error:j}=await xe.from("costflow_planning_blocks").update(_).eq("id",b);if(j){Ee.error(j.message);return}i(S=>S.map(C=>C.id===b?{...C,..._}:C))},deleteBlock:async b=>{const{error:_}=await xe.from("costflow_planning_blocks").delete().eq("id",b);if(_){Ee.error(_.message);return}i(j=>j.filter(S=>S.id!==b))}}}function xOe(){const[e,t]=w.useState([]),[r,n]=w.useState(!0),a=w.useCallback(async()=>{try{const{data:c,error:u}=await xe.from("costflow_planning_notes").select("*").order("created_at",{ascending:!1});if(u)throw u;t(c||[])}catch(c){Ee.error("Erreur chargement notes: "+c.message)}finally{n(!1)}},[]);return w.useEffect(()=>{a()},[a]),{notes:e,loading:r,getNotesForBlock:c=>e.filter(u=>u.block_id===c),getNotesForBlocks:c=>e.filter(u=>c.includes(u.block_id)),upsertNote:async(c,u)=>{var m;const{data:d}=await xe.auth.getUser(),f=(m=d.user)==null?void 0:m.id;if(!f)return;const h=e.find(y=>y.block_id===c);if(h){const{error:y}=await xe.from("costflow_planning_notes").update({content:u}).eq("id",h.id);if(y){Ee.error(y.message);return}t(g=>g.map(p=>p.id===h.id?{...p,content:u,updated_at:new Date().toISOString()}:p))}else{const{data:y,error:g}=await xe.from("costflow_planning_notes").insert({user_id:f,block_id:c,content:u}).select().single();if(g){Ee.error(g.message);return}t(p=>[y,...p])}Ee.success("Note sauvegarde")}}}function bOe({open:e,onOpenChange:t,block:r,color:n,existingNote:a,onSave:i,monthLabels:o}){const[l,c]=w.useState("");if(w.useEffect(()=>{c((a==null?void 0:a.content)||"")},[a,e]),!r)return null;const u=o[r.start_month-1]||`M${r.start_month}`,d=r.start_month+r.duration-1,f=o[d-1]||`M${d}`;return s.jsx(Cr,{open:e,onOpenChange:t,children:s.jsxs(vr,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[s.jsx(yr,{children:s.jsxs(xr,{className:"flex items-center gap-2",children:[n&&s.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:n.color}}),s.jsx("span",{children:r.label||(n==null?void 0:n.name)||"Bloc"}),s.jsxs("span",{className:"text-sm font-normal text-muted-foreground",children:["(",u,"  ",f,")"]})]})}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(vi,{value:l,onChange:h=>c(h.target.value),placeholder:"Notes sur l'avancement de cette phase",className:"min-h-[250px] text-sm"}),s.jsxs("div",{className:"flex justify-between items-center",children:[a&&s.jsxs("span",{className:"text-xs text-muted-foreground",children:["Dernire mise  jour : ",new Date(a.updated_at).toLocaleDateString("fr-FR")]}),s.jsxs(ae,{onClick:()=>{i(r.id,l),t(!1)},className:"ml-auto",children:[s.jsx(Gm,{className:"h-4 w-4 mr-1"})," Sauvegarder"]})]})]})]})})}function wOe(e,t){return w.useReducer((r,n)=>t[r][n]??r,e)}var qN="ScrollArea",[WU,g2e]=Un(qN),[jOe,Ua]=WU(qN),HU=w.forwardRef((e,t)=>{const{__scopeScrollArea:r,type:n="hover",dir:a,scrollHideDelay:i=600,...o}=e,[l,c]=w.useState(null),[u,d]=w.useState(null),[f,h]=w.useState(null),[m,y]=w.useState(null),[g,p]=w.useState(null),[v,x]=w.useState(0),[b,_]=w.useState(0),[j,S]=w.useState(!1),[C,P]=w.useState(!1),N=ut(t,A=>c(A)),E=Dd(a);return s.jsx(jOe,{scope:r,type:n,dir:E,scrollHideDelay:i,scrollArea:l,viewport:u,onViewportChange:d,content:f,onContentChange:h,scrollbarX:m,onScrollbarXChange:y,scrollbarXEnabled:j,onScrollbarXEnabledChange:S,scrollbarY:g,onScrollbarYChange:p,scrollbarYEnabled:C,onScrollbarYEnabledChange:P,onCornerWidthChange:x,onCornerHeightChange:_,children:s.jsx(We.div,{dir:E,...o,ref:N,style:{position:"relative","--radix-scroll-area-corner-width":v+"px","--radix-scroll-area-corner-height":b+"px",...e.style}})})});HU.displayName=qN;var qU="ScrollAreaViewport",KU=w.forwardRef((e,t)=>{const{__scopeScrollArea:r,children:n,nonce:a,...i}=e,o=Ua(qU,r),l=w.useRef(null),c=ut(t,l,o.onViewportChange);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),s.jsx(We.div,{"data-radix-scroll-area-viewport":"",...i,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:s.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});KU.displayName=qU;var Ji="ScrollAreaScrollbar",KN=w.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=Ua(Ji,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=a,l=e.orientation==="horizontal";return w.useEffect(()=>(l?i(!0):o(!0),()=>{l?i(!1):o(!1)}),[l,i,o]),a.type==="hover"?s.jsx(_Oe,{...n,ref:t,forceMount:r}):a.type==="scroll"?s.jsx(SOe,{...n,ref:t,forceMount:r}):a.type==="auto"?s.jsx(YU,{...n,ref:t,forceMount:r}):a.type==="always"?s.jsx(YN,{...n,ref:t}):null});KN.displayName=Ji;var _Oe=w.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=Ua(Ji,e.__scopeScrollArea),[i,o]=w.useState(!1);return w.useEffect(()=>{const l=a.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),o(!0)},d=()=>{c=window.setTimeout(()=>o(!1),a.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",d)}}},[a.scrollArea,a.scrollHideDelay]),s.jsx(Zn,{present:r||i,children:s.jsx(YU,{"data-state":i?"visible":"hidden",...n,ref:t})})}),SOe=w.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=Ua(Ji,e.__scopeScrollArea),i=e.orientation==="horizontal",o=L0(()=>c("SCROLL_END"),100),[l,c]=wOe("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return w.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,a.scrollHideDelay,c]),w.useEffect(()=>{const u=a.viewport,d=i?"scrollLeft":"scrollTop";if(u){let f=u[d];const h=()=>{const m=u[d];f!==m&&(c("SCROLL"),o()),f=m};return u.addEventListener("scroll",h),()=>u.removeEventListener("scroll",h)}},[a.viewport,i,c,o]),s.jsx(Zn,{present:r||l!=="hidden",children:s.jsx(YN,{"data-state":l==="hidden"?"hidden":"visible",...n,ref:t,onPointerEnter:Te(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:Te(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),YU=w.forwardRef((e,t)=>{const r=Ua(Ji,e.__scopeScrollArea),{forceMount:n,...a}=e,[i,o]=w.useState(!1),l=e.orientation==="horizontal",c=L0(()=>{if(r.viewport){const u=r.viewport.offsetWidth<r.viewport.scrollWidth,d=r.viewport.offsetHeight<r.viewport.scrollHeight;o(l?u:d)}},10);return _d(r.viewport,c),_d(r.content,c),s.jsx(Zn,{present:n||i,children:s.jsx(YN,{"data-state":i?"visible":"hidden",...a,ref:t})})}),YN=w.forwardRef((e,t)=>{const{orientation:r="vertical",...n}=e,a=Ua(Ji,e.__scopeScrollArea),i=w.useRef(null),o=w.useRef(0),[l,c]=w.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=ZU(l.viewport,l.content),d={...n,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:h=>i.current=h,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:h=>o.current=h};function f(h,m){return AOe(h,o.current,l,m)}return r==="horizontal"?s.jsx(COe,{...d,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const h=a.viewport.scrollLeft,m=PR(h,l,a.dir);i.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:h=>{a.viewport&&(a.viewport.scrollLeft=h)},onDragScroll:h=>{a.viewport&&(a.viewport.scrollLeft=f(h,a.dir))}}):r==="vertical"?s.jsx(NOe,{...d,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const h=a.viewport.scrollTop,m=PR(h,l);i.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:h=>{a.viewport&&(a.viewport.scrollTop=h)},onDragScroll:h=>{a.viewport&&(a.viewport.scrollTop=f(h))}}):null}),COe=w.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...a}=e,i=Ua(Ji,e.__scopeScrollArea),[o,l]=w.useState(),c=w.useRef(null),u=ut(t,c,i.onScrollbarXChange);return w.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),s.jsx(XU,{"data-orientation":"horizontal",...a,ref:u,sizes:r,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":D0(r)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.x),onDragScroll:d=>e.onDragScroll(d.x),onWheelScroll:(d,f)=>{if(i.viewport){const h=i.viewport.scrollLeft+d.deltaX;e.onWheelScroll(h),t8(h,f)&&d.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&n({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:By(o.paddingLeft),paddingEnd:By(o.paddingRight)}})}})}),NOe=w.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...a}=e,i=Ua(Ji,e.__scopeScrollArea),[o,l]=w.useState(),c=w.useRef(null),u=ut(t,c,i.onScrollbarYChange);return w.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),s.jsx(XU,{"data-orientation":"vertical",...a,ref:u,sizes:r,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":D0(r)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.y),onDragScroll:d=>e.onDragScroll(d.y),onWheelScroll:(d,f)=>{if(i.viewport){const h=i.viewport.scrollTop+d.deltaY;e.onWheelScroll(h),t8(h,f)&&d.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&n({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:By(o.paddingTop),paddingEnd:By(o.paddingBottom)}})}})}),[POe,GU]=WU(Ji),XU=w.forwardRef((e,t)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:a,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:d,onResize:f,...h}=e,m=Ua(Ji,r),[y,g]=w.useState(null),p=ut(t,N=>g(N)),v=w.useRef(null),x=w.useRef(""),b=m.viewport,_=n.content-n.viewport,j=Zr(d),S=Zr(c),C=L0(f,10);function P(N){if(v.current){const E=N.clientX-v.current.left,A=N.clientY-v.current.top;u({x:E,y:A})}}return w.useEffect(()=>{const N=E=>{const A=E.target;(y==null?void 0:y.contains(A))&&j(E,_)};return document.addEventListener("wheel",N,{passive:!1}),()=>document.removeEventListener("wheel",N,{passive:!1})},[b,y,_,j]),w.useEffect(S,[n,S]),_d(y,C),_d(m.content,C),s.jsx(POe,{scope:r,scrollbar:y,hasThumb:a,onThumbChange:Zr(i),onThumbPointerUp:Zr(o),onThumbPositionChange:S,onThumbPointerDown:Zr(l),children:s.jsx(We.div,{...h,ref:p,style:{position:"absolute",...h.style},onPointerDown:Te(e.onPointerDown,N=>{N.button===0&&(N.target.setPointerCapture(N.pointerId),v.current=y.getBoundingClientRect(),x.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),P(N))}),onPointerMove:Te(e.onPointerMove,P),onPointerUp:Te(e.onPointerUp,N=>{const E=N.target;E.hasPointerCapture(N.pointerId)&&E.releasePointerCapture(N.pointerId),document.body.style.webkitUserSelect=x.current,m.viewport&&(m.viewport.style.scrollBehavior=""),v.current=null})})})}),Ly="ScrollAreaThumb",QU=w.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=GU(Ly,e.__scopeScrollArea);return s.jsx(Zn,{present:r||a.hasThumb,children:s.jsx(kOe,{ref:t,...n})})}),kOe=w.forwardRef((e,t)=>{const{__scopeScrollArea:r,style:n,...a}=e,i=Ua(Ly,r),o=GU(Ly,r),{onThumbPositionChange:l}=o,c=ut(t,f=>o.onThumbChange(f)),u=w.useRef(void 0),d=L0(()=>{u.current&&(u.current(),u.current=void 0)},100);return w.useEffect(()=>{const f=i.viewport;if(f){const h=()=>{if(d(),!u.current){const m=OOe(f,l);u.current=m,l()}};return l(),f.addEventListener("scroll",h),()=>f.removeEventListener("scroll",h)}},[i.viewport,d,l]),s.jsx(We.div,{"data-state":o.hasThumb?"visible":"hidden",...a,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:Te(e.onPointerDownCapture,f=>{const m=f.target.getBoundingClientRect(),y=f.clientX-m.left,g=f.clientY-m.top;o.onThumbPointerDown({x:y,y:g})}),onPointerUp:Te(e.onPointerUp,o.onThumbPointerUp)})});QU.displayName=Ly;var GN="ScrollAreaCorner",JU=w.forwardRef((e,t)=>{const r=Ua(GN,e.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?s.jsx(EOe,{...e,ref:t}):null});JU.displayName=GN;var EOe=w.forwardRef((e,t)=>{const{__scopeScrollArea:r,...n}=e,a=Ua(GN,r),[i,o]=w.useState(0),[l,c]=w.useState(0),u=!!(i&&l);return _d(a.scrollbarX,()=>{var f;const d=((f=a.scrollbarX)==null?void 0:f.offsetHeight)||0;a.onCornerHeightChange(d),c(d)}),_d(a.scrollbarY,()=>{var f;const d=((f=a.scrollbarY)==null?void 0:f.offsetWidth)||0;a.onCornerWidthChange(d),o(d)}),u?s.jsx(We.div,{...n,ref:t,style:{width:i,height:l,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function By(e){return e?parseInt(e,10):0}function ZU(e,t){const r=e/t;return isNaN(r)?0:r}function D0(e){const t=ZU(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,n=(e.scrollbar.size-r)*t;return Math.max(n,18)}function AOe(e,t,r,n="ltr"){const a=D0(r),i=a/2,o=t||i,l=a-o,c=r.scrollbar.paddingStart+o,u=r.scrollbar.size-r.scrollbar.paddingEnd-l,d=r.content-r.viewport,f=n==="ltr"?[0,d]:[d*-1,0];return e8([c,u],f)(e)}function PR(e,t,r="ltr"){const n=D0(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-a,o=t.content-t.viewport,l=i-n,c=r==="ltr"?[0,o]:[o*-1,0],u=Fh(e,c);return e8([0,o],[0,l])(u)}function e8(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function t8(e,t){return e>0&&e<t}var OOe=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},n=0;return function a(){const i={left:e.scrollLeft,top:e.scrollTop},o=r.left!==i.left,l=r.top!==i.top;(o||l)&&t(),r=i,n=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(n)};function L0(e,t){const r=Zr(e),n=w.useRef(0);return w.useEffect(()=>()=>window.clearTimeout(n.current),[]),w.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,t)},[r,t])}function _d(e,t){const r=Zr(t);un(()=>{let n=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return a.observe(e),()=>{window.cancelAnimationFrame(n),a.unobserve(e)}}},[e,r])}var r8=HU,TOe=KU,ROe=JU;const n8=w.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(r8,{ref:n,className:ue("relative overflow-hidden",e),...r,children:[s.jsx(TOe,{className:"h-full w-full rounded-[inherit]",children:t}),s.jsx(a8,{}),s.jsx(ROe,{})]}));n8.displayName=r8.displayName;const a8=w.forwardRef(({className:e,orientation:t="vertical",...r},n)=>s.jsx(KN,{ref:n,orientation:t,className:ue("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:s.jsx(QU,{className:"relative flex-1 rounded-full bg-border"})}));a8.displayName=KN.displayName;function MOe({open:e,onOpenChange:t,rowLabel:r,rowBlocks:n,notes:a,colors:i,monthLabels:o,onOpenBlockNote:l}){const c=d=>i.find(f=>f.id===d),u=[...n].sort((d,f)=>d.start_month-f.start_month);return s.jsx(Cr,{open:e,onOpenChange:t,children:s.jsxs(vr,{className:"max-w-3xl max-h-[85vh]",children:[s.jsx(yr,{children:s.jsxs(xr,{className:"flex items-center gap-2",children:[s.jsx(Ru,{className:"h-5 w-5"}),"Notes  ",r]})}),s.jsx(n8,{className:"max-h-[65vh] pr-2",children:u.length===0?s.jsx("p",{className:"text-sm text-muted-foreground py-4",children:"Aucun bloc sur cette ligne."}):s.jsx("div",{className:"space-y-4",children:u.map(d=>{const f=c(d.color_id),h=a.find(p=>p.block_id===d.id),m=o[d.start_month-1]||`M${d.start_month}`,y=d.start_month+d.duration-1,g=o[y-1]||`M${y}`;return s.jsxs("div",{className:"border rounded-lg p-3 hover:bg-muted/30 cursor-pointer transition-colors",onClick:()=>{t(!1),l(d)},children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f&&s.jsx("div",{className:"w-3 h-3 rounded",style:{backgroundColor:f.color}}),s.jsx("span",{className:"font-medium text-sm",children:d.label||(f==null?void 0:f.name)||"Bloc"}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:[m,"  ",g]})]}),h?s.jsx("p",{className:"text-sm text-foreground whitespace-pre-wrap line-clamp-4",children:h.content}):s.jsx("p",{className:"text-xs text-muted-foreground italic",children:"Aucune note  cliquez pour en ajouter"}),h&&s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Mis  jour le ",new Date(h.updated_at).toLocaleDateString("fr-FR")]})]},d.id)})})})]})})}const i8=["Jan","Fv","Mar","Avr","Mai","Jun","Jul","Ao","Sep","Oct","Nov","Dc"];function $Oe(e,t){const r=[];for(let n=e;n<=t;n++)r.push({label:i8[(n-1)%12],globalIndex:n});return r}function s8(){const{colors:e,rows:t,blocks:r,loading:n,createColor:a,updateColor:i,deleteColor:o,createRow:l,updateRow:c,deleteRow:u,createBlock:d,updateBlock:f,deleteBlock:h}=VU(),{notes:m,getNotesForBlock:y,getNotesForBlocks:g,upsertNote:p}=xOe(),[v,x]=w.useState(1),[b,_]=w.useState(12),[j,S]=w.useState(""),[C,P]=w.useState(null),[N,E]=w.useState(""),[A,T]=w.useState(!1),[R,k]=w.useState(""),[O,M]=w.useState("#3b82f6"),[D,L]=w.useState(null),[B,z]=w.useState(!1),[Z,ee]=w.useState({row_id:"",start_month:1,duration:1,color_id:"",label:""}),[le,V]=w.useState(null),[I,F]=w.useState(null),[q,de]=w.useState(!1),[re,H]=w.useState(null),[Y,G]=w.useState(!1),[J,ge]=w.useState(null),Ce=w.useRef(null),$e=$Oe(v,b),Ge=$e.length;$e.map(he=>he.label);const dt=he=>e.find(Ue=>Ue.id===he),Rt=he=>{const Ue=[...he].sort((Xe,lt)=>Xe.start_month-lt.start_month),_t=[],xt=[];for(const Xe of Ue){const lt=Xe.start_month+Xe.duration;let Lr=!1;for(let Kr=0;Kr<xt.length;Kr++)if(Xe.start_month>=xt[Kr]){xt[Kr]=lt,_t.push({blockId:Xe.id,lane:Kr}),Lr=!0;break}Lr||(_t.push({blockId:Xe.id,lane:xt.length}),xt.push(lt))}return{lanes:_t,maxLane:xt.length}},U=()=>{j.trim()&&(l(j.trim()),S(""))},X=he=>{N.trim()&&c(he,N.trim()),P(null)},se=(he,Ue)=>{var _t;ee({row_id:he,start_month:Ue,duration:1,color_id:((_t=e[0])==null?void 0:_t.id)||"",label:""}),V(null),z(!0)},Q=he=>{ee({row_id:he.row_id,start_month:he.start_month,duration:he.duration,color_id:he.color_id||"",label:he.label}),V(he.id),z(!0)},ce=()=>{const{row_id:he,start_month:Ue,duration:_t,color_id:xt,label:Xe}=Z,lt=xt||null;le?f(le,{row_id:he,start_month:Ue,duration:_t,color_id:lt,label:Xe}):d(he,Ue,_t,lt,Xe),z(!1)},pe=()=>{R.trim()&&(D?i(D,{name:R.trim(),color:O}):a(R.trim(),O),k(""),M("#3b82f6"),L(null),T(!1))},fe=he=>{L(he.id),k(he.name),M(he.color),T(!0)},ye=he=>{F(he),de(!0)},Pe=(he,Ue)=>{he.preventDefault();const _t=Ce.current;if(!_t)return;const xt=_t.getBoundingClientRect(),Xe=xt.width/Ge,lt=Math.floor((he.clientX-xt.left)/Xe)+v;ge({blockId:Ue.id,offsetMonth:lt-Ue.start_month})},tt=w.useCallback(he=>{if(!J||!Ce.current)return;const Ue=Ce.current.getBoundingClientRect(),_t=Ue.width/Ge;let Xe=Math.floor((he.clientX-Ue.left)/_t)+v-J.offsetMonth;const lt=r.find(Lr=>Lr.id===J.blockId);lt&&(Xe=Math.max(1,Math.min(Xe,36-lt.duration)),Xe!==lt.start_month&&f(J.blockId,{start_month:Xe}))},[J,r,f,Ge,v]),Ke=w.useCallback(()=>{ge(null)},[]);if(n)return s.jsx("div",{className:"text-muted-foreground text-center py-8",children:"Chargement"});const pt=Array.from({length:36},(he,Ue)=>{const _t=Ue+1,xt=Math.floor(Ue/12)+1,Xe=`${i8[Ue%12]} (A${xt})`;return{value:_t,label:Xe}});return s.jsxs("div",{className:"space-y-4",children:[s.jsxs(Bt,{children:[s.jsx(cr,{className:"pb-2",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(ur,{className:"text-sm font-medium",children:"Lgende des couleurs"}),s.jsxs(ae,{size:"sm",variant:"outline",className:"h-7 text-xs",onClick:()=>{L(null),k(""),M("#3b82f6"),T(!0)},children:[s.jsx(ar,{className:"h-3 w-3 mr-1"})," Ajouter"]})]})}),s.jsx(Wt,{children:e.length===0?s.jsx("p",{className:"text-xs text-muted-foreground",children:"Ajoutez des couleurs pour catgoriser vos blocs."}):s.jsx("div",{className:"flex flex-wrap gap-3",children:e.map(he=>s.jsxs("div",{className:"flex items-center gap-2 group",children:[s.jsx("div",{className:"w-5 h-5 rounded border",style:{backgroundColor:he.color}}),s.jsx("span",{className:"text-sm",children:he.name}),s.jsx(ae,{variant:"ghost",size:"icon",className:"h-5 w-5 opacity-0 group-hover:opacity-100",onClick:()=>fe(he),children:s.jsx(tv,{className:"h-3 w-3"})}),s.jsx(ae,{variant:"ghost",size:"icon",className:"h-5 w-5 opacity-0 group-hover:opacity-100 text-destructive",onClick:()=>o(he.id),children:s.jsx($a,{className:"h-3 w-3"})})]},he.id))})})]}),s.jsxs(Bt,{children:[s.jsx(cr,{className:"pb-2",children:s.jsxs("div",{className:"flex flex-col gap-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(ur,{className:"text-sm font-medium",children:"Planning dveloppement produits"}),s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsx(be,{placeholder:"Nouveau produit",value:j,onChange:he=>S(he.target.value),onKeyDown:he=>he.key==="Enter"&&U(),className:"h-7 text-xs w-48"}),s.jsxs(ae,{size:"sm",variant:"outline",className:"h-7 text-xs",onClick:U,disabled:!j.trim(),children:[s.jsx(ar,{className:"h-3 w-3 mr-1"})," Ligne"]})]})]}),s.jsxs("div",{className:"flex gap-4 items-center",children:[s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsx(Ne,{className:"text-xs whitespace-nowrap",children:"Dbut :"}),s.jsxs(st,{value:String(v),onValueChange:he=>{const Ue=Number(he);x(Ue),Ue>b&&_(Ue)},children:[s.jsx(at,{className:"h-7 text-xs w-32",children:s.jsx(ot,{})}),s.jsx(it,{children:pt.map(he=>s.jsx(Le,{value:String(he.value),children:he.label},he.value))})]})]}),s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsx(Ne,{className:"text-xs whitespace-nowrap",children:"Fin :"}),s.jsxs(st,{value:String(b),onValueChange:he=>{const Ue=Number(he);_(Ue),Ue<v&&x(Ue)},children:[s.jsx(at,{className:"h-7 text-xs w-32",children:s.jsx(ot,{})}),s.jsx(it,{children:pt.filter(he=>he.value>=v).map(he=>s.jsx(Le,{value:String(he.value),children:he.label},he.value))})]})]}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:[Ge," mois affichs"]})]})]})}),s.jsx(Wt,{className:"overflow-x-auto p-0",children:s.jsxs("div",{className:"min-w-[900px]",onMouseMove:tt,onMouseUp:Ke,onMouseLeave:Ke,children:[s.jsxs("div",{className:"border-b bg-muted/50",style:{display:"grid",gridTemplateColumns:`200px repeat(${Ge}, 1fr)`},children:[s.jsx("div",{className:"px-3 py-2 text-xs font-semibold border-r",children:"Produit"}),$e.map((he,Ue)=>s.jsx("div",{className:"px-1 py-2 text-xs font-semibold text-center border-r last:border-r-0",children:he.label},Ue))]}),t.length===0&&s.jsx("div",{className:"text-center py-8 text-sm text-muted-foreground",children:"Ajoutez des lignes produit pour commencer le planning"}),t.map(he=>{const Ue=r.filter(lt=>lt.row_id===he.id),{lanes:_t,maxLane:xt}=Rt(Ue),Xe=Math.max(44,xt*32+12);return s.jsxs("div",{className:"border-b group/row hover:bg-muted/20",style:{display:"grid",gridTemplateColumns:`200px repeat(${Ge}, 1fr)`,minHeight:Xe},children:[s.jsx("div",{className:"px-3 py-2 text-sm border-r flex items-center gap-1",style:{minHeight:Xe},children:C===he.id?s.jsx(be,{value:N,onChange:lt=>E(lt.target.value),onBlur:()=>X(he.id),onKeyDown:lt=>lt.key==="Enter"&&X(he.id),autoFocus:!0,className:"h-6 text-xs"}):s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"truncate flex-1 font-medium",children:he.label}),s.jsx(ae,{variant:"ghost",size:"icon",className:"h-5 w-5 opacity-0 group-hover/row:opacity-100 shrink-0",onClick:()=>{H({id:he.id,label:he.label}),G(!0)},title:"Voir toutes les notes",children:s.jsx(Ru,{className:"h-3 w-3"})}),s.jsx(ae,{variant:"ghost",size:"icon",className:"h-5 w-5 opacity-0 group-hover/row:opacity-100 shrink-0",onClick:()=>{P(he.id),E(he.label)},children:s.jsx(tv,{className:"h-3 w-3"})}),s.jsx(ae,{variant:"ghost",size:"icon",className:"h-5 w-5 opacity-0 group-hover/row:opacity-100 shrink-0 text-destructive",onClick:()=>{confirm("Supprimer cette ligne ?")&&u(he.id)},children:s.jsx(hr,{className:"h-3 w-3"})})]})}),s.jsxs("div",{className:"relative",style:{gridColumn:`2 / ${Ge+2}`,minHeight:Xe},ref:Ce,children:[s.jsx("div",{className:"absolute inset-0",style:{display:"grid",gridTemplateColumns:`repeat(${Ge}, 1fr)`},children:$e.map((lt,Lr)=>s.jsx("div",{className:"border-r last:border-r-0 cursor-pointer hover:bg-primary/5",onDoubleClick:()=>se(he.id,lt.globalIndex)},Lr))}),Ue.map(lt=>{const Lr=lt.start_month+lt.duration;if(Lr<=v||lt.start_month>b)return null;const Kr=dt(lt.color_id),cc=(Kr==null?void 0:Kr.color)||"#94a3b8",uc=Math.max(lt.start_month,v),Ls=Math.min(Lr,b+1),ba=`${(uc-v)/Ge*100}%`,af=`${(Ls-uc)/Ge*100}%`,rt=_t.find(ke=>ke.blockId===lt.id),K=4+((rt==null?void 0:rt.lane)||0)*32,oe=y(lt.id),ne=oe.length>0&&oe[0].content.trim()!=="";return s.jsxs("div",{className:"absolute rounded-md flex items-center justify-center text-xs font-medium text-white shadow-sm select-none",style:{left:ba,width:af,backgroundColor:cc,top:K,height:28,cursor:J?"grabbing":"grab",zIndex:(J==null?void 0:J.blockId)===lt.id?10:1},onMouseDown:ke=>Pe(ke,lt),onDoubleClick:()=>Q(lt),onClick:ke=>{J||(ke.stopPropagation(),ye(lt))},title:"Clic pour notes, double-clic pour modifier, glisser pour dplacer",children:[s.jsx("span",{className:"truncate px-1 drop-shadow-sm",children:lt.label||(Kr==null?void 0:Kr.name)||""}),ne&&s.jsx(JW,{className:"h-3 w-3 ml-0.5 shrink-0 opacity-80"})]},lt.id)})]})]},he.id)})]})})]}),s.jsx(Cr,{open:A,onOpenChange:T,children:s.jsxs(vr,{className:"max-w-sm",children:[s.jsx(yr,{children:s.jsx(xr,{children:D?"Modifier la couleur":"Nouvelle couleur"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Ne,{children:"Nom / Dfinition"}),s.jsx(be,{value:R,onChange:he=>k(he.target.value),placeholder:"Ex: Sortie publique valide"})]}),s.jsxs("div",{children:[s.jsx(Ne,{children:"Couleur"}),s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsx("input",{type:"color",value:O,onChange:he=>M(he.target.value),className:"h-9 w-12 rounded border cursor-pointer"}),s.jsx(be,{value:O,onChange:he=>M(he.target.value),className:"w-28 text-sm"})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ae,{onClick:pe,disabled:!R.trim(),className:"flex-1",children:D?"Mettre  jour":"Crer"}),D&&s.jsx(ae,{variant:"destructive",onClick:()=>{o(D),T(!1)},children:"Supprimer"})]})]})]})}),s.jsx(Cr,{open:B,onOpenChange:z,children:s.jsxs(vr,{className:"max-w-sm",children:[s.jsx(yr,{children:s.jsx(xr,{children:le?"Modifier le bloc":"Nouveau bloc"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Ne,{children:"Label"}),s.jsx(be,{value:Z.label,onChange:he=>ee(Ue=>({...Ue,label:he.target.value})),placeholder:"Ex: Prototype"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx(Ne,{children:"Mois de dbut"}),s.jsxs(st,{value:String(Z.start_month),onValueChange:he=>ee(Ue=>({...Ue,start_month:Number(he)})),children:[s.jsx(at,{children:s.jsx(ot,{})}),s.jsx(it,{children:pt.map(he=>s.jsx(Le,{value:String(he.value),children:he.label},he.value))})]})]}),s.jsxs("div",{children:[s.jsx(Ne,{children:"Dure (mois)"}),s.jsxs(st,{value:String(Z.duration),onValueChange:he=>ee(Ue=>({...Ue,duration:Number(he)})),children:[s.jsx(at,{children:s.jsx(ot,{})}),s.jsx(it,{children:Array.from({length:24},(he,Ue)=>Ue+1).map(he=>s.jsxs(Le,{value:String(he),children:[he," mois"]},he))})]})]})]}),s.jsxs("div",{children:[s.jsx(Ne,{children:"Couleur"}),s.jsxs(st,{value:Z.color_id||"none",onValueChange:he=>ee(Ue=>({...Ue,color_id:he==="none"?"":he})),children:[s.jsx(at,{children:s.jsx(ot,{})}),s.jsxs(it,{children:[s.jsx(Le,{value:"none",children:"Sans couleur"}),e.map(he=>s.jsx(Le,{value:he.id,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 rounded",style:{backgroundColor:he.color}}),he.name]})},he.id))]})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ae,{onClick:ce,className:"flex-1",children:le?"Mettre  jour":"Crer"}),le&&s.jsx(ae,{variant:"destructive",onClick:()=>{h(le),z(!1)},children:"Supprimer"})]})]})]})}),s.jsx(bOe,{open:q,onOpenChange:de,block:I,color:I?dt(I.color_id):void 0,existingNote:I?y(I.id)[0]:void 0,onSave:p,monthLabels:pt.map(he=>he.label)}),re&&s.jsx(MOe,{open:Y,onOpenChange:G,rowLabel:re.label,rowBlocks:r.filter(he=>he.row_id===re.id),notes:g(r.filter(he=>he.row_id===re.id).map(he=>he.id)),colors:e,monthLabels:pt.map(he=>he.label),onOpenBlockNote:ye})]})}function IOe(){const e=HN(),[t,r]=w.useState(null),[n,a]=w.useState(null),[i,o]=w.useState("references");return e.loading?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx(ui,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):s.jsx(Qi,{tabKey:"costflow",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"page-title",children:"CostFlow  Production & Bureau d'tudes"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Gestion des rfrences, nomenclatures et calcul des cots de revient"})]}),s.jsxs(xi,{value:i,onValueChange:o,className:"space-y-4",children:[s.jsxs(Fa,{children:[s.jsx(At,{value:"references",children:" Rfrences"}),s.jsx(At,{value:"products",children:" Produits"}),s.jsx(At,{value:"suppliers",children:" Fournisseurs"}),s.jsx(At,{value:"costs",children:" Cots & Export"}),s.jsx(At,{value:"meetings",children:" Runions BE"}),s.jsx(At,{value:"planning",children:" Planning Dev"})]}),s.jsx(Ft,{value:"references",children:t?s.jsx(aEe,{reference:t,files:e.referenceFiles,onUploadFile:e.uploadFile,onDeleteFile:e.deleteFile,onGetSignedUrl:e.getSignedUrl,onBack:()=>r(null)}):s.jsx(rEe,{references:e.references,suppliers:e.suppliers,onCreateReference:e.createReference,onUpdateReference:e.updateReference,onDeleteReference:e.deleteReference,onBulkImport:e.bulkCreateReferences,onSelectReference:r})}),s.jsx(Ft,{value:"products",children:n?s.jsx(cEe,{product:n,references:e.references,bom:e.bom,onAddBomEntry:e.addBomEntry,onUpdateBomEntry:e.updateBomEntry,onRemoveBomEntry:e.removeBomEntry,calculateProductCosts:e.calculateProductCosts,onBack:()=>a(null)}):s.jsxs("div",{className:"space-y-6",children:[s.jsx(lEe,{products:e.products,references:e.references,categories:e.productCategories,onCreateProduct:e.createProduct,onUpdateProduct:e.updateProduct,onDeleteProduct:e.deleteProduct,onSelectProduct:a,onImportProduct:e.createProductWithBom,calculateProductCosts:e.calculateProductCosts}),s.jsx(uEe,{categories:e.productCategories,onCreateCategory:e.createProductCategory,onUpdateCategory:e.updateProductCategory,onDeleteCategory:e.deleteProductCategory})]})}),s.jsx(Ft,{value:"suppliers",children:s.jsx(fEe,{suppliers:e.suppliers,onCreateSupplier:e.createSupplier,onUpdateSupplier:e.updateSupplier,onDeleteSupplier:e.deleteSupplier})}),s.jsx(Ft,{value:"costs",children:s.jsx(dEe,{products:e.products,references:e.references,bom:e.bom,calculateProductCosts:e.calculateProductCosts})}),s.jsx(Ft,{value:"meetings",children:s.jsx(yOe,{})}),s.jsx(Ft,{value:"planning",children:s.jsx(s8,{})})]})]})})}function DOe(){const{user:e,userRole:t}=xa(),[r,n]=w.useState([]),[a,i]=w.useState([]),[o,l]=w.useState(!0),c=t==="admin"||t==="finance",u=w.useCallback(async()=>{if(e){l(!0);try{const[p,v]=await Promise.all([xe.from("timetracking_categories").select("*").order("name"),xe.from("timetracking_entries").select("*").eq("user_id",e.id).order("date",{ascending:!1})]);p.data&&n(p.data.map(x=>({id:x.id,name:x.name,color:x.color||"#6366f1",created_at:x.created_at}))),v.data&&i(v.data.map(x=>({id:x.id,user_id:x.user_id,date:x.date,category_id:x.category_id,task_description:x.task_description,duration_minutes:x.duration_minutes||0,comments:x.comments||"",created_at:x.created_at,updated_at:x.updated_at})))}catch(p){console.error("TimeTracking fetch error:",p)}finally{l(!1)}}},[e]);return w.useEffect(()=>{u()},[u]),{categories:r,entries:a,loading:o,canManageCategories:c,createCategory:async(p,v)=>{if(!e)return;const{error:x}=await xe.from("timetracking_categories").insert({user_id:e.id,name:p,color:v});x?(Ee.error("Erreur cration catgorie"),console.error(x)):(Ee.success("Catgorie cre"),u())},updateCategory:async(p,v)=>{const{error:x}=await xe.from("timetracking_categories").update(v).eq("id",p);x?(Ee.error("Erreur mise  jour catgorie"),console.error(x)):(Ee.success("Catgorie mise  jour"),u())},deleteCategory:async p=>{const{error:v}=await xe.from("timetracking_categories").delete().eq("id",p);v?(Ee.error("Erreur suppression catgorie"),console.error(v)):(Ee.success("Catgorie supprime"),u())},createEntry:async p=>{if(!e)return;const{error:v}=await xe.from("timetracking_entries").insert({user_id:e.id,date:p.date,category_id:p.category_id||null,task_description:p.task_description,duration_minutes:p.duration_minutes||0,comments:p.comments||""});v?(Ee.error("Erreur cration entre"),console.error(v)):(Ee.success("Temps enregistr"),u())},updateEntry:async(p,v)=>{const{error:x}=await xe.from("timetracking_entries").update(v).eq("id",p);x?(Ee.error("Erreur mise  jour"),console.error(x)):u()},deleteEntry:async p=>{const{error:v}=await xe.from("timetracking_entries").delete().eq("id",p);v?(Ee.error("Erreur suppression"),console.error(v)):u()},refresh:u}}function ww(e){const t=Math.floor(e/60),r=e%60;return t===0?`${r}min`:r===0?`${t}h`:`${t}h${r.toString().padStart(2,"0")}`}function LOe({entries:e,categories:t,onCreateEntry:r,onUpdateEntry:n,onDeleteEntry:a}){const[i,o]=w.useState(()=>jd(new Date,{weekStartsOn:1})),[l,c]=w.useState(new Date),[u,d]=w.useState(!1),[f,h]=w.useState(null),[m,y]=w.useState({task_description:"",category_id:"",duration_hours:0,duration_minutes:0,comments:""}),g=SEe(i,{weekStartsOn:1}),p=jEe({start:i,end:g}),v=w.useMemo(()=>e.filter(P=>B_(_Ae(P.date),l)),[e,l]),x=w.useMemo(()=>{const P={};return p.forEach(N=>{const E=Qa(N,"yyyy-MM-dd");P[E]=e.filter(A=>A.date===E).reduce((A,T)=>A+T.duration_minutes,0)}),P},[e,p]),b=v.reduce((P,N)=>P+N.duration_minutes,0),_=P=>t.find(N=>N.id===P),j=()=>{h(null),y({task_description:"",category_id:"",duration_hours:0,duration_minutes:0,comments:""}),d(!0)},S=P=>{h(P.id),y({task_description:P.task_description,category_id:P.category_id||"",duration_hours:Math.floor(P.duration_minutes/60),duration_minutes:P.duration_minutes%60,comments:P.comments}),d(!0)},C=async()=>{if(!m.task_description.trim())return;const P=m.duration_hours*60+m.duration_minutes,N={date:Qa(l,"yyyy-MM-dd"),task_description:m.task_description,category_id:m.category_id||null,duration_minutes:P,comments:m.comments};f?await n(f,N):await r(N),d(!1)};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(ae,{variant:"outline",size:"icon",onClick:()=>o(BAe(i,1)),children:s.jsx(IW,{className:"h-4 w-4"})}),s.jsxs("span",{className:"text-sm font-medium",children:["Semaine du ",Qa(i,"d MMMM",{locale:ru})," au ",Qa(g,"d MMMM yyyy",{locale:ru})]}),s.jsx(ae,{variant:"outline",size:"icon",onClick:()=>o(IU(i,1)),children:s.jsx(Oh,{className:"h-4 w-4"})})]}),s.jsx("div",{className:"grid grid-cols-7 gap-2",children:p.map(P=>{const N=Qa(P,"yyyy-MM-dd"),E=x[N]||0,A=B_(P,l);return s.jsxs("button",{onClick:()=>c(P),className:`p-3 rounded-lg border text-center transition-colors ${A?"bg-primary text-primary-foreground border-primary":jAe(P)?"border-primary/50 bg-primary/5":"border-border hover:bg-muted"}`,children:[s.jsx("div",{className:"text-xs font-medium",children:Qa(P,"EEE",{locale:ru})}),s.jsx("div",{className:"text-lg font-bold",children:Qa(P,"d")}),E>0&&s.jsx("div",{className:`text-xs mt-1 ${A?"text-primary-foreground/80":"text-muted-foreground"}`,children:ww(E)})]},N)})}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold",children:Qa(l,"EEEE d MMMM yyyy",{locale:ru})}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(BS,{className:"h-3.5 w-3.5"}),"Total : ",ww(b)]})]}),s.jsxs(ae,{onClick:j,children:[s.jsx(ar,{className:"h-4 w-4 mr-1"})," Ajouter une tche"]})]}),s.jsx("div",{className:"border rounded overflow-auto",children:s.jsxs(Ht,{children:[s.jsx(qt,{children:s.jsxs(_e,{children:[s.jsx(ie,{children:"Catgorie"}),s.jsx(ie,{children:"Tche"}),s.jsx(ie,{className:"text-right",children:"Dure"}),s.jsx(ie,{children:"Commentaire"}),s.jsx(ie,{})]})}),s.jsxs(Kt,{children:[v.length===0&&s.jsx(_e,{children:s.jsx(W,{colSpan:5,className:"text-center text-muted-foreground py-8",children:'Aucune entre pour ce jour. Cliquez sur "Ajouter une tche".'})}),v.map(P=>{const N=_(P.category_id);return s.jsxs(_e,{children:[s.jsx(W,{children:N?s.jsxs(Oe,{variant:"outline",className:"gap-1.5",children:[s.jsx("div",{className:"w-2.5 h-2.5 rounded-full",style:{backgroundColor:N.color}}),N.name]}):s.jsx("span",{className:"text-muted-foreground",children:""})}),s.jsx(W,{className:"font-medium",children:P.task_description}),s.jsx(W,{className:"text-right font-mono-numbers",children:ww(P.duration_minutes)}),s.jsx(W,{className:"text-muted-foreground text-sm max-w-[200px] truncate",children:P.comments||""}),s.jsx(W,{children:s.jsxs("div",{className:"flex gap-1 justify-end",children:[s.jsx(ae,{variant:"ghost",size:"icon",onClick:()=>S(P),children:s.jsx(Ed,{className:"h-3 w-3"})}),s.jsx(ae,{variant:"ghost",size:"icon",onClick:()=>a(P.id),children:s.jsx(hr,{className:"h-3 w-3 text-destructive"})})]})})]},P.id)})]})]})}),s.jsx(Cr,{open:u,onOpenChange:d,children:s.jsxs(vr,{className:"max-w-md",children:[s.jsx(yr,{children:s.jsx(xr,{children:f?"Modifier la tche":"Nouvelle tche"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Ne,{children:"Tche *"}),s.jsx(be,{value:m.task_description,onChange:P=>y({...m,task_description:P.target.value}),placeholder:"Description de la tche..."})]}),s.jsxs("div",{children:[s.jsx(Ne,{children:"Catgorie"}),s.jsxs(st,{value:m.category_id||"none",onValueChange:P=>y({...m,category_id:P==="none"?"":P}),children:[s.jsx(at,{children:s.jsx(ot,{placeholder:"Slectionner..."})}),s.jsxs(it,{children:[s.jsx(Le,{value:"none",children:"Aucune"}),t.map(P=>s.jsx(Le,{value:P.id,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2.5 h-2.5 rounded-full",style:{backgroundColor:P.color}}),P.name]})},P.id))]})]})]}),s.jsxs("div",{children:[s.jsx(Ne,{children:"Dure"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(be,{type:"number",min:0,max:23,className:"w-20 text-right",value:m.duration_hours,onChange:P=>y({...m,duration_hours:parseInt(P.target.value)||0})}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"h"}),s.jsx(be,{type:"number",min:0,max:59,step:5,className:"w-20 text-right",value:m.duration_minutes,onChange:P=>y({...m,duration_minutes:parseInt(P.target.value)||0})}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"min"})]})]}),s.jsxs("div",{children:[s.jsx(Ne,{children:"Commentaire"}),s.jsx(vi,{value:m.comments,onChange:P=>y({...m,comments:P.target.value}),rows:2,placeholder:"Notes optionnelles..."})]})]}),s.jsx("div",{className:"flex justify-end mt-4",children:s.jsx(ae,{onClick:C,disabled:!m.task_description.trim(),children:f?"Mettre  jour":"Ajouter"})})]})})]})}const BOe=["#6366f1","#ef4444","#f59e0b","#10b981","#3b82f6","#8b5cf6","#ec4899","#14b8a6"];function FOe({categories:e,onCreateCategory:t,onUpdateCategory:r,onDeleteCategory:n}){const[a,i]=w.useState(!1),[o,l]=w.useState(null),[c,u]=w.useState(""),[d,f]=w.useState("#6366f1"),h=()=>{l(null),u(""),f("#6366f1"),i(!0)},m=g=>{l(g.id),u(g.name),f(g.color),i(!0)},y=async()=>{c.trim()&&(o?await r(o,{name:c,color:d}):await t(c,d),i(!1))};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Les catgories permettent de classer les tches. Seuls les rles admin et finance peuvent les grer."}),s.jsxs(ae,{onClick:h,children:[s.jsx(ar,{className:"h-4 w-4 mr-1"})," Nouvelle catgorie"]})]}),s.jsx("div",{className:"border rounded overflow-auto",children:s.jsxs(Ht,{children:[s.jsx(qt,{children:s.jsxs(_e,{children:[s.jsx(ie,{className:"w-12",children:"Couleur"}),s.jsx(ie,{children:"Nom"}),s.jsx(ie,{})]})}),s.jsxs(Kt,{children:[e.length===0&&s.jsx(_e,{children:s.jsx(W,{colSpan:3,className:"text-center text-muted-foreground py-8",children:"Aucune catgorie cre."})}),e.map(g=>s.jsxs(_e,{children:[s.jsx(W,{children:s.jsx("div",{className:"w-5 h-5 rounded-full",style:{backgroundColor:g.color}})}),s.jsx(W,{className:"font-medium",children:g.name}),s.jsx(W,{children:s.jsxs("div",{className:"flex gap-1 justify-end",children:[s.jsx(ae,{variant:"ghost",size:"icon",onClick:()=>m(g),children:s.jsx(Ed,{className:"h-3 w-3"})}),s.jsx(ae,{variant:"ghost",size:"icon",onClick:()=>n(g.id),children:s.jsx(hr,{className:"h-3 w-3 text-destructive"})})]})})]},g.id))]})]})}),s.jsx(Cr,{open:a,onOpenChange:i,children:s.jsxs(vr,{className:"max-w-sm",children:[s.jsx(yr,{children:s.jsx(xr,{children:o?"Modifier la catgorie":"Nouvelle catgorie"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Ne,{children:"Nom *"}),s.jsx(be,{value:c,onChange:g=>u(g.target.value),placeholder:"Ex: Dveloppement, Design..."})]}),s.jsxs("div",{children:[s.jsx(Ne,{children:"Couleur"}),s.jsx("div",{className:"flex gap-2 mt-2",children:BOe.map(g=>s.jsx("button",{className:`w-7 h-7 rounded-full border-2 transition-all ${d===g?"border-foreground scale-110":"border-transparent"}`,style:{backgroundColor:g},onClick:()=>f(g)},g))})]})]}),s.jsx("div",{className:"flex justify-end mt-4",children:s.jsx(ae,{onClick:y,disabled:!c.trim(),children:o?"Mettre  jour":"Crer"})})]})})]})}function zOe(){const e=DOe();return e.loading?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx(ui,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"page-title",children:"Suivi d'activit"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Enregistrez votre temps par jour et par tche"})]}),s.jsxs(xi,{defaultValue:"entries",className:"space-y-4",children:[s.jsxs(Fa,{children:[s.jsx(At,{value:"entries",children:" Mes entres"}),e.canManageCategories&&s.jsx(At,{value:"categories",children:" Catgories"})]}),s.jsx(Ft,{value:"entries",children:s.jsx(LOe,{entries:e.entries,categories:e.categories,onCreateEntry:e.createEntry,onUpdateEntry:e.updateEntry,onDeleteEntry:e.deleteEntry})}),e.canManageCategories&&s.jsx(Ft,{value:"categories",children:s.jsx(FOe,{categories:e.categories,onCreateCategory:e.createCategory,onUpdateCategory:e.updateCategory,onDeleteCategory:e.deleteCategory})})]})]})}const kR="novaride_financial_state_v5";function UOe(){const{user:e,isAdmin:t,getTabPermission:r}=xa(),[n,a]=w.useState([]),[i,o]=w.useState(!0),l=w.useCallback(()=>!!e,[e,t]),c=w.useCallback(async()=>{if(!e){o(!1);return}try{const{data:g}=await xe.from("snapshots").select("*").order("created_at",{ascending:!1});g&&a(g.map(p=>({id:p.id,name:p.name,comment:p.comment,createdAt:p.created_at,stateData:JSON.stringify(p.state_data)})))}catch{}finally{o(!1)}},[e]);w.useEffect(()=>{c()},[c]);const u=w.useCallback(async(g,p)=>{if(!e)return!1;try{const v=localStorage.getItem(kR);if(!v)return!1;const{data:x,error:b}=await xe.from("snapshots").insert({user_id:e.id,name:g,comment:p,state_data:JSON.parse(v)}).select().single();if(b||!x)return!1;const _=x;return a(j=>[{id:_.id,name:_.name,comment:_.comment,createdAt:_.created_at,stateData:JSON.stringify(_.state_data)},...j]),gn({title:"Sauvegarde cre"}),!0}catch{return!1}},[e]),d=w.useCallback(g=>{const p=n.find(v=>v.id===g);return p?(localStorage.setItem(kR,p.stateData),gn({title:"Restauration effectue"}),setTimeout(()=>window.location.reload(),500),!0):!1},[n]),f=w.useCallback(async g=>!1,[]),h=w.useCallback(async g=>e?(await xe.from("snapshots").delete().eq("id",g),a(p=>p.filter(v=>v.id!==g)),!0):!1,[e]),m=w.useCallback(async(g,p)=>!1,[]),y=g=>new Date(g).toLocaleDateString("fr-FR",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"});return{snapshots:n,isLoading:i,canManageSnapshots:l(),createSnapshot:u,restoreSnapshot:d,duplicateSnapshot:f,deleteSnapshot:h,renameSnapshot:m,formatDate:y}}function VOe(){const{snapshots:e,isLoading:t,createSnapshot:r,restoreSnapshot:n,deleteSnapshot:a,formatDate:i}=UOe(),{getTabPermission:o,isAdmin:l}=xa(),[c,u]=w.useState(""),[d,f]=w.useState(""),[h,m]=w.useState(!1),g=o("snapshots")==="write",p=async()=>{if(!c.trim()){gn({title:"Nom requis",variant:"destructive"});return}m(!0),await r(c.trim(),d.trim()||void 0)&&(u(""),f("")),m(!1)};return t?s.jsx("div",{className:"flex items-center justify-center py-20",children:s.jsx(ui,{className:"h-8 w-8 animate-spin text-primary"})}):s.jsx(Qi,{tabKey:"snapshots",children:s.jsxs("div",{className:"space-y-6",children:[s.jsx(Rs,{image:"rd",title:"Sauvegardes",subtitle:"Grez vos sauvegardes de scnarios financiers",height:"sm"}),g&&s.jsxs(Bt,{children:[s.jsxs(cr,{children:[s.jsxs(ur,{className:"flex items-center gap-2",children:[s.jsx(ar,{className:"h-5 w-5"}),"Nouvelle sauvegarde"]}),s.jsx(ps,{children:"Sauvegardez l'tat actuel de vos donnes financires"})]}),s.jsx(Wt,{children:s.jsxs("div",{className:"grid md:grid-cols-3 gap-4 items-end",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ne,{children:"Nom"}),s.jsx(be,{value:c,onChange:v=>u(v.target.value),placeholder:"Ex: Budget V2 valid"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ne,{children:"Commentaire (optionnel)"}),s.jsx(vi,{value:d,onChange:v=>f(v.target.value),placeholder:"Notes...",rows:1})]}),s.jsxs(ae,{onClick:p,disabled:h,children:[h?s.jsx(ui,{className:"h-4 w-4 mr-2 animate-spin"}):s.jsx(Gm,{className:"h-4 w-4 mr-2"}),"Sauvegarder"]})]})})]}),s.jsxs(Bt,{children:[s.jsxs(cr,{children:[s.jsxs(ur,{className:"flex items-center gap-2",children:[s.jsx(RI,{className:"h-5 w-5"}),"Sauvegardes existantes"]}),s.jsxs(ps,{children:[e.length," sauvegarde",e.length!==1?"s":""]})]}),s.jsx(Wt,{children:e.length===0?s.jsx("p",{className:"text-center text-muted-foreground py-8",children:"Aucune sauvegarde pour le moment"}):s.jsx("div",{className:"space-y-3",children:e.map(v=>s.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border bg-card hover:bg-accent/5 transition-colors",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:v.name}),s.jsx(Oe,{variant:"outline",className:"text-xs",children:i(v.createdAt)})]}),v.comment&&s.jsx("p",{className:"text-sm text-muted-foreground",children:v.comment})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[g&&s.jsxs(Sy,{children:[s.jsx(IT,{asChild:!0,children:s.jsxs(ae,{variant:"outline",size:"sm",children:[s.jsx(Ym,{className:"h-4 w-4 mr-1"}),"Charger"]})}),s.jsxs(Em,{children:[s.jsxs(Am,{children:[s.jsx(Tm,{children:"Restaurer cette sauvegarde ?"}),s.jsxs(Rm,{children:["Les donnes actuelles seront remplaces par  ",v.name," . Cette action rechargera la page."]})]}),s.jsxs(Om,{children:[s.jsx($m,{children:"Annuler"}),s.jsx(Mm,{onClick:()=>n(v.id),children:"Restaurer"})]})]})]}),l&&s.jsxs(Sy,{children:[s.jsx(IT,{asChild:!0,children:s.jsx(ae,{variant:"ghost",size:"sm",className:"text-destructive hover:text-destructive",children:s.jsx(hr,{className:"h-4 w-4"})})}),s.jsxs(Em,{children:[s.jsxs(Am,{children:[s.jsxs(Tm,{children:["Supprimer  ",v.name,"  ?"]}),s.jsx(Rm,{children:"Cette action est irrversible."})]}),s.jsxs(Om,{children:[s.jsx($m,{children:"Annuler"}),s.jsx(Mm,{onClick:()=>a(v.id),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Supprimer"})]})]})]})]})]},v.id))})})]})]})})}const jw="hsl(var(--muted-foreground))";function o8({products:e,productCategories:t,salesRules:r,calculateProductCost:n,computeChainFromPublicTTC:a,getEffectivePrice:i,editedOurPrices:o,pricingMode:l}){var b;const[c,u]=w.useState(l),[d,f]=w.useState(new Set([(b=r[0])==null?void 0:b.id].filter(Boolean))),[h,m]=w.useState(new Set(t.map(_=>_.id))),y=_=>{f(j=>{const S=new Set(j);return S.has(_)?S.delete(_):S.add(_),S})},g=_=>{m(j=>{const S=new Set(j);return S.has(_)?S.delete(_):S.add(_),S})},p=w.useMemo(()=>e.filter(_=>_.category_id?h.has(_.category_id):h.has("__uncategorized")),[e,h]),v=w.useMemo(()=>p.map(_=>{const j=n(_.id,_.default_volume||500),S=t.find(N=>N.id===_.category_id),C=(S==null?void 0:S.color)||jw,P={name:_.name.length>15?_.name.slice(0,14)+"":_.name,fullName:_.name,costPrice:j,catColor:C,categoryName:(S==null?void 0:S.name)||"Sans catgorie"};for(const N of r){if(!d.has(N.id))continue;const E=i(_),A=a(E,N);let T=0;c==="from_public"?T=(A==null?void 0:A.ourB2BPrice)||0:T=o[_.id]!==void 0?o[_.id]:(A==null?void 0:A.ourB2BPrice)||0;const R=j>0?(T-j)/j*100:0;P[`margin_${N.id}`]=parseFloat(R.toFixed(1))}return P}),[p,d,r,n,i,a,o,c]),x=r.filter(_=>d.has(_.id));return s.jsxs(Bt,{children:[s.jsxs(cr,{children:[s.jsx(ur,{className:"text-lg",children:"Analyse des marges par produit"}),s.jsx(ps,{children:"Comparez les marges selon les rgles de vente et catgories"})]}),s.jsxs(Wt,{className:"space-y-4",children:[s.jsxs("div",{className:"flex flex-wrap gap-6 items-start",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("span",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Mode tarification"}),s.jsxs(P0,{type:"single",value:c,onValueChange:_=>{_&&u(_)},className:"justify-start",children:[s.jsxs(Xl,{value:"from_public",className:"h-8 text-xs gap-1 data-[state=on]:bg-primary/10",children:[s.jsx(xj,{className:"h-3 w-3"}),"Option 1"]}),s.jsxs(Xl,{value:"from_our_price",className:"h-8 text-xs gap-1 data-[state=on]:bg-primary/10",children:[s.jsx(Ec,{className:"h-3 w-3"}),"Option 2"]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("span",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Rgles de vente"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:r.map(_=>s.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer",children:[s.jsx(hi,{checked:d.has(_.id),onCheckedChange:()=>y(_.id)}),s.jsx("span",{className:"text-sm",children:_.name}),s.jsx(Oe,{variant:"outline",className:"text-[10px] px-1 py-0",children:_.type.toUpperCase()})]},_.id))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("span",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Catgories"}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.map(_=>s.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer",children:[s.jsx(hi,{checked:h.has(_.id),onCheckedChange:()=>g(_.id)}),_.color&&s.jsx("div",{className:"h-2.5 w-2.5 rounded-full",style:{backgroundColor:_.color}}),s.jsx("span",{className:"text-sm",children:_.name})]},_.id)),e.some(_=>!_.category_id)&&s.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer",children:[s.jsx(hi,{checked:h.has("__uncategorized"),onCheckedChange:()=>g("__uncategorized")}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"Sans catgorie"})]})]})]})]}),v.length>0&&x.length>0?s.jsx("div",{className:"h-80",children:s.jsx(Wr,{width:"100%",height:"100%",children:s.jsxs(Ps,{data:v,margin:{top:10,right:10,left:0,bottom:40},children:[s.jsx(qr,{strokeDasharray:"3 3",opacity:.3}),s.jsx(mr,{dataKey:"name",tick:{fontSize:11},angle:-30,textAnchor:"end",height:60}),s.jsx(nr,{tickFormatter:_=>`${_}%`,tick:{fontSize:11}}),s.jsx($t,{formatter:(_,j)=>{const S=r.find(C=>`margin_${C.id}`===j);return[`${_.toFixed(1)}%`,(S==null?void 0:S.name)||j]},labelFormatter:(_,j)=>{var C;const S=(C=j==null?void 0:j[0])==null?void 0:C.payload;return(S==null?void 0:S.fullName)||_}}),s.jsx(d0,{y:0,stroke:"hsl(var(--destructive))",strokeDasharray:"3 3",strokeWidth:1.5}),x.map(_=>s.jsx(rr,{dataKey:`margin_${_.id}`,name:`margin_${_.id}`,fill:jw,radius:[3,3,0,0],maxBarSize:40,children:v.map((j,S)=>{const C=j[`margin_${_.id}`]??0;return s.jsx(ic,{fill:C<0?"hsl(var(--destructive))":j.catColor,fillOpacity:C<0?.8:1},S)})},_.id))]})})}):s.jsx("div",{className:"h-40 flex items-center justify-center text-muted-foreground text-sm",children:"Slectionnez au moins une rgle et une catgorie pour afficher le graphique."}),x.length>0&&s.jsxs("div",{className:"flex flex-wrap gap-4 justify-center text-xs",children:[t.filter(_=>h.has(_.id)).map(_=>s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("div",{className:"h-3 w-3 rounded-sm",style:{backgroundColor:_.color||jw}}),s.jsx("span",{children:_.name})]},_.id)),s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("div",{className:"h-3 w-3 rounded-sm bg-destructive opacity-80"}),s.jsx("span",{children:"Marge ngative"})]})]})]})]})}const ER=20;function WOe(){var kt;const{products:e,productCategories:t,references:r,bom:n,calculateProductCost:a,updateProduct:i}=HN(),[o,l]=w.useState("from_public"),[c,u]=w.useState(1.3),[d,f]=w.useState(1.8),[h,m]=w.useState([{id:"default-b2b",name:"B2B Standard",type:"b2b",tvaRate:20,intermediaries:[{label:"Distributeur",coefficient:1.3},{label:"Shop",coefficient:1.8}]},{id:"default-oem",name:"OEM",type:"oem",tvaRate:0,intermediaries:[{label:"Partenaire OEM",coefficient:1.4}]}]),[y,g]=w.useState("default-b2b"),[p,v]=w.useState(new Set),[x,b]=w.useState(!1),[_,j]=w.useState(""),[S,C]=w.useState("b2b"),[P,N]=w.useState({}),[E,A]=w.useState({}),[T,R]=w.useState({}),[k,O]=w.useState({}),[M,D]=w.useState("none"),[L,B]=w.useState(new Set),[z,Z]=w.useState(""),[ee,le]=w.useState(!1),[V,I]=w.useState(!1),[F,q]=w.useState(!1),[de,re]=w.useState(null),H=h.find(K=>K.id===y)||h[0],Y=()=>P[y]||{},G=()=>E[y]||{},J=()=>T[y]||{},ge=()=>k[y]||{},Ce=(K,oe)=>{N(ne=>({...ne,[y]:{...ne[y]||{},[K]:oe}}))},$e=(K,oe)=>{A(ne=>({...ne,[y]:{...ne[y]||{},[K]:oe}})),O(ne=>{const ke={...ne[y]||{}};return delete ke[K],{...ne,[y]:ke}})},Ge=(K,oe)=>{R(ne=>({...ne,[y]:{...ne[y]||{},[K]:oe}})),O(ne=>{const ke={...ne[y]||{}};return delete ke[K],{...ne,[y]:ke}})},dt=()=>({pricingMode:o,distributorCoef:c,shopCoef:d,salesRules:h,activeRuleId:y,editedPrices:P,editedOurPrices:E,editedFinalPrices:T,editedProductCoefs:k});w.useEffect(()=>{(async()=>{var ke,bt,Fe,wt,Nr,Ct,Pr,Gt,an;const{data:{user:oe}}=await xe.auth.getUser();if(!oe)return;const{data:ne}=await xe.from("pricing_config").select("config_data").eq("user_id",oe.id).maybeSingle();if(ne!=null&&ne.config_data){const Re=ne.config_data;if(Re.pricingMode&&l(Re.pricingMode),Re.distributorCoef!==void 0&&u(Re.distributorCoef),Re.shopCoef!==void 0&&f(Re.shopCoef),(ke=Re.salesRules)!=null&&ke.length&&m(Re.salesRules),Re.activeRuleId&&g(Re.activeRuleId),Re.editedPrices){const Xt=Object.keys(Re.editedPrices)[0];if(Xt&&typeof Re.editedPrices[Xt]=="object"&&!Array.isArray(Re.editedPrices[Xt]))N(Re.editedPrices);else if(Xt&&typeof Re.editedPrices[Xt]=="number"){const Vn=Re.activeRuleId||((Fe=(bt=Re.salesRules)==null?void 0:bt[0])==null?void 0:Fe.id)||"default-b2b";N({[Vn]:Re.editedPrices})}}if(Re.editedOurPrices){const Xt=Object.keys(Re.editedOurPrices)[0];if(Xt&&typeof Re.editedOurPrices[Xt]=="object"&&!Array.isArray(Re.editedOurPrices[Xt]))A(Re.editedOurPrices);else if(Xt&&typeof Re.editedOurPrices[Xt]=="number"){const Vn=Re.activeRuleId||((Nr=(wt=Re.salesRules)==null?void 0:wt[0])==null?void 0:Nr.id)||"default-b2b";A({[Vn]:Re.editedOurPrices})}}if(Re.editedFinalPrices){const Xt=Object.keys(Re.editedFinalPrices)[0];if(Xt&&typeof Re.editedFinalPrices[Xt]=="object"&&!Array.isArray(Re.editedFinalPrices[Xt]))R(Re.editedFinalPrices);else if(Xt&&typeof Re.editedFinalPrices[Xt]=="number"){const Vn=Re.activeRuleId||((Pr=(Ct=Re.salesRules)==null?void 0:Ct[0])==null?void 0:Pr.id)||"default-b2b";R({[Vn]:Re.editedFinalPrices})}}if(Re.editedProductCoefs){const Xt=Object.keys(Re.editedProductCoefs)[0];if(Xt&&Array.isArray(Re.editedProductCoefs[Xt])){const Vn=Re.activeRuleId||((an=(Gt=Re.salesRules)==null?void 0:Gt[0])==null?void 0:an.id)||"default-b2b";O({[Vn]:Re.editedProductCoefs})}else O(Re.editedProductCoefs)}}q(!0)})()},[]);const Rt=async()=>{I(!0);try{const{data:{user:K}}=await xe.auth.getUser();if(!K){Ee.error("Vous devez tre connect pour sauvegarder");return}const oe=dt(),{error:ne}=await xe.from("pricing_config").upsert({user_id:K.id,config_data:oe},{onConflict:"user_id"});if(ne)throw ne;Ee.success("Configuration pricing sauvegarde")}catch(K){Ee.error(`Erreur: ${K.message}`)}finally{I(!1)}},U=()=>{m(K=>K.map(oe=>{if(oe.id!==y)return oe;const ne=[...oe.intermediaries];return ne.length>=1&&(ne[0]={...ne[0],coefficient:c}),ne.length>=2&&(ne[1]={...ne[1],coefficient:d}),{...oe,intermediaries:ne}}))},X=w.useMemo(()=>{const K={},oe=[];for(const ne of e)ne.category_id?(K[ne.category_id]||(K[ne.category_id]=[]),K[ne.category_id].push(ne)):oe.push(ne);return{grouped:K,uncategorized:oe}},[e]),se=K=>{v(oe=>{const ne=new Set(oe);return ne.has(K)?ne.delete(K):ne.add(K),ne})},Q=K=>{const oe=Y();return oe[K.id]!==void 0?oe[K.id]:K.price_ttc},ce=(K,oe)=>{const ne=oe||H;if(!ne||K<=0)return null;const ke=(ne==null?void 0:ne.tvaRate)??ER,bt=K/(1+ke/100);let Fe=bt;const wt=[...ne.intermediaries].reverse();for(const Gt of wt)Fe=Fe/Gt.coefficient;const Nr=Fe,Ct=[];let Pr=Nr;for(const Gt of ne.intermediaries){const an=Pr*Gt.coefficient,Re=an-Pr,Xt=Pr>0?Re/Pr*100:0;Ct.push({label:Gt.label,buyPrice:Pr,coef:Gt.coefficient,sellPrice:an,margin:Re,marginPct:Xt}),Pr=an}return{chain:Ct,ourB2BPrice:Nr,prixPublicHT:bt,prixPublicTTC:K}},pe=(K,oe,ne)=>{if(!H||K<=0||oe<=0)return null;const ke=(H==null?void 0:H.tvaRate)??ER,bt=oe/(1+ke/100),Fe=bt/K,wt=H.intermediaries.length;if(Fe<=0)return null;if(wt===0)return{chain:[],ourB2BPrice:K,prixPublicHT:bt,prixPublicTTC:oe,totalCoef:Fe,coefs:[]};let Nr;if(ne&&ne.length===wt)Nr=ne;else{const Gt=Math.pow(Fe,1/wt);Nr=Array(wt).fill(Gt)}const Ct=[];let Pr=K;for(let Gt=0;Gt<wt;Gt++){const an=Pr*Nr[Gt],Re=an-Pr,Xt=Pr>0?Re/Pr*100:0;Ct.push({label:H.intermediaries[Gt].label,buyPrice:Pr,coef:Nr[Gt],sellPrice:an,margin:Re,marginPct:Xt}),Pr=an}return{chain:Ct,ourB2BPrice:K,prixPublicHT:bt,prixPublicTTC:oe,totalCoef:Fe,coefs:Nr}},fe=(K,oe,ne,ke)=>{if(((H==null?void 0:H.intermediaries.length)||1)<=1){O(Ct=>({...Ct,[y]:{...Ct[y]||{},[K]:[ke]}}));return}const Fe=Math.max(1.01,Math.min(ne,ke/1.01)),wt=ke/Fe,Nr=oe===0?[Fe,wt]:[wt,Fe];O(Ct=>({...Ct,[y]:{...Ct[y]||{},[K]:Nr}}))},ye=w.useCallback(async(K,oe)=>{await i(K,{price_ttc:oe}),N(ne=>{const ke={...ne[y]||{}};return delete ke[K],{...ne,[y]:ke}}),A(ne=>{const ke={...ne[y]||{}};return delete ke[K],{...ne,[y]:ke}})},[i,y]),Pe=async()=>{const K=parseFloat(z);if(isNaN(K)||K<0)return;const oe=Array.from(L).map(ne=>i(ne,{price_ttc:K}));await Promise.all(oe),Ee.success(`Prix ${K.toFixed(2)}  appliqu  ${L.size} produit(s)`),B(new Set),Z(""),le(!1),N(ne=>({...ne,[y]:{}})),A(ne=>({...ne,[y]:{}})),R(ne=>({...ne,[y]:{}})),O(ne=>({...ne,[y]:{}}))},tt=K=>{B(oe=>{const ne=new Set(oe);return ne.has(K)?ne.delete(K):ne.add(K),ne})},Ke=K=>{const oe=K==="__uncategorized"?X.uncategorized:X.grouped[K]||[],ne=oe.every(ke=>L.has(ke.id));B(ke=>{const bt=new Set(ke);return oe.forEach(Fe=>{ne?bt.delete(Fe.id):bt.add(Fe.id)}),bt})},pt=()=>{if(!_.trim())return;const K=S==="b2c"?[]:S==="oem"?[{label:"Partenaire OEM",coefficient:1.4}]:[{label:"Distributeur",coefficient:c},{label:"Shop",coefficient:d}],oe={id:`rule-${Date.now()}`,name:_.trim(),type:S,tvaRate:20,intermediaries:K};m(ne=>[...ne,oe]),g(oe.id),b(!1),j("")},he=()=>{var K;if(de){if(m(oe=>oe.filter(ne=>ne.id!==de)),N(oe=>{const ne={...oe};return delete ne[de],ne}),A(oe=>{const ne={...oe};return delete ne[de],ne}),R(oe=>{const ne={...oe};return delete ne[de],ne}),O(oe=>{const ne={...oe};return delete ne[de],ne}),y===de){const oe=h.filter(ne=>ne.id!==de);g(((K=oe[0])==null?void 0:K.id)||"")}re(null),Ee.success("Rgle supprime")}},Ue=(K,oe,ne,ke)=>{m(bt=>bt.map(Fe=>{if(Fe.id!==K)return Fe;const wt=[...Fe.intermediaries];return ne==="coefficient"?wt[oe]={...wt[oe],coefficient:Number(ke)||1}:wt[oe]={...wt[oe],label:String(ke)},{...Fe,intermediaries:wt}}))},_t=K=>{m(oe=>oe.map(ne=>{if(ne.id!==K)return ne;const ke=ne.type==="b2c"?0:ne.type==="oem"?1:2;return ne.intermediaries.length>=ke?ne:{...ne,intermediaries:[...ne.intermediaries,{label:"Intermdiaire",coefficient:1.3}]}}))},xt=(K,oe)=>{m(ne=>ne.map(ke=>ke.id!==K||ke.intermediaries.length<=0?ke:{...ke,intermediaries:ke.intermediaries.filter((bt,Fe)=>Fe!==oe)}))},Xe=K=>K.toLocaleString("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2}),lt=K=>{const oe=a(K.id,K.default_volume||500);if(oe<=0)return null;if(o==="from_public"){const ne=Q(K),ke=ce(ne);return ke?(ke.ourB2BPrice-oe)/oe*100:null}else{const ne=Q(K),ke=ce(ne),bt=G(),Fe=bt[K.id]!==void 0?bt[K.id]:(ke==null?void 0:ke.ourB2BPrice)||0;return Fe<=0?null:(Fe-oe)/oe*100}},Lr=K=>K<0?"text-destructive font-semibold":"text-muted-foreground",Kr=K=>{const oe=a(K.id,K.default_volume||500),ne=L.has(K.id),ke=Y(),bt=G(),Fe=J(),wt=ge();if(o==="from_public"){const Nr=Q(K),Ct=ce(Nr),Pr=ke[K.id]!==void 0;return s.jsxs(_e,{className:ne?"bg-primary/5":"",children:[s.jsx(W,{className:"w-10",children:s.jsx(hi,{checked:ne,onCheckedChange:()=>tt(K.id)})}),s.jsx(W,{className:"font-medium",children:K.name}),s.jsx(W,{className:"text-right font-mono text-sm",children:oe>0?`${Xe(oe)} `:""}),s.jsx(W,{className:"text-right font-mono text-sm font-semibold text-primary",children:Ct?`${Xe(Ct.ourB2BPrice)} `:""}),H==null?void 0:H.intermediaries.map((Gt,an)=>{const Re=Ct==null?void 0:Ct.chain[an];return s.jsx(W,{className:"text-right font-mono text-sm",children:Re?s.jsxs("span",{className:"text-muted-foreground",children:[Xe(Re.buyPrice),"  ",s.jsxs("span",{className:"text-foreground",children:[Xe(Re.sellPrice)," "]}),s.jsxs("span",{className:"text-xs ml-1 opacity-60",children:["(",Re.coef,")"]})]}):""},an)}),s.jsx(W,{className:"text-right font-mono text-sm",children:Ct?`${Xe(Ct.prixPublicHT)} `:""}),s.jsx(W,{className:"w-36",children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(be,{type:"number",step:"0.01",className:"h-8 text-sm font-mono w-24 text-right border-primary/30 bg-primary/5",value:Nr||"",onChange:Gt=>{const an=parseFloat(Gt.target.value);Ce(K.id,isNaN(an)?0:an)},placeholder:"0.00"}),s.jsx("span",{className:"text-xs text-muted-foreground",children:""})]})}),s.jsx(W,{className:`text-right font-mono text-sm ${(()=>{if(!Ct||oe<=0)return"text-muted-foreground";const Gt=(Ct.ourB2BPrice-oe)/oe*100;return Lr(Gt)})()}`,children:Ct&&oe>0?`${Xe((Ct.ourB2BPrice-oe)/oe*100)}%`:""}),s.jsx(W,{className:"w-10",children:Pr&&s.jsx(ae,{variant:"ghost",size:"icon",className:"h-7 w-7 text-primary",onClick:()=>ye(K.id,ke[K.id]),title:"Enregistrer",children:s.jsx(So,{className:"h-3.5 w-3.5"})})})]},K.id)}else{const Nr=Q(K),Ct=Fe[K.id]!==void 0?Fe[K.id]:Nr||0,Pr=ce(Nr),Gt=bt[K.id]!==void 0?bt[K.id]:(Pr==null?void 0:Pr.ourB2BPrice)||0,an=wt[K.id],Re=pe(Gt,Ct,an),Xt=bt[K.id]!==void 0||Fe[K.id]!==void 0||wt[K.id]!==void 0;return s.jsxs(_e,{className:ne?"bg-primary/5":"",children:[s.jsx(W,{className:"w-10",children:s.jsx(hi,{checked:ne,onCheckedChange:()=>tt(K.id)})}),s.jsx(W,{className:"font-medium",children:K.name}),s.jsx(W,{className:"text-right font-mono text-sm",children:oe>0?`${Xe(oe)} `:""}),s.jsx(W,{className:"w-36",children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(be,{type:"number",step:"0.01",className:"h-8 text-sm font-mono w-24 text-right border-primary/30 bg-primary/5",value:Gt||"",onChange:Vn=>{const wi=parseFloat(Vn.target.value);$e(K.id,isNaN(wi)?0:wi)},placeholder:"0.00"}),s.jsx("span",{className:"text-xs text-muted-foreground",children:""})]})}),H==null?void 0:H.intermediaries.map((Vn,wi)=>{const B0=Re==null?void 0:Re.chain[wi],l8=(Re==null?void 0:Re.coefs[wi])||1;return s.jsx(W,{className:"font-mono text-sm",children:B0?s.jsxs("div",{className:"flex flex-col items-end gap-0.5",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"text-xs text-muted-foreground",children:""}),s.jsx(be,{type:"number",step:"0.01",min:"1.01",className:"h-7 text-xs font-mono w-16 text-right",value:Number(l8.toFixed(4)),onChange:c8=>{const XN=parseFloat(c8.target.value);!isNaN(XN)&&Re&&fe(K.id,wi,XN,Re.totalCoef)}})]}),s.jsxs("span",{className:"text-[10px] text-muted-foreground",children:[Xe(B0.buyPrice),"  ",Xe(B0.sellPrice)," "]})]}):""},wi)}),s.jsx(W,{className:"text-right font-mono text-sm",children:Re?`${Xe(Re.prixPublicHT)} `:""}),s.jsx(W,{className:"w-36",children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(be,{type:"number",step:"0.01",className:"h-8 text-sm font-mono w-24 text-right border-primary/30 bg-primary/5",value:Ct||"",onChange:Vn=>{const wi=parseFloat(Vn.target.value);Ge(K.id,isNaN(wi)?0:wi)},placeholder:"0.00"}),s.jsx("span",{className:"text-xs text-muted-foreground",children:""})]})}),s.jsx(W,{className:"text-right font-mono text-sm text-muted-foreground",children:Re?`${Re.totalCoef.toFixed(2)}`:""}),s.jsx(W,{className:`text-right font-mono text-sm ${(()=>{if(!Re||oe<=0)return"text-muted-foreground";const Vn=(Gt-oe)/oe*100;return Lr(Vn)})()}`,children:Re&&oe>0?`${Xe((Gt-oe)/oe*100)}%`:""}),s.jsx(W,{className:"w-10",children:Xt&&Ct>0&&s.jsx(ae,{variant:"ghost",size:"icon",className:"h-7 w-7 text-primary",onClick:()=>ye(K.id,Ct),title:"Enregistrer",children:s.jsx(So,{className:"h-3.5 w-3.5"})})})]},K.id)}},cc=()=>{D(K=>K==="none"?"asc":K==="asc"?"desc":"none")},uc=K=>M==="none"?K:[...K].sort((oe,ne)=>{const ke=lt(oe)??-1/0,bt=lt(ne)??-1/0;return M==="asc"?ke-bt:bt-ke}),Ls=(K,oe)=>{const ne=K.length>0&&K.every(Fe=>L.has(Fe.id)),ke=K.some(Fe=>L.has(Fe.id)),bt=uc(K);return s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Ht,{children:[s.jsx(qt,{children:s.jsxs(_e,{children:[s.jsx(ie,{className:"w-10",children:s.jsx(hi,{checked:ne,onCheckedChange:()=>Ke(oe),className:ke&&!ne?"opacity-50":""})}),s.jsx(ie,{children:"Produit"}),s.jsx(ie,{className:"text-right",children:"Cot revient"}),o==="from_public"?s.jsxs(s.Fragment,{children:[s.jsxs(ie,{className:"text-right",children:["Notre prix HT ",s.jsx("span",{className:"text-xs opacity-60",children:"(calcul)"})]}),H==null?void 0:H.intermediaries.map((Fe,wt)=>s.jsx(ie,{className:"text-right",children:Fe.label},wt)),s.jsx(ie,{className:"text-right",children:"Prix Public HT"}),s.jsx(ie,{className:"text-right",children:s.jsxs("span",{className:"flex items-center justify-end gap-1",children:[s.jsx(Ec,{className:"h-3 w-3 text-primary"}),"Prix Public TTC"]})})]}):s.jsxs(s.Fragment,{children:[s.jsx(ie,{className:"text-right",children:s.jsxs("span",{className:"flex items-center justify-end gap-1",children:[s.jsx(Ec,{className:"h-3 w-3 text-primary"}),"Notre prix HT"]})}),H==null?void 0:H.intermediaries.map((Fe,wt)=>s.jsxs(ie,{className:"text-right",children:[Fe.label," ",s.jsx("span",{className:"text-xs opacity-60",children:"(coef)"})]},wt)),s.jsx(ie,{className:"text-right",children:"Prix Public HT"}),s.jsx(ie,{className:"text-right",children:s.jsxs("span",{className:"flex items-center justify-end gap-1",children:[s.jsx(Ec,{className:"h-3 w-3 text-primary"}),"Prix Public TTC"]})}),s.jsx(ie,{className:"text-right",children:"Coef total"})]}),s.jsx(ie,{className:"text-right",children:s.jsxs("button",{className:"inline-flex items-center gap-1 hover:text-primary transition-colors cursor-pointer",onClick:cc,children:["Notre marge",M==="none"&&s.jsx(TW,{className:"h-3 w-3 opacity-40"}),M==="asc"&&s.jsx(xj,{className:"h-3 w-3 text-primary"}),M==="desc"&&s.jsx(Ec,{className:"h-3 w-3 text-primary"})]})}),s.jsx(ie,{className:"w-10"})]})}),s.jsx(Kt,{children:bt.map(Kr)})]})})},ba=()=>{const K=Y(),oe=G(),ne=J(),ke=ge();return o==="from_public"?Object.keys(K).length>0:Object.keys(oe).length>0||Object.keys(ne).length>0||Object.keys(ke).length>0},af=async()=>{if(o==="from_public"){const K=Y(),oe=Object.entries(K).map(([ne,ke])=>i(ne,{price_ttc:ke}));await Promise.all(oe),Ee.success(`${Object.keys(K).length} prix mis  jour pour "${H==null?void 0:H.name}"`),N(ne=>({...ne,[y]:{}}))}else{const K=G(),oe=J(),ne=ge(),ke=new Set([...Object.keys(K),...Object.keys(oe),...Object.keys(ne)]),bt=Array.from(ke).map(Fe=>{var Nr;const wt=oe[Fe]!==void 0?oe[Fe]:((Nr=e.find(Ct=>Ct.id===Fe))==null?void 0:Nr.price_ttc)||0;return wt>0?i(Fe,{price_ttc:wt}):Promise.resolve()});await Promise.all(bt),Ee.success(`${ke.size} prix mis  jour pour "${H==null?void 0:H.name}"`),A(Fe=>({...Fe,[y]:{}})),R(Fe=>({...Fe,[y]:{}})),O(Fe=>({...Fe,[y]:{}}))}};w.useMemo(()=>{let K=0;for(const oe of Object.keys(P))K+=Object.keys(P[oe]||{}).length;for(const oe of Object.keys(E))K+=Object.keys(E[oe]||{}).length;for(const oe of Object.keys(T))K+=Object.keys(T[oe]||{}).length;return K},[P,E,T]);const rt=K=>{const oe=Object.keys(P[K]||{}).length,ne=Object.keys(E[K]||{}).length,ke=Object.keys(T[K]||{}).length;return oe+ne+ke};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Pricing"}),s.jsx("p",{className:"text-muted-foreground",children:"Stratgie tarifaire, chane de distribution et marges par produit"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(ae,{onClick:Rt,disabled:V,variant:"default",size:"sm",children:[V?s.jsx(ui,{className:"h-4 w-4 mr-1 animate-spin"}):s.jsx(Gm,{className:"h-4 w-4 mr-1"}),"Sauvegarder Config"]}),L.size>0&&s.jsxs(Cr,{open:ee,onOpenChange:le,children:[s.jsx(pd,{asChild:!0,children:s.jsxs(ae,{variant:"outline",size:"sm",children:[s.jsx(wj,{className:"h-4 w-4 mr-1"}),"Appliquer un prix (",L.size,")"]})}),s.jsxs(vr,{children:[s.jsx(yr,{children:s.jsxs(xr,{children:["Appliquer un prix  ",L.size," produit(s)"]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Produits slectionns :",s.jsx("ul",{className:"mt-1 list-disc pl-4",children:Array.from(L).map(K=>{const oe=e.find(ne=>ne.id===K);return oe?s.jsx("li",{children:oe.name},K):null})})]}),s.jsxs("div",{children:[s.jsx(Ne,{children:o==="from_public"?"Prix Public TTC ()":"Notre Prix de Vente HT ()"}),s.jsx(be,{type:"number",step:"0.01",value:z,onChange:K=>Z(K.target.value),placeholder:"Ex: 299.00",className:"font-mono"})]}),s.jsxs(ae,{onClick:Pe,className:"w-full",children:["Appliquer  ",L.size," produit(s)"]})]})]})]})]})]}),s.jsxs(Bt,{children:[s.jsxs(cr,{className:"pb-3",children:[s.jsx(ur,{className:"text-lg",children:"Mode de tarification"}),s.jsx(ps,{children:"Choisissez votre point de dpart pour fixer les prix"})]}),s.jsx(Wt,{children:s.jsxs(P0,{type:"single",value:o,onValueChange:K=>{K&&l(K)},className:"justify-start",children:[s.jsxs(Xl,{value:"from_public",className:"flex items-center gap-2 px-4 py-3 h-auto data-[state=on]:bg-primary/10 data-[state=on]:border-primary",children:[s.jsx(xj,{className:"h-4 w-4"}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"font-semibold text-sm",children:"Option 1  Depuis le prix public"}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Fixer le prix TTC client final  notre prix de vente est calcul en remontant la chane"})]})]}),s.jsxs(Xl,{value:"from_our_price",className:"flex items-center gap-2 px-4 py-3 h-auto data-[state=on]:bg-primary/10 data-[state=on]:border-primary",children:[s.jsx(Ec,{className:"h-4 w-4"}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"font-semibold text-sm",children:"Option 2  Prix fixs aux deux extrmits"}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Fixer notre prix HT + le prix client TTC  les coefficients intermdiaires sont calculs et lis"})]})]})]})})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[s.jsxs(Bt,{children:[s.jsx(cr,{className:"pb-3",children:s.jsxs(ur,{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(Mu,{className:"h-4 w-4"}),"Coef. Distributeur"]})}),s.jsx(Wt,{children:s.jsx(be,{type:"number",step:"0.01",value:c,onChange:K=>u(Number(K.target.value)||1),onBlur:U,className:"font-mono"})})]}),s.jsxs(Bt,{children:[s.jsx(cr,{className:"pb-3",children:s.jsxs(ur,{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(Mu,{className:"h-4 w-4"}),"Coef. Shop"]})}),s.jsx(Wt,{children:s.jsx(be,{type:"number",step:"0.01",value:d,onChange:K=>f(Number(K.target.value)||1),onBlur:U,className:"font-mono"})})]}),s.jsxs(Bt,{children:[s.jsx(cr,{className:"pb-3",children:s.jsxs(ur,{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(zS,{className:"h-4 w-4"}),"TVA"]})}),s.jsxs(Wt,{children:[s.jsxs("div",{className:"text-lg font-mono font-semibold",children:[(H==null?void 0:H.tvaRate)??20," %"]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Dfini dans la rgle active"})]})]}),s.jsxs(Bt,{children:[s.jsx(cr,{className:"pb-3",children:s.jsx(ur,{className:"text-sm font-medium",children:"Chane active"})}),s.jsx(Wt,{children:s.jsx("div",{className:"text-xs text-muted-foreground",children:o==="from_public"?`Client final  ${[...(H==null?void 0:H.intermediaries)||[]].reverse().map(K=>K.label).join("  ")}  Nous`:`Nous  ${H==null?void 0:H.intermediaries.map(K=>K.label).join("  ")}  Client final`})})]})]}),s.jsxs(Bt,{children:[s.jsx(cr,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(ur,{className:"text-lg",children:"Rgles de vente"}),s.jsx(ps,{children:"Configurez les canaux de distribution et leurs intermdiaires. Chaque rgle a ses propres prix par catgorie."})]}),s.jsxs(Cr,{open:x,onOpenChange:b,children:[s.jsx(pd,{asChild:!0,children:s.jsxs(ae,{size:"sm",variant:"outline",children:[s.jsx(ar,{className:"h-4 w-4 mr-1"}),"Nouvelle rgle"]})}),s.jsxs(vr,{children:[s.jsx(yr,{children:s.jsx(xr,{children:"Nouvelle rgle de vente"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Ne,{children:"Nom"}),s.jsx(be,{value:_,onChange:K=>j(K.target.value),placeholder:"Ex: B2B Europe"})]}),s.jsxs("div",{children:[s.jsx(Ne,{children:"Type"}),s.jsxs(st,{value:S,onValueChange:K=>C(K),children:[s.jsx(at,{children:s.jsx(ot,{})}),s.jsxs(it,{children:[s.jsx(Le,{value:"b2b",children:"B2B (max 2 intermdiaires)"}),s.jsx(Le,{value:"oem",children:"OEM (max 1 intermdiaire)"}),s.jsx(Le,{value:"b2c",children:"B2C (vente directe)"})]})]})]}),s.jsx(ae,{onClick:pt,className:"w-full",children:"Crer"})]})]})]})]})}),s.jsxs(Wt,{className:"space-y-4",children:[s.jsx("div",{className:"flex flex-wrap gap-2",children:h.map(K=>{const oe=rt(K.id);return s.jsxs(Oe,{variant:K.id===y?"default":"outline",className:"cursor-pointer text-sm py-1.5 px-3 relative",onClick:()=>g(K.id),children:[K.name,s.jsxs("span",{className:"ml-1 text-xs opacity-60",children:["(",K.type.toUpperCase(),")"]}),oe>0&&s.jsx("span",{className:"ml-1.5 inline-flex items-center justify-center h-4 w-4 rounded-full bg-primary text-primary-foreground text-[10px] font-bold",children:oe})]},K.id)})}),H&&s.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(be,{value:H.name,onChange:K=>m(oe=>oe.map(ne=>ne.id===H.id?{...ne,name:K.target.value}:ne)),className:"h-8 text-sm font-semibold w-48"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Oe,{variant:"secondary",children:H.type==="b2c"?"Vente directe":H.type==="oem"?"Max 1 intermdiaire":"Max 2 intermdiaires"}),h.length>1&&s.jsx(ae,{variant:"ghost",size:"icon",className:"h-7 w-7 text-destructive",onClick:()=>re(H.id),children:s.jsx(hr,{className:"h-3.5 w-3.5"})})]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(Oe,{variant:"outline",className:"bg-primary/5",children:"Nous"}),H.intermediaries.map((K,oe)=>s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsxs(Oe,{variant:"outline",children:[K.label," (",K.coefficient,")"]})]},oe)),s.jsx("span",{children:""}),s.jsx(Oe,{variant:"outline",className:"bg-primary/5",children:"Client final"})]}),s.jsx(Dy,{}),s.jsx("div",{className:"flex items-end gap-3 mb-2",children:s.jsxs("div",{className:"w-40",children:[s.jsx(Ne,{className:"text-xs",children:"Taux de TVA"}),s.jsxs(st,{value:String(H.tvaRate),onValueChange:K=>m(oe=>oe.map(ne=>ne.id===H.id?{...ne,tvaRate:Number(K)}:ne)),children:[s.jsx(at,{className:"h-8 text-sm font-mono",children:s.jsx(ot,{})}),s.jsxs(it,{children:[s.jsx(Le,{value:"20",children:"20 %"}),s.jsx(Le,{value:"0",children:"0 % (exonr)"})]})]})]})}),s.jsxs("div",{className:"space-y-3",children:[H.intermediaries.map((K,oe)=>s.jsxs("div",{className:"flex items-end gap-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs(Ne,{className:"text-xs",children:["Nom intermdiaire ",oe+1]}),s.jsx(be,{value:K.label,onChange:ne=>Ue(H.id,oe,"label",ne.target.value),className:"h-8 text-sm"})]}),s.jsxs("div",{className:"w-28",children:[s.jsx(Ne,{className:"text-xs",children:"Coefficient"}),s.jsx(be,{type:"number",step:"0.01",value:K.coefficient,onChange:ne=>Ue(H.id,oe,"coefficient",ne.target.value),className:"h-8 text-sm font-mono"})]}),H.intermediaries.length>1&&s.jsx(ae,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive",onClick:()=>xt(H.id,oe),children:s.jsx(hr,{className:"h-3.5 w-3.5"})})]},oe)),H.intermediaries.length<(H.type==="b2c"?0:H.type==="oem"?1:2)&&s.jsxs(ae,{variant:"outline",size:"sm",onClick:()=>_t(H.id),children:[s.jsx(ar,{className:"h-3.5 w-3.5 mr-1"}),"Ajouter intermdiaire"]})]})]})]})]}),s.jsx(o8,{products:e,productCategories:t,salesRules:h,calculateProductCost:a,computeChainFromPublicTTC:ce,getEffectivePrice:Q,editedOurPrices:G(),pricingMode:o}),s.jsxs(Bt,{children:[s.jsx(cr,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(ur,{className:"text-lg flex items-center gap-2",children:[s.jsx(Fl,{className:"h-5 w-5"}),"Dtail des prix par catgorie  ",s.jsx("span",{className:"text-primary",children:H==null?void 0:H.name})]}),s.jsx(ps,{children:o==="from_public"?`Fixez le prix public TTC  notre prix de vente est calcul via la chane "${H==null?void 0:H.name}"`:`Fixez notre prix HT et le prix client TTC  les coefficients intermdiaires sont rpartis via "${H==null?void 0:H.name}"`})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[ba()&&s.jsxs(ae,{onClick:af,size:"sm",variant:"outline",children:[s.jsx(So,{className:"h-4 w-4 mr-1"}),"Enregistrer les prix (",H==null?void 0:H.name,")"]}),L.size>0&&s.jsxs("div",{className:"text-sm text-muted-foreground",children:[L.size," produit(s) slectionn(s)"]})]})]})}),s.jsx(Wt,{children:s.jsxs("div",{className:"space-y-4",children:[t.map(K=>{const oe=X.grouped[K.id]||[];if(oe.length===0)return null;const ne=p.has(K.id);return s.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[s.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-muted/50 transition-colors text-left",onClick:()=>se(K.id),children:[ne?s.jsx(Ah,{className:"h-4 w-4"}):s.jsx(Oh,{className:"h-4 w-4"}),s.jsx("div",{className:"h-3 w-3 rounded-full",style:{backgroundColor:K.color}}),s.jsx("span",{className:"font-semibold",children:K.name}),s.jsxs(Oe,{variant:"secondary",className:"ml-auto",children:[oe.length," produit",oe.length>1?"s":""]})]}),ne&&Ls(oe,K.id)]},K.id)}),X.uncategorized.length>0&&s.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[s.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-muted/50 transition-colors text-left",onClick:()=>se("__uncategorized"),children:[p.has("__uncategorized")?s.jsx(Ah,{className:"h-4 w-4"}):s.jsx(Oh,{className:"h-4 w-4"}),s.jsx("span",{className:"font-semibold text-muted-foreground",children:"Sans catgorie"}),s.jsx(Oe,{variant:"secondary",className:"ml-auto",children:X.uncategorized.length})]}),p.has("__uncategorized")&&Ls(X.uncategorized,"__uncategorized")]}),e.length===0&&s.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[s.jsx(Fl,{className:"h-12 w-12 mx-auto mb-4 opacity-30"}),s.jsx("p",{children:"Aucun produit configur. Ajoutez des produits dans le module Production et BE."})]})]})})]}),s.jsx(Sy,{open:!!de,onOpenChange:K=>{K||re(null)},children:s.jsxs(Em,{children:[s.jsxs(Am,{children:[s.jsx(Tm,{children:"Supprimer cette rgle de vente ?"}),s.jsxs(Rm,{children:["La rgle  ",(kt=h.find(K=>K.id===de))==null?void 0:kt.name,"  et tous ses prix associs seront dfinitivement supprims. Cette action est irrversible."]})]}),s.jsxs(Om,{children:[s.jsx($m,{children:"Annuler"}),s.jsx(Mm,{onClick:he,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Supprimer"})]})]})})]})}function HOe(){return s.jsx(Qi,{tabKey:"costflow",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Planning Dveloppement"}),s.jsx("p",{className:"text-muted-foreground",children:"Planification du dveloppement produit et suivi des phases"})]}),s.jsx(s8,{})]})})}function qOe(){const{toast:e}=$S(),{user:t}=xa(),[r,n]=w.useState([]),[a,i]=w.useState([]),[o,l]=w.useState([]),[c,u]=w.useState([]),[d,f]=w.useState([]),[h,m]=w.useState(!0),y=w.useCallback(async()=>{if(!t){m(!1);return}try{m(!0);const[b,_]=await Promise.all([xe.from("customers").select("*").order("company_name"),xe.from("customer_orders").select("*").order("order_date",{ascending:!1})]);b.data&&n(b.data),_.data&&u(_.data)}catch{}finally{m(!1)}},[t]);w.useEffect(()=>{y()},[y]);const g=w.useCallback(async b=>{if(!t)return null;try{const{data:_,error:j}=await xe.from("customers").insert({...b,user_id:t.id}).select().single();if(j)throw j;const S=_;return n(C=>[...C,S].sort((P,N)=>P.company_name.localeCompare(N.company_name))),e({title:"Client cr",description:`${S.company_name} ajout.`}),S}catch(_){return console.error("Failed to create customer:",_),e({title:"Erreur",description:"Impossible de crer le client.",variant:"destructive"}),null}},[t,e]),p=w.useCallback(async(b,_)=>{if(!t)return!1;try{const{error:j}=await xe.from("customers").update(_).eq("id",b);if(j)throw j;return n(S=>S.map(C=>C.id===b?{...C,..._,updated_at:new Date().toISOString()}:C)),e({title:"Client mis  jour"}),!0}catch(j){return console.error("Failed to update customer:",j),e({title:"Erreur",description:"Impossible de mettre  jour le client.",variant:"destructive"}),!1}},[t,e]),v=w.useCallback(async b=>{if(!t)return!1;try{const{error:_}=await xe.from("customers").delete().eq("id",b);if(_)throw _;return n(j=>j.filter(S=>S.id!==b)),e({title:"Client supprim"}),!0}catch(_){return console.error("Failed to delete customer:",_),e({title:"Erreur",description:"Impossible de supprimer le client.",variant:"destructive"}),!1}},[t,e]),x=w.useCallback(async b=>{if(!t)return null;try{const{data:_,error:j}=await xe.from("customer_orders").insert({...b,user_id:t.id}).select().single();if(j)throw j;const S=_;return u(C=>[S,...C]),e({title:"Commande cre"}),S}catch(_){return console.error("Failed to create order:",_),e({title:"Erreur",description:"Impossible de crer la commande.",variant:"destructive"}),null}},[t,e]);return{customers:r,interactions:a,appointments:o,orders:c,pricingTiers:d,isLoading:h,refreshData:y,createCustomer:g,updateCustomer:p,deleteCustomer:v,createOrder:x,getCustomerInteractions:b=>a.filter(_=>_.customer_id===b),getCustomerAppointments:b=>o.filter(_=>_.customer_id===b),getCustomerOrders:b=>c.filter(_=>_.customer_id===b)}}const KOe="/assets/banner-nrc-udh-CghFnth9.jpg",YOe="/assets/savoir-faire-DO6sqzLN.jpg",GOe="/assets/ccd-gold-Cg4R7WZE.jpg",XOe="/assets/pulley-wheels-O2SueKz_.jpg",QOe="/assets/composants-hero-CnGsZ9u8.jpg",JOe="/assets/novaride-action-BP9cu6ww.jpg",ZOe=["Jan","Fv","Mar","Avr","Mai","Jun","Jul","Ao","Sep","Oct","Nov","Dc"];function e2e(){const{products:e,references:t,productCategories:r,suppliers:n,bom:a,calculateProductCost:i}=HN(),{rows:o,blocks:l,colors:c}=VU(),{customers:u,orders:d}=qOe(),{salesRules:f,pricingMode:h,activeRuleId:m,editedOurPrices:y,getEffectivePrice:g,computeChainFromPublicTTC:p,loaded:v}=Lz(),x=e.length,b=t.length,_=n.length,j=r.length,S=u.length,C=d.filter(R=>["draft","confirmed","in_progress"].includes(R.status)).length;a.length;const P=new Date().getMonth(),N=P+1,E=l.filter(R=>R.start_month<=N&&R.start_month+R.duration-1>=N),A=w.useMemo(()=>{const R=[];for(let k=0;k<6;k++){const O=(P+k)%12;R.push({label:ZOe[O],index:N+k})}return R},[P,N]),T=w.useMemo(()=>{const R={};return a.forEach(k=>{R[k.product_id]=(R[k.product_id]||0)+1}),Object.entries(R).sort(([,k],[,O])=>O-k).slice(0,5).map(([k,O])=>({product:e.find(M=>M.id===k),refCount:O})).filter(k=>k.product)},[a,e]);return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"relative rounded-xl overflow-hidden h-48 md:h-56",children:[s.jsx("img",{src:KOe,alt:"Novaride Engineering",className:"w-full h-full object-cover"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 via-black/50 to-transparent"}),s.jsx("div",{className:"absolute inset-0 flex items-center px-8",children:s.jsxs("div",{children:[s.jsx(hC,{variant:"full",color:"light",className:"mb-2"}),s.jsx("p",{className:"text-white/80 text-lg font-light tracking-wide",children:"Tableau de bord oprationnel"}),s.jsx("p",{className:"text-white/50 text-sm mt-1",children:"We engage, we move"})]})})]}),s.jsxs("div",{className:"grid gap-4 grid-cols-2 md:grid-cols-4 lg:grid-cols-7",children:[s.jsx(rl,{icon:Fl,label:"Produits",value:x,color:"text-primary"}),s.jsx(rl,{icon:$I,label:"Rfrences",value:b,color:"text-blue-500"}),s.jsx(rl,{icon:BW,label:"Fournisseurs",value:_,color:"text-amber-500"}),s.jsx(rl,{icon:TI,label:"Catgories",value:j,color:"text-violet-500"}),s.jsx(rl,{icon:zl,label:"Clients",value:S,color:"text-emerald-500"}),s.jsx(rl,{icon:rc,label:"Commandes actives",value:C,color:"text-rose-500"}),s.jsx(rl,{icon:bj,label:"Tches en cours",value:E.length,color:"text-cyan-500"})]}),s.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[s.jsxs(Bt,{className:"lg:col-span-2",children:[s.jsx(cr,{className:"pb-3",children:s.jsxs(ur,{className:"text-lg flex items-center gap-2",children:[s.jsx(bj,{className:"h-5 w-5"}),"Planning dveloppement  6 prochains mois"]})}),s.jsx(Wt,{children:o.length===0?s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Aucune ligne de planning configure"}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left py-2 pr-4 font-medium text-muted-foreground w-40",children:"Produit"}),A.map(R=>s.jsx("th",{className:"text-center py-2 px-1 font-medium text-muted-foreground min-w-[60px]",children:R.label},R.index))]})}),s.jsx("tbody",{children:o.slice(0,8).map(R=>{const k=l.filter(O=>O.row_id===R.id);return s.jsxs("tr",{className:"border-t border-border/50",children:[s.jsx("td",{className:"py-2 pr-4 font-medium truncate max-w-[160px]",children:R.label}),A.map(O=>{const M=k.find(D=>D.start_month<=O.index&&D.start_month+D.duration-1>=O.index);if(M){const D=c.find(B=>B.id===M.color_id),L=M.start_month===O.index;return s.jsx("td",{className:"py-2 px-0.5",children:s.jsx("div",{className:"h-6 rounded-sm flex items-center justify-center text-[10px] font-medium text-white truncate px-1",style:{backgroundColor:(D==null?void 0:D.color)||"#6366f1"},title:M.label,children:L?M.label:""})},O.index)}return s.jsx("td",{className:"py-2 px-0.5",children:s.jsx("div",{className:"h-6 rounded-sm bg-muted/30"})},O.index)})]},R.id)})})]})})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(Bt,{className:"overflow-hidden",children:s.jsxs("div",{className:"relative h-36",children:[s.jsx("img",{src:GOe,alt:"CCD EVO",className:"w-full h-full object-cover object-center"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),s.jsxs("div",{className:"absolute bottom-3 left-4",children:[s.jsx("p",{className:"text-white text-sm font-semibold",children:"Engineering Excellence"}),s.jsx("p",{className:"text-white/60 text-xs",children:"Conception franaise premium"})]})]})}),s.jsxs(Bt,{children:[s.jsx(cr,{className:"pb-3",children:s.jsx(ur,{className:"text-sm font-medium",children:"Top produits (nomenclature)"})}),s.jsx(Wt,{className:"space-y-2",children:T.length===0?s.jsx("p",{className:"text-sm text-muted-foreground",children:"Aucune nomenclature"}):T.map(({product:R,refCount:k})=>{const O=r.find(M=>M.id===R.category_id);return s.jsxs("div",{className:"flex items-center justify-between py-1.5 border-b border-border/30 last:border-0",children:[s.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[O&&s.jsx("div",{className:"h-2.5 w-2.5 rounded-full flex-shrink-0",style:{backgroundColor:O.color}}),s.jsx("span",{className:"text-sm truncate",children:R.name})]}),s.jsxs(Oe,{variant:"secondary",className:"text-xs ml-2 flex-shrink-0",children:[k," rf."]})]},R.id)})})]}),s.jsxs(Bt,{children:[s.jsx(cr,{className:"pb-3",children:s.jsx(ur,{className:"text-sm font-medium",children:"Catgories produit"})}),s.jsx(Wt,{children:s.jsx("div",{className:"flex flex-wrap gap-2",children:r.map(R=>{const k=e.filter(O=>O.category_id===R.id).length;return s.jsxs(Oe,{variant:"outline",className:"gap-1.5",children:[s.jsx("div",{className:"h-2 w-2 rounded-full",style:{backgroundColor:R.color}}),R.name,s.jsxs("span",{className:"text-muted-foreground",children:["(",k,")"]})]},R.id)})})})]})]})]}),v&&f.length>0&&e.length>0&&s.jsx(o8,{products:e,productCategories:r,salesRules:f,calculateProductCost:i,computeChainFromPublicTTC:p,getEffectivePrice:g,editedOurPrices:y[m]||{},pricingMode:h}),s.jsxs("div",{className:"grid grid-cols-4 gap-4 h-32 rounded-xl overflow-hidden",children:[s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:YOe,alt:"Vision",className:"w-full h-full object-cover rounded-lg"}),s.jsx("div",{className:"absolute inset-0 bg-black/30 rounded-lg"}),s.jsx("div",{className:"absolute bottom-2 left-3 text-white text-xs font-medium",children:"Vision"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:XOe,alt:"Transmission",className:"w-full h-full object-cover rounded-lg"}),s.jsx("div",{className:"absolute inset-0 bg-black/30 rounded-lg"}),s.jsx("div",{className:"absolute bottom-2 left-3 text-white text-xs font-medium",children:"Transmission"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:QOe,alt:"Composants",className:"w-full h-full object-cover rounded-lg"}),s.jsx("div",{className:"absolute inset-0 bg-black/30 rounded-lg"}),s.jsx("div",{className:"absolute bottom-2 left-3 text-white text-xs font-medium",children:"Composants"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:JOe,alt:"Performance",className:"w-full h-full object-cover rounded-lg"}),s.jsx("div",{className:"absolute inset-0 bg-black/30 rounded-lg"}),s.jsx("div",{className:"absolute bottom-2 left-3 text-white text-xs font-medium",children:"Performance"})]})]})]})}function rl({icon:e,label:t,value:r,color:n}){return s.jsx(Bt,{children:s.jsxs(Wt,{className:"p-4 flex flex-col items-center text-center gap-1.5",children:[s.jsx(e,{className:`h-5 w-5 ${n}`}),s.jsx("span",{className:"text-2xl font-bold font-mono",children:r}),s.jsx("span",{className:"text-[11px] text-muted-foreground leading-tight",children:t})]})})}const t2e=()=>{const e=nc();return w.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),s.jsx("div",{className:"flex min-h-screen items-center justify-center bg-muted",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),s.jsx("p",{className:"mb-4 text-xl text-muted-foreground",children:"Oops! Page not found"}),s.jsx("a",{href:"/",className:"text-primary underline hover:text-primary/90",children:"Return to Home"})]})})},r2e=new S7,n2e=()=>s.jsx(N7,{client:r2e,children:s.jsx(Z9,{children:s.jsx(GX,{children:s.jsxs(JX,{children:[s.jsx($H,{}),s.jsx(hq,{}),s.jsx(jK,{children:s.jsxs(mK,{children:[s.jsx(Rr,{path:"/auth",element:s.jsx(Uke,{})}),s.jsx(Rr,{path:"/",element:s.jsx(_n,{tabKey:"costflow",children:s.jsx(jn,{children:s.jsx(e2e,{})})})}),s.jsx(Rr,{path:"/product",element:s.jsx(_n,{tabKey:"product-plan",children:s.jsx(jn,{children:s.jsx(XCe,{})})})}),s.jsx(Rr,{path:"/organisation",element:s.jsx(_n,{tabKey:"organisation",children:s.jsx(jn,{children:s.jsx(xNe,{})})})}),s.jsx(Rr,{path:"/charges",element:s.jsx(_n,{tabKey:"charges",children:s.jsx(jn,{children:s.jsx(_Ne,{})})})}),s.jsx(Rr,{path:"/crm",element:s.jsx(_n,{tabKey:"crm",children:s.jsx(jn,{children:s.jsx(KNe,{})})})}),s.jsx(Rr,{path:"/previsionnel",element:s.jsx(_n,{tabKey:"previsionnel",children:s.jsx(jn,{children:s.jsx(wPe,{})})})}),s.jsx(Rr,{path:"/funding",element:s.jsx(_n,{tabKey:"funding",children:s.jsx(jn,{children:s.jsx(_Pe,{})})})}),s.jsx(Rr,{path:"/scenarios",element:s.jsx(_n,{tabKey:"scenarios",children:s.jsx(jn,{children:s.jsx(CPe,{})})})}),s.jsx(Rr,{path:"/valuation",element:s.jsx(_n,{tabKey:"valuation",children:s.jsx(jn,{children:s.jsx(LPe,{})})})}),s.jsx(Rr,{path:"/investment-summary",element:s.jsx(_n,{tabKey:"investment-summary",children:s.jsx(jn,{children:s.jsx(VPe,{})})})}),s.jsx(Rr,{path:"/pricing",element:s.jsx(_n,{tabKey:"pricing",children:s.jsx(jn,{children:s.jsx(WOe,{})})})}),s.jsx(Rr,{path:"/home",element:s.jsx(dv,{to:"/",replace:!0})}),s.jsx(Rr,{path:"/tableau-de-bord",element:s.jsx(dv,{to:"/",replace:!0})}),s.jsx(Rr,{path:"/costflow",element:s.jsx(_n,{tabKey:"costflow",children:s.jsx(jn,{children:s.jsx(IOe,{})})})}),s.jsx(Rr,{path:"/planning-dev",element:s.jsx(_n,{tabKey:"costflow",children:s.jsx(jn,{children:s.jsx(HOe,{})})})}),s.jsx(Rr,{path:"/timetracking",element:s.jsx(_n,{tabKey:"timetracking",children:s.jsx(jn,{children:s.jsx(zOe,{})})})}),s.jsx(Rr,{path:"/snapshots",element:s.jsx(_n,{tabKey:"snapshots",children:s.jsx(jn,{children:s.jsx(VOe,{})})})}),s.jsx(Rr,{path:"/permissions",element:s.jsx(_n,{children:s.jsx(jn,{children:s.jsx(Kke,{})})})}),s.jsx(Rr,{path:"*",element:s.jsx(t2e,{})})]})})]})})})});Q$(document.getElementById("root")).render(s.jsx(n2e,{}));
