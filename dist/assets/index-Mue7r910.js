var yk=e=>{throw TypeError(e)};var eb=(e,t,r)=>t.has(e)||yk("Cannot "+r);var ye=(e,t,r)=>(eb(e,t,"read from private field"),r?r.call(e):t.get(e)),Tt=(e,t,r)=>t.has(e)?yk("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),gt=(e,t,r,n)=>(eb(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),Nn=(e,t,r)=>(eb(e,t,"access private method"),r);var wp=(e,t,r,n)=>({set _(a){gt(e,t,a,r)},get _(){return ye(e,t,n)}});function D8(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var jp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Bt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var aM={exports:{}},Jy={},iM={exports:{}},jt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jm=Symbol.for("react.element"),L8=Symbol.for("react.portal"),B8=Symbol.for("react.fragment"),F8=Symbol.for("react.strict_mode"),z8=Symbol.for("react.profiler"),U8=Symbol.for("react.provider"),V8=Symbol.for("react.context"),W8=Symbol.for("react.forward_ref"),H8=Symbol.for("react.suspense"),q8=Symbol.for("react.memo"),K8=Symbol.for("react.lazy"),xk=Symbol.iterator;function G8(e){return e===null||typeof e!="object"?null:(e=xk&&e[xk]||e["@@iterator"],typeof e=="function"?e:null)}var sM={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},oM=Object.assign,lM={};function Rd(e,t,r){this.props=e,this.context=t,this.refs=lM,this.updater=r||sM}Rd.prototype.isReactComponent={};Rd.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Rd.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function cM(){}cM.prototype=Rd.prototype;function sS(e,t,r){this.props=e,this.context=t,this.refs=lM,this.updater=r||sM}var oS=sS.prototype=new cM;oS.constructor=sS;oM(oS,Rd.prototype);oS.isPureReactComponent=!0;var bk=Array.isArray,uM=Object.prototype.hasOwnProperty,lS={current:null},dM={key:!0,ref:!0,__self:!0,__source:!0};function fM(e,t,r){var n,a={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)uM.call(t,n)&&!dM.hasOwnProperty(n)&&(a[n]=t[n]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)a[n]===void 0&&(a[n]=l[n]);return{$$typeof:Jm,type:e,key:i,ref:o,props:a,_owner:lS.current}}function Y8(e,t){return{$$typeof:Jm,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function cS(e){return typeof e=="object"&&e!==null&&e.$$typeof===Jm}function X8(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var wk=/\/+/g;function tb(e,t){return typeof e=="object"&&e!==null&&e.key!=null?X8(""+e.key):t.toString(36)}function wg(e,t,r,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Jm:case L8:o=!0}}if(o)return o=e,a=a(o),e=n===""?"."+tb(o,0):n,bk(a)?(r="",e!=null&&(r=e.replace(wk,"$&/")+"/"),wg(a,t,r,"",function(u){return u})):a!=null&&(cS(a)&&(a=Y8(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(wk,"$&/")+"/")+e)),t.push(a)),1;if(o=0,n=n===""?".":n+":",bk(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+tb(i,l);o+=wg(i,t,r,c,a)}else if(c=G8(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+tb(i,l++),o+=wg(i,t,r,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function _p(e,t,r){if(e==null)return e;var n=[],a=0;return wg(e,n,"","",function(i){return t.call(r,i,a++)}),n}function Z8(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Kn={current:null},jg={transition:null},Q8={ReactCurrentDispatcher:Kn,ReactCurrentBatchConfig:jg,ReactCurrentOwner:lS};function hM(){throw Error("act(...) is not supported in production builds of React.")}jt.Children={map:_p,forEach:function(e,t,r){_p(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return _p(e,function(){t++}),t},toArray:function(e){return _p(e,function(t){return t})||[]},only:function(e){if(!cS(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};jt.Component=Rd;jt.Fragment=B8;jt.Profiler=z8;jt.PureComponent=sS;jt.StrictMode=F8;jt.Suspense=H8;jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q8;jt.act=hM;jt.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=oM({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=lS.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)uM.call(t,c)&&!dM.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:Jm,type:e.type,key:a,ref:i,props:n,_owner:o}};jt.createContext=function(e){return e={$$typeof:V8,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:U8,_context:e},e.Consumer=e};jt.createElement=fM;jt.createFactory=function(e){var t=fM.bind(null,e);return t.type=e,t};jt.createRef=function(){return{current:null}};jt.forwardRef=function(e){return{$$typeof:W8,render:e}};jt.isValidElement=cS;jt.lazy=function(e){return{$$typeof:K8,_payload:{_status:-1,_result:e},_init:Z8}};jt.memo=function(e,t){return{$$typeof:q8,type:e,compare:t===void 0?null:t}};jt.startTransition=function(e){var t=jg.transition;jg.transition={};try{e()}finally{jg.transition=t}};jt.unstable_act=hM;jt.useCallback=function(e,t){return Kn.current.useCallback(e,t)};jt.useContext=function(e){return Kn.current.useContext(e)};jt.useDebugValue=function(){};jt.useDeferredValue=function(e){return Kn.current.useDeferredValue(e)};jt.useEffect=function(e,t){return Kn.current.useEffect(e,t)};jt.useId=function(){return Kn.current.useId()};jt.useImperativeHandle=function(e,t,r){return Kn.current.useImperativeHandle(e,t,r)};jt.useInsertionEffect=function(e,t){return Kn.current.useInsertionEffect(e,t)};jt.useLayoutEffect=function(e,t){return Kn.current.useLayoutEffect(e,t)};jt.useMemo=function(e,t){return Kn.current.useMemo(e,t)};jt.useReducer=function(e,t,r){return Kn.current.useReducer(e,t,r)};jt.useRef=function(e){return Kn.current.useRef(e)};jt.useState=function(e){return Kn.current.useState(e)};jt.useSyncExternalStore=function(e,t,r){return Kn.current.useSyncExternalStore(e,t,r)};jt.useTransition=function(){return Kn.current.useTransition()};jt.version="18.3.1";iM.exports=jt;var w=iM.exports;const $=Bt(w),uS=D8({__proto__:null,default:$},[w]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J8=w,e6=Symbol.for("react.element"),t6=Symbol.for("react.fragment"),r6=Object.prototype.hasOwnProperty,n6=J8.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a6={key:!0,ref:!0,__self:!0,__source:!0};function mM(e,t,r){var n,a={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)r6.call(t,n)&&!a6.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:e6,type:e,key:i,ref:o,props:a,_owner:n6.current}}Jy.Fragment=t6;Jy.jsx=mM;Jy.jsxs=mM;aM.exports=Jy;var s=aM.exports,pM={exports:{}},Sa={},gM={exports:{}},vM={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(D,B){var z=D.length;D.push(B);e:for(;0<z;){var Z=z-1>>>1,J=D[Z];if(0<a(J,B))D[Z]=B,D[z]=J,z=Z;else break e}}function r(D){return D.length===0?null:D[0]}function n(D){if(D.length===0)return null;var B=D[0],z=D.pop();if(z!==B){D[0]=z;e:for(var Z=0,J=D.length,se=J>>>1;Z<se;){var U=2*(Z+1)-1,q=D[U],G=U+1,H=D[G];if(0>a(q,z))G<J&&0>a(H,q)?(D[Z]=H,D[G]=z,Z=G):(D[Z]=q,D[U]=z,Z=U);else if(G<J&&0>a(H,z))D[Z]=H,D[G]=z,Z=G;else break e}}return B}function a(D,B){var z=D.sortIndex-B.sortIndex;return z!==0?z:D.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,f=null,h=3,m=!1,y=!1,g=!1,p=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(D){for(var B=r(u);B!==null;){if(B.callback===null)n(u);else if(B.startTime<=D)n(u),B.sortIndex=B.expirationTime,t(c,B);else break;B=r(u)}}function _(D){if(g=!1,b(D),!y)if(r(c)!==null)y=!0,I(j);else{var B=r(u);B!==null&&M(_,B.startTime-D)}}function j(D,B){y=!1,g&&(g=!1,v(k),k=-1),m=!0;var z=h;try{for(b(B),f=r(c);f!==null&&(!(f.expirationTime>B)||D&&!O());){var Z=f.callback;if(typeof Z=="function"){f.callback=null,h=f.priorityLevel;var J=Z(f.expirationTime<=B);B=e.unstable_now(),typeof J=="function"?f.callback=J:f===r(c)&&n(c),b(B)}else n(c);f=r(c)}if(f!==null)var se=!0;else{var U=r(u);U!==null&&M(_,U.startTime-B),se=!1}return se}finally{f=null,h=z,m=!1}}var S=!1,C=null,k=-1,N=5,A=-1;function O(){return!(e.unstable_now()-A<N)}function E(){if(C!==null){var D=e.unstable_now();A=D;var B=!0;try{B=C(!0,D)}finally{B?R():(S=!1,C=null)}}else S=!1}var R;if(typeof x=="function")R=function(){x(E)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,T=P.port2;P.port1.onmessage=E,R=function(){T.postMessage(null)}}else R=function(){p(E,0)};function I(D){C=D,S||(S=!0,R())}function M(D,B){k=p(function(){D(e.unstable_now())},B)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(D){D.callback=null},e.unstable_continueExecution=function(){y||m||(y=!0,I(j))},e.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<D?Math.floor(1e3/D):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(D){switch(h){case 1:case 2:case 3:var B=3;break;default:B=h}var z=h;h=B;try{return D()}finally{h=z}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(D,B){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var z=h;h=D;try{return B()}finally{h=z}},e.unstable_scheduleCallback=function(D,B,z){var Z=e.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?Z+z:Z):z=Z,D){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=z+J,D={id:d++,callback:B,priorityLevel:D,startTime:z,expirationTime:J,sortIndex:-1},z>Z?(D.sortIndex=z,t(u,D),r(c)===null&&D===r(u)&&(g?(v(k),k=-1):g=!0,M(_,z-Z))):(D.sortIndex=J,t(c,D),y||m||(y=!0,I(j))),D},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(D){var B=h;return function(){var z=h;h=B;try{return D.apply(this,arguments)}finally{h=z}}}})(vM);gM.exports=vM;var i6=gM.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s6=w,ja=i6;function je(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var yM=new Set,Ch={};function hc(e,t){Du(e,t),Du(e+"Capture",t)}function Du(e,t){for(Ch[e]=t,e=0;e<t.length;e++)yM.add(t[e])}var Ns=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vw=Object.prototype.hasOwnProperty,o6=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,jk={},_k={};function l6(e){return Vw.call(_k,e)?!0:Vw.call(jk,e)?!1:o6.test(e)?_k[e]=!0:(jk[e]=!0,!1)}function c6(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function u6(e,t,r,n){if(t===null||typeof t>"u"||c6(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Gn(e,t,r,n,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var _n={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){_n[e]=new Gn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];_n[t]=new Gn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){_n[e]=new Gn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){_n[e]=new Gn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){_n[e]=new Gn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){_n[e]=new Gn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){_n[e]=new Gn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){_n[e]=new Gn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){_n[e]=new Gn(e,5,!1,e.toLowerCase(),null,!1,!1)});var dS=/[\-:]([a-z])/g;function fS(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(dS,fS);_n[t]=new Gn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(dS,fS);_n[t]=new Gn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(dS,fS);_n[t]=new Gn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){_n[e]=new Gn(e,1,!1,e.toLowerCase(),null,!1,!1)});_n.xlinkHref=new Gn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){_n[e]=new Gn(e,1,!1,e.toLowerCase(),null,!0,!0)});function hS(e,t,r,n){var a=_n.hasOwnProperty(t)?_n[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(u6(t,r,a,n)&&(r=null),n||a===null?l6(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Ds=s6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Sp=Symbol.for("react.element"),Yc=Symbol.for("react.portal"),Xc=Symbol.for("react.fragment"),mS=Symbol.for("react.strict_mode"),Ww=Symbol.for("react.profiler"),xM=Symbol.for("react.provider"),bM=Symbol.for("react.context"),pS=Symbol.for("react.forward_ref"),Hw=Symbol.for("react.suspense"),qw=Symbol.for("react.suspense_list"),gS=Symbol.for("react.memo"),Js=Symbol.for("react.lazy"),wM=Symbol.for("react.offscreen"),Sk=Symbol.iterator;function pf(e){return e===null||typeof e!="object"?null:(e=Sk&&e[Sk]||e["@@iterator"],typeof e=="function"?e:null)}var Er=Object.assign,rb;function qf(e){if(rb===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);rb=t&&t[1]||""}return`
`+rb+e}var nb=!1;function ab(e,t){if(!e||nb)return"";nb=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),i=n.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{nb=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?qf(e):""}function d6(e){switch(e.tag){case 5:return qf(e.type);case 16:return qf("Lazy");case 13:return qf("Suspense");case 19:return qf("SuspenseList");case 0:case 2:case 15:return e=ab(e.type,!1),e;case 11:return e=ab(e.type.render,!1),e;case 1:return e=ab(e.type,!0),e;default:return""}}function Kw(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Xc:return"Fragment";case Yc:return"Portal";case Ww:return"Profiler";case mS:return"StrictMode";case Hw:return"Suspense";case qw:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case bM:return(e.displayName||"Context")+".Consumer";case xM:return(e._context.displayName||"Context")+".Provider";case pS:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case gS:return t=e.displayName||null,t!==null?t:Kw(e.type)||"Memo";case Js:t=e._payload,e=e._init;try{return Kw(e(t))}catch{}}return null}function f6(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Kw(t);case 8:return t===mS?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Do(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function jM(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function h6(e){var t=jM(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Cp(e){e._valueTracker||(e._valueTracker=h6(e))}function _M(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=jM(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Ug(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Gw(e,t){var r=t.checked;return Er({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Ck(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Do(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function SM(e,t){t=t.checked,t!=null&&hS(e,"checked",t,!1)}function Yw(e,t){SM(e,t);var r=Do(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Xw(e,t.type,r):t.hasOwnProperty("defaultValue")&&Xw(e,t.type,Do(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Nk(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Xw(e,t,r){(t!=="number"||Ug(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Kf=Array.isArray;function mu(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Do(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Zw(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(je(91));return Er({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function kk(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(je(92));if(Kf(r)){if(1<r.length)throw Error(je(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Do(r)}}function CM(e,t){var r=Do(t.value),n=Do(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Pk(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function NM(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Qw(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?NM(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Np,kM=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Np=Np||document.createElement("div"),Np.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Np.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Nh(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var eh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},m6=["Webkit","ms","Moz","O"];Object.keys(eh).forEach(function(e){m6.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),eh[t]=eh[e]})});function PM(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||eh.hasOwnProperty(e)&&eh[e]?(""+t).trim():t+"px"}function EM(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=PM(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var p6=Er({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Jw(e,t){if(t){if(p6[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(je(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(je(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(je(61))}if(t.style!=null&&typeof t.style!="object")throw Error(je(62))}}function ej(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tj=null;function vS(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var rj=null,pu=null,gu=null;function Ek(e){if(e=rp(e)){if(typeof rj!="function")throw Error(je(280));var t=e.stateNode;t&&(t=ax(t),rj(e.stateNode,e.type,t))}}function AM(e){pu?gu?gu.push(e):gu=[e]:pu=e}function OM(){if(pu){var e=pu,t=gu;if(gu=pu=null,Ek(e),t)for(e=0;e<t.length;e++)Ek(t[e])}}function TM(e,t){return e(t)}function RM(){}var ib=!1;function MM(e,t,r){if(ib)return e(t,r);ib=!0;try{return TM(e,t,r)}finally{ib=!1,(pu!==null||gu!==null)&&(RM(),OM())}}function kh(e,t){var r=e.stateNode;if(r===null)return null;var n=ax(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(je(231,t,typeof r));return r}var nj=!1;if(Ns)try{var gf={};Object.defineProperty(gf,"passive",{get:function(){nj=!0}}),window.addEventListener("test",gf,gf),window.removeEventListener("test",gf,gf)}catch{nj=!1}function g6(e,t,r,n,a,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var th=!1,Vg=null,Wg=!1,aj=null,v6={onError:function(e){th=!0,Vg=e}};function y6(e,t,r,n,a,i,o,l,c){th=!1,Vg=null,g6.apply(v6,arguments)}function x6(e,t,r,n,a,i,o,l,c){if(y6.apply(this,arguments),th){if(th){var u=Vg;th=!1,Vg=null}else throw Error(je(198));Wg||(Wg=!0,aj=u)}}function mc(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function $M(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ak(e){if(mc(e)!==e)throw Error(je(188))}function b6(e){var t=e.alternate;if(!t){if(t=mc(e),t===null)throw Error(je(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return Ak(a),e;if(i===n)return Ak(a),t;i=i.sibling}throw Error(je(188))}if(r.return!==n.return)r=a,n=i;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,n=i;break}if(l===n){o=!0,n=a,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=a;break}if(l===n){o=!0,n=i,r=a;break}l=l.sibling}if(!o)throw Error(je(189))}}if(r.alternate!==n)throw Error(je(190))}if(r.tag!==3)throw Error(je(188));return r.stateNode.current===r?e:t}function IM(e){return e=b6(e),e!==null?DM(e):null}function DM(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=DM(e);if(t!==null)return t;e=e.sibling}return null}var LM=ja.unstable_scheduleCallback,Ok=ja.unstable_cancelCallback,w6=ja.unstable_shouldYield,j6=ja.unstable_requestPaint,zr=ja.unstable_now,_6=ja.unstable_getCurrentPriorityLevel,yS=ja.unstable_ImmediatePriority,BM=ja.unstable_UserBlockingPriority,Hg=ja.unstable_NormalPriority,S6=ja.unstable_LowPriority,FM=ja.unstable_IdlePriority,ex=null,Wi=null;function C6(e){if(Wi&&typeof Wi.onCommitFiberRoot=="function")try{Wi.onCommitFiberRoot(ex,e,void 0,(e.current.flags&128)===128)}catch{}}var vi=Math.clz32?Math.clz32:P6,N6=Math.log,k6=Math.LN2;function P6(e){return e>>>=0,e===0?32:31-(N6(e)/k6|0)|0}var kp=64,Pp=4194304;function Gf(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function qg(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~a;l!==0?n=Gf(l):(i&=o,i!==0&&(n=Gf(i)))}else o=r&~a,o!==0?n=Gf(o):i!==0&&(n=Gf(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-vi(t),a=1<<r,n|=e[r],t&=~a;return n}function E6(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function A6(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-vi(i),l=1<<o,c=a[o];c===-1?(!(l&r)||l&n)&&(a[o]=E6(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function ij(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function zM(){var e=kp;return kp<<=1,!(kp&4194240)&&(kp=64),e}function sb(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function ep(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-vi(t),e[t]=r}function O6(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-vi(r),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~i}}function xS(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-vi(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var Ht=0;function UM(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var VM,bS,WM,HM,qM,sj=!1,Ep=[],_o=null,So=null,Co=null,Ph=new Map,Eh=new Map,ao=[],T6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Tk(e,t){switch(e){case"focusin":case"focusout":_o=null;break;case"dragenter":case"dragleave":So=null;break;case"mouseover":case"mouseout":Co=null;break;case"pointerover":case"pointerout":Ph.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Eh.delete(t.pointerId)}}function vf(e,t,r,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=rp(t),t!==null&&bS(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function R6(e,t,r,n,a){switch(t){case"focusin":return _o=vf(_o,e,t,r,n,a),!0;case"dragenter":return So=vf(So,e,t,r,n,a),!0;case"mouseover":return Co=vf(Co,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return Ph.set(i,vf(Ph.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,Eh.set(i,vf(Eh.get(i)||null,e,t,r,n,a)),!0}return!1}function KM(e){var t=Nl(e.target);if(t!==null){var r=mc(t);if(r!==null){if(t=r.tag,t===13){if(t=$M(r),t!==null){e.blockedOn=t,qM(e.priority,function(){WM(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function _g(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=oj(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);tj=n,r.target.dispatchEvent(n),tj=null}else return t=rp(r),t!==null&&bS(t),e.blockedOn=r,!1;t.shift()}return!0}function Rk(e,t,r){_g(e)&&r.delete(t)}function M6(){sj=!1,_o!==null&&_g(_o)&&(_o=null),So!==null&&_g(So)&&(So=null),Co!==null&&_g(Co)&&(Co=null),Ph.forEach(Rk),Eh.forEach(Rk)}function yf(e,t){e.blockedOn===t&&(e.blockedOn=null,sj||(sj=!0,ja.unstable_scheduleCallback(ja.unstable_NormalPriority,M6)))}function Ah(e){function t(a){return yf(a,e)}if(0<Ep.length){yf(Ep[0],e);for(var r=1;r<Ep.length;r++){var n=Ep[r];n.blockedOn===e&&(n.blockedOn=null)}}for(_o!==null&&yf(_o,e),So!==null&&yf(So,e),Co!==null&&yf(Co,e),Ph.forEach(t),Eh.forEach(t),r=0;r<ao.length;r++)n=ao[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<ao.length&&(r=ao[0],r.blockedOn===null);)KM(r),r.blockedOn===null&&ao.shift()}var vu=Ds.ReactCurrentBatchConfig,Kg=!0;function $6(e,t,r,n){var a=Ht,i=vu.transition;vu.transition=null;try{Ht=1,wS(e,t,r,n)}finally{Ht=a,vu.transition=i}}function I6(e,t,r,n){var a=Ht,i=vu.transition;vu.transition=null;try{Ht=4,wS(e,t,r,n)}finally{Ht=a,vu.transition=i}}function wS(e,t,r,n){if(Kg){var a=oj(e,t,r,n);if(a===null)gb(e,t,n,Gg,r),Tk(e,n);else if(R6(a,e,t,r,n))n.stopPropagation();else if(Tk(e,n),t&4&&-1<T6.indexOf(e)){for(;a!==null;){var i=rp(a);if(i!==null&&VM(i),i=oj(e,t,r,n),i===null&&gb(e,t,n,Gg,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else gb(e,t,n,null,r)}}var Gg=null;function oj(e,t,r,n){if(Gg=null,e=vS(n),e=Nl(e),e!==null)if(t=mc(e),t===null)e=null;else if(r=t.tag,r===13){if(e=$M(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gg=e,null}function GM(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_6()){case yS:return 1;case BM:return 4;case Hg:case S6:return 16;case FM:return 536870912;default:return 16}default:return 16}}var mo=null,jS=null,Sg=null;function YM(){if(Sg)return Sg;var e,t=jS,r=t.length,n,a="value"in mo?mo.value:mo.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===a[i-n];n++);return Sg=a.slice(e,1<n?1-n:void 0)}function Cg(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ap(){return!0}function Mk(){return!1}function Ca(e){function t(r,n,a,i,o){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ap:Mk,this.isPropagationStopped=Mk,this}return Er(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ap)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ap)},persist:function(){},isPersistent:Ap}),t}var Md={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_S=Ca(Md),tp=Er({},Md,{view:0,detail:0}),D6=Ca(tp),ob,lb,xf,tx=Er({},tp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:SS,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==xf&&(xf&&e.type==="mousemove"?(ob=e.screenX-xf.screenX,lb=e.screenY-xf.screenY):lb=ob=0,xf=e),ob)},movementY:function(e){return"movementY"in e?e.movementY:lb}}),$k=Ca(tx),L6=Er({},tx,{dataTransfer:0}),B6=Ca(L6),F6=Er({},tp,{relatedTarget:0}),cb=Ca(F6),z6=Er({},Md,{animationName:0,elapsedTime:0,pseudoElement:0}),U6=Ca(z6),V6=Er({},Md,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),W6=Ca(V6),H6=Er({},Md,{data:0}),Ik=Ca(H6),q6={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},K6={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},G6={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Y6(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=G6[e])?!!t[e]:!1}function SS(){return Y6}var X6=Er({},tp,{key:function(e){if(e.key){var t=q6[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Cg(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?K6[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:SS,charCode:function(e){return e.type==="keypress"?Cg(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Cg(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Z6=Ca(X6),Q6=Er({},tx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Dk=Ca(Q6),J6=Er({},tp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:SS}),eV=Ca(J6),tV=Er({},Md,{propertyName:0,elapsedTime:0,pseudoElement:0}),rV=Ca(tV),nV=Er({},tx,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),aV=Ca(nV),iV=[9,13,27,32],CS=Ns&&"CompositionEvent"in window,rh=null;Ns&&"documentMode"in document&&(rh=document.documentMode);var sV=Ns&&"TextEvent"in window&&!rh,XM=Ns&&(!CS||rh&&8<rh&&11>=rh),Lk=" ",Bk=!1;function ZM(e,t){switch(e){case"keyup":return iV.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function QM(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Zc=!1;function oV(e,t){switch(e){case"compositionend":return QM(t);case"keypress":return t.which!==32?null:(Bk=!0,Lk);case"textInput":return e=t.data,e===Lk&&Bk?null:e;default:return null}}function lV(e,t){if(Zc)return e==="compositionend"||!CS&&ZM(e,t)?(e=YM(),Sg=jS=mo=null,Zc=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return XM&&t.locale!=="ko"?null:t.data;default:return null}}var cV={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fk(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!cV[e.type]:t==="textarea"}function JM(e,t,r,n){AM(n),t=Yg(t,"onChange"),0<t.length&&(r=new _S("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var nh=null,Oh=null;function uV(e){u$(e,0)}function rx(e){var t=eu(e);if(_M(t))return e}function dV(e,t){if(e==="change")return t}var e$=!1;if(Ns){var ub;if(Ns){var db="oninput"in document;if(!db){var zk=document.createElement("div");zk.setAttribute("oninput","return;"),db=typeof zk.oninput=="function"}ub=db}else ub=!1;e$=ub&&(!document.documentMode||9<document.documentMode)}function Uk(){nh&&(nh.detachEvent("onpropertychange",t$),Oh=nh=null)}function t$(e){if(e.propertyName==="value"&&rx(Oh)){var t=[];JM(t,Oh,e,vS(e)),MM(uV,t)}}function fV(e,t,r){e==="focusin"?(Uk(),nh=t,Oh=r,nh.attachEvent("onpropertychange",t$)):e==="focusout"&&Uk()}function hV(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return rx(Oh)}function mV(e,t){if(e==="click")return rx(t)}function pV(e,t){if(e==="input"||e==="change")return rx(t)}function gV(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ji=typeof Object.is=="function"?Object.is:gV;function Th(e,t){if(ji(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!Vw.call(t,a)||!ji(e[a],t[a]))return!1}return!0}function Vk(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Wk(e,t){var r=Vk(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Vk(r)}}function r$(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?r$(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function n$(){for(var e=window,t=Ug();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Ug(e.document)}return t}function NS(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function vV(e){var t=n$(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&r$(r.ownerDocument.documentElement,r)){if(n!==null&&NS(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=Wk(r,i);var o=Wk(r,n);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var yV=Ns&&"documentMode"in document&&11>=document.documentMode,Qc=null,lj=null,ah=null,cj=!1;function Hk(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;cj||Qc==null||Qc!==Ug(n)||(n=Qc,"selectionStart"in n&&NS(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),ah&&Th(ah,n)||(ah=n,n=Yg(lj,"onSelect"),0<n.length&&(t=new _S("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Qc)))}function Op(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Jc={animationend:Op("Animation","AnimationEnd"),animationiteration:Op("Animation","AnimationIteration"),animationstart:Op("Animation","AnimationStart"),transitionend:Op("Transition","TransitionEnd")},fb={},a$={};Ns&&(a$=document.createElement("div").style,"AnimationEvent"in window||(delete Jc.animationend.animation,delete Jc.animationiteration.animation,delete Jc.animationstart.animation),"TransitionEvent"in window||delete Jc.transitionend.transition);function nx(e){if(fb[e])return fb[e];if(!Jc[e])return e;var t=Jc[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in a$)return fb[e]=t[r];return e}var i$=nx("animationend"),s$=nx("animationiteration"),o$=nx("animationstart"),l$=nx("transitionend"),c$=new Map,qk="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Go(e,t){c$.set(e,t),hc(t,[e])}for(var hb=0;hb<qk.length;hb++){var mb=qk[hb],xV=mb.toLowerCase(),bV=mb[0].toUpperCase()+mb.slice(1);Go(xV,"on"+bV)}Go(i$,"onAnimationEnd");Go(s$,"onAnimationIteration");Go(o$,"onAnimationStart");Go("dblclick","onDoubleClick");Go("focusin","onFocus");Go("focusout","onBlur");Go(l$,"onTransitionEnd");Du("onMouseEnter",["mouseout","mouseover"]);Du("onMouseLeave",["mouseout","mouseover"]);Du("onPointerEnter",["pointerout","pointerover"]);Du("onPointerLeave",["pointerout","pointerover"]);hc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));hc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));hc("onBeforeInput",["compositionend","keypress","textInput","paste"]);hc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));hc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));hc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wV=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yf));function Kk(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,x6(n,t,void 0,e),e.currentTarget=null}function u$(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;Kk(a,l,u),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;Kk(a,l,u),i=c}}}if(Wg)throw e=aj,Wg=!1,aj=null,e}function gr(e,t){var r=t[mj];r===void 0&&(r=t[mj]=new Set);var n=e+"__bubble";r.has(n)||(d$(t,e,2,!1),r.add(n))}function pb(e,t,r){var n=0;t&&(n|=4),d$(r,e,n,t)}var Tp="_reactListening"+Math.random().toString(36).slice(2);function Rh(e){if(!e[Tp]){e[Tp]=!0,yM.forEach(function(r){r!=="selectionchange"&&(wV.has(r)||pb(r,!1,e),pb(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Tp]||(t[Tp]=!0,pb("selectionchange",!1,t))}}function d$(e,t,r,n){switch(GM(t)){case 1:var a=$6;break;case 4:a=I6;break;default:a=wS}r=a.bind(null,t,r,e),a=void 0,!nj||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function gb(e,t,r,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=Nl(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}MM(function(){var u=i,d=vS(r),f=[];e:{var h=c$.get(e);if(h!==void 0){var m=_S,y=e;switch(e){case"keypress":if(Cg(r)===0)break e;case"keydown":case"keyup":m=Z6;break;case"focusin":y="focus",m=cb;break;case"focusout":y="blur",m=cb;break;case"beforeblur":case"afterblur":m=cb;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=$k;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=B6;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=eV;break;case i$:case s$:case o$:m=U6;break;case l$:m=rV;break;case"scroll":m=D6;break;case"wheel":m=aV;break;case"copy":case"cut":case"paste":m=W6;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Dk}var g=(t&4)!==0,p=!g&&e==="scroll",v=g?h!==null?h+"Capture":null:h;g=[];for(var x=u,b;x!==null;){b=x;var _=b.stateNode;if(b.tag===5&&_!==null&&(b=_,v!==null&&(_=kh(x,v),_!=null&&g.push(Mh(x,_,b)))),p)break;x=x.return}0<g.length&&(h=new m(h,y,null,r,d),f.push({event:h,listeners:g}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",h&&r!==tj&&(y=r.relatedTarget||r.fromElement)&&(Nl(y)||y[ks]))break e;if((m||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,m?(y=r.relatedTarget||r.toElement,m=u,y=y?Nl(y):null,y!==null&&(p=mc(y),y!==p||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=u),m!==y)){if(g=$k,_="onMouseLeave",v="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(g=Dk,_="onPointerLeave",v="onPointerEnter",x="pointer"),p=m==null?h:eu(m),b=y==null?h:eu(y),h=new g(_,x+"leave",m,r,d),h.target=p,h.relatedTarget=b,_=null,Nl(d)===u&&(g=new g(v,x+"enter",y,r,d),g.target=b,g.relatedTarget=p,_=g),p=_,m&&y)t:{for(g=m,v=y,x=0,b=g;b;b=wc(b))x++;for(b=0,_=v;_;_=wc(_))b++;for(;0<x-b;)g=wc(g),x--;for(;0<b-x;)v=wc(v),b--;for(;x--;){if(g===v||v!==null&&g===v.alternate)break t;g=wc(g),v=wc(v)}g=null}else g=null;m!==null&&Gk(f,h,m,g,!1),y!==null&&p!==null&&Gk(f,p,y,g,!0)}}e:{if(h=u?eu(u):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var j=dV;else if(Fk(h))if(e$)j=pV;else{j=hV;var S=fV}else(m=h.nodeName)&&m.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(j=mV);if(j&&(j=j(e,u))){JM(f,j,r,d);break e}S&&S(e,h,u),e==="focusout"&&(S=h._wrapperState)&&S.controlled&&h.type==="number"&&Xw(h,"number",h.value)}switch(S=u?eu(u):window,e){case"focusin":(Fk(S)||S.contentEditable==="true")&&(Qc=S,lj=u,ah=null);break;case"focusout":ah=lj=Qc=null;break;case"mousedown":cj=!0;break;case"contextmenu":case"mouseup":case"dragend":cj=!1,Hk(f,r,d);break;case"selectionchange":if(yV)break;case"keydown":case"keyup":Hk(f,r,d)}var C;if(CS)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Zc?ZM(e,r)&&(k="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(k="onCompositionStart");k&&(XM&&r.locale!=="ko"&&(Zc||k!=="onCompositionStart"?k==="onCompositionEnd"&&Zc&&(C=YM()):(mo=d,jS="value"in mo?mo.value:mo.textContent,Zc=!0)),S=Yg(u,k),0<S.length&&(k=new Ik(k,e,null,r,d),f.push({event:k,listeners:S}),C?k.data=C:(C=QM(r),C!==null&&(k.data=C)))),(C=sV?oV(e,r):lV(e,r))&&(u=Yg(u,"onBeforeInput"),0<u.length&&(d=new Ik("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=C))}u$(f,t)})}function Mh(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Yg(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=kh(e,r),i!=null&&n.unshift(Mh(e,i,a)),i=kh(e,t),i!=null&&n.push(Mh(e,i,a))),e=e.return}return n}function wc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Gk(e,t,r,n,a){for(var i=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,a?(c=kh(r,i),c!=null&&o.unshift(Mh(r,c,l))):a||(c=kh(r,i),c!=null&&o.push(Mh(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var jV=/\r\n?/g,_V=/\u0000|\uFFFD/g;function Yk(e){return(typeof e=="string"?e:""+e).replace(jV,`
`).replace(_V,"")}function Rp(e,t,r){if(t=Yk(t),Yk(e)!==t&&r)throw Error(je(425))}function Xg(){}var uj=null,dj=null;function fj(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var hj=typeof setTimeout=="function"?setTimeout:void 0,SV=typeof clearTimeout=="function"?clearTimeout:void 0,Xk=typeof Promise=="function"?Promise:void 0,CV=typeof queueMicrotask=="function"?queueMicrotask:typeof Xk<"u"?function(e){return Xk.resolve(null).then(e).catch(NV)}:hj;function NV(e){setTimeout(function(){throw e})}function vb(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),Ah(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);Ah(t)}function No(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Zk(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var $d=Math.random().toString(36).slice(2),Ii="__reactFiber$"+$d,$h="__reactProps$"+$d,ks="__reactContainer$"+$d,mj="__reactEvents$"+$d,kV="__reactListeners$"+$d,PV="__reactHandles$"+$d;function Nl(e){var t=e[Ii];if(t)return t;for(var r=e.parentNode;r;){if(t=r[ks]||r[Ii]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Zk(e);e!==null;){if(r=e[Ii])return r;e=Zk(e)}return t}e=r,r=e.parentNode}return null}function rp(e){return e=e[Ii]||e[ks],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function eu(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(je(33))}function ax(e){return e[$h]||null}var pj=[],tu=-1;function Yo(e){return{current:e}}function br(e){0>tu||(e.current=pj[tu],pj[tu]=null,tu--)}function fr(e,t){tu++,pj[tu]=e.current,e.current=t}var Lo={},In=Yo(Lo),na=Yo(!1),Xl=Lo;function Lu(e,t){var r=e.type.contextTypes;if(!r)return Lo;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function aa(e){return e=e.childContextTypes,e!=null}function Zg(){br(na),br(In)}function Qk(e,t,r){if(In.current!==Lo)throw Error(je(168));fr(In,t),fr(na,r)}function f$(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(je(108,f6(e)||"Unknown",a));return Er({},r,n)}function Qg(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Lo,Xl=In.current,fr(In,e),fr(na,na.current),!0}function Jk(e,t,r){var n=e.stateNode;if(!n)throw Error(je(169));r?(e=f$(e,t,Xl),n.__reactInternalMemoizedMergedChildContext=e,br(na),br(In),fr(In,e)):br(na),fr(na,r)}var ms=null,ix=!1,yb=!1;function h$(e){ms===null?ms=[e]:ms.push(e)}function EV(e){ix=!0,h$(e)}function Xo(){if(!yb&&ms!==null){yb=!0;var e=0,t=Ht;try{var r=ms;for(Ht=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}ms=null,ix=!1}catch(a){throw ms!==null&&(ms=ms.slice(e+1)),LM(yS,Xo),a}finally{Ht=t,yb=!1}}return null}var ru=[],nu=0,Jg=null,ev=0,Ra=[],Ma=0,Zl=null,vs=1,ys="";function pl(e,t){ru[nu++]=ev,ru[nu++]=Jg,Jg=e,ev=t}function m$(e,t,r){Ra[Ma++]=vs,Ra[Ma++]=ys,Ra[Ma++]=Zl,Zl=e;var n=vs;e=ys;var a=32-vi(n)-1;n&=~(1<<a),r+=1;var i=32-vi(t)+a;if(30<i){var o=a-a%5;i=(n&(1<<o)-1).toString(32),n>>=o,a-=o,vs=1<<32-vi(t)+a|r<<a|n,ys=i+e}else vs=1<<i|r<<a|n,ys=e}function kS(e){e.return!==null&&(pl(e,1),m$(e,1,0))}function PS(e){for(;e===Jg;)Jg=ru[--nu],ru[nu]=null,ev=ru[--nu],ru[nu]=null;for(;e===Zl;)Zl=Ra[--Ma],Ra[Ma]=null,ys=Ra[--Ma],Ra[Ma]=null,vs=Ra[--Ma],Ra[Ma]=null}var xa=null,ya=null,jr=!1,hi=null;function p$(e,t){var r=Ia(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function eP(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,xa=e,ya=No(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,xa=e,ya=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Zl!==null?{id:vs,overflow:ys}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Ia(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,xa=e,ya=null,!0):!1;default:return!1}}function gj(e){return(e.mode&1)!==0&&(e.flags&128)===0}function vj(e){if(jr){var t=ya;if(t){var r=t;if(!eP(e,t)){if(gj(e))throw Error(je(418));t=No(r.nextSibling);var n=xa;t&&eP(e,t)?p$(n,r):(e.flags=e.flags&-4097|2,jr=!1,xa=e)}}else{if(gj(e))throw Error(je(418));e.flags=e.flags&-4097|2,jr=!1,xa=e}}}function tP(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;xa=e}function Mp(e){if(e!==xa)return!1;if(!jr)return tP(e),jr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!fj(e.type,e.memoizedProps)),t&&(t=ya)){if(gj(e))throw g$(),Error(je(418));for(;t;)p$(e,t),t=No(t.nextSibling)}if(tP(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(je(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){ya=No(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}ya=null}}else ya=xa?No(e.stateNode.nextSibling):null;return!0}function g$(){for(var e=ya;e;)e=No(e.nextSibling)}function Bu(){ya=xa=null,jr=!1}function ES(e){hi===null?hi=[e]:hi.push(e)}var AV=Ds.ReactCurrentBatchConfig;function bf(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(je(309));var n=r.stateNode}if(!n)throw Error(je(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=a.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(je(284));if(!r._owner)throw Error(je(290,e))}return e}function $p(e,t){throw e=Object.prototype.toString.call(t),Error(je(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function rP(e){var t=e._init;return t(e._payload)}function v$(e){function t(v,x){if(e){var b=v.deletions;b===null?(v.deletions=[x],v.flags|=16):b.push(x)}}function r(v,x){if(!e)return null;for(;x!==null;)t(v,x),x=x.sibling;return null}function n(v,x){for(v=new Map;x!==null;)x.key!==null?v.set(x.key,x):v.set(x.index,x),x=x.sibling;return v}function a(v,x){return v=Ao(v,x),v.index=0,v.sibling=null,v}function i(v,x,b){return v.index=b,e?(b=v.alternate,b!==null?(b=b.index,b<x?(v.flags|=2,x):b):(v.flags|=2,x)):(v.flags|=1048576,x)}function o(v){return e&&v.alternate===null&&(v.flags|=2),v}function l(v,x,b,_){return x===null||x.tag!==6?(x=Cb(b,v.mode,_),x.return=v,x):(x=a(x,b),x.return=v,x)}function c(v,x,b,_){var j=b.type;return j===Xc?d(v,x,b.props.children,_,b.key):x!==null&&(x.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Js&&rP(j)===x.type)?(_=a(x,b.props),_.ref=bf(v,x,b),_.return=v,_):(_=Tg(b.type,b.key,b.props,null,v.mode,_),_.ref=bf(v,x,b),_.return=v,_)}function u(v,x,b,_){return x===null||x.tag!==4||x.stateNode.containerInfo!==b.containerInfo||x.stateNode.implementation!==b.implementation?(x=Nb(b,v.mode,_),x.return=v,x):(x=a(x,b.children||[]),x.return=v,x)}function d(v,x,b,_,j){return x===null||x.tag!==7?(x=Hl(b,v.mode,_,j),x.return=v,x):(x=a(x,b),x.return=v,x)}function f(v,x,b){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Cb(""+x,v.mode,b),x.return=v,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Sp:return b=Tg(x.type,x.key,x.props,null,v.mode,b),b.ref=bf(v,null,x),b.return=v,b;case Yc:return x=Nb(x,v.mode,b),x.return=v,x;case Js:var _=x._init;return f(v,_(x._payload),b)}if(Kf(x)||pf(x))return x=Hl(x,v.mode,b,null),x.return=v,x;$p(v,x)}return null}function h(v,x,b,_){var j=x!==null?x.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return j!==null?null:l(v,x,""+b,_);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Sp:return b.key===j?c(v,x,b,_):null;case Yc:return b.key===j?u(v,x,b,_):null;case Js:return j=b._init,h(v,x,j(b._payload),_)}if(Kf(b)||pf(b))return j!==null?null:d(v,x,b,_,null);$p(v,b)}return null}function m(v,x,b,_,j){if(typeof _=="string"&&_!==""||typeof _=="number")return v=v.get(b)||null,l(x,v,""+_,j);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Sp:return v=v.get(_.key===null?b:_.key)||null,c(x,v,_,j);case Yc:return v=v.get(_.key===null?b:_.key)||null,u(x,v,_,j);case Js:var S=_._init;return m(v,x,b,S(_._payload),j)}if(Kf(_)||pf(_))return v=v.get(b)||null,d(x,v,_,j,null);$p(x,_)}return null}function y(v,x,b,_){for(var j=null,S=null,C=x,k=x=0,N=null;C!==null&&k<b.length;k++){C.index>k?(N=C,C=null):N=C.sibling;var A=h(v,C,b[k],_);if(A===null){C===null&&(C=N);break}e&&C&&A.alternate===null&&t(v,C),x=i(A,x,k),S===null?j=A:S.sibling=A,S=A,C=N}if(k===b.length)return r(v,C),jr&&pl(v,k),j;if(C===null){for(;k<b.length;k++)C=f(v,b[k],_),C!==null&&(x=i(C,x,k),S===null?j=C:S.sibling=C,S=C);return jr&&pl(v,k),j}for(C=n(v,C);k<b.length;k++)N=m(C,v,k,b[k],_),N!==null&&(e&&N.alternate!==null&&C.delete(N.key===null?k:N.key),x=i(N,x,k),S===null?j=N:S.sibling=N,S=N);return e&&C.forEach(function(O){return t(v,O)}),jr&&pl(v,k),j}function g(v,x,b,_){var j=pf(b);if(typeof j!="function")throw Error(je(150));if(b=j.call(b),b==null)throw Error(je(151));for(var S=j=null,C=x,k=x=0,N=null,A=b.next();C!==null&&!A.done;k++,A=b.next()){C.index>k?(N=C,C=null):N=C.sibling;var O=h(v,C,A.value,_);if(O===null){C===null&&(C=N);break}e&&C&&O.alternate===null&&t(v,C),x=i(O,x,k),S===null?j=O:S.sibling=O,S=O,C=N}if(A.done)return r(v,C),jr&&pl(v,k),j;if(C===null){for(;!A.done;k++,A=b.next())A=f(v,A.value,_),A!==null&&(x=i(A,x,k),S===null?j=A:S.sibling=A,S=A);return jr&&pl(v,k),j}for(C=n(v,C);!A.done;k++,A=b.next())A=m(C,v,k,A.value,_),A!==null&&(e&&A.alternate!==null&&C.delete(A.key===null?k:A.key),x=i(A,x,k),S===null?j=A:S.sibling=A,S=A);return e&&C.forEach(function(E){return t(v,E)}),jr&&pl(v,k),j}function p(v,x,b,_){if(typeof b=="object"&&b!==null&&b.type===Xc&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Sp:e:{for(var j=b.key,S=x;S!==null;){if(S.key===j){if(j=b.type,j===Xc){if(S.tag===7){r(v,S.sibling),x=a(S,b.props.children),x.return=v,v=x;break e}}else if(S.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Js&&rP(j)===S.type){r(v,S.sibling),x=a(S,b.props),x.ref=bf(v,S,b),x.return=v,v=x;break e}r(v,S);break}else t(v,S);S=S.sibling}b.type===Xc?(x=Hl(b.props.children,v.mode,_,b.key),x.return=v,v=x):(_=Tg(b.type,b.key,b.props,null,v.mode,_),_.ref=bf(v,x,b),_.return=v,v=_)}return o(v);case Yc:e:{for(S=b.key;x!==null;){if(x.key===S)if(x.tag===4&&x.stateNode.containerInfo===b.containerInfo&&x.stateNode.implementation===b.implementation){r(v,x.sibling),x=a(x,b.children||[]),x.return=v,v=x;break e}else{r(v,x);break}else t(v,x);x=x.sibling}x=Nb(b,v.mode,_),x.return=v,v=x}return o(v);case Js:return S=b._init,p(v,x,S(b._payload),_)}if(Kf(b))return y(v,x,b,_);if(pf(b))return g(v,x,b,_);$p(v,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,x!==null&&x.tag===6?(r(v,x.sibling),x=a(x,b),x.return=v,v=x):(r(v,x),x=Cb(b,v.mode,_),x.return=v,v=x),o(v)):r(v,x)}return p}var Fu=v$(!0),y$=v$(!1),tv=Yo(null),rv=null,au=null,AS=null;function OS(){AS=au=rv=null}function TS(e){var t=tv.current;br(tv),e._currentValue=t}function yj(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function yu(e,t){rv=e,AS=au=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ta=!0),e.firstContext=null)}function Ua(e){var t=e._currentValue;if(AS!==e)if(e={context:e,memoizedValue:t,next:null},au===null){if(rv===null)throw Error(je(308));au=e,rv.dependencies={lanes:0,firstContext:e}}else au=au.next=e;return t}var kl=null;function RS(e){kl===null?kl=[e]:kl.push(e)}function x$(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,RS(t)):(r.next=a.next,a.next=r),t.interleaved=r,Ps(e,n)}function Ps(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var eo=!1;function MS(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function b$(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function js(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ko(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Et&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,Ps(e,r)}return a=n.interleaved,a===null?(t.next=t,RS(n)):(t.next=a.next,a.next=t),n.interleaved=t,Ps(e,r)}function Ng(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,xS(e,r)}}function nP(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function nv(e,t,r,n){var a=e.updateQueue;eo=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var f=a.baseState;o=0,d=u=c=null,l=i;do{var h=l.lane,m=l.eventTime;if((n&h)===h){d!==null&&(d=d.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=e,g=l;switch(h=t,m=r,g.tag){case 1:if(y=g.payload,typeof y=="function"){f=y.call(m,f,h);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=g.payload,h=typeof y=="function"?y.call(m,f,h):y,h==null)break e;f=Er({},f,h);break e;case 2:eo=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=a.effects,h===null?a.effects=[l]:h.push(l))}else m={eventTime:m,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=m,c=f):d=d.next=m,o|=h;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;h=l,l=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(!0);if(d===null&&(c=f),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=d,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);Jl|=o,e.lanes=o,e.memoizedState=f}}function aP(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(je(191,a));a.call(n)}}}var np={},Hi=Yo(np),Ih=Yo(np),Dh=Yo(np);function Pl(e){if(e===np)throw Error(je(174));return e}function $S(e,t){switch(fr(Dh,t),fr(Ih,e),fr(Hi,np),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Qw(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Qw(t,e)}br(Hi),fr(Hi,t)}function zu(){br(Hi),br(Ih),br(Dh)}function w$(e){Pl(Dh.current);var t=Pl(Hi.current),r=Qw(t,e.type);t!==r&&(fr(Ih,e),fr(Hi,r))}function IS(e){Ih.current===e&&(br(Hi),br(Ih))}var Sr=Yo(0);function av(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var xb=[];function DS(){for(var e=0;e<xb.length;e++)xb[e]._workInProgressVersionPrimary=null;xb.length=0}var kg=Ds.ReactCurrentDispatcher,bb=Ds.ReactCurrentBatchConfig,Ql=0,kr=null,en=null,un=null,iv=!1,ih=!1,Lh=0,OV=0;function kn(){throw Error(je(321))}function LS(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!ji(e[r],t[r]))return!1;return!0}function BS(e,t,r,n,a,i){if(Ql=i,kr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,kg.current=e===null||e.memoizedState===null?$V:IV,e=r(n,a),ih){i=0;do{if(ih=!1,Lh=0,25<=i)throw Error(je(301));i+=1,un=en=null,t.updateQueue=null,kg.current=DV,e=r(n,a)}while(ih)}if(kg.current=sv,t=en!==null&&en.next!==null,Ql=0,un=en=kr=null,iv=!1,t)throw Error(je(300));return e}function FS(){var e=Lh!==0;return Lh=0,e}function Ti(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return un===null?kr.memoizedState=un=e:un=un.next=e,un}function Va(){if(en===null){var e=kr.alternate;e=e!==null?e.memoizedState:null}else e=en.next;var t=un===null?kr.memoizedState:un.next;if(t!==null)un=t,en=e;else{if(e===null)throw Error(je(310));en=e,e={memoizedState:en.memoizedState,baseState:en.baseState,baseQueue:en.baseQueue,queue:en.queue,next:null},un===null?kr.memoizedState=un=e:un=un.next=e}return un}function Bh(e,t){return typeof t=="function"?t(e):t}function wb(e){var t=Va(),r=t.queue;if(r===null)throw Error(je(311));r.lastRenderedReducer=e;var n=en,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((Ql&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,o=n):c=c.next=f,kr.lanes|=d,Jl|=d}u=u.next}while(u!==null&&u!==i);c===null?o=n:c.next=l,ji(n,t.memoizedState)||(ta=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do i=a.lane,kr.lanes|=i,Jl|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function jb(e){var t=Va(),r=t.queue;if(r===null)throw Error(je(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);ji(i,t.memoizedState)||(ta=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function j$(){}function _$(e,t){var r=kr,n=Va(),a=t(),i=!ji(n.memoizedState,a);if(i&&(n.memoizedState=a,ta=!0),n=n.queue,zS(N$.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||un!==null&&un.memoizedState.tag&1){if(r.flags|=2048,Fh(9,C$.bind(null,r,n,a,t),void 0,null),fn===null)throw Error(je(349));Ql&30||S$(r,t,a)}return a}function S$(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=kr.updateQueue,t===null?(t={lastEffect:null,stores:null},kr.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function C$(e,t,r,n){t.value=r,t.getSnapshot=n,k$(t)&&P$(e)}function N$(e,t,r){return r(function(){k$(t)&&P$(e)})}function k$(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!ji(e,r)}catch{return!0}}function P$(e){var t=Ps(e,1);t!==null&&yi(t,e,1,-1)}function iP(e){var t=Ti();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bh,lastRenderedState:e},t.queue=e,e=e.dispatch=MV.bind(null,kr,e),[t.memoizedState,e]}function Fh(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=kr.updateQueue,t===null?(t={lastEffect:null,stores:null},kr.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function E$(){return Va().memoizedState}function Pg(e,t,r,n){var a=Ti();kr.flags|=e,a.memoizedState=Fh(1|t,r,void 0,n===void 0?null:n)}function sx(e,t,r,n){var a=Va();n=n===void 0?null:n;var i=void 0;if(en!==null){var o=en.memoizedState;if(i=o.destroy,n!==null&&LS(n,o.deps)){a.memoizedState=Fh(t,r,i,n);return}}kr.flags|=e,a.memoizedState=Fh(1|t,r,i,n)}function sP(e,t){return Pg(8390656,8,e,t)}function zS(e,t){return sx(2048,8,e,t)}function A$(e,t){return sx(4,2,e,t)}function O$(e,t){return sx(4,4,e,t)}function T$(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function R$(e,t,r){return r=r!=null?r.concat([e]):null,sx(4,4,T$.bind(null,t,e),r)}function US(){}function M$(e,t){var r=Va();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&LS(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function $$(e,t){var r=Va();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&LS(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function I$(e,t,r){return Ql&21?(ji(r,t)||(r=zM(),kr.lanes|=r,Jl|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ta=!0),e.memoizedState=r)}function TV(e,t){var r=Ht;Ht=r!==0&&4>r?r:4,e(!0);var n=bb.transition;bb.transition={};try{e(!1),t()}finally{Ht=r,bb.transition=n}}function D$(){return Va().memoizedState}function RV(e,t,r){var n=Eo(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},L$(e))B$(t,r);else if(r=x$(e,t,r,n),r!==null){var a=Hn();yi(r,e,n,a),F$(r,t,n)}}function MV(e,t,r){var n=Eo(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(L$(e))B$(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(a.hasEagerState=!0,a.eagerState=l,ji(l,o)){var c=t.interleaved;c===null?(a.next=a,RS(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=x$(e,t,a,n),r!==null&&(a=Hn(),yi(r,e,n,a),F$(r,t,n))}}function L$(e){var t=e.alternate;return e===kr||t!==null&&t===kr}function B$(e,t){ih=iv=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function F$(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,xS(e,r)}}var sv={readContext:Ua,useCallback:kn,useContext:kn,useEffect:kn,useImperativeHandle:kn,useInsertionEffect:kn,useLayoutEffect:kn,useMemo:kn,useReducer:kn,useRef:kn,useState:kn,useDebugValue:kn,useDeferredValue:kn,useTransition:kn,useMutableSource:kn,useSyncExternalStore:kn,useId:kn,unstable_isNewReconciler:!1},$V={readContext:Ua,useCallback:function(e,t){return Ti().memoizedState=[e,t===void 0?null:t],e},useContext:Ua,useEffect:sP,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Pg(4194308,4,T$.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Pg(4194308,4,e,t)},useInsertionEffect:function(e,t){return Pg(4,2,e,t)},useMemo:function(e,t){var r=Ti();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Ti();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=RV.bind(null,kr,e),[n.memoizedState,e]},useRef:function(e){var t=Ti();return e={current:e},t.memoizedState=e},useState:iP,useDebugValue:US,useDeferredValue:function(e){return Ti().memoizedState=e},useTransition:function(){var e=iP(!1),t=e[0];return e=TV.bind(null,e[1]),Ti().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=kr,a=Ti();if(jr){if(r===void 0)throw Error(je(407));r=r()}else{if(r=t(),fn===null)throw Error(je(349));Ql&30||S$(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,sP(N$.bind(null,n,i,e),[e]),n.flags|=2048,Fh(9,C$.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=Ti(),t=fn.identifierPrefix;if(jr){var r=ys,n=vs;r=(n&~(1<<32-vi(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Lh++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=OV++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},IV={readContext:Ua,useCallback:M$,useContext:Ua,useEffect:zS,useImperativeHandle:R$,useInsertionEffect:A$,useLayoutEffect:O$,useMemo:$$,useReducer:wb,useRef:E$,useState:function(){return wb(Bh)},useDebugValue:US,useDeferredValue:function(e){var t=Va();return I$(t,en.memoizedState,e)},useTransition:function(){var e=wb(Bh)[0],t=Va().memoizedState;return[e,t]},useMutableSource:j$,useSyncExternalStore:_$,useId:D$,unstable_isNewReconciler:!1},DV={readContext:Ua,useCallback:M$,useContext:Ua,useEffect:zS,useImperativeHandle:R$,useInsertionEffect:A$,useLayoutEffect:O$,useMemo:$$,useReducer:jb,useRef:E$,useState:function(){return jb(Bh)},useDebugValue:US,useDeferredValue:function(e){var t=Va();return en===null?t.memoizedState=e:I$(t,en.memoizedState,e)},useTransition:function(){var e=jb(Bh)[0],t=Va().memoizedState;return[e,t]},useMutableSource:j$,useSyncExternalStore:_$,useId:D$,unstable_isNewReconciler:!1};function ni(e,t){if(e&&e.defaultProps){t=Er({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function xj(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Er({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var ox={isMounted:function(e){return(e=e._reactInternals)?mc(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Hn(),a=Eo(e),i=js(n,a);i.payload=t,r!=null&&(i.callback=r),t=ko(e,i,a),t!==null&&(yi(t,e,a,n),Ng(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Hn(),a=Eo(e),i=js(n,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=ko(e,i,a),t!==null&&(yi(t,e,a,n),Ng(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Hn(),n=Eo(e),a=js(r,n);a.tag=2,t!=null&&(a.callback=t),t=ko(e,a,n),t!==null&&(yi(t,e,n,r),Ng(t,e,n))}};function oP(e,t,r,n,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!Th(r,n)||!Th(a,i):!0}function z$(e,t,r){var n=!1,a=Lo,i=t.contextType;return typeof i=="object"&&i!==null?i=Ua(i):(a=aa(t)?Xl:In.current,n=t.contextTypes,i=(n=n!=null)?Lu(e,a):Lo),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ox,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function lP(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&ox.enqueueReplaceState(t,t.state,null)}function bj(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},MS(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=Ua(i):(i=aa(t)?Xl:In.current,a.context=Lu(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(xj(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&ox.enqueueReplaceState(a,a.state,null),nv(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Uu(e,t){try{var r="",n=t;do r+=d6(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function _b(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function wj(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var LV=typeof WeakMap=="function"?WeakMap:Map;function U$(e,t,r){r=js(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){lv||(lv=!0,Oj=n),wj(e,t)},r}function V$(e,t,r){r=js(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){wj(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){wj(e,t),typeof n!="function"&&(Po===null?Po=new Set([this]):Po.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function cP(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new LV;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=QV.bind(null,e,t,r),t.then(e,e))}function uP(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function dP(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=js(-1,1),t.tag=2,ko(r,t,1))),r.lanes|=1),e)}var BV=Ds.ReactCurrentOwner,ta=!1;function Bn(e,t,r,n){t.child=e===null?y$(t,null,r,n):Fu(t,e.child,r,n)}function fP(e,t,r,n,a){r=r.render;var i=t.ref;return yu(t,a),n=BS(e,t,r,n,i,a),r=FS(),e!==null&&!ta?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Es(e,t,a)):(jr&&r&&kS(t),t.flags|=1,Bn(e,t,n,a),t.child)}function hP(e,t,r,n,a){if(e===null){var i=r.type;return typeof i=="function"&&!XS(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,W$(e,t,i,n,a)):(e=Tg(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:Th,r(o,n)&&e.ref===t.ref)return Es(e,t,a)}return t.flags|=1,e=Ao(i,n),e.ref=t.ref,e.return=t,t.child=e}function W$(e,t,r,n,a){if(e!==null){var i=e.memoizedProps;if(Th(i,n)&&e.ref===t.ref)if(ta=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(ta=!0);else return t.lanes=e.lanes,Es(e,t,a)}return jj(e,t,r,n,a)}function H$(e,t,r){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},fr(su,fa),fa|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,fr(su,fa),fa|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,fr(su,fa),fa|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,fr(su,fa),fa|=n;return Bn(e,t,a,r),t.child}function q$(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function jj(e,t,r,n,a){var i=aa(r)?Xl:In.current;return i=Lu(t,i),yu(t,a),r=BS(e,t,r,n,i,a),n=FS(),e!==null&&!ta?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Es(e,t,a)):(jr&&n&&kS(t),t.flags|=1,Bn(e,t,r,a),t.child)}function mP(e,t,r,n,a){if(aa(r)){var i=!0;Qg(t)}else i=!1;if(yu(t,a),t.stateNode===null)Eg(e,t),z$(t,r,n),bj(t,r,n,a),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=Ua(u):(u=aa(r)?Xl:In.current,u=Lu(t,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&lP(t,o,n,u),eo=!1;var h=t.memoizedState;o.state=h,nv(t,n,o,a),c=t.memoizedState,l!==n||h!==c||na.current||eo?(typeof d=="function"&&(xj(t,r,d,n),c=t.memoizedState),(l=eo||oP(t,r,l,n,h,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,b$(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:ni(t.type,l),o.props=u,f=t.pendingProps,h=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=Ua(c):(c=aa(r)?Xl:In.current,c=Lu(t,c));var m=r.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||h!==c)&&lP(t,o,n,c),eo=!1,h=t.memoizedState,o.state=h,nv(t,n,o,a);var y=t.memoizedState;l!==f||h!==y||na.current||eo?(typeof m=="function"&&(xj(t,r,m,n),y=t.memoizedState),(u=eo||oP(t,r,u,n,h,y,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,y,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,y,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=y),o.props=n,o.state=y,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return _j(e,t,r,n,i,a)}function _j(e,t,r,n,a,i){q$(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return a&&Jk(t,r,!1),Es(e,t,i);n=t.stateNode,BV.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=Fu(t,e.child,null,i),t.child=Fu(t,null,l,i)):Bn(e,t,l,i),t.memoizedState=n.state,a&&Jk(t,r,!0),t.child}function K$(e){var t=e.stateNode;t.pendingContext?Qk(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Qk(e,t.context,!1),$S(e,t.containerInfo)}function pP(e,t,r,n,a){return Bu(),ES(a),t.flags|=256,Bn(e,t,r,n),t.child}var Sj={dehydrated:null,treeContext:null,retryLane:0};function Cj(e){return{baseLanes:e,cachePool:null,transitions:null}}function G$(e,t,r){var n=t.pendingProps,a=Sr.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),fr(Sr,a&1),e===null)return vj(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=ux(o,n,0,null),e=Hl(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Cj(r),t.memoizedState=Sj,e):VS(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return FV(e,t,o,n,l,a,r);if(i){i=n.fallback,o=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=Ao(a,c),n.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=Ao(l,i):(i=Hl(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?Cj(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=Sj,n}return i=e.child,e=i.sibling,n=Ao(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function VS(e,t){return t=ux({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ip(e,t,r,n){return n!==null&&ES(n),Fu(t,e.child,null,r),e=VS(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function FV(e,t,r,n,a,i,o){if(r)return t.flags&256?(t.flags&=-257,n=_b(Error(je(422))),Ip(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=ux({mode:"visible",children:n.children},a,0,null),i=Hl(i,a,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&Fu(t,e.child,null,o),t.child.memoizedState=Cj(o),t.memoizedState=Sj,i);if(!(t.mode&1))return Ip(e,t,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(je(419)),n=_b(i,n,void 0),Ip(e,t,o,n)}if(l=(o&e.childLanes)!==0,ta||l){if(n=fn,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Ps(e,a),yi(n,e,a,-1))}return YS(),n=_b(Error(je(421))),Ip(e,t,o,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=JV.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,ya=No(a.nextSibling),xa=t,jr=!0,hi=null,e!==null&&(Ra[Ma++]=vs,Ra[Ma++]=ys,Ra[Ma++]=Zl,vs=e.id,ys=e.overflow,Zl=t),t=VS(t,n.children),t.flags|=4096,t)}function gP(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),yj(e.return,t,r)}function Sb(e,t,r,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function Y$(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(Bn(e,t,n.children,r),n=Sr.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&gP(e,r,t);else if(e.tag===19)gP(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(fr(Sr,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&av(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),Sb(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&av(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}Sb(t,!0,r,null,i);break;case"together":Sb(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Eg(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Es(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Jl|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(je(153));if(t.child!==null){for(e=t.child,r=Ao(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Ao(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function zV(e,t,r){switch(t.tag){case 3:K$(t),Bu();break;case 5:w$(t);break;case 1:aa(t.type)&&Qg(t);break;case 4:$S(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;fr(tv,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(fr(Sr,Sr.current&1),t.flags|=128,null):r&t.child.childLanes?G$(e,t,r):(fr(Sr,Sr.current&1),e=Es(e,t,r),e!==null?e.sibling:null);fr(Sr,Sr.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return Y$(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),fr(Sr,Sr.current),n)break;return null;case 22:case 23:return t.lanes=0,H$(e,t,r)}return Es(e,t,r)}var X$,Nj,Z$,Q$;X$=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Nj=function(){};Z$=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,Pl(Hi.current);var i=null;switch(r){case"input":a=Gw(e,a),n=Gw(e,n),i=[];break;case"select":a=Er({},a,{value:void 0}),n=Er({},n,{value:void 0}),i=[];break;case"textarea":a=Zw(e,a),n=Zw(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Xg)}Jw(r,n);var o;r=null;for(u in a)if(!n.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var l=a[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ch.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=a!=null?a[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ch.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&gr("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};Q$=function(e,t,r,n){r!==n&&(t.flags|=4)};function wf(e,t){if(!jr)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Pn(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function UV(e,t,r){var n=t.pendingProps;switch(PS(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pn(t),null;case 1:return aa(t.type)&&Zg(),Pn(t),null;case 3:return n=t.stateNode,zu(),br(na),br(In),DS(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Mp(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,hi!==null&&(Mj(hi),hi=null))),Nj(e,t),Pn(t),null;case 5:IS(t);var a=Pl(Dh.current);if(r=t.type,e!==null&&t.stateNode!=null)Z$(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(je(166));return Pn(t),null}if(e=Pl(Hi.current),Mp(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[Ii]=t,n[$h]=i,e=(t.mode&1)!==0,r){case"dialog":gr("cancel",n),gr("close",n);break;case"iframe":case"object":case"embed":gr("load",n);break;case"video":case"audio":for(a=0;a<Yf.length;a++)gr(Yf[a],n);break;case"source":gr("error",n);break;case"img":case"image":case"link":gr("error",n),gr("load",n);break;case"details":gr("toggle",n);break;case"input":Ck(n,i),gr("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},gr("invalid",n);break;case"textarea":kk(n,i),gr("invalid",n)}Jw(r,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&Rp(n.textContent,l,e),a=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Rp(n.textContent,l,e),a=["children",""+l]):Ch.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&gr("scroll",n)}switch(r){case"input":Cp(n),Nk(n,i,!0);break;case"textarea":Cp(n),Pk(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Xg)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=NM(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[Ii]=t,e[$h]=n,X$(e,t,!1,!1),t.stateNode=e;e:{switch(o=ej(r,n),r){case"dialog":gr("cancel",e),gr("close",e),a=n;break;case"iframe":case"object":case"embed":gr("load",e),a=n;break;case"video":case"audio":for(a=0;a<Yf.length;a++)gr(Yf[a],e);a=n;break;case"source":gr("error",e),a=n;break;case"img":case"image":case"link":gr("error",e),gr("load",e),a=n;break;case"details":gr("toggle",e),a=n;break;case"input":Ck(e,n),a=Gw(e,n),gr("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=Er({},n,{value:void 0}),gr("invalid",e);break;case"textarea":kk(e,n),a=Zw(e,n),gr("invalid",e);break;default:a=n}Jw(r,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?EM(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&kM(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Nh(e,c):typeof c=="number"&&Nh(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ch.hasOwnProperty(i)?c!=null&&i==="onScroll"&&gr("scroll",e):c!=null&&hS(e,i,c,o))}switch(r){case"input":Cp(e),Nk(e,n,!1);break;case"textarea":Cp(e),Pk(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Do(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?mu(e,!!n.multiple,i,!1):n.defaultValue!=null&&mu(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Xg)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Pn(t),null;case 6:if(e&&t.stateNode!=null)Q$(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(je(166));if(r=Pl(Dh.current),Pl(Hi.current),Mp(t)){if(n=t.stateNode,r=t.memoizedProps,n[Ii]=t,(i=n.nodeValue!==r)&&(e=xa,e!==null))switch(e.tag){case 3:Rp(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Rp(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Ii]=t,t.stateNode=n}return Pn(t),null;case 13:if(br(Sr),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(jr&&ya!==null&&t.mode&1&&!(t.flags&128))g$(),Bu(),t.flags|=98560,i=!1;else if(i=Mp(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(je(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(je(317));i[Ii]=t}else Bu(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Pn(t),i=!1}else hi!==null&&(Mj(hi),hi=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Sr.current&1?rn===0&&(rn=3):YS())),t.updateQueue!==null&&(t.flags|=4),Pn(t),null);case 4:return zu(),Nj(e,t),e===null&&Rh(t.stateNode.containerInfo),Pn(t),null;case 10:return TS(t.type._context),Pn(t),null;case 17:return aa(t.type)&&Zg(),Pn(t),null;case 19:if(br(Sr),i=t.memoizedState,i===null)return Pn(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)wf(i,!1);else{if(rn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=av(e),o!==null){for(t.flags|=128,wf(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return fr(Sr,Sr.current&1|2),t.child}e=e.sibling}i.tail!==null&&zr()>Vu&&(t.flags|=128,n=!0,wf(i,!1),t.lanes=4194304)}else{if(!n)if(e=av(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),wf(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!jr)return Pn(t),null}else 2*zr()-i.renderingStartTime>Vu&&r!==1073741824&&(t.flags|=128,n=!0,wf(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=zr(),t.sibling=null,r=Sr.current,fr(Sr,n?r&1|2:r&1),t):(Pn(t),null);case 22:case 23:return GS(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?fa&1073741824&&(Pn(t),t.subtreeFlags&6&&(t.flags|=8192)):Pn(t),null;case 24:return null;case 25:return null}throw Error(je(156,t.tag))}function VV(e,t){switch(PS(t),t.tag){case 1:return aa(t.type)&&Zg(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return zu(),br(na),br(In),DS(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return IS(t),null;case 13:if(br(Sr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(je(340));Bu()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return br(Sr),null;case 4:return zu(),null;case 10:return TS(t.type._context),null;case 22:case 23:return GS(),null;case 24:return null;default:return null}}var Dp=!1,On=!1,WV=typeof WeakSet=="function"?WeakSet:Set,Le=null;function iu(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Ir(e,t,n)}else r.current=null}function kj(e,t,r){try{r()}catch(n){Ir(e,t,n)}}var vP=!1;function HV(e,t){if(uj=Kg,e=n$(),NS(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,f=e,h=null;t:for(;;){for(var m;f!==r||a!==0&&f.nodeType!==3||(l=o+a),f!==i||n!==0&&f.nodeType!==3||(c=o+n),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)h=f,f=m;for(;;){if(f===e)break t;if(h===r&&++u===a&&(l=o),h===i&&++d===n&&(c=o),(m=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=m}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(dj={focusedElem:e,selectionRange:r},Kg=!1,Le=t;Le!==null;)if(t=Le,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Le=e;else for(;Le!==null;){t=Le;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var g=y.memoizedProps,p=y.memoizedState,v=t.stateNode,x=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:ni(t.type,g),p);v.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(je(163))}}catch(_){Ir(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,Le=e;break}Le=t.return}return y=vP,vP=!1,y}function sh(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&kj(t,r,i)}a=a.next}while(a!==n)}}function lx(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Pj(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function J$(e){var t=e.alternate;t!==null&&(e.alternate=null,J$(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ii],delete t[$h],delete t[mj],delete t[kV],delete t[PV])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function eI(e){return e.tag===5||e.tag===3||e.tag===4}function yP(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||eI(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ej(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Xg));else if(n!==4&&(e=e.child,e!==null))for(Ej(e,t,r),e=e.sibling;e!==null;)Ej(e,t,r),e=e.sibling}function Aj(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Aj(e,t,r),e=e.sibling;e!==null;)Aj(e,t,r),e=e.sibling}var wn=null,ci=!1;function qs(e,t,r){for(r=r.child;r!==null;)tI(e,t,r),r=r.sibling}function tI(e,t,r){if(Wi&&typeof Wi.onCommitFiberUnmount=="function")try{Wi.onCommitFiberUnmount(ex,r)}catch{}switch(r.tag){case 5:On||iu(r,t);case 6:var n=wn,a=ci;wn=null,qs(e,t,r),wn=n,ci=a,wn!==null&&(ci?(e=wn,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):wn.removeChild(r.stateNode));break;case 18:wn!==null&&(ci?(e=wn,r=r.stateNode,e.nodeType===8?vb(e.parentNode,r):e.nodeType===1&&vb(e,r),Ah(e)):vb(wn,r.stateNode));break;case 4:n=wn,a=ci,wn=r.stateNode.containerInfo,ci=!0,qs(e,t,r),wn=n,ci=a;break;case 0:case 11:case 14:case 15:if(!On&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&kj(r,t,o),a=a.next}while(a!==n)}qs(e,t,r);break;case 1:if(!On&&(iu(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){Ir(r,t,l)}qs(e,t,r);break;case 21:qs(e,t,r);break;case 22:r.mode&1?(On=(n=On)||r.memoizedState!==null,qs(e,t,r),On=n):qs(e,t,r);break;default:qs(e,t,r)}}function xP(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new WV),t.forEach(function(n){var a=eW.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function Qa(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:wn=l.stateNode,ci=!1;break e;case 3:wn=l.stateNode.containerInfo,ci=!0;break e;case 4:wn=l.stateNode.containerInfo,ci=!0;break e}l=l.return}if(wn===null)throw Error(je(160));tI(i,o,a),wn=null,ci=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(u){Ir(a,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)rI(t,e),t=t.sibling}function rI(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Qa(t,e),Ai(e),n&4){try{sh(3,e,e.return),lx(3,e)}catch(g){Ir(e,e.return,g)}try{sh(5,e,e.return)}catch(g){Ir(e,e.return,g)}}break;case 1:Qa(t,e),Ai(e),n&512&&r!==null&&iu(r,r.return);break;case 5:if(Qa(t,e),Ai(e),n&512&&r!==null&&iu(r,r.return),e.flags&32){var a=e.stateNode;try{Nh(a,"")}catch(g){Ir(e,e.return,g)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&SM(a,i),ej(l,o);var u=ej(l,i);for(o=0;o<c.length;o+=2){var d=c[o],f=c[o+1];d==="style"?EM(a,f):d==="dangerouslySetInnerHTML"?kM(a,f):d==="children"?Nh(a,f):hS(a,d,f,u)}switch(l){case"input":Yw(a,i);break;case"textarea":CM(a,i);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?mu(a,!!i.multiple,m,!1):h!==!!i.multiple&&(i.defaultValue!=null?mu(a,!!i.multiple,i.defaultValue,!0):mu(a,!!i.multiple,i.multiple?[]:"",!1))}a[$h]=i}catch(g){Ir(e,e.return,g)}}break;case 6:if(Qa(t,e),Ai(e),n&4){if(e.stateNode===null)throw Error(je(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(g){Ir(e,e.return,g)}}break;case 3:if(Qa(t,e),Ai(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Ah(t.containerInfo)}catch(g){Ir(e,e.return,g)}break;case 4:Qa(t,e),Ai(e);break;case 13:Qa(t,e),Ai(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(qS=zr())),n&4&&xP(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(On=(u=On)||d,Qa(t,e),On=u):Qa(t,e),Ai(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(Le=e,d=e.child;d!==null;){for(f=Le=d;Le!==null;){switch(h=Le,m=h.child,h.tag){case 0:case 11:case 14:case 15:sh(4,h,h.return);break;case 1:iu(h,h.return);var y=h.stateNode;if(typeof y.componentWillUnmount=="function"){n=h,r=h.return;try{t=n,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(g){Ir(n,r,g)}}break;case 5:iu(h,h.return);break;case 22:if(h.memoizedState!==null){wP(f);continue}}m!==null?(m.return=h,Le=m):wP(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{a=f.stateNode,u?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=PM("display",o))}catch(g){Ir(e,e.return,g)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(g){Ir(e,e.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Qa(t,e),Ai(e),n&4&&xP(e);break;case 21:break;default:Qa(t,e),Ai(e)}}function Ai(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(eI(r)){var n=r;break e}r=r.return}throw Error(je(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(Nh(a,""),n.flags&=-33);var i=yP(e);Aj(e,i,a);break;case 3:case 4:var o=n.stateNode.containerInfo,l=yP(e);Ej(e,l,o);break;default:throw Error(je(161))}}catch(c){Ir(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function qV(e,t,r){Le=e,nI(e)}function nI(e,t,r){for(var n=(e.mode&1)!==0;Le!==null;){var a=Le,i=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||Dp;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||On;l=Dp;var u=On;if(Dp=o,(On=c)&&!u)for(Le=a;Le!==null;)o=Le,c=o.child,o.tag===22&&o.memoizedState!==null?jP(a):c!==null?(c.return=o,Le=c):jP(a);for(;i!==null;)Le=i,nI(i),i=i.sibling;Le=a,Dp=l,On=u}bP(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,Le=i):bP(e)}}function bP(e){for(;Le!==null;){var t=Le;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:On||lx(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!On)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:ni(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&aP(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}aP(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Ah(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(je(163))}On||t.flags&512&&Pj(t)}catch(h){Ir(t,t.return,h)}}if(t===e){Le=null;break}if(r=t.sibling,r!==null){r.return=t.return,Le=r;break}Le=t.return}}function wP(e){for(;Le!==null;){var t=Le;if(t===e){Le=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Le=r;break}Le=t.return}}function jP(e){for(;Le!==null;){var t=Le;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{lx(4,t)}catch(c){Ir(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){Ir(t,a,c)}}var i=t.return;try{Pj(t)}catch(c){Ir(t,i,c)}break;case 5:var o=t.return;try{Pj(t)}catch(c){Ir(t,o,c)}}}catch(c){Ir(t,t.return,c)}if(t===e){Le=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Le=l;break}Le=t.return}}var KV=Math.ceil,ov=Ds.ReactCurrentDispatcher,WS=Ds.ReactCurrentOwner,La=Ds.ReactCurrentBatchConfig,Et=0,fn=null,Kr=null,jn=0,fa=0,su=Yo(0),rn=0,zh=null,Jl=0,cx=0,HS=0,oh=null,ea=null,qS=0,Vu=1/0,ds=null,lv=!1,Oj=null,Po=null,Lp=!1,po=null,cv=0,lh=0,Tj=null,Ag=-1,Og=0;function Hn(){return Et&6?zr():Ag!==-1?Ag:Ag=zr()}function Eo(e){return e.mode&1?Et&2&&jn!==0?jn&-jn:AV.transition!==null?(Og===0&&(Og=zM()),Og):(e=Ht,e!==0||(e=window.event,e=e===void 0?16:GM(e.type)),e):1}function yi(e,t,r,n){if(50<lh)throw lh=0,Tj=null,Error(je(185));ep(e,r,n),(!(Et&2)||e!==fn)&&(e===fn&&(!(Et&2)&&(cx|=r),rn===4&&io(e,jn)),ia(e,n),r===1&&Et===0&&!(t.mode&1)&&(Vu=zr()+500,ix&&Xo()))}function ia(e,t){var r=e.callbackNode;A6(e,t);var n=qg(e,e===fn?jn:0);if(n===0)r!==null&&Ok(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Ok(r),t===1)e.tag===0?EV(_P.bind(null,e)):h$(_P.bind(null,e)),CV(function(){!(Et&6)&&Xo()}),r=null;else{switch(UM(n)){case 1:r=yS;break;case 4:r=BM;break;case 16:r=Hg;break;case 536870912:r=FM;break;default:r=Hg}r=dI(r,aI.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function aI(e,t){if(Ag=-1,Og=0,Et&6)throw Error(je(327));var r=e.callbackNode;if(xu()&&e.callbackNode!==r)return null;var n=qg(e,e===fn?jn:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=uv(e,n);else{t=n;var a=Et;Et|=2;var i=sI();(fn!==e||jn!==t)&&(ds=null,Vu=zr()+500,Wl(e,t));do try{XV();break}catch(l){iI(e,l)}while(!0);OS(),ov.current=i,Et=a,Kr!==null?t=0:(fn=null,jn=0,t=rn)}if(t!==0){if(t===2&&(a=ij(e),a!==0&&(n=a,t=Rj(e,a))),t===1)throw r=zh,Wl(e,0),io(e,n),ia(e,zr()),r;if(t===6)io(e,n);else{if(a=e.current.alternate,!(n&30)&&!GV(a)&&(t=uv(e,n),t===2&&(i=ij(e),i!==0&&(n=i,t=Rj(e,i))),t===1))throw r=zh,Wl(e,0),io(e,n),ia(e,zr()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(je(345));case 2:gl(e,ea,ds);break;case 3:if(io(e,n),(n&130023424)===n&&(t=qS+500-zr(),10<t)){if(qg(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){Hn(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=hj(gl.bind(null,e,ea,ds),t);break}gl(e,ea,ds);break;case 4:if(io(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var o=31-vi(n);i=1<<o,o=t[o],o>a&&(a=o),n&=~i}if(n=a,n=zr()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*KV(n/1960))-n,10<n){e.timeoutHandle=hj(gl.bind(null,e,ea,ds),n);break}gl(e,ea,ds);break;case 5:gl(e,ea,ds);break;default:throw Error(je(329))}}}return ia(e,zr()),e.callbackNode===r?aI.bind(null,e):null}function Rj(e,t){var r=oh;return e.current.memoizedState.isDehydrated&&(Wl(e,t).flags|=256),e=uv(e,t),e!==2&&(t=ea,ea=r,t!==null&&Mj(t)),e}function Mj(e){ea===null?ea=e:ea.push.apply(ea,e)}function GV(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!ji(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function io(e,t){for(t&=~HS,t&=~cx,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-vi(t),n=1<<r;e[r]=-1,t&=~n}}function _P(e){if(Et&6)throw Error(je(327));xu();var t=qg(e,0);if(!(t&1))return ia(e,zr()),null;var r=uv(e,t);if(e.tag!==0&&r===2){var n=ij(e);n!==0&&(t=n,r=Rj(e,n))}if(r===1)throw r=zh,Wl(e,0),io(e,t),ia(e,zr()),r;if(r===6)throw Error(je(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,gl(e,ea,ds),ia(e,zr()),null}function KS(e,t){var r=Et;Et|=1;try{return e(t)}finally{Et=r,Et===0&&(Vu=zr()+500,ix&&Xo())}}function ec(e){po!==null&&po.tag===0&&!(Et&6)&&xu();var t=Et;Et|=1;var r=La.transition,n=Ht;try{if(La.transition=null,Ht=1,e)return e()}finally{Ht=n,La.transition=r,Et=t,!(Et&6)&&Xo()}}function GS(){fa=su.current,br(su)}function Wl(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,SV(r)),Kr!==null)for(r=Kr.return;r!==null;){var n=r;switch(PS(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Zg();break;case 3:zu(),br(na),br(In),DS();break;case 5:IS(n);break;case 4:zu();break;case 13:br(Sr);break;case 19:br(Sr);break;case 10:TS(n.type._context);break;case 22:case 23:GS()}r=r.return}if(fn=e,Kr=e=Ao(e.current,null),jn=fa=t,rn=0,zh=null,HS=cx=Jl=0,ea=oh=null,kl!==null){for(t=0;t<kl.length;t++)if(r=kl[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=a,n.next=o}r.pending=n}kl=null}return e}function iI(e,t){do{var r=Kr;try{if(OS(),kg.current=sv,iv){for(var n=kr.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}iv=!1}if(Ql=0,un=en=kr=null,ih=!1,Lh=0,WS.current=null,r===null||r.return===null){rn=1,zh=t,Kr=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=jn,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=uP(o);if(m!==null){m.flags&=-257,dP(m,o,l,i,t),m.mode&1&&cP(i,u,t),t=m,c=u;var y=t.updateQueue;if(y===null){var g=new Set;g.add(c),t.updateQueue=g}else y.add(c);break e}else{if(!(t&1)){cP(i,u,t),YS();break e}c=Error(je(426))}}else if(jr&&l.mode&1){var p=uP(o);if(p!==null){!(p.flags&65536)&&(p.flags|=256),dP(p,o,l,i,t),ES(Uu(c,l));break e}}i=c=Uu(c,l),rn!==4&&(rn=2),oh===null?oh=[i]:oh.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var v=U$(i,c,t);nP(i,v);break e;case 1:l=c;var x=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Po===null||!Po.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t;var _=V$(i,l,t);nP(i,_);break e}}i=i.return}while(i!==null)}lI(r)}catch(j){t=j,Kr===r&&r!==null&&(Kr=r=r.return);continue}break}while(!0)}function sI(){var e=ov.current;return ov.current=sv,e===null?sv:e}function YS(){(rn===0||rn===3||rn===2)&&(rn=4),fn===null||!(Jl&268435455)&&!(cx&268435455)||io(fn,jn)}function uv(e,t){var r=Et;Et|=2;var n=sI();(fn!==e||jn!==t)&&(ds=null,Wl(e,t));do try{YV();break}catch(a){iI(e,a)}while(!0);if(OS(),Et=r,ov.current=n,Kr!==null)throw Error(je(261));return fn=null,jn=0,rn}function YV(){for(;Kr!==null;)oI(Kr)}function XV(){for(;Kr!==null&&!w6();)oI(Kr)}function oI(e){var t=uI(e.alternate,e,fa);e.memoizedProps=e.pendingProps,t===null?lI(e):Kr=t,WS.current=null}function lI(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=VV(r,t),r!==null){r.flags&=32767,Kr=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{rn=6,Kr=null;return}}else if(r=UV(r,t,fa),r!==null){Kr=r;return}if(t=t.sibling,t!==null){Kr=t;return}Kr=t=e}while(t!==null);rn===0&&(rn=5)}function gl(e,t,r){var n=Ht,a=La.transition;try{La.transition=null,Ht=1,ZV(e,t,r,n)}finally{La.transition=a,Ht=n}return null}function ZV(e,t,r,n){do xu();while(po!==null);if(Et&6)throw Error(je(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(je(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(O6(e,i),e===fn&&(Kr=fn=null,jn=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Lp||(Lp=!0,dI(Hg,function(){return xu(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=La.transition,La.transition=null;var o=Ht;Ht=1;var l=Et;Et|=4,WS.current=null,HV(e,r),rI(r,e),vV(dj),Kg=!!uj,dj=uj=null,e.current=r,qV(r),j6(),Et=l,Ht=o,La.transition=i}else e.current=r;if(Lp&&(Lp=!1,po=e,cv=a),i=e.pendingLanes,i===0&&(Po=null),C6(r.stateNode),ia(e,zr()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(lv)throw lv=!1,e=Oj,Oj=null,e;return cv&1&&e.tag!==0&&xu(),i=e.pendingLanes,i&1?e===Tj?lh++:(lh=0,Tj=e):lh=0,Xo(),null}function xu(){if(po!==null){var e=UM(cv),t=La.transition,r=Ht;try{if(La.transition=null,Ht=16>e?16:e,po===null)var n=!1;else{if(e=po,po=null,cv=0,Et&6)throw Error(je(331));var a=Et;for(Et|=4,Le=e.current;Le!==null;){var i=Le,o=i.child;if(Le.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Le=u;Le!==null;){var d=Le;switch(d.tag){case 0:case 11:case 15:sh(8,d,i)}var f=d.child;if(f!==null)f.return=d,Le=f;else for(;Le!==null;){d=Le;var h=d.sibling,m=d.return;if(J$(d),d===u){Le=null;break}if(h!==null){h.return=m,Le=h;break}Le=m}}}var y=i.alternate;if(y!==null){var g=y.child;if(g!==null){y.child=null;do{var p=g.sibling;g.sibling=null,g=p}while(g!==null)}}Le=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Le=o;else e:for(;Le!==null;){if(i=Le,i.flags&2048)switch(i.tag){case 0:case 11:case 15:sh(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,Le=v;break e}Le=i.return}}var x=e.current;for(Le=x;Le!==null;){o=Le;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,Le=b;else e:for(o=x;Le!==null;){if(l=Le,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:lx(9,l)}}catch(j){Ir(l,l.return,j)}if(l===o){Le=null;break e}var _=l.sibling;if(_!==null){_.return=l.return,Le=_;break e}Le=l.return}}if(Et=a,Xo(),Wi&&typeof Wi.onPostCommitFiberRoot=="function")try{Wi.onPostCommitFiberRoot(ex,e)}catch{}n=!0}return n}finally{Ht=r,La.transition=t}}return!1}function SP(e,t,r){t=Uu(r,t),t=U$(e,t,1),e=ko(e,t,1),t=Hn(),e!==null&&(ep(e,1,t),ia(e,t))}function Ir(e,t,r){if(e.tag===3)SP(e,e,r);else for(;t!==null;){if(t.tag===3){SP(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Po===null||!Po.has(n))){e=Uu(r,e),e=V$(t,e,1),t=ko(t,e,1),e=Hn(),t!==null&&(ep(t,1,e),ia(t,e));break}}t=t.return}}function QV(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Hn(),e.pingedLanes|=e.suspendedLanes&r,fn===e&&(jn&r)===r&&(rn===4||rn===3&&(jn&130023424)===jn&&500>zr()-qS?Wl(e,0):HS|=r),ia(e,t)}function cI(e,t){t===0&&(e.mode&1?(t=Pp,Pp<<=1,!(Pp&130023424)&&(Pp=4194304)):t=1);var r=Hn();e=Ps(e,t),e!==null&&(ep(e,t,r),ia(e,r))}function JV(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),cI(e,r)}function eW(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(je(314))}n!==null&&n.delete(t),cI(e,r)}var uI;uI=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||na.current)ta=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return ta=!1,zV(e,t,r);ta=!!(e.flags&131072)}else ta=!1,jr&&t.flags&1048576&&m$(t,ev,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Eg(e,t),e=t.pendingProps;var a=Lu(t,In.current);yu(t,r),a=BS(null,t,n,e,a,r);var i=FS();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,aa(n)?(i=!0,Qg(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,MS(t),a.updater=ox,t.stateNode=a,a._reactInternals=t,bj(t,n,e,r),t=_j(null,t,n,!0,i,r)):(t.tag=0,jr&&i&&kS(t),Bn(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Eg(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=rW(n),e=ni(n,e),a){case 0:t=jj(null,t,n,e,r);break e;case 1:t=mP(null,t,n,e,r);break e;case 11:t=fP(null,t,n,e,r);break e;case 14:t=hP(null,t,n,ni(n.type,e),r);break e}throw Error(je(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:ni(n,a),jj(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:ni(n,a),mP(e,t,n,a,r);case 3:e:{if(K$(t),e===null)throw Error(je(387));n=t.pendingProps,i=t.memoizedState,a=i.element,b$(e,t),nv(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=Uu(Error(je(423)),t),t=pP(e,t,n,r,a);break e}else if(n!==a){a=Uu(Error(je(424)),t),t=pP(e,t,n,r,a);break e}else for(ya=No(t.stateNode.containerInfo.firstChild),xa=t,jr=!0,hi=null,r=y$(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Bu(),n===a){t=Es(e,t,r);break e}Bn(e,t,n,r)}t=t.child}return t;case 5:return w$(t),e===null&&vj(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,fj(n,a)?o=null:i!==null&&fj(n,i)&&(t.flags|=32),q$(e,t),Bn(e,t,o,r),t.child;case 6:return e===null&&vj(t),null;case 13:return G$(e,t,r);case 4:return $S(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Fu(t,null,n,r):Bn(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:ni(n,a),fP(e,t,n,a,r);case 7:return Bn(e,t,t.pendingProps,r),t.child;case 8:return Bn(e,t,t.pendingProps.children,r),t.child;case 12:return Bn(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,fr(tv,n._currentValue),n._currentValue=o,i!==null)if(ji(i.value,o)){if(i.children===a.children&&!na.current){t=Es(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=js(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),yj(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(je(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),yj(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Bn(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,yu(t,r),a=Ua(a),n=n(a),t.flags|=1,Bn(e,t,n,r),t.child;case 14:return n=t.type,a=ni(n,t.pendingProps),a=ni(n.type,a),hP(e,t,n,a,r);case 15:return W$(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:ni(n,a),Eg(e,t),t.tag=1,aa(n)?(e=!0,Qg(t)):e=!1,yu(t,r),z$(t,n,a),bj(t,n,a,r),_j(null,t,n,!0,e,r);case 19:return Y$(e,t,r);case 22:return H$(e,t,r)}throw Error(je(156,t.tag))};function dI(e,t){return LM(e,t)}function tW(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ia(e,t,r,n){return new tW(e,t,r,n)}function XS(e){return e=e.prototype,!(!e||!e.isReactComponent)}function rW(e){if(typeof e=="function")return XS(e)?1:0;if(e!=null){if(e=e.$$typeof,e===pS)return 11;if(e===gS)return 14}return 2}function Ao(e,t){var r=e.alternate;return r===null?(r=Ia(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Tg(e,t,r,n,a,i){var o=2;if(n=e,typeof e=="function")XS(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Xc:return Hl(r.children,a,i,t);case mS:o=8,a|=8;break;case Ww:return e=Ia(12,r,t,a|2),e.elementType=Ww,e.lanes=i,e;case Hw:return e=Ia(13,r,t,a),e.elementType=Hw,e.lanes=i,e;case qw:return e=Ia(19,r,t,a),e.elementType=qw,e.lanes=i,e;case wM:return ux(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case xM:o=10;break e;case bM:o=9;break e;case pS:o=11;break e;case gS:o=14;break e;case Js:o=16,n=null;break e}throw Error(je(130,e==null?e:typeof e,""))}return t=Ia(o,r,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function Hl(e,t,r,n){return e=Ia(7,e,n,t),e.lanes=r,e}function ux(e,t,r,n){return e=Ia(22,e,n,t),e.elementType=wM,e.lanes=r,e.stateNode={isHidden:!1},e}function Cb(e,t,r){return e=Ia(6,e,null,t),e.lanes=r,e}function Nb(e,t,r){return t=Ia(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function nW(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=sb(0),this.expirationTimes=sb(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sb(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function ZS(e,t,r,n,a,i,o,l,c){return e=new nW(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Ia(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},MS(i),e}function aW(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Yc,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function fI(e){if(!e)return Lo;e=e._reactInternals;e:{if(mc(e)!==e||e.tag!==1)throw Error(je(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(aa(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(je(171))}if(e.tag===1){var r=e.type;if(aa(r))return f$(e,r,t)}return t}function hI(e,t,r,n,a,i,o,l,c){return e=ZS(r,n,!0,e,a,i,o,l,c),e.context=fI(null),r=e.current,n=Hn(),a=Eo(r),i=js(n,a),i.callback=t??null,ko(r,i,a),e.current.lanes=a,ep(e,a,n),ia(e,n),e}function dx(e,t,r,n){var a=t.current,i=Hn(),o=Eo(a);return r=fI(r),t.context===null?t.context=r:t.pendingContext=r,t=js(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=ko(a,t,o),e!==null&&(yi(e,a,o,i),Ng(e,a,o)),o}function dv(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function CP(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function QS(e,t){CP(e,t),(e=e.alternate)&&CP(e,t)}function iW(){return null}var mI=typeof reportError=="function"?reportError:function(e){console.error(e)};function JS(e){this._internalRoot=e}fx.prototype.render=JS.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(je(409));dx(e,t,null,null)};fx.prototype.unmount=JS.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ec(function(){dx(null,e,null,null)}),t[ks]=null}};function fx(e){this._internalRoot=e}fx.prototype.unstable_scheduleHydration=function(e){if(e){var t=HM();e={blockedOn:null,target:e,priority:t};for(var r=0;r<ao.length&&t!==0&&t<ao[r].priority;r++);ao.splice(r,0,e),r===0&&KM(e)}};function eC(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function hx(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function NP(){}function sW(e,t,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var u=dv(o);i.call(u)}}var o=hI(t,n,e,0,null,!1,!1,"",NP);return e._reactRootContainer=o,e[ks]=o.current,Rh(e.nodeType===8?e.parentNode:e),ec(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var l=n;n=function(){var u=dv(c);l.call(u)}}var c=ZS(e,0,!1,null,null,!1,!1,"",NP);return e._reactRootContainer=c,e[ks]=c.current,Rh(e.nodeType===8?e.parentNode:e),ec(function(){dx(t,c,r,n)}),c}function mx(e,t,r,n,a){var i=r._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var c=dv(o);l.call(c)}}dx(t,o,e,a)}else o=sW(r,t,e,a,n);return dv(o)}VM=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Gf(t.pendingLanes);r!==0&&(xS(t,r|1),ia(t,zr()),!(Et&6)&&(Vu=zr()+500,Xo()))}break;case 13:ec(function(){var n=Ps(e,1);if(n!==null){var a=Hn();yi(n,e,1,a)}}),QS(e,1)}};bS=function(e){if(e.tag===13){var t=Ps(e,134217728);if(t!==null){var r=Hn();yi(t,e,134217728,r)}QS(e,134217728)}};WM=function(e){if(e.tag===13){var t=Eo(e),r=Ps(e,t);if(r!==null){var n=Hn();yi(r,e,t,n)}QS(e,t)}};HM=function(){return Ht};qM=function(e,t){var r=Ht;try{return Ht=e,t()}finally{Ht=r}};rj=function(e,t,r){switch(t){case"input":if(Yw(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=ax(n);if(!a)throw Error(je(90));_M(n),Yw(n,a)}}}break;case"textarea":CM(e,r);break;case"select":t=r.value,t!=null&&mu(e,!!r.multiple,t,!1)}};TM=KS;RM=ec;var oW={usingClientEntryPoint:!1,Events:[rp,eu,ax,AM,OM,KS]},jf={findFiberByHostInstance:Nl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},lW={bundleType:jf.bundleType,version:jf.version,rendererPackageName:jf.rendererPackageName,rendererConfig:jf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ds.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=IM(e),e===null?null:e.stateNode},findFiberByHostInstance:jf.findFiberByHostInstance||iW,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bp.isDisabled&&Bp.supportsFiber)try{ex=Bp.inject(lW),Wi=Bp}catch{}}Sa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oW;Sa.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!eC(t))throw Error(je(200));return aW(e,t,null,r)};Sa.createRoot=function(e,t){if(!eC(e))throw Error(je(299));var r=!1,n="",a=mI;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=ZS(e,1,!1,null,null,r,!1,n,a),e[ks]=t.current,Rh(e.nodeType===8?e.parentNode:e),new JS(t)};Sa.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(je(188)):(e=Object.keys(e).join(","),Error(je(268,e)));return e=IM(t),e=e===null?null:e.stateNode,e};Sa.flushSync=function(e){return ec(e)};Sa.hydrate=function(e,t,r){if(!hx(t))throw Error(je(200));return mx(null,e,t,!0,r)};Sa.hydrateRoot=function(e,t,r){if(!eC(e))throw Error(je(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",o=mI;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=hI(t,null,e,1,r??null,a,!1,i,o),e[ks]=t.current,Rh(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new fx(t)};Sa.render=function(e,t,r){if(!hx(t))throw Error(je(200));return mx(null,e,t,!1,r)};Sa.unmountComponentAtNode=function(e){if(!hx(e))throw Error(je(40));return e._reactRootContainer?(ec(function(){mx(null,null,e,!1,function(){e._reactRootContainer=null,e[ks]=null})}),!0):!1};Sa.unstable_batchedUpdates=KS;Sa.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!hx(r))throw Error(je(200));if(e==null||e._reactInternals===void 0)throw Error(je(38));return mx(e,t,r,!1,n)};Sa.version="18.3.1-next-f1338f8080-20240426";function pI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(pI)}catch(e){console.error(e)}}pI(),pM.exports=Sa;var pc=pM.exports;const gI=Bt(pc);var vI,kP=pc;vI=kP.createRoot,kP.hydrateRoot;const cW=1,uW=1e6;let kb=0;function dW(){return kb=(kb+1)%Number.MAX_SAFE_INTEGER,kb.toString()}const Pb=new Map,PP=e=>{if(Pb.has(e))return;const t=setTimeout(()=>{Pb.delete(e),ch({type:"REMOVE_TOAST",toastId:e})},uW);Pb.set(e,t)},fW=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,cW)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?PP(r):e.toasts.forEach(n=>{PP(n.id)}),{...e,toasts:e.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},Rg=[];let Mg={toasts:[]};function ch(e){Mg=fW(Mg,e),Rg.forEach(t=>{t(Mg)})}function Lr({...e}){const t=dW(),r=a=>ch({type:"UPDATE_TOAST",toast:{...a,id:t}}),n=()=>ch({type:"DISMISS_TOAST",toastId:t});return ch({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:a=>{a||n()}}}),{id:t,dismiss:n,update:r}}function tC(){const[e,t]=w.useState(Mg);return w.useEffect(()=>(Rg.push(t),()=>{const r=Rg.indexOf(t);r>-1&&Rg.splice(r,1)}),[e]),{...e,toast:Lr,dismiss:r=>ch({type:"DISMISS_TOAST",toastId:r})}}function Oe(e,t,{checkForDefaultPrevented:r=!0}={}){return function(a){if(e==null||e(a),r===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function EP(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function yI(...e){return t=>{let r=!1;const n=e.map(a=>{const i=EP(a,t);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let a=0;a<n.length;a++){const i=n[a];typeof i=="function"?i():EP(e[a],null)}}}}function dt(...e){return w.useCallback(yI(...e),e)}function hW(e,t){const r=w.createContext(t),n=i=>{const{children:o,...l}=i,c=w.useMemo(()=>l,Object.values(l));return s.jsx(r.Provider,{value:c,children:o})};n.displayName=e+"Provider";function a(i){const o=w.useContext(r);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[n,a]}function Yn(e,t=[]){let r=[];function n(i,o){const l=w.createContext(o),c=r.length;r=[...r,o];const u=f=>{var v;const{scope:h,children:m,...y}=f,g=((v=h==null?void 0:h[e])==null?void 0:v[c])||l,p=w.useMemo(()=>y,Object.values(y));return s.jsx(g.Provider,{value:p,children:m})};u.displayName=i+"Provider";function d(f,h){var g;const m=((g=h==null?void 0:h[e])==null?void 0:g[c])||l,y=w.useContext(m);if(y)return y;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[u,d]}const a=()=>{const i=r.map(o=>w.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return w.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[n,mW(a,...t)]}function mW(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=n.reduce((l,{useScope:c,scopeName:u})=>{const f=c(i)[`__scope${u}`];return{...l,...f}},{});return w.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}function tc(e){const t=pW(e),r=w.forwardRef((n,a)=>{const{children:i,...o}=n,l=w.Children.toArray(i),c=l.find(gW);if(c){const u=c.props.children,d=l.map(f=>f===c?w.Children.count(u)>1?w.Children.only(null):w.isValidElement(u)?u.props.children:null:f);return s.jsx(t,{...o,ref:a,children:w.isValidElement(u)?w.cloneElement(u,void 0,d):null})}return s.jsx(t,{...o,ref:a,children:i})});return r.displayName=`${e}.Slot`,r}var xI=tc("Slot");function pW(e){const t=w.forwardRef((r,n)=>{const{children:a,...i}=r;if(w.isValidElement(a)){const o=yW(a),l=vW(i,a.props);return a.type!==w.Fragment&&(l.ref=n?yI(n,o):o),w.cloneElement(a,l)}return w.Children.count(a)>1?w.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var bI=Symbol("radix.slottable");function wI(e){const t=({children:r})=>s.jsx(s.Fragment,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=bI,t}function gW(e){return w.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===bI}function vW(e,t){const r={...t};for(const n in t){const a=e[n],i=t[n];/^on[A-Z]/.test(n)?a&&i?r[n]=(...l)=>{const c=i(...l);return a(...l),c}:a&&(r[n]=a):n==="style"?r[n]={...a,...i}:n==="className"&&(r[n]=[a,i].filter(Boolean).join(" "))}return{...e,...r}}function yW(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function px(e){const t=e+"CollectionProvider",[r,n]=Yn(t),[a,i]=r(t,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:p,children:v}=g,x=$.useRef(null),b=$.useRef(new Map).current;return s.jsx(a,{scope:p,itemMap:b,collectionRef:x,children:v})};o.displayName=t;const l=e+"CollectionSlot",c=tc(l),u=$.forwardRef((g,p)=>{const{scope:v,children:x}=g,b=i(l,v),_=dt(p,b.collectionRef);return s.jsx(c,{ref:_,children:x})});u.displayName=l;const d=e+"CollectionItemSlot",f="data-radix-collection-item",h=tc(d),m=$.forwardRef((g,p)=>{const{scope:v,children:x,...b}=g,_=$.useRef(null),j=dt(p,_),S=i(d,v);return $.useEffect(()=>(S.itemMap.set(_,{ref:_,...b}),()=>void S.itemMap.delete(_))),s.jsx(h,{[f]:"",ref:j,children:x})});m.displayName=d;function y(g){const p=i(e+"CollectionConsumer",g);return $.useCallback(()=>{const x=p.collectionRef.current;if(!x)return[];const b=Array.from(x.querySelectorAll(`[${f}]`));return Array.from(p.itemMap.values()).sort((S,C)=>b.indexOf(S.ref.current)-b.indexOf(C.ref.current))},[p.collectionRef,p.itemMap])}return[{Provider:o,Slot:u,ItemSlot:m},y,n]}var xW=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ve=xW.reduce((e,t)=>{const r=tc(`Primitive.${t}`),n=w.forwardRef((a,i)=>{const{asChild:o,...l}=a,c=o?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(c,{...l,ref:i})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function jI(e,t){e&&pc.flushSync(()=>e.dispatchEvent(t))}function tn(e){const t=w.useRef(e);return w.useEffect(()=>{t.current=e}),w.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function bW(e,t=globalThis==null?void 0:globalThis.document){const r=tn(e);w.useEffect(()=>{const n=a=>{a.key==="Escape"&&r(a)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var wW="DismissableLayer",$j="dismissableLayer.update",jW="dismissableLayer.pointerDownOutside",_W="dismissableLayer.focusOutside",AP,_I=w.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Id=w.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=e,u=w.useContext(_I),[d,f]=w.useState(null),h=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=w.useState({}),y=dt(t,C=>f(C)),g=Array.from(u.layers),[p]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),v=g.indexOf(p),x=d?g.indexOf(d):-1,b=u.layersWithOutsidePointerEventsDisabled.size>0,_=x>=v,j=CW(C=>{const k=C.target,N=[...u.branches].some(A=>A.contains(k));!_||N||(a==null||a(C),o==null||o(C),C.defaultPrevented||l==null||l())},h),S=NW(C=>{const k=C.target;[...u.branches].some(A=>A.contains(k))||(i==null||i(C),o==null||o(C),C.defaultPrevented||l==null||l())},h);return bW(C=>{x===u.layers.size-1&&(n==null||n(C),!C.defaultPrevented&&l&&(C.preventDefault(),l()))},h),w.useEffect(()=>{if(d)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(AP=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),OP(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=AP)}},[d,h,r,u]),w.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),OP())},[d,u]),w.useEffect(()=>{const C=()=>m({});return document.addEventListener($j,C),()=>document.removeEventListener($j,C)},[]),s.jsx(Ve.div,{...c,ref:y,style:{pointerEvents:b?_?"auto":"none":void 0,...e.style},onFocusCapture:Oe(e.onFocusCapture,S.onFocusCapture),onBlurCapture:Oe(e.onBlurCapture,S.onBlurCapture),onPointerDownCapture:Oe(e.onPointerDownCapture,j.onPointerDownCapture)})});Id.displayName=wW;var SW="DismissableLayerBranch",SI=w.forwardRef((e,t)=>{const r=w.useContext(_I),n=w.useRef(null),a=dt(t,n);return w.useEffect(()=>{const i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),s.jsx(Ve.div,{...e,ref:a})});SI.displayName=SW;function CW(e,t=globalThis==null?void 0:globalThis.document){const r=tn(e),n=w.useRef(!1),a=w.useRef(()=>{});return w.useEffect(()=>{const i=l=>{if(l.target&&!n.current){let c=function(){CI(jW,r,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=c,t.addEventListener("click",a.current,{once:!0})):c()}else t.removeEventListener("click",a.current);n.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function NW(e,t=globalThis==null?void 0:globalThis.document){const r=tn(e),n=w.useRef(!1);return w.useEffect(()=>{const a=i=>{i.target&&!n.current&&CI(_W,r,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function OP(){const e=new CustomEvent($j);document.dispatchEvent(e)}function CI(e,t,r,{discrete:n}){const a=r.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?jI(a,i):a.dispatchEvent(i)}var kW=Id,PW=SI,hn=globalThis!=null&&globalThis.document?w.useLayoutEffect:()=>{},EW="Portal",ap=w.forwardRef((e,t)=>{var l;const{container:r,...n}=e,[a,i]=w.useState(!1);hn(()=>i(!0),[]);const o=r||a&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?gI.createPortal(s.jsx(Ve.div,{...n,ref:t}),o):null});ap.displayName=EW;function AW(e,t){return w.useReducer((r,n)=>t[r][n]??r,e)}var oa=e=>{const{present:t,children:r}=e,n=OW(t),a=typeof r=="function"?r({present:n.isPresent}):w.Children.only(r),i=dt(n.ref,TW(a));return typeof r=="function"||n.isPresent?w.cloneElement(a,{ref:i}):null};oa.displayName="Presence";function OW(e){const[t,r]=w.useState(),n=w.useRef(null),a=w.useRef(e),i=w.useRef("none"),o=e?"mounted":"unmounted",[l,c]=AW(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return w.useEffect(()=>{const u=Fp(n.current);i.current=l==="mounted"?u:"none"},[l]),hn(()=>{const u=n.current,d=a.current;if(d!==e){const h=i.current,m=Fp(u);e?c("MOUNT"):m==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&h!==m?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),hn(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,f=m=>{const g=Fp(n.current).includes(m.animationName);if(m.target===t&&g&&(c("ANIMATION_END"),!a.current)){const p=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=p)})}},h=m=>{m.target===t&&(i.current=Fp(n.current))};return t.addEventListener("animationstart",h),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",h),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:w.useCallback(u=>{n.current=u?getComputedStyle(u):null,r(u)},[])}}function Fp(e){return(e==null?void 0:e.animationName)||"none"}function TW(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var RW=uS[" useInsertionEffect ".trim().toString()]||hn;function sa({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[a,i,o]=MW({defaultProp:t,onChange:r}),l=e!==void 0,c=l?e:a;{const d=w.useRef(e!==void 0);w.useEffect(()=>{const f=d.current;f!==l&&console.warn(`${n} is changing from ${f?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,n])}const u=w.useCallback(d=>{var f;if(l){const h=$W(d)?d(e):d;h!==e&&((f=o.current)==null||f.call(o,h))}else i(d)},[l,e,i,o]);return[c,u]}function MW({defaultProp:e,onChange:t}){const[r,n]=w.useState(e),a=w.useRef(r),i=w.useRef(t);return RW(()=>{i.current=t},[t]),w.useEffect(()=>{var o;a.current!==r&&((o=i.current)==null||o.call(i,r),a.current=r)},[r,a]),[r,n,i]}function $W(e){return typeof e=="function"}var NI=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),IW="VisuallyHidden",gx=w.forwardRef((e,t)=>s.jsx(Ve.span,{...e,ref:t,style:{...NI,...e.style}}));gx.displayName=IW;var DW=gx,rC="ToastProvider",[nC,LW,BW]=px("Toast"),[kI,ZOe]=Yn("Toast",[BW]),[FW,vx]=kI(rC),PI=e=>{const{__scopeToast:t,label:r="Notification",duration:n=5e3,swipeDirection:a="right",swipeThreshold:i=50,children:o}=e,[l,c]=w.useState(null),[u,d]=w.useState(0),f=w.useRef(!1),h=w.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${rC}\`. Expected non-empty \`string\`.`),s.jsx(nC.Provider,{scope:t,children:s.jsx(FW,{scope:t,label:r,duration:n,swipeDirection:a,swipeThreshold:i,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:w.useCallback(()=>d(m=>m+1),[]),onToastRemove:w.useCallback(()=>d(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:h,children:o})})};PI.displayName=rC;var EI="ToastViewport",zW=["F8"],Ij="toast.viewportPause",Dj="toast.viewportResume",AI=w.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:n=zW,label:a="Notifications ({hotkey})",...i}=e,o=vx(EI,r),l=LW(r),c=w.useRef(null),u=w.useRef(null),d=w.useRef(null),f=w.useRef(null),h=dt(t,f,o.onViewportChange),m=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),y=o.toastCount>0;w.useEffect(()=>{const p=v=>{var b;n.length!==0&&n.every(_=>v[_]||v.code===_)&&((b=f.current)==null||b.focus())};return document.addEventListener("keydown",p),()=>document.removeEventListener("keydown",p)},[n]),w.useEffect(()=>{const p=c.current,v=f.current;if(y&&p&&v){const x=()=>{if(!o.isClosePausedRef.current){const S=new CustomEvent(Ij);v.dispatchEvent(S),o.isClosePausedRef.current=!0}},b=()=>{if(o.isClosePausedRef.current){const S=new CustomEvent(Dj);v.dispatchEvent(S),o.isClosePausedRef.current=!1}},_=S=>{!p.contains(S.relatedTarget)&&b()},j=()=>{p.contains(document.activeElement)||b()};return p.addEventListener("focusin",x),p.addEventListener("focusout",_),p.addEventListener("pointermove",x),p.addEventListener("pointerleave",j),window.addEventListener("blur",x),window.addEventListener("focus",b),()=>{p.removeEventListener("focusin",x),p.removeEventListener("focusout",_),p.removeEventListener("pointermove",x),p.removeEventListener("pointerleave",j),window.removeEventListener("blur",x),window.removeEventListener("focus",b)}}},[y,o.isClosePausedRef]);const g=w.useCallback(({tabbingDirection:p})=>{const x=l().map(b=>{const _=b.ref.current,j=[_,...eH(_)];return p==="forwards"?j:j.reverse()});return(p==="forwards"?x.reverse():x).flat()},[l]);return w.useEffect(()=>{const p=f.current;if(p){const v=x=>{var j,S,C;const b=x.altKey||x.ctrlKey||x.metaKey;if(x.key==="Tab"&&!b){const k=document.activeElement,N=x.shiftKey;if(x.target===p&&N){(j=u.current)==null||j.focus();return}const E=g({tabbingDirection:N?"backwards":"forwards"}),R=E.findIndex(P=>P===k);Eb(E.slice(R+1))?x.preventDefault():N?(S=u.current)==null||S.focus():(C=d.current)==null||C.focus()}};return p.addEventListener("keydown",v),()=>p.removeEventListener("keydown",v)}},[l,g]),s.jsxs(PW,{ref:c,role:"region","aria-label":a.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:y?void 0:"none"},children:[y&&s.jsx(Lj,{ref:u,onFocusFromOutsideViewport:()=>{const p=g({tabbingDirection:"forwards"});Eb(p)}}),s.jsx(nC.Slot,{scope:r,children:s.jsx(Ve.ol,{tabIndex:-1,...i,ref:h})}),y&&s.jsx(Lj,{ref:d,onFocusFromOutsideViewport:()=>{const p=g({tabbingDirection:"backwards"});Eb(p)}})]})});AI.displayName=EI;var OI="ToastFocusProxy",Lj=w.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...a}=e,i=vx(OI,r);return s.jsx(gx,{"aria-hidden":!0,tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:o=>{var u;const l=o.relatedTarget;!((u=i.viewport)!=null&&u.contains(l))&&n()}})});Lj.displayName=OI;var ip="Toast",UW="toast.swipeStart",VW="toast.swipeMove",WW="toast.swipeCancel",HW="toast.swipeEnd",TI=w.forwardRef((e,t)=>{const{forceMount:r,open:n,defaultOpen:a,onOpenChange:i,...o}=e,[l,c]=sa({prop:n,defaultProp:a??!0,onChange:i,caller:ip});return s.jsx(oa,{present:r||l,children:s.jsx(GW,{open:l,...o,ref:t,onClose:()=>c(!1),onPause:tn(e.onPause),onResume:tn(e.onResume),onSwipeStart:Oe(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Oe(e.onSwipeMove,u=>{const{x:d,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:Oe(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Oe(e.onSwipeEnd,u=>{const{x:d,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});TI.displayName=ip;var[qW,KW]=kI(ip,{onClose(){}}),GW=w.forwardRef((e,t)=>{const{__scopeToast:r,type:n="foreground",duration:a,open:i,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:f,onSwipeCancel:h,onSwipeEnd:m,...y}=e,g=vx(ip,r),[p,v]=w.useState(null),x=dt(t,P=>v(P)),b=w.useRef(null),_=w.useRef(null),j=a||g.duration,S=w.useRef(0),C=w.useRef(j),k=w.useRef(0),{onToastAdd:N,onToastRemove:A}=g,O=tn(()=>{var T;(p==null?void 0:p.contains(document.activeElement))&&((T=g.viewport)==null||T.focus()),o()}),E=w.useCallback(P=>{!P||P===1/0||(window.clearTimeout(k.current),S.current=new Date().getTime(),k.current=window.setTimeout(O,P))},[O]);w.useEffect(()=>{const P=g.viewport;if(P){const T=()=>{E(C.current),u==null||u()},I=()=>{const M=new Date().getTime()-S.current;C.current=C.current-M,window.clearTimeout(k.current),c==null||c()};return P.addEventListener(Ij,I),P.addEventListener(Dj,T),()=>{P.removeEventListener(Ij,I),P.removeEventListener(Dj,T)}}},[g.viewport,j,c,u,E]),w.useEffect(()=>{i&&!g.isClosePausedRef.current&&E(j)},[i,j,g.isClosePausedRef,E]),w.useEffect(()=>(N(),()=>A()),[N,A]);const R=w.useMemo(()=>p?BI(p):null,[p]);return g.viewport?s.jsxs(s.Fragment,{children:[R&&s.jsx(YW,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:R}),s.jsx(qW,{scope:r,onClose:O,children:pc.createPortal(s.jsx(nC.ItemSlot,{scope:r,children:s.jsx(kW,{asChild:!0,onEscapeKeyDown:Oe(l,()=>{g.isFocusedToastEscapeKeyDownRef.current||O(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:s.jsx(Ve.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":g.swipeDirection,...y,ref:x,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:Oe(e.onKeyDown,P=>{P.key==="Escape"&&(l==null||l(P.nativeEvent),P.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,O()))}),onPointerDown:Oe(e.onPointerDown,P=>{P.button===0&&(b.current={x:P.clientX,y:P.clientY})}),onPointerMove:Oe(e.onPointerMove,P=>{if(!b.current)return;const T=P.clientX-b.current.x,I=P.clientY-b.current.y,M=!!_.current,D=["left","right"].includes(g.swipeDirection),B=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,z=D?B(0,T):0,Z=D?0:B(0,I),J=P.pointerType==="touch"?10:2,se={x:z,y:Z},U={originalEvent:P,delta:se};M?(_.current=se,zp(VW,f,U,{discrete:!1})):TP(se,g.swipeDirection,J)?(_.current=se,zp(UW,d,U,{discrete:!1}),P.target.setPointerCapture(P.pointerId)):(Math.abs(T)>J||Math.abs(I)>J)&&(b.current=null)}),onPointerUp:Oe(e.onPointerUp,P=>{const T=_.current,I=P.target;if(I.hasPointerCapture(P.pointerId)&&I.releasePointerCapture(P.pointerId),_.current=null,b.current=null,T){const M=P.currentTarget,D={originalEvent:P,delta:T};TP(T,g.swipeDirection,g.swipeThreshold)?zp(HW,m,D,{discrete:!0}):zp(WW,h,D,{discrete:!0}),M.addEventListener("click",B=>B.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),YW=e=>{const{__scopeToast:t,children:r,...n}=e,a=vx(ip,t),[i,o]=w.useState(!1),[l,c]=w.useState(!1);return QW(()=>o(!0)),w.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:s.jsx(ap,{asChild:!0,children:s.jsx(gx,{...n,children:i&&s.jsxs(s.Fragment,{children:[a.label," ",r]})})})},XW="ToastTitle",RI=w.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return s.jsx(Ve.div,{...n,ref:t})});RI.displayName=XW;var ZW="ToastDescription",MI=w.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return s.jsx(Ve.div,{...n,ref:t})});MI.displayName=ZW;var $I="ToastAction",II=w.forwardRef((e,t)=>{const{altText:r,...n}=e;return r.trim()?s.jsx(LI,{altText:r,asChild:!0,children:s.jsx(aC,{...n,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${$I}\`. Expected non-empty \`string\`.`),null)});II.displayName=$I;var DI="ToastClose",aC=w.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e,a=KW(DI,r);return s.jsx(LI,{asChild:!0,children:s.jsx(Ve.button,{type:"button",...n,ref:t,onClick:Oe(e.onClick,a.onClose)})})});aC.displayName=DI;var LI=w.forwardRef((e,t)=>{const{__scopeToast:r,altText:n,...a}=e;return s.jsx(Ve.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...a,ref:t})});function BI(e){const t=[];return Array.from(e.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&t.push(n.textContent),JW(n)){const a=n.ariaHidden||n.hidden||n.style.display==="none",i=n.dataset.radixToastAnnounceExclude==="";if(!a)if(i){const o=n.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...BI(n))}}),t}function zp(e,t,r,{discrete:n}){const a=r.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?jI(a,i):a.dispatchEvent(i)}var TP=(e,t,r=0)=>{const n=Math.abs(e.x),a=Math.abs(e.y),i=n>a;return t==="left"||t==="right"?i&&n>r:!i&&a>r};function QW(e=()=>{}){const t=tn(e);hn(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[t])}function JW(e){return e.nodeType===e.ELEMENT_NODE}function eH(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function Eb(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var tH=PI,FI=AI,zI=TI,UI=RI,VI=MI,WI=II,HI=aC;function qI(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=qI(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function ut(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=qI(e))&&(n&&(n+=" "),n+=t);return n}const RP=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,MP=ut,Dd=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return MP(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:a,defaultVariants:i}=t,o=Object.keys(a).map(u=>{const d=r==null?void 0:r[u],f=i==null?void 0:i[u];if(d===null)return null;const h=RP(d)||RP(f);return a[u][h]}),l=r&&Object.entries(r).reduce((u,d)=>{let[f,h]=d;return h===void 0||(u[f]=h),u},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((u,d)=>{let{class:f,className:h,...m}=d;return Object.entries(m).every(y=>{let[g,p]=y;return Array.isArray(p)?p.includes({...i,...l}[g]):{...i,...l}[g]===p})?[...u,f,h]:u},[]);return MP(e,o,c,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rH=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),KI=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var nH={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aH=w.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:i,iconNode:o,...l},c)=>w.createElement("svg",{ref:c,...nH,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:KI("lucide",a),...l},[...o.map(([u,d])=>w.createElement(u,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=(e,t)=>{const r=w.forwardRef(({className:n,...a},i)=>w.createElement(aH,{ref:i,iconNode:t,className:KI(`lucide-${rH(e)}`,n),...a}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fc=Ce("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GI=Ce("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YI=Ce("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XI=Ce("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iH=Ce("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sH=Ce("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oH=Ce("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ab=Ce("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fv=Ce("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $g=Ce("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bj=Ce("CalendarRange",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M17 14h-6",key:"bkmgh3"}],["path",{d:"M13 18H7",key:"bb0bb7"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 18h.01",key:"1bdyru"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ql=Ce("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lH=Ce("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hv=Ce("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZI=Ce("ChartLine",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cH=Ce("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oo=Ce("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uh=Ce("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uH=Ce("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vh=Ce("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dH=Ce("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QI=Ce("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JI=Ce("ClipboardPaste",[["path",{d:"M15 2H9a1 1 0 0 0-1 1v2c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V3c0-.6-.4-1-1-1Z",key:"1pp7kr"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2M16 4h2a2 2 0 0 1 2 2v2M11 14h10",key:"2ik1ml"}],["path",{d:"m17 10 4 4-4 4",key:"vp2hj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iC=Ce("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eD=Ce("Cog",[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fH=Ce("Columns3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fj=Ce("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tD=Ce("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sp=Ce("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hH=Ce("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rD=Ce("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nD=Ce("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mH=Ce("Factory",[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bo=Ce("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pH=Ce("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gH=Ce("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vH=Ce("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yH=Ce("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xH=Ce("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bH=Ce("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wh=Ce("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wH=Ce("Kanban",[["path",{d:"M6 5v11",key:"mdvv1e"}],["path",{d:"M12 5v6",key:"14ar3b"}],["path",{d:"M18 5v14",key:"7ji314"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jH=Ce("Landmark",[["line",{x1:"3",x2:"21",y1:"22",y2:"22",key:"j8o0r"}],["line",{x1:"6",x2:"6",y1:"18",y2:"11",key:"10tf0k"}],["line",{x1:"10",x2:"10",y1:"18",y2:"11",key:"54lgf6"}],["line",{x1:"14",x2:"14",y1:"18",y2:"11",key:"380y"}],["line",{x1:"18",x2:"18",y1:"18",y2:"11",key:"1kevvc"}],["polygon",{points:"12 2 20 7 4 7",key:"jkujk7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aD=Ce("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _H=Ce("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SH=Ce("ListTree",[["path",{d:"M21 12h-8",key:"1bmf0i"}],["path",{d:"M21 6H8",key:"1pqkrb"}],["path",{d:"M21 18h-8",key:"1tm79t"}],["path",{d:"M3 6v4c0 1.1.9 2 2 2h3",key:"1ywdgy"}],["path",{d:"M3 10v6c0 1.1.9 2 2 2h3",key:"2wc746"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CH=Ce("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ba=Ce("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NH=Ce("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iD=Ce("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kH=Ce("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PH=Ce("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EH=Ce("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rc=Ce("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $P=Ce("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sC=Ce("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mv=Ce("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AH=Ce("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ob=Ce("PiggyBank",[["path",{d:"M19 5c-1.5 0-2.8 1.4-3 2-3.5-1.5-11-.3-11 5 0 1.8 0 3 2 4.5V20h4v-2h3v2h4v-4c1-.5 1.7-1 2-2h2v-4h-2c0-1-.5-1.5-1-2V5z",key:"1ivx2i"}],["path",{d:"M2 9v1c0 1.1.9 2 2 2h1",key:"nm575m"}],["path",{d:"M16 11h.01",key:"xkw8gn"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=Ce("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OH=Ce("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sD=Ce("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TH=Ce("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yx=Ce("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xx=Ce("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wu=Ce("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oD=Ce("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RH=Ce("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lD=Ce("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ld=Ce("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MH=Ce("StickyNote",[["path",{d:"M16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8Z",key:"qazsjp"}],["path",{d:"M15 3v4a2 2 0 0 0 2 2h4",key:"40519r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oC=Ce("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jl=Ce("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nr=Ce("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uh=Ce("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fo=Ce("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hu=Ce("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $H=Ce("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qi=Ce("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IH=Ce("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DH=Ce("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xi=Ce("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ig=Ce("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IP=Ce("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _i=Ce("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),lC="-",LH=e=>{const t=FH(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:o=>{const l=o.split(lC);return l[0]===""&&l.length!==1&&l.shift(),cD(l,t)||BH(o)},getConflictingClassGroupIds:(o,l)=>{const c=r[o]||[];return l&&n[o]?[...c,...n[o]]:c}}},cD=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),a=n?cD(e.slice(1),n):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(lC);return(o=t.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},DP=/^\[(.+)\]$/,BH=e=>{if(DP.test(e)){const t=DP.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},FH=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return UH(Object.entries(e.classGroups),r).forEach(([i,o])=>{zj(o,n,i,t)}),n},zj=(e,t,r,n)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:LP(t,a);i.classGroupId=r;return}if(typeof a=="function"){if(zH(a)){zj(a(n),t,r,n);return}t.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([i,o])=>{zj(o,LP(t,i),r,n)})})},LP=(e,t)=>{let r=e;return t.split(lC).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},zH=e=>e.isThemeGetter,UH=(e,t)=>t?e.map(([r,n])=>{const a=n.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[t+o,l])):i);return[r,a]}):e,VH=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const a=(i,o)=>{r.set(i,o),t++,t>e&&(t=0,n=r,r=new Map)};return{get(i){let o=r.get(i);if(o!==void 0)return o;if((o=n.get(i))!==void 0)return a(i,o),o},set(i,o){r.has(i)?r.set(i,o):a(i,o)}}},uD="!",WH=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,a=t[0],i=t.length,o=l=>{const c=[];let u=0,d=0,f;for(let p=0;p<l.length;p++){let v=l[p];if(u===0){if(v===a&&(n||l.slice(p,p+i)===t)){c.push(l.slice(d,p)),d=p+i;continue}if(v==="/"){f=p;continue}}v==="["?u++:v==="]"&&u--}const h=c.length===0?l:l.substring(d),m=h.startsWith(uD),y=m?h.substring(1):h,g=f&&f>d?f-d:void 0;return{modifiers:c,hasImportantModifier:m,baseClassName:y,maybePostfixModifierPosition:g}};return r?l=>r({className:l,parseClassName:o}):o},HH=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},qH=e=>({cache:VH(e.cacheSize),parseClassName:WH(e),...LH(e)}),KH=/\s+/,GH=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:a}=t,i=[],o=e.trim().split(KH);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:d,hasImportantModifier:f,baseClassName:h,maybePostfixModifierPosition:m}=r(u);let y=!!m,g=n(y?h.substring(0,m):h);if(!g){if(!y){l=u+(l.length>0?" "+l:l);continue}if(g=n(h),!g){l=u+(l.length>0?" "+l:l);continue}y=!1}const p=HH(d).join(":"),v=f?p+uD:p,x=v+g;if(i.includes(x))continue;i.push(x);const b=a(g,y);for(let _=0;_<b.length;++_){const j=b[_];i.push(v+j)}l=u+(l.length>0?" "+l:l)}return l};function YH(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=dD(t))&&(n&&(n+=" "),n+=r);return n}const dD=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=dD(e[n]))&&(r&&(r+=" "),r+=t);return r};function XH(e,...t){let r,n,a,i=o;function o(c){const u=t.reduce((d,f)=>f(d),e());return r=qH(u),n=r.cache.get,a=r.cache.set,i=l,l(c)}function l(c){const u=n(c);if(u)return u;const d=GH(c,r);return a(c,d),d}return function(){return i(YH.apply(null,arguments))}}const pr=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},fD=/^\[(?:([a-z-]+):)?(.+)\]$/i,ZH=/^\d+\/\d+$/,QH=new Set(["px","full","screen"]),JH=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,eq=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,tq=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,rq=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,nq=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,os=e=>bu(e)||QH.has(e)||ZH.test(e),Ks=e=>Bd(e,"length",dq),bu=e=>!!e&&!Number.isNaN(Number(e)),Tb=e=>Bd(e,"number",bu),_f=e=>!!e&&Number.isInteger(Number(e)),aq=e=>e.endsWith("%")&&bu(e.slice(0,-1)),bt=e=>fD.test(e),Gs=e=>JH.test(e),iq=new Set(["length","size","percentage"]),sq=e=>Bd(e,iq,hD),oq=e=>Bd(e,"position",hD),lq=new Set(["image","url"]),cq=e=>Bd(e,lq,hq),uq=e=>Bd(e,"",fq),Sf=()=>!0,Bd=(e,t,r)=>{const n=fD.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},dq=e=>eq.test(e)&&!tq.test(e),hD=()=>!1,fq=e=>rq.test(e),hq=e=>nq.test(e),mq=()=>{const e=pr("colors"),t=pr("spacing"),r=pr("blur"),n=pr("brightness"),a=pr("borderColor"),i=pr("borderRadius"),o=pr("borderSpacing"),l=pr("borderWidth"),c=pr("contrast"),u=pr("grayscale"),d=pr("hueRotate"),f=pr("invert"),h=pr("gap"),m=pr("gradientColorStops"),y=pr("gradientColorStopPositions"),g=pr("inset"),p=pr("margin"),v=pr("opacity"),x=pr("padding"),b=pr("saturate"),_=pr("scale"),j=pr("sepia"),S=pr("skew"),C=pr("space"),k=pr("translate"),N=()=>["auto","contain","none"],A=()=>["auto","hidden","clip","visible","scroll"],O=()=>["auto",bt,t],E=()=>[bt,t],R=()=>["",os,Ks],P=()=>["auto",bu,bt],T=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],I=()=>["solid","dashed","dotted","double","none"],M=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],D=()=>["start","end","center","between","around","evenly","stretch"],B=()=>["","0",bt],z=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Z=()=>[bu,bt];return{cacheSize:500,separator:":",theme:{colors:[Sf],spacing:[os,Ks],blur:["none","",Gs,bt],brightness:Z(),borderColor:[e],borderRadius:["none","","full",Gs,bt],borderSpacing:E(),borderWidth:R(),contrast:Z(),grayscale:B(),hueRotate:Z(),invert:B(),gap:E(),gradientColorStops:[e],gradientColorStopPositions:[aq,Ks],inset:O(),margin:O(),opacity:Z(),padding:E(),saturate:Z(),scale:Z(),sepia:B(),skew:Z(),space:E(),translate:E()},classGroups:{aspect:[{aspect:["auto","square","video",bt]}],container:["container"],columns:[{columns:[Gs]}],"break-after":[{"break-after":z()}],"break-before":[{"break-before":z()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...T(),bt]}],overflow:[{overflow:A()}],"overflow-x":[{"overflow-x":A()}],"overflow-y":[{"overflow-y":A()}],overscroll:[{overscroll:N()}],"overscroll-x":[{"overscroll-x":N()}],"overscroll-y":[{"overscroll-y":N()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",_f,bt]}],basis:[{basis:O()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",bt]}],grow:[{grow:B()}],shrink:[{shrink:B()}],order:[{order:["first","last","none",_f,bt]}],"grid-cols":[{"grid-cols":[Sf]}],"col-start-end":[{col:["auto",{span:["full",_f,bt]},bt]}],"col-start":[{"col-start":P()}],"col-end":[{"col-end":P()}],"grid-rows":[{"grid-rows":[Sf]}],"row-start-end":[{row:["auto",{span:[_f,bt]},bt]}],"row-start":[{"row-start":P()}],"row-end":[{"row-end":P()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",bt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",bt]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...D()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...D(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...D(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[p]}],mx:[{mx:[p]}],my:[{my:[p]}],ms:[{ms:[p]}],me:[{me:[p]}],mt:[{mt:[p]}],mr:[{mr:[p]}],mb:[{mb:[p]}],ml:[{ml:[p]}],"space-x":[{"space-x":[C]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[C]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",bt,t]}],"min-w":[{"min-w":[bt,t,"min","max","fit"]}],"max-w":[{"max-w":[bt,t,"none","full","min","max","fit","prose",{screen:[Gs]},Gs]}],h:[{h:[bt,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[bt,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[bt,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[bt,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Gs,Ks]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Tb]}],"font-family":[{font:[Sf]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",bt]}],"line-clamp":[{"line-clamp":["none",bu,Tb]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",os,bt]}],"list-image":[{"list-image":["none",bt]}],"list-style-type":[{list:["none","disc","decimal",bt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...I(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",os,Ks]}],"underline-offset":[{"underline-offset":["auto",os,bt]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:E()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",bt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",bt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...T(),oq]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",sq]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},cq]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...I(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:I()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...I()]}],"outline-offset":[{"outline-offset":[os,bt]}],"outline-w":[{outline:[os,Ks]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:R()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[os,Ks]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Gs,uq]}],"shadow-color":[{shadow:[Sf]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...M(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":M()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Gs,bt]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[f]}],saturate:[{saturate:[b]}],sepia:[{sepia:[j]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[j]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",bt]}],duration:[{duration:Z()}],ease:[{ease:["linear","in","out","in-out",bt]}],delay:[{delay:Z()}],animate:[{animate:["none","spin","ping","pulse","bounce",bt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[_]}],"scale-x":[{"scale-x":[_]}],"scale-y":[{"scale-y":[_]}],rotate:[{rotate:[_f,bt]}],"translate-x":[{"translate-x":[k]}],"translate-y":[{"translate-y":[k]}],"skew-x":[{"skew-x":[S]}],"skew-y":[{"skew-y":[S]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",bt]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",bt]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":E()}],"scroll-mx":[{"scroll-mx":E()}],"scroll-my":[{"scroll-my":E()}],"scroll-ms":[{"scroll-ms":E()}],"scroll-me":[{"scroll-me":E()}],"scroll-mt":[{"scroll-mt":E()}],"scroll-mr":[{"scroll-mr":E()}],"scroll-mb":[{"scroll-mb":E()}],"scroll-ml":[{"scroll-ml":E()}],"scroll-p":[{"scroll-p":E()}],"scroll-px":[{"scroll-px":E()}],"scroll-py":[{"scroll-py":E()}],"scroll-ps":[{"scroll-ps":E()}],"scroll-pe":[{"scroll-pe":E()}],"scroll-pt":[{"scroll-pt":E()}],"scroll-pr":[{"scroll-pr":E()}],"scroll-pb":[{"scroll-pb":E()}],"scroll-pl":[{"scroll-pl":E()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",bt]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[os,Ks,Tb]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},pq=XH(mq);function ue(...e){return pq(ut(e))}const gq=tH,mD=w.forwardRef(({className:e,...t},r)=>s.jsx(FI,{ref:r,className:ue("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));mD.displayName=FI.displayName;const vq=Dd("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),pD=w.forwardRef(({className:e,variant:t,...r},n)=>s.jsx(zI,{ref:n,className:ue(vq({variant:t}),e),...r}));pD.displayName=zI.displayName;const yq=w.forwardRef(({className:e,...t},r)=>s.jsx(WI,{ref:r,className:ue("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",e),...t}));yq.displayName=WI.displayName;const gD=w.forwardRef(({className:e,...t},r)=>s.jsx(HI,{ref:r,className:ue("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:s.jsx(_i,{className:"h-4 w-4"})}));gD.displayName=HI.displayName;const vD=w.forwardRef(({className:e,...t},r)=>s.jsx(UI,{ref:r,className:ue("text-sm font-semibold",e),...t}));vD.displayName=UI.displayName;const yD=w.forwardRef(({className:e,...t},r)=>s.jsx(VI,{ref:r,className:ue("text-sm opacity-90",e),...t}));yD.displayName=VI.displayName;function xq(){const{toasts:e}=tC();return s.jsxs(gq,{children:[e.map(function({id:t,title:r,description:n,action:a,...i}){return s.jsxs(pD,{...i,children:[s.jsxs("div",{className:"grid gap-1",children:[r&&s.jsx(vD,{children:r}),n&&s.jsx(yD,{children:n})]}),a,s.jsx(gD,{})]},t)}),s.jsx(mD,{})]})}var BP=["light","dark"],bq="(prefers-color-scheme: dark)",wq=w.createContext(void 0),jq={setTheme:e=>{},themes:[]},_q=()=>{var e;return(e=w.useContext(wq))!=null?e:jq};w.memo(({forcedTheme:e,storageKey:t,attribute:r,enableSystem:n,enableColorScheme:a,defaultTheme:i,value:o,attrs:l,nonce:c})=>{let u=i==="system",d=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(y=>`'${y}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,f=a?BP.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",h=(y,g=!1,p=!0)=>{let v=o?o[y]:y,x=g?y+"|| ''":`'${v}'`,b="";return a&&p&&!g&&BP.includes(y)&&(b+=`d.style.colorScheme = '${y}';`),r==="class"?g||v?b+=`c.add(${x})`:b+="null":v&&(b+=`d[s](n,${x})`),b},m=e?`!function(){${d}${h(e)}}()`:n?`!function(){try{${d}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${u})){var t='${bq}',m=window.matchMedia(t);if(m.media!==t||m.matches){${h("dark")}}else{${h("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${h(o?"x[e]":"e",!0)}}${u?"":"else{"+h(i,!1,!1)+"}"}${f}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${t}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${h(o?"x[e]":"e",!0)}}else{${h(i,!1,!1)};}${f}}catch(t){}}();`;return w.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:m}})});var Sq=e=>{switch(e){case"success":return kq;case"info":return Eq;case"warning":return Pq;case"error":return Aq;default:return null}},Cq=Array(12).fill(0),Nq=({visible:e,className:t})=>$.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},$.createElement("div",{className:"sonner-spinner"},Cq.map((r,n)=>$.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),kq=$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},$.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Pq=$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},$.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Eq=$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},$.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Aq=$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},$.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Oq=$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},$.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),$.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Tq=()=>{let[e,t]=$.useState(document.hidden);return $.useEffect(()=>{let r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e},Uj=1,Rq=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:r,...n}=e,a=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Uj++,i=this.toasts.find(l=>l.id===a),o=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),i?this.toasts=this.toasts.map(l=>l.id===a?(this.publish({...l,...e,id:a,title:r}),{...l,...e,id:a,dismissible:o,title:r}):l):this.addToast({title:r,...n,dismissible:o,id:a}),a},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let n=e instanceof Promise?e:e(),a=r!==void 0,i,o=n.then(async c=>{if(i=["resolve",c],$.isValidElement(c))a=!1,this.create({id:r,type:"default",message:c});else if($q(c)&&!c.ok){a=!1;let u=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,d=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:r,type:"error",message:u,description:d})}else if(t.success!==void 0){a=!1;let u=typeof t.success=="function"?await t.success(c):t.success,d=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"success",message:u,description:d})}}).catch(async c=>{if(i=["reject",c],t.error!==void 0){a=!1;let u=typeof t.error=="function"?await t.error(c):t.error,d=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"error",message:u,description:d})}}).finally(()=>{var c;a&&(this.dismiss(r),r=void 0),(c=t.finally)==null||c.call(t)}),l=()=>new Promise((c,u)=>o.then(()=>i[0]==="reject"?u(i[1]):c(i[1])).catch(u));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(e,t)=>{let r=(t==null?void 0:t.id)||Uj++;return this.create({jsx:e(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Jn=new Rq,Mq=(e,t)=>{let r=(t==null?void 0:t.id)||Uj++;return Jn.addToast({title:e,...t,id:r}),r},$q=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",Iq=Mq,Dq=()=>Jn.toasts,Lq=()=>Jn.getActiveToasts(),Ee=Object.assign(Iq,{success:Jn.success,info:Jn.info,warning:Jn.warning,error:Jn.error,custom:Jn.custom,message:Jn.message,promise:Jn.promise,dismiss:Jn.dismiss,loading:Jn.loading},{getHistory:Dq,getToasts:Lq});function Bq(e,{insertAt:t}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}Bq(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Up(e){return e.label!==void 0}var Fq=3,zq="32px",Uq="16px",FP=4e3,Vq=356,Wq=14,Hq=20,qq=200;function Ja(...e){return e.filter(Boolean).join(" ")}function Kq(e){let[t,r]=e.split("-"),n=[];return t&&n.push(t),r&&n.push(r),n}var Gq=e=>{var t,r,n,a,i,o,l,c,u,d,f;let{invert:h,toast:m,unstyled:y,interacting:g,setHeights:p,visibleToasts:v,heights:x,index:b,toasts:_,expanded:j,removeToast:S,defaultRichColors:C,closeButton:k,style:N,cancelButtonStyle:A,actionButtonStyle:O,className:E="",descriptionClassName:R="",duration:P,position:T,gap:I,loadingIcon:M,expandByDefault:D,classNames:B,icons:z,closeButtonAriaLabel:Z="Close toast",pauseWhenPageIsHidden:J}=e,[se,U]=$.useState(null),[q,G]=$.useState(null),[H,fe]=$.useState(!1),[L,Y]=$.useState(!1),[V,Q]=$.useState(!1),[te,be]=$.useState(!1),[Re,We]=$.useState(!1),[ge,ke]=$.useState(0),[Xe,F]=$.useState(0),ee=$.useRef(m.duration||P||FP),oe=$.useRef(null),K=$.useRef(null),ie=b===0,ve=b+1<=v,de=m.type,Me=m.dismissible!==!1,Ze=m.className||"",ft=m.descriptionClassName||"",Ge=$.useMemo(()=>x.findIndex(rt=>rt.toastId===m.id)||0,[x,m.id]),yt=$.useMemo(()=>{var rt;return(rt=m.closeButton)!=null?rt:k},[m.closeButton,k]),me=$.useMemo(()=>m.duration||P||FP,[m.duration,P]),ze=$.useRef(0),it=$.useRef(0),Dt=$.useRef(0),xt=$.useRef(null),[ht,on]=T.split("-"),Yr=$.useMemo(()=>x.reduce((rt,Ot,Zt)=>Zt>=Ge?rt:rt+Ot.height,0),[x,Ge]),Sn=Tq(),ll=m.invert||h,Hs=de==="loading";it.current=$.useMemo(()=>Ge*I+Yr,[Ge,Yr]),$.useEffect(()=>{ee.current=me},[me]),$.useEffect(()=>{fe(!0)},[]),$.useEffect(()=>{let rt=K.current;if(rt){let Ot=rt.getBoundingClientRect().height;return F(Ot),p(Zt=>[{toastId:m.id,height:Ot,position:m.position},...Zt]),()=>p(Zt=>Zt.filter(Cn=>Cn.toastId!==m.id))}},[p,m.id]),$.useLayoutEffect(()=>{if(!H)return;let rt=K.current,Ot=rt.style.height;rt.style.height="auto";let Zt=rt.getBoundingClientRect().height;rt.style.height=Ot,F(Zt),p(Cn=>Cn.find(Dn=>Dn.toastId===m.id)?Cn.map(Dn=>Dn.toastId===m.id?{...Dn,height:Zt}:Dn):[{toastId:m.id,height:Zt,position:m.position},...Cn])},[H,m.title,m.description,p,m.id]);let ka=$.useCallback(()=>{Y(!0),ke(it.current),p(rt=>rt.filter(Ot=>Ot.toastId!==m.id)),setTimeout(()=>{S(m)},qq)},[m,S,p,it]);$.useEffect(()=>{if(m.promise&&de==="loading"||m.duration===1/0||m.type==="loading")return;let rt;return j||g||J&&Sn?(()=>{if(Dt.current<ze.current){let Ot=new Date().getTime()-ze.current;ee.current=ee.current-Ot}Dt.current=new Date().getTime()})():ee.current!==1/0&&(ze.current=new Date().getTime(),rt=setTimeout(()=>{var Ot;(Ot=m.onAutoClose)==null||Ot.call(m,m),ka()},ee.current)),()=>clearTimeout(rt)},[j,g,m,de,J,Sn,ka]),$.useEffect(()=>{m.delete&&ka()},[ka,m.delete]);function mf(){var rt,Ot,Zt;return z!=null&&z.loading?$.createElement("div",{className:Ja(B==null?void 0:B.loader,(rt=m==null?void 0:m.classNames)==null?void 0:rt.loader,"sonner-loader"),"data-visible":de==="loading"},z.loading):M?$.createElement("div",{className:Ja(B==null?void 0:B.loader,(Ot=m==null?void 0:m.classNames)==null?void 0:Ot.loader,"sonner-loader"),"data-visible":de==="loading"},M):$.createElement(Nq,{className:Ja(B==null?void 0:B.loader,(Zt=m==null?void 0:m.classNames)==null?void 0:Zt.loader),visible:de==="loading"})}return $.createElement("li",{tabIndex:0,ref:K,className:Ja(E,Ze,B==null?void 0:B.toast,(t=m==null?void 0:m.classNames)==null?void 0:t.toast,B==null?void 0:B.default,B==null?void 0:B[de],(r=m==null?void 0:m.classNames)==null?void 0:r[de]),"data-sonner-toast":"","data-rich-colors":(n=m.richColors)!=null?n:C,"data-styled":!(m.jsx||m.unstyled||y),"data-mounted":H,"data-promise":!!m.promise,"data-swiped":Re,"data-removed":L,"data-visible":ve,"data-y-position":ht,"data-x-position":on,"data-index":b,"data-front":ie,"data-swiping":V,"data-dismissible":Me,"data-type":de,"data-invert":ll,"data-swipe-out":te,"data-swipe-direction":q,"data-expanded":!!(j||D&&H),style:{"--index":b,"--toasts-before":b,"--z-index":_.length-b,"--offset":`${L?ge:it.current}px`,"--initial-height":D?"auto":`${Xe}px`,...N,...m.style},onDragEnd:()=>{Q(!1),U(null),xt.current=null},onPointerDown:rt=>{Hs||!Me||(oe.current=new Date,ke(it.current),rt.target.setPointerCapture(rt.pointerId),rt.target.tagName!=="BUTTON"&&(Q(!0),xt.current={x:rt.clientX,y:rt.clientY}))},onPointerUp:()=>{var rt,Ot,Zt,Cn;if(te||!Me)return;xt.current=null;let Dn=Number(((rt=K.current)==null?void 0:rt.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),pn=Number(((Ot=K.current)==null?void 0:Ot.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),X=new Date().getTime()-((Zt=oe.current)==null?void 0:Zt.getTime()),le=se==="x"?Dn:pn,ae=Math.abs(le)/X;if(Math.abs(le)>=Hq||ae>.11){ke(it.current),(Cn=m.onDismiss)==null||Cn.call(m,m),G(se==="x"?Dn>0?"right":"left":pn>0?"down":"up"),ka(),be(!0),We(!1);return}Q(!1),U(null)},onPointerMove:rt=>{var Ot,Zt,Cn,Dn;if(!xt.current||!Me||((Ot=window.getSelection())==null?void 0:Ot.toString().length)>0)return;let pn=rt.clientY-xt.current.y,X=rt.clientX-xt.current.x,le=(Zt=e.swipeDirections)!=null?Zt:Kq(T);!se&&(Math.abs(X)>1||Math.abs(pn)>1)&&U(Math.abs(X)>Math.abs(pn)?"x":"y");let ae={x:0,y:0};se==="y"?(le.includes("top")||le.includes("bottom"))&&(le.includes("top")&&pn<0||le.includes("bottom")&&pn>0)&&(ae.y=pn):se==="x"&&(le.includes("left")||le.includes("right"))&&(le.includes("left")&&X<0||le.includes("right")&&X>0)&&(ae.x=X),(Math.abs(ae.x)>0||Math.abs(ae.y)>0)&&We(!0),(Cn=K.current)==null||Cn.style.setProperty("--swipe-amount-x",`${ae.x}px`),(Dn=K.current)==null||Dn.style.setProperty("--swipe-amount-y",`${ae.y}px`)}},yt&&!m.jsx?$.createElement("button",{"aria-label":Z,"data-disabled":Hs,"data-close-button":!0,onClick:Hs||!Me?()=>{}:()=>{var rt;ka(),(rt=m.onDismiss)==null||rt.call(m,m)},className:Ja(B==null?void 0:B.closeButton,(a=m==null?void 0:m.classNames)==null?void 0:a.closeButton)},(i=z==null?void 0:z.close)!=null?i:Oq):null,m.jsx||w.isValidElement(m.title)?m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title:$.createElement($.Fragment,null,de||m.icon||m.promise?$.createElement("div",{"data-icon":"",className:Ja(B==null?void 0:B.icon,(o=m==null?void 0:m.classNames)==null?void 0:o.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||mf():null,m.type!=="loading"?m.icon||(z==null?void 0:z[de])||Sq(de):null):null,$.createElement("div",{"data-content":"",className:Ja(B==null?void 0:B.content,(l=m==null?void 0:m.classNames)==null?void 0:l.content)},$.createElement("div",{"data-title":"",className:Ja(B==null?void 0:B.title,(c=m==null?void 0:m.classNames)==null?void 0:c.title)},typeof m.title=="function"?m.title():m.title),m.description?$.createElement("div",{"data-description":"",className:Ja(R,ft,B==null?void 0:B.description,(u=m==null?void 0:m.classNames)==null?void 0:u.description)},typeof m.description=="function"?m.description():m.description):null),w.isValidElement(m.cancel)?m.cancel:m.cancel&&Up(m.cancel)?$.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||A,onClick:rt=>{var Ot,Zt;Up(m.cancel)&&Me&&((Zt=(Ot=m.cancel).onClick)==null||Zt.call(Ot,rt),ka())},className:Ja(B==null?void 0:B.cancelButton,(d=m==null?void 0:m.classNames)==null?void 0:d.cancelButton)},m.cancel.label):null,w.isValidElement(m.action)?m.action:m.action&&Up(m.action)?$.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||O,onClick:rt=>{var Ot,Zt;Up(m.action)&&((Zt=(Ot=m.action).onClick)==null||Zt.call(Ot,rt),!rt.defaultPrevented&&ka())},className:Ja(B==null?void 0:B.actionButton,(f=m==null?void 0:m.classNames)==null?void 0:f.actionButton)},m.action.label):null))};function zP(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function Yq(e,t){let r={};return[e,t].forEach((n,a)=>{let i=a===1,o=i?"--mobile-offset":"--offset",l=i?Uq:zq;function c(u){["top","right","bottom","left"].forEach(d=>{r[`${o}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof n=="number"||typeof n=="string"?c(n):typeof n=="object"?["top","right","bottom","left"].forEach(u=>{n[u]===void 0?r[`${o}-${u}`]=l:r[`${o}-${u}`]=typeof n[u]=="number"?`${n[u]}px`:n[u]}):c(l)}),r}var Xq=w.forwardRef(function(e,t){let{invert:r,position:n="bottom-right",hotkey:a=["altKey","KeyT"],expand:i,closeButton:o,className:l,offset:c,mobileOffset:u,theme:d="light",richColors:f,duration:h,style:m,visibleToasts:y=Fq,toastOptions:g,dir:p=zP(),gap:v=Wq,loadingIcon:x,icons:b,containerAriaLabel:_="Notifications",pauseWhenPageIsHidden:j}=e,[S,C]=$.useState([]),k=$.useMemo(()=>Array.from(new Set([n].concat(S.filter(J=>J.position).map(J=>J.position)))),[S,n]),[N,A]=$.useState([]),[O,E]=$.useState(!1),[R,P]=$.useState(!1),[T,I]=$.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),M=$.useRef(null),D=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),B=$.useRef(null),z=$.useRef(!1),Z=$.useCallback(J=>{C(se=>{var U;return(U=se.find(q=>q.id===J.id))!=null&&U.delete||Jn.dismiss(J.id),se.filter(({id:q})=>q!==J.id)})},[]);return $.useEffect(()=>Jn.subscribe(J=>{if(J.dismiss){C(se=>se.map(U=>U.id===J.id?{...U,delete:!0}:U));return}setTimeout(()=>{gI.flushSync(()=>{C(se=>{let U=se.findIndex(q=>q.id===J.id);return U!==-1?[...se.slice(0,U),{...se[U],...J},...se.slice(U+1)]:[J,...se]})})})}),[]),$.useEffect(()=>{if(d!=="system"){I(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?I("dark"):I("light")),typeof window>"u")return;let J=window.matchMedia("(prefers-color-scheme: dark)");try{J.addEventListener("change",({matches:se})=>{I(se?"dark":"light")})}catch{J.addListener(({matches:U})=>{try{I(U?"dark":"light")}catch(q){console.error(q)}})}},[d]),$.useEffect(()=>{S.length<=1&&E(!1)},[S]),$.useEffect(()=>{let J=se=>{var U,q;a.every(G=>se[G]||se.code===G)&&(E(!0),(U=M.current)==null||U.focus()),se.code==="Escape"&&(document.activeElement===M.current||(q=M.current)!=null&&q.contains(document.activeElement))&&E(!1)};return document.addEventListener("keydown",J),()=>document.removeEventListener("keydown",J)},[a]),$.useEffect(()=>{if(M.current)return()=>{B.current&&(B.current.focus({preventScroll:!0}),B.current=null,z.current=!1)}},[M.current]),$.createElement("section",{ref:t,"aria-label":`${_} ${D}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},k.map((J,se)=>{var U;let[q,G]=J.split("-");return S.length?$.createElement("ol",{key:J,dir:p==="auto"?zP():p,tabIndex:-1,ref:M,className:l,"data-sonner-toaster":!0,"data-theme":T,"data-y-position":q,"data-lifted":O&&S.length>1&&!i,"data-x-position":G,style:{"--front-toast-height":`${((U=N[0])==null?void 0:U.height)||0}px`,"--width":`${Vq}px`,"--gap":`${v}px`,...m,...Yq(c,u)},onBlur:H=>{z.current&&!H.currentTarget.contains(H.relatedTarget)&&(z.current=!1,B.current&&(B.current.focus({preventScroll:!0}),B.current=null))},onFocus:H=>{H.target instanceof HTMLElement&&H.target.dataset.dismissible==="false"||z.current||(z.current=!0,B.current=H.relatedTarget)},onMouseEnter:()=>E(!0),onMouseMove:()=>E(!0),onMouseLeave:()=>{R||E(!1)},onDragEnd:()=>E(!1),onPointerDown:H=>{H.target instanceof HTMLElement&&H.target.dataset.dismissible==="false"||P(!0)},onPointerUp:()=>P(!1)},S.filter(H=>!H.position&&se===0||H.position===J).map((H,fe)=>{var L,Y;return $.createElement(Gq,{key:H.id,icons:b,index:fe,toast:H,defaultRichColors:f,duration:(L=g==null?void 0:g.duration)!=null?L:h,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:r,visibleToasts:y,closeButton:(Y=g==null?void 0:g.closeButton)!=null?Y:o,interacting:R,position:J,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,removeToast:Z,toasts:S.filter(V=>V.position==H.position),heights:N.filter(V=>V.position==H.position),setHeights:A,expandByDefault:i,gap:v,loadingIcon:x,expanded:O,pauseWhenPageIsHidden:j,swipeDirections:e.swipeDirections})})):null}))});const Zq=({...e})=>{const{theme:t="system"}=_q();return s.jsx(Xq,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var Qq=uS[" useId ".trim().toString()]||(()=>{}),Jq=0;function Ki(e){const[t,r]=w.useState(Qq());return hn(()=>{r(n=>n??String(Jq++))},[e]),t?`radix-${t}`:""}const e9=["top","right","bottom","left"],zo=Math.min,pa=Math.max,pv=Math.round,Vp=Math.floor,Gi=e=>({x:e,y:e}),t9={left:"right",right:"left",bottom:"top",top:"bottom"},r9={start:"end",end:"start"};function Vj(e,t,r){return pa(e,zo(t,r))}function As(e,t){return typeof e=="function"?e(t):e}function Os(e){return e.split("-")[0]}function Fd(e){return e.split("-")[1]}function cC(e){return e==="x"?"y":"x"}function uC(e){return e==="y"?"height":"width"}const n9=new Set(["top","bottom"]);function Fi(e){return n9.has(Os(e))?"y":"x"}function dC(e){return cC(Fi(e))}function a9(e,t,r){r===void 0&&(r=!1);const n=Fd(e),a=dC(e),i=uC(a);let o=a==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=gv(o)),[o,gv(o)]}function i9(e){const t=gv(e);return[Wj(e),t,Wj(t)]}function Wj(e){return e.replace(/start|end/g,t=>r9[t])}const UP=["left","right"],VP=["right","left"],s9=["top","bottom"],o9=["bottom","top"];function l9(e,t,r){switch(e){case"top":case"bottom":return r?t?VP:UP:t?UP:VP;case"left":case"right":return t?s9:o9;default:return[]}}function c9(e,t,r,n){const a=Fd(e);let i=l9(Os(e),r==="start",n);return a&&(i=i.map(o=>o+"-"+a),t&&(i=i.concat(i.map(Wj)))),i}function gv(e){return e.replace(/left|right|bottom|top/g,t=>t9[t])}function u9(e){return{top:0,right:0,bottom:0,left:0,...e}}function xD(e){return typeof e!="number"?u9(e):{top:e,right:e,bottom:e,left:e}}function vv(e){const{x:t,y:r,width:n,height:a}=e;return{width:n,height:a,top:r,left:t,right:t+n,bottom:r+a,x:t,y:r}}function WP(e,t,r){let{reference:n,floating:a}=e;const i=Fi(t),o=dC(t),l=uC(o),c=Os(t),u=i==="y",d=n.x+n.width/2-a.width/2,f=n.y+n.height/2-a.height/2,h=n[l]/2-a[l]/2;let m;switch(c){case"top":m={x:d,y:n.y-a.height};break;case"bottom":m={x:d,y:n.y+n.height};break;case"right":m={x:n.x+n.width,y:f};break;case"left":m={x:n.x-a.width,y:f};break;default:m={x:n.x,y:n.y}}switch(Fd(t)){case"start":m[o]-=h*(r&&u?-1:1);break;case"end":m[o]+=h*(r&&u?-1:1);break}return m}const d9=async(e,t,r)=>{const{placement:n="bottom",strategy:a="absolute",middleware:i=[],platform:o}=r,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:a}),{x:d,y:f}=WP(u,n,c),h=n,m={},y=0;for(let g=0;g<l.length;g++){const{name:p,fn:v}=l[g],{x,y:b,data:_,reset:j}=await v({x:d,y:f,initialPlacement:n,placement:h,strategy:a,middlewareData:m,rects:u,platform:o,elements:{reference:e,floating:t}});d=x??d,f=b??f,m={...m,[p]:{...m[p],..._}},j&&y<=50&&(y++,typeof j=="object"&&(j.placement&&(h=j.placement),j.rects&&(u=j.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:a}):j.rects),{x:d,y:f}=WP(u,h,c)),g=-1)}return{x:d,y:f,placement:h,strategy:a,middlewareData:m}};async function Hh(e,t){var r;t===void 0&&(t={});const{x:n,y:a,platform:i,rects:o,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:h=!1,padding:m=0}=As(t,e),y=xD(m),p=l[h?f==="floating"?"reference":"floating":f],v=vv(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(p)))==null||r?p:p.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),x=f==="floating"?{x:n,y:a,width:o.floating.width,height:o.floating.height}:o.reference,b=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),_=await(i.isElement==null?void 0:i.isElement(b))?await(i.getScale==null?void 0:i.getScale(b))||{x:1,y:1}:{x:1,y:1},j=vv(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:x,offsetParent:b,strategy:c}):x);return{top:(v.top-j.top+y.top)/_.y,bottom:(j.bottom-v.bottom+y.bottom)/_.y,left:(v.left-j.left+y.left)/_.x,right:(j.right-v.right+y.right)/_.x}}const f9=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:a,rects:i,platform:o,elements:l,middlewareData:c}=t,{element:u,padding:d=0}=As(e,t)||{};if(u==null)return{};const f=xD(d),h={x:r,y:n},m=dC(a),y=uC(m),g=await o.getDimensions(u),p=m==="y",v=p?"top":"left",x=p?"bottom":"right",b=p?"clientHeight":"clientWidth",_=i.reference[y]+i.reference[m]-h[m]-i.floating[y],j=h[m]-i.reference[m],S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let C=S?S[b]:0;(!C||!await(o.isElement==null?void 0:o.isElement(S)))&&(C=l.floating[b]||i.floating[y]);const k=_/2-j/2,N=C/2-g[y]/2-1,A=zo(f[v],N),O=zo(f[x],N),E=A,R=C-g[y]-O,P=C/2-g[y]/2+k,T=Vj(E,P,R),I=!c.arrow&&Fd(a)!=null&&P!==T&&i.reference[y]/2-(P<E?A:O)-g[y]/2<0,M=I?P<E?P-E:P-R:0;return{[m]:h[m]+M,data:{[m]:T,centerOffset:P-T-M,...I&&{alignmentOffset:M}},reset:I}}}),h9=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:a,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:g=!0,...p}=As(e,t);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const v=Os(a),x=Fi(l),b=Os(l)===l,_=await(c.isRTL==null?void 0:c.isRTL(u.floating)),j=h||(b||!g?[gv(l)]:i9(l)),S=y!=="none";!h&&S&&j.push(...c9(l,g,y,_));const C=[l,...j],k=await Hh(t,p),N=[];let A=((n=i.flip)==null?void 0:n.overflows)||[];if(d&&N.push(k[v]),f){const P=a9(a,o,_);N.push(k[P[0]],k[P[1]])}if(A=[...A,{placement:a,overflows:N}],!N.every(P=>P<=0)){var O,E;const P=(((O=i.flip)==null?void 0:O.index)||0)+1,T=C[P];if(T&&(!(f==="alignment"?x!==Fi(T):!1)||A.every(D=>D.overflows[0]>0&&Fi(D.placement)===x)))return{data:{index:P,overflows:A},reset:{placement:T}};let I=(E=A.filter(M=>M.overflows[0]<=0).sort((M,D)=>M.overflows[1]-D.overflows[1])[0])==null?void 0:E.placement;if(!I)switch(m){case"bestFit":{var R;const M=(R=A.filter(D=>{if(S){const B=Fi(D.placement);return B===x||B==="y"}return!0}).map(D=>[D.placement,D.overflows.filter(B=>B>0).reduce((B,z)=>B+z,0)]).sort((D,B)=>D[1]-B[1])[0])==null?void 0:R[0];M&&(I=M);break}case"initialPlacement":I=l;break}if(a!==I)return{reset:{placement:I}}}return{}}}};function HP(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function qP(e){return e9.some(t=>e[t]>=0)}const m9=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...a}=As(e,t);switch(n){case"referenceHidden":{const i=await Hh(t,{...a,elementContext:"reference"}),o=HP(i,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:qP(o)}}}case"escaped":{const i=await Hh(t,{...a,altBoundary:!0}),o=HP(i,r.floating);return{data:{escapedOffsets:o,escaped:qP(o)}}}default:return{}}}}},bD=new Set(["left","top"]);async function p9(e,t){const{placement:r,platform:n,elements:a}=e,i=await(n.isRTL==null?void 0:n.isRTL(a.floating)),o=Os(r),l=Fd(r),c=Fi(r)==="y",u=bD.has(o)?-1:1,d=i&&c?-1:1,f=As(t,e);let{mainAxis:h,crossAxis:m,alignmentAxis:y}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof y=="number"&&(m=l==="end"?y*-1:y),c?{x:m*d,y:h*u}:{x:h*u,y:m*d}}const g9=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:a,y:i,placement:o,middlewareData:l}=t,c=await p9(t,e);return o===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:a+c.x,y:i+c.y,data:{...c,placement:o}}}}},v9=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:a}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:p=>{let{x:v,y:x}=p;return{x:v,y:x}}},...c}=As(e,t),u={x:r,y:n},d=await Hh(t,c),f=Fi(Os(a)),h=cC(f);let m=u[h],y=u[f];if(i){const p=h==="y"?"top":"left",v=h==="y"?"bottom":"right",x=m+d[p],b=m-d[v];m=Vj(x,m,b)}if(o){const p=f==="y"?"top":"left",v=f==="y"?"bottom":"right",x=y+d[p],b=y-d[v];y=Vj(x,y,b)}const g=l.fn({...t,[h]:m,[f]:y});return{...g,data:{x:g.x-r,y:g.y-n,enabled:{[h]:i,[f]:o}}}}}},y9=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:a,rects:i,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=As(e,t),d={x:r,y:n},f=Fi(a),h=cC(f);let m=d[h],y=d[f];const g=As(l,t),p=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const b=h==="y"?"height":"width",_=i.reference[h]-i.floating[b]+p.mainAxis,j=i.reference[h]+i.reference[b]-p.mainAxis;m<_?m=_:m>j&&(m=j)}if(u){var v,x;const b=h==="y"?"width":"height",_=bD.has(Os(a)),j=i.reference[f]-i.floating[b]+(_&&((v=o.offset)==null?void 0:v[f])||0)+(_?0:p.crossAxis),S=i.reference[f]+i.reference[b]+(_?0:((x=o.offset)==null?void 0:x[f])||0)-(_?p.crossAxis:0);y<j?y=j:y>S&&(y=S)}return{[h]:m,[f]:y}}}},x9=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:a,rects:i,platform:o,elements:l}=t,{apply:c=()=>{},...u}=As(e,t),d=await Hh(t,u),f=Os(a),h=Fd(a),m=Fi(a)==="y",{width:y,height:g}=i.floating;let p,v;f==="top"||f==="bottom"?(p=f,v=h===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(v=f,p=h==="end"?"top":"bottom");const x=g-d.top-d.bottom,b=y-d.left-d.right,_=zo(g-d[p],x),j=zo(y-d[v],b),S=!t.middlewareData.shift;let C=_,k=j;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(k=b),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(C=x),S&&!h){const A=pa(d.left,0),O=pa(d.right,0),E=pa(d.top,0),R=pa(d.bottom,0);m?k=y-2*(A!==0||O!==0?A+O:pa(d.left,d.right)):C=g-2*(E!==0||R!==0?E+R:pa(d.top,d.bottom))}await c({...t,availableWidth:k,availableHeight:C});const N=await o.getDimensions(l.floating);return y!==N.width||g!==N.height?{reset:{rects:!0}}:{}}}};function bx(){return typeof window<"u"}function zd(e){return wD(e)?(e.nodeName||"").toLowerCase():"#document"}function ba(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function ts(e){var t;return(t=(wD(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function wD(e){return bx()?e instanceof Node||e instanceof ba(e).Node:!1}function Si(e){return bx()?e instanceof Element||e instanceof ba(e).Element:!1}function Qi(e){return bx()?e instanceof HTMLElement||e instanceof ba(e).HTMLElement:!1}function KP(e){return!bx()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof ba(e).ShadowRoot}const b9=new Set(["inline","contents"]);function op(e){const{overflow:t,overflowX:r,overflowY:n,display:a}=Ci(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!b9.has(a)}const w9=new Set(["table","td","th"]);function j9(e){return w9.has(zd(e))}const _9=[":popover-open",":modal"];function wx(e){return _9.some(t=>{try{return e.matches(t)}catch{return!1}})}const S9=["transform","translate","scale","rotate","perspective"],C9=["transform","translate","scale","rotate","perspective","filter"],N9=["paint","layout","strict","content"];function fC(e){const t=hC(),r=Si(e)?Ci(e):e;return S9.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||C9.some(n=>(r.willChange||"").includes(n))||N9.some(n=>(r.contain||"").includes(n))}function k9(e){let t=Uo(e);for(;Qi(t)&&!qu(t);){if(fC(t))return t;if(wx(t))return null;t=Uo(t)}return null}function hC(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const P9=new Set(["html","body","#document"]);function qu(e){return P9.has(zd(e))}function Ci(e){return ba(e).getComputedStyle(e)}function jx(e){return Si(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Uo(e){if(zd(e)==="html")return e;const t=e.assignedSlot||e.parentNode||KP(e)&&e.host||ts(e);return KP(t)?t.host:t}function jD(e){const t=Uo(e);return qu(t)?e.ownerDocument?e.ownerDocument.body:e.body:Qi(t)&&op(t)?t:jD(t)}function qh(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const a=jD(e),i=a===((n=e.ownerDocument)==null?void 0:n.body),o=ba(a);if(i){const l=Hj(o);return t.concat(o,o.visualViewport||[],op(a)?a:[],l&&r?qh(l):[])}return t.concat(a,qh(a,[],r))}function Hj(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function _D(e){const t=Ci(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const a=Qi(e),i=a?e.offsetWidth:r,o=a?e.offsetHeight:n,l=pv(r)!==i||pv(n)!==o;return l&&(r=i,n=o),{width:r,height:n,$:l}}function mC(e){return Si(e)?e:e.contextElement}function wu(e){const t=mC(e);if(!Qi(t))return Gi(1);const r=t.getBoundingClientRect(),{width:n,height:a,$:i}=_D(t);let o=(i?pv(r.width):r.width)/n,l=(i?pv(r.height):r.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const E9=Gi(0);function SD(e){const t=ba(e);return!hC()||!t.visualViewport?E9:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function A9(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==ba(e)?!1:t}function nc(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const a=e.getBoundingClientRect(),i=mC(e);let o=Gi(1);t&&(n?Si(n)&&(o=wu(n)):o=wu(e));const l=A9(i,r,n)?SD(i):Gi(0);let c=(a.left+l.x)/o.x,u=(a.top+l.y)/o.y,d=a.width/o.x,f=a.height/o.y;if(i){const h=ba(i),m=n&&Si(n)?ba(n):n;let y=h,g=Hj(y);for(;g&&n&&m!==y;){const p=wu(g),v=g.getBoundingClientRect(),x=Ci(g),b=v.left+(g.clientLeft+parseFloat(x.paddingLeft))*p.x,_=v.top+(g.clientTop+parseFloat(x.paddingTop))*p.y;c*=p.x,u*=p.y,d*=p.x,f*=p.y,c+=b,u+=_,y=ba(g),g=Hj(y)}}return vv({width:d,height:f,x:c,y:u})}function pC(e,t){const r=jx(e).scrollLeft;return t?t.left+r:nc(ts(e)).left+r}function CD(e,t,r){r===void 0&&(r=!1);const n=e.getBoundingClientRect(),a=n.left+t.scrollLeft-(r?0:pC(e,n)),i=n.top+t.scrollTop;return{x:a,y:i}}function O9(e){let{elements:t,rect:r,offsetParent:n,strategy:a}=e;const i=a==="fixed",o=ts(n),l=t?wx(t.floating):!1;if(n===o||l&&i)return r;let c={scrollLeft:0,scrollTop:0},u=Gi(1);const d=Gi(0),f=Qi(n);if((f||!f&&!i)&&((zd(n)!=="body"||op(o))&&(c=jx(n)),Qi(n))){const m=nc(n);u=wu(n),d.x=m.x+n.clientLeft,d.y=m.y+n.clientTop}const h=o&&!f&&!i?CD(o,c,!0):Gi(0);return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-c.scrollLeft*u.x+d.x+h.x,y:r.y*u.y-c.scrollTop*u.y+d.y+h.y}}function T9(e){return Array.from(e.getClientRects())}function R9(e){const t=ts(e),r=jx(e),n=e.ownerDocument.body,a=pa(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),i=pa(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+pC(e);const l=-r.scrollTop;return Ci(n).direction==="rtl"&&(o+=pa(t.clientWidth,n.clientWidth)-a),{width:a,height:i,x:o,y:l}}function M9(e,t){const r=ba(e),n=ts(e),a=r.visualViewport;let i=n.clientWidth,o=n.clientHeight,l=0,c=0;if(a){i=a.width,o=a.height;const u=hC();(!u||u&&t==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}return{width:i,height:o,x:l,y:c}}const $9=new Set(["absolute","fixed"]);function I9(e,t){const r=nc(e,!0,t==="fixed"),n=r.top+e.clientTop,a=r.left+e.clientLeft,i=Qi(e)?wu(e):Gi(1),o=e.clientWidth*i.x,l=e.clientHeight*i.y,c=a*i.x,u=n*i.y;return{width:o,height:l,x:c,y:u}}function GP(e,t,r){let n;if(t==="viewport")n=M9(e,r);else if(t==="document")n=R9(ts(e));else if(Si(t))n=I9(t,r);else{const a=SD(e);n={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return vv(n)}function ND(e,t){const r=Uo(e);return r===t||!Si(r)||qu(r)?!1:Ci(r).position==="fixed"||ND(r,t)}function D9(e,t){const r=t.get(e);if(r)return r;let n=qh(e,[],!1).filter(l=>Si(l)&&zd(l)!=="body"),a=null;const i=Ci(e).position==="fixed";let o=i?Uo(e):e;for(;Si(o)&&!qu(o);){const l=Ci(o),c=fC(o);!c&&l.position==="fixed"&&(a=null),(i?!c&&!a:!c&&l.position==="static"&&!!a&&$9.has(a.position)||op(o)&&!c&&ND(e,o))?n=n.filter(d=>d!==o):a=l,o=Uo(o)}return t.set(e,n),n}function L9(e){let{element:t,boundary:r,rootBoundary:n,strategy:a}=e;const o=[...r==="clippingAncestors"?wx(t)?[]:D9(t,this._c):[].concat(r),n],l=o[0],c=o.reduce((u,d)=>{const f=GP(t,d,a);return u.top=pa(f.top,u.top),u.right=zo(f.right,u.right),u.bottom=zo(f.bottom,u.bottom),u.left=pa(f.left,u.left),u},GP(t,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function B9(e){const{width:t,height:r}=_D(e);return{width:t,height:r}}function F9(e,t,r){const n=Qi(t),a=ts(t),i=r==="fixed",o=nc(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const c=Gi(0);function u(){c.x=pC(a)}if(n||!n&&!i)if((zd(t)!=="body"||op(a))&&(l=jx(t)),n){const m=nc(t,!0,i,t);c.x=m.x+t.clientLeft,c.y=m.y+t.clientTop}else a&&u();i&&!n&&a&&u();const d=a&&!n&&!i?CD(a,l):Gi(0),f=o.left+l.scrollLeft-c.x-d.x,h=o.top+l.scrollTop-c.y-d.y;return{x:f,y:h,width:o.width,height:o.height}}function Rb(e){return Ci(e).position==="static"}function YP(e,t){if(!Qi(e)||Ci(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return ts(e)===r&&(r=r.ownerDocument.body),r}function kD(e,t){const r=ba(e);if(wx(e))return r;if(!Qi(e)){let a=Uo(e);for(;a&&!qu(a);){if(Si(a)&&!Rb(a))return a;a=Uo(a)}return r}let n=YP(e,t);for(;n&&j9(n)&&Rb(n);)n=YP(n,t);return n&&qu(n)&&Rb(n)&&!fC(n)?r:n||k9(e)||r}const z9=async function(e){const t=this.getOffsetParent||kD,r=this.getDimensions,n=await r(e.floating);return{reference:F9(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function U9(e){return Ci(e).direction==="rtl"}const V9={convertOffsetParentRelativeRectToViewportRelativeRect:O9,getDocumentElement:ts,getClippingRect:L9,getOffsetParent:kD,getElementRects:z9,getClientRects:T9,getDimensions:B9,getScale:wu,isElement:Si,isRTL:U9};function PD(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function W9(e,t){let r=null,n;const a=ts(e);function i(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const u=e.getBoundingClientRect(),{left:d,top:f,width:h,height:m}=u;if(l||t(),!h||!m)return;const y=Vp(f),g=Vp(a.clientWidth-(d+h)),p=Vp(a.clientHeight-(f+m)),v=Vp(d),b={rootMargin:-y+"px "+-g+"px "+-p+"px "+-v+"px",threshold:pa(0,zo(1,c))||1};let _=!0;function j(S){const C=S[0].intersectionRatio;if(C!==c){if(!_)return o();C?o(!1,C):n=setTimeout(()=>{o(!1,1e-7)},1e3)}C===1&&!PD(u,e.getBoundingClientRect())&&o(),_=!1}try{r=new IntersectionObserver(j,{...b,root:a.ownerDocument})}catch{r=new IntersectionObserver(j,b)}r.observe(e)}return o(!0),i}function H9(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,u=mC(e),d=a||i?[...u?qh(u):[],...qh(t)]:[];d.forEach(v=>{a&&v.addEventListener("scroll",r,{passive:!0}),i&&v.addEventListener("resize",r)});const f=u&&l?W9(u,r):null;let h=-1,m=null;o&&(m=new ResizeObserver(v=>{let[x]=v;x&&x.target===u&&m&&(m.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var b;(b=m)==null||b.observe(t)})),r()}),u&&!c&&m.observe(u),m.observe(t));let y,g=c?nc(e):null;c&&p();function p(){const v=nc(e);g&&!PD(g,v)&&r(),g=v,y=requestAnimationFrame(p)}return r(),()=>{var v;d.forEach(x=>{a&&x.removeEventListener("scroll",r),i&&x.removeEventListener("resize",r)}),f==null||f(),(v=m)==null||v.disconnect(),m=null,c&&cancelAnimationFrame(y)}}const q9=g9,K9=v9,G9=h9,Y9=x9,X9=m9,XP=f9,Z9=y9,Q9=(e,t,r)=>{const n=new Map,a={platform:V9,...r},i={...a.platform,_c:n};return d9(e,t,{...a,platform:i})};var J9=typeof document<"u",e7=function(){},Dg=J9?w.useLayoutEffect:e7;function yv(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!yv(e[n],t[n]))return!1;return!0}if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,a[n]))return!1;for(n=r;n--!==0;){const i=a[n];if(!(i==="_owner"&&e.$$typeof)&&!yv(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function ED(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function ZP(e,t){const r=ED(e);return Math.round(t*r)/r}function Mb(e){const t=w.useRef(e);return Dg(()=>{t.current=e}),t}function t7(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:a,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[d,f]=w.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[h,m]=w.useState(n);yv(h,n)||m(n);const[y,g]=w.useState(null),[p,v]=w.useState(null),x=w.useCallback(D=>{D!==S.current&&(S.current=D,g(D))},[]),b=w.useCallback(D=>{D!==C.current&&(C.current=D,v(D))},[]),_=i||y,j=o||p,S=w.useRef(null),C=w.useRef(null),k=w.useRef(d),N=c!=null,A=Mb(c),O=Mb(a),E=Mb(u),R=w.useCallback(()=>{if(!S.current||!C.current)return;const D={placement:t,strategy:r,middleware:h};O.current&&(D.platform=O.current),Q9(S.current,C.current,D).then(B=>{const z={...B,isPositioned:E.current!==!1};P.current&&!yv(k.current,z)&&(k.current=z,pc.flushSync(()=>{f(z)}))})},[h,t,r,O,E]);Dg(()=>{u===!1&&k.current.isPositioned&&(k.current.isPositioned=!1,f(D=>({...D,isPositioned:!1})))},[u]);const P=w.useRef(!1);Dg(()=>(P.current=!0,()=>{P.current=!1}),[]),Dg(()=>{if(_&&(S.current=_),j&&(C.current=j),_&&j){if(A.current)return A.current(_,j,R);R()}},[_,j,R,A,N]);const T=w.useMemo(()=>({reference:S,floating:C,setReference:x,setFloating:b}),[x,b]),I=w.useMemo(()=>({reference:_,floating:j}),[_,j]),M=w.useMemo(()=>{const D={position:r,left:0,top:0};if(!I.floating)return D;const B=ZP(I.floating,d.x),z=ZP(I.floating,d.y);return l?{...D,transform:"translate("+B+"px, "+z+"px)",...ED(I.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:B,top:z}},[r,l,I.floating,d.x,d.y]);return w.useMemo(()=>({...d,update:R,refs:T,elements:I,floatingStyles:M}),[d,R,T,I,M])}const r7=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:a}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?XP({element:n.current,padding:a}).fn(r):{}:n?XP({element:n,padding:a}).fn(r):{}}}},n7=(e,t)=>({...q9(e),options:[e,t]}),a7=(e,t)=>({...K9(e),options:[e,t]}),i7=(e,t)=>({...Z9(e),options:[e,t]}),s7=(e,t)=>({...G9(e),options:[e,t]}),o7=(e,t)=>({...Y9(e),options:[e,t]}),l7=(e,t)=>({...X9(e),options:[e,t]}),c7=(e,t)=>({...r7(e),options:[e,t]});var u7="Arrow",AD=w.forwardRef((e,t)=>{const{children:r,width:n=10,height:a=5,...i}=e;return s.jsx(Ve.svg,{...i,ref:t,width:n,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});AD.displayName=u7;var d7=AD;function _x(e){const[t,r]=w.useState(void 0);return hn(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=e.offsetWidth,l=e.offsetHeight;r({width:o,height:l})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var gC="Popper",[OD,Ud]=Yn(gC),[f7,TD]=OD(gC),RD=e=>{const{__scopePopper:t,children:r}=e,[n,a]=w.useState(null);return s.jsx(f7,{scope:t,anchor:n,onAnchorChange:a,children:r})};RD.displayName=gC;var MD="PopperAnchor",$D=w.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...a}=e,i=TD(MD,r),o=w.useRef(null),l=dt(t,o);return w.useEffect(()=>{i.onAnchorChange((n==null?void 0:n.current)||o.current)}),n?null:s.jsx(Ve.div,{...a,ref:l})});$D.displayName=MD;var vC="PopperContent",[h7,m7]=OD(vC),ID=w.forwardRef((e,t)=>{var H,fe,L,Y,V,Q;const{__scopePopper:r,side:n="bottom",sideOffset:a=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:f="partial",hideWhenDetached:h=!1,updatePositionStrategy:m="optimized",onPlaced:y,...g}=e,p=TD(vC,r),[v,x]=w.useState(null),b=dt(t,te=>x(te)),[_,j]=w.useState(null),S=_x(_),C=(S==null?void 0:S.width)??0,k=(S==null?void 0:S.height)??0,N=n+(i!=="center"?"-"+i:""),A=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},O=Array.isArray(u)?u:[u],E=O.length>0,R={padding:A,boundary:O.filter(g7),altBoundary:E},{refs:P,floatingStyles:T,placement:I,isPositioned:M,middlewareData:D}=t7({strategy:"fixed",placement:N,whileElementsMounted:(...te)=>H9(...te,{animationFrame:m==="always"}),elements:{reference:p.anchor},middleware:[n7({mainAxis:a+k,alignmentAxis:o}),c&&a7({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?i7():void 0,...R}),c&&s7({...R}),o7({...R,apply:({elements:te,rects:be,availableWidth:Re,availableHeight:We})=>{const{width:ge,height:ke}=be.reference,Xe=te.floating.style;Xe.setProperty("--radix-popper-available-width",`${Re}px`),Xe.setProperty("--radix-popper-available-height",`${We}px`),Xe.setProperty("--radix-popper-anchor-width",`${ge}px`),Xe.setProperty("--radix-popper-anchor-height",`${ke}px`)}}),_&&c7({element:_,padding:l}),v7({arrowWidth:C,arrowHeight:k}),h&&l7({strategy:"referenceHidden",...R})]}),[B,z]=BD(I),Z=tn(y);hn(()=>{M&&(Z==null||Z())},[M,Z]);const J=(H=D.arrow)==null?void 0:H.x,se=(fe=D.arrow)==null?void 0:fe.y,U=((L=D.arrow)==null?void 0:L.centerOffset)!==0,[q,G]=w.useState();return hn(()=>{v&&G(window.getComputedStyle(v).zIndex)},[v]),s.jsx("div",{ref:P.setFloating,"data-radix-popper-content-wrapper":"",style:{...T,transform:M?T.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:q,"--radix-popper-transform-origin":[(Y=D.transformOrigin)==null?void 0:Y.x,(V=D.transformOrigin)==null?void 0:V.y].join(" "),...((Q=D.hide)==null?void 0:Q.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:s.jsx(h7,{scope:r,placedSide:B,onArrowChange:j,arrowX:J,arrowY:se,shouldHideArrow:U,children:s.jsx(Ve.div,{"data-side":B,"data-align":z,...g,ref:b,style:{...g.style,animation:M?void 0:"none"}})})})});ID.displayName=vC;var DD="PopperArrow",p7={top:"bottom",right:"left",bottom:"top",left:"right"},LD=w.forwardRef(function(t,r){const{__scopePopper:n,...a}=t,i=m7(DD,n),o=p7[i.placedSide];return s.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:s.jsx(d7,{...a,ref:r,style:{...a.style,display:"block"}})})});LD.displayName=DD;function g7(e){return e!==null}var v7=e=>({name:"transformOrigin",options:e,fn(t){var p,v,x;const{placement:r,rects:n,middlewareData:a}=t,o=((p=a.arrow)==null?void 0:p.centerOffset)!==0,l=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[u,d]=BD(r),f={start:"0%",center:"50%",end:"100%"}[d],h=(((v=a.arrow)==null?void 0:v.x)??0)+l/2,m=(((x=a.arrow)==null?void 0:x.y)??0)+c/2;let y="",g="";return u==="bottom"?(y=o?f:`${h}px`,g=`${-c}px`):u==="top"?(y=o?f:`${h}px`,g=`${n.floating.height+c}px`):u==="right"?(y=`${-c}px`,g=o?f:`${m}px`):u==="left"&&(y=`${n.floating.width+c}px`,g=o?f:`${m}px`),{data:{x:y,y:g}}}});function BD(e){const[t,r="center"]=e.split("-");return[t,r]}var yC=RD,Sx=$D,xC=ID,bC=LD,[Cx,QOe]=Yn("Tooltip",[Ud]),Nx=Ud(),FD="TooltipProvider",y7=700,qj="tooltip.open",[x7,wC]=Cx(FD),zD=e=>{const{__scopeTooltip:t,delayDuration:r=y7,skipDelayDuration:n=300,disableHoverableContent:a=!1,children:i}=e,o=w.useRef(!0),l=w.useRef(!1),c=w.useRef(0);return w.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),s.jsx(x7,{scope:t,isOpenDelayedRef:o,delayDuration:r,onOpen:w.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:w.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,n)},[n]),isPointerInTransitRef:l,onPointerInTransitChange:w.useCallback(u=>{l.current=u},[]),disableHoverableContent:a,children:i})};zD.displayName=FD;var Kh="Tooltip",[b7,kx]=Cx(Kh),UD=e=>{const{__scopeTooltip:t,children:r,open:n,defaultOpen:a,onOpenChange:i,disableHoverableContent:o,delayDuration:l}=e,c=wC(Kh,e.__scopeTooltip),u=Nx(t),[d,f]=w.useState(null),h=Ki(),m=w.useRef(0),y=o??c.disableHoverableContent,g=l??c.delayDuration,p=w.useRef(!1),[v,x]=sa({prop:n,defaultProp:a??!1,onChange:C=>{C?(c.onOpen(),document.dispatchEvent(new CustomEvent(qj))):c.onClose(),i==null||i(C)},caller:Kh}),b=w.useMemo(()=>v?p.current?"delayed-open":"instant-open":"closed",[v]),_=w.useCallback(()=>{window.clearTimeout(m.current),m.current=0,p.current=!1,x(!0)},[x]),j=w.useCallback(()=>{window.clearTimeout(m.current),m.current=0,x(!1)},[x]),S=w.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>{p.current=!0,x(!0),m.current=0},g)},[g,x]);return w.useEffect(()=>()=>{m.current&&(window.clearTimeout(m.current),m.current=0)},[]),s.jsx(yC,{...u,children:s.jsx(b7,{scope:t,contentId:h,open:v,stateAttribute:b,trigger:d,onTriggerChange:f,onTriggerEnter:w.useCallback(()=>{c.isOpenDelayedRef.current?S():_()},[c.isOpenDelayedRef,S,_]),onTriggerLeave:w.useCallback(()=>{y?j():(window.clearTimeout(m.current),m.current=0)},[j,y]),onOpen:_,onClose:j,disableHoverableContent:y,children:r})})};UD.displayName=Kh;var Kj="TooltipTrigger",VD=w.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,a=kx(Kj,r),i=wC(Kj,r),o=Nx(r),l=w.useRef(null),c=dt(t,l,a.onTriggerChange),u=w.useRef(!1),d=w.useRef(!1),f=w.useCallback(()=>u.current=!1,[]);return w.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),s.jsx(Sx,{asChild:!0,...o,children:s.jsx(Ve.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...n,ref:c,onPointerMove:Oe(e.onPointerMove,h=>{h.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),d.current=!0)}),onPointerLeave:Oe(e.onPointerLeave,()=>{a.onTriggerLeave(),d.current=!1}),onPointerDown:Oe(e.onPointerDown,()=>{a.open&&a.onClose(),u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:Oe(e.onFocus,()=>{u.current||a.onOpen()}),onBlur:Oe(e.onBlur,a.onClose),onClick:Oe(e.onClick,a.onClose)})})});VD.displayName=Kj;var w7="TooltipPortal",[JOe,j7]=Cx(w7,{forceMount:void 0}),Ku="TooltipContent",WD=w.forwardRef((e,t)=>{const r=j7(Ku,e.__scopeTooltip),{forceMount:n=r.forceMount,side:a="top",...i}=e,o=kx(Ku,e.__scopeTooltip);return s.jsx(oa,{present:n||o.open,children:o.disableHoverableContent?s.jsx(HD,{side:a,...i,ref:t}):s.jsx(_7,{side:a,...i,ref:t})})}),_7=w.forwardRef((e,t)=>{const r=kx(Ku,e.__scopeTooltip),n=wC(Ku,e.__scopeTooltip),a=w.useRef(null),i=dt(t,a),[o,l]=w.useState(null),{trigger:c,onClose:u}=r,d=a.current,{onPointerInTransitChange:f}=n,h=w.useCallback(()=>{l(null),f(!1)},[f]),m=w.useCallback((y,g)=>{const p=y.currentTarget,v={x:y.clientX,y:y.clientY},x=P7(v,p.getBoundingClientRect()),b=E7(v,x),_=A7(g.getBoundingClientRect()),j=T7([...b,..._]);l(j),f(!0)},[f]);return w.useEffect(()=>()=>h(),[h]),w.useEffect(()=>{if(c&&d){const y=p=>m(p,d),g=p=>m(p,c);return c.addEventListener("pointerleave",y),d.addEventListener("pointerleave",g),()=>{c.removeEventListener("pointerleave",y),d.removeEventListener("pointerleave",g)}}},[c,d,m,h]),w.useEffect(()=>{if(o){const y=g=>{const p=g.target,v={x:g.clientX,y:g.clientY},x=(c==null?void 0:c.contains(p))||(d==null?void 0:d.contains(p)),b=!O7(v,o);x?h():b&&(h(),u())};return document.addEventListener("pointermove",y),()=>document.removeEventListener("pointermove",y)}},[c,d,o,u,h]),s.jsx(HD,{...e,ref:i})}),[S7,C7]=Cx(Kh,{isInside:!1}),N7=wI("TooltipContent"),HD=w.forwardRef((e,t)=>{const{__scopeTooltip:r,children:n,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=e,c=kx(Ku,r),u=Nx(r),{onClose:d}=c;return w.useEffect(()=>(document.addEventListener(qj,d),()=>document.removeEventListener(qj,d)),[d]),w.useEffect(()=>{if(c.trigger){const f=h=>{const m=h.target;m!=null&&m.contains(c.trigger)&&d()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,d]),s.jsx(Id,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:d,children:s.jsxs(xC,{"data-state":c.stateAttribute,...u,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[s.jsx(N7,{children:n}),s.jsx(S7,{scope:r,isInside:!0,children:s.jsx(DW,{id:c.contentId,role:"tooltip",children:a||n})})]})})});WD.displayName=Ku;var qD="TooltipArrow",k7=w.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,a=Nx(r);return C7(qD,r).isInside?null:s.jsx(bC,{...a,...n,ref:t})});k7.displayName=qD;function P7(e,t){const r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(r,n,a,i)){case i:return"left";case a:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function E7(e,t,r=5){const n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return n}function A7(e){const{top:t,right:r,bottom:n,left:a}=e;return[{x:a,y:t},{x:r,y:t},{x:r,y:n},{x:a,y:n}]}function O7(e,t){const{x:r,y:n}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],c=t[o],u=l.x,d=l.y,f=c.x,h=c.y;d>n!=h>n&&r<(f-u)*(n-d)/(h-d)+u&&(a=!a)}return a}function T7(e){const t=e.slice();return t.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),R7(t)}function R7(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const a=e[n];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))t.pop();else break}t.push(a)}t.pop();const r=[];for(let n=e.length-1;n>=0;n--){const a=e[n];for(;r.length>=2;){const i=r[r.length-1],o=r[r.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))r.pop();else break}r.push(a)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var M7=zD,$7=UD,I7=VD,KD=WD;const D7=M7,L7=$7,B7=I7,GD=w.forwardRef(({className:e,sideOffset:t=4,...r},n)=>s.jsx(KD,{ref:n,sideOffset:t,className:ue("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r}));GD.displayName=KD.displayName;var Px=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Ex=typeof window>"u"||"Deno"in globalThis;function ai(){}function F7(e,t){return typeof e=="function"?e(t):e}function z7(e){return typeof e=="number"&&e>=0&&e!==1/0}function U7(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Gj(e,t){return typeof e=="function"?e(t):e}function V7(e,t){return typeof e=="function"?e(t):e}function QP(e,t){const{type:r="all",exact:n,fetchStatus:a,predicate:i,queryKey:o,stale:l}=e;if(o){if(n){if(t.queryHash!==jC(o,t.options))return!1}else if(!Yh(t.queryKey,o))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||a&&a!==t.state.fetchStatus||i&&!i(t))}function JP(e,t){const{exact:r,status:n,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(Gh(t.options.mutationKey)!==Gh(i))return!1}else if(!Yh(t.options.mutationKey,i))return!1}return!(n&&t.state.status!==n||a&&!a(t))}function jC(e,t){return((t==null?void 0:t.queryKeyHashFn)||Gh)(e)}function Gh(e){return JSON.stringify(e,(t,r)=>Yj(r)?Object.keys(r).sort().reduce((n,a)=>(n[a]=r[a],n),{}):r)}function Yh(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>Yh(e[r],t[r])):!1}function YD(e,t){if(e===t)return e;const r=eE(e)&&eE(t);if(r||Yj(e)&&Yj(t)){const n=r?e:Object.keys(e),a=n.length,i=r?t:Object.keys(t),o=i.length,l=r?[]:{},c=new Set(n);let u=0;for(let d=0;d<o;d++){const f=r?d:i[d];(!r&&c.has(f)||r)&&e[f]===void 0&&t[f]===void 0?(l[f]=void 0,u++):(l[f]=YD(e[f],t[f]),l[f]===e[f]&&e[f]!==void 0&&u++)}return a===o&&u===a?e:l}return t}function eE(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Yj(e){if(!tE(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!tE(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function tE(e){return Object.prototype.toString.call(e)==="[object Object]"}function W7(e){return new Promise(t=>{setTimeout(t,e)})}function H7(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?YD(e,t):t}function q7(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function K7(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var _C=Symbol();function XD(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===_C?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var Ll,lo,Eu,XR,G7=(XR=class extends Px{constructor(){super();Tt(this,Ll);Tt(this,lo);Tt(this,Eu);gt(this,Eu,t=>{if(!Ex&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){ye(this,lo)||this.setEventListener(ye(this,Eu))}onUnsubscribe(){var t;this.hasListeners()||((t=ye(this,lo))==null||t.call(this),gt(this,lo,void 0))}setEventListener(t){var r;gt(this,Eu,t),(r=ye(this,lo))==null||r.call(this),gt(this,lo,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){ye(this,Ll)!==t&&(gt(this,Ll,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof ye(this,Ll)=="boolean"?ye(this,Ll):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Ll=new WeakMap,lo=new WeakMap,Eu=new WeakMap,XR),ZD=new G7,Au,co,Ou,ZR,Y7=(ZR=class extends Px{constructor(){super();Tt(this,Au,!0);Tt(this,co);Tt(this,Ou);gt(this,Ou,t=>{if(!Ex&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){ye(this,co)||this.setEventListener(ye(this,Ou))}onUnsubscribe(){var t;this.hasListeners()||((t=ye(this,co))==null||t.call(this),gt(this,co,void 0))}setEventListener(t){var r;gt(this,Ou,t),(r=ye(this,co))==null||r.call(this),gt(this,co,t(this.setOnline.bind(this)))}setOnline(t){ye(this,Au)!==t&&(gt(this,Au,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return ye(this,Au)}},Au=new WeakMap,co=new WeakMap,Ou=new WeakMap,ZR),xv=new Y7;function X7(){let e,t;const r=new Promise((a,i)=>{e=a,t=i});r.status="pending",r.catch(()=>{});function n(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{n({status:"fulfilled",value:a}),e(a)},r.reject=a=>{n({status:"rejected",reason:a}),t(a)},r}function Z7(e){return Math.min(1e3*2**e,3e4)}function QD(e){return(e??"online")==="online"?xv.isOnline():!0}var JD=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function $b(e){return e instanceof JD}function e3(e){let t=!1,r=0,n=!1,a;const i=X7(),o=g=>{var p;n||(h(new JD(g)),(p=e.abort)==null||p.call(e))},l=()=>{t=!0},c=()=>{t=!1},u=()=>ZD.isFocused()&&(e.networkMode==="always"||xv.isOnline())&&e.canRun(),d=()=>QD(e.networkMode)&&e.canRun(),f=g=>{var p;n||(n=!0,(p=e.onSuccess)==null||p.call(e,g),a==null||a(),i.resolve(g))},h=g=>{var p;n||(n=!0,(p=e.onError)==null||p.call(e,g),a==null||a(),i.reject(g))},m=()=>new Promise(g=>{var p;a=v=>{(n||u())&&g(v)},(p=e.onPause)==null||p.call(e)}).then(()=>{var g;a=void 0,n||(g=e.onContinue)==null||g.call(e)}),y=()=>{if(n)return;let g;const p=r===0?e.initialPromise:void 0;try{g=p??e.fn()}catch(v){g=Promise.reject(v)}Promise.resolve(g).then(f).catch(v=>{var S;if(n)return;const x=e.retry??(Ex?0:3),b=e.retryDelay??Z7,_=typeof b=="function"?b(r,v):b,j=x===!0||typeof x=="number"&&r<x||typeof x=="function"&&x(r,v);if(t||!j){h(v);return}r++,(S=e.onFail)==null||S.call(e,r,v),W7(_).then(()=>u()?void 0:m()).then(()=>{t?h(v):y()})})};return{promise:i,cancel:o,continue:()=>(a==null||a(),i),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?y():m().then(y),i)}}var Q7=e=>setTimeout(e,0);function J7(){let e=[],t=0,r=l=>{l()},n=l=>{l()},a=Q7;const i=l=>{t?e.push(l):a(()=>{r(l)})},o=()=>{const l=e;e=[],l.length&&a(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{a=l}}}var zn=J7(),Bl,QR,t3=(QR=class{constructor(){Tt(this,Bl)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),z7(this.gcTime)&&gt(this,Bl,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Ex?1/0:5*60*1e3))}clearGcTimeout(){ye(this,Bl)&&(clearTimeout(ye(this,Bl)),gt(this,Bl,void 0))}},Bl=new WeakMap,QR),Tu,Fl,Ta,zl,En,Zm,Ul,oi,us,JR,eK=(JR=class extends t3{constructor(t){super();Tt(this,oi);Tt(this,Tu);Tt(this,Fl);Tt(this,Ta);Tt(this,zl);Tt(this,En);Tt(this,Zm);Tt(this,Ul);gt(this,Ul,!1),gt(this,Zm,t.defaultOptions),this.setOptions(t.options),this.observers=[],gt(this,zl,t.client),gt(this,Ta,ye(this,zl).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,gt(this,Tu,rK(this.options)),this.state=t.state??ye(this,Tu),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=ye(this,En))==null?void 0:t.promise}setOptions(t){this.options={...ye(this,Zm),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&ye(this,Ta).remove(this)}setData(t,r){const n=H7(this.state.data,t,this.options);return Nn(this,oi,us).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){Nn(this,oi,us).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,a;const r=(n=ye(this,En))==null?void 0:n.promise;return(a=ye(this,En))==null||a.cancel(t),r?r.then(ai).catch(ai):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(ye(this,Tu))}isActive(){return this.observers.some(t=>V7(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===_C||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Gj(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!U7(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=ye(this,En))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=ye(this,En))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),ye(this,Ta).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(ye(this,En)&&(ye(this,Ul)?ye(this,En).cancel({revert:!0}):ye(this,En).cancelRetry()),this.scheduleGc()),ye(this,Ta).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Nn(this,oi,us).call(this,{type:"invalidate"})}fetch(t,r){var u,d,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(ye(this,En))return ye(this,En).continueRetry(),ye(this,En).promise}if(t&&this.setOptions(t),!this.options.queryFn){const h=this.observers.find(m=>m.options.queryFn);h&&this.setOptions(h.options)}const n=new AbortController,a=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(gt(this,Ul,!0),n.signal)})},i=()=>{const h=XD(this.options,r),y=(()=>{const g={client:ye(this,zl),queryKey:this.queryKey,meta:this.meta};return a(g),g})();return gt(this,Ul,!1),this.options.persister?this.options.persister(h,y,this):h(y)},l=(()=>{const h={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:ye(this,zl),state:this.state,fetchFn:i};return a(h),h})();(u=this.options.behavior)==null||u.onFetch(l,this),gt(this,Fl,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=l.fetchOptions)==null?void 0:d.meta))&&Nn(this,oi,us).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta});const c=h=>{var m,y,g,p;$b(h)&&h.silent||Nn(this,oi,us).call(this,{type:"error",error:h}),$b(h)||((y=(m=ye(this,Ta).config).onError)==null||y.call(m,h,this),(p=(g=ye(this,Ta).config).onSettled)==null||p.call(g,this.state.data,h,this)),this.scheduleGc()};return gt(this,En,e3({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,abort:n.abort.bind(n),onSuccess:h=>{var m,y,g,p;if(h===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(v){c(v);return}(y=(m=ye(this,Ta).config).onSuccess)==null||y.call(m,h,this),(p=(g=ye(this,Ta).config).onSettled)==null||p.call(g,h,this.state.error,this),this.scheduleGc()},onError:c,onFail:(h,m)=>{Nn(this,oi,us).call(this,{type:"failed",failureCount:h,error:m})},onPause:()=>{Nn(this,oi,us).call(this,{type:"pause"})},onContinue:()=>{Nn(this,oi,us).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),ye(this,En).start()}},Tu=new WeakMap,Fl=new WeakMap,Ta=new WeakMap,zl=new WeakMap,En=new WeakMap,Zm=new WeakMap,Ul=new WeakMap,oi=new WeakSet,us=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...tK(n.data,this.options),fetchMeta:t.meta??null};case"success":return gt(this,Fl,void 0),{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=t.error;return $b(a)&&a.revert&&ye(this,Fl)?{...ye(this,Fl),fetchStatus:"idle"}:{...n,error:a,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),zn.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),ye(this,Ta).notify({query:this,type:"updated",action:t})})},JR);function tK(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:QD(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function rK(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Ri,eM,nK=(eM=class extends Px{constructor(t={}){super();Tt(this,Ri);this.config=t,gt(this,Ri,new Map)}build(t,r,n){const a=r.queryKey,i=r.queryHash??jC(a,r);let o=this.get(i);return o||(o=new eK({client:t,queryKey:a,queryHash:i,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(a)}),this.add(o)),o}add(t){ye(this,Ri).has(t.queryHash)||(ye(this,Ri).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=ye(this,Ri).get(t.queryHash);r&&(t.destroy(),r===t&&ye(this,Ri).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){zn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return ye(this,Ri).get(t)}getAll(){return[...ye(this,Ri).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>QP(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>QP(t,n)):r}notify(t){zn.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){zn.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){zn.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Ri=new WeakMap,eM),Mi,Ln,Vl,$i,Xs,tM,aK=(tM=class extends t3{constructor(t){super();Tt(this,$i);Tt(this,Mi);Tt(this,Ln);Tt(this,Vl);this.mutationId=t.mutationId,gt(this,Ln,t.mutationCache),gt(this,Mi,[]),this.state=t.state||iK(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){ye(this,Mi).includes(t)||(ye(this,Mi).push(t),this.clearGcTimeout(),ye(this,Ln).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){gt(this,Mi,ye(this,Mi).filter(r=>r!==t)),this.scheduleGc(),ye(this,Ln).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){ye(this,Mi).length||(this.state.status==="pending"?this.scheduleGc():ye(this,Ln).remove(this))}continue(){var t;return((t=ye(this,Vl))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var i,o,l,c,u,d,f,h,m,y,g,p,v,x,b,_,j,S,C,k;const r=()=>{Nn(this,$i,Xs).call(this,{type:"continue"})};gt(this,Vl,e3({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(N,A)=>{Nn(this,$i,Xs).call(this,{type:"failed",failureCount:N,error:A})},onPause:()=>{Nn(this,$i,Xs).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>ye(this,Ln).canRun(this)}));const n=this.state.status==="pending",a=!ye(this,Vl).canStart();try{if(n)r();else{Nn(this,$i,Xs).call(this,{type:"pending",variables:t,isPaused:a}),await((o=(i=ye(this,Ln).config).onMutate)==null?void 0:o.call(i,t,this));const A=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,t));A!==this.state.context&&Nn(this,$i,Xs).call(this,{type:"pending",context:A,variables:t,isPaused:a})}const N=await ye(this,Vl).start();return await((d=(u=ye(this,Ln).config).onSuccess)==null?void 0:d.call(u,N,t,this.state.context,this)),await((h=(f=this.options).onSuccess)==null?void 0:h.call(f,N,t,this.state.context)),await((y=(m=ye(this,Ln).config).onSettled)==null?void 0:y.call(m,N,null,this.state.variables,this.state.context,this)),await((p=(g=this.options).onSettled)==null?void 0:p.call(g,N,null,t,this.state.context)),Nn(this,$i,Xs).call(this,{type:"success",data:N}),N}catch(N){try{throw await((x=(v=ye(this,Ln).config).onError)==null?void 0:x.call(v,N,t,this.state.context,this)),await((_=(b=this.options).onError)==null?void 0:_.call(b,N,t,this.state.context)),await((S=(j=ye(this,Ln).config).onSettled)==null?void 0:S.call(j,void 0,N,this.state.variables,this.state.context,this)),await((k=(C=this.options).onSettled)==null?void 0:k.call(C,void 0,N,t,this.state.context)),N}finally{Nn(this,$i,Xs).call(this,{type:"error",error:N})}}finally{ye(this,Ln).runNext(this)}}},Mi=new WeakMap,Ln=new WeakMap,Vl=new WeakMap,$i=new WeakSet,Xs=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),zn.batch(()=>{ye(this,Mi).forEach(n=>{n.onMutationUpdate(t)}),ye(this,Ln).notify({mutation:this,type:"updated",action:t})})},tM);function iK(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var ps,li,Qm,rM,sK=(rM=class extends Px{constructor(t={}){super();Tt(this,ps);Tt(this,li);Tt(this,Qm);this.config=t,gt(this,ps,new Set),gt(this,li,new Map),gt(this,Qm,0)}build(t,r,n){const a=new aK({mutationCache:this,mutationId:++wp(this,Qm)._,options:t.defaultMutationOptions(r),state:n});return this.add(a),a}add(t){ye(this,ps).add(t);const r=Wp(t);if(typeof r=="string"){const n=ye(this,li).get(r);n?n.push(t):ye(this,li).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(ye(this,ps).delete(t)){const r=Wp(t);if(typeof r=="string"){const n=ye(this,li).get(r);if(n)if(n.length>1){const a=n.indexOf(t);a!==-1&&n.splice(a,1)}else n[0]===t&&ye(this,li).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=Wp(t);if(typeof r=="string"){const n=ye(this,li).get(r),a=n==null?void 0:n.find(i=>i.state.status==="pending");return!a||a===t}else return!0}runNext(t){var n;const r=Wp(t);if(typeof r=="string"){const a=(n=ye(this,li).get(r))==null?void 0:n.find(i=>i!==t&&i.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){zn.batch(()=>{ye(this,ps).forEach(t=>{this.notify({type:"removed",mutation:t})}),ye(this,ps).clear(),ye(this,li).clear()})}getAll(){return Array.from(ye(this,ps))}find(t){const r={exact:!0,...t};return this.getAll().find(n=>JP(r,n))}findAll(t={}){return this.getAll().filter(r=>JP(t,r))}notify(t){zn.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return zn.batch(()=>Promise.all(t.map(r=>r.continue().catch(ai))))}},ps=new WeakMap,li=new WeakMap,Qm=new WeakMap,rM);function Wp(e){var t;return(t=e.options.scope)==null?void 0:t.id}function rE(e){return{onFetch:(t,r)=>{var d,f,h,m,y;const n=t.options,a=(h=(f=(d=t.fetchOptions)==null?void 0:d.meta)==null?void 0:f.fetchMore)==null?void 0:h.direction,i=((m=t.state.data)==null?void 0:m.pages)||[],o=((y=t.state.data)==null?void 0:y.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let g=!1;const p=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(t.signal.aborted?g=!0:t.signal.addEventListener("abort",()=>{g=!0}),t.signal)})},v=XD(t.options,t.fetchOptions),x=async(b,_,j)=>{if(g)return Promise.reject();if(_==null&&b.pages.length)return Promise.resolve(b);const C=(()=>{const O={client:t.client,queryKey:t.queryKey,pageParam:_,direction:j?"backward":"forward",meta:t.options.meta};return p(O),O})(),k=await v(C),{maxPages:N}=t.options,A=j?K7:q7;return{pages:A(b.pages,k,N),pageParams:A(b.pageParams,_,N)}};if(a&&i.length){const b=a==="backward",_=b?oK:nE,j={pages:i,pageParams:o},S=_(n,j);l=await x(j,S,b)}else{const b=e??i.length;do{const _=c===0?o[0]??n.initialPageParam:nE(n,l);if(c>0&&_==null)break;l=await x(l,_),c++}while(c<b)}return l};t.options.persister?t.fetchFn=()=>{var g,p;return(p=(g=t.options).persister)==null?void 0:p.call(g,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=u}}}function nE(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function oK(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var Rr,uo,fo,Ru,Mu,ho,$u,Iu,nM,lK=(nM=class{constructor(e={}){Tt(this,Rr);Tt(this,uo);Tt(this,fo);Tt(this,Ru);Tt(this,Mu);Tt(this,ho);Tt(this,$u);Tt(this,Iu);gt(this,Rr,e.queryCache||new nK),gt(this,uo,e.mutationCache||new sK),gt(this,fo,e.defaultOptions||{}),gt(this,Ru,new Map),gt(this,Mu,new Map),gt(this,ho,0)}mount(){wp(this,ho)._++,ye(this,ho)===1&&(gt(this,$u,ZD.subscribe(async e=>{e&&(await this.resumePausedMutations(),ye(this,Rr).onFocus())})),gt(this,Iu,xv.subscribe(async e=>{e&&(await this.resumePausedMutations(),ye(this,Rr).onOnline())})))}unmount(){var e,t;wp(this,ho)._--,ye(this,ho)===0&&((e=ye(this,$u))==null||e.call(this),gt(this,$u,void 0),(t=ye(this,Iu))==null||t.call(this),gt(this,Iu,void 0))}isFetching(e){return ye(this,Rr).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return ye(this,uo).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=ye(this,Rr).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=ye(this,Rr).build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(Gj(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return ye(this,Rr).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),a=ye(this,Rr).get(n.queryHash),i=a==null?void 0:a.state.data,o=F7(t,i);if(o!==void 0)return ye(this,Rr).build(this,n).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return zn.batch(()=>ye(this,Rr).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=ye(this,Rr).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=ye(this,Rr);zn.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=ye(this,Rr);return zn.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=zn.batch(()=>ye(this,Rr).findAll(e).map(a=>a.cancel(r)));return Promise.all(n).then(ai).catch(ai)}invalidateQueries(e,t={}){return zn.batch(()=>(ye(this,Rr).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=zn.batch(()=>ye(this,Rr).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,r);return r.throwOnError||(i=i.catch(ai)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(ai)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=ye(this,Rr).build(this,t);return r.isStaleByTime(Gj(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(ai).catch(ai)}fetchInfiniteQuery(e){return e.behavior=rE(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(ai).catch(ai)}ensureInfiniteQueryData(e){return e.behavior=rE(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return xv.isOnline()?ye(this,uo).resumePausedMutations():Promise.resolve()}getQueryCache(){return ye(this,Rr)}getMutationCache(){return ye(this,uo)}getDefaultOptions(){return ye(this,fo)}setDefaultOptions(e){gt(this,fo,e)}setQueryDefaults(e,t){ye(this,Ru).set(Gh(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...ye(this,Ru).values()],r={};return t.forEach(n=>{Yh(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){ye(this,Mu).set(Gh(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...ye(this,Mu).values()],r={};return t.forEach(n=>{Yh(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...ye(this,fo).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=jC(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===_C&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...ye(this,fo).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){ye(this,Rr).clear(),ye(this,uo).clear()}},Rr=new WeakMap,uo=new WeakMap,fo=new WeakMap,Ru=new WeakMap,Mu=new WeakMap,ho=new WeakMap,$u=new WeakMap,Iu=new WeakMap,nM),cK=w.createContext(void 0),uK=({client:e,children:t})=>(w.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),s.jsx(cK.Provider,{value:e,children:t}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xh(){return Xh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xh.apply(this,arguments)}var go;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(go||(go={}));const aE="popstate";function dK(e){e===void 0&&(e={});function t(n,a){let{pathname:i,search:o,hash:l}=n.location;return Xj("",{pathname:i,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:bv(a)}return hK(t,r,null,e)}function Pr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function r3(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function fK(){return Math.random().toString(36).substr(2,8)}function iE(e,t){return{usr:e.state,key:e.key,idx:t}}function Xj(e,t,r,n){return r===void 0&&(r=null),Xh({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Vd(t):t,{state:r,key:t&&t.key||n||fK()})}function bv(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Vd(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function hK(e,t,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:i=!1}=n,o=a.history,l=go.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(Xh({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function f(){l=go.Pop;let p=d(),v=p==null?null:p-u;u=p,c&&c({action:l,location:g.location,delta:v})}function h(p,v){l=go.Push;let x=Xj(g.location,p,v);u=d()+1;let b=iE(x,u),_=g.createHref(x);try{o.pushState(b,"",_)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;a.location.assign(_)}i&&c&&c({action:l,location:g.location,delta:1})}function m(p,v){l=go.Replace;let x=Xj(g.location,p,v);u=d();let b=iE(x,u),_=g.createHref(x);o.replaceState(b,"",_),i&&c&&c({action:l,location:g.location,delta:0})}function y(p){let v=a.location.origin!=="null"?a.location.origin:a.location.href,x=typeof p=="string"?p:bv(p);return x=x.replace(/ $/,"%20"),Pr(v,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,v)}let g={get action(){return l},get location(){return e(a,o)},listen(p){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(aE,f),c=p,()=>{a.removeEventListener(aE,f),c=null}},createHref(p){return t(a,p)},createURL:y,encodeLocation(p){let v=y(p);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:h,replace:m,go(p){return o.go(p)}};return g}var sE;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(sE||(sE={}));function mK(e,t,r){return r===void 0&&(r="/"),pK(e,t,r,!1)}function pK(e,t,r,n){let a=typeof t=="string"?Vd(t):t,i=Gu(a.pathname||"/",r);if(i==null)return null;let o=n3(e);gK(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=kK(i);l=CK(o[c],u,n)}return l}function n3(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Pr(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=To([n,c.relativePath]),d=r.concat(c);i.children&&i.children.length>0&&(Pr(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),n3(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:_K(u,i.index),routesMeta:d})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))a(i,o);else for(let c of a3(i.path))a(i,o,c)}),t}function a3(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let o=a3(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),a&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function gK(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:SK(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const vK=/^:[\w-]+$/,yK=3,xK=2,bK=1,wK=10,jK=-2,oE=e=>e==="*";function _K(e,t){let r=e.split("/"),n=r.length;return r.some(oE)&&(n+=jK),t&&(n+=xK),r.filter(a=>!oE(a)).reduce((a,i)=>a+(vK.test(i)?yK:i===""?bK:wK),n)}function SK(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function CK(e,t,r){let{routesMeta:n}=e,a={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=i==="/"?t:t.slice(i.length)||"/",f=wv({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),h=c.route;if(!f&&u&&r&&!n[n.length-1].route.index&&(f=wv({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(a,f.params),o.push({params:a,pathname:To([i,f.pathname]),pathnameBase:OK(To([i,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(i=To([i,f.pathnameBase]))}return o}function wv(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=NK(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((u,d,f)=>{let{paramName:h,isOptional:m}=d;if(h==="*"){let g=l[f]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const y=l[f];return m&&!y?u[h]=void 0:u[h]=(y||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:e}}function NK(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),r3(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function kK(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return r3(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Gu(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function PK(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?Vd(e):e;return{pathname:r?r.startsWith("/")?r:EK(r,t):t,search:TK(n),hash:RK(a)}}function EK(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function Ib(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function AK(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function SC(e,t){let r=AK(e);return t?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function CC(e,t,r,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=Vd(e):(a=Xh({},e),Pr(!a.pathname||!a.pathname.includes("?"),Ib("?","pathname","search",a)),Pr(!a.pathname||!a.pathname.includes("#"),Ib("#","pathname","hash",a)),Pr(!a.search||!a.search.includes("#"),Ib("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,l;if(o==null)l=r;else{let f=t.length-1;if(!n&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),f-=1;a.pathname=h.join("/")}l=f>=0?t[f]:"/"}let c=PK(a,l),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const To=e=>e.join("/").replace(/\/\/+/g,"/"),OK=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),TK=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,RK=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function MK(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const i3=["post","put","patch","delete"];new Set(i3);const $K=["get",...i3];new Set($K);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zh(){return Zh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zh.apply(this,arguments)}const Ax=w.createContext(null),s3=w.createContext(null),Ls=w.createContext(null),Ox=w.createContext(null),Zo=w.createContext({outlet:null,matches:[],isDataRoute:!1}),o3=w.createContext(null);function IK(e,t){let{relative:r}=t===void 0?{}:t;Wd()||Pr(!1);let{basename:n,navigator:a}=w.useContext(Ls),{hash:i,pathname:o,search:l}=Tx(e,{relative:r}),c=o;return n!=="/"&&(c=o==="/"?n:To([n,o])),a.createHref({pathname:c,search:l,hash:i})}function Wd(){return w.useContext(Ox)!=null}function gc(){return Wd()||Pr(!1),w.useContext(Ox).location}function l3(e){w.useContext(Ls).static||w.useLayoutEffect(e)}function lp(){let{isDataRoute:e}=w.useContext(Zo);return e?YK():DK()}function DK(){Wd()||Pr(!1);let e=w.useContext(Ax),{basename:t,future:r,navigator:n}=w.useContext(Ls),{matches:a}=w.useContext(Zo),{pathname:i}=gc(),o=JSON.stringify(SC(a,r.v7_relativeSplatPath)),l=w.useRef(!1);return l3(()=>{l.current=!0}),w.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let f=CC(u,JSON.parse(o),i,d.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:To([t,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[t,n,o,i,e])}function Tx(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=w.useContext(Ls),{matches:a}=w.useContext(Zo),{pathname:i}=gc(),o=JSON.stringify(SC(a,n.v7_relativeSplatPath));return w.useMemo(()=>CC(e,JSON.parse(o),i,r==="path"),[e,o,i,r])}function LK(e,t){return BK(e,t)}function BK(e,t,r,n){Wd()||Pr(!1);let{navigator:a}=w.useContext(Ls),{matches:i}=w.useContext(Zo),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=gc(),d;if(t){var f;let p=typeof t=="string"?Vd(t):t;c==="/"||(f=p.pathname)!=null&&f.startsWith(c)||Pr(!1),d=p}else d=u;let h=d.pathname||"/",m=h;if(c!=="/"){let p=c.replace(/^\//,"").split("/");m="/"+h.replace(/^\//,"").split("/").slice(p.length).join("/")}let y=mK(e,{pathname:m}),g=WK(y&&y.map(p=>Object.assign({},p,{params:Object.assign({},l,p.params),pathname:To([c,a.encodeLocation?a.encodeLocation(p.pathname).pathname:p.pathname]),pathnameBase:p.pathnameBase==="/"?c:To([c,a.encodeLocation?a.encodeLocation(p.pathnameBase).pathname:p.pathnameBase])})),i,r,n);return t&&g?w.createElement(Ox.Provider,{value:{location:Zh({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:go.Pop}},g):g}function FK(){let e=GK(),t=MK(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},t),r?w.createElement("pre",{style:a},r):null,null)}const zK=w.createElement(FK,null);class UK extends w.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?w.createElement(Zo.Provider,{value:this.props.routeContext},w.createElement(o3.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function VK(e){let{routeContext:t,match:r,children:n}=e,a=w.useContext(Ax);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),w.createElement(Zo.Provider,{value:t},n)}function WK(e,t,r,n){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,l=(a=r)==null?void 0:a.errors;if(l!=null){let d=o.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);d>=0||Pr(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<o.length;d++){let f=o[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:h,errors:m}=r,y=f.route.loader&&h[f.route.id]===void 0&&(!m||m[f.route.id]===void 0);if(f.route.lazy||y){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,f,h)=>{let m,y=!1,g=null,p=null;r&&(m=l&&f.route.id?l[f.route.id]:void 0,g=f.route.errorElement||zK,c&&(u<0&&h===0?(y=!0,p=null):u===h&&(y=!0,p=f.route.hydrateFallbackElement||null)));let v=t.concat(o.slice(0,h+1)),x=()=>{let b;return m?b=g:y?b=p:f.route.Component?b=w.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=d,w.createElement(VK,{match:f,routeContext:{outlet:d,matches:v,isDataRoute:r!=null},children:b})};return r&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?w.createElement(UK,{location:r.location,revalidation:r.revalidation,component:g,error:m,children:x(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):x()},null)}var c3=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(c3||{}),jv=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(jv||{});function HK(e){let t=w.useContext(Ax);return t||Pr(!1),t}function qK(e){let t=w.useContext(s3);return t||Pr(!1),t}function KK(e){let t=w.useContext(Zo);return t||Pr(!1),t}function u3(e){let t=KK(),r=t.matches[t.matches.length-1];return r.route.id||Pr(!1),r.route.id}function GK(){var e;let t=w.useContext(o3),r=qK(jv.UseRouteError),n=u3(jv.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function YK(){let{router:e}=HK(c3.UseNavigateStable),t=u3(jv.UseNavigateStable),r=w.useRef(!1);return l3(()=>{r.current=!0}),w.useCallback(function(a,i){i===void 0&&(i={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,Zh({fromRouteId:t},i)))},[e,t])}function XK(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function _v(e){let{to:t,replace:r,state:n,relative:a}=e;Wd()||Pr(!1);let{future:i,static:o}=w.useContext(Ls),{matches:l}=w.useContext(Zo),{pathname:c}=gc(),u=lp(),d=CC(t,SC(l,i.v7_relativeSplatPath),c,a==="path"),f=JSON.stringify(d);return w.useEffect(()=>u(JSON.parse(f),{replace:r,state:n,relative:a}),[u,f,a,r,n]),null}function Tr(e){Pr(!1)}function ZK(e){let{basename:t="/",children:r=null,location:n,navigationType:a=go.Pop,navigator:i,static:o=!1,future:l}=e;Wd()&&Pr(!1);let c=t.replace(/^\/*/,"/"),u=w.useMemo(()=>({basename:c,navigator:i,static:o,future:Zh({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof n=="string"&&(n=Vd(n));let{pathname:d="/",search:f="",hash:h="",state:m=null,key:y="default"}=n,g=w.useMemo(()=>{let p=Gu(d,c);return p==null?null:{location:{pathname:p,search:f,hash:h,state:m,key:y},navigationType:a}},[c,d,f,h,m,y,a]);return g==null?null:w.createElement(Ls.Provider,{value:u},w.createElement(Ox.Provider,{children:r,value:g}))}function QK(e){let{children:t,location:r}=e;return LK(Zj(t),r)}new Promise(()=>{});function Zj(e,t){t===void 0&&(t=[]);let r=[];return w.Children.forEach(e,(n,a)=>{if(!w.isValidElement(n))return;let i=[...t,a];if(n.type===w.Fragment){r.push.apply(r,Zj(n.props.children,i));return}n.type!==Tr&&Pr(!1),!n.props.index||!n.props.children||Pr(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Zj(n.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Sv(){return Sv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Sv.apply(this,arguments)}function d3(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function JK(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function eG(e,t){return e.button===0&&(!t||t==="_self")&&!JK(e)}const tG=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],rG=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],nG="6";try{window.__reactRouterVersion=nG}catch{}const aG=w.createContext({isTransitioning:!1}),iG="startTransition",lE=uS[iG];function sG(e){let{basename:t,children:r,future:n,window:a}=e,i=w.useRef();i.current==null&&(i.current=dK({window:a,v5Compat:!0}));let o=i.current,[l,c]=w.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},d=w.useCallback(f=>{u&&lE?lE(()=>c(f)):c(f)},[c,u]);return w.useLayoutEffect(()=>o.listen(d),[o,d]),w.useEffect(()=>XK(n),[n]),w.createElement(ZK,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}const oG=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",lG=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,cG=w.forwardRef(function(t,r){let{onClick:n,relative:a,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:f}=t,h=d3(t,tG),{basename:m}=w.useContext(Ls),y,g=!1;if(typeof u=="string"&&lG.test(u)&&(y=u,oG))try{let b=new URL(window.location.href),_=u.startsWith("//")?new URL(b.protocol+u):new URL(u),j=Gu(_.pathname,m);_.origin===b.origin&&j!=null?u=j+_.search+_.hash:g=!0}catch{}let p=IK(u,{relative:a}),v=dG(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:a,viewTransition:f});function x(b){n&&n(b),b.defaultPrevented||v(b)}return w.createElement("a",Sv({},h,{href:y||p,onClick:g||i?n:x,ref:r,target:c}))}),cE=w.forwardRef(function(t,r){let{"aria-current":n="page",caseSensitive:a=!1,className:i="",end:o=!1,style:l,to:c,viewTransition:u,children:d}=t,f=d3(t,rG),h=Tx(c,{relative:f.relative}),m=gc(),y=w.useContext(s3),{navigator:g,basename:p}=w.useContext(Ls),v=y!=null&&fG(h)&&u===!0,x=g.encodeLocation?g.encodeLocation(h).pathname:h.pathname,b=m.pathname,_=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;a||(b=b.toLowerCase(),_=_?_.toLowerCase():null,x=x.toLowerCase()),_&&p&&(_=Gu(_,p)||_);const j=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let S=b===x||!o&&b.startsWith(x)&&b.charAt(j)==="/",C=_!=null&&(_===x||!o&&_.startsWith(x)&&_.charAt(x.length)==="/"),k={isActive:S,isPending:C,isTransitioning:v},N=S?n:void 0,A;typeof i=="function"?A=i(k):A=[i,S?"active":null,C?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let O=typeof l=="function"?l(k):l;return w.createElement(cG,Sv({},f,{"aria-current":N,className:A,ref:r,style:O,to:c,viewTransition:u}),typeof d=="function"?d(k):d)});var Qj;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Qj||(Qj={}));var uE;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(uE||(uE={}));function uG(e){let t=w.useContext(Ax);return t||Pr(!1),t}function dG(e,t){let{target:r,replace:n,state:a,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=lp(),u=gc(),d=Tx(e,{relative:o});return w.useCallback(f=>{if(eG(f,r)){f.preventDefault();let h=n!==void 0?n:bv(u)===bv(d);c(e,{replace:h,state:a,preventScrollReset:i,relative:o,viewTransition:l})}},[u,c,d,n,a,r,e,i,o,l])}function fG(e,t){t===void 0&&(t={});let r=w.useContext(aG);r==null&&Pr(!1);let{basename:n}=uG(Qj.useViewTransitionState),a=Tx(e,{relative:t.relative});if(!r.isTransitioning)return!1;let i=Gu(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=Gu(r.nextLocation.pathname,n)||r.nextLocation.pathname;return wv(a.pathname,o)!=null||wv(a.pathname,i)!=null}const hG=[{id:"ccd-evo",name:"CCD EVO",category:"B2C",launchYear:2025,devCost:15e4,devAmortizationYears:5,unitCost:380,priceTTC_B2C:1490,priceHT:1241.67,priceHT_B2B:690,priceHT_OEM:520,vatRate:.2,coef_shop:1.8,coef_dist:1.4,coef_oem:1.5,volumesByYear:{2025:150,2026:300,2027:500,2028:700,2029:900,2030:1100},volumesByChannel:{B2C:{2025:50,2026:80,2027:100,2028:120,2029:140,2030:160},B2B:{2025:80,2026:150,2027:250,2028:350,2029:450,2030:550},OEM:{2025:20,2026:70,2027:150,2028:230,2029:310,2030:390}}},{id:"roues-aero",name:"Roues Aro Elite",category:"B2C",launchYear:2026,devCost:25e4,devAmortizationYears:5,unitCost:650,priceTTC_B2C:2490,priceHT:2075,priceHT_B2B:1200,priceHT_OEM:900,vatRate:.2,coef_shop:1.7,coef_dist:1.35,coef_oem:1.4,volumesByYear:{2026:100,2027:200,2028:350,2029:500,2030:650},volumesByChannel:{B2C:{2026:30,2027:50,2028:80,2029:110,2030:140},B2B:{2026:50,2027:100,2028:180,2029:260,2030:340},OEM:{2026:20,2027:50,2028:90,2029:130,2030:170}}},{id:"guidons",name:"Guidons Intgrs",category:"B2C",launchYear:2026,devCost:8e4,devAmortizationYears:5,unitCost:180,priceTTC_B2C:890,priceHT:741.67,priceHT_B2B:420,priceHT_OEM:320,vatRate:.2,coef_shop:1.6,coef_dist:1.3,coef_oem:1.35,volumesByYear:{2026:150,2027:280,2028:430,2029:580,2030:730},volumesByChannel:{B2C:{2026:50,2027:80,2028:120,2029:160,2030:200},B2B:{2026:70,2027:140,2028:220,2029:300,2030:380},OEM:{2026:30,2027:60,2028:90,2029:120,2030:150}}},{id:"transmission",name:"Transmission Aro",category:"B2C",launchYear:2027,devCost:18e4,devAmortizationYears:5,unitCost:420,priceTTC_B2C:1590,priceHT:1325,priceHT_B2B:750,priceHT_OEM:580,vatRate:.2,coef_shop:1.75,coef_dist:1.35,coef_oem:1.45,volumesByYear:{2027:80,2028:180,2029:300,2030:440},volumesByChannel:{B2C:{2027:20,2028:40,2029:60,2030:90},B2B:{2027:40,2028:100,2029:170,2030:250},OEM:{2027:20,2028:40,2029:70,2030:100}}}],mG=[{id:"ceo",title:"Directeur Gnral",department:"Admin",startYear:2024,annualCostLoaded:85e3},{id:"daf",title:"Directeur Financier",department:"Admin",startYear:2024,annualCostLoaded:65e3},{id:"cto",title:"Directeur Technique",department:"R&D",startYear:2024,annualCostLoaded:75e3},{id:"ing-rd-1",title:"Ingnieur Mcanique",department:"R&D",startYear:2024,annualCostLoaded:55e3},{id:"ing-rd-2",title:"Ingnieur Composite",department:"R&D",startYear:2026,annualCostLoaded:52e3},{id:"ing-rd-3",title:"Ingnieur Simulation",department:"R&D",startYear:2027,annualCostLoaded:55e3},{id:"resp-prod",title:"Responsable Production",department:"Production",startYear:2024,annualCostLoaded:6e4},{id:"tech-1",title:"Technicien Process",department:"Production",startYear:2024,annualCostLoaded:42e3},{id:"tech-2",title:"Technicien Qualit",department:"Production",startYear:2026,annualCostLoaded:4e4},{id:"supply",title:"Resp. Supply Chain",department:"Production",startYear:2028,annualCostLoaded:58e3},{id:"dir-com",title:"Directeur Commercial",department:"Sales",startYear:2024,annualCostLoaded:7e4},{id:"com-export",title:"Commercial Export",department:"Sales",startYear:2026,annualCostLoaded:48e3},{id:"am",title:"Account Manager",department:"Sales",startYear:2027,annualCostLoaded:5e4},{id:"resp-mkt",title:"Responsable Marketing",department:"Support",startYear:2024,annualCostLoaded:55e3},{id:"digital",title:"Digital Manager",department:"Support",startYear:2027,annualCostLoaded:45e3},{id:"rh",title:"Responsable RH",department:"Support",startYear:2024,annualCostLoaded:5e4},{id:"compta",title:"Comptable",department:"Support",startYear:2028,annualCostLoaded:42e3}],pG=[{id:"rd-proto",name:"Prototypage & Essais",category:"R&D",startYear:2025,baseAnnualCost:4e4,evolutionType:"linked_to_revenue",revenueRatio:.03,description:"Matriaux de prototypage, tests en soufflerie, essais terrain"},{id:"rd-licences",name:"Licences logiciels CAO/CFD",category:"R&D",startYear:2025,baseAnnualCost:25e3,evolutionType:"fixed",description:"SolidWorks, ANSYS, licences annuelles"},{id:"prod-outillage",name:"Outillage & Moules",category:"Production",startYear:2025,baseAnnualCost:5e4,evolutionType:"step",steps:[{year:2026,newAnnualCost:8e4},{year:2027,newAnnualCost:6e4},{year:2028,newAnnualCost:4e4}],description:"Investissements outillage pour nouveaux produits"},{id:"prod-maintenance",name:"Maintenance quipements",category:"Production",startYear:2025,baseAnnualCost:15e3,evolutionType:"growth_rate",growthRate:.05,description:"Contrats de maintenance machines CNC et quipements"},{id:"mkt-digital",name:"Marketing Digital",category:"Sales & Marketing",startYear:2025,baseAnnualCost:6e4,evolutionType:"linked_to_revenue",revenueRatio:.05,description:"SEO, SEA, rseaux sociaux, content marketing"},{id:"mkt-events",name:"Salons & vnements",category:"Sales & Marketing",startYear:2025,baseAnnualCost:4e4,evolutionType:"step",steps:[{year:2026,newAnnualCost:6e4},{year:2027,newAnnualCost:8e4}],description:"Eurobike, Sea Otter, salons rgionaux"},{id:"sales-commissions",name:"Commissions commerciales",category:"Sales & Marketing",startYear:2025,baseAnnualCost:0,evolutionType:"linked_to_revenue",revenueRatio:.03,description:"Commissions agents et commerciaux terrain"},{id:"ga-loyer",name:"Loyer & Charges locatives",category:"G&A",startYear:2025,baseAnnualCost:48e3,evolutionType:"step",steps:[{year:2027,newAnnualCost:72e3}],description:"Locaux R&D et bureaux, extension 2027"},{id:"ga-assurances",name:"Assurances",category:"G&A",startYear:2025,baseAnnualCost:2e4,evolutionType:"linked_to_revenue",revenueRatio:.015,description:"RC Pro, assurance produit, multirisque"},{id:"ga-compta",name:"Comptabilit & Juridique",category:"G&A",startYear:2025,baseAnnualCost:25e3,evolutionType:"growth_rate",growthRate:.03,description:"Expert-comptable, avocat, commissaire aux comptes"},{id:"log-transport",name:"Transport & Expdition",category:"Logistics",startYear:2025,baseAnnualCost:0,evolutionType:"linked_to_volume",volumeRatio:12,description:"Cot moyen par unit expdie"},{id:"log-stockage",name:"Stockage & Entreposage",category:"Logistics",startYear:2025,baseAnnualCost:18e3,evolutionType:"growth_rate",growthRate:.15,description:"Surface de stockage croissante avec les volumes"},{id:"it-infra",name:"Infrastructure IT",category:"IT & Tools",startYear:2025,baseAnnualCost:12e3,evolutionType:"step",steps:[{year:2026,newAnnualCost:18e3},{year:2028,newAnnualCost:24e3}],description:"Cloud, serveurs, scurit"},{id:"it-erp",name:"ERP & Outils mtier",category:"IT & Tools",startYear:2025,baseAnnualCost:15e3,evolutionType:"growth_rate",growthRate:.1,description:"Licences ERP, CRM, gestion stock"}],NC=[{id:"seed",name:"Seed",amount:15e5,preMoneyValuation:4e6,year:2025,quarter:"Q1"}];function gG(e,t){return e.reduce((r,n)=>{const a=n.devAmortizationYears||5,i=n.launchYear,o=i+a;return t>=i&&t<o?r+n.devCost/a:r},0)}function vG(e,t,r){let n=0,a=0;return e.forEach(i=>{const o=i.volumesByChannel;if(o){const l=i.priceHT||i.priceTTC_B2C/(1+(i.vatRate||.2)),c=i.coef_shop||1.6,u=i.coef_dist||1.3,d=i.coef_oem||1.4,f=l/c/u,h=i.unitCost*d,m=Math.round((o.B2C[t]||0)*(1+r.volumeAdjustment));n+=m*l*(1+r.priceAdjustment),a+=m*i.unitCost;const y=Math.round((o.B2B[t]||0)*(1+r.volumeAdjustment));n+=y*f*(1+r.priceAdjustment),a+=y*i.unitCost;const g=Math.round((o.OEM[t]||0)*(1+r.volumeAdjustment));n+=g*h*(1+r.priceAdjustment),a+=g*i.unitCost}else if(i.volumesByYear[t]){const l=Math.round(i.volumesByYear[t]*(1+r.volumeAdjustment));n+=l*i.priceHT*(1+r.priceAdjustment),a+=l*i.unitCost}}),{revenue:n,cogs:a}}function yG(e,t){let r=0,n=0;return e.forEach(a=>{a.startYear<=t&&(r+=a.annualCostLoaded,n+=1)}),{payroll:r,headcount:n}}function xG(e,t,r,n,a,i,o="detailed",l){if(o==="simple"&&l){const u=t-r;return l.baseAmount*Math.pow(1+l.growthRate,u)*(1+i.opexAdjustment)}let c=0;return e.forEach(u=>{var h;if(u.startYear>t)return;let d=u.baseAnnualCost;const f=t-u.startYear;switch(u.evolutionType){case"fixed":break;case"growth_rate":d=u.baseAnnualCost*Math.pow(1+(u.growthRate||0),f);break;case"linked_to_revenue":d=n*(u.revenueRatio||0);break;case"linked_to_volume":d=a*(u.volumeRatio||0);break;case"step":const m=(h=u.steps)==null?void 0:h.filter(y=>y.year<=t).pop();m&&(d=m.newAnnualCost);break}d=d*(1+i.opexAdjustment),c+=d}),c}function bG(e,t){return e.reduce((r,n)=>n.launchYear===t?r+n.devCost:r,0)}function wG(e,t){let r=0;const n={};return e.forEach(a=>{const i=a.devAmortizationYears||5,o=a.launchYear,l=o+i;if(t>=o&&t<l){const c=a.devCost/i;r+=c,n[a.id]=c}else n[a.id]=0}),{total:r,byProduct:n}}function jG(e,t,r){return e.reduce((n,a)=>{if(a.volumesByChannel){const i=Math.round((a.volumesByChannel.B2C[t]||0)*(1+r.volumeAdjustment)),o=Math.round((a.volumesByChannel.B2B[t]||0)*(1+r.volumeAdjustment)),l=Math.round((a.volumesByChannel.OEM[t]||0)*(1+r.volumeAdjustment));return n+i+o+l}return n+Math.round((a.volumesByYear[t]||0)*(1+r.volumeAdjustment))},0)}function _G(e){return e.map(t=>{const r=t.devAmortizationYears||5;return{productId:t.id,productName:t.name,devCost:t.devCost,launchYear:t.launchYear,amortizationYears:r,yearlyAmortization:t.devCost/r}})}function SG(e,t,r,n,a,i,o,l,c="detailed",u){const d=[];let f=a,h=a,m=a,y=0,g=null,p=0,v=0,x=0;const b=_G(e);for(let C=0;C<o;C++){const k=i+C,N=f,{revenue:A,cogs:O}=vG(e,k,l),{payroll:E,headcount:R}=yG(t,k),P=jG(e,k,l),T=xG(r,k,i,A,P,l,c,u),I=bG(e,k),{total:M,byProduct:D}=wG(e,k);v+=I,x+=M;const B=A-O,z=A>0?B/A:0,Z=B-E-T,J=A>0?Z/A:0,se=Z-M,U=O+E+T+I,q=A-U,G=n.filter(Re=>Re.year===k),H=G.reduce((Re,We)=>Re+We.amount,0);p+=H;const fe=q/4,L={Q1:0,Q2:0,Q3:0,Q4:0};let Y=N,V=N;["Q1","Q2","Q3","Q4"].forEach(Re=>{const ge=G.filter(ke=>ke.quarter===Re).reduce((ke,Xe)=>ke+Xe.amount,0);V+=fe+ge,L[Re]=V,V<Y&&(Y=V)});const te=N+q+H;f=te,Y<h&&(h=Y);const be=a+d.reduce((Re,We)=>Re+We.cashFlow,0)+q;be<m&&(m=be),q<0&&Math.abs(q)>y&&(y=Math.abs(q)),g===null&&q>0&&(g=k),d.push({year:k,revenue:A,fundingInjection:H,cogs:O,payroll:E,opex:T,capex:I,grossMargin:B,grossMarginRate:z,ebitda:Z,ebitdaMargin:J,depreciation:M,depreciationByProduct:D,operatingResult:se,totalCosts:U,cashFlow:q,treasuryStart:N,treasuryEnd:te,quarterlyTreasury:L,minTreasuryInYear:Y,headcount:R})}const _=Math.max(0,-m),j=y/12,S=j>0?Math.floor(a/j):999;return{years:d,initialCash:a,totalFundingRaised:p,fundingNeed:_,minTreasury:h,breakEvenYear:g,maxBurn:y,runway:S,productAmortizations:b,totalCapex:v,totalDepreciation:x}}const CG=["Q1","Q2","Q3","Q4"],El=["Janvier","Fvrier","Mars","Avril","Mai","Juin","Juillet","Aot","Septembre","Octobre","Novembre","Dcembre"];function NG(){return[{delayMonths:0,percentage:100}]}function dE(){return{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0}}function f3(){return{revenueSeasonality:dE(),cogsSeasonality:dE(),cogsPaymentTerms:NG(),variableCharges:[],loans:[],capexPayments:[],otherInflows:{},otherOutflows:{}}}function fE(e){const t=Object.values(e).map(n=>1+n),r=t.reduce((n,a)=>n+a,0);return r===0?Array(12).fill(1):t.map(n=>n/r*12)}function kG(e,t,r){const n=[],a=t+r;if(e.manualPayments&&Object.keys(e.manualPayments).length>0)return Object.entries(e.manualPayments).forEach(([l,c])=>{const u=AG(l);if(!u)return;const{year:d,month:f}=u;d>=t&&d<a&&n.push({loanId:e.id,loanName:e.name,year:d,month:f,principal:c,interest:0,total:c,isManuallyModified:!0})}),n.sort((l,c)=>l.year!==c.year?l.year-c.year:l.month-c.month),n;const i=e.startDate.year*12+e.startDate.month,o=e.endDate.year*12+e.endDate.month;if(e.inputMode==="fixed"){const l=e.fixedPaymentAmount||0;if(l<=0)return n;if(e.frequency==="monthly")for(let c=i;c<o;c++){const u=Math.floor(c/12),d=c%12;u<t||u>=a||n.push({loanId:e.id,loanName:e.name,year:u,month:d,principal:l,interest:0,total:l,isManuallyModified:!1})}else if(e.frequency==="quarterly")for(let c=i;c<o;c++){const u=Math.floor(c/12),d=c%12;u<t||u>=a||(c-i)%3===0&&n.push({loanId:e.id,loanName:e.name,year:u,month:d,principal:l,interest:0,total:l,isManuallyModified:!1})}else for(let c=0;c<Math.max(1,Math.round((o-i)/12));c++){const u=e.startDate.year+c;u<t||u>=a||n.push({loanId:e.id,loanName:e.name,year:u,month:e.startDate.month,principal:l,interest:0,total:l,isManuallyModified:!1})}return n}if(o<=i)return n;if(e.frequency==="monthly"){const l=o-i;if(l<=0)return n;const c=e.interestRate/12;let u;c===0?u=e.principalAmount/l:u=e.principalAmount*c*Math.pow(1+c,l)/(Math.pow(1+c,l)-1);let d=e.principalAmount;for(let f=0;f<l;f++){const h=i+f,m=Math.floor(h/12),y=h%12;if(m<t||m>=a)continue;const g=d*c,p=u-g;d-=p,n.push({loanId:e.id,loanName:e.name,year:m,month:y,principal:Math.max(0,p),interest:g,total:u,isManuallyModified:!1})}}else if(e.frequency==="quarterly"){const l=Math.max(1,Math.round((o-i)/3)),c=e.interestRate/4;let u;c===0?u=e.principalAmount/l:u=e.principalAmount*c*Math.pow(1+c,l)/(Math.pow(1+c,l)-1);let d=e.principalAmount;for(let f=0;f<l;f++){const h=i+f*3,m=Math.floor(h/12),y=h%12;if(m<t||m>=a)continue;const g=d*c,p=u-g;d-=p,n.push({loanId:e.id,loanName:e.name,year:m,month:y,principal:Math.max(0,p),interest:g,total:u,isManuallyModified:!1})}}else{const l=Math.max(1,Math.round((o-i)/12)),c=e.interestRate;let u;c===0?u=e.principalAmount/l:u=e.principalAmount*c*Math.pow(1+c,l)/(Math.pow(1+c,l)-1);let d=e.principalAmount;for(let f=0;f<l;f++){const h=e.startDate.year+f,m=e.startDate.month;if(h<t||h>=a)continue;const y=d*c,g=u-y;d-=g,n.push({loanId:e.id,loanName:e.name,year:h,month:m,principal:Math.max(0,g),interest:y,total:u,isManuallyModified:!1})}}return n}function PG(e){return e<=2?"Q1":e<=5?"Q2":e<=8?"Q3":"Q4"}function EG(e,t,r,n,a,i,o=!1){var A,O;const l=[];let c=n,u=n,d=null,f=null,h=0,m=0,y=0,g=0;const p=fE(e.revenueSeasonality),v=fE(e.cogsSeasonality),x=e.cogsPaymentTerms&&e.cogsPaymentTerms.length>0?e.cogsPaymentTerms:[{delayMonths:0,percentage:100}],b=x.reduce((E,R)=>E+R.percentage,0),_=b>0?x.map(E=>({...E,percentage:E.percentage/b})):[{delayMonths:0,percentage:1}],j=[];e.loans.forEach(E=>{j.push(...kG(E,a,i))});const S=e.capexPayments||[],C=i*12,k=[];for(let E=0;E<i;E++){const R=a+E,T=(t.annualCogs[R]||0)/12;for(let I=0;I<12;I++)k.push(T*v[I])}const N=new Array(C+24).fill(0);k.forEach((E,R)=>{_.forEach(P=>{const T=R+P.delayMonths;T<N.length&&(N[T]+=E*P.percentage)})});for(let E=0;E<i;E++){const R=a+E,P=t.annualRevenue[R]||0,T=t.annualPayroll[R]||0,I=t.annualOpex[R]||0,M=P/12,D=T/12,B=I/12;for(let z=0;z<12;z++){const Z=z,J=c,se=M*p[z];let U=0;if(!o){const F=PG(Z);z%3===0&&r.forEach(oe=>{oe.year===R&&oe.quarter===F&&(U+=oe.amount,h+=oe.amount)})}const q=`${R}-${Z.toString().padStart(2,"0")}`,G=((A=e.otherInflows[q])==null?void 0:A.amount)||0,H=se+U+G,fe=E*12+z,L=N[fe]||0;let Y=0;const V=[];e.variableCharges.forEach(F=>{const ee=se*F.rateOfRevenue;Y+=ee,V.push({name:F.name,amount:ee})}),m+=Y;const Q=j.filter(F=>F.year===R&&F.month===Z),te=Q.reduce((F,ee)=>F+ee.total,0);y+=te;const be=S.filter(F=>F.year===R&&F.month===Z),Re=be.reduce((F,ee)=>F+ee.amount,0);g+=Re;const We=((O=e.otherOutflows[q])==null?void 0:O.amount)||0,ge=L+D+B+Y+te+Re+We,ke=H-ge,Xe=J+ke;Xe<u&&(u=Xe,d={year:R,month:Z}),f===null&&ke>0&&l.length>0&&l.slice(-3).some(ee=>ee.netCashFlow<0)&&(f={year:R,month:Z}),l.push({year:R,month:Z,monthName:El[z],revenue:se,fundingInjection:U,otherInflows:G,totalInflows:H,cogs:L,payroll:D,opex:B,variableCharges:Y,loanPayments:te,capexPayments:Re,otherOutflows:We,totalOutflows:ge,treasuryStart:J,netCashFlow:ke,treasuryEnd:Xe,loanPaymentDetails:Q,variableChargeDetails:V,capexPaymentDetails:be}),c=Xe}}return{months:l,initialCash:n,totalFundingRaised:h,minTreasury:u,minTreasuryMonth:d,breakEvenMonth:f,totalVariableCharges:m,totalLoanPayments:y,totalCapexPayments:g}}function AG(e){const t=e.match(/^(\d{4})-(\d{2})$/);return t?{year:parseInt(t[1],10),month:parseInt(t[2],10)}:null}function Hd(e){const t=new Map;return e.forEach((r,n)=>{let a=t.get(r.year);a||(a={year:r.year,revenue:0,cogs:0,grossMargin:0,payroll:0,opex:0,variableCharges:0,loanPayments:0,fundingInjection:0,netCashFlow:0,treasuryStart:r.treasuryStart,treasuryEnd:0,ebitda:0}),a.revenue+=r.revenue,a.cogs+=r.cogs,a.payroll+=r.payroll,a.opex+=r.opex,a.variableCharges+=r.variableCharges,a.loanPayments+=r.loanPayments,a.fundingInjection+=r.fundingInjection,a.netCashFlow+=r.netCashFlow,a.treasuryEnd=r.treasuryEnd,t.set(r.year,a)}),t.forEach((r,n)=>{r.grossMargin=r.revenue-r.cogs,r.ebitda=r.grossMargin-r.payroll-r.opex-r.variableCharges}),t}const St=w.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:ue("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));St.displayName="Card";const er=w.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:ue("flex flex-col space-y-1.5 p-6",e),...t}));er.displayName="CardHeader";const tr=w.forwardRef(({className:e,...t},r)=>s.jsx("h3",{ref:r,className:ue("text-2xl font-semibold leading-none tracking-tight",e),...t}));tr.displayName="CardTitle";const _s=w.forwardRef(({className:e,...t},r)=>s.jsx("p",{ref:r,className:ue("text-sm text-muted-foreground",e),...t}));_s.displayName="CardDescription";const Rt=w.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:ue("p-6 pt-0",e),...t}));Rt.displayName="CardContent";const OG=w.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:ue("flex items-center p-6 pt-0",e),...t}));OG.displayName="CardFooter";function kt({label:e,value:t,subValue:r,trend:n,className:a}){return s.jsx(St,{className:ue("",a),children:s.jsxs(Rt,{className:"pt-4 pb-3",children:[s.jsx("div",{className:"kpi-label mb-1",children:e}),s.jsxs("div",{className:"kpi-value flex items-center gap-2",children:[t,n==="up"&&s.jsx(Fo,{className:"h-4 w-4 text-[hsl(var(--positive))]"}),n==="down"&&s.jsx(uh,{className:"h-4 w-4 text-[hsl(var(--negative))]"})]}),r&&s.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:r})]})})}function Ke({title:e,children:t,id:r,className:n,action:a}){return s.jsxs(St,{className:ue("",n),id:r,children:[s.jsxs(er,{className:"pb-3 flex flex-row items-center justify-between",children:[s.jsx(tr,{className:"text-lg",children:e}),a]}),s.jsx(Rt,{children:t})]})}const xe=w.forwardRef(({className:e,type:t,...r},n)=>s.jsx("input",{type:t,className:ue("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...r}));xe.displayName="Input";function Qh(e,[t,r]){return Math.min(r,Math.max(t,e))}var TG=w.createContext(void 0);function qd(e){const t=w.useContext(TG);return e||t||"ltr"}function Rx(e){const t=w.useRef({value:e,previous:e});return w.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var h3=["PageUp","PageDown"],m3=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],p3={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Kd="Slider",[Jj,RG,MG]=px(Kd),[g3,eTe]=Yn(Kd,[MG]),[$G,Mx]=g3(Kd),v3=w.forwardRef((e,t)=>{const{name:r,min:n=0,max:a=100,step:i=1,orientation:o="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:u=[n],value:d,onValueChange:f=()=>{},onValueCommit:h=()=>{},inverted:m=!1,form:y,...g}=e,p=w.useRef(new Set),v=w.useRef(0),b=o==="horizontal"?IG:DG,[_=[],j]=sa({prop:d,defaultProp:u,onChange:O=>{var R;(R=[...p.current][v.current])==null||R.focus(),f(O)}}),S=w.useRef(_);function C(O){const E=UG(_,O);A(O,E)}function k(O){A(O,v.current)}function N(){const O=S.current[v.current];_[v.current]!==O&&h(_)}function A(O,E,{commit:R}={commit:!1}){const P=qG(i),T=KG(Math.round((O-n)/i)*i+n,P),I=Qh(T,[n,a]);j((M=[])=>{const D=FG(M,I,E);if(HG(D,c*i)){v.current=D.indexOf(I);const B=String(D)!==String(M);return B&&R&&h(D),B?D:M}else return M})}return s.jsx($G,{scope:e.__scopeSlider,name:r,disabled:l,min:n,max:a,valueIndexToChangeRef:v,thumbs:p.current,values:_,orientation:o,form:y,children:s.jsx(Jj.Provider,{scope:e.__scopeSlider,children:s.jsx(Jj.Slot,{scope:e.__scopeSlider,children:s.jsx(b,{"aria-disabled":l,"data-disabled":l?"":void 0,...g,ref:t,onPointerDown:Oe(g.onPointerDown,()=>{l||(S.current=_)}),min:n,max:a,inverted:m,onSlideStart:l?void 0:C,onSlideMove:l?void 0:k,onSlideEnd:l?void 0:N,onHomeKeyDown:()=>!l&&A(n,0,{commit:!0}),onEndKeyDown:()=>!l&&A(a,_.length-1,{commit:!0}),onStepKeyDown:({event:O,direction:E})=>{if(!l){const T=h3.includes(O.key)||O.shiftKey&&m3.includes(O.key)?10:1,I=v.current,M=_[I],D=i*T*E;A(M+D,I,{commit:!0})}}})})})})});v3.displayName=Kd;var[y3,x3]=g3(Kd,{startEdge:"left",endEdge:"right",size:"width",direction:1}),IG=w.forwardRef((e,t)=>{const{min:r,max:n,dir:a,inverted:i,onSlideStart:o,onSlideMove:l,onSlideEnd:c,onStepKeyDown:u,...d}=e,[f,h]=w.useState(null),m=dt(t,b=>h(b)),y=w.useRef(void 0),g=qd(a),p=g==="ltr",v=p&&!i||!p&&i;function x(b){const _=y.current||f.getBoundingClientRect(),j=[0,_.width],C=kC(j,v?[r,n]:[n,r]);return y.current=_,C(b-_.left)}return s.jsx(y3,{scope:e.__scopeSlider,startEdge:v?"left":"right",endEdge:v?"right":"left",direction:v?1:-1,size:"width",children:s.jsx(b3,{dir:g,"data-orientation":"horizontal",...d,ref:m,style:{...d.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:b=>{const _=x(b.clientX);o==null||o(_)},onSlideMove:b=>{const _=x(b.clientX);l==null||l(_)},onSlideEnd:()=>{y.current=void 0,c==null||c()},onStepKeyDown:b=>{const j=p3[v?"from-left":"from-right"].includes(b.key);u==null||u({event:b,direction:j?-1:1})}})})}),DG=w.forwardRef((e,t)=>{const{min:r,max:n,inverted:a,onSlideStart:i,onSlideMove:o,onSlideEnd:l,onStepKeyDown:c,...u}=e,d=w.useRef(null),f=dt(t,d),h=w.useRef(void 0),m=!a;function y(g){const p=h.current||d.current.getBoundingClientRect(),v=[0,p.height],b=kC(v,m?[n,r]:[r,n]);return h.current=p,b(g-p.top)}return s.jsx(y3,{scope:e.__scopeSlider,startEdge:m?"bottom":"top",endEdge:m?"top":"bottom",size:"height",direction:m?1:-1,children:s.jsx(b3,{"data-orientation":"vertical",...u,ref:f,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:g=>{const p=y(g.clientY);i==null||i(p)},onSlideMove:g=>{const p=y(g.clientY);o==null||o(p)},onSlideEnd:()=>{h.current=void 0,l==null||l()},onStepKeyDown:g=>{const v=p3[m?"from-bottom":"from-top"].includes(g.key);c==null||c({event:g,direction:v?-1:1})}})})}),b3=w.forwardRef((e,t)=>{const{__scopeSlider:r,onSlideStart:n,onSlideMove:a,onSlideEnd:i,onHomeKeyDown:o,onEndKeyDown:l,onStepKeyDown:c,...u}=e,d=Mx(Kd,r);return s.jsx(Ve.span,{...u,ref:t,onKeyDown:Oe(e.onKeyDown,f=>{f.key==="Home"?(o(f),f.preventDefault()):f.key==="End"?(l(f),f.preventDefault()):h3.concat(m3).includes(f.key)&&(c(f),f.preventDefault())}),onPointerDown:Oe(e.onPointerDown,f=>{const h=f.target;h.setPointerCapture(f.pointerId),f.preventDefault(),d.thumbs.has(h)?h.focus():n(f)}),onPointerMove:Oe(e.onPointerMove,f=>{f.target.hasPointerCapture(f.pointerId)&&a(f)}),onPointerUp:Oe(e.onPointerUp,f=>{const h=f.target;h.hasPointerCapture(f.pointerId)&&(h.releasePointerCapture(f.pointerId),i(f))})})}),w3="SliderTrack",j3=w.forwardRef((e,t)=>{const{__scopeSlider:r,...n}=e,a=Mx(w3,r);return s.jsx(Ve.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...n,ref:t})});j3.displayName=w3;var e1="SliderRange",_3=w.forwardRef((e,t)=>{const{__scopeSlider:r,...n}=e,a=Mx(e1,r),i=x3(e1,r),o=w.useRef(null),l=dt(t,o),c=a.values.length,u=a.values.map(h=>N3(h,a.min,a.max)),d=c>1?Math.min(...u):0,f=100-Math.max(...u);return s.jsx(Ve.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...n,ref:l,style:{...e.style,[i.startEdge]:d+"%",[i.endEdge]:f+"%"}})});_3.displayName=e1;var t1="SliderThumb",S3=w.forwardRef((e,t)=>{const r=RG(e.__scopeSlider),[n,a]=w.useState(null),i=dt(t,l=>a(l)),o=w.useMemo(()=>n?r().findIndex(l=>l.ref.current===n):-1,[r,n]);return s.jsx(LG,{...e,ref:i,index:o})}),LG=w.forwardRef((e,t)=>{const{__scopeSlider:r,index:n,name:a,...i}=e,o=Mx(t1,r),l=x3(t1,r),[c,u]=w.useState(null),d=dt(t,x=>u(x)),f=c?o.form||!!c.closest("form"):!0,h=_x(c),m=o.values[n],y=m===void 0?0:N3(m,o.min,o.max),g=zG(n,o.values.length),p=h==null?void 0:h[l.size],v=p?VG(p,y,l.direction):0;return w.useEffect(()=>{if(c)return o.thumbs.add(c),()=>{o.thumbs.delete(c)}},[c,o.thumbs]),s.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${y}% + ${v}px)`},children:[s.jsx(Jj.ItemSlot,{scope:e.__scopeSlider,children:s.jsx(Ve.span,{role:"slider","aria-label":e["aria-label"]||g,"aria-valuemin":o.min,"aria-valuenow":m,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...i,ref:d,style:m===void 0?{display:"none"}:e.style,onFocus:Oe(e.onFocus,()=>{o.valueIndexToChangeRef.current=n})})}),f&&s.jsx(C3,{name:a??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:m},n)]})});S3.displayName=t1;var BG="RadioBubbleInput",C3=w.forwardRef(({__scopeSlider:e,value:t,...r},n)=>{const a=w.useRef(null),i=dt(a,n),o=Rx(t);return w.useEffect(()=>{const l=a.current;if(!l)return;const c=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==t&&d){const f=new Event("input",{bubbles:!0});d.call(l,t),l.dispatchEvent(f)}},[o,t]),s.jsx(Ve.input,{style:{display:"none"},...r,ref:i,defaultValue:t})});C3.displayName=BG;function FG(e=[],t,r){const n=[...e];return n[r]=t,n.sort((a,i)=>a-i)}function N3(e,t,r){const i=100/(r-t)*(e-t);return Qh(i,[0,100])}function zG(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function UG(e,t){if(e.length===1)return 0;const r=e.map(a=>Math.abs(a-t)),n=Math.min(...r);return r.indexOf(n)}function VG(e,t,r){const n=e/2,i=kC([0,50],[0,n]);return(n-i(t)*r)*r}function WG(e){return e.slice(0,-1).map((t,r)=>e[r+1]-t)}function HG(e,t){if(t>0){const r=WG(e);return Math.min(...r)>=t}return!0}function kC(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function qG(e){return(String(e).split(".")[1]||"").length}function KG(e,t){const r=Math.pow(10,t);return Math.round(e*r)/r}var k3=v3,GG=j3,YG=_3,XG=S3;const Ur=w.forwardRef(({className:e,...t},r)=>s.jsxs(k3,{ref:r,className:ue("relative flex w-full touch-none select-none items-center",e),...t,children:[s.jsx(GG,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:s.jsx(YG,{className:"absolute h-full bg-primary"})}),s.jsx(XG,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));Ur.displayName=k3.displayName;const PC=Dd("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ne=w.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...a},i)=>{const o=n?xI:"button";return s.jsx(o,{className:ue(PC({variant:t,size:r,className:e})),ref:i,...a})});ne.displayName="Button";function re(e,t){return t&&Math.abs(e)>=1e6?`${(e/1e6).toFixed(1)}M`:t&&Math.abs(e)>=1e3?`${(e/1e3).toFixed(0)}k`:new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR",maximumFractionDigits:0}).format(e)}function nn(e){return`${(e*100).toFixed(1)}%`}const Cv={b2c:{},b2b:{},oem:{},marginRates:{b2c:.6,b2b:.45,oem:.3},growthRates:{b2c:.15,b2b:.2,oem:.25}};function Jh(e,t){return(e.b2c[t]||0)+(e.b2b[t]||0)+(e.oem[t]||0)}function r1(e,t){const r=e.marginRates||Cv.marginRates;return(e.b2c[t]||0)*r.b2c+(e.b2b[t]||0)*r.b2b+(e.oem[t]||0)*r.oem}function ZG(e,t){return Jh(e,t)-r1(e,t)}const Db=[{key:"b2c",label:"B2C"},{key:"b2b",label:"B2B"},{key:"oem",label:"OEM"}];function QG({config:e,onChange:t,years:r}){const n=e.marginRates||Cv.marginRates,a=e.growthRates||Cv.growthRates,i=(m,y,g)=>{t({...e,[m]:{...e[m],[y]:g}})},o=(m,y)=>{t({...e,marginRates:{...n,[m]:y}})},l=(m,y)=>{t({...e,growthRates:{...a,[m]:y}})},c=m=>{const y=r[0],g=e[m][y]||0;if(g<=0)return;const p=a[m],v={...e[m]};r.forEach((x,b)=>{b!==0&&(v[x]=Math.round(g*Math.pow(1+p,b)))}),t({...e,[m]:v})},u=()=>{let m={...e};Db.forEach(({key:y})=>{const g=e[y][r[0]]||0;if(g<=0)return;const p=a[y],v={...e[y]};r.forEach((x,b)=>{b!==0&&(v[x]=Math.round(g*Math.pow(1+p,b)))}),m={...m,[y]:v}}),t(m)},d=r.reduce((m,y)=>m+Jh(e,y),0),f=r.reduce((m,y)=>m+r1(e,y),0),h=d>0?f/d:0;return s.jsxs("div",{className:"space-y-4",children:[s.jsxs(Ke,{title:"Paramtres par Canal",children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:Db.map(m=>s.jsxs("div",{className:"space-y-3 p-3 rounded-lg border bg-muted/20",children:[s.jsx("div",{className:"font-medium text-sm",children:m.label}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[s.jsx("span",{children:"Taux de croissance"}),s.jsxs("span",{className:"font-mono",children:[(a[m.key]*100).toFixed(0),"%"]})]}),s.jsx(Ur,{value:[a[m.key]*100],onValueChange:([y])=>l(m.key,y/100),min:0,max:100,step:1})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[s.jsx("span",{children:"Taux de marge"}),s.jsxs("span",{className:"font-mono",children:[(n[m.key]*100).toFixed(0),"%"]})]}),s.jsx(Ur,{value:[n[m.key]*100],onValueChange:([y])=>o(m.key,y/100),min:0,max:100,step:1})]}),s.jsxs(ne,{variant:"outline",size:"sm",className:"w-full",onClick:()=>c(m.key),children:[s.jsx(IP,{className:"h-3 w-3 mr-1"}),"Appliquer croissance"]})]},m.key))}),s.jsx("div",{className:"mt-4 flex justify-end",children:s.jsxs(ne,{variant:"default",size:"sm",onClick:u,children:[s.jsx(IP,{className:"h-4 w-4 mr-1"}),"Appliquer croissance  tous les canaux"]})})]}),s.jsx(Ke,{title:"CA Global par Canal",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b",children:[s.jsx("th",{className:"text-left py-2 px-3",children:"Canal"}),r.map(m=>s.jsx("th",{className:"text-center py-2 px-3",children:m},m)),s.jsx("th",{className:"text-right py-2 px-3",children:"Total"})]})}),s.jsxs("tbody",{children:[Db.map(m=>s.jsxs("tr",{className:"border-b",children:[s.jsxs("td",{className:"py-2 px-3 font-medium",children:[m.label,s.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["(marge ",(n[m.key]*100).toFixed(0),"%)"]})]}),r.map(y=>s.jsx("td",{className:"py-2 px-3 text-center",children:s.jsx(xe,{type:"number",value:e[m.key][y]||0,onChange:g=>i(m.key,y,Number(g.target.value)),className:"h-8 w-24 mx-auto text-right"})},y)),s.jsx("td",{className:"py-2 px-3 text-right font-mono-numbers font-medium",children:re(r.reduce((y,g)=>y+(e[m.key][g]||0),0),!0)})]},m.key)),s.jsxs("tr",{className:"font-semibold border-t",children:[s.jsx("td",{className:"py-2 px-3",children:"Total CA"}),r.map(m=>s.jsx("td",{className:"py-2 px-3 text-center font-mono-numbers",children:re(Jh(e,m),!0)},m)),s.jsx("td",{className:"py-2 px-3 text-right font-mono-numbers",children:re(d,!0)})]}),s.jsxs("tr",{className:"text-emerald-700 dark:text-emerald-400",children:[s.jsxs("td",{className:"py-2 px-3 font-medium",children:["Marge Brute",s.jsxs("span",{className:"text-xs ml-1",children:["(",(h*100).toFixed(0),"%)"]})]}),r.map(m=>s.jsx("td",{className:"py-2 px-3 text-center font-mono-numbers",children:re(r1(e,m),!0)},m)),s.jsx("td",{className:"py-2 px-3 text-right font-mono-numbers font-medium",children:re(f,!0)})]})]})]})})})]})}var JG="Label",P3=w.forwardRef((e,t)=>s.jsx(Ve.label,{...e,ref:t,onMouseDown:r=>{var a;r.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));P3.displayName=JG;var E3=P3;const eY=Dd("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Ne=w.forwardRef(({className:e,...t},r)=>s.jsx(E3,{ref:r,className:ue(eY(),e),...t}));Ne.displayName=E3.displayName;const tY={totalRaise:15e5,ebitdaMultiple:6,ocRatio:0,referenceEBITDA:5e5};function rY({config:e,onChange:t}){const r=Math.max(2e5,e.referenceEBITDA*e.ebitdaMultiple),n=e.totalRaise*e.ocRatio,a=e.totalRaise*(1-e.ocRatio),i=r+a,o=i>0?a/i:0;return s.jsx(Ke,{title:"Simulation de Dilution",id:"valuation-dilution",children:s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs(Ne,{children:["Part OC: ",(e.ocRatio*100).toFixed(0),"%  Equity: ",((1-e.ocRatio)*100).toFixed(0),"%"]}),s.jsx(Ur,{value:[e.ocRatio*100],onValueChange:([l])=>t({...e,ocRatio:l/100}),min:0,max:99,step:1})]})}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"p-3 bg-muted/30 rounded-lg",children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"Pre-Money"}),s.jsx("div",{className:"text-xl font-bold font-mono-numbers",children:re(r,!0)})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"p-3 bg-muted/30 rounded-lg",children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"Part OC"}),s.jsx("div",{className:"text-lg font-bold font-mono-numbers",children:re(n,!0)}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:[(e.ocRatio*100).toFixed(0),"% de la leve"]})]}),s.jsxs("div",{className:"p-3 bg-muted/30 rounded-lg",children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"Part Equity"}),s.jsx("div",{className:"text-lg font-bold font-mono-numbers",children:re(a,!0)}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:[((1-e.ocRatio)*100).toFixed(0),"% de la leve"]})]})]}),s.jsxs("div",{className:"p-3 bg-muted/30 rounded-lg",children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"Post-Money"}),s.jsx("div",{className:"text-xl font-bold font-mono-numbers",children:re(i,!0)})]}),s.jsxs("div",{className:"p-3 bg-muted/30 rounded-lg",children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"Dilution (equity uniquement)"}),s.jsx("div",{className:"text-xl font-bold font-mono-numbers",children:nn(o)})]})]})]})})}var Di=function(){return Di=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Di.apply(this,arguments)};function Gd(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function nY(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})}function aY(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}const iY=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class EC extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class sY extends EC{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class hE extends EC{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class mE extends EC{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var n1;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(n1||(n1={}));class oY{constructor(t,{headers:r={},customFetch:n,region:a=n1.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=iY(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return nY(this,arguments,void 0,function*(r,n={}){var a;let i,o;try{const{headers:l,method:c,body:u,signal:d,timeout:f}=n;let h={},{region:m}=n;m||(m=this.region);const y=new URL(`${this.url}/${r}`);m&&m!=="any"&&(h["x-region"]=m,y.searchParams.set("forceFunctionRegion",m));let g;u&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",g=u):typeof u=="string"?(h["Content-Type"]="text/plain",g=u):typeof FormData<"u"&&u instanceof FormData?g=u:(h["Content-Type"]="application/json",g=JSON.stringify(u)):u&&typeof u!="string"&&!(typeof Blob<"u"&&u instanceof Blob)&&!(u instanceof ArrayBuffer)&&!(typeof FormData<"u"&&u instanceof FormData)?g=JSON.stringify(u):g=u;let p=d;f&&(o=new AbortController,i=setTimeout(()=>o.abort(),f),d?(p=o.signal,d.addEventListener("abort",()=>o.abort())):p=o.signal);const v=yield this.fetch(y.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),l),body:g,signal:p}).catch(j=>{throw new sY(j)}),x=v.headers.get("x-relay-error");if(x&&x==="true")throw new hE(v);if(!v.ok)throw new mE(v);let b=((a=v.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),_;return b==="application/json"?_=yield v.json():b==="application/octet-stream"||b==="application/pdf"?_=yield v.blob():b==="text/event-stream"?_=v:b==="multipart/form-data"?_=yield v.formData():_=yield v.text(),{data:_,error:null,response:v}}catch(l){return{data:null,error:l,response:l instanceof mE||l instanceof hE?l.context:void 0}}finally{i&&clearTimeout(i)}})}}var lY=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},cY=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let a=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let o=null,l=null,c=null,u=i.status,d=i.statusText;if(i.ok){var f,h;if(r.method!=="HEAD"){var m;const v=await i.text();v===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((m=r.headers.get("Accept"))===null||m===void 0)&&m.includes("application/vnd.pgrst.plan+text"))?l=v:l=JSON.parse(v))}const g=(f=r.headers.get("Prefer"))===null||f===void 0?void 0:f.match(/count=(exact|planned|estimated)/),p=(h=i.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");g&&p&&p.length>1&&(c=parseInt(p[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(l)&&(l.length>1?(o={code:"PGRST116",details:`Results contain ${l.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},l=null,c=null,u=406,d="Not Acceptable"):l.length===1?l=l[0]:l=null)}else{var y;const g=await i.text();try{o=JSON.parse(g),Array.isArray(o)&&i.status===404&&(l=[],o=null,u=200,d="OK")}catch{i.status===404&&g===""?(u=204,d="No Content"):o={message:g}}if(o&&r.isMaybeSingle&&(!(o==null||(y=o.details)===null||y===void 0)&&y.includes("0 rows"))&&(o=null,u=200,d="OK"),o&&r.shouldThrowOnError)throw new lY(o)}return{error:o,data:l,count:c,status:u,statusText:d}});return this.shouldThrowOnError||(a=a.catch(i=>{var o;let l="";const c=i==null?void 0:i.cause;if(c){var u,d,f,h;const y=(u=c==null?void 0:c.message)!==null&&u!==void 0?u:"",g=(d=c==null?void 0:c.code)!==null&&d!==void 0?d:"";l=`${(f=i==null?void 0:i.name)!==null&&f!==void 0?f:"FetchError"}: ${i==null?void 0:i.message}`,l+=`

Caused by: ${(h=c==null?void 0:c.name)!==null&&h!==void 0?h:"Error"}: ${y}`,g&&(l+=` (${g})`),c!=null&&c.stack&&(l+=`
${c.stack}`)}else{var m;l=(m=i==null?void 0:i.stack)!==null&&m!==void 0?m:""}return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:l,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),a.then(e,t)}returns(){return this}overrideTypes(){return this}},uY=class extends cY{select(e){let t=!1;const r=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:a=n}={}){const i=a?`${a}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:n=r}={}){const a=typeof n>"u"?"offset":`${n}.offset`,i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:a=!1,format:i="text"}={}){var o;const l=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,a?"wal":null].filter(Boolean).join("|"),c=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${c}"; options=${l};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const pE=new RegExp("[,()]");var zc=class extends uY{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&pE.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}notIn(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&pE.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`not.in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n}={}){let a="";n==="plain"?a="pl":n==="phrase"?a="ph":n==="websearch"&&(a="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${a}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}},dY=class{constructor(e,{headers:t={},schema:r,fetch:n}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=n}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:r=!1,count:n}=t??{},a=r?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(u=>/\s/.test(u)&&!i?"":(u==='"'&&(i=!i),u)).join(""),{url:l,headers:c}=this.cloneRequestState();return l.searchParams.set("select",o),n&&c.append("Prefer",`count=${n}`),new zc({method:a,url:l,headers:c,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var n;const a="POST",{url:i,headers:o}=this.cloneRequestState();if(t&&o.append("Prefer",`count=${t}`),r||o.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);i.searchParams.set("columns",c.join(","))}}return new zc({method:a,url:i,headers:o,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:n,defaultToNull:a=!0}={}){var i;const o="POST",{url:l,headers:c}=this.cloneRequestState();if(c.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&l.searchParams.set("on_conflict",t),n&&c.append("Prefer",`count=${n}`),a||c.append("Prefer","missing=default"),Array.isArray(e)){const u=e.reduce((d,f)=>d.concat(Object.keys(f)),[]);if(u.length>0){const d=[...new Set(u)].map(f=>`"${f}"`);l.searchParams.set("columns",d.join(","))}}return new zc({method:o,url:l,headers:c,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(e,{count:t}={}){var r;const n="PATCH",{url:a,headers:i}=this.cloneRequestState();return t&&i.append("Prefer",`count=${t}`),new zc({method:n,url:a,headers:i,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var t;const r="DELETE",{url:n,headers:a}=this.cloneRequestState();return e&&a.append("Prefer",`count=${e}`),new zc({method:r,url:n,headers:a,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},fY=class A3{constructor(t,{headers:r={},schema:n,fetch:a}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.fetch=a}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new dY(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new A3(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:a=!1,count:i}={}){var o;let l;const c=new URL(`${this.url}/rpc/${t}`);let u;const d=m=>m!==null&&typeof m=="object"&&(!Array.isArray(m)||m.some(d)),f=n&&Object.values(r).some(d);f?(l="POST",u=r):n||a?(l=n?"HEAD":"GET",Object.entries(r).filter(([m,y])=>y!==void 0).map(([m,y])=>[m,Array.isArray(y)?`{${y.join(",")}}`:`${y}`]).forEach(([m,y])=>{c.searchParams.append(m,y)})):(l="POST",u=r);const h=new Headers(this.headers);return f?h.set("Prefer",i?`count=${i},return=minimal`:"return=minimal"):i&&h.set("Prefer",`count=${i}`),new zc({method:l,url:c,headers:h,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class hY{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const n=r.versions;if(n&&n.node){const a=n.node,i=parseInt(a.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const mY="2.93.3",pY=`realtime-js/${mY}`,gY="1.0.0",O3="2.0.0",gE=O3,a1=1e4,vY=1e3,yY=100;var to;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(to||(to={}));var Qr;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Qr||(Qr={}));var ui;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(ui||(ui={}));var i1;(function(e){e.websocket="websocket"})(i1||(i1={}));var _l;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(_l||(_l={}));class xY{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,n;const a=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(t){var r,n;const a=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},o=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(t,r,n){var a,i;const o=t.topic,l=(a=t.ref)!==null&&a!==void 0?a:"",c=(i=t.join_ref)!==null&&i!==void 0?i:"",u=t.payload.event,d=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},f=Object.keys(d).length===0?"":JSON.stringify(d);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`ref length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`metadata length ${f.length} exceeds maximum of 255`);const h=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+l.length+o.length+u.length+f.length,m=new ArrayBuffer(this.HEADER_LENGTH+h);let y=new DataView(m),g=0;y.setUint8(g++,this.KINDS.userBroadcastPush),y.setUint8(g++,c.length),y.setUint8(g++,l.length),y.setUint8(g++,o.length),y.setUint8(g++,u.length),y.setUint8(g++,f.length),y.setUint8(g++,r),Array.from(c,v=>y.setUint8(g++,v.charCodeAt(0))),Array.from(l,v=>y.setUint8(g++,v.charCodeAt(0))),Array.from(o,v=>y.setUint8(g++,v.charCodeAt(0))),Array.from(u,v=>y.setUint8(g++,v.charCodeAt(0))),Array.from(f,v=>y.setUint8(g++,v.charCodeAt(0)));var p=new Uint8Array(m.byteLength+n.byteLength);return p.set(new Uint8Array(m),0),p.set(new Uint8Array(n),m.byteLength),p.buffer}decode(t,r){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return r(n)}if(typeof t=="string"){const n=JSON.parse(t),[a,i,o,l,c]=n;return r({join_ref:a,ref:i,topic:o,event:l,payload:c})}return r({})}_binaryDecode(t){const r=new DataView(t),n=r.getUint8(0),a=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,a)}}_decodeUserBroadcast(t,r,n){const a=r.getUint8(1),i=r.getUint8(2),o=r.getUint8(3),l=r.getUint8(4);let c=this.HEADER_LENGTH+4;const u=n.decode(t.slice(c,c+a));c=c+a;const d=n.decode(t.slice(c,c+i));c=c+i;const f=n.decode(t.slice(c,c+o));c=c+o;const h=t.slice(c,t.byteLength),m=l===this.JSON_ENCODING?JSON.parse(n.decode(h)):h,y={type:this.BROADCAST_EVENT,event:d,payload:m};return o>0&&(y.meta=JSON.parse(f)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:y}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([n])=>r.includes(n)))}}class T3{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var cr;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(cr||(cr={}));const vE=(e,t,r={})=>{var n;const a=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((i,o)=>(i[o]=bY(o,e,t,a),i),{}):{}},bY=(e,t,r,n)=>{const a=t.find(l=>l.name===e),i=a==null?void 0:a.type,o=r[e];return i&&!n.includes(i)?R3(i,o):s1(o)},R3=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return SY(t,r)}switch(e){case cr.bool:return wY(t);case cr.float4:case cr.float8:case cr.int2:case cr.int4:case cr.int8:case cr.numeric:case cr.oid:return jY(t);case cr.json:case cr.jsonb:return _Y(t);case cr.timestamp:return CY(t);case cr.abstime:case cr.date:case cr.daterange:case cr.int4range:case cr.int8range:case cr.money:case cr.reltime:case cr.text:case cr.time:case cr.timestamptz:case cr.timetz:case cr.tsrange:case cr.tstzrange:return s1(t);default:return s1(t)}},s1=e=>e,wY=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},jY=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},_Y=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},SY=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>R3(t,l))}return e},CY=e=>typeof e=="string"?e.replace(" ","T"):e,M3=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Lb{constructor(t,r,n={},a=a1){this.channel=t,this.event=r,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var yE;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(yE||(yE={}));class dh{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=dh.syncState(this.state,a,i,o),this.pendingDiffs.forEach(c=>{this.state=dh.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=dh.syncDiff(this.state,a,i,o),l())}),this.onJoin((a,i,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,a){const i=this.cloneDeep(t),o=this.transformState(r),l={},c={};return this.map(i,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const f=i[u];if(f){const h=d.map(p=>p.presence_ref),m=f.map(p=>p.presence_ref),y=d.filter(p=>m.indexOf(p.presence_ref)<0),g=f.filter(p=>h.indexOf(p.presence_ref)<0);y.length>0&&(l[u]=y),g.length>0&&(c[u]=g)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},n,a)}static syncDiff(t,r,n,a){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const f=t[l].map(m=>m.presence_ref),h=d.filter(m=>f.indexOf(m.presence_ref)<0);t[l].unshift(...h)}n(l,d,c)}),this.map(o,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),t[l]=u,a(l,u,c),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const a=t[n];return"metas"in a?r[n]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var xE;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(xE||(xE={}));var fh;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(fh||(fh={}));var fs;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(fs||(fs={}));class ou{constructor(t,r={config:{}},n){var a,i;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=Qr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Lb(this,ui.join,this.params,this.timeout),this.rejoinTimer=new T3(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Qr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Qr.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Qr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Qr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Qr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ui.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new dh(this),this.broadcastEndpointURL=M3(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,a,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Qr.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,u=(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(m=>m.filter))!==null&&a!==void 0?a:[],d=!!this.bindings[fh.PRESENCE]&&this.bindings[fh.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,f={},h={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(m=>t==null?void 0:t(fs.CHANNEL_ERROR,m)),this._onClose(()=>t==null?void 0:t(fs.CLOSED)),this.updateJoinPayload(Object.assign({config:h},f)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:m})=>{var y;if(this.socket._isManualToken()||this.socket.setAuth(),m===void 0){t==null||t(fs.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,p=(y=g==null?void 0:g.length)!==null&&y!==void 0?y:0,v=[];for(let x=0;x<p;x++){const b=g[x],{filter:{event:_,schema:j,table:S,filter:C}}=b,k=m&&m[x];if(k&&k.event===_&&ou.isFilterValueEqual(k.schema,j)&&ou.isFilterValueEqual(k.table,S)&&ou.isFilterValueEqual(k.filter,C))v.push(Object.assign(Object.assign({},b),{id:k.id}));else{this.unsubscribe(),this.state=Qr.errored,t==null||t(fs.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,t&&t(fs.SUBSCRIBED);return}}).receive("error",m=>{this.state=Qr.errored,t==null||t(fs.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(fs.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===Qr.joined&&t===fh.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var a;if(r==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(a=n.timeout)!==null&&a!==void 0?a:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const u=await l.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(t,r={}){var n,a;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=t,l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=u.body)===null||a===void 0?void 0:a.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Qr.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ui.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(a=>{n=new Lb(this,ui.leave,{},t),n.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Qr.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const a=new AbortController,i=setTimeout(()=>a.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Lb(this,t,r,n);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>yY){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var a,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=ui;if(n&&[l,c,u,d].indexOf(o)>=0&&n!==this._joinRef())return;let h=this._onMessage(o,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(m=>{var y,g,p;return((y=m.filter)===null||y===void 0?void 0:y.event)==="*"||((p=(g=m.filter)===null||g===void 0?void 0:g.event)===null||p===void 0?void 0:p.toLocaleLowerCase())===o}).map(m=>m.callback(h,n)):(i=this.bindings[o])===null||i===void 0||i.filter(m=>{var y,g,p,v,x,b;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const _=m.id,j=(y=m.filter)===null||y===void 0?void 0:y.event;return _&&((g=r.ids)===null||g===void 0?void 0:g.includes(_))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((p=r.data)===null||p===void 0?void 0:p.type.toLocaleLowerCase()))}else{const _=(x=(v=m==null?void 0:m.filter)===null||v===void 0?void 0:v.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return _==="*"||_===((b=r==null?void 0:r.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof h=="object"&&"ids"in h){const y=h.data,{schema:g,table:p,commit_timestamp:v,type:x,errors:b}=y;h=Object.assign(Object.assign({},{schema:g,table:p,commit_timestamp:v,eventType:x,new:{},old:{},errors:b}),this._getPayloadRecords(y))}m.callback(h,n)})}_isClosed(){return this.state===Qr.closed}_isJoined(){return this.state===Qr.joined}_isJoining(){return this.state===Qr.joining}_isLeaving(){return this.state===Qr.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const a=t.toLocaleLowerCase(),i={type:a,filter:r,callback:n};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&ou.isEqual(a.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(ui.close,{},t)}_onError(t){this._on(ui.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Qr.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=vE(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=vE(t.columns,t.old_record)),r}}const Bb=()=>{},Hp={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},NY=[1e3,2e3,5e3,1e4],kY=1e4,PY=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class EY{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=a1,this.transport=null,this.heartbeatIntervalMs=Hp.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Bb,this.ref=0,this.reconnectTimer=null,this.vsn=gE,this.logger=Bb,this.conn=null,this.sendBuffer=[],this.serializer=new xY,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=a=>a?(...i)=>a(...i):(...i)=>fetch(...i),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${i1.websocket}`,this.httpEndpoint=M3(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=hY.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case to.connecting:return _l.Connecting;case to.open:return _l.Open;case to.closing:return _l.Closing;default:return _l.Closed}}isConnected(){return this.connectionState()===_l.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,a=this.getChannels().find(i=>i.topic===n);if(a)return a;{const i=new ou(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:a,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(vY,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Hp.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const u=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",u)}catch(d){this.log("error","error in heartbeat callback",d)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:n,event:a,payload:i,ref:o}=r,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${n} ${a} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(a,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===to.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===to.open||this.conn.readyState===to.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t);try{this.heartbeatCallback("error")}catch(r){this.log("error","error in heartbeat callback",r)}}_triggerChanError(){this.channels.forEach(t=>t._trigger(ui.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${t}${n}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([PY],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,n=!1;if(t)r=t,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(a){this.log("error","Error fetching access token from callback",a),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(a=>{const i={access_token:r,version:pY};r&&a.updateJoinPayload(i),a.joinedOnce&&a._isJoined()&&a._push(ui.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new T3(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Hp.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,a,i,o,l,c,u,d,f,h,m;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:a1,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:Hp.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:Bb,this.vsn=(c=t==null?void 0:t.vsn)!==null&&c!==void 0?c:gE,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:y=>NY[y-1]||kY,this.vsn){case gY:this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:(y,g)=>g(JSON.stringify(y)),this.decode=(f=t==null?void 0:t.decode)!==null&&f!==void 0?f:(y,g)=>g(JSON.parse(y));break;case O3:this.encode=(h=t==null?void 0:t.encode)!==null&&h!==void 0?h:this.serializer.encode.bind(this.serializer),this.decode=(m=t==null?void 0:t.decode)!==null&&m!==void 0?m:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var em=class extends Error{constructor(e,t){var r;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((r=t.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function AY(e,t,r){const n=new URL(t,e);if(r)for(const[a,i]of Object.entries(r))i!==void 0&&n.searchParams.set(a,i);return n.toString()}async function OY(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function TY(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:a,body:i,headers:o}){const l=AY(e.baseUrl,n,a),c=await OY(e.auth),u=await t(l,{method:r,headers:{...i?{"Content-Type":"application/json"}:{},...c,...o},body:i?JSON.stringify(i):void 0}),d=await u.text(),f=(u.headers.get("content-type")||"").includes("application/json"),h=f&&d?JSON.parse(d):d;if(!u.ok){const m=f?h:void 0,y=m==null?void 0:m.error;throw new em((y==null?void 0:y.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:y==null?void 0:y.type,icebergCode:y==null?void 0:y.code,details:m})}return{status:u.status,headers:u.headers,data:h}}}}function qp(e){return e.join("")}var RY=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:qp(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${qp(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${qp(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${qp(e.namespace)}`}),!0}catch(t){if(t instanceof em&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof em&&r.status===409)return;throw r}}};function jc(e){return e.join("")}var MY=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${jc(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${jc(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${jc(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${jc(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${jc(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${jc(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof em&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof em&&r.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},$Y=class{constructor(e){var n;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=TY({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(n=e.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new RY(this.client,t),this.tableOps=new MY(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},$x=class extends Error{constructor(e,t="storage",r,n){super(e),this.__isStorageError=!0,this.namespace=t,this.name=t==="vectors"?"StorageVectorsError":"StorageError",this.status=r,this.statusCode=n}};function Ix(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var Kp=class extends $x{constructor(e,t,r,n="storage"){super(e,n,t,r),this.name=n==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},$3=class extends $x{constructor(e,t,r="storage"){super(e,r),this.name=r==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=t}};const IY=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),DY=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},o1=e=>{if(Array.isArray(e))return e.map(r=>o1(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const a=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=o1(n)}),t},LY=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function tm(e){"@babel/helpers - typeof";return tm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tm(e)}function BY(e,t){if(tm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(tm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function FY(e){var t=BY(e,"string");return tm(t)=="symbol"?t:t+""}function zY(e,t,r){return(t=FY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function at(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bE(Object(r),!0).forEach(function(n){zY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const wE=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},UY=async(e,t,r,n)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const a=e,i=a.status||500;if(typeof a.json=="function")a.json().then(o=>{const l=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||i+"";t(new Kp(wE(o),i,l,n))}).catch(()=>{if(n==="vectors"){const o=i+"";t(new Kp(a.statusText||`HTTP ${i} error`,i,o,n))}else{const o=i+"";t(new Kp(a.statusText||`HTTP ${i} error`,i,o,n))}});else{const o=i+"";t(new Kp(a.statusText||`HTTP ${i} error`,i,o,n))}}else t(new $3(wE(e),e,n))},VY=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||e==="HEAD"||!n?at(at({},a),r):(DY(n)?(a.headers=at({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,t!=null&&t.duplex&&(a.duplex=t.duplex),at(at({},a),r))};async function Cf(e,t,r,n,a,i,o){return new Promise((l,c)=>{e(r,VY(t,n,a,i)).then(u=>{if(!u.ok)throw u;if(n!=null&&n.noResolveJson)return u;if(o==="vectors"){const d=u.headers.get("content-type");if(u.headers.get("content-length")==="0"||u.status===204)return{};if(!d||!d.includes("application/json"))return{}}return u.json()}).then(u=>l(u)).catch(u=>UY(u,c,n,o))})}function I3(e="storage"){return{get:async(t,r,n,a)=>Cf(t,"GET",r,n,a,void 0,e),post:async(t,r,n,a,i)=>Cf(t,"POST",r,a,i,n,e),put:async(t,r,n,a,i)=>Cf(t,"PUT",r,a,i,n,e),head:async(t,r,n,a)=>Cf(t,"HEAD",r,at(at({},n),{},{noResolveJson:!0}),a,void 0,e),remove:async(t,r,n,a,i)=>Cf(t,"DELETE",r,a,i,n,e)}}const WY=I3("storage"),{get:rm,post:ii,put:l1,head:HY,remove:AC}=WY,ga=I3("vectors");var Yd=class{constructor(e,t={},r,n="storage"){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.fetch=IY(r),this.namespace=n}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(e){var t=this;try{return{data:await e(),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ix(r))return{data:null,error:r};throw r}}},qY=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Ix(t))return{data:null,error:t};throw t}}};let D3;D3=Symbol.toStringTag;var KY=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[D3]="BlobDownloadBuilder",this.promise=null}asStream(){return new qY(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Ix(t))return{data:null,error:t};throw t}}};const GY={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},jE={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var YY=class extends Yd{constructor(e,t={},r,n){super(e,t,n,"storage"),this.bucketId=r}async uploadOrUpdate(e,t,r,n){var a=this;return a.handleOperation(async()=>{let i;const o=at(at({},jE),n);let l=at(at({},a.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",a.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),c&&!i.has("metadata")&&i.append("metadata",a.encodeMetadata(c))):(i=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=a.toBase64(a.encodeMetadata(c))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),n!=null&&n.headers&&(l=at(at({},l),n.headers));const u=a._removeEmptyFolders(t),d=a._getFinalPath(u),f=await(e=="PUT"?l1:ii)(a.fetch,`${a.url}/object/${d}`,i,at({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{path:u,id:f.Id,fullPath:f.Key}})}async upload(e,t,r){return this.uploadOrUpdate("POST",e,t,r)}async uploadToSignedUrl(e,t,r,n){var a=this;const i=a._removeEmptyFolders(e),o=a._getFinalPath(i),l=new URL(a.url+`/object/upload/sign/${o}`);return l.searchParams.set("token",t),a.handleOperation(async()=>{let c;const u=at({upsert:jE.upsert},n),d=at(at({},a.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType),{path:i,fullPath:(await l1(a.fetch,l.toString(),c,{headers:d})).Key}})}async createSignedUploadUrl(e,t){var r=this;return r.handleOperation(async()=>{let n=r._getFinalPath(e);const a=at({},r.headers);t!=null&&t.upsert&&(a["x-upsert"]="true");const i=await ii(r.fetch,`${r.url}/object/upload/sign/${n}`,{},{headers:a}),o=new URL(r.url+i.url),l=o.searchParams.get("token");if(!l)throw new $x("No token returned by API");return{signedUrl:o.toString(),path:e,token:l}})}async update(e,t,r){return this.uploadOrUpdate("PUT",e,t,r)}async move(e,t,r){var n=this;return n.handleOperation(async()=>await ii(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers}))}async copy(e,t,r){var n=this;return n.handleOperation(async()=>({path:(await ii(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers})).Key}))}async createSignedUrl(e,t,r){var n=this;return n.handleOperation(async()=>{let a=n._getFinalPath(e),i=await ii(n.fetch,`${n.url}/object/sign/${a}`,at({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:n.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{signedUrl:encodeURI(`${n.url}${i.signedURL}${o}`)}})}async createSignedUrls(e,t,r){var n=this;return n.handleOperation(async()=>{const a=await ii(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:t,paths:e},{headers:n.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return a.map(o=>at(at({},o),{},{signedUrl:o.signedURL?encodeURI(`${n.url}${o.signedURL}${i}`):null}))})}download(e,t){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),a=n?`?${n}`:"",i=this._getFinalPath(e),o=()=>rm(this.fetch,`${this.url}/${r}/${i}${a}`,{headers:this.headers,noResolveJson:!0});return new KY(o,this.shouldThrowOnError)}async info(e){var t=this;const r=t._getFinalPath(e);return t.handleOperation(async()=>o1(await rm(t.fetch,`${t.url}/object/info/${r}`,{headers:t.headers})))}async exists(e){var t=this;const r=t._getFinalPath(e);try{return await HY(t.fetch,`${t.url}/object/${r}`,{headers:t.headers}),{data:!0,error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Ix(n)&&n instanceof $3){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}}getPublicUrl(e,t){const r=this._getFinalPath(e),n=[],a=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";a!==""&&n.push(a);const i=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});o!==""&&n.push(o);let l=n.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${r}${l}`)}}}async remove(e){var t=this;return t.handleOperation(async()=>await AC(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}))}async list(e,t,r){var n=this;return n.handleOperation(async()=>{const a=at(at(at({},GY),t),{},{prefix:e||""});return await ii(n.fetch,`${n.url}/object/list/${n.bucketId}`,a,{headers:n.headers},r)})}async listV2(e,t){var r=this;return r.handleOperation(async()=>{const n=at({},e);return await ii(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,n,{headers:r.headers},t)})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const XY="2.93.3",cp={"X-Client-Info":`storage-js/${XY}`};var ZY=class extends Yd{constructor(e,t={},r,n){const a=new URL(e);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase."));const i=a.href.replace(/\/$/,""),o=at(at({},cp),t);super(i,o,r,"storage")}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const r=t.listBucketOptionsToQueryString(e);return await rm(t.fetch,`${t.url}/bucket${r}`,{headers:t.headers})})}async getBucket(e){var t=this;return t.handleOperation(async()=>await rm(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}))}async createBucket(e,t={public:!1}){var r=this;return r.handleOperation(async()=>await ii(r.fetch,`${r.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}))}async updateBucket(e,t){var r=this;return r.handleOperation(async()=>await l1(r.fetch,`${r.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}))}async emptyBucket(e){var t=this;return t.handleOperation(async()=>await ii(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await AC(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},QY=class extends Yd{constructor(e,t={},r){const n=e.replace(/\/$/,""),a=at(at({},cp),t);super(n,a,r,"storage")}async createBucket(e){var t=this;return t.handleOperation(async()=>await ii(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}))}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const n=r.toString(),a=n?`${t.url}/bucket?${n}`:`${t.url}/bucket`;return await rm(t.fetch,a,{headers:t.headers})})}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await AC(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}from(e){var t=this;if(!LY(e))throw new $x("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new $Y({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(a,i){const o=a[i];return typeof o!="function"?o:async(...l)=>{try{return{data:await o.apply(a,l),error:null}}catch(c){if(n)throw c;return{data:null,error:c}}}}})}},JY=class extends Yd{constructor(e,t={},r){const n=e.replace(/\/$/,""),a=at(at({},cp),{},{"Content-Type":"application/json"},t);super(n,a,r,"vectors")}async createIndex(e){var t=this;return t.handleOperation(async()=>await ga.post(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{})}async getIndex(e,t){var r=this;return r.handleOperation(async()=>await ga.post(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers}))}async listIndexes(e){var t=this;return t.handleOperation(async()=>await ga.post(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}))}async deleteIndex(e,t){var r=this;return r.handleOperation(async()=>await ga.post(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers})||{})}},eX=class extends Yd{constructor(e,t={},r){const n=e.replace(/\/$/,""),a=at(at({},cp),{},{"Content-Type":"application/json"},t);super(n,a,r,"vectors")}async putVectors(e){var t=this;if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return t.handleOperation(async()=>await ga.post(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{})}async getVectors(e){var t=this;return t.handleOperation(async()=>await ga.post(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}))}async listVectors(e){var t=this;if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return t.handleOperation(async()=>await ga.post(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}))}async queryVectors(e){var t=this;return t.handleOperation(async()=>await ga.post(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}))}async deleteVectors(e){var t=this;if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return t.handleOperation(async()=>await ga.post(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{})}},tX=class extends Yd{constructor(e,t={},r){const n=e.replace(/\/$/,""),a=at(at({},cp),{},{"Content-Type":"application/json"},t);super(n,a,r,"vectors")}async createBucket(e){var t=this;return t.handleOperation(async()=>await ga.post(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}async getBucket(e){var t=this;return t.handleOperation(async()=>await ga.post(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}))}async listBuckets(e={}){var t=this;return t.handleOperation(async()=>await ga.post(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await ga.post(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}},rX=class extends tX{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new nX(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,r=this;return t().call(r,e)}async getBucket(e){var t=()=>super.getBucket,r=this;return t().call(r,e)}async listBuckets(e={}){var t=()=>super.listBuckets,r=this;return t().call(r,e)}async deleteBucket(e){var t=()=>super.deleteBucket,r=this;return t().call(r,e)}},nX=class extends JY{constructor(e,t,r,n){super(e,t,n),this.vectorBucketName=r}async createIndex(e){var t=()=>super.createIndex,r=this;return t().call(r,at(at({},e),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,r=this;return t().call(r,at(at({},e),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,r=this;return t().call(r,r.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,r=this;return t().call(r,r.vectorBucketName,e)}index(e){return new aX(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},aX=class extends eX{constructor(e,t,r,n,a){super(e,t,a),this.vectorBucketName=r,this.indexName=n}async putVectors(e){var t=()=>super.putVectors,r=this;return t().call(r,at(at({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(e){var t=()=>super.getVectors,r=this;return t().call(r,at(at({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,r=this;return t().call(r,at(at({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,r=this;return t().call(r,at(at({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,r=this;return t().call(r,at(at({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},iX=class extends ZY{constructor(e,t={},r,n){super(e,t,r,n)}from(e){return new YY(this.url,this.headers,e,this.fetch)}get vectors(){return new rX(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new QY(this.url+"/iceberg",this.headers,this.fetch)}};const L3="2.93.3",Uc=30*1e3,c1=3,Fb=c1*Uc,sX="http://localhost:9999",oX="supabase.auth.token",lX={"X-Client-Info":`gotrue-js/${L3}`},u1="X-Supabase-Api-Version",B3={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},cX=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,uX=10*60*1e3;class nm extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function qe(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class dX extends nm{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function fX(e){return qe(e)&&e.name==="AuthApiError"}class Sl extends nm{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Bs extends nm{constructor(t,r,n,a){super(t,n,a),this.name=r,this.status=n}}class ca extends Bs{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function zb(e){return qe(e)&&e.name==="AuthSessionMissingError"}class _c extends Bs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Gp extends Bs{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Yp extends Bs{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function hX(e){return qe(e)&&e.name==="AuthImplicitGrantRedirectError"}class _E extends Bs{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class mX extends Bs{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class d1 extends Bs{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Ub(e){return qe(e)&&e.name==="AuthRetryableFetchError"}class SE extends Bs{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class f1 extends Bs{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Nv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),CE=` 	
\r=`.split(""),pX=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<CE.length;t+=1)e[CE[t].charCodeAt(0)]=-2;for(let t=0;t<Nv.length;t+=1)e[Nv[t].charCodeAt(0)]=t;return e})();function NE(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Nv[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Nv[n]),t.queuedBits-=6}}function F3(e,t,r){const n=pX[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function kE(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=o=>{yX(o,n,r)};for(let o=0;o<e.length;o+=1)F3(e.charCodeAt(o),a,i);return t.join("")}function gX(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function vX(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}gX(n,t)}}function yX(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function ju(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)F3(e.charCodeAt(a),r,n);return new Uint8Array(t)}function xX(e){const t=[];return vX(e,r=>t.push(r)),new Uint8Array(t)}function Al(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};return e.forEach(a=>NE(a,r,n)),NE(null,r,n),t.join("")}function bX(e){return Math.round(Date.now()/1e3)+e}function wX(){return Symbol("auth-callback")}const xn=()=>typeof window<"u"&&typeof document<"u",cl={tested:!1,writable:!1},z3=()=>{if(!xn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(cl.tested)return cl.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),cl.tested=!0,cl.writable=!0}catch{cl.tested=!0,cl.writable=!1}return cl.writable};function jX(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return r.searchParams.forEach((n,a)=>{t[a]=n}),t}const U3=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),_X=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Vc=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},ul=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},gn=async(e,t)=>{await e.removeItem(t)};class Dx{constructor(){this.promise=new Dx.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Dx.promiseConstructor=Promise;function Xp(e){const t=e.split(".");if(t.length!==3)throw new f1("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!cX.test(t[n]))throw new f1("JWT not in base64url format");return{header:JSON.parse(kE(t[0])),payload:JSON.parse(kE(t[1])),signature:ju(t[2]),raw:{header:t[0],payload:t[1]}}}async function SX(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function CX(e,t){return new Promise((n,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){a(o);return}}})()})}function NX(e){return("0"+e.toString(16)).substr(-2)}function kX(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let a="";for(let i=0;i<56;i++)a+=r.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(t),Array.from(t,NX).join("")}async function PX(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(n);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function EX(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await PX(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Sc(e,t,r=!1){const n=kX();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await Vc(e,`${t}-code-verifier`,a);const i=await EX(n);return[i,n===i?"plain":"s256"]}const AX=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function OX(e){const t=e.headers.get(u1);if(!t||!t.match(AX))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function TX(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function RX(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const MX=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Cc(e){if(!MX.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Vb(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function $X(e,t){return new Proxy(e,{get:(r,n,a)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,a)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,a)}})}function PE(e){return JSON.parse(JSON.stringify(e))}const vl=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),IX=[502,503,504];async function EE(e){var t;if(!_X(e))throw new d1(vl(e),0);if(IX.includes(e.status))throw new d1(vl(e),e.status);let r;try{r=await e.json()}catch(i){throw new Sl(vl(i),i)}let n;const a=OX(e);if(a&&a.getTime()>=B3["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new SE(vl(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new ca}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new SE(vl(r),e.status,r.weak_password.reasons);throw new dX(vl(r),e.status||500,n)}const DX=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))};async function tt(e,t,r,n){var a;const i=Object.assign({},n==null?void 0:n.headers);i[u1]||(i[u1]=B3["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await LX(e,t,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function LX(e,t,r,n,a,i){const o=DX(t,n,a,i);let l;try{l=await e(r,Object.assign({},o))}catch(c){throw console.error(c),new d1(vl(c),0)}if(l.ok||await EE(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await EE(c)}}function ti(e){var t;let r=null;zX(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=bX(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function AE(e){const t=ti(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function so(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function BX(e){return{data:e,error:null}}function FX(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i}=e,o=Gd(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function OE(e){return e}function zX(e){return e.access_token&&e.refresh_token&&e.expires_in}const Wb=["global","local","others"];class UX{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=U3(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=Wb[0]){if(Wb.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Wb.join(", ")}`);try{return await tt(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(qe(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await tt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:so})}catch(n){if(qe(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=Gd(t,["options"]),a=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),await tt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:FX,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(qe(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await tt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:so})}catch(r){if(qe(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,a,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await tt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:OE});if(d.error)throw d.error;const f=await d.json(),h=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(y=>{const g=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),p=JSON.parse(y.split(";")[1].split("=")[1]);u[`${p}Page`]=g}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(qe(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Cc(t);try{return await tt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:so})}catch(r){if(qe(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Cc(t);try{return await tt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:so})}catch(n){if(qe(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Cc(t);try{return await tt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:so})}catch(n){if(qe(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Cc(t.userId);try{const{data:r,error:n}=await tt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:n}}catch(r){if(qe(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Cc(t.userId),Cc(t.id);try{return{data:await tt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(qe(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,a,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await tt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:OE});if(d.error)throw d.error;const f=await d.json(),h=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(y=>{const g=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),p=JSON.parse(y.split(";")[1].split("=")[1]);u[`${p}Page`]=g}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(qe(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await tt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(qe(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await tt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(qe(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await tt(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(qe(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await tt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(qe(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await tt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(qe(r))return{data:null,error:r};throw r}}}function TE(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Nc={debug:!!(globalThis&&z3()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class V3 extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class VX extends V3{}async function WX(e,t,r){Nc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Nc.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){Nc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{Nc.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw Nc.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new VX(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Nc.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function HX(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function W3(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function qX(e){return parseInt(e,16)}function KX(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function GX(e){var t;const{chainId:r,domain:n,expirationTime:a,issuedAt:i=new Date,nonce:o,notBefore:l,requestId:c,resources:u,scheme:d,uri:f,version:h}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const m=W3(e.address),y=d?`${d}://${n}`:n,g=e.statement?`${e.statement}
`:"",p=`${y} wants you to sign in with your Ethereum account:
${m}

${g}`;let v=`URI: ${f}
Version: ${h}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(a&&(v+=`
Expiration Time: ${a.toISOString()}`),l&&(v+=`
Not Before: ${l.toISOString()}`),c&&(v+=`
Request ID: ${c}`),u){let x=`
Resources:`;for(const b of u){if(!b||typeof b!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${b}`);x+=`
- ${b}`}v+=x}return`${p}
${v}`}class qr extends Error{constructor({message:t,code:r,cause:n,name:a}){var i;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=a??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class kv extends qr{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function YX({error:e,options:t}){var r,n,a;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new qr({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new qr({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new qr({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((a=i.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new qr({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new qr({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new qr({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new qr({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new qr({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(H3(o)){if(i.rp.id!==o)return new qr({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new qr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new qr({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new qr({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new qr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function XX({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new qr({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new qr({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(H3(n)){if(r.rpId!==n)return new qr({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new qr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new qr({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new qr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class ZX{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const QX=new ZX;function JX(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,a=Gd(e,["challenge","user","excludeCredentials"]),i=ju(t).buffer,o=Object.assign(Object.assign({},r),{id:ju(r.id).buffer}),l=Object.assign(Object.assign({},a),{challenge:i,user:o});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const u=n[c];l.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:ju(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function eZ(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=Gd(e,["challenge","allowCredentials"]),a=ju(t).buffer,i=Object.assign(Object.assign({},n),{challenge:a});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const l=r[o];i.allowCredentials[o]=Object.assign(Object.assign({},l),{id:ju(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function tZ(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:Al(new Uint8Array(e.response.attestationObject)),clientDataJSON:Al(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function rZ(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Al(new Uint8Array(a.authenticatorData)),clientDataJSON:Al(new Uint8Array(a.clientDataJSON)),signature:Al(new Uint8Array(a.signature)),userHandle:a.userHandle?Al(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function H3(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function RE(){var e,t;return!!(xn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function nZ(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new kv("Browser returned unexpected credential type",t)}:{data:null,error:new kv("Empty credential response",t)}}catch(t){return{data:null,error:YX({error:t,options:e})}}}async function aZ(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new kv("Browser returned unexpected credential type",t)}:{data:null,error:new kv("Empty credential response",t)}}catch(t){return{data:null,error:XX({error:t,options:e})}}}const iZ={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},sZ={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Pv(...e){const t=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),r=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),n={};for(const a of e)if(a)for(const i in a){const o=a[i];if(o!==void 0)if(Array.isArray(o))n[i]=o;else if(r(o))n[i]=o;else if(t(o)){const l=n[i];t(l)?n[i]=Pv(l,o):n[i]=Pv(o)}else n[i]=o}return n}function oZ(e,t){return Pv(iZ,e,t||{})}function lZ(e,t){return Pv(sZ,e,t||{})}class cZ{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:a},i){var o;try{const{data:l,error:c}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!l)return{data:null,error:c};const u=a??QX.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:d}=l.webauthn.credential_options.publicKey;if(!d.name){const f=n;if(f)d.name=`${d.id}:${f}`;else{const m=(await this.client.getUser()).data.user,y=((o=m==null?void 0:m.user_metadata)===null||o===void 0?void 0:o.name)||(m==null?void 0:m.email)||(m==null?void 0:m.id)||"User";d.name=`${d.id}:${y}`}}d.displayName||(d.displayName=d.name)}switch(l.webauthn.type){case"create":{const d=oZ(l.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:f,error:h}=await nZ({publicKey:d,signal:u});return f?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:f}},error:null}:{data:null,error:h}}case"request":{const d=lZ(l.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:f,error:h}=await aZ(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:d,signal:u}));return f?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:f}},error:null}:{data:null,error:h}}}}catch(l){return qe(l)?{data:null,error:l}:{data:null,error:new Sl("Unexpected error in challenge",l)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!r)return{data:null,error:new nm("rpId is required for WebAuthn authentication")};try{if(!RE())return{data:null,error:new Sl("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:a},{request:i});if(!o)return{data:null,error:l};const{webauthn:c}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:n,credential_response:c.credential_response}})}catch(o){return qe(o)?{data:null,error:o}:{data:null,error:new Sl("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!r)return{data:null,error:new nm("rpId is required for WebAuthn registration")};try{if(!RE())return{data:null,error:new Sl("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(d=>{var f;return(f=d.data)===null||f===void 0?void 0:f.all.find(h=>h.factor_type==="webauthn"&&h.friendly_name===t&&h.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:l};const{data:c,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:a},{create:i});return c?this._verify({factorId:o.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(o){return qe(o)?{data:null,error:o}:{data:null,error:new Sl("Unexpected error in register",o)}}}}HX();const uZ={url:sX,storageKey:oX,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:lX,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function ME(e,t,r){return await r()}const kc={};class am{get jwks(){var t,r;return(r=(t=kc[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){kc[this.storageKey]=Object.assign(Object.assign({},kc[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=kc[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){kc[this.storageKey]=Object.assign(Object.assign({},kc[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},uZ),t);if(this.storageKey=i.storageKey,this.instanceID=(r=am.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,am.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&xn()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new UX({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=U3(i.fetch),this.lock=i.lock||ME,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,this.lockAcquireTimeout=i.lockAcquireTimeout,i.lock?this.lock=i.lock:this.persistSession&&xn()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=WX:this.lock=ME,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new cZ(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:z3()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=TE(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=TE(this.memoryStorage)),xn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o);try{await this._notifyAllSubscribers(o.data.event,o.data.session,!1)}catch(l){this._debug("#broadcastChannel","error",l)}})}this.initialize().catch(o=>{this._debug("#initialize()","error",o)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${L3}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(xn()&&(r=jX(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),xn()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),hX(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return{error:i}}const{session:o,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return qe(r)?this._returnResult({error:r}):this._returnResult({error:new Sl("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,a;try{const i=await tt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:ti}),{data:o,error:l}=i;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(qe(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var r,n,a;try{let i;if("email"in t){const{email:d,password:f,options:h}=t;let m=null,y=null;this.flowType==="pkce"&&([m,y]=await Sc(this.storage,this.storageKey)),i=await tt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:d,password:f,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:m,code_challenge_method:y},xform:ti})}else if("phone"in t){const{phone:d,password:f,options:h}=t;i=await tt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(a=h==null?void 0:h.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:ti})}else throw new Gp("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return await gn(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:l});const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(await gn(this.storage,`${this.storageKey}-code-verifier`),qe(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:l}=t;r=await tt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:AE})}else if("phone"in t){const{phone:i,password:o,options:l}=t;r=await tt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:AE})}else throw new Gp("You must provide either an email or phone number and a password");const{data:n,error:a}=r;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!n||!n.session||!n.user){const i=new _c;return this._returnResult({data:{user:null,session:null},error:i})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(r){if(qe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,a,i,o,l,c,u,d,f,h;let m,y;if("message"in t)m=t.message,y=t.signature;else{const{chain:g,wallet:p,statement:v,options:x}=t;let b;if(xn())if(typeof p=="object")b=p;else{const N=window;if("ethereum"in N&&typeof N.ethereum=="object"&&"request"in N.ethereum&&typeof N.ethereum.request=="function")b=N.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof p!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=p}const _=new URL((r=x==null?void 0:x.url)!==null&&r!==void 0?r:window.location.href),j=await b.request({method:"eth_requestAccounts"}).then(N=>N).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!j||j.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const S=W3(j[0]);let C=(n=x==null?void 0:x.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!C){const N=await b.request({method:"eth_chainId"});C=qX(N)}const k={domain:_.host,address:S,statement:v,uri:_.href,version:"1",chainId:C,nonce:(a=x==null?void 0:x.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(o=(i=x==null?void 0:x.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=x==null?void 0:x.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=x==null?void 0:x.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=x==null?void 0:x.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=x==null?void 0:x.signInWithEthereum)===null||d===void 0?void 0:d.resources};m=GX(k),y=await b.request({method:"personal_sign",params:[KX(m),S]})}try{const{data:g,error:p}=await tt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:y},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(h=t.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:ti});if(p)throw p;if(!g||!g.session||!g.user){const v=new _c;return this._returnResult({data:{user:null,session:null},error:v})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:Object.assign({},g),error:p})}catch(g){if(qe(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async signInWithSolana(t){var r,n,a,i,o,l,c,u,d,f,h,m;let y,g;if("message"in t)y=t.message,g=t.signature;else{const{chain:p,wallet:v,statement:x,options:b}=t;let _;if(xn())if(typeof v=="object")_=v;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))_=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=v}const j=new URL((r=b==null?void 0:b.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in _&&_.signIn){const S=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),x?{statement:x}:null));let C;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")C=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)C=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in C&&"signature"in C&&(typeof C.signedMessage=="string"||C.signedMessage instanceof Uint8Array)&&C.signature instanceof Uint8Array)y=typeof C.signedMessage=="string"?C.signedMessage:new TextDecoder().decode(C.signedMessage),g=C.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${j.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(a=(n=b==null?void 0:b.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=b==null?void 0:b.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((u=b==null?void 0:b.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((f=(d=b==null?void 0:b.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...b.signInWithSolana.resources.map(C=>`- ${C}`)]:[]].join(`
`);const S=await _.signMessage(new TextEncoder().encode(y),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=S}}try{const{data:p,error:v}=await tt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:Al(g)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:ti});if(v)throw v;if(!p||!p.session||!p.user){const x=new _c;return this._returnResult({data:{user:null,session:null},error:x})}return p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),this._returnResult({data:Object.assign({},p),error:v})}catch(p){if(qe(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}}async _exchangeCodeForSession(t){const r=await ul(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(r??"").split("/");try{if(!n&&this.flowType==="pkce")throw new mX;const{data:i,error:o}=await tt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:ti});if(await gn(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const l=new _c;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:o})}catch(i){if(await gn(this.storage,`${this.storageKey}-code-verifier`),qe(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:a,access_token:i,nonce:o}=t,l=await tt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:ti}),{data:c,error:u}=l;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){const d=new _c;return this._returnResult({data:{user:null,session:null},error:d})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(r){if(qe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,a,i,o;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Sc(this.storage,this.storageKey));const{error:f}=await tt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await tt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d})}throw new Gp("You must provide either an email or phone number.")}catch(l){if(await gn(this.storage,`${this.storageKey}-code-verifier`),qe(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(t){var r,n;try{let a,i;"options"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await tt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:ti});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(a){if(qe(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(t){var r,n,a,i,o;try{let l=null,c=null;this.flowType==="pkce"&&([l,c]=await Sc(this.storage,this.storageKey));const u=await tt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:BX});return!((i=u.data)===null||i===void 0)&&i.url&&xn()&&!(!((o=t.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(l){if(await gn(this.storage,`${this.storageKey}-code-verifier`),qe(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new ca;const{error:a}=await tt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(t){if(qe(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:a,options:i}=t,{error:o}=await tt(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in t){const{phone:n,type:a,options:i}=t,{data:o,error:l}=await tt(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l})}throw new Gp("You must provide either an email or phone number and a type")}catch(r){if(qe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await ul(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Fb:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await ul(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=Vb()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};t.user=$X(t.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await tt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:so}):await this._useSession(async r=>{var n,a,i;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ca}:await tt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:so})})}catch(r){if(qe(r))return zb(r)&&(await this._removeSession(),await gn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:a,error:i}=n;if(i)throw i;if(!a.session)throw new ca;const o=a.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Sc(this.storage,this.storageKey));const{data:u,error:d}=await tt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:so});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(n){if(await gn(this.storage,`${this.storageKey}-code-verifier`),qe(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new ca;const r=Date.now()/1e3;let n=r,a=!0,i=null;const{payload:o}=Xp(t.access_token);if(o.exp&&(n=o.exp,a=n<=r),a){const{data:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(qe(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new ca;const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(qe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!xn())throw new Yp("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Yp(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new _E("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Yp("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new _E("No code detected.");const{data:x,error:b}=await this._exchangeCodeForSession(t.code);if(b)throw b;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!o||!u)throw new Yp("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(l);let h=d+f;c&&(h=parseInt(c));const m=h-d;m*1e3<=Uc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${f}s`);const y=h-f;d-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,h,d):d-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,h,d);const{data:g,error:p}=await this._getUser(i);if(p)throw p;const v={provider_token:n,provider_refresh_token:a,access_token:i,expires_in:f,expires_at:h,refresh_token:o,token_type:u,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:v,redirectType:t.type},error:null})}catch(n){if(qe(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await ul(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i&&!zb(i))return this._returnResult({error:i});const o=(n=a.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(fX(l)&&(l.status===404||l.status===401||l.status===403)||zb(l)))return this._returnResult({error:l})}return t!=="others"&&(await this._removeSession(),await gn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=wX(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,a;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await Sc(this.storage,this.storageKey,!0));try{return await tt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(await gn(this.storage,`${this.storageKey}-code-verifier`),qe(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(qe(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:a}=await this._useSession(async i=>{var o,l,c,u,d;const{data:f,error:h}=i;if(h)throw h;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await tt(this.fetch,"GET",m,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(a)throw a;return xn()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(qe(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:a,data:{session:i}}=r;if(a)throw a;const{options:o,provider:l,token:c,access_token:u,nonce:d}=t,f=await tt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:c,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:ti}),{data:h,error:m}=f;return m?this._returnResult({data:{user:null,session:null},error:m}):!h||!h.session||!h.user?this._returnResult({data:{user:null,session:null},error:new _c}):(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("USER_UPDATED",h.session)),this._returnResult({data:h,error:m}))}catch(a){if(await gn(this.storage,`${this.storageKey}-code-verifier`),qe(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:o}=r;if(o)throw o;return await tt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(qe(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await CX(async a=>(a>0&&await SX(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await tt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:ti})),(a,i)=>{const o=200*Math.pow(2,a);return i&&Ub(i)&&Date.now()+o-n<Uc})}catch(n){if(this._debug(r,"error",n),qe(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),xn()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await ul(this.storage,this.storageKey);if(a&&this.userStorage){let o=await ul(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:a.user},await Vc(this.userStorage,this.storageKey+"-user",o)),a.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:Vb()}else if(a&&!a.user&&!a.user){const o=await ul(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(a.user=o.user,await gn(this.storage,this.storageKey+"-user"),await Vc(this.storage,this.storageKey,a)):a.user=Vb()}if(this._debug(n,"session from storage",a),!this._isValidSession(a)){this._debug(n,"session is not valid"),a!==null&&await this._removeSession();return}const i=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Fb;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Fb}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:o}=await this._callRefreshToken(a.refresh_token);o&&(console.error(o),Ub(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(a.access_token);!l&&(o!=null&&o.user)?(a.user=o.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(n,"error",a),console.error(a);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new ca;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Dx;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new ca;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(a,"error",i),qe(i)){const o={data:null,error:i};return Ub(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,r,n=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await gn(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Vc(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const i=PE(a);await Vc(this.storage,this.storageKey,i)}else{const a=PE(r);await Vc(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await gn(this.storage,this.storageKey),await gn(this.storage,this.storageKey+"-code-verifier"),await gn(this.storage,this.storageKey+"-user"),this.userStorage&&await gn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&xn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Uc);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-t)/Uc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Uc}ms, refresh threshold is ${c1} ticks`),a<=c1&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof V3)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!xn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(t){this._debug("#visibilityChangedCallback","error",t)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const a=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await Sc(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);a.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?this._returnResult({data:null,error:i}):await tt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(qe(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:o}=r;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:u}=await tt(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&c.type==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(r){if(qe(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?tZ(t.webauthn.credential_response):rZ(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:c}=await tt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))})}catch(r){if(qe(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=await tt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:JX(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:eZ(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(qe(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const a={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])a.all.push(i),i.status==="verified"&&a[i.factor_type].push(i);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(t){var r,n,a,i;if(t)try{const{payload:m}=Xp(t);let y=null;m.aal&&(y=m.aal);let g=y;const{data:{user:p},error:v}=await this.getUser(t);if(v)return this._returnResult({data:null,error:v});((n=(r=p==null?void 0:p.factors)===null||r===void 0?void 0:r.filter(_=>_.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(g="aal2");const b=m.amr||[];return{data:{currentLevel:y,nextLevel:g,currentAuthenticationMethods:b},error:null}}catch(m){if(qe(m))return this._returnResult({data:null,error:m});throw m}const{data:{session:o},error:l}=await this.getSession();if(l)return this._returnResult({data:null,error:l});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=Xp(o.access_token);let u=null;c.aal&&(u=c.aal);let d=u;((i=(a=o.user.factors)===null||a===void 0?void 0:a.filter(m=>m.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(d="aal2");const h=c.amr||[];return{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:h},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;return a?this._returnResult({data:null,error:a}):n?await tt(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new ca})})}catch(r){if(qe(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:a},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new ca});const o=await tt(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&xn()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(qe(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:a},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new ca});const o=await tt(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&xn()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(qe(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await tt(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new ca})})}catch(t){if(qe(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;return a?this._returnResult({data:null,error:a}):n?(await tt(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new ca})})}catch(r){if(qe(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const a=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+uX>a)return n;const{data:i,error:o}=await tt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,n=i.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:m,error:y}=await this.getSession();if(y||!m.session)return this._returnResult({data:null,error:y});n=m.session.access_token}const{header:a,payload:i,signature:o,raw:{header:l,payload:c}}=Xp(n);r!=null&&r.allowExpired||TX(i.exp);const u=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:m}=await this.getUser(n);if(m)throw m;return{data:{claims:i,header:a,signature:o},error:null}}const d=RX(a.alg),f=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,o,xX(`${l}.${c}`)))throw new f1("Invalid JWT signature");return{data:{claims:i,header:a,signature:o},error:null}}catch(n){if(qe(n))return this._returnResult({data:null,error:n});throw n}}}am.nextInstanceID={};const dZ=am,fZ="2.93.3";let Xf="";typeof Deno<"u"?Xf="deno":typeof document<"u"?Xf="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Xf="react-native":Xf="node";const hZ={"X-Client-Info":`supabase-js-${Xf}/${fZ}`},mZ={headers:hZ},pZ={schema:"public"},gZ={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},vZ={};function im(e){"@babel/helpers - typeof";return im=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},im(e)}function yZ(e,t){if(im(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(im(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xZ(e){var t=yZ(e,"string");return im(t)=="symbol"?t:t+""}function bZ(e,t,r){return(t=xZ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Mr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$E(Object(r),!0).forEach(function(n){bZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$E(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const wZ=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),jZ=()=>Headers,_Z=(e,t,r)=>{const n=wZ(r),a=jZ();return async(i,o)=>{var l;const c=(l=await t())!==null&&l!==void 0?l:e;let u=new a(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(i,Mr(Mr({},o),{},{headers:u}))}};function SZ(e){return e.endsWith("/")?e:e+"/"}function CZ(e,t){var r,n;const{db:a,auth:i,realtime:o,global:l}=e,{db:c,auth:u,realtime:d,global:f}=t,h={db:Mr(Mr({},c),a),auth:Mr(Mr({},u),i),realtime:Mr(Mr({},d),o),storage:{},global:Mr(Mr(Mr({},f),l),{},{headers:Mr(Mr({},(r=f==null?void 0:f.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}function NZ(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(SZ(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var kZ=class extends dZ{constructor(e){super(e)}},PZ=class{constructor(e,t,r){var n,a;this.supabaseUrl=e,this.supabaseKey=t;const i=NZ(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o=`sb-${i.hostname.split(".")[0]}-auth-token`,l={db:pZ,realtime:vZ,auth:Mr(Mr({},gZ),{},{storageKey:o}),global:mZ},c=CZ(r??{},l);if(this.storageKey=(n=c.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(a=c.global.headers)!==null&&a!==void 0?a:{},c.accessToken)this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(d,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=c.auth)!==null&&u!==void 0?u:{},this.headers,c.global.fetch)}this.fetch=_Z(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Mr({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new fY(new URL("rest/v1",i).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new iX(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new oY(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,r;if(e.accessToken)return await e.accessToken();const{data:n}=await e.auth.getSession();return(t=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:a,storageKey:i,flowType:o,lock:l,debug:c,throwOnError:u},d,f){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new kZ({url:this.authUrl.href,headers:Mr(Mr({},h),d),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:a,flowType:o,lock:l,debug:c,throwOnError:u,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(m=>m.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new EY(this.realtimeUrl.href,Mr(Mr({},e),{},{params:Mr(Mr({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const EZ=(e,t,r)=>new PZ(e,t,r);function AZ(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(t==null)return!1;const r=t.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}AZ()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const OZ="https://twkcoxagbajvopzzinor.supabase.co",TZ="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR3a2NveGFnYmFqdm9wenppbm9yIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA0ODUzNzUsImV4cCI6MjA4NjA2MTM3NX0.BWO81YHxXK0YXAzkm8jILlv4x6pEpy9A3op-tCp445k",he=EZ(OZ,TZ,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}}),q3=w.createContext(void 0);function RZ({children:e}){const[t,r]=w.useState(null),[n,a]=w.useState(!0),[i,o]=w.useState("lecteur"),[l,c]=w.useState({});w.useEffect(()=>{const{data:{subscription:p}}=he.auth.onAuthStateChange((v,x)=>{r((x==null?void 0:x.user)??null),a(!1),x!=null&&x.user&&(setTimeout(()=>u(x.user.id),0),setTimeout(()=>d(),0))});return he.auth.getSession().then(({data:{session:v}})=>{r((v==null?void 0:v.user)??null),a(!1),v!=null&&v.user&&(u(v.user.id),d())}),()=>p.unsubscribe()},[]);const u=async p=>{try{const{data:v}=await he.from("user_roles").select("role").eq("user_id",p).single();v&&o(v.role)}catch{o("lecteur")}},d=async()=>{try{const{data:p}=await he.from("tab_permissions").select("*");if(p){const v={};p.forEach(x=>{v[x.role]||(v[x.role]={}),v[x.role][x.tab_key]=x.permission}),c(v)}}catch{}},f=async(p,v)=>{const{error:x}=await he.auth.signInWithPassword({email:p,password:v});return{error:x}},h=async(p,v,x)=>{const{error:b}=await he.auth.signUp({email:p,password:v,options:{data:{display_name:x},emailRedirectTo:`${window.location.origin}/`}});return{error:b}},m=async()=>{await he.auth.signOut(),r(null)},y=i==="admin",g=p=>{if(y)return"write";const v=l[i];return v&&v[p]||"write"};return s.jsx(q3.Provider,{value:{user:t,loading:n,isAdmin:y,userRole:i,signIn:f,signUp:h,signOut:m,getTabPermission:g},children:e})}function Xn(){const e=w.useContext(q3);if(!e)throw new Error("useAuth must be used within AuthProvider");return e}const OC={selectedMethods:["revenue_multiple","ebitda_multiple"],valuationBasis:"projected",historicalYear:2024,projectedYear:2028,mixWeight:.5,averageYears:[],valuationParams:{revenue_multiple:{multiple:4},ebitda_multiple:{multiple:8},ebit_multiple:{multiple:10},dcf:{discountRate:.25,terminalGrowthRate:.03},scorecard:{baseValuation:3e6,team:.15,market:.2,product:.1,competition:-.1,marketing:0,fundingNeed:0},berkus:{soundIdea:4e5,prototype:35e4,qualityManagement:3e5,strategicRelationships:2e5,productRollout:25e4},risk_factor:{baseValuation:3e6,managementRisk:1,businessStage:0,legislation:0,manufacturing:-1,salesMarketing:1,fundingCapital:0,competition:-1,technology:1,litigation:0,international:0,reputation:1,potentialExit:1}},dilutionConfig:{...tY},exitScenarios:{conservative:{year:2030,exitMultiple:4,probability:.25},base:{year:2029,exitMultiple:6,probability:.5},ambitious:{year:2028,exitMultiple:10,probability:.25}}},h1="novaride_financial_state_v5";function MZ(){try{const e=localStorage.getItem(h1);if(e){const t=JSON.parse(e);return t.valuationConfig||(t.valuationConfig={...OC}),t.monthlyTreasuryConfig&&!t.monthlyTreasuryConfig.cogsPaymentTerms&&(t.monthlyTreasuryConfig.cogsPaymentTerms=[{delayMonths:0,percentage:100}]),t.excludeFundingFromTreasury===void 0&&(t.excludeFundingFromTreasury=!1),t.fundingRounds?t.fundingRounds=t.fundingRounds.map(r=>({...r,quarter:r.quarter||"Q1"})):t.fundingRounds=NC,t.clientRevenueConfig||(t.clientRevenueConfig={entries:[],growthRate:.15,marginRate:.5,marginB2C:.6,marginByCategory:{}}),t.simpleOpexConfig&&!t.simpleOpexConfig.strategicOpex&&(t.simpleOpexConfig.strategicOpex=[]),t}}catch{}return $Z()}function $Z(){return{products:hG,roles:mG,expenses:pG,fundingRounds:NC,scenarioSettings:{startYear:2025,durationYears:6,initialCash:5e4},scenarioConfigs:{conservative:{volumeAdjustment:-.2,priceAdjustment:0,opexAdjustment:-.1},base:{volumeAdjustment:0,priceAdjustment:0,opexAdjustment:0},ambitious:{volumeAdjustment:.3,priceAdjustment:.05,opexAdjustment:.1}},activeScenarioId:"base",revenueMode:"by-product",globalRevenueConfig:Cv,clientRevenueConfig:{entries:[],growthRate:.15,marginRate:.5,marginB2C:.6,marginByCategory:{}},opexMode:"detailed",simpleOpexConfig:{baseAmount:2e5,growthRate:.05,strategicOpex:[]},hasUnsavedChanges:!1,lastSaved:null,historicalData:[{year:2023,revenue:2e5,grossMargin:.65,payroll:15e4,externalCosts:8e4,depreciation:2e4},{year:2024,revenue:45e4,grossMargin:.68,payroll:28e4,externalCosts:12e4,depreciation:35e3}],excludeFundingFromTreasury:!1,monthlyTreasuryConfig:f3(),valuationConfig:{...OC}}}const K3=w.createContext(void 0);function IZ({children:e}){const{user:t}=Xn(),[r,n]=w.useState(MZ),[a,i]=w.useState(!1);w.useRef(null),w.useEffect(()=>{!t||a||(async()=>{try{const{data:P}=await he.from("financial_scenarios").select("state_data").eq("user_id",t.id).maybeSingle();if(P!=null&&P.state_data){const T=P.state_data;T.valuationConfig||(T.valuationConfig={...OC}),T.excludeFundingFromTreasury===void 0&&(T.excludeFundingFromTreasury=!1),T.fundingRounds?T.fundingRounds=T.fundingRounds.map(I=>({...I,quarter:I.quarter||"Q1"})):T.fundingRounds=NC,T.monthlyTreasuryConfig||(T.monthlyTreasuryConfig=f3()),T.monthlyTreasuryConfig&&!T.monthlyTreasuryConfig.cogsPaymentTerms&&(T.monthlyTreasuryConfig.cogsPaymentTerms=[{delayMonths:0,percentage:100}]),T.clientRevenueConfig||(T.clientRevenueConfig={entries:[],growthRate:.15,marginRate:.5,marginB2C:.6,marginByCategory:{}}),T.simpleOpexConfig&&!T.simpleOpexConfig.strategicOpex&&(T.simpleOpexConfig.strategicOpex=[]),n({...T,hasUnsavedChanges:!1}),localStorage.setItem(h1,JSON.stringify(T))}}catch(P){console.warn("Failed to load from cloud:",P)}finally{i(!0)}})()},[t,a]),w.useCallback(()=>{n(P=>({...P,hasUnsavedChanges:!0}))},[]);const o=w.useCallback(P=>{n(T=>({...T,products:P,hasUnsavedChanges:!0}))},[]),l=w.useCallback(P=>{n(T=>({...T,products:[...T.products,P],hasUnsavedChanges:!0}))},[]),c=w.useCallback(P=>{n(T=>({...T,products:T.products.filter(I=>I.id!==P),hasUnsavedChanges:!0}))},[]),u=w.useCallback(P=>{n(T=>({...T,roles:P,hasUnsavedChanges:!0}))},[]),d=w.useCallback(P=>{n(T=>({...T,roles:[...T.roles,P],hasUnsavedChanges:!0}))},[]),f=w.useCallback(P=>{n(T=>({...T,roles:T.roles.filter(I=>I.id!==P),hasUnsavedChanges:!0}))},[]),h=w.useCallback(P=>{n(T=>({...T,expenses:P,hasUnsavedChanges:!0}))},[]),m=w.useCallback(P=>{n(T=>({...T,expenses:[...T.expenses,P],hasUnsavedChanges:!0}))},[]),y=w.useCallback(P=>{n(T=>({...T,expenses:T.expenses.filter(I=>I.id!==P),hasUnsavedChanges:!0}))},[]),g=w.useCallback(P=>{n(T=>({...T,fundingRounds:P,hasUnsavedChanges:!0}))},[]),p=w.useCallback(P=>{n(T=>({...T,scenarioSettings:{...T.scenarioSettings,...P},hasUnsavedChanges:!0}))},[]),v=w.useCallback(P=>{n(T=>({...T,activeScenarioId:P}))},[]),x=w.useCallback((P,T)=>{n(I=>({...I,scenarioConfigs:{...I.scenarioConfigs,[P]:{...I.scenarioConfigs[P],...T}},hasUnsavedChanges:!0}))},[]),b=w.useCallback(P=>{n(T=>({...T,revenueMode:P,hasUnsavedChanges:!0}))},[]),_=w.useCallback(P=>{n(T=>({...T,globalRevenueConfig:P,hasUnsavedChanges:!0}))},[]),j=w.useCallback(P=>{n(T=>({...T,clientRevenueConfig:P,hasUnsavedChanges:!0}))},[]),S=w.useCallback(P=>{n(T=>({...T,opexMode:P,hasUnsavedChanges:!0}))},[]),C=w.useCallback(P=>{n(T=>({...T,simpleOpexConfig:{...T.simpleOpexConfig,...P},hasUnsavedChanges:!0}))},[]),k=w.useCallback(P=>{n(T=>({...T,excludeFundingFromTreasury:P,hasUnsavedChanges:!0}))},[]),N=w.useCallback(P=>{n(T=>({...T,historicalData:P,hasUnsavedChanges:!0}))},[]),A=w.useCallback(P=>{n(T=>({...T,monthlyTreasuryConfig:P,hasUnsavedChanges:!0}))},[]),O=w.useCallback(P=>{n(T=>({...T,valuationConfig:{...T.valuationConfig,...P},hasUnsavedChanges:!0}))},[]),E=w.useCallback(async()=>{try{const P={...r,hasUnsavedChanges:!1,lastSaved:new Date().toISOString()};if(localStorage.setItem(h1,JSON.stringify(P)),n(P),t){const{hasUnsavedChanges:T,...I}=P;await he.from("financial_scenarios").upsert({user_id:t.id,state_data:I},{onConflict:"user_id"})}Lr({title:"Donnes sauvegardes",description:t?"Sauvegard en local et dans le cloud.":"Sauvegard en local."})}catch{Lr({title:"Erreur de sauvegarde",variant:"destructive"})}},[r,t]),R=w.useMemo(()=>{const{products:P,roles:T,expenses:I,fundingRounds:M,scenarioSettings:D,scenarioConfigs:B,activeScenarioId:z,opexMode:Z,simpleOpexConfig:J,excludeFundingFromTreasury:se,monthlyTreasuryConfig:U}=r,{startYear:q,durationYears:G,initialCash:H}=D,fe=B[z],L=Array.from({length:G},(de,Me)=>q+Me),Y=P.reduce((de,Me)=>de+Me.devCost,0),V=L.map((de,Me)=>{if(r.revenueMode==="by-channel-global"){const Ge=Jh(r.globalRevenueConfig,de),yt=ZG(r.globalRevenueConfig,de);return{year:de,revenue:Ge,cogs:yt}}if(r.revenueMode==="by-client"){const Ge=r.clientRevenueConfig||{entries:[],growthRate:.15,marginRate:.5,marginB2C:.6,marginByCategory:{}},yt=q;let me=0,ze=0;return Ge.entries.forEach(it=>{var ht;let Dt;if(it.revenueByYear&&it.revenueByYear[de]!==void 0&&it.revenueByYear[de]!==null)Dt=it.revenueByYear[de];else{const on=it.individualGrowthRate!==null&&it.individualGrowthRate!==void 0?it.individualGrowthRate:Ge.growthRate,Yr=de-yt+1;Dt=it.baseRevenue*Math.pow(1+on,Yr)}let xt=Ge.marginRate;it.channel==="B2C"?xt=Ge.marginB2C??Ge.marginRate:it.categoryId&&((ht=Ge.marginByCategory)==null?void 0:ht[it.categoryId])!==void 0&&(xt=Ge.marginByCategory[it.categoryId]),me+=Dt,ze+=Dt*(1-xt)}),{year:de,revenue:me,cogs:ze}}let Ze=0,ft=0;return P.forEach(Ge=>{if(Ge.volumesByChannel){const yt=Math.round((Ge.volumesByChannel.B2C[de]||0)*(1+fe.volumeAdjustment)),me=Math.round((Ge.volumesByChannel.B2B[de]||0)*(1+fe.volumeAdjustment)),ze=Math.round((Ge.volumesByChannel.OEM[de]||0)*(1+fe.volumeAdjustment));Ze+=yt*Ge.priceHT*(1+fe.priceAdjustment)+me*(Ge.priceHT_B2B||Ge.priceHT)*(1+fe.priceAdjustment)+ze*(Ge.priceHT_OEM||Ge.priceHT)*(1+fe.priceAdjustment),ft+=(yt+me+ze)*Ge.unitCost}else{const yt=Math.round((Ge.volumesByYear[de]||0)*(1+fe.volumeAdjustment));Ze+=yt*Ge.priceHT*(1+fe.priceAdjustment),ft+=yt*Ge.unitCost}}),{year:de,revenue:Ze,cogs:ft}}),Q=L.map(de=>{const Me=T.filter(Ze=>Ze.startYear<=de);return{year:de,payroll:Me.reduce((Ze,ft)=>Ze+ft.annualCostLoaded,0),headcount:Me.length}}),te=L.map((de,Me)=>{let Ze=0;const ft={};if(Z==="simple"){const Ge=(J.strategicOpex||[]).reduce((yt,me)=>yt+me.amount,0);Ze=(J.baseAmount+Ge)*Math.pow(1+J.growthRate,Me)}else I.forEach(Ge=>{var ze,it;if(Ge.startYear>de)return;let yt=Ge.baseAnnualCost;const me=de-Ge.startYear;if(Ge.evolutionType==="growth_rate")yt*=Math.pow(1+(Ge.growthRate||0),me);else if(Ge.evolutionType==="linked_to_revenue")yt=(((ze=V[Me])==null?void 0:ze.revenue)||0)*(Ge.revenueRatio||0);else if(Ge.evolutionType==="step"){const Dt=(it=Ge.steps)==null?void 0:it.filter(xt=>xt.year<=de).pop();Dt&&(yt=Dt.newAnnualCost)}yt*=1+fe.opexAdjustment,Ze+=yt,ft[Ge.category]=(ft[Ge.category]||0)+yt});return{year:de,opex:Ze,byCategory:ft}}),be=L.map(de=>({year:de,capex:P.filter(Me=>Me.launchYear===de).reduce((Me,Ze)=>Me+Ze.devCost,0),depreciation:gG(P,de)})),Re=q,We=T.filter(de=>de.startYear<=Re).length,ge=T.filter(de=>de.startYear<=Re).reduce((de,Me)=>de+Me.annualCostLoaded,0),ke=M.map(de=>({...de,quarter:de.quarter||"Q1"})),F=SG(P,T,I,se?[]:ke,H,q,G,fe,Z,J),ee={},oe={},K={},ie={};V.forEach(de=>{ee[de.year]=de.revenue,oe[de.year]=de.cogs}),Q.forEach(de=>{K[de.year]=de.payroll}),te.forEach(de=>{ie[de.year]=de.opex});const ve=EG(U,{annualRevenue:ee,annualCogs:oe,annualPayroll:K,annualOpex:ie},M,H,q,G,se);return{totalDevCost:Y,revenueByYear:V,payrollByYear:Q,opexByYear:te,capexByYear:be,totalHeadcount:We,currentPayroll:ge,treasuryProjection:F,monthlyTreasuryProjection:ve}},[r]);return s.jsx(K3.Provider,{value:{state:r,computed:R,updateProducts:o,addProduct:l,removeProduct:c,updateRoles:u,addRole:d,removeRole:f,updateExpenses:h,addExpense:m,removeExpense:y,updateFundingRounds:g,updateScenarioSettings:p,setActiveScenario:v,updateScenarioConfig:x,setRevenueMode:b,updateGlobalRevenueConfig:_,updateClientRevenueConfig:j,setOpexMode:S,updateSimpleOpexConfig:C,setExcludeFundingFromTreasury:k,updateHistoricalData:N,updateMonthlyTreasuryConfig:A,updateValuationConfig:O,saveAll:E},children:e})}function rs(){const e=w.useContext(K3);if(!e)throw new Error("useFinancial must be used within FinancialProvider");return e}function TC({variant:e="full",color:t="dark",className:r}){const n=t==="light"?"text-white":"text-foreground";return s.jsx("div",{className:ue("flex items-center gap-2",r),children:s.jsxs("span",{className:ue("font-bold tracking-tight",e==="full"?"text-2xl":"text-lg",n),children:["NOVA",s.jsx("span",{className:"text-accent",children:"RIDE"})]})})}const DZ=[{items:[{to:"/accueil",label:"Accueil",icon:bH,tabKey:"home"},{to:"/",label:"Tableau de bord",icon:_H,tabKey:"tableau-de-bord"}]},{label:"Prvisionnel",items:[{to:"/product",label:"Plan Produit",icon:rc,tabKey:"product-plan"},{to:"/organisation",label:"Organisation",icon:xi,tabKey:"organisation"},{to:"/charges",label:"Charges",icon:OH,tabKey:"charges"},{to:"/scenarios",label:"Scnarios",icon:hv,tabKey:"scenarios"},{to:"/previsionnel",label:"Prvisionnel",icon:ZI,tabKey:"previsionnel"}]},{label:"Investisseur",items:[{to:"/funding",label:"Financement",icon:sH,tabKey:"funding"},{to:"/valuation",label:"Valorisation",icon:Fo,tabKey:"valuation"},{to:"/investment-summary",label:"Synthse",icon:Bo,tabKey:"investment-summary"}]},{items:[{to:"/crm",label:"CRM",icon:EH,tabKey:"crm"},{to:"/pricing",label:"Pricing",icon:oC,tabKey:"pricing"},{to:"/costflow",label:"Production et BE",icon:eD,tabKey:"costflow"},{to:"/planning-dev",label:"Planning Dev",icon:Bj,tabKey:"planning-dev"},{to:"/timetracking",label:"Suivi d'activit",icon:iC,tabKey:"timetracking"},{to:"/snapshots",label:"Sauvegardes",icon:tD,tabKey:"snapshots"}]}];function vn({children:e}){const{signOut:t,isAdmin:r,getTabPermission:n}=Xn(),a=lp(),[i,o]=w.useState(!1),l=async()=>{await t(),a("/auth")},c=DZ.map(u=>({...u,items:u.items.filter(d=>n(d.tabKey)!=="hidden")})).filter(u=>u.items.length>0);return s.jsxs("div",{className:"flex min-h-screen",children:[s.jsx("button",{className:"fixed top-4 left-4 z-50 lg:hidden p-2 bg-sidebar text-white rounded",onClick:()=>o(!i),children:i?s.jsx(_i,{className:"h-5 w-5"}):s.jsx(PH,{className:"h-5 w-5"})}),s.jsxs("aside",{className:ue("fixed inset-y-0 left-0 z-40 w-56 bg-sidebar text-sidebar-foreground flex flex-col transition-transform lg:translate-x-0",i?"translate-x-0":"-translate-x-full"),children:[s.jsxs("div",{className:"p-4 border-b border-sidebar-border",children:[s.jsx(TC,{variant:"compact",color:"light"}),s.jsx("div",{className:"text-xs text-sidebar-foreground/50 mt-1",children:"Gestion interne"})]}),s.jsxs("nav",{className:"flex-1 py-4 overflow-y-auto",children:[c.map((u,d)=>s.jsxs("div",{className:ue(d>0&&"mt-3 pt-3 border-t border-sidebar-border"),children:[u.label&&s.jsx("div",{className:"px-4 py-1 text-[10px] font-semibold uppercase tracking-wider text-sidebar-foreground/40",children:u.label}),u.items.map(f=>{const h=f.icon;return s.jsxs(cE,{to:f.to,end:!0,onClick:()=>o(!1),className:({isActive:m})=>ue("flex items-center gap-3 px-4 py-2.5 text-sm transition-colors",m?"bg-sidebar-accent text-sidebar-accent-foreground":"text-sidebar-foreground/70 hover:text-sidebar-foreground hover:bg-sidebar-accent/10"),children:[s.jsx(h,{className:"h-4 w-4"}),f.label]},f.to)})]},d)),r&&s.jsxs(cE,{to:"/permissions",onClick:()=>o(!1),className:({isActive:u})=>ue("flex items-center gap-3 px-4 py-2.5 text-sm transition-colors mt-4 border-t border-sidebar-border pt-4",u?"bg-sidebar-accent text-sidebar-accent-foreground":"text-sidebar-foreground/70 hover:text-sidebar-foreground hover:bg-sidebar-accent/10"),children:[s.jsx(lD,{className:"h-4 w-4"}),"Administration"]})]}),s.jsx("div",{className:"p-4 border-t border-sidebar-border",children:s.jsxs(ne,{variant:"ghost",size:"sm",className:"w-full justify-start text-sidebar-foreground/70 hover:text-sidebar-foreground",onClick:l,children:[s.jsx(NH,{className:"h-4 w-4 mr-2"}),"Dconnexion"]})})]}),i&&s.jsx("div",{className:"fixed inset-0 z-30 bg-black/50 lg:hidden",onClick:()=>o(!1)}),s.jsx("main",{className:"flex-1 lg:ml-56 p-6",children:e})]})}function yn({children:e,tabKey:t}){const{user:r,loading:n,getTabPermission:a}=Xn();return n?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:s.jsx(Ba,{className:"h-8 w-8 animate-spin text-primary"})}):r?t&&a(t)==="hidden"?s.jsx(_v,{to:"/accueil",replace:!0}):s.jsx(s.Fragment,{children:e}):s.jsx(_v,{to:"/auth",replace:!0})}function Fs({title:e,subtitle:t,height:r="sm"}){const n={sm:"h-24",md:"h-40",lg:"h-56"}[r];return s.jsx("div",{className:ue("relative rounded-lg overflow-hidden bg-gradient-to-r from-sidebar to-sidebar/80",n),children:s.jsxs("div",{className:"relative h-full flex flex-col justify-center px-6",children:[s.jsx("h1",{className:"text-white text-xl md:text-2xl font-bold",children:e}),t&&s.jsx("p",{className:"text-white/70 text-sm mt-1",children:t})]})})}function Xd({onSave:e,hasUnsavedChanges:t}){return s.jsxs(ne,{variant:t?"default":"outline",size:"sm",onClick:e,className:t?"animate-pulse-subtle":"",children:[s.jsx(yx,{className:"h-4 w-4 mr-1"}),t?"Sauvegarder":"Sauvegard"]})}const Kt=w.forwardRef(({className:e,...t},r)=>s.jsx("div",{className:"relative w-full overflow-auto",children:s.jsx("table",{ref:r,className:ue("w-full caption-bottom text-sm",e),...t})}));Kt.displayName="Table";const Gt=w.forwardRef(({className:e,...t},r)=>s.jsx("thead",{ref:r,className:ue("[&_tr]:border-b",e),...t}));Gt.displayName="TableHeader";const Yt=w.forwardRef(({className:e,...t},r)=>s.jsx("tbody",{ref:r,className:ue("[&_tr:last-child]:border-0",e),...t}));Yt.displayName="TableBody";const LZ=w.forwardRef(({className:e,...t},r)=>s.jsx("tfoot",{ref:r,className:ue("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));LZ.displayName="TableFooter";const _e=w.forwardRef(({className:e,...t},r)=>s.jsx("tr",{ref:r,className:ue("border-b transition-colors data-[state=selected]:bg-muted hover:bg-muted/50",e),...t}));_e.displayName="TableRow";const ce=w.forwardRef(({className:e,...t},r)=>s.jsx("th",{ref:r,className:ue("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));ce.displayName="TableHead";const W=w.forwardRef(({className:e,...t},r)=>s.jsx("td",{ref:r,className:ue("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));W.displayName="TableCell";const BZ=w.forwardRef(({className:e,...t},r)=>s.jsx("caption",{ref:r,className:ue("mt-4 text-sm text-muted-foreground",e),...t}));BZ.displayName="TableCaption";function FZ({products:e,onUpdateProduct:t,onAddProduct:r,onRemoveProduct:n}){const a=()=>{const i={id:`product-${Date.now()}`,name:"Nouveau Produit",category:"B2C",launchYear:2026,devCost:1e5,devAmortizationYears:5,unitCost:200,priceHT:500,priceTTC_B2C:600,priceHT_B2B:300,priceHT_OEM:220,vatRate:.2,coef_shop:1.8,coef_dist:1.4,coef_oem:1.5,volumesByYear:{}};r(i)};return s.jsxs(Ke,{title:"Pricing Produits",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Kt,{children:[s.jsx(Gt,{children:s.jsxs(_e,{children:[s.jsx(ce,{children:"Produit"}),s.jsx(ce,{className:"text-center",children:"Lancement"}),s.jsx(ce,{className:"text-right",children:"Prix TTC B2C"}),s.jsx(ce,{className:"text-right",children:"Prix HT B2C"}),s.jsx(ce,{className:"text-right",children:"Prix HT B2B"}),s.jsx(ce,{className:"text-right",children:"Prix HT OEM"}),s.jsx(ce,{className:"text-right",children:"Cot Unitaire"}),s.jsx(ce,{className:"text-right",children:"Marque B2C"}),s.jsx(ce,{className:"text-right",children:"Marque B2B"}),s.jsx(ce,{className:"text-right",children:"Marque OEM"}),s.jsx(ce,{className:"text-right",children:"CAPEX R&D"}),s.jsx(ce,{className:"text-center",children:"Amort. (ans)"}),s.jsx(ce,{})]})}),s.jsx(Yt,{children:e.map(i=>s.jsxs(_e,{children:[s.jsx(W,{children:s.jsx(xe,{value:i.name,onChange:o=>t({...i,name:o.target.value}),className:"h-8 w-40"})}),s.jsx(W,{className:"text-center",children:s.jsx(xe,{type:"number",value:i.launchYear,onChange:o=>t({...i,launchYear:Number(o.target.value)}),className:"h-8 w-20 text-center mx-auto"})}),s.jsx(W,{className:"text-right font-mono-numbers",children:s.jsx(xe,{type:"number",value:i.priceTTC_B2C,onChange:o=>{const l=Number(o.target.value);t({...i,priceTTC_B2C:l,priceHT:l/(1+i.vatRate)})},className:"h-8 w-24 text-right"})}),s.jsx(W,{className:"text-right font-mono-numbers",children:re(i.priceHT)}),s.jsx(W,{className:"text-right font-mono-numbers",children:s.jsx(xe,{type:"number",value:i.priceHT_B2B,onChange:o=>t({...i,priceHT_B2B:Number(o.target.value)}),className:"h-8 w-24 text-right"})}),s.jsx(W,{className:"text-right font-mono-numbers",children:s.jsx(xe,{type:"number",value:i.priceHT_OEM,onChange:o=>t({...i,priceHT_OEM:Number(o.target.value)}),className:"h-8 w-24 text-right"})}),s.jsx(W,{className:"text-right font-mono-numbers",children:s.jsx(xe,{type:"number",value:i.unitCost,onChange:o=>t({...i,unitCost:Number(o.target.value)}),className:"h-8 w-24 text-right"})}),s.jsxs(W,{className:"text-right font-mono-numbers",children:[i.priceHT>0?((1-i.unitCost/i.priceHT)*100).toFixed(1):0,"%"]}),s.jsxs(W,{className:"text-right font-mono-numbers",children:[i.priceHT_B2B>0?((1-i.unitCost/i.priceHT_B2B)*100).toFixed(1):0,"%"]}),s.jsxs(W,{className:"text-right font-mono-numbers",children:[i.priceHT_OEM>0?((1-i.unitCost/i.priceHT_OEM)*100).toFixed(1):0,"%"]}),s.jsx(W,{className:"text-right font-mono-numbers",children:s.jsx(xe,{type:"number",value:i.devCost,onChange:o=>t({...i,devCost:Number(o.target.value)}),className:"h-8 w-28 text-right"})}),s.jsx(W,{className:"text-center",children:s.jsx(xe,{type:"number",value:i.devAmortizationYears||5,min:1,onChange:o=>t({...i,devAmortizationYears:Number(o.target.value)}),className:"h-8 w-16 text-center mx-auto"})}),s.jsx(W,{children:s.jsx(ne,{size:"sm",variant:"ghost",className:"text-destructive",onClick:()=>n(i.id),children:s.jsx(nr,{className:"h-4 w-4"})})})]},i.id))})]})}),s.jsxs(ne,{variant:"outline",size:"sm",className:"mt-4",onClick:a,children:[s.jsx(qt,{className:"h-4 w-4 mr-1"})," Ajouter Produit"]})]})}var zZ=Array.isArray,la=zZ,UZ=typeof jp=="object"&&jp&&jp.Object===Object&&jp,G3=UZ,VZ=G3,WZ=typeof self=="object"&&self&&self.Object===Object&&self,HZ=VZ||WZ||Function("return this")(),ns=HZ,qZ=ns,KZ=qZ.Symbol,up=KZ,IE=up,Y3=Object.prototype,GZ=Y3.hasOwnProperty,YZ=Y3.toString,Nf=IE?IE.toStringTag:void 0;function XZ(e){var t=GZ.call(e,Nf),r=e[Nf];try{e[Nf]=void 0;var n=!0}catch{}var a=YZ.call(e);return n&&(t?e[Nf]=r:delete e[Nf]),a}var ZZ=XZ,QZ=Object.prototype,JZ=QZ.toString;function eQ(e){return JZ.call(e)}var tQ=eQ,DE=up,rQ=ZZ,nQ=tQ,aQ="[object Null]",iQ="[object Undefined]",LE=DE?DE.toStringTag:void 0;function sQ(e){return e==null?e===void 0?iQ:aQ:LE&&LE in Object(e)?rQ(e):nQ(e)}var zs=sQ;function oQ(e){return e!=null&&typeof e=="object"}var Us=oQ,lQ=zs,cQ=Us,uQ="[object Symbol]";function dQ(e){return typeof e=="symbol"||cQ(e)&&lQ(e)==uQ}var Zd=dQ,fQ=la,hQ=Zd,mQ=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,pQ=/^\w*$/;function gQ(e,t){if(fQ(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||hQ(e)?!0:pQ.test(e)||!mQ.test(e)||t!=null&&e in Object(t)}var RC=gQ;function vQ(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Qo=vQ;const Qd=Bt(Qo);var yQ=zs,xQ=Qo,bQ="[object AsyncFunction]",wQ="[object Function]",jQ="[object GeneratorFunction]",_Q="[object Proxy]";function SQ(e){if(!xQ(e))return!1;var t=yQ(e);return t==wQ||t==jQ||t==bQ||t==_Q}var MC=SQ;const Je=Bt(MC);var CQ=ns,NQ=CQ["__core-js_shared__"],kQ=NQ,Hb=kQ,BE=function(){var e=/[^.]+$/.exec(Hb&&Hb.keys&&Hb.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function PQ(e){return!!BE&&BE in e}var EQ=PQ,AQ=Function.prototype,OQ=AQ.toString;function TQ(e){if(e!=null){try{return OQ.call(e)}catch{}try{return e+""}catch{}}return""}var X3=TQ,RQ=MC,MQ=EQ,$Q=Qo,IQ=X3,DQ=/[\\^$.*+?()[\]{}|]/g,LQ=/^\[object .+?Constructor\]$/,BQ=Function.prototype,FQ=Object.prototype,zQ=BQ.toString,UQ=FQ.hasOwnProperty,VQ=RegExp("^"+zQ.call(UQ).replace(DQ,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function WQ(e){if(!$Q(e)||MQ(e))return!1;var t=RQ(e)?VQ:LQ;return t.test(IQ(e))}var HQ=WQ;function qQ(e,t){return e==null?void 0:e[t]}var KQ=qQ,GQ=HQ,YQ=KQ;function XQ(e,t){var r=YQ(e,t);return GQ(r)?r:void 0}var vc=XQ,ZQ=vc,QQ=ZQ(Object,"create"),Lx=QQ,FE=Lx;function JQ(){this.__data__=FE?FE(null):{},this.size=0}var eJ=JQ;function tJ(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var rJ=tJ,nJ=Lx,aJ="__lodash_hash_undefined__",iJ=Object.prototype,sJ=iJ.hasOwnProperty;function oJ(e){var t=this.__data__;if(nJ){var r=t[e];return r===aJ?void 0:r}return sJ.call(t,e)?t[e]:void 0}var lJ=oJ,cJ=Lx,uJ=Object.prototype,dJ=uJ.hasOwnProperty;function fJ(e){var t=this.__data__;return cJ?t[e]!==void 0:dJ.call(t,e)}var hJ=fJ,mJ=Lx,pJ="__lodash_hash_undefined__";function gJ(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=mJ&&t===void 0?pJ:t,this}var vJ=gJ,yJ=eJ,xJ=rJ,bJ=lJ,wJ=hJ,jJ=vJ;function Jd(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Jd.prototype.clear=yJ;Jd.prototype.delete=xJ;Jd.prototype.get=bJ;Jd.prototype.has=wJ;Jd.prototype.set=jJ;var _J=Jd;function SJ(){this.__data__=[],this.size=0}var CJ=SJ;function NJ(e,t){return e===t||e!==e&&t!==t}var $C=NJ,kJ=$C;function PJ(e,t){for(var r=e.length;r--;)if(kJ(e[r][0],t))return r;return-1}var Bx=PJ,EJ=Bx,AJ=Array.prototype,OJ=AJ.splice;function TJ(e){var t=this.__data__,r=EJ(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():OJ.call(t,r,1),--this.size,!0}var RJ=TJ,MJ=Bx;function $J(e){var t=this.__data__,r=MJ(t,e);return r<0?void 0:t[r][1]}var IJ=$J,DJ=Bx;function LJ(e){return DJ(this.__data__,e)>-1}var BJ=LJ,FJ=Bx;function zJ(e,t){var r=this.__data__,n=FJ(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var UJ=zJ,VJ=CJ,WJ=RJ,HJ=IJ,qJ=BJ,KJ=UJ;function ef(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ef.prototype.clear=VJ;ef.prototype.delete=WJ;ef.prototype.get=HJ;ef.prototype.has=qJ;ef.prototype.set=KJ;var Fx=ef,GJ=vc,YJ=ns,XJ=GJ(YJ,"Map"),IC=XJ,zE=_J,ZJ=Fx,QJ=IC;function JJ(){this.size=0,this.__data__={hash:new zE,map:new(QJ||ZJ),string:new zE}}var eee=JJ;function tee(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var ree=tee,nee=ree;function aee(e,t){var r=e.__data__;return nee(t)?r[typeof t=="string"?"string":"hash"]:r.map}var zx=aee,iee=zx;function see(e){var t=iee(this,e).delete(e);return this.size-=t?1:0,t}var oee=see,lee=zx;function cee(e){return lee(this,e).get(e)}var uee=cee,dee=zx;function fee(e){return dee(this,e).has(e)}var hee=fee,mee=zx;function pee(e,t){var r=mee(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var gee=pee,vee=eee,yee=oee,xee=uee,bee=hee,wee=gee;function tf(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}tf.prototype.clear=vee;tf.prototype.delete=yee;tf.prototype.get=xee;tf.prototype.has=bee;tf.prototype.set=wee;var DC=tf,Z3=DC,jee="Expected a function";function LC(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(jee);var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],i=r.cache;if(i.has(a))return i.get(a);var o=e.apply(this,n);return r.cache=i.set(a,o)||i,o};return r.cache=new(LC.Cache||Z3),r}LC.Cache=Z3;var Q3=LC;const _ee=Bt(Q3);var See=Q3,Cee=500;function Nee(e){var t=See(e,function(n){return r.size===Cee&&r.clear(),n}),r=t.cache;return t}var kee=Nee,Pee=kee,Eee=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Aee=/\\(\\)?/g,Oee=Pee(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Eee,function(r,n,a,i){t.push(a?i.replace(Aee,"$1"):n||r)}),t}),Tee=Oee;function Ree(e,t){for(var r=-1,n=e==null?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}var BC=Ree,UE=up,Mee=BC,$ee=la,Iee=Zd,Dee=1/0,VE=UE?UE.prototype:void 0,WE=VE?VE.toString:void 0;function J3(e){if(typeof e=="string")return e;if($ee(e))return Mee(e,J3)+"";if(Iee(e))return WE?WE.call(e):"";var t=e+"";return t=="0"&&1/e==-Dee?"-0":t}var Lee=J3,Bee=Lee;function Fee(e){return e==null?"":Bee(e)}var e4=Fee,zee=la,Uee=RC,Vee=Tee,Wee=e4;function Hee(e,t){return zee(e)?e:Uee(e,t)?[e]:Vee(Wee(e))}var t4=Hee,qee=Zd,Kee=1/0;function Gee(e){if(typeof e=="string"||qee(e))return e;var t=e+"";return t=="0"&&1/e==-Kee?"-0":t}var Ux=Gee,Yee=t4,Xee=Ux;function Zee(e,t){t=Yee(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[Xee(t[r++])];return r&&r==n?e:void 0}var FC=Zee,Qee=FC;function Jee(e,t,r){var n=e==null?void 0:Qee(e,t);return n===void 0?r:n}var r4=Jee;const wa=Bt(r4);function ete(e){return e==null}var tte=ete;const Qe=Bt(tte);var rte=zs,nte=la,ate=Us,ite="[object String]";function ste(e){return typeof e=="string"||!nte(e)&&ate(e)&&rte(e)==ite}var ote=ste;const ac=Bt(ote);var n4={exports:{}},Xt={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zC=Symbol.for("react.element"),UC=Symbol.for("react.portal"),Vx=Symbol.for("react.fragment"),Wx=Symbol.for("react.strict_mode"),Hx=Symbol.for("react.profiler"),qx=Symbol.for("react.provider"),Kx=Symbol.for("react.context"),lte=Symbol.for("react.server_context"),Gx=Symbol.for("react.forward_ref"),Yx=Symbol.for("react.suspense"),Xx=Symbol.for("react.suspense_list"),Zx=Symbol.for("react.memo"),Qx=Symbol.for("react.lazy"),cte=Symbol.for("react.offscreen"),a4;a4=Symbol.for("react.module.reference");function Ka(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case zC:switch(e=e.type,e){case Vx:case Hx:case Wx:case Yx:case Xx:return e;default:switch(e=e&&e.$$typeof,e){case lte:case Kx:case Gx:case Qx:case Zx:case qx:return e;default:return t}}case UC:return t}}}Xt.ContextConsumer=Kx;Xt.ContextProvider=qx;Xt.Element=zC;Xt.ForwardRef=Gx;Xt.Fragment=Vx;Xt.Lazy=Qx;Xt.Memo=Zx;Xt.Portal=UC;Xt.Profiler=Hx;Xt.StrictMode=Wx;Xt.Suspense=Yx;Xt.SuspenseList=Xx;Xt.isAsyncMode=function(){return!1};Xt.isConcurrentMode=function(){return!1};Xt.isContextConsumer=function(e){return Ka(e)===Kx};Xt.isContextProvider=function(e){return Ka(e)===qx};Xt.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===zC};Xt.isForwardRef=function(e){return Ka(e)===Gx};Xt.isFragment=function(e){return Ka(e)===Vx};Xt.isLazy=function(e){return Ka(e)===Qx};Xt.isMemo=function(e){return Ka(e)===Zx};Xt.isPortal=function(e){return Ka(e)===UC};Xt.isProfiler=function(e){return Ka(e)===Hx};Xt.isStrictMode=function(e){return Ka(e)===Wx};Xt.isSuspense=function(e){return Ka(e)===Yx};Xt.isSuspenseList=function(e){return Ka(e)===Xx};Xt.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Vx||e===Hx||e===Wx||e===Yx||e===Xx||e===cte||typeof e=="object"&&e!==null&&(e.$$typeof===Qx||e.$$typeof===Zx||e.$$typeof===qx||e.$$typeof===Kx||e.$$typeof===Gx||e.$$typeof===a4||e.getModuleId!==void 0)};Xt.typeOf=Ka;n4.exports=Xt;var ute=n4.exports,dte=zs,fte=Us,hte="[object Number]";function mte(e){return typeof e=="number"||fte(e)&&dte(e)==hte}var i4=mte;const pte=Bt(i4);var gte=i4;function vte(e){return gte(e)&&e!=+e}var yte=vte;const rf=Bt(yte);var Un=function(t){return t===0?0:t>0?1:-1},Ol=function(t){return ac(t)&&t.indexOf("%")===t.length-1},we=function(t){return pte(t)&&!rf(t)},xte=function(t){return Qe(t)},an=function(t){return we(t)||ac(t)},bte=0,Jo=function(t){var r=++bte;return"".concat(t||"").concat(r)},Vn=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!we(t)&&!ac(t))return n;var i;if(Ol(t)){var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return rf(i)&&(i=n),a&&i>r&&(i=r),i},oo=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},wte=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,n={},a=0;a<r;a++)if(!n[t[a]])n[t[a]]=!0;else return!0;return!1},Cr=function(t,r){return we(t)&&we(r)?function(n){return t+n*(r-t)}:function(){return r}};function Ev(e,t,r){return!e||!e.length?null:e.find(function(n){return n&&(typeof t=="function"?t(n):wa(n,t))===r})}var jte=function(t){if(!t||!t.length)return null;for(var r=t.length,n=0,a=0,i=0,o=0,l=1/0,c=-1/0,u=0,d=0,f=0;f<r;f++)u=t[f].cx||0,d=t[f].cy||0,n+=u,a+=d,i+=u*d,o+=u*u,l=Math.min(l,u),c=Math.max(c,u);var h=r*o!==n*n?(r*i-n*a)/(r*o-n*n):0;return{xmin:l,xmax:c,a:h,b:(a-h*n)/r}},_te=function(t,r){return we(t)&&we(r)?t-r:ac(t)&&ac(r)?t.localeCompare(r):t instanceof Date&&r instanceof Date?t.getTime()-r.getTime():String(t).localeCompare(String(r))};function _u(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function m1(e){"@babel/helpers - typeof";return m1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m1(e)}var Ste=["viewBox","children"],Cte=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],HE=["points","pathLength"],qb={svg:Ste,polygon:HE,polyline:HE},VC=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Av=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(w.isValidElement(t)&&(n=t.props),!Qd(n))return null;var a={};return Object.keys(n).forEach(function(i){VC.includes(i)&&(a[i]=r||function(o){return n[i](n,o)})}),a},Nte=function(t,r,n){return function(a){return t(r,n,a),null}},Vo=function(t,r,n){if(!Qd(t)||m1(t)!=="object")return null;var a=null;return Object.keys(t).forEach(function(i){var o=t[i];VC.includes(i)&&typeof o=="function"&&(a||(a={}),a[i]=Nte(o,r,n))}),a},kte=["children"],Pte=["children"];function qE(e,t){if(e==null)return{};var r=Ete(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Ete(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function p1(e){"@babel/helpers - typeof";return p1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p1(e)}var KE={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Ss=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},GE=null,Kb=null,WC=function e(t){if(t===GE&&Array.isArray(Kb))return Kb;var r=[];return w.Children.forEach(t,function(n){Qe(n)||(ute.isFragment(n)?r=r.concat(e(n.props.children)):r.push(n))}),Kb=r,GE=t,r};function qn(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(function(a){return Ss(a)}):n=[Ss(t)],WC(e).forEach(function(a){var i=wa(a,"type.displayName")||wa(a,"type.name");n.indexOf(i)!==-1&&r.push(a)}),r}function ha(e,t){var r=qn(e,t);return r&&r[0]}var YE=function(t){if(!t||!t.props)return!1;var r=t.props,n=r.width,a=r.height;return!(!we(n)||n<=0||!we(a)||a<=0)},Ate=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Ote=function(t){return t&&t.type&&ac(t.type)&&Ate.indexOf(t.type)>=0},s4=function(t){return t&&p1(t)==="object"&&"clipDot"in t},Tte=function(t,r,n,a){var i,o=(i=qb==null?void 0:qb[a])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!Je(t)&&(a&&o.includes(r)||Cte.includes(r))||n&&VC.includes(r)},Ue=function(t,r,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(w.isValidElement(t)&&(a=t.props),!Qd(a))return null;var i={};return Object.keys(a).forEach(function(o){var l;Tte((l=a)===null||l===void 0?void 0:l[o],o,r,n)&&(i[o]=a[o])}),i},g1=function e(t,r){if(t===r)return!0;var n=w.Children.count(t);if(n!==w.Children.count(r))return!1;if(n===0)return!0;if(n===1)return XE(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var a=0;a<n;a++){var i=t[a],o=r[a];if(Array.isArray(i)||Array.isArray(o)){if(!e(i,o))return!1}else if(!XE(i,o))return!1}return!0},XE=function(t,r){if(Qe(t)&&Qe(r))return!0;if(!Qe(t)&&!Qe(r)){var n=t.props||{},a=n.children,i=qE(n,kte),o=r.props||{},l=o.children,c=qE(o,Pte);return a&&l?_u(i,c)&&g1(a,l):!a&&!l?_u(i,c):!1}return!1},ZE=function(t,r){var n=[],a={};return WC(t).forEach(function(i,o){if(Ote(i))n.push(i);else if(i){var l=Ss(i.type),c=r[l]||{},u=c.handler,d=c.once;if(u&&(!d||!a[l])){var f=u(i,l,o);n.push(f),a[l]=!0}}}),n},Rte=function(t){var r=t&&t.type;return r&&KE[r]?KE[r]:null},Mte=function(t,r){return WC(r).indexOf(t)},$te=["children","width","height","viewBox","className","style","title","desc"];function v1(){return v1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},v1.apply(this,arguments)}function Ite(e,t){if(e==null)return{};var r=Dte(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Dte(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function y1(e){var t=e.children,r=e.width,n=e.height,a=e.viewBox,i=e.className,o=e.style,l=e.title,c=e.desc,u=Ite(e,$te),d=a||{width:r,height:n,x:0,y:0},f=ut("recharts-surface",i);return $.createElement("svg",v1({},Ue(u,!0,"svg"),{className:f,width:r,height:n,style:o,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),$.createElement("title",null,l),$.createElement("desc",null,c),t)}var Lte=["children","className"];function x1(){return x1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},x1.apply(this,arguments)}function Bte(e,t){if(e==null)return{};var r=Fte(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Fte(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var vt=$.forwardRef(function(e,t){var r=e.children,n=e.className,a=Bte(e,Lte),i=ut("recharts-layer",n);return $.createElement("g",x1({className:i},Ue(a,!0),{ref:t}),r)}),bi=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i]};function zte(e,t,r){var n=-1,a=e.length;t<0&&(t=-t>a?0:a+t),r=r>a?a:r,r<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(a);++n<a;)i[n]=e[n+t];return i}var Ute=zte,Vte=Ute;function Wte(e,t,r){var n=e.length;return r=r===void 0?n:r,!t&&r>=n?e:Vte(e,t,r)}var Hte=Wte,qte="\\ud800-\\udfff",Kte="\\u0300-\\u036f",Gte="\\ufe20-\\ufe2f",Yte="\\u20d0-\\u20ff",Xte=Kte+Gte+Yte,Zte="\\ufe0e\\ufe0f",Qte="\\u200d",Jte=RegExp("["+Qte+qte+Xte+Zte+"]");function ere(e){return Jte.test(e)}var o4=ere;function tre(e){return e.split("")}var rre=tre,l4="\\ud800-\\udfff",nre="\\u0300-\\u036f",are="\\ufe20-\\ufe2f",ire="\\u20d0-\\u20ff",sre=nre+are+ire,ore="\\ufe0e\\ufe0f",lre="["+l4+"]",b1="["+sre+"]",w1="\\ud83c[\\udffb-\\udfff]",cre="(?:"+b1+"|"+w1+")",c4="[^"+l4+"]",u4="(?:\\ud83c[\\udde6-\\uddff]){2}",d4="[\\ud800-\\udbff][\\udc00-\\udfff]",ure="\\u200d",f4=cre+"?",h4="["+ore+"]?",dre="(?:"+ure+"(?:"+[c4,u4,d4].join("|")+")"+h4+f4+")*",fre=h4+f4+dre,hre="(?:"+[c4+b1+"?",b1,u4,d4,lre].join("|")+")",mre=RegExp(w1+"(?="+w1+")|"+hre+fre,"g");function pre(e){return e.match(mre)||[]}var gre=pre,vre=rre,yre=o4,xre=gre;function bre(e){return yre(e)?xre(e):vre(e)}var wre=bre,jre=Hte,_re=o4,Sre=wre,Cre=e4;function Nre(e){return function(t){t=Cre(t);var r=_re(t)?Sre(t):void 0,n=r?r[0]:t.charAt(0),a=r?jre(r,1).join(""):t.slice(1);return n[e]()+a}}var kre=Nre,Pre=kre,Ere=Pre("toUpperCase"),Are=Ere;const Jx=Bt(Are);function dr(e){return function(){return e}}const m4=Math.cos,Ov=Math.sin,Ni=Math.sqrt,Tv=Math.PI,e0=2*Tv,j1=Math.PI,_1=2*j1,yl=1e-6,Ore=_1-yl;function p4(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function Tre(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return p4;const r=10**t;return function(n){this._+=n[0];for(let a=1,i=n.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class Rre{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?p4:Tre(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,i,o){this._append`C${+t},${+r},${+n},${+a},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,n,a,i){if(t=+t,r=+r,n=+n,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=n-t,u=a-r,d=o-t,f=l-r,h=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(h>yl)if(!(Math.abs(f*c-u*d)>yl)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let m=n-o,y=a-l,g=c*c+u*u,p=m*m+y*y,v=Math.sqrt(g),x=Math.sqrt(h),b=i*Math.tan((j1-Math.acos((g+h-p)/(2*v*x)))/2),_=b/x,j=b/v;Math.abs(_-1)>yl&&this._append`L${t+_*d},${r+_*f}`,this._append`A${i},${i},0,0,${+(f*m>d*y)},${this._x1=t+j*c},${this._y1=r+j*u}`}}arc(t,r,n,a,i,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(a),c=n*Math.sin(a),u=t+l,d=r+c,f=1^o,h=o?a-i:i-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>yl||Math.abs(this._y1-d)>yl)&&this._append`L${u},${d}`,n&&(h<0&&(h=h%_1+_1),h>Ore?this._append`A${n},${n},0,1,${f},${t-l},${r-c}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:h>yl&&this._append`A${n},${n},0,${+(h>=j1)},${f},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function HC(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new Rre(t)}function qC(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function g4(e){this._context=e}g4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function t0(e){return new g4(e)}function v4(e){return e[0]}function y4(e){return e[1]}function x4(e,t){var r=dr(!0),n=null,a=t0,i=null,o=HC(l);e=typeof e=="function"?e:e===void 0?v4:dr(e),t=typeof t=="function"?t:t===void 0?y4:dr(t);function l(c){var u,d=(c=qC(c)).length,f,h=!1,m;for(n==null&&(i=a(m=o())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===h&&((h=!h)?i.lineStart():i.lineEnd()),h&&i.point(+e(f,u,c),+t(f,u,c));if(m)return i=null,m+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:dr(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:dr(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:dr(!!c),l):r},l.curve=function(c){return arguments.length?(a=c,n!=null&&(i=a(n)),l):a},l.context=function(c){return arguments.length?(c==null?n=i=null:i=a(n=c),l):n},l}function Zp(e,t,r){var n=null,a=dr(!0),i=null,o=t0,l=null,c=HC(u);e=typeof e=="function"?e:e===void 0?v4:dr(+e),t=typeof t=="function"?t:dr(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?y4:dr(+r);function u(f){var h,m,y,g=(f=qC(f)).length,p,v=!1,x,b=new Array(g),_=new Array(g);for(i==null&&(l=o(x=c())),h=0;h<=g;++h){if(!(h<g&&a(p=f[h],h,f))===v)if(v=!v)m=h,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),y=h-1;y>=m;--y)l.point(b[y],_[y]);l.lineEnd(),l.areaEnd()}v&&(b[h]=+e(p,h,f),_[h]=+t(p,h,f),l.point(n?+n(p,h,f):b[h],r?+r(p,h,f):_[h]))}if(x)return l=null,x+""||null}function d(){return x4().defined(a).curve(o).context(i)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:dr(+f),n=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:dr(+f),u):e},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:dr(+f),u):n},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:dr(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:dr(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:dr(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(f){return arguments.length?(a=typeof f=="function"?f:dr(!!f),u):a},u.curve=function(f){return arguments.length?(o=f,i!=null&&(l=o(i)),u):o},u.context=function(f){return arguments.length?(f==null?i=l=null:l=o(i=f),u):i},u}class b4{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function Mre(e){return new b4(e,!0)}function $re(e){return new b4(e,!1)}const KC={draw(e,t){const r=Ni(t/Tv);e.moveTo(r,0),e.arc(0,0,r,0,e0)}},Ire={draw(e,t){const r=Ni(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},w4=Ni(1/3),Dre=w4*2,Lre={draw(e,t){const r=Ni(t/Dre),n=r*w4;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},Bre={draw(e,t){const r=Ni(t),n=-r/2;e.rect(n,n,r,r)}},Fre=.8908130915292852,j4=Ov(Tv/10)/Ov(7*Tv/10),zre=Ov(e0/10)*j4,Ure=-m4(e0/10)*j4,Vre={draw(e,t){const r=Ni(t*Fre),n=zre*r,a=Ure*r;e.moveTo(0,-r),e.lineTo(n,a);for(let i=1;i<5;++i){const o=e0*i/5,l=m4(o),c=Ov(o);e.lineTo(c*r,-l*r),e.lineTo(l*n-c*a,c*n+l*a)}e.closePath()}},Gb=Ni(3),Wre={draw(e,t){const r=-Ni(t/(Gb*3));e.moveTo(0,r*2),e.lineTo(-Gb*r,-r),e.lineTo(Gb*r,-r),e.closePath()}},Pa=-.5,Ea=Ni(3)/2,S1=1/Ni(12),Hre=(S1/2+1)*3,qre={draw(e,t){const r=Ni(t/Hre),n=r/2,a=r*S1,i=n,o=r*S1+r,l=-i,c=o;e.moveTo(n,a),e.lineTo(i,o),e.lineTo(l,c),e.lineTo(Pa*n-Ea*a,Ea*n+Pa*a),e.lineTo(Pa*i-Ea*o,Ea*i+Pa*o),e.lineTo(Pa*l-Ea*c,Ea*l+Pa*c),e.lineTo(Pa*n+Ea*a,Pa*a-Ea*n),e.lineTo(Pa*i+Ea*o,Pa*o-Ea*i),e.lineTo(Pa*l+Ea*c,Pa*c-Ea*l),e.closePath()}};function Kre(e,t){let r=null,n=HC(a);e=typeof e=="function"?e:dr(e||KC),t=typeof t=="function"?t:dr(t===void 0?64:+t);function a(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return a.type=function(i){return arguments.length?(e=typeof i=="function"?i:dr(i),a):e},a.size=function(i){return arguments.length?(t=typeof i=="function"?i:dr(+i),a):t},a.context=function(i){return arguments.length?(r=i??null,a):r},a}function Rv(){}function Mv(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function _4(e){this._context=e}_4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Mv(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Mv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Gre(e){return new _4(e)}function S4(e){this._context=e}S4.prototype={areaStart:Rv,areaEnd:Rv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Mv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Yre(e){return new S4(e)}function C4(e){this._context=e}C4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Mv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Xre(e){return new C4(e)}function N4(e){this._context=e}N4.prototype={areaStart:Rv,areaEnd:Rv,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Zre(e){return new N4(e)}function QE(e){return e<0?-1:1}function JE(e,t,r){var n=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(n||a<0&&-0),o=(r-e._y1)/(a||n<0&&-0),l=(i*a+o*n)/(n+a);return(QE(i)+QE(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function e2(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Yb(e,t,r){var n=e._x0,a=e._y0,i=e._x1,o=e._y1,l=(i-n)/3;e._context.bezierCurveTo(n+l,a+l*t,i-l,o-l*r,i,o)}function $v(e){this._context=e}$v.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Yb(this,this._t0,e2(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Yb(this,e2(this,r=JE(this,e,t)),r);break;default:Yb(this,this._t0,r=JE(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function k4(e){this._context=new P4(e)}(k4.prototype=Object.create($v.prototype)).point=function(e,t){$v.prototype.point.call(this,t,e)};function P4(e){this._context=e}P4.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,i){this._context.bezierCurveTo(t,e,n,r,i,a)}};function Qre(e){return new $v(e)}function Jre(e){return new k4(e)}function E4(e){this._context=e}E4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=t2(e),a=t2(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],a[0][i],n[1][i],a[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function t2(e){var t,r=e.length-1,n,a=new Array(r),i=new Array(r),o=new Array(r);for(a[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(a[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)a[t]=(o[t]-a[t+1])/i[t];for(i[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function ene(e){return new E4(e)}function r0(e,t){this._context=e,this._t=t}r0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function tne(e){return new r0(e,.5)}function rne(e){return new r0(e,0)}function nne(e){return new r0(e,1)}function Yu(e,t){if((o=e.length)>1)for(var r=1,n,a,i=e[t[0]],o,l=i.length;r<o;++r)for(a=i,i=e[t[r]],n=0;n<l;++n)i[n][1]+=i[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function C1(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function ane(e,t){return e[t]}function ine(e){const t=[];return t.key=e,t}function sne(){var e=dr([]),t=C1,r=Yu,n=ane;function a(i){var o=Array.from(e.apply(this,arguments),ine),l,c=o.length,u=-1,d;for(const f of i)for(l=0,++u;l<c;++l)(o[l][u]=[0,+n(f,o[l].key,u,i)]).data=f;for(l=0,d=qC(t(o));l<c;++l)o[d[l]].index=l;return r(o,d),o}return a.keys=function(i){return arguments.length?(e=typeof i=="function"?i:dr(Array.from(i)),a):e},a.value=function(i){return arguments.length?(n=typeof i=="function"?i:dr(+i),a):n},a.order=function(i){return arguments.length?(t=i==null?C1:typeof i=="function"?i:dr(Array.from(i)),a):t},a.offset=function(i){return arguments.length?(r=i??Yu,a):r},a}function one(e,t){if((n=e.length)>0){for(var r,n,a=0,i=e[0].length,o;a<i;++a){for(o=r=0;r<n;++r)o+=e[r][a][1]||0;if(o)for(r=0;r<n;++r)e[r][a][1]/=o}Yu(e,t)}}function lne(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,i=n.length;r<i;++r){for(var o=0,l=0;o<a;++o)l+=e[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}Yu(e,t)}}function cne(e,t){if(!(!((o=e.length)>0)||!((i=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,i,o;n<i;++n){for(var l=0,c=0,u=0;l<o;++l){for(var d=e[t[l]],f=d[n][1]||0,h=d[n-1][1]||0,m=(f-h)/2,y=0;y<l;++y){var g=e[t[y]],p=g[n][1]||0,v=g[n-1][1]||0;m+=p-v}c+=f,u+=m*f}a[n-1][1]+=a[n-1][0]=r,c&&(r-=u/c)}a[n-1][1]+=a[n-1][0]=r,Yu(e,t)}}function sm(e){"@babel/helpers - typeof";return sm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sm(e)}var une=["type","size","sizeType"];function N1(){return N1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},N1.apply(this,arguments)}function r2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function n2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?r2(Object(r),!0).forEach(function(n){dne(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):r2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dne(e,t,r){return t=fne(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fne(e){var t=hne(e,"string");return sm(t)=="symbol"?t:t+""}function hne(e,t){if(sm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(sm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mne(e,t){if(e==null)return{};var r=pne(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function pne(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var A4={symbolCircle:KC,symbolCross:Ire,symbolDiamond:Lre,symbolSquare:Bre,symbolStar:Vre,symbolTriangle:Wre,symbolWye:qre},gne=Math.PI/180,vne=function(t){var r="symbol".concat(Jx(t));return A4[r]||KC},yne=function(t,r,n){if(r==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var a=18*gne;return 1.25*t*t*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},xne=function(t,r){A4["symbol".concat(Jx(t))]=r},n0=function(t){var r=t.type,n=r===void 0?"circle":r,a=t.size,i=a===void 0?64:a,o=t.sizeType,l=o===void 0?"area":o,c=mne(t,une),u=n2(n2({},c),{},{type:n,size:i,sizeType:l}),d=function(){var p=vne(n),v=Kre().type(p).size(yne(i,l,n));return v()},f=u.className,h=u.cx,m=u.cy,y=Ue(u,!0);return h===+h&&m===+m&&i===+i?$.createElement("path",N1({},y,{className:ut("recharts-symbols",f),transform:"translate(".concat(h,", ").concat(m,")"),d:d()})):null};n0.registerSymbol=xne;function Xu(e){"@babel/helpers - typeof";return Xu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xu(e)}function k1(){return k1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},k1.apply(this,arguments)}function a2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function bne(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?a2(Object(r),!0).forEach(function(n){om(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jne(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,T4(n.key),n)}}function _ne(e,t,r){return t&&jne(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Sne(e,t,r){return t=Iv(t),Cne(e,O4()?Reflect.construct(t,r||[],Iv(e).constructor):t.apply(e,r))}function Cne(e,t){if(t&&(Xu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Nne(e)}function Nne(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(O4=function(){return!!e})()}function Iv(e){return Iv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Iv(e)}function kne(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P1(e,t)}function P1(e,t){return P1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},P1(e,t)}function om(e,t,r){return t=T4(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T4(e){var t=Pne(e,"string");return Xu(t)=="symbol"?t:t+""}function Pne(e,t){if(Xu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Xu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Aa=32,GC=function(e){function t(){return wne(this,t),Sne(this,t,arguments)}return kne(t,e),_ne(t,[{key:"renderIcon",value:function(n){var a=this.props.inactiveColor,i=Aa/2,o=Aa/6,l=Aa/3,c=n.inactive?a:n.color;if(n.type==="plainline")return $.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:i,x2:Aa,y2:i,className:"recharts-legend-icon"});if(n.type==="line")return $.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(Aa,"M").concat(2*l,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(n.type==="rect")return $.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(Aa/8,"h").concat(Aa,"v").concat(Aa*3/4,"h").concat(-Aa,"z"),className:"recharts-legend-icon"});if($.isValidElement(n.legendIcon)){var u=bne({},n);return delete u.legendIcon,$.cloneElement(n.legendIcon,u)}return $.createElement(n0,{fill:c,cx:i,cy:i,size:Aa,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,a=this.props,i=a.payload,o=a.iconSize,l=a.layout,c=a.formatter,u=a.inactiveColor,d={x:0,y:0,width:Aa,height:Aa},f={display:l==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(m,y){var g=m.formatter||c,p=ut(om(om({"recharts-legend-item":!0},"legend-item-".concat(y),!0),"inactive",m.inactive));if(m.type==="none")return null;var v=Je(m.value)?null:m.value;bi(!Je(m.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var x=m.inactive?u:m.color;return $.createElement("li",k1({className:p,style:f,key:"legend-item-".concat(y)},Vo(n.props,m,y)),$.createElement(y1,{width:o,height:o,viewBox:d,style:h},n.renderIcon(m)),$.createElement("span",{className:"recharts-legend-item-text",style:{color:x}},g?g(v,m,y):v))})}},{key:"render",value:function(){var n=this.props,a=n.payload,i=n.layout,o=n.align;if(!a||!a.length)return null;var l={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return $.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(w.PureComponent);om(GC,"displayName","Legend");om(GC,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var Ene=Fx;function Ane(){this.__data__=new Ene,this.size=0}var One=Ane;function Tne(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var Rne=Tne;function Mne(e){return this.__data__.get(e)}var $ne=Mne;function Ine(e){return this.__data__.has(e)}var Dne=Ine,Lne=Fx,Bne=IC,Fne=DC,zne=200;function Une(e,t){var r=this.__data__;if(r instanceof Lne){var n=r.__data__;if(!Bne||n.length<zne-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Fne(n)}return r.set(e,t),this.size=r.size,this}var Vne=Une,Wne=Fx,Hne=One,qne=Rne,Kne=$ne,Gne=Dne,Yne=Vne;function nf(e){var t=this.__data__=new Wne(e);this.size=t.size}nf.prototype.clear=Hne;nf.prototype.delete=qne;nf.prototype.get=Kne;nf.prototype.has=Gne;nf.prototype.set=Yne;var R4=nf,Xne="__lodash_hash_undefined__";function Zne(e){return this.__data__.set(e,Xne),this}var Qne=Zne;function Jne(e){return this.__data__.has(e)}var eae=Jne,tae=DC,rae=Qne,nae=eae;function Dv(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new tae;++t<r;)this.add(e[t])}Dv.prototype.add=Dv.prototype.push=rae;Dv.prototype.has=nae;var M4=Dv;function aae(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var $4=aae;function iae(e,t){return e.has(t)}var I4=iae,sae=M4,oae=$4,lae=I4,cae=1,uae=2;function dae(e,t,r,n,a,i){var o=r&cae,l=e.length,c=t.length;if(l!=c&&!(o&&c>l))return!1;var u=i.get(e),d=i.get(t);if(u&&d)return u==t&&d==e;var f=-1,h=!0,m=r&uae?new sae:void 0;for(i.set(e,t),i.set(t,e);++f<l;){var y=e[f],g=t[f];if(n)var p=o?n(g,y,f,t,e,i):n(y,g,f,e,t,i);if(p!==void 0){if(p)continue;h=!1;break}if(m){if(!oae(t,function(v,x){if(!lae(m,x)&&(y===v||a(y,v,r,n,i)))return m.push(x)})){h=!1;break}}else if(!(y===g||a(y,g,r,n,i))){h=!1;break}}return i.delete(e),i.delete(t),h}var D4=dae,fae=ns,hae=fae.Uint8Array,mae=hae;function pae(e){var t=-1,r=Array(e.size);return e.forEach(function(n,a){r[++t]=[a,n]}),r}var gae=pae;function vae(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var YC=vae,i2=up,s2=mae,yae=$C,xae=D4,bae=gae,wae=YC,jae=1,_ae=2,Sae="[object Boolean]",Cae="[object Date]",Nae="[object Error]",kae="[object Map]",Pae="[object Number]",Eae="[object RegExp]",Aae="[object Set]",Oae="[object String]",Tae="[object Symbol]",Rae="[object ArrayBuffer]",Mae="[object DataView]",o2=i2?i2.prototype:void 0,Xb=o2?o2.valueOf:void 0;function $ae(e,t,r,n,a,i,o){switch(r){case Mae:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Rae:return!(e.byteLength!=t.byteLength||!i(new s2(e),new s2(t)));case Sae:case Cae:case Pae:return yae(+e,+t);case Nae:return e.name==t.name&&e.message==t.message;case Eae:case Oae:return e==t+"";case kae:var l=bae;case Aae:var c=n&jae;if(l||(l=wae),e.size!=t.size&&!c)return!1;var u=o.get(e);if(u)return u==t;n|=_ae,o.set(e,t);var d=xae(l(e),l(t),n,a,i,o);return o.delete(e),d;case Tae:if(Xb)return Xb.call(e)==Xb.call(t)}return!1}var Iae=$ae;function Dae(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}var L4=Dae,Lae=L4,Bae=la;function Fae(e,t,r){var n=t(e);return Bae(e)?n:Lae(n,r(e))}var zae=Fae;function Uae(e,t){for(var r=-1,n=e==null?0:e.length,a=0,i=[];++r<n;){var o=e[r];t(o,r,e)&&(i[a++]=o)}return i}var Vae=Uae;function Wae(){return[]}var Hae=Wae,qae=Vae,Kae=Hae,Gae=Object.prototype,Yae=Gae.propertyIsEnumerable,l2=Object.getOwnPropertySymbols,Xae=l2?function(e){return e==null?[]:(e=Object(e),qae(l2(e),function(t){return Yae.call(e,t)}))}:Kae,Zae=Xae;function Qae(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var Jae=Qae,eie=zs,tie=Us,rie="[object Arguments]";function nie(e){return tie(e)&&eie(e)==rie}var aie=nie,c2=aie,iie=Us,B4=Object.prototype,sie=B4.hasOwnProperty,oie=B4.propertyIsEnumerable,lie=c2(function(){return arguments}())?c2:function(e){return iie(e)&&sie.call(e,"callee")&&!oie.call(e,"callee")},XC=lie,Lv={exports:{}};function cie(){return!1}var uie=cie;Lv.exports;(function(e,t){var r=ns,n=uie,a=t&&!t.nodeType&&t,i=a&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===a,l=o?r.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||n;e.exports=u})(Lv,Lv.exports);var F4=Lv.exports,die=9007199254740991,fie=/^(?:0|[1-9]\d*)$/;function hie(e,t){var r=typeof e;return t=t??die,!!t&&(r=="number"||r!="symbol"&&fie.test(e))&&e>-1&&e%1==0&&e<t}var ZC=hie,mie=9007199254740991;function pie(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=mie}var QC=pie,gie=zs,vie=QC,yie=Us,xie="[object Arguments]",bie="[object Array]",wie="[object Boolean]",jie="[object Date]",_ie="[object Error]",Sie="[object Function]",Cie="[object Map]",Nie="[object Number]",kie="[object Object]",Pie="[object RegExp]",Eie="[object Set]",Aie="[object String]",Oie="[object WeakMap]",Tie="[object ArrayBuffer]",Rie="[object DataView]",Mie="[object Float32Array]",$ie="[object Float64Array]",Iie="[object Int8Array]",Die="[object Int16Array]",Lie="[object Int32Array]",Bie="[object Uint8Array]",Fie="[object Uint8ClampedArray]",zie="[object Uint16Array]",Uie="[object Uint32Array]",vr={};vr[Mie]=vr[$ie]=vr[Iie]=vr[Die]=vr[Lie]=vr[Bie]=vr[Fie]=vr[zie]=vr[Uie]=!0;vr[xie]=vr[bie]=vr[Tie]=vr[wie]=vr[Rie]=vr[jie]=vr[_ie]=vr[Sie]=vr[Cie]=vr[Nie]=vr[kie]=vr[Pie]=vr[Eie]=vr[Aie]=vr[Oie]=!1;function Vie(e){return yie(e)&&vie(e.length)&&!!vr[gie(e)]}var Wie=Vie;function Hie(e){return function(t){return e(t)}}var z4=Hie,Bv={exports:{}};Bv.exports;(function(e,t){var r=G3,n=t&&!t.nodeType&&t,a=n&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===n,o=i&&r.process,l=function(){try{var c=a&&a.require&&a.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=l})(Bv,Bv.exports);var qie=Bv.exports,Kie=Wie,Gie=z4,u2=qie,d2=u2&&u2.isTypedArray,Yie=d2?Gie(d2):Kie,U4=Yie,Xie=Jae,Zie=XC,Qie=la,Jie=F4,ese=ZC,tse=U4,rse=Object.prototype,nse=rse.hasOwnProperty;function ase(e,t){var r=Qie(e),n=!r&&Zie(e),a=!r&&!n&&Jie(e),i=!r&&!n&&!a&&tse(e),o=r||n||a||i,l=o?Xie(e.length,String):[],c=l.length;for(var u in e)(t||nse.call(e,u))&&!(o&&(u=="length"||a&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||ese(u,c)))&&l.push(u);return l}var ise=ase,sse=Object.prototype;function ose(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||sse;return e===r}var lse=ose;function cse(e,t){return function(r){return e(t(r))}}var V4=cse,use=V4,dse=use(Object.keys,Object),fse=dse,hse=lse,mse=fse,pse=Object.prototype,gse=pse.hasOwnProperty;function vse(e){if(!hse(e))return mse(e);var t=[];for(var r in Object(e))gse.call(e,r)&&r!="constructor"&&t.push(r);return t}var yse=vse,xse=MC,bse=QC;function wse(e){return e!=null&&bse(e.length)&&!xse(e)}var dp=wse,jse=ise,_se=yse,Sse=dp;function Cse(e){return Sse(e)?jse(e):_se(e)}var a0=Cse,Nse=zae,kse=Zae,Pse=a0;function Ese(e){return Nse(e,Pse,kse)}var Ase=Ese,f2=Ase,Ose=1,Tse=Object.prototype,Rse=Tse.hasOwnProperty;function Mse(e,t,r,n,a,i){var o=r&Ose,l=f2(e),c=l.length,u=f2(t),d=u.length;if(c!=d&&!o)return!1;for(var f=c;f--;){var h=l[f];if(!(o?h in t:Rse.call(t,h)))return!1}var m=i.get(e),y=i.get(t);if(m&&y)return m==t&&y==e;var g=!0;i.set(e,t),i.set(t,e);for(var p=o;++f<c;){h=l[f];var v=e[h],x=t[h];if(n)var b=o?n(x,v,h,t,e,i):n(v,x,h,e,t,i);if(!(b===void 0?v===x||a(v,x,r,n,i):b)){g=!1;break}p||(p=h=="constructor")}if(g&&!p){var _=e.constructor,j=t.constructor;_!=j&&"constructor"in e&&"constructor"in t&&!(typeof _=="function"&&_ instanceof _&&typeof j=="function"&&j instanceof j)&&(g=!1)}return i.delete(e),i.delete(t),g}var $se=Mse,Ise=vc,Dse=ns,Lse=Ise(Dse,"DataView"),Bse=Lse,Fse=vc,zse=ns,Use=Fse(zse,"Promise"),Vse=Use,Wse=vc,Hse=ns,qse=Wse(Hse,"Set"),W4=qse,Kse=vc,Gse=ns,Yse=Kse(Gse,"WeakMap"),Xse=Yse,E1=Bse,A1=IC,O1=Vse,T1=W4,R1=Xse,H4=zs,af=X3,h2="[object Map]",Zse="[object Object]",m2="[object Promise]",p2="[object Set]",g2="[object WeakMap]",v2="[object DataView]",Qse=af(E1),Jse=af(A1),eoe=af(O1),toe=af(T1),roe=af(R1),xl=H4;(E1&&xl(new E1(new ArrayBuffer(1)))!=v2||A1&&xl(new A1)!=h2||O1&&xl(O1.resolve())!=m2||T1&&xl(new T1)!=p2||R1&&xl(new R1)!=g2)&&(xl=function(e){var t=H4(e),r=t==Zse?e.constructor:void 0,n=r?af(r):"";if(n)switch(n){case Qse:return v2;case Jse:return h2;case eoe:return m2;case toe:return p2;case roe:return g2}return t});var noe=xl,Zb=R4,aoe=D4,ioe=Iae,soe=$se,y2=noe,x2=la,b2=F4,ooe=U4,loe=1,w2="[object Arguments]",j2="[object Array]",Qp="[object Object]",coe=Object.prototype,_2=coe.hasOwnProperty;function uoe(e,t,r,n,a,i){var o=x2(e),l=x2(t),c=o?j2:y2(e),u=l?j2:y2(t);c=c==w2?Qp:c,u=u==w2?Qp:u;var d=c==Qp,f=u==Qp,h=c==u;if(h&&b2(e)){if(!b2(t))return!1;o=!0,d=!1}if(h&&!d)return i||(i=new Zb),o||ooe(e)?aoe(e,t,r,n,a,i):ioe(e,t,c,r,n,a,i);if(!(r&loe)){var m=d&&_2.call(e,"__wrapped__"),y=f&&_2.call(t,"__wrapped__");if(m||y){var g=m?e.value():e,p=y?t.value():t;return i||(i=new Zb),a(g,p,r,n,i)}}return h?(i||(i=new Zb),soe(e,t,r,n,a,i)):!1}var doe=uoe,foe=doe,S2=Us;function q4(e,t,r,n,a){return e===t?!0:e==null||t==null||!S2(e)&&!S2(t)?e!==e&&t!==t:foe(e,t,r,n,q4,a)}var JC=q4,hoe=R4,moe=JC,poe=1,goe=2;function voe(e,t,r,n){var a=r.length,i=a,o=!n;if(e==null)return!i;for(e=Object(e);a--;){var l=r[a];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++a<i;){l=r[a];var c=l[0],u=e[c],d=l[1];if(o&&l[2]){if(u===void 0&&!(c in e))return!1}else{var f=new hoe;if(n)var h=n(u,d,c,e,t,f);if(!(h===void 0?moe(d,u,poe|goe,n,f):h))return!1}}return!0}var yoe=voe,xoe=Qo;function boe(e){return e===e&&!xoe(e)}var K4=boe,woe=K4,joe=a0;function _oe(e){for(var t=joe(e),r=t.length;r--;){var n=t[r],a=e[n];t[r]=[n,a,woe(a)]}return t}var Soe=_oe;function Coe(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var G4=Coe,Noe=yoe,koe=Soe,Poe=G4;function Eoe(e){var t=koe(e);return t.length==1&&t[0][2]?Poe(t[0][0],t[0][1]):function(r){return r===e||Noe(r,e,t)}}var Aoe=Eoe;function Ooe(e,t){return e!=null&&t in Object(e)}var Toe=Ooe,Roe=t4,Moe=XC,$oe=la,Ioe=ZC,Doe=QC,Loe=Ux;function Boe(e,t,r){t=Roe(t,e);for(var n=-1,a=t.length,i=!1;++n<a;){var o=Loe(t[n]);if(!(i=e!=null&&r(e,o)))break;e=e[o]}return i||++n!=a?i:(a=e==null?0:e.length,!!a&&Doe(a)&&Ioe(o,a)&&($oe(e)||Moe(e)))}var Foe=Boe,zoe=Toe,Uoe=Foe;function Voe(e,t){return e!=null&&Uoe(e,t,zoe)}var Woe=Voe,Hoe=JC,qoe=r4,Koe=Woe,Goe=RC,Yoe=K4,Xoe=G4,Zoe=Ux,Qoe=1,Joe=2;function ele(e,t){return Goe(e)&&Yoe(t)?Xoe(Zoe(e),t):function(r){var n=qoe(r,e);return n===void 0&&n===t?Koe(r,e):Hoe(t,n,Qoe|Joe)}}var tle=ele;function rle(e){return e}var sf=rle;function nle(e){return function(t){return t==null?void 0:t[e]}}var ale=nle,ile=FC;function sle(e){return function(t){return ile(t,e)}}var ole=sle,lle=ale,cle=ole,ule=RC,dle=Ux;function fle(e){return ule(e)?lle(dle(e)):cle(e)}var hle=fle,mle=Aoe,ple=tle,gle=sf,vle=la,yle=hle;function xle(e){return typeof e=="function"?e:e==null?gle:typeof e=="object"?vle(e)?ple(e[0],e[1]):mle(e):yle(e)}var as=xle;function ble(e,t,r,n){for(var a=e.length,i=r+(n?1:-1);n?i--:++i<a;)if(t(e[i],i,e))return i;return-1}var Y4=ble;function wle(e){return e!==e}var jle=wle;function _le(e,t,r){for(var n=r-1,a=e.length;++n<a;)if(e[n]===t)return n;return-1}var Sle=_le,Cle=Y4,Nle=jle,kle=Sle;function Ple(e,t,r){return t===t?kle(e,t,r):Cle(e,Nle,r)}var Ele=Ple,Ale=Ele;function Ole(e,t){var r=e==null?0:e.length;return!!r&&Ale(e,t,0)>-1}var Tle=Ole;function Rle(e,t,r){for(var n=-1,a=e==null?0:e.length;++n<a;)if(r(t,e[n]))return!0;return!1}var Mle=Rle;function $le(){}var Ile=$le,Qb=W4,Dle=Ile,Lle=YC,Ble=1/0,Fle=Qb&&1/Lle(new Qb([,-0]))[1]==Ble?function(e){return new Qb(e)}:Dle,zle=Fle,Ule=M4,Vle=Tle,Wle=Mle,Hle=I4,qle=zle,Kle=YC,Gle=200;function Yle(e,t,r){var n=-1,a=Vle,i=e.length,o=!0,l=[],c=l;if(r)o=!1,a=Wle;else if(i>=Gle){var u=t?null:qle(e);if(u)return Kle(u);o=!1,a=Hle,c=new Ule}else c=t?[]:l;e:for(;++n<i;){var d=e[n],f=t?t(d):d;if(d=r||d!==0?d:0,o&&f===f){for(var h=c.length;h--;)if(c[h]===f)continue e;t&&c.push(f),l.push(d)}else a(c,f,r)||(c!==l&&c.push(f),l.push(d))}return l}var Xle=Yle,Zle=as,Qle=Xle;function Jle(e,t){return e&&e.length?Qle(e,Zle(t)):[]}var ece=Jle;const C2=Bt(ece);function X4(e,t,r){return t===!0?C2(e,r):Je(t)?C2(e,t):e}function Zu(e){"@babel/helpers - typeof";return Zu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zu(e)}var tce=["ref"];function N2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ls(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?N2(Object(r),!0).forEach(function(n){i0(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k2(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Q4(n.key),n)}}function nce(e,t,r){return t&&k2(e.prototype,t),r&&k2(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function ace(e,t,r){return t=Fv(t),ice(e,Z4()?Reflect.construct(t,r||[],Fv(e).constructor):t.apply(e,r))}function ice(e,t){if(t&&(Zu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sce(e)}function sce(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Z4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Z4=function(){return!!e})()}function Fv(e){return Fv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Fv(e)}function oce(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&M1(e,t)}function M1(e,t){return M1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},M1(e,t)}function i0(e,t,r){return t=Q4(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Q4(e){var t=lce(e,"string");return Zu(t)=="symbol"?t:t+""}function lce(e,t){if(Zu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Zu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cce(e,t){if(e==null)return{};var r=uce(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function uce(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function dce(e){return e.value}function fce(e,t){if($.isValidElement(e))return $.cloneElement(e,t);if(typeof e=="function")return $.createElement(e,t);t.ref;var r=cce(t,tce);return $.createElement(GC,r)}var P2=1,Br=function(e){function t(){var r;rce(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=ace(this,t,[].concat(a)),i0(r,"lastBoundingBox",{width:-1,height:-1}),r}return oce(t,e),nce(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>P2||Math.abs(a.height-this.lastBoundingBox.height)>P2)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,n&&n(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?ls({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var a=this.props,i=a.layout,o=a.align,l=a.verticalAlign,c=a.margin,u=a.chartWidth,d=a.chartHeight,f,h;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(o==="center"&&i==="vertical"){var m=this.getBBoxSnapshot();f={left:((u||0)-m.width)/2}}else f=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(l==="middle"){var y=this.getBBoxSnapshot();h={top:((d||0)-y.height)/2}}else h=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return ls(ls({},f),h)}},{key:"render",value:function(){var n=this,a=this.props,i=a.content,o=a.width,l=a.height,c=a.wrapperStyle,u=a.payloadUniqBy,d=a.payload,f=ls(ls({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return $.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(m){n.wrapperNode=m}},fce(i,ls(ls({},this.props),{},{payload:X4(d,u,dce)})))}}],[{key:"getWithHeight",value:function(n,a){var i=ls(ls({},this.defaultProps),n.props),o=i.layout;return o==="vertical"&&we(n.props.height)?{height:n.props.height}:o==="horizontal"?{width:n.props.width||a}:null}}])}(w.PureComponent);i0(Br,"displayName","Legend");i0(Br,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var E2=up,hce=XC,mce=la,A2=E2?E2.isConcatSpreadable:void 0;function pce(e){return mce(e)||hce(e)||!!(A2&&e&&e[A2])}var gce=pce,vce=L4,yce=gce;function J4(e,t,r,n,a){var i=-1,o=e.length;for(r||(r=yce),a||(a=[]);++i<o;){var l=e[i];t>0&&r(l)?t>1?J4(l,t-1,r,n,a):vce(a,l):n||(a[a.length]=l)}return a}var eL=J4;function xce(e){return function(t,r,n){for(var a=-1,i=Object(t),o=n(t),l=o.length;l--;){var c=o[e?l:++a];if(r(i[c],c,i)===!1)break}return t}}var bce=xce,wce=bce,jce=wce(),_ce=jce,Sce=_ce,Cce=a0;function Nce(e,t){return e&&Sce(e,t,Cce)}var tL=Nce,kce=dp;function Pce(e,t){return function(r,n){if(r==null)return r;if(!kce(r))return e(r,n);for(var a=r.length,i=t?a:-1,o=Object(r);(t?i--:++i<a)&&n(o[i],i,o)!==!1;);return r}}var Ece=Pce,Ace=tL,Oce=Ece,Tce=Oce(Ace),eN=Tce,Rce=eN,Mce=dp;function $ce(e,t){var r=-1,n=Mce(e)?Array(e.length):[];return Rce(e,function(a,i,o){n[++r]=t(a,i,o)}),n}var rL=$ce;function Ice(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var Dce=Ice,O2=Zd;function Lce(e,t){if(e!==t){var r=e!==void 0,n=e===null,a=e===e,i=O2(e),o=t!==void 0,l=t===null,c=t===t,u=O2(t);if(!l&&!u&&!i&&e>t||i&&o&&c&&!l&&!u||n&&o&&c||!r&&c||!a)return 1;if(!n&&!i&&!u&&e<t||u&&r&&a&&!n&&!i||l&&r&&a||!o&&a||!c)return-1}return 0}var Bce=Lce,Fce=Bce;function zce(e,t,r){for(var n=-1,a=e.criteria,i=t.criteria,o=a.length,l=r.length;++n<o;){var c=Fce(a[n],i[n]);if(c){if(n>=l)return c;var u=r[n];return c*(u=="desc"?-1:1)}}return e.index-t.index}var Uce=zce,Jb=BC,Vce=FC,Wce=as,Hce=rL,qce=Dce,Kce=z4,Gce=Uce,Yce=sf,Xce=la;function Zce(e,t,r){t.length?t=Jb(t,function(i){return Xce(i)?function(o){return Vce(o,i.length===1?i[0]:i)}:i}):t=[Yce];var n=-1;t=Jb(t,Kce(Wce));var a=Hce(e,function(i,o,l){var c=Jb(t,function(u){return u(i)});return{criteria:c,index:++n,value:i}});return qce(a,function(i,o){return Gce(i,o,r)})}var Qce=Zce;function Jce(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var eue=Jce,tue=eue,T2=Math.max;function rue(e,t,r){return t=T2(t===void 0?e.length-1:t,0),function(){for(var n=arguments,a=-1,i=T2(n.length-t,0),o=Array(i);++a<i;)o[a]=n[t+a];a=-1;for(var l=Array(t+1);++a<t;)l[a]=n[a];return l[t]=r(o),tue(e,this,l)}}var nue=rue;function aue(e){return function(){return e}}var iue=aue,sue=vc,oue=function(){try{var e=sue(Object,"defineProperty");return e({},"",{}),e}catch{}}(),nL=oue,lue=iue,R2=nL,cue=sf,uue=R2?function(e,t){return R2(e,"toString",{configurable:!0,enumerable:!1,value:lue(t),writable:!0})}:cue,due=uue,fue=800,hue=16,mue=Date.now;function pue(e){var t=0,r=0;return function(){var n=mue(),a=hue-(n-r);if(r=n,a>0){if(++t>=fue)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var gue=pue,vue=due,yue=gue,xue=yue(vue),bue=xue,wue=sf,jue=nue,_ue=bue;function Sue(e,t){return _ue(jue(e,t,wue),e+"")}var Cue=Sue,Nue=$C,kue=dp,Pue=ZC,Eue=Qo;function Aue(e,t,r){if(!Eue(r))return!1;var n=typeof t;return(n=="number"?kue(r)&&Pue(t,r.length):n=="string"&&t in r)?Nue(r[t],e):!1}var s0=Aue,Oue=eL,Tue=Qce,Rue=Cue,M2=s0,Mue=Rue(function(e,t){if(e==null)return[];var r=t.length;return r>1&&M2(e,t[0],t[1])?t=[]:r>2&&M2(t[0],t[1],t[2])&&(t=[t[0]]),Tue(e,Oue(t,1),[])}),$ue=Mue;const tN=Bt($ue);function lm(e){"@babel/helpers - typeof";return lm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lm(e)}function $1(){return $1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$1.apply(this,arguments)}function Iue(e,t){return Fue(e)||Bue(e,t)||Lue(e,t)||Due()}function Due(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lue(e,t){if(e){if(typeof e=="string")return $2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $2(e,t)}}function $2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Bue(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Fue(e){if(Array.isArray(e))return e}function I2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ew(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?I2(Object(r),!0).forEach(function(n){zue(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zue(e,t,r){return t=Uue(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Uue(e){var t=Vue(e,"string");return lm(t)=="symbol"?t:t+""}function Vue(e,t){if(lm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(lm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Wue(e){return Array.isArray(e)&&an(e[0])&&an(e[1])?e.join(" ~ "):e}var Hue=function(t){var r=t.separator,n=r===void 0?" : ":r,a=t.contentStyle,i=a===void 0?{}:a,o=t.itemStyle,l=o===void 0?{}:o,c=t.labelStyle,u=c===void 0?{}:c,d=t.payload,f=t.formatter,h=t.itemSorter,m=t.wrapperClassName,y=t.labelClassName,g=t.label,p=t.labelFormatter,v=t.accessibilityLayer,x=v===void 0?!1:v,b=function(){if(d&&d.length){var E={padding:0,margin:0},R=(h?tN(d,h):d).map(function(P,T){if(P.type==="none")return null;var I=ew({display:"block",paddingTop:4,paddingBottom:4,color:P.color||"#000"},l),M=P.formatter||f||Wue,D=P.value,B=P.name,z=D,Z=B;if(M&&z!=null&&Z!=null){var J=M(D,B,P,T,d);if(Array.isArray(J)){var se=Iue(J,2);z=se[0],Z=se[1]}else z=J}return $.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(T),style:I},an(Z)?$.createElement("span",{className:"recharts-tooltip-item-name"},Z):null,an(Z)?$.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,$.createElement("span",{className:"recharts-tooltip-item-value"},z),$.createElement("span",{className:"recharts-tooltip-item-unit"},P.unit||""))});return $.createElement("ul",{className:"recharts-tooltip-item-list",style:E},R)}return null},_=ew({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),j=ew({margin:0},u),S=!Qe(g),C=S?g:"",k=ut("recharts-default-tooltip",m),N=ut("recharts-tooltip-label",y);S&&p&&d!==void 0&&d!==null&&(C=p(g,d));var A=x?{role:"status","aria-live":"assertive"}:{};return $.createElement("div",$1({className:k,style:_},A),$.createElement("p",{className:N,style:j},$.isValidElement(C)?C:"".concat(C)),b())};function cm(e){"@babel/helpers - typeof";return cm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cm(e)}function Jp(e,t,r){return t=que(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function que(e){var t=Kue(e,"string");return cm(t)=="symbol"?t:t+""}function Kue(e,t){if(cm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(cm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kf="recharts-tooltip-wrapper",Gue={visibility:"hidden"};function Yue(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return ut(kf,Jp(Jp(Jp(Jp({},"".concat(kf,"-right"),we(r)&&t&&we(t.x)&&r>=t.x),"".concat(kf,"-left"),we(r)&&t&&we(t.x)&&r<t.x),"".concat(kf,"-bottom"),we(n)&&t&&we(t.y)&&n>=t.y),"".concat(kf,"-top"),we(n)&&t&&we(t.y)&&n<t.y))}function D2(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,a=e.offsetTopLeft,i=e.position,o=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,u=e.viewBoxDimension;if(i&&we(i[n]))return i[n];var d=r[n]-l-a,f=r[n]+a;if(t[n])return o[n]?d:f;if(o[n]){var h=d,m=c[n];return h<m?Math.max(f,c[n]):Math.max(d,c[n])}var y=f+l,g=c[n]+u;return y>g?Math.max(d,c[n]):Math.max(f,c[n])}function Xue(e){var t=e.translateX,r=e.translateY,n=e.useTranslate3d;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function Zue(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.offsetTopLeft,a=e.position,i=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,u,d,f;return o.height>0&&o.width>0&&r?(d=D2({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),f=D2({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=Xue({translateX:d,translateY:f,useTranslate3d:l})):u=Gue,{cssProperties:u,cssClasses:Yue({translateX:d,translateY:f,coordinate:r})}}function Qu(e){"@babel/helpers - typeof";return Qu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qu(e)}function L2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function B2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?L2(Object(r),!0).forEach(function(n){D1(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Que(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jue(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,iL(n.key),n)}}function ede(e,t,r){return t&&Jue(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function tde(e,t,r){return t=zv(t),rde(e,aL()?Reflect.construct(t,r||[],zv(e).constructor):t.apply(e,r))}function rde(e,t){if(t&&(Qu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nde(e)}function nde(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(aL=function(){return!!e})()}function zv(e){return zv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},zv(e)}function ade(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&I1(e,t)}function I1(e,t){return I1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},I1(e,t)}function D1(e,t,r){return t=iL(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iL(e){var t=ide(e,"string");return Qu(t)=="symbol"?t:t+""}function ide(e,t){if(Qu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Qu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var F2=1,sde=function(e){function t(){var r;Que(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=tde(this,t,[].concat(a)),D1(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),D1(r,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,u,d;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=r.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(d=r.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),r}return ade(t,e),ede(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>F2||Math.abs(n.height-this.state.lastBoundingBox.height)>F2)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.children,d=a.coordinate,f=a.hasPayload,h=a.isAnimationActive,m=a.offset,y=a.position,g=a.reverseDirection,p=a.useTranslate3d,v=a.viewBox,x=a.wrapperStyle,b=Zue({allowEscapeViewBox:o,coordinate:d,offsetTopLeft:m,position:y,reverseDirection:g,tooltipBox:this.state.lastBoundingBox,useTranslate3d:p,viewBox:v}),_=b.cssClasses,j=b.cssProperties,S=B2(B2({transition:h&&i?"transform ".concat(l,"ms ").concat(c):void 0},j),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&f?"visible":"hidden",position:"absolute",top:0,left:0},x);return $.createElement("div",{tabIndex:-1,className:_,style:S,ref:function(k){n.wrapperNode=k}},u)}}])}(w.PureComponent),ode=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Fa={isSsr:ode(),get:function(t){return Fa[t]},set:function(t,r){if(typeof t=="string")Fa[t]=r;else{var n=Object.keys(t);n&&n.length&&n.forEach(function(a){Fa[a]=t[a]})}}};function Ju(e){"@babel/helpers - typeof";return Ju=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ju(e)}function z2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function U2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?z2(Object(r),!0).forEach(function(n){rN(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lde(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cde(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,oL(n.key),n)}}function ude(e,t,r){return t&&cde(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function dde(e,t,r){return t=Uv(t),fde(e,sL()?Reflect.construct(t,r||[],Uv(e).constructor):t.apply(e,r))}function fde(e,t){if(t&&(Ju(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hde(e)}function hde(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sL=function(){return!!e})()}function Uv(e){return Uv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Uv(e)}function mde(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L1(e,t)}function L1(e,t){return L1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},L1(e,t)}function rN(e,t,r){return t=oL(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oL(e){var t=pde(e,"string");return Ju(t)=="symbol"?t:t+""}function pde(e,t){if(Ju(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Ju(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gde(e){return e.dataKey}function vde(e,t){return $.isValidElement(e)?$.cloneElement(e,t):typeof e=="function"?$.createElement(e,t):$.createElement(Hue,t)}var Nt=function(e){function t(){return lde(this,t),dde(this,t,arguments)}return mde(t,e),ude(t,[{key:"render",value:function(){var n=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.content,d=a.coordinate,f=a.filterNull,h=a.isAnimationActive,m=a.offset,y=a.payload,g=a.payloadUniqBy,p=a.position,v=a.reverseDirection,x=a.useTranslate3d,b=a.viewBox,_=a.wrapperStyle,j=y??[];f&&j.length&&(j=X4(y.filter(function(C){return C.value!=null&&(C.hide!==!0||n.props.includeHidden)}),g,gde));var S=j.length>0;return $.createElement(sde,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:h,active:i,coordinate:d,hasPayload:S,offset:m,position:p,reverseDirection:v,useTranslate3d:x,viewBox:b,wrapperStyle:_},vde(u,U2(U2({},this.props),{},{payload:j})))}}])}(w.PureComponent);rN(Nt,"displayName","Tooltip");rN(Nt,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Fa.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var yde=ns,xde=function(){return yde.Date.now()},bde=xde,wde=/\s/;function jde(e){for(var t=e.length;t--&&wde.test(e.charAt(t)););return t}var _de=jde,Sde=_de,Cde=/^\s+/;function Nde(e){return e&&e.slice(0,Sde(e)+1).replace(Cde,"")}var kde=Nde,Pde=kde,V2=Qo,Ede=Zd,W2=NaN,Ade=/^[-+]0x[0-9a-f]+$/i,Ode=/^0b[01]+$/i,Tde=/^0o[0-7]+$/i,Rde=parseInt;function Mde(e){if(typeof e=="number")return e;if(Ede(e))return W2;if(V2(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=V2(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Pde(e);var r=Ode.test(e);return r||Tde.test(e)?Rde(e.slice(2),r?2:8):Ade.test(e)?W2:+e}var lL=Mde,$de=Qo,tw=bde,H2=lL,Ide="Expected a function",Dde=Math.max,Lde=Math.min;function Bde(e,t,r){var n,a,i,o,l,c,u=0,d=!1,f=!1,h=!0;if(typeof e!="function")throw new TypeError(Ide);t=H2(t)||0,$de(r)&&(d=!!r.leading,f="maxWait"in r,i=f?Dde(H2(r.maxWait)||0,t):i,h="trailing"in r?!!r.trailing:h);function m(S){var C=n,k=a;return n=a=void 0,u=S,o=e.apply(k,C),o}function y(S){return u=S,l=setTimeout(v,t),d?m(S):o}function g(S){var C=S-c,k=S-u,N=t-C;return f?Lde(N,i-k):N}function p(S){var C=S-c,k=S-u;return c===void 0||C>=t||C<0||f&&k>=i}function v(){var S=tw();if(p(S))return x(S);l=setTimeout(v,g(S))}function x(S){return l=void 0,h&&n?m(S):(n=a=void 0,o)}function b(){l!==void 0&&clearTimeout(l),u=0,n=c=a=l=void 0}function _(){return l===void 0?o:x(tw())}function j(){var S=tw(),C=p(S);if(n=arguments,a=this,c=S,C){if(l===void 0)return y(c);if(f)return clearTimeout(l),l=setTimeout(v,t),m(c)}return l===void 0&&(l=setTimeout(v,t)),o}return j.cancel=b,j.flush=_,j}var Fde=Bde,zde=Fde,Ude=Qo,Vde="Expected a function";function Wde(e,t,r){var n=!0,a=!0;if(typeof e!="function")throw new TypeError(Vde);return Ude(r)&&(n="leading"in r?!!r.leading:n,a="trailing"in r?!!r.trailing:a),zde(e,t,{leading:n,maxWait:t,trailing:a})}var Hde=Wde;const cL=Bt(Hde);function um(e){"@babel/helpers - typeof";return um=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},um(e)}function q2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function eg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?q2(Object(r),!0).forEach(function(n){qde(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qde(e,t,r){return t=Kde(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Kde(e){var t=Gde(e,"string");return um(t)=="symbol"?t:t+""}function Gde(e,t){if(um(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(um(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Yde(e,t){return Jde(e)||Qde(e,t)||Zde(e,t)||Xde()}function Xde(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zde(e,t){if(e){if(typeof e=="string")return K2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return K2(e,t)}}function K2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Qde(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Jde(e){if(Array.isArray(e))return e}var wr=w.forwardRef(function(e,t){var r=e.aspect,n=e.initialDimension,a=n===void 0?{width:-1,height:-1}:n,i=e.width,o=i===void 0?"100%":i,l=e.height,c=l===void 0?"100%":l,u=e.minWidth,d=u===void 0?0:u,f=e.minHeight,h=e.maxHeight,m=e.children,y=e.debounce,g=y===void 0?0:y,p=e.id,v=e.className,x=e.onResize,b=e.style,_=b===void 0?{}:b,j=w.useRef(null),S=w.useRef();S.current=x,w.useImperativeHandle(t,function(){return Object.defineProperty(j.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),j.current},configurable:!0})});var C=w.useState({containerWidth:a.width,containerHeight:a.height}),k=Yde(C,2),N=k[0],A=k[1],O=w.useCallback(function(R,P){A(function(T){var I=Math.round(R),M=Math.round(P);return T.containerWidth===I&&T.containerHeight===M?T:{containerWidth:I,containerHeight:M}})},[]);w.useEffect(function(){var R=function(B){var z,Z=B[0].contentRect,J=Z.width,se=Z.height;O(J,se),(z=S.current)===null||z===void 0||z.call(S,J,se)};g>0&&(R=cL(R,g,{trailing:!0,leading:!1}));var P=new ResizeObserver(R),T=j.current.getBoundingClientRect(),I=T.width,M=T.height;return O(I,M),P.observe(j.current),function(){P.disconnect()}},[O,g]);var E=w.useMemo(function(){var R=N.containerWidth,P=N.containerHeight;if(R<0||P<0)return null;bi(Ol(o)||Ol(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),bi(!r||r>0,"The aspect(%s) must be greater than zero.",r);var T=Ol(o)?R:o,I=Ol(c)?P:c;r&&r>0&&(T?I=T/r:I&&(T=I*r),h&&I>h&&(I=h)),bi(T>0||I>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,T,I,o,c,d,f,r);var M=!Array.isArray(m)&&Ss(m.type).endsWith("Chart");return $.Children.map(m,function(D){return $.isValidElement(D)?w.cloneElement(D,eg({width:T,height:I},M?{style:eg({height:"100%",width:"100%",maxHeight:I,maxWidth:T},D.props.style)}:{})):D})},[r,m,c,h,f,d,N,o]);return $.createElement("div",{id:p?"".concat(p):void 0,className:ut("recharts-responsive-container",v),style:eg(eg({},_),{},{width:o,height:c,minWidth:d,minHeight:f,maxHeight:h}),ref:j},E)}),el=function(t){return null};el.displayName="Cell";function dm(e){"@babel/helpers - typeof";return dm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dm(e)}function G2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function B1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?G2(Object(r),!0).forEach(function(n){efe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function efe(e,t,r){return t=tfe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tfe(e){var t=rfe(e,"string");return dm(t)=="symbol"?t:t+""}function rfe(e,t){if(dm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(dm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Pc={widthCache:{},cacheCount:0},nfe=2e3,afe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Y2="recharts_measurement_span";function ife(e){var t=B1({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var hh=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Fa.isSsr)return{width:0,height:0};var n=ife(r),a=JSON.stringify({text:t,copyStyle:n});if(Pc.widthCache[a])return Pc.widthCache[a];try{var i=document.getElementById(Y2);i||(i=document.createElement("span"),i.setAttribute("id",Y2),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=B1(B1({},afe),n);Object.assign(i.style,o),i.textContent="".concat(t);var l=i.getBoundingClientRect(),c={width:l.width,height:l.height};return Pc.widthCache[a]=c,++Pc.cacheCount>nfe&&(Pc.cacheCount=0,Pc.widthCache={}),c}catch{return{width:0,height:0}}},sfe=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function fm(e){"@babel/helpers - typeof";return fm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fm(e)}function Vv(e,t){return ufe(e)||cfe(e,t)||lfe(e,t)||ofe()}function ofe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lfe(e,t){if(e){if(typeof e=="string")return X2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return X2(e,t)}}function X2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function cfe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function ufe(e){if(Array.isArray(e))return e}function dfe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Z2(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,hfe(n.key),n)}}function ffe(e,t,r){return t&&Z2(e.prototype,t),r&&Z2(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function hfe(e){var t=mfe(e,"string");return fm(t)=="symbol"?t:t+""}function mfe(e,t){if(fm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(fm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Q2=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,J2=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,pfe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,gfe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,uL={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},vfe=Object.keys(uL),lu="NaN";function yfe(e,t){return e*uL[t]}var tg=function(){function e(t,r){dfe(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!pfe.test(r)&&(this.num=NaN,this.unit=""),vfe.includes(r)&&(this.num=yfe(t,r),this.unit="px")}return ffe(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,a=(n=gfe.exec(r))!==null&&n!==void 0?n:[],i=Vv(a,3),o=i[1],l=i[2];return new e(parseFloat(o),l??"")}}])}();function dL(e){if(e.includes(lu))return lu;for(var t=e;t.includes("*")||t.includes("/");){var r,n=(r=Q2.exec(t))!==null&&r!==void 0?r:[],a=Vv(n,4),i=a[1],o=a[2],l=a[3],c=tg.parse(i??""),u=tg.parse(l??""),d=o==="*"?c.multiply(u):c.divide(u);if(d.isNaN())return lu;t=t.replace(Q2,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var f,h=(f=J2.exec(t))!==null&&f!==void 0?f:[],m=Vv(h,4),y=m[1],g=m[2],p=m[3],v=tg.parse(y??""),x=tg.parse(p??""),b=g==="+"?v.add(x):v.subtract(x);if(b.isNaN())return lu;t=t.replace(J2,b.toString())}return t}var eA=/\(([^()]*)\)/;function xfe(e){for(var t=e;t.includes("(");){var r=eA.exec(t),n=Vv(r,2),a=n[1];t=t.replace(eA,dL(a))}return t}function bfe(e){var t=e.replace(/\s+/g,"");return t=xfe(t),t=dL(t),t}function wfe(e){try{return bfe(e)}catch{return lu}}function rw(e){var t=wfe(e.slice(5,-1));return t===lu?"":t}var jfe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],_fe=["dx","dy","angle","className","breakAll"];function F1(){return F1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},F1.apply(this,arguments)}function tA(e,t){if(e==null)return{};var r=Sfe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Sfe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function rA(e,t){return Pfe(e)||kfe(e,t)||Nfe(e,t)||Cfe()}function Cfe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nfe(e,t){if(e){if(typeof e=="string")return nA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nA(e,t)}}function nA(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function kfe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Pfe(e){if(Array.isArray(e))return e}var fL=/[ \f\n\r\t\v\u2028\u2029]+/,hL=function(t){var r=t.children,n=t.breakAll,a=t.style;try{var i=[];Qe(r)||(n?i=r.toString().split(""):i=r.toString().split(fL));var o=i.map(function(c){return{word:c,width:hh(c,a).width}}),l=n?0:hh("",a).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},Efe=function(t,r,n,a,i){var o=t.maxLines,l=t.children,c=t.style,u=t.breakAll,d=we(o),f=l,h=function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return T.reduce(function(I,M){var D=M.word,B=M.width,z=I[I.length-1];if(z&&(a==null||i||z.width+B+n<Number(a)))z.words.push(D),z.width+=B+n;else{var Z={words:[D],width:B};I.push(Z)}return I},[])},m=h(r),y=function(T){return T.reduce(function(I,M){return I.width>M.width?I:M})};if(!d)return m;for(var g="",p=function(T){var I=f.slice(0,T),M=hL({breakAll:u,style:c,children:I+g}).wordsWithComputedWidth,D=h(M),B=D.length>o||y(D).width>Number(a);return[B,D]},v=0,x=f.length-1,b=0,_;v<=x&&b<=f.length-1;){var j=Math.floor((v+x)/2),S=j-1,C=p(S),k=rA(C,2),N=k[0],A=k[1],O=p(j),E=rA(O,1),R=E[0];if(!N&&!R&&(v=j+1),N&&R&&(x=j-1),!N&&R){_=A;break}b++}return _||m},aA=function(t){var r=Qe(t)?[]:t.toString().split(fL);return[{words:r}]},Afe=function(t){var r=t.width,n=t.scaleToFit,a=t.children,i=t.style,o=t.breakAll,l=t.maxLines;if((r||n)&&!Fa.isSsr){var c,u,d=hL({breakAll:o,children:a,style:i});if(d){var f=d.wordsWithComputedWidth,h=d.spaceWidth;c=f,u=h}else return aA(a);return Efe({breakAll:o,children:a,maxLines:l,style:i},c,u,r,n)}return aA(a)},iA="#808080",ic=function(t){var r=t.x,n=r===void 0?0:r,a=t.y,i=a===void 0?0:a,o=t.lineHeight,l=o===void 0?"1em":o,c=t.capHeight,u=c===void 0?"0.71em":c,d=t.scaleToFit,f=d===void 0?!1:d,h=t.textAnchor,m=h===void 0?"start":h,y=t.verticalAnchor,g=y===void 0?"end":y,p=t.fill,v=p===void 0?iA:p,x=tA(t,jfe),b=w.useMemo(function(){return Afe({breakAll:x.breakAll,children:x.children,maxLines:x.maxLines,scaleToFit:f,style:x.style,width:x.width})},[x.breakAll,x.children,x.maxLines,f,x.style,x.width]),_=x.dx,j=x.dy,S=x.angle,C=x.className,k=x.breakAll,N=tA(x,_fe);if(!an(n)||!an(i))return null;var A=n+(we(_)?_:0),O=i+(we(j)?j:0),E;switch(g){case"start":E=rw("calc(".concat(u,")"));break;case"middle":E=rw("calc(".concat((b.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:E=rw("calc(".concat(b.length-1," * -").concat(l,")"));break}var R=[];if(f){var P=b[0].width,T=x.width;R.push("scale(".concat((we(T)?T/P:1)/P,")"))}return S&&R.push("rotate(".concat(S,", ").concat(A,", ").concat(O,")")),R.length&&(N.transform=R.join(" ")),$.createElement("text",F1({},Ue(N,!0),{x:A,y:O,className:ut("recharts-text",C),textAnchor:m,fill:v.includes("url")?iA:v}),b.map(function(I,M){var D=I.words.join(k?"":" ");return $.createElement("tspan",{x:A,dy:M===0?E:l,key:"".concat(D,"-").concat(M)},D)}))};function Ro(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Ofe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function nN(e){let t,r,n;e.length!==2?(t=Ro,r=(l,c)=>Ro(e(l),c),n=(l,c)=>e(l)-c):(t=e===Ro||e===Ofe?e:Tfe,r=e,n=e);function a(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<0?u=f+1:d=f}while(u<d)}return u}function i(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function o(l,c,u=0,d=l.length){const f=a(l,c,u,d-1);return f>u&&n(l[f-1],c)>-n(l[f],c)?f-1:f}return{left:a,center:o,right:i}}function Tfe(){return 0}function mL(e){return e===null?NaN:+e}function*Rfe(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const Mfe=nN(Ro),fp=Mfe.right;nN(mL).center;class sA extends Map{constructor(t,r=Dfe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(oA(this,t))}has(t){return super.has(oA(this,t))}set(t,r){return super.set($fe(this,t),r)}delete(t){return super.delete(Ife(this,t))}}function oA({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function $fe({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function Ife({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function Dfe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Lfe(e=Ro){if(e===Ro)return pL;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function pL(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Bfe=Math.sqrt(50),Ffe=Math.sqrt(10),zfe=Math.sqrt(2);function Wv(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),i=n/Math.pow(10,a),o=i>=Bfe?10:i>=Ffe?5:i>=zfe?2:1;let l,c,u;return a<0?(u=Math.pow(10,-a)/o,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,a)*o,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=r&&r<2?Wv(e,t,r*2):[l,c,u]}function z1(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,i,o]=n?Wv(t,e,r):Wv(e,t,r);if(!(i>=a))return[];const l=i-a+1,c=new Array(l);if(n)if(o<0)for(let u=0;u<l;++u)c[u]=(i-u)/-o;else for(let u=0;u<l;++u)c[u]=(i-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(a+u)/-o;else for(let u=0;u<l;++u)c[u]=(a+u)*o;return c}function U1(e,t,r){return t=+t,e=+e,r=+r,Wv(e,t,r)[2]}function V1(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?U1(t,e,r):U1(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function lA(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function cA(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function gL(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?pL:Lfe(a);n>r;){if(n-r>600){const c=n-r+1,u=t-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),m=Math.max(r,Math.floor(t-u*f/c+h)),y=Math.min(n,Math.floor(t+(c-u)*f/c+h));gL(e,t,m,y,a)}const i=e[t];let o=r,l=n;for(Pf(e,r,t),a(e[n],i)>0&&Pf(e,r,n);o<l;){for(Pf(e,o,l),++o,--l;a(e[o],i)<0;)++o;for(;a(e[l],i)>0;)--l}a(e[r],i)===0?Pf(e,r,l):(++l,Pf(e,l,n)),l<=t&&(r=l+1),t<=l&&(n=l-1)}return e}function Pf(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function Ufe(e,t,r){if(e=Float64Array.from(Rfe(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return cA(e);if(t>=1)return lA(e);var n,a=(n-1)*t,i=Math.floor(a),o=lA(gL(e,i).subarray(0,i+1)),l=cA(e.subarray(i+1));return o+(l-o)*(a-i)}}function Vfe(e,t,r=mL){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,i=Math.floor(a),o=+r(e[i],i,e),l=+r(e[i+1],i+1,e);return o+(l-o)*(a-i)}}function Wfe(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(a);++n<a;)i[n]=e+n*r;return i}function Ga(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Vs(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const W1=Symbol("implicit");function aN(){var e=new sA,t=[],r=[],n=W1;function a(i){let o=e.get(i);if(o===void 0){if(n!==W1)return n;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new sA;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return a},a.range=function(i){return arguments.length?(r=Array.from(i),a):r.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return aN(t,r).unknown(n)},Ga.apply(a,arguments),a}function hm(){var e=aN().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,i,o,l=!1,c=0,u=0,d=.5;delete e.unknown;function f(){var h=t().length,m=a<n,y=m?a:n,g=m?n:a;i=(g-y)/Math.max(1,h-c+u*2),l&&(i=Math.floor(i)),y+=(g-y-i*(h-c))*d,o=i*(1-c),l&&(y=Math.round(y),o=Math.round(o));var p=Wfe(h).map(function(v){return y+i*v});return r(m?p.reverse():p)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([n,a]=h,n=+n,a=+a,f()):[n,a]},e.rangeRound=function(h){return[n,a]=h,n=+n,a=+a,l=!0,f()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(h){return arguments.length?(l=!!h,f()):l},e.padding=function(h){return arguments.length?(c=Math.min(1,u=+h),f()):c},e.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),f()):c},e.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},e.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),f()):d},e.copy=function(){return hm(t(),[n,a]).round(l).paddingInner(c).paddingOuter(u).align(d)},Ga.apply(f(),arguments)}function vL(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return vL(t())},e}function mh(){return vL(hm.apply(null,arguments).paddingInner(1))}function iN(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function yL(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function hp(){}var mm=.7,Hv=1/mm,Su="\\s*([+-]?\\d+)\\s*",pm="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Yi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Hfe=/^#([0-9a-f]{3,8})$/,qfe=new RegExp(`^rgb\\(${Su},${Su},${Su}\\)$`),Kfe=new RegExp(`^rgb\\(${Yi},${Yi},${Yi}\\)$`),Gfe=new RegExp(`^rgba\\(${Su},${Su},${Su},${pm}\\)$`),Yfe=new RegExp(`^rgba\\(${Yi},${Yi},${Yi},${pm}\\)$`),Xfe=new RegExp(`^hsl\\(${pm},${Yi},${Yi}\\)$`),Zfe=new RegExp(`^hsla\\(${pm},${Yi},${Yi},${pm}\\)$`),uA={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};iN(hp,gm,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:dA,formatHex:dA,formatHex8:Qfe,formatHsl:Jfe,formatRgb:fA,toString:fA});function dA(){return this.rgb().formatHex()}function Qfe(){return this.rgb().formatHex8()}function Jfe(){return xL(this).formatHsl()}function fA(){return this.rgb().formatRgb()}function gm(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=Hfe.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?hA(t):r===3?new ra(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?rg(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?rg(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=qfe.exec(e))?new ra(t[1],t[2],t[3],1):(t=Kfe.exec(e))?new ra(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Gfe.exec(e))?rg(t[1],t[2],t[3],t[4]):(t=Yfe.exec(e))?rg(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Xfe.exec(e))?gA(t[1],t[2]/100,t[3]/100,1):(t=Zfe.exec(e))?gA(t[1],t[2]/100,t[3]/100,t[4]):uA.hasOwnProperty(e)?hA(uA[e]):e==="transparent"?new ra(NaN,NaN,NaN,0):null}function hA(e){return new ra(e>>16&255,e>>8&255,e&255,1)}function rg(e,t,r,n){return n<=0&&(e=t=r=NaN),new ra(e,t,r,n)}function ehe(e){return e instanceof hp||(e=gm(e)),e?(e=e.rgb(),new ra(e.r,e.g,e.b,e.opacity)):new ra}function H1(e,t,r,n){return arguments.length===1?ehe(e):new ra(e,t,r,n??1)}function ra(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}iN(ra,H1,yL(hp,{brighter(e){return e=e==null?Hv:Math.pow(Hv,e),new ra(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?mm:Math.pow(mm,e),new ra(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ra(Kl(this.r),Kl(this.g),Kl(this.b),qv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:mA,formatHex:mA,formatHex8:the,formatRgb:pA,toString:pA}));function mA(){return`#${Tl(this.r)}${Tl(this.g)}${Tl(this.b)}`}function the(){return`#${Tl(this.r)}${Tl(this.g)}${Tl(this.b)}${Tl((isNaN(this.opacity)?1:this.opacity)*255)}`}function pA(){const e=qv(this.opacity);return`${e===1?"rgb(":"rgba("}${Kl(this.r)}, ${Kl(this.g)}, ${Kl(this.b)}${e===1?")":`, ${e})`}`}function qv(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Kl(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Tl(e){return e=Kl(e),(e<16?"0":"")+e.toString(16)}function gA(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new mi(e,t,r,n)}function xL(e){if(e instanceof mi)return new mi(e.h,e.s,e.l,e.opacity);if(e instanceof hp||(e=gm(e)),!e)return new mi;if(e instanceof mi)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),i=Math.max(t,r,n),o=NaN,l=i-a,c=(i+a)/2;return l?(t===i?o=(r-n)/l+(r<n)*6:r===i?o=(n-t)/l+2:o=(t-r)/l+4,l/=c<.5?i+a:2-i-a,o*=60):l=c>0&&c<1?0:o,new mi(o,l,c,e.opacity)}function rhe(e,t,r,n){return arguments.length===1?xL(e):new mi(e,t,r,n??1)}function mi(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}iN(mi,rhe,yL(hp,{brighter(e){return e=e==null?Hv:Math.pow(Hv,e),new mi(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?mm:Math.pow(mm,e),new mi(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new ra(nw(e>=240?e-240:e+120,a,n),nw(e,a,n),nw(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new mi(vA(this.h),ng(this.s),ng(this.l),qv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=qv(this.opacity);return`${e===1?"hsl(":"hsla("}${vA(this.h)}, ${ng(this.s)*100}%, ${ng(this.l)*100}%${e===1?")":`, ${e})`}`}}));function vA(e){return e=(e||0)%360,e<0?e+360:e}function ng(e){return Math.max(0,Math.min(1,e||0))}function nw(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const sN=e=>()=>e;function nhe(e,t){return function(r){return e+r*t}}function ahe(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function ihe(e){return(e=+e)==1?bL:function(t,r){return r-t?ahe(t,r,e):sN(isNaN(t)?r:t)}}function bL(e,t){var r=t-e;return r?nhe(e,r):sN(isNaN(e)?t:e)}const yA=function e(t){var r=ihe(t);function n(a,i){var o=r((a=H1(a)).r,(i=H1(i)).r),l=r(a.g,i.g),c=r(a.b,i.b),u=bL(a.opacity,i.opacity);return function(d){return a.r=o(d),a.g=l(d),a.b=c(d),a.opacity=u(d),a+""}}return n.gamma=e,n}(1);function she(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(i){for(a=0;a<r;++a)n[a]=e[a]*(1-i)+t[a]*i;return n}}function ohe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function lhe(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)a[o]=of(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(l){for(o=0;o<n;++o)i[o]=a[o](l);return i}}function che(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Kv(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function uhe(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=of(e[a],t[a]):n[a]=t[a];return function(i){for(a in r)n[a]=r[a](i);return n}}var q1=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,aw=new RegExp(q1.source,"g");function dhe(e){return function(){return e}}function fhe(e){return function(t){return e(t)+""}}function hhe(e,t){var r=q1.lastIndex=aw.lastIndex=0,n,a,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(n=q1.exec(e))&&(a=aw.exec(t));)(i=a.index)>r&&(i=t.slice(r,i),l[o]?l[o]+=i:l[++o]=i),(n=n[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,c.push({i:o,x:Kv(n,a)})),r=aw.lastIndex;return r<t.length&&(i=t.slice(r),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?fhe(c[0].x):dhe(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}function of(e,t){var r=typeof t,n;return t==null||r==="boolean"?sN(t):(r==="number"?Kv:r==="string"?(n=gm(t))?(t=n,yA):hhe:t instanceof gm?yA:t instanceof Date?che:ohe(t)?she:Array.isArray(t)?lhe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?uhe:Kv)(e,t)}function oN(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function mhe(e,t){t===void 0&&(t=e,e=of);for(var r=0,n=t.length-1,a=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(a,a=t[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[l](o-l)}}function phe(e){return function(){return e}}function Gv(e){return+e}var xA=[0,1];function Wn(e){return e}function K1(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:phe(isNaN(t)?NaN:.5)}function ghe(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function vhe(e,t,r){var n=e[0],a=e[1],i=t[0],o=t[1];return a<n?(n=K1(a,n),i=r(o,i)):(n=K1(n,a),i=r(i,o)),function(l){return i(n(l))}}function yhe(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),i=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)a[o]=K1(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(l){var c=fp(e,l,1,n)-1;return i[c](a[c](l))}}function mp(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function o0(){var e=xA,t=xA,r=of,n,a,i,o=Wn,l,c,u;function d(){var h=Math.min(e.length,t.length);return o!==Wn&&(o=ghe(e[0],e[h-1])),l=h>2?yhe:vhe,c=u=null,f}function f(h){return h==null||isNaN(h=+h)?i:(c||(c=l(e.map(n),t,r)))(n(o(h)))}return f.invert=function(h){return o(a((u||(u=l(t,e.map(n),Kv)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,Gv),d()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),d()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),r=oN,d()},f.clamp=function(h){return arguments.length?(o=h?!0:Wn,d()):o!==Wn},f.interpolate=function(h){return arguments.length?(r=h,d()):r},f.unknown=function(h){return arguments.length?(i=h,f):i},function(h,m){return n=h,a=m,d()}}function lN(){return o0()(Wn,Wn)}function xhe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Yv(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function ed(e){return e=Yv(Math.abs(e)),e?e[1]:NaN}function bhe(e,t){return function(r,n){for(var a=r.length,i=[],o=0,l=e[0],c=0;a>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),i.push(r.substring(a-=l,a+l)),!((c+=l+1)>n));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function whe(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var jhe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function vm(e){if(!(t=jhe.exec(e)))throw new Error("invalid format: "+e);var t;return new cN({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}vm.prototype=cN.prototype;function cN(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}cN.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function _he(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var wL;function She(e,t){var r=Yv(e,t);if(!r)return e+"";var n=r[0],a=r[1],i=a-(wL=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+Yv(e,Math.max(0,t+i-1))[0]}function bA(e,t){var r=Yv(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const wA={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:xhe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>bA(e*100,t),r:bA,s:She,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function jA(e){return e}var _A=Array.prototype.map,SA=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Che(e){var t=e.grouping===void 0||e.thousands===void 0?jA:bhe(_A.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?jA:whe(_A.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(f){f=vm(f);var h=f.fill,m=f.align,y=f.sign,g=f.symbol,p=f.zero,v=f.width,x=f.comma,b=f.precision,_=f.trim,j=f.type;j==="n"?(x=!0,j="g"):wA[j]||(b===void 0&&(b=12),_=!0,j="g"),(p||h==="0"&&m==="=")&&(p=!0,h="0",m="=");var S=g==="$"?r:g==="#"&&/[boxX]/.test(j)?"0"+j.toLowerCase():"",C=g==="$"?n:/[%p]/.test(j)?o:"",k=wA[j],N=/[defgprs%]/.test(j);b=b===void 0?6:/[gprs]/.test(j)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function A(O){var E=S,R=C,P,T,I;if(j==="c")R=k(O)+R,O="";else{O=+O;var M=O<0||1/O<0;if(O=isNaN(O)?c:k(Math.abs(O),b),_&&(O=_he(O)),M&&+O==0&&y!=="+"&&(M=!1),E=(M?y==="("?y:l:y==="-"||y==="("?"":y)+E,R=(j==="s"?SA[8+wL/3]:"")+R+(M&&y==="("?")":""),N){for(P=-1,T=O.length;++P<T;)if(I=O.charCodeAt(P),48>I||I>57){R=(I===46?a+O.slice(P+1):O.slice(P))+R,O=O.slice(0,P);break}}}x&&!p&&(O=t(O,1/0));var D=E.length+O.length+R.length,B=D<v?new Array(v-D+1).join(h):"";switch(x&&p&&(O=t(B+O,B.length?v-R.length:1/0),B=""),m){case"<":O=E+O+R+B;break;case"=":O=E+B+O+R;break;case"^":O=B.slice(0,D=B.length>>1)+E+O+R+B.slice(D);break;default:O=B+E+O+R;break}return i(O)}return A.toString=function(){return f+""},A}function d(f,h){var m=u((f=vm(f),f.type="f",f)),y=Math.max(-8,Math.min(8,Math.floor(ed(h)/3)))*3,g=Math.pow(10,-y),p=SA[8+y/3];return function(v){return m(g*v)+p}}return{format:u,formatPrefix:d}}var ag,uN,jL;Nhe({thousands:",",grouping:[3],currency:["$",""]});function Nhe(e){return ag=Che(e),uN=ag.format,jL=ag.formatPrefix,ag}function khe(e){return Math.max(0,-ed(Math.abs(e)))}function Phe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ed(t)/3)))*3-ed(Math.abs(e)))}function Ehe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,ed(t)-ed(e))+1}function _L(e,t,r,n){var a=V1(e,t,r),i;switch(n=vm(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=Phe(a,o))&&(n.precision=i),jL(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=Ehe(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=khe(a))&&(n.precision=i-(n.type==="%")*2);break}}return uN(n)}function tl(e){var t=e.domain;return e.ticks=function(r){var n=t();return z1(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return _L(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,i=n.length-1,o=n[a],l=n[i],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=a,a=i,i=u);d-- >0;){if(u=U1(o,l,r),u===c)return n[a]=o,n[i]=l,t(n);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function Xv(){var e=lN();return e.copy=function(){return mp(e,Xv())},Ga.apply(e,arguments),tl(e)}function SL(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,Gv),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return SL(e).unknown(t)},e=arguments.length?Array.from(e,Gv):[0,1],tl(r)}function CL(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],i=e[n],o;return i<a&&(o=r,r=n,n=o,o=a,a=i,i=o),e[r]=t.floor(a),e[n]=t.ceil(i),e}function CA(e){return Math.log(e)}function NA(e){return Math.exp(e)}function Ahe(e){return-Math.log(-e)}function Ohe(e){return-Math.exp(-e)}function The(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Rhe(e){return e===10?The:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Mhe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function kA(e){return(t,r)=>-e(-t,r)}function dN(e){const t=e(CA,NA),r=t.domain;let n=10,a,i;function o(){return a=Mhe(n),i=Rhe(n),r()[0]<0?(a=kA(a),i=kA(i),e(Ahe,Ohe)):e(CA,NA),t}return t.base=function(l){return arguments.length?(n=+l,o()):n},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let h=a(u),m=a(d),y,g;const p=l==null?10:+l;let v=[];if(!(n%1)&&m-h<p){if(h=Math.floor(h),m=Math.ceil(m),u>0){for(;h<=m;++h)for(y=1;y<n;++y)if(g=h<0?y/i(-h):y*i(h),!(g<u)){if(g>d)break;v.push(g)}}else for(;h<=m;++h)for(y=n-1;y>=1;--y)if(g=h>0?y/i(-h):y*i(h),!(g<u)){if(g>d)break;v.push(g)}v.length*2<p&&(v=z1(u,d,p))}else v=z1(h,m,Math.min(m-h,p)).map(i);return f?v.reverse():v},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=vm(c)).precision==null&&(c.trim=!0),c=uN(c)),l===1/0)return c;const u=Math.max(1,n*l/t.ticks().length);return d=>{let f=d/i(Math.round(a(d)));return f*n<n-.5&&(f*=n),f<=u?c(d):""}},t.nice=()=>r(CL(r(),{floor:l=>i(Math.floor(a(l))),ceil:l=>i(Math.ceil(a(l)))})),t}function NL(){const e=dN(o0()).domain([1,10]);return e.copy=()=>mp(e,NL()).base(e.base()),Ga.apply(e,arguments),e}function PA(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function EA(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function fN(e){var t=1,r=e(PA(t),EA(t));return r.constant=function(n){return arguments.length?e(PA(t=+n),EA(t)):t},tl(r)}function kL(){var e=fN(o0());return e.copy=function(){return mp(e,kL()).constant(e.constant())},Ga.apply(e,arguments)}function AA(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function $he(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Ihe(e){return e<0?-e*e:e*e}function hN(e){var t=e(Wn,Wn),r=1;function n(){return r===1?e(Wn,Wn):r===.5?e($he,Ihe):e(AA(r),AA(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},tl(t)}function mN(){var e=hN(o0());return e.copy=function(){return mp(e,mN()).exponent(e.exponent())},Ga.apply(e,arguments),e}function Dhe(){return mN.apply(null,arguments).exponent(.5)}function OA(e){return Math.sign(e)*e*e}function Lhe(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function PL(){var e=lN(),t=[0,1],r=!1,n;function a(i){var o=Lhe(e(i));return isNaN(o)?n:r?Math.round(o):o}return a.invert=function(i){return e.invert(OA(i))},a.domain=function(i){return arguments.length?(e.domain(i),a):e.domain()},a.range=function(i){return arguments.length?(e.range((t=Array.from(i,Gv)).map(OA)),a):t.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(r=!!i,a):r},a.clamp=function(i){return arguments.length?(e.clamp(i),a):e.clamp()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return PL(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Ga.apply(a,arguments),tl(a)}function EL(){var e=[],t=[],r=[],n;function a(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=Vfe(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?n:t[fp(r,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(Ro),a()},i.range=function(o){return arguments.length?(t=Array.from(o),a()):t.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return EL().domain(e).range(t).unknown(n)},Ga.apply(i,arguments)}function AL(){var e=0,t=1,r=1,n=[.5],a=[0,1],i;function o(c){return c!=null&&c<=c?a[fp(n,c,0,r)]:i}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,l()):a.slice()},o.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return AL().domain([e,t]).range(a).unknown(i)},Ga.apply(tl(o),arguments)}function OL(){var e=[.5],t=[0,1],r,n=1;function a(i){return i!=null&&i<=i?t[fp(e,i,0,n)]:r}return a.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return OL().domain(e).range(t).unknown(r)},Ga.apply(a,arguments)}const iw=new Date,sw=new Date;function sn(e,t,r,n){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(e(i=new Date(+i)),i),a.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),a.round=i=>{const o=a(i),l=a.ceil(i);return i-o<l-i?o:l},a.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),a.range=(i,o,l)=>{const c=[];if(i=a.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let u;do c.push(u=new Date(+i)),t(i,l),e(i);while(u<i&&i<o);return c},a.filter=i=>sn(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),r&&(a.count=(i,o)=>(iw.setTime(+i),sw.setTime(+o),e(iw),e(sw),Math.floor(r(iw,sw))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(n?o=>n(o)%i===0:o=>a.count(0,o)%i===0):a)),a}const Zv=sn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Zv.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?sn(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Zv);Zv.range;const xs=1e3,Da=xs*60,bs=Da*60,Ts=bs*24,pN=Ts*7,TA=Ts*30,ow=Ts*365,Rl=sn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*xs)},(e,t)=>(t-e)/xs,e=>e.getUTCSeconds());Rl.range;const gN=sn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*xs)},(e,t)=>{e.setTime(+e+t*Da)},(e,t)=>(t-e)/Da,e=>e.getMinutes());gN.range;const vN=sn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Da)},(e,t)=>(t-e)/Da,e=>e.getUTCMinutes());vN.range;const yN=sn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*xs-e.getMinutes()*Da)},(e,t)=>{e.setTime(+e+t*bs)},(e,t)=>(t-e)/bs,e=>e.getHours());yN.range;const xN=sn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*bs)},(e,t)=>(t-e)/bs,e=>e.getUTCHours());xN.range;const pp=sn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Da)/Ts,e=>e.getDate()-1);pp.range;const l0=sn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ts,e=>e.getUTCDate()-1);l0.range;const TL=sn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ts,e=>Math.floor(e/Ts));TL.range;function yc(e){return sn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Da)/pN)}const c0=yc(0),Qv=yc(1),Bhe=yc(2),Fhe=yc(3),td=yc(4),zhe=yc(5),Uhe=yc(6);c0.range;Qv.range;Bhe.range;Fhe.range;td.range;zhe.range;Uhe.range;function xc(e){return sn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/pN)}const u0=xc(0),Jv=xc(1),Vhe=xc(2),Whe=xc(3),rd=xc(4),Hhe=xc(5),qhe=xc(6);u0.range;Jv.range;Vhe.range;Whe.range;rd.range;Hhe.range;qhe.range;const bN=sn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());bN.range;const wN=sn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());wN.range;const Rs=sn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Rs.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:sn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Rs.range;const Ms=sn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ms.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:sn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Ms.range;function RL(e,t,r,n,a,i){const o=[[Rl,1,xs],[Rl,5,5*xs],[Rl,15,15*xs],[Rl,30,30*xs],[i,1,Da],[i,5,5*Da],[i,15,15*Da],[i,30,30*Da],[a,1,bs],[a,3,3*bs],[a,6,6*bs],[a,12,12*bs],[n,1,Ts],[n,2,2*Ts],[r,1,pN],[t,1,TA],[t,3,3*TA],[e,1,ow]];function l(u,d,f){const h=d<u;h&&([u,d]=[d,u]);const m=f&&typeof f.range=="function"?f:c(u,d,f),y=m?m.range(u,+d+1):[];return h?y.reverse():y}function c(u,d,f){const h=Math.abs(d-u)/f,m=nN(([,,p])=>p).right(o,h);if(m===o.length)return e.every(V1(u/ow,d/ow,f));if(m===0)return Zv.every(Math.max(V1(u,d,f),1));const[y,g]=o[h/o[m-1][2]<o[m][2]/h?m-1:m];return y.every(g)}return[l,c]}const[Khe,Ghe]=RL(Ms,wN,u0,TL,xN,vN),[Yhe,Xhe]=RL(Rs,bN,c0,pp,yN,gN);function lw(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function cw(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Ef(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function Zhe(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,u=Af(a),d=Of(a),f=Af(i),h=Of(i),m=Af(o),y=Of(o),g=Af(l),p=Of(l),v=Af(c),x=Of(c),b={a:M,A:D,b:B,B:z,c:null,d:LA,e:LA,f:bme,g:Ame,G:Tme,H:vme,I:yme,j:xme,L:ML,m:wme,M:jme,p:Z,q:J,Q:zA,s:UA,S:_me,u:Sme,U:Cme,V:Nme,w:kme,W:Pme,x:null,X:null,y:Eme,Y:Ome,Z:Rme,"%":FA},_={a:se,A:U,b:q,B:G,c:null,d:BA,e:BA,f:Dme,g:Kme,G:Yme,H:Mme,I:$me,j:Ime,L:IL,m:Lme,M:Bme,p:H,q:fe,Q:zA,s:UA,S:Fme,u:zme,U:Ume,V:Vme,w:Wme,W:Hme,x:null,X:null,y:qme,Y:Gme,Z:Xme,"%":FA},j={a:A,A:O,b:E,B:R,c:P,d:IA,e:IA,f:hme,g:$A,G:MA,H:DA,I:DA,j:cme,L:fme,m:lme,M:ume,p:N,q:ome,Q:pme,s:gme,S:dme,u:rme,U:nme,V:ame,w:tme,W:ime,x:T,X:I,y:$A,Y:MA,Z:sme,"%":mme};b.x=S(r,b),b.X=S(n,b),b.c=S(t,b),_.x=S(r,_),_.X=S(n,_),_.c=S(t,_);function S(L,Y){return function(V){var Q=[],te=-1,be=0,Re=L.length,We,ge,ke;for(V instanceof Date||(V=new Date(+V));++te<Re;)L.charCodeAt(te)===37&&(Q.push(L.slice(be,te)),(ge=RA[We=L.charAt(++te)])!=null?We=L.charAt(++te):ge=We==="e"?" ":"0",(ke=Y[We])&&(We=ke(V,ge)),Q.push(We),be=te+1);return Q.push(L.slice(be,te)),Q.join("")}}function C(L,Y){return function(V){var Q=Ef(1900,void 0,1),te=k(Q,L,V+="",0),be,Re;if(te!=V.length)return null;if("Q"in Q)return new Date(Q.Q);if("s"in Q)return new Date(Q.s*1e3+("L"in Q?Q.L:0));if(Y&&!("Z"in Q)&&(Q.Z=0),"p"in Q&&(Q.H=Q.H%12+Q.p*12),Q.m===void 0&&(Q.m="q"in Q?Q.q:0),"V"in Q){if(Q.V<1||Q.V>53)return null;"w"in Q||(Q.w=1),"Z"in Q?(be=cw(Ef(Q.y,0,1)),Re=be.getUTCDay(),be=Re>4||Re===0?Jv.ceil(be):Jv(be),be=l0.offset(be,(Q.V-1)*7),Q.y=be.getUTCFullYear(),Q.m=be.getUTCMonth(),Q.d=be.getUTCDate()+(Q.w+6)%7):(be=lw(Ef(Q.y,0,1)),Re=be.getDay(),be=Re>4||Re===0?Qv.ceil(be):Qv(be),be=pp.offset(be,(Q.V-1)*7),Q.y=be.getFullYear(),Q.m=be.getMonth(),Q.d=be.getDate()+(Q.w+6)%7)}else("W"in Q||"U"in Q)&&("w"in Q||(Q.w="u"in Q?Q.u%7:"W"in Q?1:0),Re="Z"in Q?cw(Ef(Q.y,0,1)).getUTCDay():lw(Ef(Q.y,0,1)).getDay(),Q.m=0,Q.d="W"in Q?(Q.w+6)%7+Q.W*7-(Re+5)%7:Q.w+Q.U*7-(Re+6)%7);return"Z"in Q?(Q.H+=Q.Z/100|0,Q.M+=Q.Z%100,cw(Q)):lw(Q)}}function k(L,Y,V,Q){for(var te=0,be=Y.length,Re=V.length,We,ge;te<be;){if(Q>=Re)return-1;if(We=Y.charCodeAt(te++),We===37){if(We=Y.charAt(te++),ge=j[We in RA?Y.charAt(te++):We],!ge||(Q=ge(L,V,Q))<0)return-1}else if(We!=V.charCodeAt(Q++))return-1}return Q}function N(L,Y,V){var Q=u.exec(Y.slice(V));return Q?(L.p=d.get(Q[0].toLowerCase()),V+Q[0].length):-1}function A(L,Y,V){var Q=m.exec(Y.slice(V));return Q?(L.w=y.get(Q[0].toLowerCase()),V+Q[0].length):-1}function O(L,Y,V){var Q=f.exec(Y.slice(V));return Q?(L.w=h.get(Q[0].toLowerCase()),V+Q[0].length):-1}function E(L,Y,V){var Q=v.exec(Y.slice(V));return Q?(L.m=x.get(Q[0].toLowerCase()),V+Q[0].length):-1}function R(L,Y,V){var Q=g.exec(Y.slice(V));return Q?(L.m=p.get(Q[0].toLowerCase()),V+Q[0].length):-1}function P(L,Y,V){return k(L,t,Y,V)}function T(L,Y,V){return k(L,r,Y,V)}function I(L,Y,V){return k(L,n,Y,V)}function M(L){return o[L.getDay()]}function D(L){return i[L.getDay()]}function B(L){return c[L.getMonth()]}function z(L){return l[L.getMonth()]}function Z(L){return a[+(L.getHours()>=12)]}function J(L){return 1+~~(L.getMonth()/3)}function se(L){return o[L.getUTCDay()]}function U(L){return i[L.getUTCDay()]}function q(L){return c[L.getUTCMonth()]}function G(L){return l[L.getUTCMonth()]}function H(L){return a[+(L.getUTCHours()>=12)]}function fe(L){return 1+~~(L.getUTCMonth()/3)}return{format:function(L){var Y=S(L+="",b);return Y.toString=function(){return L},Y},parse:function(L){var Y=C(L+="",!1);return Y.toString=function(){return L},Y},utcFormat:function(L){var Y=S(L+="",_);return Y.toString=function(){return L},Y},utcParse:function(L){var Y=C(L+="",!0);return Y.toString=function(){return L},Y}}}var RA={"-":"",_:" ",0:"0"},mn=/^\s*\d+/,Qhe=/^%/,Jhe=/[\\^$*+?|[\]().{}]/g;function It(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(t)+a:a)}function eme(e){return e.replace(Jhe,"\\$&")}function Af(e){return new RegExp("^(?:"+e.map(eme).join("|")+")","i")}function Of(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function tme(e,t,r){var n=mn.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function rme(e,t,r){var n=mn.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function nme(e,t,r){var n=mn.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function ame(e,t,r){var n=mn.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function ime(e,t,r){var n=mn.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function MA(e,t,r){var n=mn.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function $A(e,t,r){var n=mn.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function sme(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function ome(e,t,r){var n=mn.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function lme(e,t,r){var n=mn.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function IA(e,t,r){var n=mn.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function cme(e,t,r){var n=mn.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function DA(e,t,r){var n=mn.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function ume(e,t,r){var n=mn.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function dme(e,t,r){var n=mn.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function fme(e,t,r){var n=mn.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function hme(e,t,r){var n=mn.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function mme(e,t,r){var n=Qhe.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function pme(e,t,r){var n=mn.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function gme(e,t,r){var n=mn.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function LA(e,t){return It(e.getDate(),t,2)}function vme(e,t){return It(e.getHours(),t,2)}function yme(e,t){return It(e.getHours()%12||12,t,2)}function xme(e,t){return It(1+pp.count(Rs(e),e),t,3)}function ML(e,t){return It(e.getMilliseconds(),t,3)}function bme(e,t){return ML(e,t)+"000"}function wme(e,t){return It(e.getMonth()+1,t,2)}function jme(e,t){return It(e.getMinutes(),t,2)}function _me(e,t){return It(e.getSeconds(),t,2)}function Sme(e){var t=e.getDay();return t===0?7:t}function Cme(e,t){return It(c0.count(Rs(e)-1,e),t,2)}function $L(e){var t=e.getDay();return t>=4||t===0?td(e):td.ceil(e)}function Nme(e,t){return e=$L(e),It(td.count(Rs(e),e)+(Rs(e).getDay()===4),t,2)}function kme(e){return e.getDay()}function Pme(e,t){return It(Qv.count(Rs(e)-1,e),t,2)}function Eme(e,t){return It(e.getFullYear()%100,t,2)}function Ame(e,t){return e=$L(e),It(e.getFullYear()%100,t,2)}function Ome(e,t){return It(e.getFullYear()%1e4,t,4)}function Tme(e,t){var r=e.getDay();return e=r>=4||r===0?td(e):td.ceil(e),It(e.getFullYear()%1e4,t,4)}function Rme(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+It(t/60|0,"0",2)+It(t%60,"0",2)}function BA(e,t){return It(e.getUTCDate(),t,2)}function Mme(e,t){return It(e.getUTCHours(),t,2)}function $me(e,t){return It(e.getUTCHours()%12||12,t,2)}function Ime(e,t){return It(1+l0.count(Ms(e),e),t,3)}function IL(e,t){return It(e.getUTCMilliseconds(),t,3)}function Dme(e,t){return IL(e,t)+"000"}function Lme(e,t){return It(e.getUTCMonth()+1,t,2)}function Bme(e,t){return It(e.getUTCMinutes(),t,2)}function Fme(e,t){return It(e.getUTCSeconds(),t,2)}function zme(e){var t=e.getUTCDay();return t===0?7:t}function Ume(e,t){return It(u0.count(Ms(e)-1,e),t,2)}function DL(e){var t=e.getUTCDay();return t>=4||t===0?rd(e):rd.ceil(e)}function Vme(e,t){return e=DL(e),It(rd.count(Ms(e),e)+(Ms(e).getUTCDay()===4),t,2)}function Wme(e){return e.getUTCDay()}function Hme(e,t){return It(Jv.count(Ms(e)-1,e),t,2)}function qme(e,t){return It(e.getUTCFullYear()%100,t,2)}function Kme(e,t){return e=DL(e),It(e.getUTCFullYear()%100,t,2)}function Gme(e,t){return It(e.getUTCFullYear()%1e4,t,4)}function Yme(e,t){var r=e.getUTCDay();return e=r>=4||r===0?rd(e):rd.ceil(e),It(e.getUTCFullYear()%1e4,t,4)}function Xme(){return"+0000"}function FA(){return"%"}function zA(e){return+e}function UA(e){return Math.floor(+e/1e3)}var Ec,LL,BL;Zme({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Zme(e){return Ec=Zhe(e),LL=Ec.format,Ec.parse,BL=Ec.utcFormat,Ec.utcParse,Ec}function Qme(e){return new Date(e)}function Jme(e){return e instanceof Date?+e:+new Date(+e)}function jN(e,t,r,n,a,i,o,l,c,u){var d=lN(),f=d.invert,h=d.domain,m=u(".%L"),y=u(":%S"),g=u("%I:%M"),p=u("%I %p"),v=u("%a %d"),x=u("%b %d"),b=u("%B"),_=u("%Y");function j(S){return(c(S)<S?m:l(S)<S?y:o(S)<S?g:i(S)<S?p:n(S)<S?a(S)<S?v:x:r(S)<S?b:_)(S)}return d.invert=function(S){return new Date(f(S))},d.domain=function(S){return arguments.length?h(Array.from(S,Jme)):h().map(Qme)},d.ticks=function(S){var C=h();return e(C[0],C[C.length-1],S??10)},d.tickFormat=function(S,C){return C==null?j:u(C)},d.nice=function(S){var C=h();return(!S||typeof S.range!="function")&&(S=t(C[0],C[C.length-1],S??10)),S?h(CL(C,S)):d},d.copy=function(){return mp(d,jN(e,t,r,n,a,i,o,l,c,u))},d}function epe(){return Ga.apply(jN(Yhe,Xhe,Rs,bN,c0,pp,yN,gN,Rl,LL).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function tpe(){return Ga.apply(jN(Khe,Ghe,Ms,wN,u0,l0,xN,vN,Rl,BL).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function d0(){var e=0,t=1,r,n,a,i,o=Wn,l=!1,c;function u(f){return f==null||isNaN(f=+f)?c:o(a===0?.5:(f=(i(f)-r)*a,l?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=i(e=+e),n=i(t=+t),a=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(f){return arguments.length?(l=!!f,u):l},u.interpolator=function(f){return arguments.length?(o=f,u):o};function d(f){return function(h){var m,y;return arguments.length?([m,y]=h,o=f(m,y),u):[o(0),o(1)]}}return u.range=d(of),u.rangeRound=d(oN),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return i=f,r=f(e),n=f(t),a=r===n?0:1/(n-r),u}}function rl(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function FL(){var e=tl(d0()(Wn));return e.copy=function(){return rl(e,FL())},Vs.apply(e,arguments)}function zL(){var e=dN(d0()).domain([1,10]);return e.copy=function(){return rl(e,zL()).base(e.base())},Vs.apply(e,arguments)}function UL(){var e=fN(d0());return e.copy=function(){return rl(e,UL()).constant(e.constant())},Vs.apply(e,arguments)}function _N(){var e=hN(d0());return e.copy=function(){return rl(e,_N()).exponent(e.exponent())},Vs.apply(e,arguments)}function rpe(){return _N.apply(null,arguments).exponent(.5)}function VL(){var e=[],t=Wn;function r(n){if(n!=null&&!isNaN(n=+n))return t((fp(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Ro),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,i)=>Ufe(e,i/n))},r.copy=function(){return VL(t).domain(e)},Vs.apply(r,arguments)}function f0(){var e=0,t=.5,r=1,n=1,a,i,o,l,c,u=Wn,d,f=!1,h;function m(g){return isNaN(g=+g)?h:(g=.5+((g=+d(g))-i)*(n*g<n*i?l:c),u(f?Math.max(0,Math.min(1,g)):g))}m.domain=function(g){return arguments.length?([e,t,r]=g,a=d(e=+e),i=d(t=+t),o=d(r=+r),l=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),n=i<a?-1:1,m):[e,t,r]},m.clamp=function(g){return arguments.length?(f=!!g,m):f},m.interpolator=function(g){return arguments.length?(u=g,m):u};function y(g){return function(p){var v,x,b;return arguments.length?([v,x,b]=p,u=mhe(g,[v,x,b]),m):[u(0),u(.5),u(1)]}}return m.range=y(of),m.rangeRound=y(oN),m.unknown=function(g){return arguments.length?(h=g,m):h},function(g){return d=g,a=g(e),i=g(t),o=g(r),l=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),n=i<a?-1:1,m}}function WL(){var e=tl(f0()(Wn));return e.copy=function(){return rl(e,WL())},Vs.apply(e,arguments)}function HL(){var e=dN(f0()).domain([.1,1,10]);return e.copy=function(){return rl(e,HL()).base(e.base())},Vs.apply(e,arguments)}function qL(){var e=fN(f0());return e.copy=function(){return rl(e,qL()).constant(e.constant())},Vs.apply(e,arguments)}function SN(){var e=hN(f0());return e.copy=function(){return rl(e,SN()).exponent(e.exponent())},Vs.apply(e,arguments)}function npe(){return SN.apply(null,arguments).exponent(.5)}const VA=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:hm,scaleDiverging:WL,scaleDivergingLog:HL,scaleDivergingPow:SN,scaleDivergingSqrt:npe,scaleDivergingSymlog:qL,scaleIdentity:SL,scaleImplicit:W1,scaleLinear:Xv,scaleLog:NL,scaleOrdinal:aN,scalePoint:mh,scalePow:mN,scaleQuantile:EL,scaleQuantize:AL,scaleRadial:PL,scaleSequential:FL,scaleSequentialLog:zL,scaleSequentialPow:_N,scaleSequentialQuantile:VL,scaleSequentialSqrt:rpe,scaleSequentialSymlog:UL,scaleSqrt:Dhe,scaleSymlog:kL,scaleThreshold:OL,scaleTime:epe,scaleUtc:tpe,tickFormat:_L},Symbol.toStringTag,{value:"Module"}));var ape=Zd;function ipe(e,t,r){for(var n=-1,a=e.length;++n<a;){var i=e[n],o=t(i);if(o!=null&&(l===void 0?o===o&&!ape(o):r(o,l)))var l=o,c=i}return c}var h0=ipe;function spe(e,t){return e>t}var KL=spe,ope=h0,lpe=KL,cpe=sf;function upe(e){return e&&e.length?ope(e,cpe,lpe):void 0}var dpe=upe;const vo=Bt(dpe);function fpe(e,t){return e<t}var GL=fpe,hpe=h0,mpe=GL,ppe=sf;function gpe(e){return e&&e.length?hpe(e,ppe,mpe):void 0}var vpe=gpe;const m0=Bt(vpe);var ype=BC,xpe=as,bpe=rL,wpe=la;function jpe(e,t){var r=wpe(e)?ype:bpe;return r(e,xpe(t))}var _pe=jpe,Spe=eL,Cpe=_pe;function Npe(e,t){return Spe(Cpe(e,t),1)}var kpe=Npe;const Ppe=Bt(kpe);var Epe=JC;function Ape(e,t){return Epe(e,t)}var Ope=Ape;const Wo=Bt(Ope);var lf=1e9,Tpe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},NN,_r=!0,Wa="[DecimalError] ",Gl=Wa+"Invalid argument: ",CN=Wa+"Exponent out of range: ",cf=Math.floor,bl=Math.pow,Rpe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,va,cn=1e7,yr=7,YL=9007199254740991,ey=cf(YL/yr),Be={};Be.absoluteValue=Be.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Be.comparedTo=Be.cmp=function(e){var t,r,n,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===a?0:n>a^i.s<0?1:-1};Be.decimalPlaces=Be.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*yr;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Be.dividedBy=Be.div=function(e){return Cs(this,new this.constructor(e))};Be.dividedToIntegerBy=Be.idiv=function(e){var t=this,r=t.constructor;return rr(Cs(t,new r(e),0,1),r.precision)};Be.equals=Be.eq=function(e){return!this.cmp(e)};Be.exponent=function(){return Gr(this)};Be.greaterThan=Be.gt=function(e){return this.cmp(e)>0};Be.greaterThanOrEqualTo=Be.gte=function(e){return this.cmp(e)>=0};Be.isInteger=Be.isint=function(){return this.e>this.d.length-2};Be.isNegative=Be.isneg=function(){return this.s<0};Be.isPositive=Be.ispos=function(){return this.s>0};Be.isZero=function(){return this.s===0};Be.lessThan=Be.lt=function(e){return this.cmp(e)<0};Be.lessThanOrEqualTo=Be.lte=function(e){return this.cmp(e)<1};Be.logarithm=Be.log=function(e){var t,r=this,n=r.constructor,a=n.precision,i=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(va))throw Error(Wa+"NaN");if(r.s<1)throw Error(Wa+(r.s?"NaN":"-Infinity"));return r.eq(va)?new n(0):(_r=!1,t=Cs(ym(r,i),ym(e,i),i),_r=!0,rr(t,a))};Be.minus=Be.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?QL(t,e):XL(t,(e.s=-e.s,e))};Be.modulo=Be.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(Wa+"NaN");return r.s?(_r=!1,t=Cs(r,e,0,1).times(e),_r=!0,r.minus(t)):rr(new n(r),a)};Be.naturalExponential=Be.exp=function(){return ZL(this)};Be.naturalLogarithm=Be.ln=function(){return ym(this)};Be.negated=Be.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Be.plus=Be.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?XL(t,e):QL(t,(e.s=-e.s,e))};Be.precision=Be.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Gl+e);if(t=Gr(a)+1,n=a.d.length-1,r=n*yr+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Be.squareRoot=Be.sqrt=function(){var e,t,r,n,a,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Wa+"NaN")}for(e=Gr(l),_r=!1,a=Math.sqrt(+l),a==0||a==1/0?(t=zi(l.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=cf((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(a.toString()),r=c.precision,a=o=r+3;;)if(i=n,n=i.plus(Cs(l,i,o+2)).times(.5),zi(i.d).slice(0,o)===(t=zi(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),a==o&&t=="4999"){if(rr(i,r+1,0),i.times(i).eq(l)){n=i;break}}else if(t!="9999")break;o+=4}return _r=!0,rr(n,r)};Be.times=Be.mul=function(e){var t,r,n,a,i,o,l,c,u,d=this,f=d.constructor,h=d.d,m=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,c=h.length,u=m.length,c<u&&(i=h,h=m,m=i,o=c,c=u,u=o),i=[],o=c+u,n=o;n--;)i.push(0);for(n=u;--n>=0;){for(t=0,a=c+n;a>n;)l=i[a]+m[n]*h[a-n-1]+t,i[a--]=l%cn|0,t=l/cn|0;i[a]=(i[a]+t)%cn|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,_r?rr(e,f.precision):e};Be.toDecimalPlaces=Be.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(Ji(e,0,lf),t===void 0?t=n.rounding:Ji(t,0,8),rr(r,e+Gr(r)+1,t))};Be.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=sc(n,!0):(Ji(e,0,lf),t===void 0?t=a.rounding:Ji(t,0,8),n=rr(new a(n),e+1,t),r=sc(n,!0,e+1)),r};Be.toFixed=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?sc(a):(Ji(e,0,lf),t===void 0?t=i.rounding:Ji(t,0,8),n=rr(new i(a),e+Gr(a)+1,t),r=sc(n.abs(),!1,e+Gr(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};Be.toInteger=Be.toint=function(){var e=this,t=e.constructor;return rr(new t(e),Gr(e)+1,t.rounding)};Be.toNumber=function(){return+this};Be.toPower=Be.pow=function(e){var t,r,n,a,i,o,l=this,c=l.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(va);if(l=new c(l),!l.s){if(e.s<1)throw Error(Wa+"Infinity");return l}if(l.eq(va))return l;if(n=c.precision,e.eq(va))return rr(l,n);if(t=e.e,r=e.d.length-1,o=t>=r,i=l.s,o){if((r=d<0?-d:d)<=YL){for(a=new c(va),t=Math.ceil(n/yr+4),_r=!1;r%2&&(a=a.times(l),HA(a.d,t)),r=cf(r/2),r!==0;)l=l.times(l),HA(l.d,t);return _r=!0,e.s<0?new c(va).div(a):rr(a,n)}}else if(i<0)throw Error(Wa+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,_r=!1,a=e.times(ym(l,n+u)),_r=!0,a=ZL(a),a.s=i,a};Be.toPrecision=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?(r=Gr(a),n=sc(a,r<=i.toExpNeg||r>=i.toExpPos)):(Ji(e,1,lf),t===void 0?t=i.rounding:Ji(t,0,8),a=rr(new i(a),e,t),r=Gr(a),n=sc(a,e<=r||r<=i.toExpNeg,e)),n};Be.toSignificantDigits=Be.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(Ji(e,1,lf),t===void 0?t=n.rounding:Ji(t,0,8)),rr(new n(r),e,t)};Be.toString=Be.valueOf=Be.val=Be.toJSON=Be[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Gr(e),r=e.constructor;return sc(e,t<=r.toExpNeg||t>=r.toExpPos)};function XL(e,t){var r,n,a,i,o,l,c,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),_r?rr(t,f):t;if(c=e.d,u=t.d,o=e.e,a=t.e,c=c.slice(),i=o-a,i){for(i<0?(n=c,i=-i,l=u.length):(n=u,a=o,l=c.length),o=Math.ceil(f/yr),l=o>l?o+1:l+1,i>l&&(i=l,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(l=c.length,i=u.length,l-i<0&&(i=l,n=u,u=c,c=n),r=0;i;)r=(c[--i]=c[i]+u[i]+r)/cn|0,c[i]%=cn;for(r&&(c.unshift(r),++a),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=a,_r?rr(t,f):t}function Ji(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Gl+e)}function zi(e){var t,r,n,a=e.length-1,i="",o=e[0];if(a>0){for(i+=o,t=1;t<a;t++)n=e[t]+"",r=yr-n.length,r&&(i+=ro(r)),i+=n;o=e[t],n=o+"",r=yr-n.length,r&&(i+=ro(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var Cs=function(){function e(n,a){var i,o=0,l=n.length;for(n=n.slice();l--;)i=n[l]*a+o,n[l]=i%cn|0,o=i/cn|0;return o&&n.unshift(o),n}function t(n,a,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(n[l]!=a[l]){c=n[l]>a[l]?1:-1;break}return c}function r(n,a,i){for(var o=0;i--;)n[i]-=o,o=n[i]<a[i]?1:0,n[i]=o*cn+n[i]-a[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,i,o){var l,c,u,d,f,h,m,y,g,p,v,x,b,_,j,S,C,k,N=n.constructor,A=n.s==a.s?1:-1,O=n.d,E=a.d;if(!n.s)return new N(n);if(!a.s)throw Error(Wa+"Division by zero");for(c=n.e-a.e,C=E.length,j=O.length,m=new N(A),y=m.d=[],u=0;E[u]==(O[u]||0);)++u;if(E[u]>(O[u]||0)&&--c,i==null?x=i=N.precision:o?x=i+(Gr(n)-Gr(a))+1:x=i,x<0)return new N(0);if(x=x/yr+2|0,u=0,C==1)for(d=0,E=E[0],x++;(u<j||d)&&x--;u++)b=d*cn+(O[u]||0),y[u]=b/E|0,d=b%E|0;else{for(d=cn/(E[0]+1)|0,d>1&&(E=e(E,d),O=e(O,d),C=E.length,j=O.length),_=C,g=O.slice(0,C),p=g.length;p<C;)g[p++]=0;k=E.slice(),k.unshift(0),S=E[0],E[1]>=cn/2&&++S;do d=0,l=t(E,g,C,p),l<0?(v=g[0],C!=p&&(v=v*cn+(g[1]||0)),d=v/S|0,d>1?(d>=cn&&(d=cn-1),f=e(E,d),h=f.length,p=g.length,l=t(f,g,h,p),l==1&&(d--,r(f,C<h?k:E,h))):(d==0&&(l=d=1),f=E.slice()),h=f.length,h<p&&f.unshift(0),r(g,f,p),l==-1&&(p=g.length,l=t(E,g,C,p),l<1&&(d++,r(g,C<p?k:E,p))),p=g.length):l===0&&(d++,g=[0]),y[u++]=d,l&&g[0]?g[p++]=O[_]||0:(g=[O[_]],p=1);while((_++<j||g[0]!==void 0)&&x--)}return y[0]||y.shift(),m.e=c,rr(m,o?i+Gr(m)+1:i)}}();function ZL(e,t){var r,n,a,i,o,l,c=0,u=0,d=e.constructor,f=d.precision;if(Gr(e)>16)throw Error(CN+Gr(e));if(!e.s)return new d(va);for(t==null?(_r=!1,l=f):l=t,o=new d(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(n=Math.log(bl(2,u))/Math.LN10*2+5|0,l+=n,r=a=i=new d(va),d.precision=l;;){if(a=rr(a.times(e),l),r=r.times(++c),o=i.plus(Cs(a,r,l)),zi(o.d).slice(0,l)===zi(i.d).slice(0,l)){for(;u--;)i=rr(i.times(i),l);return d.precision=f,t==null?(_r=!0,rr(i,f)):i}i=o}}function Gr(e){for(var t=e.e*yr,r=e.d[0];r>=10;r/=10)t++;return t}function uw(e,t,r){if(t>e.LN10.sd())throw _r=!0,r&&(e.precision=r),Error(Wa+"LN10 precision limit exceeded");return rr(new e(e.LN10),t)}function ro(e){for(var t="";e--;)t+="0";return t}function ym(e,t){var r,n,a,i,o,l,c,u,d,f=1,h=10,m=e,y=m.d,g=m.constructor,p=g.precision;if(m.s<1)throw Error(Wa+(m.s?"NaN":"-Infinity"));if(m.eq(va))return new g(0);if(t==null?(_r=!1,u=p):u=t,m.eq(10))return t==null&&(_r=!0),uw(g,u);if(u+=h,g.precision=u,r=zi(y),n=r.charAt(0),i=Gr(m),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)m=m.times(e),r=zi(m.d),n=r.charAt(0),f++;i=Gr(m),n>1?(m=new g("0."+r),i++):m=new g(n+"."+r.slice(1))}else return c=uw(g,u+2,p).times(i+""),m=ym(new g(n+"."+r.slice(1)),u-h).plus(c),g.precision=p,t==null?(_r=!0,rr(m,p)):m;for(l=o=m=Cs(m.minus(va),m.plus(va),u),d=rr(m.times(m),u),a=3;;){if(o=rr(o.times(d),u),c=l.plus(Cs(o,new g(a),u)),zi(c.d).slice(0,u)===zi(l.d).slice(0,u))return l=l.times(2),i!==0&&(l=l.plus(uw(g,u+2,p).times(i+""))),l=Cs(l,new g(f),u),g.precision=p,t==null?(_r=!0,rr(l,p)):l;l=c,a+=2}}function WA(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=cf(r/yr),e.d=[],n=(r+1)%yr,r<0&&(n+=yr),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=yr;n<a;)e.d.push(+t.slice(n,n+=yr));t=t.slice(n),n=yr-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),_r&&(e.e>ey||e.e<-ey))throw Error(CN+r)}else e.s=0,e.e=0,e.d=[0];return e}function rr(e,t,r){var n,a,i,o,l,c,u,d,f=e.d;for(o=1,i=f[0];i>=10;i/=10)o++;if(n=t-o,n<0)n+=yr,a=t,u=f[d=0];else{if(d=Math.ceil((n+1)/yr),i=f.length,d>=i)return e;for(u=i=f[d],o=1;i>=10;i/=10)o++;n%=yr,a=n-yr+o}if(r!==void 0&&(i=bl(10,o-a-1),l=u/i%10|0,c=t<0||f[d+1]!==void 0||u%i,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?a>0?u/bl(10,o-a):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return c?(i=Gr(e),f.length=1,t=t-i-1,f[0]=bl(10,(yr-t%yr)%yr),e.e=cf(-t/yr)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=d,i=1,d--):(f.length=d+1,i=bl(10,yr-n),f[d]=a>0?(u/bl(10,o-a)%bl(10,a)|0)*i:0),c)for(;;)if(d==0){(f[0]+=i)==cn&&(f[0]=1,++e.e);break}else{if(f[d]+=i,f[d]!=cn)break;f[d--]=0,i=1}for(n=f.length;f[--n]===0;)f.pop();if(_r&&(e.e>ey||e.e<-ey))throw Error(CN+Gr(e));return e}function QL(e,t){var r,n,a,i,o,l,c,u,d,f,h=e.constructor,m=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),_r?rr(t,m):t;if(c=e.d,f=t.d,n=t.e,u=e.e,c=c.slice(),o=u-n,o){for(d=o<0,d?(r=c,o=-o,l=f.length):(r=f,n=u,l=c.length),a=Math.max(Math.ceil(m/yr),l)+2,o>a&&(o=a,r.length=1),r.reverse(),a=o;a--;)r.push(0);r.reverse()}else{for(a=c.length,l=f.length,d=a<l,d&&(l=a),a=0;a<l;a++)if(c[a]!=f[a]){d=c[a]<f[a];break}o=0}for(d&&(r=c,c=f,f=r,t.s=-t.s),l=c.length,a=f.length-l;a>0;--a)c[l++]=0;for(a=f.length;a>o;){if(c[--a]<f[a]){for(i=a;i&&c[--i]===0;)c[i]=cn-1;--c[i],c[a]+=cn}c[a]-=f[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,_r?rr(t,m):t):new h(0)}function sc(e,t,r){var n,a=Gr(e),i=zi(e.d),o=i.length;return t?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+ro(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+ro(-a-1)+i,r&&(n=r-o)>0&&(i+=ro(n))):a>=o?(i+=ro(a+1-o),r&&(n=r-a-1)>0&&(i=i+"."+ro(n))):((n=a+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(a+1===o&&(i+="."),i+=ro(n))),e.s<0?"-"+i:i}function HA(e,t){if(e.length>t)return e.length=t,!0}function JL(e){var t,r,n;function a(i){var o=this;if(!(o instanceof a))return new a(i);if(o.constructor=a,i instanceof a){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Gl+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return WA(o,i.toString())}else if(typeof i!="string")throw Error(Gl+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,Rpe.test(i))WA(o,i);else throw Error(Gl+i)}if(a.prototype=Be,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=JL,a.config=a.set=Mpe,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function Mpe(e){if(!e||typeof e!="object")throw Error(Wa+"Object expected");var t,r,n,a=["precision",1,lf,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(cf(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(Gl+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Gl+r+": "+n);return this}var NN=JL(Tpe);va=new NN(1);const Qt=NN;function $pe(e){return Bpe(e)||Lpe(e)||Dpe(e)||Ipe()}function Ipe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dpe(e,t){if(e){if(typeof e=="string")return G1(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return G1(e,t)}}function Lpe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Bpe(e){if(Array.isArray(e))return G1(e)}function G1(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Fpe=function(t){return t},eB={"@@functional/placeholder":!0},tB=function(t){return t===eB},qA=function(t){return function r(){return arguments.length===0||arguments.length===1&&tB(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},zpe=function e(t,r){return t===1?r:qA(function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];var o=a.filter(function(l){return l!==eB}).length;return o>=t?r.apply(void 0,a):e(t-o,qA(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var d=a.map(function(f){return tB(f)?c.shift():f});return r.apply(void 0,$pe(d).concat(c))}))})},p0=function(t){return zpe(t.length,t)},Y1=function(t,r){for(var n=[],a=t;a<r;++a)n[a-t]=a;return n},Upe=p0(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),Vpe=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return Fpe;var a=r.reverse(),i=a[0],o=a.slice(1);return function(){return o.reduce(function(l,c){return c(l)},i.apply(void 0,arguments))}},X1=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},rB=function(t){var r=null,n=null;return function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r&&i.every(function(l,c){return l===r[c]})||(r=i,n=t.apply(void 0,i)),n}};function Wpe(e){var t;return e===0?t=1:t=Math.floor(new Qt(e).abs().log(10).toNumber())+1,t}function Hpe(e,t,r){for(var n=new Qt(e),a=0,i=[];n.lt(t)&&a<1e5;)i.push(n.toNumber()),n=n.add(r),a++;return i}var qpe=p0(function(e,t,r){var n=+e,a=+t;return n+r*(a-n)}),Kpe=p0(function(e,t,r){var n=t-+e;return n=n||1/0,(r-e)/n}),Gpe=p0(function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});const g0={rangeStep:Hpe,getDigitCount:Wpe,interpolateNumber:qpe,uninterpolateNumber:Kpe,uninterpolateTruncation:Gpe};function Z1(e){return Zpe(e)||Xpe(e)||nB(e)||Ype()}function Ype(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xpe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Zpe(e){if(Array.isArray(e))return Q1(e)}function xm(e,t){return ege(e)||Jpe(e,t)||nB(e,t)||Qpe()}function Qpe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nB(e,t){if(e){if(typeof e=="string")return Q1(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Q1(e,t)}}function Q1(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Jpe(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,a=!1,i=void 0;try{for(var o=e[Symbol.iterator](),l;!(n=(l=o.next()).done)&&(r.push(l.value),!(t&&r.length===t));n=!0);}catch(c){a=!0,i=c}finally{try{!n&&o.return!=null&&o.return()}finally{if(a)throw i}}return r}}function ege(e){if(Array.isArray(e))return e}function aB(e){var t=xm(e,2),r=t[0],n=t[1],a=r,i=n;return r>n&&(a=n,i=r),[a,i]}function iB(e,t,r){if(e.lte(0))return new Qt(0);var n=g0.getDigitCount(e.toNumber()),a=new Qt(10).pow(n),i=e.div(a),o=n!==1?.05:.1,l=new Qt(Math.ceil(i.div(o).toNumber())).add(r).mul(o),c=l.mul(a);return t?c:new Qt(Math.ceil(c))}function tge(e,t,r){var n=1,a=new Qt(e);if(!a.isint()&&r){var i=Math.abs(e);i<1?(n=new Qt(10).pow(g0.getDigitCount(e)-1),a=new Qt(Math.floor(a.div(n).toNumber())).mul(n)):i>1&&(a=new Qt(Math.floor(e)))}else e===0?a=new Qt(Math.floor((t-1)/2)):r||(a=new Qt(Math.floor(e)));var o=Math.floor((t-1)/2),l=Vpe(Upe(function(c){return a.add(new Qt(c-o).mul(n)).toNumber()}),Y1);return l(0,t)}function sB(e,t,r,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new Qt(0),tickMin:new Qt(0),tickMax:new Qt(0)};var i=iB(new Qt(t).sub(e).div(r-1),n,a),o;e<=0&&t>=0?o=new Qt(0):(o=new Qt(e).add(t).div(2),o=o.sub(new Qt(o).mod(i)));var l=Math.ceil(o.sub(e).div(i).toNumber()),c=Math.ceil(new Qt(t).sub(o).div(i).toNumber()),u=l+c+1;return u>r?sB(e,t,r,n,a+1):(u<r&&(c=t>0?c+(r-u):c,l=t>0?l:l+(r-u)),{step:i,tickMin:o.sub(new Qt(l).mul(i)),tickMax:o.add(new Qt(c).mul(i))})}function rge(e){var t=xm(e,2),r=t[0],n=t[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),l=aB([r,n]),c=xm(l,2),u=c[0],d=c[1];if(u===-1/0||d===1/0){var f=d===1/0?[u].concat(Z1(Y1(0,a-1).map(function(){return 1/0}))):[].concat(Z1(Y1(0,a-1).map(function(){return-1/0})),[d]);return r>n?X1(f):f}if(u===d)return tge(u,a,i);var h=sB(u,d,o,i),m=h.step,y=h.tickMin,g=h.tickMax,p=g0.rangeStep(y,g.add(new Qt(.1).mul(m)),m);return r>n?X1(p):p}function nge(e,t){var r=xm(e,2),n=r[0],a=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=aB([n,a]),l=xm(o,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[n,a];if(c===u)return[c];var d=Math.max(t,2),f=iB(new Qt(u).sub(c).div(d-1),i,0),h=[].concat(Z1(g0.rangeStep(new Qt(c),new Qt(u).sub(new Qt(.99).mul(f)),f)),[u]);return n>a?X1(h):h}var age=rB(rge),ige=rB(nge),sge="Invariant failed";function oc(e,t){throw new Error(sge)}var oge=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function nd(e){"@babel/helpers - typeof";return nd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nd(e)}function ty(){return ty=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ty.apply(this,arguments)}function lge(e,t){return fge(e)||dge(e,t)||uge(e,t)||cge()}function cge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uge(e,t){if(e){if(typeof e=="string")return KA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return KA(e,t)}}function KA(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function dge(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function fge(e){if(Array.isArray(e))return e}function hge(e,t){if(e==null)return{};var r=mge(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function mge(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function pge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gge(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,cB(n.key),n)}}function vge(e,t,r){return t&&gge(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function yge(e,t,r){return t=ry(t),xge(e,oB()?Reflect.construct(t,r||[],ry(e).constructor):t.apply(e,r))}function xge(e,t){if(t&&(nd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bge(e)}function bge(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oB=function(){return!!e})()}function ry(e){return ry=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ry(e)}function wge(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&J1(e,t)}function J1(e,t){return J1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},J1(e,t)}function lB(e,t,r){return t=cB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cB(e){var t=jge(e,"string");return nd(t)=="symbol"?t:t+""}function jge(e,t){if(nd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(nd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var uf=function(e){function t(){return pge(this,t),yge(this,t,arguments)}return wge(t,e),vge(t,[{key:"render",value:function(){var n=this.props,a=n.offset,i=n.layout,o=n.width,l=n.dataKey,c=n.data,u=n.dataPointFormatter,d=n.xAxis,f=n.yAxis,h=hge(n,oge),m=Ue(h,!1);this.props.direction==="x"&&d.type!=="number"&&oc();var y=c.map(function(g){var p=u(g,l),v=p.x,x=p.y,b=p.value,_=p.errorVal;if(!_)return null;var j=[],S,C;if(Array.isArray(_)){var k=lge(_,2);S=k[0],C=k[1]}else S=C=_;if(i==="vertical"){var N=d.scale,A=x+a,O=A+o,E=A-o,R=N(b-S),P=N(b+C);j.push({x1:P,y1:O,x2:P,y2:E}),j.push({x1:R,y1:A,x2:P,y2:A}),j.push({x1:R,y1:O,x2:R,y2:E})}else if(i==="horizontal"){var T=f.scale,I=v+a,M=I-o,D=I+o,B=T(b-S),z=T(b+C);j.push({x1:M,y1:z,x2:D,y2:z}),j.push({x1:I,y1:B,x2:I,y2:z}),j.push({x1:M,y1:B,x2:D,y2:B})}return $.createElement(vt,ty({className:"recharts-errorBar",key:"bar-".concat(j.map(function(Z){return"".concat(Z.x1,"-").concat(Z.x2,"-").concat(Z.y1,"-").concat(Z.y2)}))},m),j.map(function(Z){return $.createElement("line",ty({},Z,{key:"line-".concat(Z.x1,"-").concat(Z.x2,"-").concat(Z.y1,"-").concat(Z.y2)}))}))});return $.createElement(vt,{className:"recharts-errorBars"},y)}}])}($.Component);lB(uf,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});lB(uf,"displayName","ErrorBar");function bm(e){"@babel/helpers - typeof";return bm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bm(e)}function GA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function dl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GA(Object(r),!0).forEach(function(n){_ge(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _ge(e,t,r){return t=Sge(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sge(e){var t=Cge(e,"string");return bm(t)=="symbol"?t:t+""}function Cge(e,t){if(bm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(bm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var uB=function(t){var r=t.children,n=t.formattedGraphicalItems,a=t.legendWidth,i=t.legendContent,o=ha(r,Br);if(!o)return null;var l=Br.defaultProps,c=l!==void 0?dl(dl({},l),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:i==="children"?u=(n||[]).reduce(function(d,f){var h=f.item,m=f.props,y=m.sectors||m.data||[];return d.concat(y.map(function(g){return{type:o.props.iconType||h.props.legendType,value:g.name,color:g.fill,payload:g}}))},[]):u=(n||[]).map(function(d){var f=d.item,h=f.type.defaultProps,m=h!==void 0?dl(dl({},h),f.props):{},y=m.dataKey,g=m.name,p=m.legendType,v=m.hide;return{inactive:v,dataKey:y,type:c.iconType||p||"square",color:kN(f),value:g||y,payload:m}}),dl(dl(dl({},c),Br.getWithHeight(o,a)),{},{payload:u,item:o})};function wm(e){"@babel/helpers - typeof";return wm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wm(e)}function YA(e){return Ege(e)||Pge(e)||kge(e)||Nge()}function Nge(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kge(e,t){if(e){if(typeof e=="string")return e_(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return e_(e,t)}}function Pge(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ege(e){if(Array.isArray(e))return e_(e)}function e_(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function XA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Dr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?XA(Object(r),!0).forEach(function(n){Cu(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Cu(e,t,r){return t=Age(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Age(e){var t=Oge(e,"string");return wm(t)=="symbol"?t:t+""}function Oge(e,t){if(wm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(wm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xr(e,t,r){return Qe(e)||Qe(t)?r:an(t)?wa(e,t,r):Je(t)?t(e):r}function ph(e,t,r,n){var a=Ppe(e,function(l){return xr(l,t)});if(r==="number"){var i=a.filter(function(l){return we(l)||parseFloat(l)});return i.length?[m0(i),vo(i)]:[1/0,-1/0]}var o=n?a.filter(function(l){return!Qe(l)}):a;return o.map(function(l){return an(l)||l instanceof Date?l:""})}var Tge=function(t){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,l=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var c=i.range,u=0;u<l;u++){var d=u>0?a[u-1].coordinate:a[l-1].coordinate,f=a[u].coordinate,h=u>=l-1?a[0].coordinate:a[u+1].coordinate,m=void 0;if(Un(f-d)!==Un(h-f)){var y=[];if(Un(h-f)===Un(c[1]-c[0])){m=h;var g=f+c[1]-c[0];y[0]=Math.min(g,(g+d)/2),y[1]=Math.max(g,(g+d)/2)}else{m=d;var p=h+c[1]-c[0];y[0]=Math.min(f,(p+f)/2),y[1]=Math.max(f,(p+f)/2)}var v=[Math.min(f,(m+f)/2),Math.max(f,(m+f)/2)];if(t>v[0]&&t<=v[1]||t>=y[0]&&t<=y[1]){o=a[u].index;break}}else{var x=Math.min(d,h),b=Math.max(d,h);if(t>(x+f)/2&&t<=(b+f)/2){o=a[u].index;break}}}else for(var _=0;_<l;_++)if(_===0&&t<=(n[_].coordinate+n[_+1].coordinate)/2||_>0&&_<l-1&&t>(n[_].coordinate+n[_-1].coordinate)/2&&t<=(n[_].coordinate+n[_+1].coordinate)/2||_===l-1&&t>(n[_].coordinate+n[_-1].coordinate)/2){o=n[_].index;break}return o},kN=function(t){var r,n=t,a=n.type.displayName,i=(r=t.type)!==null&&r!==void 0&&r.defaultProps?Dr(Dr({},t.type.defaultProps),t.props):t.props,o=i.stroke,l=i.fill,c;switch(a){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},Rge=function(t){var r=t.barSize,n=t.totalSize,a=t.stackGroups,i=a===void 0?{}:a;if(!i)return{};for(var o={},l=Object.keys(i),c=0,u=l.length;c<u;c++)for(var d=i[l[c]].stackGroups,f=Object.keys(d),h=0,m=f.length;h<m;h++){var y=d[f[h]],g=y.items,p=y.cateAxisId,v=g.filter(function(C){return Ss(C.type).indexOf("Bar")>=0});if(v&&v.length){var x=v[0].type.defaultProps,b=x!==void 0?Dr(Dr({},x),v[0].props):v[0].props,_=b.barSize,j=b[p];o[j]||(o[j]=[]);var S=Qe(_)?r:_;o[j].push({item:v[0],stackList:v.slice(1),barSize:Qe(S)?void 0:Vn(S,n,0)})}}return o},Mge=function(t){var r=t.barGap,n=t.barCategoryGap,a=t.bandSize,i=t.sizeList,o=i===void 0?[]:i,l=t.maxBarSize,c=o.length;if(c<1)return null;var u=Vn(r,a,0,!0),d,f=[];if(o[0].barSize===+o[0].barSize){var h=!1,m=a/c,y=o.reduce(function(_,j){return _+j.barSize||0},0);y+=(c-1)*u,y>=a&&(y-=(c-1)*u,u=0),y>=a&&m>0&&(h=!0,m*=.9,y=c*m);var g=(a-y)/2>>0,p={offset:g-u,size:0};d=o.reduce(function(_,j){var S={item:j.item,position:{offset:p.offset+p.size+u,size:h?m:j.barSize}},C=[].concat(YA(_),[S]);return p=C[C.length-1].position,j.stackList&&j.stackList.length&&j.stackList.forEach(function(k){C.push({item:k,position:p})}),C},f)}else{var v=Vn(n,a,0,!0);a-2*v-(c-1)*u<=0&&(u=0);var x=(a-2*v-(c-1)*u)/c;x>1&&(x>>=0);var b=l===+l?Math.min(x,l):x;d=o.reduce(function(_,j,S){var C=[].concat(YA(_),[{item:j.item,position:{offset:v+(x+u)*S+(x-b)/2,size:b}}]);return j.stackList&&j.stackList.length&&j.stackList.forEach(function(k){C.push({item:k,position:C[C.length-1].position})}),C},f)}return d},$ge=function(t,r,n,a){var i=n.children,o=n.width,l=n.margin,c=o-(l.left||0)-(l.right||0),u=uB({children:i,legendWidth:c});if(u){var d=a||{},f=d.width,h=d.height,m=u.align,y=u.verticalAlign,g=u.layout;if((g==="vertical"||g==="horizontal"&&y==="middle")&&m!=="center"&&we(t[m]))return Dr(Dr({},t),{},Cu({},m,t[m]+(f||0)));if((g==="horizontal"||g==="vertical"&&m==="center")&&y!=="middle"&&we(t[y]))return Dr(Dr({},t),{},Cu({},y,t[y]+(h||0)))}return t},Ige=function(t,r,n){return Qe(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},dB=function(t,r,n,a,i){var o=r.props.children,l=qn(o,uf).filter(function(u){return Ige(a,i,u.props.direction)});if(l&&l.length){var c=l.map(function(u){return u.props.dataKey});return t.reduce(function(u,d){var f=xr(d,n);if(Qe(f))return u;var h=Array.isArray(f)?[m0(f),vo(f)]:[f,f],m=c.reduce(function(y,g){var p=xr(d,g,0),v=h[0]-Math.abs(Array.isArray(p)?p[0]:p),x=h[1]+Math.abs(Array.isArray(p)?p[1]:p);return[Math.min(v,y[0]),Math.max(x,y[1])]},[1/0,-1/0]);return[Math.min(m[0],u[0]),Math.max(m[1],u[1])]},[1/0,-1/0])}return null},Dge=function(t,r,n,a,i){var o=r.map(function(l){return dB(t,l,n,i,a)}).filter(function(l){return!Qe(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},fB=function(t,r,n,a,i){var o=r.map(function(c){var u=c.props.dataKey;return n==="number"&&u&&dB(t,c,u,a)||ph(t,u,n,i)});if(n==="number")return o.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,u){for(var d=0,f=u.length;d<f;d++)l[u[d]]||(l[u[d]]=!0,c.push(u[d]));return c},[])},hB=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},mB=function(t,r,n,a){if(a)return t.map(function(c){return c.coordinate});var i,o,l=t.map(function(c){return c.coordinate===r&&(i=!0),c.coordinate===n&&(o=!0),c.coordinate});return i||l.push(r),o||l.push(n),l},ws=function(t,r,n){if(!t)return null;var a=t.scale,i=t.duplicateDomain,o=t.type,l=t.range,c=t.realScaleType==="scaleBand"?a.bandwidth()/2:2,u=(r||n)&&o==="category"&&a.bandwidth?a.bandwidth()/c:0;if(u=t.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?Un(l[0]-l[1])*2*u:u,r&&(t.ticks||t.niceTicks)){var d=(t.ticks||t.niceTicks).map(function(f){var h=i?i.indexOf(f):f;return{coordinate:a(h)+u,value:f,offset:u}});return d.filter(function(f){return!rf(f.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(f,h){return{coordinate:a(f)+u,value:f,index:h,offset:u}}):a.ticks&&!n?a.ticks(t.tickCount).map(function(f){return{coordinate:a(f)+u,value:f,offset:u}}):a.domain().map(function(f,h){return{coordinate:a(f)+u,value:i?i[f]:f,index:h,offset:u}})},dw=new WeakMap,ig=function(t,r){if(typeof r!="function")return t;dw.has(t)||dw.set(t,new WeakMap);var n=dw.get(t);if(n.has(r))return n.get(r);var a=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,a),a},pB=function(t,r,n){var a=t.scale,i=t.type,o=t.layout,l=t.axisType;if(a==="auto")return o==="radial"&&l==="radiusAxis"?{scale:hm(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:Xv(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:mh(),realScaleType:"point"}:i==="category"?{scale:hm(),realScaleType:"band"}:{scale:Xv(),realScaleType:"linear"};if(ac(a)){var c="scale".concat(Jx(a));return{scale:(VA[c]||mh)(),realScaleType:VA[c]?c:"point"}}return Je(a)?{scale:a}:{scale:mh(),realScaleType:"point"}},ZA=1e-4,gB=function(t){var r=t.domain();if(!(!r||r.length<=2)){var n=r.length,a=t.range(),i=Math.min(a[0],a[1])-ZA,o=Math.max(a[0],a[1])+ZA,l=t(r[0]),c=t(r[n-1]);(l<i||l>o||c<i||c>o)&&t.domain([r[0],r[n-1]])}},Lge=function(t,r){if(!t)return null;for(var n=0,a=t.length;n<a;n++)if(t[n].item===r)return t[n].position;return null},Bge=function(t,r){if(!r||r.length!==2||!we(r[0])||!we(r[1]))return t;var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]),i=[t[0],t[1]];return(!we(t[0])||t[0]<n)&&(i[0]=n),(!we(t[1])||t[1]>a)&&(i[1]=a),i[0]>a&&(i[0]=a),i[1]<n&&(i[1]=n),i},Fge=function(t){var r=t.length;if(!(r<=0))for(var n=0,a=t[0].length;n<a;++n)for(var i=0,o=0,l=0;l<r;++l){var c=rf(t[l][n][1])?t[l][n][0]:t[l][n][1];c>=0?(t[l][n][0]=i,t[l][n][1]=i+c,i=t[l][n][1]):(t[l][n][0]=o,t[l][n][1]=o+c,o=t[l][n][1])}},zge=function(t){var r=t.length;if(!(r<=0))for(var n=0,a=t[0].length;n<a;++n)for(var i=0,o=0;o<r;++o){var l=rf(t[o][n][1])?t[o][n][0]:t[o][n][1];l>=0?(t[o][n][0]=i,t[o][n][1]=i+l,i=t[o][n][1]):(t[o][n][0]=0,t[o][n][1]=0)}},Uge={sign:Fge,expand:one,none:Yu,silhouette:lne,wiggle:cne,positive:zge},Vge=function(t,r,n){var a=r.map(function(l){return l.props.dataKey}),i=Uge[n],o=sne().keys(a).value(function(l,c){return+xr(l,c,0)}).order(C1).offset(i);return o(t)},Wge=function(t,r,n,a,i,o){if(!t)return null;var l=o?r.reverse():r,c={},u=l.reduce(function(f,h){var m,y=(m=h.type)!==null&&m!==void 0&&m.defaultProps?Dr(Dr({},h.type.defaultProps),h.props):h.props,g=y.stackId,p=y.hide;if(p)return f;var v=y[n],x=f[v]||{hasStack:!1,stackGroups:{}};if(an(g)){var b=x.stackGroups[g]||{numericAxisId:n,cateAxisId:a,items:[]};b.items.push(h),x.hasStack=!0,x.stackGroups[g]=b}else x.stackGroups[Jo("_stackId_")]={numericAxisId:n,cateAxisId:a,items:[h]};return Dr(Dr({},f),{},Cu({},v,x))},c),d={};return Object.keys(u).reduce(function(f,h){var m=u[h];if(m.hasStack){var y={};m.stackGroups=Object.keys(m.stackGroups).reduce(function(g,p){var v=m.stackGroups[p];return Dr(Dr({},g),{},Cu({},p,{numericAxisId:n,cateAxisId:a,items:v.items,stackedData:Vge(t,v.items,i)}))},y)}return Dr(Dr({},f),{},Cu({},h,m))},d)},vB=function(t,r){var n=r.realScaleType,a=r.type,i=r.tickCount,o=r.originalDomain,l=r.allowDecimals,c=n||r.scale;if(c!=="auto"&&c!=="linear")return null;if(i&&a==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=t.domain();if(!u.length)return null;var d=age(u,i,l);return t.domain([m0(d),vo(d)]),{niceTicks:d}}if(i&&a==="number"){var f=t.domain(),h=ige(f,i,l);return{niceTicks:h}}return null};function ad(e){var t=e.axis,r=e.ticks,n=e.bandSize,a=e.entry,i=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Qe(a[t.dataKey])){var l=Ev(r,"value",a[t.dataKey]);if(l)return l.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var c=xr(a,Qe(o)?t.dataKey:o);return Qe(c)?null:t.scale(c)}var QA=function(t){var r=t.axis,n=t.ticks,a=t.offset,i=t.bandSize,o=t.entry,l=t.index;if(r.type==="category")return n[l]?n[l].coordinate+a:null;var c=xr(o,r.dataKey,r.domain[l]);return Qe(c)?null:r.scale(c)-i/2+a},Hge=function(t){var r=t.numericAxis,n=r.scale.domain();if(r.type==="number"){var a=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return a<=0&&i>=0?0:i<0?i:a}return n[0]},qge=function(t,r){var n,a=(n=t.type)!==null&&n!==void 0&&n.defaultProps?Dr(Dr({},t.type.defaultProps),t.props):t.props,i=a.stackId;if(an(i)){var o=r[i];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},Kge=function(t){return t.reduce(function(r,n){return[m0(n.concat([r[0]]).filter(we)),vo(n.concat([r[1]]).filter(we))]},[1/0,-1/0])},yB=function(t,r,n){return Object.keys(t).reduce(function(a,i){var o=t[i],l=o.stackedData,c=l.reduce(function(u,d){var f=Kge(d.slice(r,n+1));return[Math.min(u[0],f[0]),Math.max(u[1],f[1])]},[1/0,-1/0]);return[Math.min(c[0],a[0]),Math.max(c[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},JA=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,eO=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,t_=function(t,r,n){if(Je(t))return t(r,n);if(!Array.isArray(t))return r;var a=[];if(we(t[0]))a[0]=n?t[0]:Math.min(t[0],r[0]);else if(JA.test(t[0])){var i=+JA.exec(t[0])[1];a[0]=r[0]-i}else Je(t[0])?a[0]=t[0](r[0]):a[0]=r[0];if(we(t[1]))a[1]=n?t[1]:Math.max(t[1],r[1]);else if(eO.test(t[1])){var o=+eO.exec(t[1])[1];a[1]=r[1]+o}else Je(t[1])?a[1]=t[1](r[1]):a[1]=r[1];return a},ny=function(t,r,n){if(t&&t.scale&&t.scale.bandwidth){var a=t.scale.bandwidth();if(!n||a>0)return a}if(t&&r&&r.length>=2){for(var i=tN(r,function(f){return f.coordinate}),o=1/0,l=1,c=i.length;l<c;l++){var u=i[l],d=i[l-1];o=Math.min((u.coordinate||0)-(d.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},tO=function(t,r,n){return!t||!t.length||Wo(t,wa(n,"type.defaultProps.domain"))?r:t},xB=function(t,r){var n=t.type.defaultProps?Dr(Dr({},t.type.defaultProps),t.props):t.props,a=n.dataKey,i=n.name,o=n.unit,l=n.formatter,c=n.tooltipType,u=n.chartType,d=n.hide;return Dr(Dr({},Ue(t,!1)),{},{dataKey:a,unit:o,formatter:l,name:i||a,color:kN(t),value:xr(r,a),type:c,payload:r,chartType:u,hide:d})};function jm(e){"@babel/helpers - typeof";return jm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jm(e)}function rO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function hs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rO(Object(r),!0).forEach(function(n){bB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bB(e,t,r){return t=Gge(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gge(e){var t=Yge(e,"string");return jm(t)=="symbol"?t:t+""}function Yge(e,t){if(jm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(jm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xge(e,t){return eve(e)||Jge(e,t)||Qge(e,t)||Zge()}function Zge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qge(e,t){if(e){if(typeof e=="string")return nO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nO(e,t)}}function nO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Jge(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function eve(e){if(Array.isArray(e))return e}var ay=Math.PI/180,tve=function(t){return t*180/Math.PI},hr=function(t,r,n,a){return{x:t+Math.cos(-ay*a)*n,y:r+Math.sin(-ay*a)*n}},wB=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},rve=function(t,r,n,a,i){var o=t.width,l=t.height,c=t.startAngle,u=t.endAngle,d=Vn(t.cx,o,o/2),f=Vn(t.cy,l,l/2),h=wB(o,l,n),m=Vn(t.innerRadius,h,0),y=Vn(t.outerRadius,h,h*.8),g=Object.keys(r);return g.reduce(function(p,v){var x=r[v],b=x.domain,_=x.reversed,j;if(Qe(x.range))a==="angleAxis"?j=[c,u]:a==="radiusAxis"&&(j=[m,y]),_&&(j=[j[1],j[0]]);else{j=x.range;var S=j,C=Xge(S,2);c=C[0],u=C[1]}var k=pB(x,i),N=k.realScaleType,A=k.scale;A.domain(b).range(j),gB(A);var O=vB(A,hs(hs({},x),{},{realScaleType:N})),E=hs(hs(hs({},x),O),{},{range:j,radius:y,realScaleType:N,scale:A,cx:d,cy:f,innerRadius:m,outerRadius:y,startAngle:c,endAngle:u});return hs(hs({},p),{},bB({},v,E))},{})},nve=function(t,r){var n=t.x,a=t.y,i=r.x,o=r.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(a-o,2))},ave=function(t,r){var n=t.x,a=t.y,i=r.cx,o=r.cy,l=nve({x:n,y:a},{x:i,y:o});if(l<=0)return{radius:l};var c=(n-i)/l,u=Math.acos(c);return a>o&&(u=2*Math.PI-u),{radius:l,angle:tve(u),angleInRadian:u}},ive=function(t){var r=t.startAngle,n=t.endAngle,a=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(a,i);return{startAngle:r-o*360,endAngle:n-o*360}},sve=function(t,r){var n=r.startAngle,a=r.endAngle,i=Math.floor(n/360),o=Math.floor(a/360),l=Math.min(i,o);return t+l*360},aO=function(t,r){var n=t.x,a=t.y,i=ave({x:n,y:a},r),o=i.radius,l=i.angle,c=r.innerRadius,u=r.outerRadius;if(o<c||o>u)return!1;if(o===0)return!0;var d=ive(r),f=d.startAngle,h=d.endAngle,m=l,y;if(f<=h){for(;m>h;)m-=360;for(;m<f;)m+=360;y=m>=f&&m<=h}else{for(;m>f;)m-=360;for(;m<h;)m+=360;y=m>=h&&m<=f}return y?hs(hs({},r),{},{radius:o,angle:sve(m,r)}):null},jB=function(t){return!w.isValidElement(t)&&!Je(t)&&typeof t!="boolean"?t.className:""};function _m(e){"@babel/helpers - typeof";return _m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_m(e)}var ove=["offset"];function lve(e){return fve(e)||dve(e)||uve(e)||cve()}function cve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uve(e,t){if(e){if(typeof e=="string")return r_(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return r_(e,t)}}function dve(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function fve(e){if(Array.isArray(e))return r_(e)}function r_(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function hve(e,t){if(e==null)return{};var r=mve(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function mve(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function iO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Zr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iO(Object(r),!0).forEach(function(n){pve(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pve(e,t,r){return t=gve(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gve(e){var t=vve(e,"string");return _m(t)=="symbol"?t:t+""}function vve(e,t){if(_m(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(_m(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Sm(){return Sm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Sm.apply(this,arguments)}var yve=function(t){var r=t.value,n=t.formatter,a=Qe(t.children)?r:t.children;return Je(n)?n(a):a},xve=function(t,r){var n=Un(r-t),a=Math.min(Math.abs(r-t),360);return n*a},bve=function(t,r,n){var a=t.position,i=t.viewBox,o=t.offset,l=t.className,c=i,u=c.cx,d=c.cy,f=c.innerRadius,h=c.outerRadius,m=c.startAngle,y=c.endAngle,g=c.clockWise,p=(f+h)/2,v=xve(m,y),x=v>=0?1:-1,b,_;a==="insideStart"?(b=m+x*o,_=g):a==="insideEnd"?(b=y-x*o,_=!g):a==="end"&&(b=y+x*o,_=g),_=v<=0?_:!_;var j=hr(u,d,p,b),S=hr(u,d,p,b+(_?1:-1)*359),C="M".concat(j.x,",").concat(j.y,`
    A`).concat(p,",").concat(p,",0,1,").concat(_?0:1,`,
    `).concat(S.x,",").concat(S.y),k=Qe(t.id)?Jo("recharts-radial-line-"):t.id;return $.createElement("text",Sm({},n,{dominantBaseline:"central",className:ut("recharts-radial-bar-label",l)}),$.createElement("defs",null,$.createElement("path",{id:k,d:C})),$.createElement("textPath",{xlinkHref:"#".concat(k)},r))},wve=function(t){var r=t.viewBox,n=t.offset,a=t.position,i=r,o=i.cx,l=i.cy,c=i.innerRadius,u=i.outerRadius,d=i.startAngle,f=i.endAngle,h=(d+f)/2;if(a==="outside"){var m=hr(o,l,u+n,h),y=m.x,g=m.y;return{x:y,y:g,textAnchor:y>=o?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var p=(c+u)/2,v=hr(o,l,p,h),x=v.x,b=v.y;return{x,y:b,textAnchor:"middle",verticalAnchor:"middle"}},jve=function(t){var r=t.viewBox,n=t.parentViewBox,a=t.offset,i=t.position,o=r,l=o.x,c=o.y,u=o.width,d=o.height,f=d>=0?1:-1,h=f*a,m=f>0?"end":"start",y=f>0?"start":"end",g=u>=0?1:-1,p=g*a,v=g>0?"end":"start",x=g>0?"start":"end";if(i==="top"){var b={x:l+u/2,y:c-f*a,textAnchor:"middle",verticalAnchor:m};return Zr(Zr({},b),n?{height:Math.max(c-n.y,0),width:u}:{})}if(i==="bottom"){var _={x:l+u/2,y:c+d+h,textAnchor:"middle",verticalAnchor:y};return Zr(Zr({},_),n?{height:Math.max(n.y+n.height-(c+d),0),width:u}:{})}if(i==="left"){var j={x:l-p,y:c+d/2,textAnchor:v,verticalAnchor:"middle"};return Zr(Zr({},j),n?{width:Math.max(j.x-n.x,0),height:d}:{})}if(i==="right"){var S={x:l+u+p,y:c+d/2,textAnchor:x,verticalAnchor:"middle"};return Zr(Zr({},S),n?{width:Math.max(n.x+n.width-S.x,0),height:d}:{})}var C=n?{width:u,height:d}:{};return i==="insideLeft"?Zr({x:l+p,y:c+d/2,textAnchor:x,verticalAnchor:"middle"},C):i==="insideRight"?Zr({x:l+u-p,y:c+d/2,textAnchor:v,verticalAnchor:"middle"},C):i==="insideTop"?Zr({x:l+u/2,y:c+h,textAnchor:"middle",verticalAnchor:y},C):i==="insideBottom"?Zr({x:l+u/2,y:c+d-h,textAnchor:"middle",verticalAnchor:m},C):i==="insideTopLeft"?Zr({x:l+p,y:c+h,textAnchor:x,verticalAnchor:y},C):i==="insideTopRight"?Zr({x:l+u-p,y:c+h,textAnchor:v,verticalAnchor:y},C):i==="insideBottomLeft"?Zr({x:l+p,y:c+d-h,textAnchor:x,verticalAnchor:m},C):i==="insideBottomRight"?Zr({x:l+u-p,y:c+d-h,textAnchor:v,verticalAnchor:m},C):Qd(i)&&(we(i.x)||Ol(i.x))&&(we(i.y)||Ol(i.y))?Zr({x:l+Vn(i.x,u),y:c+Vn(i.y,d),textAnchor:"end",verticalAnchor:"end"},C):Zr({x:l+u/2,y:c+d/2,textAnchor:"middle",verticalAnchor:"middle"},C)},_ve=function(t){return"cx"in t&&we(t.cx)};function dn(e){var t=e.offset,r=t===void 0?5:t,n=hve(e,ove),a=Zr({offset:r},n),i=a.viewBox,o=a.position,l=a.value,c=a.children,u=a.content,d=a.className,f=d===void 0?"":d,h=a.textBreakAll;if(!i||Qe(l)&&Qe(c)&&!w.isValidElement(u)&&!Je(u))return null;if(w.isValidElement(u))return w.cloneElement(u,a);var m;if(Je(u)){if(m=w.createElement(u,a),w.isValidElement(m))return m}else m=yve(a);var y=_ve(i),g=Ue(a,!0);if(y&&(o==="insideStart"||o==="insideEnd"||o==="end"))return bve(a,m,g);var p=y?wve(a):jve(a);return $.createElement(ic,Sm({className:ut("recharts-label",f)},g,p,{breakAll:h}),m)}dn.displayName="Label";var _B=function(t){var r=t.cx,n=t.cy,a=t.angle,i=t.startAngle,o=t.endAngle,l=t.r,c=t.radius,u=t.innerRadius,d=t.outerRadius,f=t.x,h=t.y,m=t.top,y=t.left,g=t.width,p=t.height,v=t.clockWise,x=t.labelViewBox;if(x)return x;if(we(g)&&we(p)){if(we(f)&&we(h))return{x:f,y:h,width:g,height:p};if(we(m)&&we(y))return{x:m,y,width:g,height:p}}return we(f)&&we(h)?{x:f,y:h,width:0,height:0}:we(r)&&we(n)?{cx:r,cy:n,startAngle:i||a||0,endAngle:o||a||0,innerRadius:u||0,outerRadius:d||c||l||0,clockWise:v}:t.viewBox?t.viewBox:{}},Sve=function(t,r){return t?t===!0?$.createElement(dn,{key:"label-implicit",viewBox:r}):an(t)?$.createElement(dn,{key:"label-implicit",viewBox:r,value:t}):w.isValidElement(t)?t.type===dn?w.cloneElement(t,{key:"label-implicit",viewBox:r}):$.createElement(dn,{key:"label-implicit",content:t,viewBox:r}):Je(t)?$.createElement(dn,{key:"label-implicit",content:t,viewBox:r}):Qd(t)?$.createElement(dn,Sm({viewBox:r},t,{key:"label-implicit"})):null:null},Cve=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var a=t.children,i=_B(t),o=qn(a,dn).map(function(c,u){return w.cloneElement(c,{viewBox:r||i,key:"label-".concat(u)})});if(!n)return o;var l=Sve(t.label,r||i);return[l].concat(lve(o))};dn.parseViewBox=_B;dn.renderCallByParent=Cve;function Nve(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var kve=Nve;const Pve=Bt(kve);function Cm(e){"@babel/helpers - typeof";return Cm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cm(e)}var Eve=["valueAccessor"],Ave=["data","dataKey","clockWise","id","textBreakAll"];function Ove(e){return $ve(e)||Mve(e)||Rve(e)||Tve()}function Tve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rve(e,t){if(e){if(typeof e=="string")return n_(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n_(e,t)}}function Mve(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function $ve(e){if(Array.isArray(e))return n_(e)}function n_(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function iy(){return iy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},iy.apply(this,arguments)}function sO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function oO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sO(Object(r),!0).forEach(function(n){Ive(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ive(e,t,r){return t=Dve(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dve(e){var t=Lve(e,"string");return Cm(t)=="symbol"?t:t+""}function Lve(e,t){if(Cm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Cm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lO(e,t){if(e==null)return{};var r=Bve(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Bve(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var Fve=function(t){return Array.isArray(t.value)?Pve(t.value):t.value};function wi(e){var t=e.valueAccessor,r=t===void 0?Fve:t,n=lO(e,Eve),a=n.data,i=n.dataKey,o=n.clockWise,l=n.id,c=n.textBreakAll,u=lO(n,Ave);return!a||!a.length?null:$.createElement(vt,{className:"recharts-label-list"},a.map(function(d,f){var h=Qe(i)?r(d,f):xr(d&&d.payload,i),m=Qe(l)?{}:{id:"".concat(l,"-").concat(f)};return $.createElement(dn,iy({},Ue(d,!0),u,m,{parentViewBox:d.parentViewBox,value:h,textBreakAll:c,viewBox:dn.parseViewBox(Qe(o)?d:oO(oO({},d),{},{clockWise:o})),key:"label-".concat(f),index:f}))}))}wi.displayName="LabelList";function zve(e,t){return e?e===!0?$.createElement(wi,{key:"labelList-implicit",data:t}):$.isValidElement(e)||Je(e)?$.createElement(wi,{key:"labelList-implicit",data:t,content:e}):Qd(e)?$.createElement(wi,iy({data:t},e,{key:"labelList-implicit"})):null:null}function Uve(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var n=e.children,a=qn(n,wi).map(function(o,l){return w.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!r)return a;var i=zve(e.label,t);return[i].concat(Ove(a))}wi.renderCallByParent=Uve;function Nm(e){"@babel/helpers - typeof";return Nm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nm(e)}function a_(){return a_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a_.apply(this,arguments)}function cO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function uO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cO(Object(r),!0).forEach(function(n){Vve(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Vve(e,t,r){return t=Wve(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wve(e){var t=Hve(e,"string");return Nm(t)=="symbol"?t:t+""}function Hve(e,t){if(Nm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Nm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qve=function(t,r){var n=Un(r-t),a=Math.min(Math.abs(r-t),359.999);return n*a},sg=function(t){var r=t.cx,n=t.cy,a=t.radius,i=t.angle,o=t.sign,l=t.isExternal,c=t.cornerRadius,u=t.cornerIsExternal,d=c*(l?1:-1)+a,f=Math.asin(c/d)/ay,h=u?i:i+o*f,m=hr(r,n,d,h),y=hr(r,n,a,h),g=u?i-o*f:i,p=hr(r,n,d*Math.cos(f*ay),g);return{center:m,circleTangency:y,lineTangency:p,theta:f}},SB=function(t){var r=t.cx,n=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.startAngle,l=t.endAngle,c=qve(o,l),u=o+c,d=hr(r,n,i,o),f=hr(r,n,i,u),h="M ".concat(d.x,",").concat(d.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>u),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(a>0){var m=hr(r,n,a,o),y=hr(r,n,a,u);h+="L ".concat(y.x,",").concat(y.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=u),`,
            `).concat(m.x,",").concat(m.y," Z")}else h+="L ".concat(r,",").concat(n," Z");return h},Kve=function(t){var r=t.cx,n=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,u=t.startAngle,d=t.endAngle,f=Un(d-u),h=sg({cx:r,cy:n,radius:i,angle:u,sign:f,cornerRadius:o,cornerIsExternal:c}),m=h.circleTangency,y=h.lineTangency,g=h.theta,p=sg({cx:r,cy:n,radius:i,angle:d,sign:-f,cornerRadius:o,cornerIsExternal:c}),v=p.circleTangency,x=p.lineTangency,b=p.theta,_=c?Math.abs(u-d):Math.abs(u-d)-g-b;if(_<0)return l?"M ".concat(y.x,",").concat(y.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):SB({cx:r,cy:n,innerRadius:a,outerRadius:i,startAngle:u,endAngle:d});var j="M ".concat(y.x,",").concat(y.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(_>180),",").concat(+(f<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(x.x,",").concat(x.y,`
  `);if(a>0){var S=sg({cx:r,cy:n,radius:a,angle:u,sign:f,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),C=S.circleTangency,k=S.lineTangency,N=S.theta,A=sg({cx:r,cy:n,radius:a,angle:d,sign:-f,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),O=A.circleTangency,E=A.lineTangency,R=A.theta,P=c?Math.abs(u-d):Math.abs(u-d)-N-R;if(P<0&&o===0)return"".concat(j,"L").concat(r,",").concat(n,"Z");j+="L".concat(E.x,",").concat(E.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(O.x,",").concat(O.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(P>180),",").concat(+(f>0),",").concat(C.x,",").concat(C.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(k.x,",").concat(k.y,"Z")}else j+="L".concat(r,",").concat(n,"Z");return j},Gve={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},CB=function(t){var r=uO(uO({},Gve),t),n=r.cx,a=r.cy,i=r.innerRadius,o=r.outerRadius,l=r.cornerRadius,c=r.forceCornerRadius,u=r.cornerIsExternal,d=r.startAngle,f=r.endAngle,h=r.className;if(o<i||d===f)return null;var m=ut("recharts-sector",h),y=o-i,g=Vn(l,y,0,!0),p;return g>0&&Math.abs(d-f)<360?p=Kve({cx:n,cy:a,innerRadius:i,outerRadius:o,cornerRadius:Math.min(g,y/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:f}):p=SB({cx:n,cy:a,innerRadius:i,outerRadius:o,startAngle:d,endAngle:f}),$.createElement("path",a_({},Ue(r,!0),{className:m,d:p,role:"img"}))};function km(e){"@babel/helpers - typeof";return km=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},km(e)}function i_(){return i_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i_.apply(this,arguments)}function dO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function fO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dO(Object(r),!0).forEach(function(n){Yve(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Yve(e,t,r){return t=Xve(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xve(e){var t=Zve(e,"string");return km(t)=="symbol"?t:t+""}function Zve(e,t){if(km(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(km(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hO={curveBasisClosed:Yre,curveBasisOpen:Xre,curveBasis:Gre,curveBumpX:Mre,curveBumpY:$re,curveLinearClosed:Zre,curveLinear:t0,curveMonotoneX:Qre,curveMonotoneY:Jre,curveNatural:ene,curveStep:tne,curveStepAfter:nne,curveStepBefore:rne},og=function(t){return t.x===+t.x&&t.y===+t.y},Tf=function(t){return t.x},Rf=function(t){return t.y},Qve=function(t,r){if(Je(t))return t;var n="curve".concat(Jx(t));return(n==="curveMonotone"||n==="curveBump")&&r?hO["".concat(n).concat(r==="vertical"?"Y":"X")]:hO[n]||t0},Jve=function(t){var r=t.type,n=r===void 0?"linear":r,a=t.points,i=a===void 0?[]:a,o=t.baseLine,l=t.layout,c=t.connectNulls,u=c===void 0?!1:c,d=Qve(n,l),f=u?i.filter(function(g){return og(g)}):i,h;if(Array.isArray(o)){var m=u?o.filter(function(g){return og(g)}):o,y=f.map(function(g,p){return fO(fO({},g),{},{base:m[p]})});return l==="vertical"?h=Zp().y(Rf).x1(Tf).x0(function(g){return g.base.x}):h=Zp().x(Tf).y1(Rf).y0(function(g){return g.base.y}),h.defined(og).curve(d),h(y)}return l==="vertical"&&we(o)?h=Zp().y(Rf).x1(Tf).x0(o):we(o)?h=Zp().x(Tf).y1(Rf).y0(o):h=x4().x(Tf).y(Rf),h.defined(og).curve(d),h(f)},Mo=function(t){var r=t.className,n=t.points,a=t.path,i=t.pathRef;if((!n||!n.length)&&!a)return null;var o=n&&n.length?Jve(t):a;return w.createElement("path",i_({},Ue(t,!1),Av(t),{className:ut("recharts-curve",r),d:o,ref:i}))},NB={exports:{}},eye="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",tye=eye,rye=tye;function kB(){}function PB(){}PB.resetWarningCache=kB;var nye=function(){function e(n,a,i,o,l,c){if(c!==rye){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:PB,resetWarningCache:kB};return r.PropTypes=r,r};NB.exports=nye();var aye=NB.exports;const Lt=Bt(aye);var iye=Object.getOwnPropertyNames,sye=Object.getOwnPropertySymbols,oye=Object.prototype.hasOwnProperty;function mO(e,t){return function(n,a,i){return e(n,a,i)&&t(n,a,i)}}function lg(e){return function(r,n,a){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,a);var i=a.cache,o=i.get(r),l=i.get(n);if(o&&l)return o===n&&l===r;i.set(r,n),i.set(n,r);var c=e(r,n,a);return i.delete(r),i.delete(n),c}}function pO(e){return iye(e).concat(sye(e))}var lye=Object.hasOwn||function(e,t){return oye.call(e,t)};function bc(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var cye="__v",uye="__o",dye="_owner",gO=Object.getOwnPropertyDescriptor,vO=Object.keys;function fye(e,t,r){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function hye(e,t){return bc(e.getTime(),t.getTime())}function mye(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function pye(e,t){return e===t}function yO(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var a=new Array(n),i=e.entries(),o,l,c=0;(o=i.next())&&!o.done;){for(var u=t.entries(),d=!1,f=0;(l=u.next())&&!l.done;){if(a[f]){f++;continue}var h=o.value,m=l.value;if(r.equals(h[0],m[0],c,f,e,t,r)&&r.equals(h[1],m[1],h[0],m[0],e,t,r)){d=a[f]=!0;break}f++}if(!d)return!1;c++}return!0}var gye=bc;function vye(e,t,r){var n=vO(e),a=n.length;if(vO(t).length!==a)return!1;for(;a-- >0;)if(!EB(e,t,r,n[a]))return!1;return!0}function Mf(e,t,r){var n=pO(e),a=n.length;if(pO(t).length!==a)return!1;for(var i,o,l;a-- >0;)if(i=n[a],!EB(e,t,r,i)||(o=gO(e,i),l=gO(t,i),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function yye(e,t){return bc(e.valueOf(),t.valueOf())}function xye(e,t){return e.source===t.source&&e.flags===t.flags}function xO(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var a=new Array(n),i=e.values(),o,l;(o=i.next())&&!o.done;){for(var c=t.values(),u=!1,d=0;(l=c.next())&&!l.done;){if(!a[d]&&r.equals(o.value,l.value,o.value,l.value,e,t,r)){u=a[d]=!0;break}d++}if(!u)return!1}return!0}function bye(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function wye(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function EB(e,t,r,n){return(n===dye||n===uye||n===cye)&&(e.$$typeof||t.$$typeof)?!0:lye(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}var jye="[object Arguments]",_ye="[object Boolean]",Sye="[object Date]",Cye="[object Error]",Nye="[object Map]",kye="[object Number]",Pye="[object Object]",Eye="[object RegExp]",Aye="[object Set]",Oye="[object String]",Tye="[object URL]",Rye=Array.isArray,bO=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,wO=Object.assign,Mye=Object.prototype.toString.call.bind(Object.prototype.toString);function $ye(e){var t=e.areArraysEqual,r=e.areDatesEqual,n=e.areErrorsEqual,a=e.areFunctionsEqual,i=e.areMapsEqual,o=e.areNumbersEqual,l=e.areObjectsEqual,c=e.arePrimitiveWrappersEqual,u=e.areRegExpsEqual,d=e.areSetsEqual,f=e.areTypedArraysEqual,h=e.areUrlsEqual;return function(y,g,p){if(y===g)return!0;if(y==null||g==null)return!1;var v=typeof y;if(v!==typeof g)return!1;if(v!=="object")return v==="number"?o(y,g,p):v==="function"?a(y,g,p):!1;var x=y.constructor;if(x!==g.constructor)return!1;if(x===Object)return l(y,g,p);if(Rye(y))return t(y,g,p);if(bO!=null&&bO(y))return f(y,g,p);if(x===Date)return r(y,g,p);if(x===RegExp)return u(y,g,p);if(x===Map)return i(y,g,p);if(x===Set)return d(y,g,p);var b=Mye(y);return b===Sye?r(y,g,p):b===Eye?u(y,g,p):b===Nye?i(y,g,p):b===Aye?d(y,g,p):b===Pye?typeof y.then!="function"&&typeof g.then!="function"&&l(y,g,p):b===Tye?h(y,g,p):b===Cye?n(y,g,p):b===jye?l(y,g,p):b===_ye||b===kye||b===Oye?c(y,g,p):!1}}function Iye(e){var t=e.circular,r=e.createCustomConfig,n=e.strict,a={areArraysEqual:n?Mf:fye,areDatesEqual:hye,areErrorsEqual:mye,areFunctionsEqual:pye,areMapsEqual:n?mO(yO,Mf):yO,areNumbersEqual:gye,areObjectsEqual:n?Mf:vye,arePrimitiveWrappersEqual:yye,areRegExpsEqual:xye,areSetsEqual:n?mO(xO,Mf):xO,areTypedArraysEqual:n?Mf:bye,areUrlsEqual:wye};if(r&&(a=wO({},a,r(a))),t){var i=lg(a.areArraysEqual),o=lg(a.areMapsEqual),l=lg(a.areObjectsEqual),c=lg(a.areSetsEqual);a=wO({},a,{areArraysEqual:i,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return a}function Dye(e){return function(t,r,n,a,i,o,l){return e(t,r,l)}}function Lye(e){var t=e.circular,r=e.comparator,n=e.createState,a=e.equals,i=e.strict;if(n)return function(c,u){var d=n(),f=d.cache,h=f===void 0?t?new WeakMap:void 0:f,m=d.meta;return r(c,u,{cache:h,equals:a,meta:m,strict:i})};if(t)return function(c,u){return r(c,u,{cache:new WeakMap,equals:a,meta:void 0,strict:i})};var o={cache:void 0,equals:a,meta:void 0,strict:i};return function(c,u){return r(c,u,o)}}var Bye=nl();nl({strict:!0});nl({circular:!0});nl({circular:!0,strict:!0});nl({createInternalComparator:function(){return bc}});nl({strict:!0,createInternalComparator:function(){return bc}});nl({circular:!0,createInternalComparator:function(){return bc}});nl({circular:!0,createInternalComparator:function(){return bc},strict:!0});function nl(e){e===void 0&&(e={});var t=e.circular,r=t===void 0?!1:t,n=e.createInternalComparator,a=e.createState,i=e.strict,o=i===void 0?!1:i,l=Iye(e),c=$ye(l),u=n?n(c):Dye(c);return Lye({circular:r,comparator:c,createState:a,equals:u,strict:o})}function Fye(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function jO(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function a(i){r<0&&(r=i),i-r>t?(e(i),r=-1):Fye(a)};requestAnimationFrame(n)}function s_(e){"@babel/helpers - typeof";return s_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s_(e)}function zye(e){return Hye(e)||Wye(e)||Vye(e)||Uye()}function Uye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vye(e,t){if(e){if(typeof e=="string")return _O(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _O(e,t)}}function _O(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Wye(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Hye(e){if(Array.isArray(e))return e}function qye(){var e={},t=function(){return null},r=!1,n=function a(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var o=i,l=zye(o),c=l[0],u=l.slice(1);if(typeof c=="number"){jO(a.bind(null,u),c);return}a(c),jO(a.bind(null,u));return}s_(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,n(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function Pm(e){"@babel/helpers - typeof";return Pm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pm(e)}function SO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function CO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SO(Object(r),!0).forEach(function(n){AB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function AB(e,t,r){return t=Kye(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Kye(e){var t=Gye(e,"string");return Pm(t)==="symbol"?t:String(t)}function Gye(e,t){if(Pm(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Pm(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Yye=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(n,a){return n.filter(function(i){return a.includes(i)})})},Xye=function(t){return t},Zye=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},gh=function(t,r){return Object.keys(r).reduce(function(n,a){return CO(CO({},n),{},AB({},a,t(a,r[a])))},{})},NO=function(t,r,n){return t.map(function(a){return"".concat(Zye(a)," ").concat(r,"ms ").concat(n)}).join(",")};function Qye(e,t){return txe(e)||exe(e,t)||OB(e,t)||Jye()}function Jye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function exe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function txe(e){if(Array.isArray(e))return e}function rxe(e){return ixe(e)||axe(e)||OB(e)||nxe()}function nxe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OB(e,t){if(e){if(typeof e=="string")return o_(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o_(e,t)}}function axe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ixe(e){if(Array.isArray(e))return o_(e)}function o_(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var sy=1e-4,TB=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},RB=function(t,r){return t.map(function(n,a){return n*Math.pow(r,a)}).reduce(function(n,a){return n+a})},kO=function(t,r){return function(n){var a=TB(t,r);return RB(a,n)}},sxe=function(t,r){return function(n){var a=TB(t,r),i=[].concat(rxe(a.map(function(o,l){return o*l}).slice(1)),[0]);return RB(i,n)}},PO=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0],i=r[1],o=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":a=0,i=0,o=1,l=1;break;case"ease":a=.25,i=.1,o=.25,l=1;break;case"ease-in":a=.42,i=0,o=1,l=1;break;case"ease-out":a=.42,i=0,o=.58,l=1;break;case"ease-in-out":a=0,i=0,o=.58,l=1;break;default:{var c=r[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(p){return parseFloat(p)}),d=Qye(u,4);a=d[0],i=d[1],o=d[2],l=d[3]}}}var f=kO(a,o),h=kO(i,l),m=sxe(a,o),y=function(v){return v>1?1:v<0?0:v},g=function(v){for(var x=v>1?1:v,b=x,_=0;_<8;++_){var j=f(b)-x,S=m(b);if(Math.abs(j-x)<sy||S<sy)return h(b);b=y(b-j/S)}return h(b)};return g.isStepper=!1,g},oxe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,n=r===void 0?100:r,a=t.damping,i=a===void 0?8:a,o=t.dt,l=o===void 0?17:o,c=function(d,f,h){var m=-(d-f)*n,y=h*i,g=h+(m-y)*l/1e3,p=h*l/1e3+d;return Math.abs(p-f)<sy&&Math.abs(g)<sy?[f,0]:[p,g]};return c.isStepper=!0,c.dt=l,c},lxe=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return PO(a);case"spring":return oxe();default:if(a.split("(")[0]==="cubic-bezier")return PO(a)}return typeof a=="function"?a:null};function Em(e){"@babel/helpers - typeof";return Em=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Em(e)}function EO(e){return dxe(e)||uxe(e)||MB(e)||cxe()}function cxe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uxe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function dxe(e){if(Array.isArray(e))return c_(e)}function AO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function bn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AO(Object(r),!0).forEach(function(n){l_(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function l_(e,t,r){return t=fxe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fxe(e){var t=hxe(e,"string");return Em(t)==="symbol"?t:String(t)}function hxe(e,t){if(Em(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Em(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mxe(e,t){return vxe(e)||gxe(e,t)||MB(e,t)||pxe()}function pxe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MB(e,t){if(e){if(typeof e=="string")return c_(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c_(e,t)}}function c_(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function gxe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function vxe(e){if(Array.isArray(e))return e}var oy=function(t,r,n){return t+(r-t)*n},u_=function(t){var r=t.from,n=t.to;return r!==n},yxe=function e(t,r,n){var a=gh(function(i,o){if(u_(o)){var l=t(o.from,o.to,o.velocity),c=mxe(l,2),u=c[0],d=c[1];return bn(bn({},o),{},{from:u,velocity:d})}return o},r);return n<1?gh(function(i,o){return u_(o)?bn(bn({},o),{},{velocity:oy(o.velocity,a[i].velocity,n),from:oy(o.from,a[i].from,n)}):o},r):e(t,a,n-1)};const xxe=function(e,t,r,n,a){var i=Yye(e,t),o=i.reduce(function(p,v){return bn(bn({},p),{},l_({},v,[e[v],t[v]]))},{}),l=i.reduce(function(p,v){return bn(bn({},p),{},l_({},v,{from:e[v],velocity:0,to:t[v]}))},{}),c=-1,u,d,f=function(){return null},h=function(){return gh(function(v,x){return x.from},l)},m=function(){return!Object.values(l).filter(u_).length},y=function(v){u||(u=v);var x=v-u,b=x/r.dt;l=yxe(r,l,b),a(bn(bn(bn({},e),t),h())),u=v,m()||(c=requestAnimationFrame(f))},g=function(v){d||(d=v);var x=(v-d)/n,b=gh(function(j,S){return oy.apply(void 0,EO(S).concat([r(x)]))},o);if(a(bn(bn(bn({},e),t),b)),x<1)c=requestAnimationFrame(f);else{var _=gh(function(j,S){return oy.apply(void 0,EO(S).concat([r(1)]))},o);a(bn(bn(bn({},e),t),_))}};return f=r.isStepper?y:g,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(c)}}};function id(e){"@babel/helpers - typeof";return id=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},id(e)}var bxe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function wxe(e,t){if(e==null)return{};var r=jxe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function jxe(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function fw(e){return Nxe(e)||Cxe(e)||Sxe(e)||_xe()}function _xe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Sxe(e,t){if(e){if(typeof e=="string")return d_(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d_(e,t)}}function Cxe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Nxe(e){if(Array.isArray(e))return d_(e)}function d_(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function OO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ei(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?OO(Object(r),!0).forEach(function(n){Zf(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Zf(e,t,r){return t=$B(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kxe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pxe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,$B(n.key),n)}}function Exe(e,t,r){return t&&Pxe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function $B(e){var t=Axe(e,"string");return id(t)==="symbol"?t:String(t)}function Axe(e,t){if(id(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(id(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Oxe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f_(e,t)}function f_(e,t){return f_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},f_(e,t)}function Txe(e){var t=Rxe();return function(){var n=ly(e),a;if(t){var i=ly(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return h_(this,a)}}function h_(e,t){if(t&&(id(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return m_(e)}function m_(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rxe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ly(e){return ly=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ly(e)}var Ha=function(e){Oxe(r,e);var t=Txe(r);function r(n,a){var i;kxe(this,r),i=t.call(this,n,a);var o=i.props,l=o.isActive,c=o.attributeName,u=o.from,d=o.to,f=o.steps,h=o.children,m=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(m_(i)),i.changeStyle=i.changeStyle.bind(m_(i)),!l||m<=0)return i.state={style:{}},typeof h=="function"&&(i.state={style:d}),h_(i);if(f&&f.length)i.state={style:f[0].style};else if(u){if(typeof h=="function")return i.state={style:u},h_(i);i.state={style:c?Zf({},c,u):u}}else i.state={style:{}};return i}return Exe(r,[{key:"componentDidMount",value:function(){var a=this.props,i=a.isActive,o=a.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var i=this.props,o=i.isActive,l=i.canBegin,c=i.attributeName,u=i.shouldReAnimate,d=i.to,f=i.from,h=this.state.style;if(l){if(!o){var m={style:c?Zf({},c,d):d};this.state&&h&&(c&&h[c]!==d||!c&&h!==d)&&this.setState(m);return}if(!(Bye(a.to,d)&&a.canBegin&&a.isActive)){var y=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var g=y||u?f:a.to;if(this.state&&h){var p={style:c?Zf({},c,g):g};(c&&h[c]!==g||!c&&h!==g)&&this.setState(p)}this.runAnimation(ei(ei({},this.props),{},{from:g,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var i=this,o=a.from,l=a.to,c=a.duration,u=a.easing,d=a.begin,f=a.onAnimationEnd,h=a.onAnimationStart,m=xxe(o,l,lxe(u),c,this.changeStyle),y=function(){i.stopJSAnimation=m()};this.manager.start([h,d,y,c,f])}},{key:"runStepAnimation",value:function(a){var i=this,o=a.steps,l=a.begin,c=a.onAnimationStart,u=o[0],d=u.style,f=u.duration,h=f===void 0?0:f,m=function(g,p,v){if(v===0)return g;var x=p.duration,b=p.easing,_=b===void 0?"ease":b,j=p.style,S=p.properties,C=p.onAnimationEnd,k=v>0?o[v-1]:p,N=S||Object.keys(j);if(typeof _=="function"||_==="spring")return[].concat(fw(g),[i.runJSAnimation.bind(i,{from:k.style,to:j,duration:x,easing:_}),x]);var A=NO(N,x,_),O=ei(ei(ei({},k.style),j),{},{transition:A});return[].concat(fw(g),[O,x,C]).filter(Xye)};return this.manager.start([c].concat(fw(o.reduce(m,[d,Math.max(h,l)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=qye());var i=a.begin,o=a.duration,l=a.attributeName,c=a.to,u=a.easing,d=a.onAnimationStart,f=a.onAnimationEnd,h=a.steps,m=a.children,y=this.manager;if(this.unSubscribe=y.subscribe(this.handleStyleChange),typeof u=="function"||typeof m=="function"||u==="spring"){this.runJSAnimation(a);return}if(h.length>1){this.runStepAnimation(a);return}var g=l?Zf({},l,c):c,p=NO(Object.keys(g),o,u);y.start([d,i,ei(ei({},g),{},{transition:p}),o,f])}},{key:"render",value:function(){var a=this.props,i=a.children;a.begin;var o=a.duration;a.attributeName,a.easing;var l=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var c=wxe(a,bxe),u=w.Children.count(i),d=this.state.style;if(typeof i=="function")return i(d);if(!l||u===0||o<=0)return i;var f=function(m){var y=m.props,g=y.style,p=g===void 0?{}:g,v=y.className,x=w.cloneElement(m,ei(ei({},c),{},{style:ei(ei({},p),d),className:v}));return x};return u===1?f(w.Children.only(i)):$.createElement("div",null,w.Children.map(i,function(h){return f(h)}))}}]),r}(w.PureComponent);Ha.displayName="Animate";Ha.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Ha.propTypes={from:Lt.oneOfType([Lt.object,Lt.string]),to:Lt.oneOfType([Lt.object,Lt.string]),attributeName:Lt.string,duration:Lt.number,begin:Lt.number,easing:Lt.oneOfType([Lt.string,Lt.func]),steps:Lt.arrayOf(Lt.shape({duration:Lt.number.isRequired,style:Lt.object.isRequired,easing:Lt.oneOfType([Lt.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Lt.func]),properties:Lt.arrayOf("string"),onAnimationEnd:Lt.func})),children:Lt.oneOfType([Lt.node,Lt.func]),isActive:Lt.bool,canBegin:Lt.bool,onAnimationEnd:Lt.func,shouldReAnimate:Lt.bool,onAnimationStart:Lt.func,onAnimationReStart:Lt.func};function Am(e){"@babel/helpers - typeof";return Am=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Am(e)}function cy(){return cy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cy.apply(this,arguments)}function Mxe(e,t){return Lxe(e)||Dxe(e,t)||Ixe(e,t)||$xe()}function $xe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ixe(e,t){if(e){if(typeof e=="string")return TO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return TO(e,t)}}function TO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Dxe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Lxe(e){if(Array.isArray(e))return e}function RO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function MO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RO(Object(r),!0).forEach(function(n){Bxe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Bxe(e,t,r){return t=Fxe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fxe(e){var t=zxe(e,"string");return Am(t)=="symbol"?t:t+""}function zxe(e,t){if(Am(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Am(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $O=function(t,r,n,a,i){var o=Math.min(Math.abs(n)/2,Math.abs(a)/2),l=a>=0?1:-1,c=n>=0?1:-1,u=a>=0&&n>=0||a<0&&n<0?1:0,d;if(o>0&&i instanceof Array){for(var f=[0,0,0,0],h=0,m=4;h<m;h++)f[h]=i[h]>o?o:i[h];d="M".concat(t,",").concat(r+l*f[0]),f[0]>0&&(d+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(u,",").concat(t+c*f[0],",").concat(r)),d+="L ".concat(t+n-c*f[1],",").concat(r),f[1]>0&&(d+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(u,`,
        `).concat(t+n,",").concat(r+l*f[1])),d+="L ".concat(t+n,",").concat(r+a-l*f[2]),f[2]>0&&(d+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(u,`,
        `).concat(t+n-c*f[2],",").concat(r+a)),d+="L ".concat(t+c*f[3],",").concat(r+a),f[3]>0&&(d+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(r+a-l*f[3])),d+="Z"}else if(o>0&&i===+i&&i>0){var y=Math.min(o,i);d="M ".concat(t,",").concat(r+l*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(t+c*y,",").concat(r,`
            L `).concat(t+n-c*y,",").concat(r,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(t+n,",").concat(r+l*y,`
            L `).concat(t+n,",").concat(r+a-l*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(t+n-c*y,",").concat(r+a,`
            L `).concat(t+c*y,",").concat(r+a,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(t,",").concat(r+a-l*y," Z")}else d="M ".concat(t,",").concat(r," h ").concat(n," v ").concat(a," h ").concat(-n," Z");return d},Uxe=function(t,r){if(!t||!r)return!1;var n=t.x,a=t.y,i=r.x,o=r.y,l=r.width,c=r.height;if(Math.abs(l)>0&&Math.abs(c)>0){var u=Math.min(i,i+l),d=Math.max(i,i+l),f=Math.min(o,o+c),h=Math.max(o,o+c);return n>=u&&n<=d&&a>=f&&a<=h}return!1},Vxe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},PN=function(t){var r=MO(MO({},Vxe),t),n=w.useRef(),a=w.useState(-1),i=Mxe(a,2),o=i[0],l=i[1];w.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var _=n.current.getTotalLength();_&&l(_)}catch{}},[]);var c=r.x,u=r.y,d=r.width,f=r.height,h=r.radius,m=r.className,y=r.animationEasing,g=r.animationDuration,p=r.animationBegin,v=r.isAnimationActive,x=r.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||d===0||f===0)return null;var b=ut("recharts-rectangle",m);return x?$.createElement(Ha,{canBegin:o>0,from:{width:d,height:f,x:c,y:u},to:{width:d,height:f,x:c,y:u},duration:g,animationEasing:y,isActive:x},function(_){var j=_.width,S=_.height,C=_.x,k=_.y;return $.createElement(Ha,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:g,isActive:v,easing:y},$.createElement("path",cy({},Ue(r,!0),{className:b,d:$O(C,k,j,S,h),ref:n})))}):$.createElement("path",cy({},Ue(r,!0),{className:b,d:$O(c,u,d,f,h)}))},Wxe=["points","className","baseLinePoints","connectNulls"];function cu(){return cu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cu.apply(this,arguments)}function Hxe(e,t){if(e==null)return{};var r=qxe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function qxe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function IO(e){return Xxe(e)||Yxe(e)||Gxe(e)||Kxe()}function Kxe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gxe(e,t){if(e){if(typeof e=="string")return p_(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p_(e,t)}}function Yxe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Xxe(e){if(Array.isArray(e))return p_(e)}function p_(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var DO=function(t){return t&&t.x===+t.x&&t.y===+t.y},Zxe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(function(n){DO(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),DO(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},vh=function(t,r){var n=Zxe(t);r&&(n=[n.reduce(function(i,o){return[].concat(IO(i),IO(o))},[])]);var a=n.map(function(i){return i.reduce(function(o,l,c){return"".concat(o).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return n.length===1?"".concat(a,"Z"):a},Qxe=function(t,r,n){var a=vh(t,n);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(vh(r.reverse(),n).slice(1))},Jxe=function(t){var r=t.points,n=t.className,a=t.baseLinePoints,i=t.connectNulls,o=Hxe(t,Wxe);if(!r||!r.length)return null;var l=ut("recharts-polygon",n);if(a&&a.length){var c=o.stroke&&o.stroke!=="none",u=Qxe(r,a,i);return $.createElement("g",{className:l},$.createElement("path",cu({},Ue(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:u})),c?$.createElement("path",cu({},Ue(o,!0),{fill:"none",d:vh(r,i)})):null,c?$.createElement("path",cu({},Ue(o,!0),{fill:"none",d:vh(a,i)})):null)}var d=vh(r,i);return $.createElement("path",cu({},Ue(o,!0),{fill:d.slice(-1)==="Z"?o.fill:"none",className:l,d}))};function g_(){return g_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},g_.apply(this,arguments)}var gp=function(t){var r=t.cx,n=t.cy,a=t.r,i=t.className,o=ut("recharts-dot",i);return r===+r&&n===+n&&a===+a?w.createElement("circle",g_({},Ue(t,!1),Av(t),{className:o,cx:r,cy:n,r:a})):null};function Om(e){"@babel/helpers - typeof";return Om=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Om(e)}var e0e=["x","y","top","left","width","height","className"];function v_(){return v_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},v_.apply(this,arguments)}function LO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function t0e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LO(Object(r),!0).forEach(function(n){r0e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function r0e(e,t,r){return t=n0e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n0e(e){var t=a0e(e,"string");return Om(t)=="symbol"?t:t+""}function a0e(e,t){if(Om(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Om(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function i0e(e,t){if(e==null)return{};var r=s0e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function s0e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var o0e=function(t,r,n,a,i,o){return"M".concat(t,",").concat(i,"v").concat(a,"M").concat(o,",").concat(r,"h").concat(n)},l0e=function(t){var r=t.x,n=r===void 0?0:r,a=t.y,i=a===void 0?0:a,o=t.top,l=o===void 0?0:o,c=t.left,u=c===void 0?0:c,d=t.width,f=d===void 0?0:d,h=t.height,m=h===void 0?0:h,y=t.className,g=i0e(t,e0e),p=t0e({x:n,y:i,top:l,left:u,width:f,height:m},g);return!we(n)||!we(i)||!we(f)||!we(m)||!we(l)||!we(u)?null:$.createElement("path",v_({},Ue(p,!0),{className:ut("recharts-cross",y),d:o0e(n,i,f,m,l,u)}))},c0e=h0,u0e=KL,d0e=as;function f0e(e,t){return e&&e.length?c0e(e,d0e(t),u0e):void 0}var h0e=f0e;const m0e=Bt(h0e);var p0e=h0,g0e=as,v0e=GL;function y0e(e,t){return e&&e.length?p0e(e,g0e(t),v0e):void 0}var x0e=y0e;const b0e=Bt(x0e);var w0e=["cx","cy","angle","ticks","axisLine"],j0e=["ticks","tick","angle","tickFormatter","stroke"];function sd(e){"@babel/helpers - typeof";return sd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sd(e)}function yh(){return yh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yh.apply(this,arguments)}function BO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function fl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BO(Object(r),!0).forEach(function(n){v0(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function FO(e,t){if(e==null)return{};var r=_0e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function _0e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function S0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,DB(n.key),n)}}function C0e(e,t,r){return t&&zO(e.prototype,t),r&&zO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function N0e(e,t,r){return t=uy(t),k0e(e,IB()?Reflect.construct(t,r||[],uy(e).constructor):t.apply(e,r))}function k0e(e,t){if(t&&(sd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return P0e(e)}function P0e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function IB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(IB=function(){return!!e})()}function uy(e){return uy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},uy(e)}function E0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y_(e,t)}function y_(e,t){return y_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},y_(e,t)}function v0(e,t,r){return t=DB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DB(e){var t=A0e(e,"string");return sd(t)=="symbol"?t:t+""}function A0e(e,t){if(sd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(sd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var y0=function(e){function t(){return S0e(this,t),N0e(this,t,arguments)}return E0e(t,e),C0e(t,[{key:"getTickValueCoord",value:function(n){var a=n.coordinate,i=this.props,o=i.angle,l=i.cx,c=i.cy;return hr(l,c,a,o)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,a;switch(n){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a}},{key:"getViewBox",value:function(){var n=this.props,a=n.cx,i=n.cy,o=n.angle,l=n.ticks,c=m0e(l,function(d){return d.coordinate||0}),u=b0e(l,function(d){return d.coordinate||0});return{cx:a,cy:i,startAngle:o,endAngle:o,innerRadius:u.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,o=n.angle,l=n.ticks,c=n.axisLine,u=FO(n,w0e),d=l.reduce(function(y,g){return[Math.min(y[0],g.coordinate),Math.max(y[1],g.coordinate)]},[1/0,-1/0]),f=hr(a,i,d[0],o),h=hr(a,i,d[1],o),m=fl(fl(fl({},Ue(u,!1)),{},{fill:"none"},Ue(c,!1)),{},{x1:f.x,y1:f.y,x2:h.x,y2:h.y});return $.createElement("line",yh({className:"recharts-polar-radius-axis-line"},m))}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,o=a.tick,l=a.angle,c=a.tickFormatter,u=a.stroke,d=FO(a,j0e),f=this.getTickTextAnchor(),h=Ue(d,!1),m=Ue(o,!1),y=i.map(function(g,p){var v=n.getTickValueCoord(g),x=fl(fl(fl(fl({textAnchor:f,transform:"rotate(".concat(90-l,", ").concat(v.x,", ").concat(v.y,")")},h),{},{stroke:"none",fill:u},m),{},{index:p},v),{},{payload:g});return $.createElement(vt,yh({className:ut("recharts-polar-radius-axis-tick",jB(o)),key:"tick-".concat(g.coordinate)},Vo(n.props,g,p)),t.renderTickItem(o,x,c?c(g.value,p):g.value))});return $.createElement(vt,{className:"recharts-polar-radius-axis-ticks"},y)}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.axisLine,o=n.tick;return!a||!a.length?null:$.createElement(vt,{className:ut("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),o&&this.renderTicks(),dn.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,a,i){var o;return $.isValidElement(n)?o=$.cloneElement(n,a):Je(n)?o=n(a):o=$.createElement(ic,yh({},a,{className:"recharts-polar-radius-axis-tick-value"}),i),o}}])}(w.PureComponent);v0(y0,"displayName","PolarRadiusAxis");v0(y0,"axisType","radiusAxis");v0(y0,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function od(e){"@babel/helpers - typeof";return od=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},od(e)}function Cl(){return Cl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Cl.apply(this,arguments)}function UO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function hl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UO(Object(r),!0).forEach(function(n){x0(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function O0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function VO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,BB(n.key),n)}}function T0e(e,t,r){return t&&VO(e.prototype,t),r&&VO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function R0e(e,t,r){return t=dy(t),M0e(e,LB()?Reflect.construct(t,r||[],dy(e).constructor):t.apply(e,r))}function M0e(e,t){if(t&&(od(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $0e(e)}function $0e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function LB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(LB=function(){return!!e})()}function dy(e){return dy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},dy(e)}function I0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x_(e,t)}function x_(e,t){return x_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},x_(e,t)}function x0(e,t,r){return t=BB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BB(e){var t=D0e(e,"string");return od(t)=="symbol"?t:t+""}function D0e(e,t){if(od(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(od(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var L0e=Math.PI/180,WO=1e-5,b0=function(e){function t(){return O0e(this,t),R0e(this,t,arguments)}return I0e(t,e),T0e(t,[{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.cx,o=a.cy,l=a.radius,c=a.orientation,u=a.tickSize,d=u||8,f=hr(i,o,l,n.coordinate),h=hr(i,o,l+(c==="inner"?-1:1)*d,n.coordinate);return{x1:f.x,y1:f.y,x2:h.x,y2:h.y}}},{key:"getTickTextAnchor",value:function(n){var a=this.props.orientation,i=Math.cos(-n.coordinate*L0e),o;return i>WO?o=a==="outer"?"start":"end":i<-WO?o=a==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,o=n.radius,l=n.axisLine,c=n.axisLineType,u=hl(hl({},Ue(this.props,!1)),{},{fill:"none"},Ue(l,!1));if(c==="circle")return $.createElement(gp,Cl({className:"recharts-polar-angle-axis-line"},u,{cx:a,cy:i,r:o}));var d=this.props.ticks,f=d.map(function(h){return hr(a,i,o,h.coordinate)});return $.createElement(Jxe,Cl({className:"recharts-polar-angle-axis-line"},u,{points:f}))}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,o=a.tick,l=a.tickLine,c=a.tickFormatter,u=a.stroke,d=Ue(this.props,!1),f=Ue(o,!1),h=hl(hl({},d),{},{fill:"none"},Ue(l,!1)),m=i.map(function(y,g){var p=n.getTickLineCoord(y),v=n.getTickTextAnchor(y),x=hl(hl(hl({textAnchor:v},d),{},{stroke:"none",fill:u},f),{},{index:g,payload:y,x:p.x2,y:p.y2});return $.createElement(vt,Cl({className:ut("recharts-polar-angle-axis-tick",jB(o)),key:"tick-".concat(y.coordinate)},Vo(n.props,y,g)),l&&$.createElement("line",Cl({className:"recharts-polar-angle-axis-tick-line"},h,p)),o&&t.renderTickItem(o,x,c?c(y.value,g):y.value))});return $.createElement(vt,{className:"recharts-polar-angle-axis-ticks"},m)}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.radius,o=n.axisLine;return i<=0||!a||!a.length?null:$.createElement(vt,{className:ut("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,a,i){var o;return $.isValidElement(n)?o=$.cloneElement(n,a):Je(n)?o=n(a):o=$.createElement(ic,Cl({},a,{className:"recharts-polar-angle-axis-tick-value"}),i),o}}])}(w.PureComponent);x0(b0,"displayName","PolarAngleAxis");x0(b0,"axisType","angleAxis");x0(b0,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var B0e=V4,F0e=B0e(Object.getPrototypeOf,Object),z0e=F0e,U0e=zs,V0e=z0e,W0e=Us,H0e="[object Object]",q0e=Function.prototype,K0e=Object.prototype,FB=q0e.toString,G0e=K0e.hasOwnProperty,Y0e=FB.call(Object);function X0e(e){if(!W0e(e)||U0e(e)!=H0e)return!1;var t=V0e(e);if(t===null)return!0;var r=G0e.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&FB.call(r)==Y0e}var Z0e=X0e;const Q0e=Bt(Z0e);var J0e=zs,ebe=Us,tbe="[object Boolean]";function rbe(e){return e===!0||e===!1||ebe(e)&&J0e(e)==tbe}var nbe=rbe;const abe=Bt(nbe);function Tm(e){"@babel/helpers - typeof";return Tm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tm(e)}function fy(){return fy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fy.apply(this,arguments)}function ibe(e,t){return cbe(e)||lbe(e,t)||obe(e,t)||sbe()}function sbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function obe(e,t){if(e){if(typeof e=="string")return HO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return HO(e,t)}}function HO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function lbe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function cbe(e){if(Array.isArray(e))return e}function qO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function KO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qO(Object(r),!0).forEach(function(n){ube(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ube(e,t,r){return t=dbe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dbe(e){var t=fbe(e,"string");return Tm(t)=="symbol"?t:t+""}function fbe(e,t){if(Tm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Tm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var GO=function(t,r,n,a,i){var o=n-a,l;return l="M ".concat(t,",").concat(r),l+="L ".concat(t+n,",").concat(r),l+="L ".concat(t+n-o/2,",").concat(r+i),l+="L ".concat(t+n-o/2-a,",").concat(r+i),l+="L ".concat(t,",").concat(r," Z"),l},hbe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},mbe=function(t){var r=KO(KO({},hbe),t),n=w.useRef(),a=w.useState(-1),i=ibe(a,2),o=i[0],l=i[1];w.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var b=n.current.getTotalLength();b&&l(b)}catch{}},[]);var c=r.x,u=r.y,d=r.upperWidth,f=r.lowerWidth,h=r.height,m=r.className,y=r.animationEasing,g=r.animationDuration,p=r.animationBegin,v=r.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||h!==+h||d===0&&f===0||h===0)return null;var x=ut("recharts-trapezoid",m);return v?$.createElement(Ha,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:h,x:c,y:u},to:{upperWidth:d,lowerWidth:f,height:h,x:c,y:u},duration:g,animationEasing:y,isActive:v},function(b){var _=b.upperWidth,j=b.lowerWidth,S=b.height,C=b.x,k=b.y;return $.createElement(Ha,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:g,easing:y},$.createElement("path",fy({},Ue(r,!0),{className:x,d:GO(C,k,_,j,S),ref:n})))}):$.createElement("g",null,$.createElement("path",fy({},Ue(r,!0),{className:x,d:GO(c,u,d,f,h)})))},pbe=["option","shapeType","propTransformer","activeClassName","isActive"];function Rm(e){"@babel/helpers - typeof";return Rm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rm(e)}function gbe(e,t){if(e==null)return{};var r=vbe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function vbe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function YO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function hy(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YO(Object(r),!0).forEach(function(n){ybe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ybe(e,t,r){return t=xbe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xbe(e){var t=bbe(e,"string");return Rm(t)=="symbol"?t:t+""}function bbe(e,t){if(Rm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Rm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wbe(e,t){return hy(hy({},t),e)}function jbe(e,t){return e==="symbols"}function XO(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return $.createElement(PN,r);case"trapezoid":return $.createElement(mbe,r);case"sector":return $.createElement(CB,r);case"symbols":if(jbe(t))return $.createElement(n0,r);break;default:return null}}function _be(e){return w.isValidElement(e)?e.props:e}function my(e){var t=e.option,r=e.shapeType,n=e.propTransformer,a=n===void 0?wbe:n,i=e.activeClassName,o=i===void 0?"recharts-active-shape":i,l=e.isActive,c=gbe(e,pbe),u;if(w.isValidElement(t))u=w.cloneElement(t,hy(hy({},c),_be(t)));else if(Je(t))u=t(c);else if(Q0e(t)&&!abe(t)){var d=a(t,c);u=$.createElement(XO,{shapeType:r,elementProps:d})}else{var f=c;u=$.createElement(XO,{shapeType:r,elementProps:f})}return l?$.createElement(vt,{className:o},u):u}function w0(e,t){return t!=null&&"trapezoids"in e.props}function j0(e,t){return t!=null&&"sectors"in e.props}function Mm(e,t){return t!=null&&"points"in e.props}function Sbe(e,t){var r,n,a=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,i=e.y===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.y)||e.y===t.y;return a&&i}function Cbe(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function Nbe(e,t){var r=e.x===t.x,n=e.y===t.y,a=e.z===t.z;return r&&n&&a}function kbe(e,t){var r;return w0(e,t)?r=Sbe:j0(e,t)?r=Cbe:Mm(e,t)&&(r=Nbe),r}function Pbe(e,t){var r;return w0(e,t)?r="trapezoids":j0(e,t)?r="sectors":Mm(e,t)&&(r="points"),r}function Ebe(e,t){if(w0(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(j0(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return Mm(e,t)?t.payload:{}}function Abe(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,a=Pbe(r,t),i=Ebe(r,t),o=n.filter(function(c,u){var d=Wo(i,c),f=r.props[a].filter(function(y){var g=kbe(r,t);return g(y,t)}),h=r.props[a].indexOf(f[f.length-1]),m=u===h;return d&&m}),l=n.indexOf(o[o.length-1]);return l}var Lg;function ld(e){"@babel/helpers - typeof";return ld=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ld(e)}function uu(){return uu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},uu.apply(this,arguments)}function ZO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ur(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZO(Object(r),!0).forEach(function(n){$a(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Obe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function QO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,UB(n.key),n)}}function Tbe(e,t,r){return t&&QO(e.prototype,t),r&&QO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Rbe(e,t,r){return t=py(t),Mbe(e,zB()?Reflect.construct(t,r||[],py(e).constructor):t.apply(e,r))}function Mbe(e,t){if(t&&(ld(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $be(e)}function $be(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zB=function(){return!!e})()}function py(e){return py=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},py(e)}function Ibe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b_(e,t)}function b_(e,t){return b_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},b_(e,t)}function $a(e,t,r){return t=UB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UB(e){var t=Dbe(e,"string");return ld(t)=="symbol"?t:t+""}function Dbe(e,t){if(ld(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(ld(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ki=function(e){function t(r){var n;return Obe(this,t),n=Rbe(this,t,[r]),$a(n,"pieRef",null),$a(n,"sectorRefs",[]),$a(n,"id",Jo("recharts-pie-")),$a(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Je(a)&&a()}),$a(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Je(a)&&a()}),n.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},n}return Ibe(t,e),Tbe(t,[{key:"isActiveIndex",value:function(n){var a=this.props.activeIndex;return Array.isArray(a)?a.indexOf(n)!==-1:n===a}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.label,l=i.labelLine,c=i.dataKey,u=i.valueKey,d=Ue(this.props,!1),f=Ue(o,!1),h=Ue(l,!1),m=o&&o.offsetRadius||20,y=n.map(function(g,p){var v=(g.startAngle+g.endAngle)/2,x=hr(g.cx,g.cy,g.outerRadius+m,v),b=ur(ur(ur(ur({},d),g),{},{stroke:"none"},f),{},{index:p,textAnchor:t.getTextAnchor(x.x,g.cx)},x),_=ur(ur(ur(ur({},d),g),{},{fill:"none",stroke:g.fill},h),{},{index:p,points:[hr(g.cx,g.cy,g.outerRadius,v),x]}),j=c;return Qe(c)&&Qe(u)?j="value":Qe(c)&&(j=u),$.createElement(vt,{key:"label-".concat(g.startAngle,"-").concat(g.endAngle,"-").concat(g.midAngle,"-").concat(p)},l&&t.renderLabelLineItem(l,_,"line"),t.renderLabelItem(o,b,xr(g,j)))});return $.createElement(vt,{className:"recharts-pie-labels"},y)}},{key:"renderSectorsStatically",value:function(n){var a=this,i=this.props,o=i.activeShape,l=i.blendStroke,c=i.inactiveShape;return n.map(function(u,d){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&n.length!==1)return null;var f=a.isActiveIndex(d),h=c&&a.hasActiveIndex()?c:null,m=f?o:h,y=ur(ur({},u),{},{stroke:l?u.fill:u.stroke,tabIndex:-1});return $.createElement(vt,uu({ref:function(p){p&&!a.sectorRefs.includes(p)&&a.sectorRefs.push(p)},tabIndex:-1,className:"recharts-pie-sector"},Vo(a.props,u,d),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(d)}),$.createElement(my,uu({option:m,isActive:f,shapeType:"sector"},y)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,a=this.props,i=a.sectors,o=a.isAnimationActive,l=a.animationBegin,c=a.animationDuration,u=a.animationEasing,d=a.animationId,f=this.state,h=f.prevSectors,m=f.prevIsAnimationActive;return $.createElement(Ha,{begin:l,duration:c,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(d,"-").concat(m),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(y){var g=y.t,p=[],v=i&&i[0],x=v.startAngle;return i.forEach(function(b,_){var j=h&&h[_],S=_>0?wa(b,"paddingAngle",0):0;if(j){var C=Cr(j.endAngle-j.startAngle,b.endAngle-b.startAngle),k=ur(ur({},b),{},{startAngle:x+S,endAngle:x+C(g)+S});p.push(k),x=k.endAngle}else{var N=b.endAngle,A=b.startAngle,O=Cr(0,N-A),E=O(g),R=ur(ur({},b),{},{startAngle:x+S,endAngle:x+E+S});p.push(R),x=R.endAngle}}),$.createElement(vt,null,n.renderSectorsStatically(p))})}},{key:"attachKeyboardHandlers",value:function(n){var a=this;n.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var o=++a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[o].focus(),a.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--a.state.sectorToFocus<0?a.sectorRefs.length-1:a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[l].focus(),a.setState({sectorToFocus:l});break}case"Escape":{a.sectorRefs[a.state.sectorToFocus].blur(),a.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,a=n.sectors,i=n.isAnimationActive,o=this.state.prevSectors;return i&&a&&a.length&&(!o||!Wo(o,a))?this.renderSectorsWithAnimation():this.renderSectorsStatically(a)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,a=this.props,i=a.hide,o=a.sectors,l=a.className,c=a.label,u=a.cx,d=a.cy,f=a.innerRadius,h=a.outerRadius,m=a.isAnimationActive,y=this.state.isAnimationFinished;if(i||!o||!o.length||!we(u)||!we(d)||!we(f)||!we(h))return null;var g=ut("recharts-pie",l);return $.createElement(vt,{tabIndex:this.props.rootTabIndex,className:g,ref:function(v){n.pieRef=v}},this.renderSectors(),c&&this.renderLabels(o),dn.renderCallByParent(this.props,null,!1),(!m||y)&&wi.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return a.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:a.curSectors,isAnimationFinished:!0}:n.sectors!==a.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,a){return n>a?"start":n<a?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,a,i){if($.isValidElement(n))return $.cloneElement(n,a);if(Je(n))return n(a);var o=ut("recharts-pie-label-line",typeof n!="boolean"?n.className:"");return $.createElement(Mo,uu({},a,{key:i,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(n,a,i){if($.isValidElement(n))return $.cloneElement(n,a);var o=i;if(Je(n)&&(o=n(a),$.isValidElement(o)))return o;var l=ut("recharts-pie-label-text",typeof n!="boolean"&&!Je(n)?n.className:"");return $.createElement(ic,uu({},a,{alignmentBaseline:"middle",className:l}),o)}}])}(w.PureComponent);Lg=ki;$a(ki,"displayName","Pie");$a(ki,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Fa.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});$a(ki,"parseDeltaAngle",function(e,t){var r=Un(t-e),n=Math.min(Math.abs(t-e),360);return r*n});$a(ki,"getRealPieData",function(e){var t=e.data,r=e.children,n=Ue(e,!1),a=qn(r,el);return t&&t.length?t.map(function(i,o){return ur(ur(ur({payload:i},n),i),a&&a[o]&&a[o].props)}):a&&a.length?a.map(function(i){return ur(ur({},n),i.props)}):[]});$a(ki,"parseCoordinateOfPie",function(e,t){var r=t.top,n=t.left,a=t.width,i=t.height,o=wB(a,i),l=n+Vn(e.cx,a,a/2),c=r+Vn(e.cy,i,i/2),u=Vn(e.innerRadius,o,0),d=Vn(e.outerRadius,o,o*.8),f=e.maxRadius||Math.sqrt(a*a+i*i)/2;return{cx:l,cy:c,innerRadius:u,outerRadius:d,maxRadius:f}});$a(ki,"getComposedData",function(e){var t=e.item,r=e.offset,n=t.type.defaultProps!==void 0?ur(ur({},t.type.defaultProps),t.props):t.props,a=Lg.getRealPieData(n);if(!a||!a.length)return null;var i=n.cornerRadius,o=n.startAngle,l=n.endAngle,c=n.paddingAngle,u=n.dataKey,d=n.nameKey,f=n.valueKey,h=n.tooltipType,m=Math.abs(n.minAngle),y=Lg.parseCoordinateOfPie(n,r),g=Lg.parseDeltaAngle(o,l),p=Math.abs(g),v=u;Qe(u)&&Qe(f)?(bi(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),v="value"):Qe(u)&&(bi(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),v=f);var x=a.filter(function(k){return xr(k,v,0)!==0}).length,b=(p>=360?x:x-1)*c,_=p-x*m-b,j=a.reduce(function(k,N){var A=xr(N,v,0);return k+(we(A)?A:0)},0),S;if(j>0){var C;S=a.map(function(k,N){var A=xr(k,v,0),O=xr(k,d,N),E=(we(A)?A:0)/j,R;N?R=C.endAngle+Un(g)*c*(A!==0?1:0):R=o;var P=R+Un(g)*((A!==0?m:0)+E*_),T=(R+P)/2,I=(y.innerRadius+y.outerRadius)/2,M=[{name:O,value:A,payload:k,dataKey:v,type:h}],D=hr(y.cx,y.cy,I,T);return C=ur(ur(ur({percent:E,cornerRadius:i,name:O,tooltipPayload:M,midAngle:T,middleRadius:I,tooltipPosition:D},k),y),{},{value:xr(k,v),startAngle:R,endAngle:P,payload:k,paddingAngle:Un(g)*c}),C})}return ur(ur({},y),{},{sectors:S,data:a})});var Lbe=Math.ceil,Bbe=Math.max;function Fbe(e,t,r,n){for(var a=-1,i=Bbe(Lbe((t-e)/(r||1)),0),o=Array(i);i--;)o[n?i:++a]=e,e+=r;return o}var zbe=Fbe,Ube=lL,JO=1/0,Vbe=17976931348623157e292;function Wbe(e){if(!e)return e===0?e:0;if(e=Ube(e),e===JO||e===-JO){var t=e<0?-1:1;return t*Vbe}return e===e?e:0}var VB=Wbe,Hbe=zbe,qbe=s0,hw=VB;function Kbe(e){return function(t,r,n){return n&&typeof n!="number"&&qbe(t,r,n)&&(r=n=void 0),t=hw(t),r===void 0?(r=t,t=0):r=hw(r),n=n===void 0?t<r?1:-1:hw(n),Hbe(t,r,n,e)}}var Gbe=Kbe,Ybe=Gbe,Xbe=Ybe(),Zbe=Xbe;const gy=Bt(Zbe);function $m(e){"@babel/helpers - typeof";return $m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$m(e)}function eT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function tT(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eT(Object(r),!0).forEach(function(n){WB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function WB(e,t,r){return t=Qbe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qbe(e){var t=Jbe(e,"string");return $m(t)=="symbol"?t:t+""}function Jbe(e,t){if($m(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if($m(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ewe=["Webkit","Moz","O","ms"],twe=function(t,r){var n=t.replace(/(\w)/,function(i){return i.toUpperCase()}),a=ewe.reduce(function(i,o){return tT(tT({},i),{},WB({},o+n,r))},{});return a[t]=r,a};function cd(e){"@babel/helpers - typeof";return cd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cd(e)}function vy(){return vy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vy.apply(this,arguments)}function rT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function mw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rT(Object(r),!0).forEach(function(n){da(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rwe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,qB(n.key),n)}}function nwe(e,t,r){return t&&nT(e.prototype,t),r&&nT(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function awe(e,t,r){return t=yy(t),iwe(e,HB()?Reflect.construct(t,r||[],yy(e).constructor):t.apply(e,r))}function iwe(e,t){if(t&&(cd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return swe(e)}function swe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function HB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(HB=function(){return!!e})()}function yy(e){return yy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},yy(e)}function owe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w_(e,t)}function w_(e,t){return w_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},w_(e,t)}function da(e,t,r){return t=qB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qB(e){var t=lwe(e,"string");return cd(t)=="symbol"?t:t+""}function lwe(e,t){if(cd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(cd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cwe=function(t){var r=t.data,n=t.startIndex,a=t.endIndex,i=t.x,o=t.width,l=t.travellerWidth;if(!r||!r.length)return{};var c=r.length,u=mh().domain(gy(0,c)).range([i,i+o-l]),d=u.domain().map(function(f){return u(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(n),endX:u(a),scale:u,scaleValues:d}},aT=function(t){return t.changedTouches&&!!t.changedTouches.length},ud=function(e){function t(r){var n;return rwe(this,t),n=awe(this,t,[r]),da(n,"handleDrag",function(a){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(a):n.state.isSlideMoving&&n.handleSlideDrag(a)}),da(n,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&n.handleDrag(a.changedTouches[0])}),da(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=n.props,i=a.endIndex,o=a.onDragEnd,l=a.startIndex;o==null||o({endIndex:i,startIndex:l})}),n.detachDragEndListener()}),da(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),da(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),da(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),da(n,"handleSlideDragStart",function(a){var i=aT(a)?a.changedTouches[0]:a;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return owe(t,e),nwe(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var a=n.startX,i=n.endX,o=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,d=u.length-1,f=Math.min(a,i),h=Math.max(a,i),m=t.getIndexInRange(o,f),y=t.getIndexInRange(o,h);return{startIndex:m-m%c,endIndex:y===d?d:y-y%c}}},{key:"getTextOfTick",value:function(n){var a=this.props,i=a.data,o=a.tickFormatter,l=a.dataKey,c=xr(i[n],l,n);return Je(o)?o(c,n):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var a=this.state,i=a.slideMoveStartX,o=a.startX,l=a.endX,c=this.props,u=c.x,d=c.width,f=c.travellerWidth,h=c.startIndex,m=c.endIndex,y=c.onChange,g=n.pageX-i;g>0?g=Math.min(g,u+d-f-l,u+d-f-o):g<0&&(g=Math.max(g,u-o,u-l));var p=this.getIndex({startX:o+g,endX:l+g});(p.startIndex!==h||p.endIndex!==m)&&y&&y(p),this.setState({startX:o+g,endX:l+g,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,a){var i=aT(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var a=this.state,i=a.brushMoveStartX,o=a.movingTravellerId,l=a.endX,c=a.startX,u=this.state[o],d=this.props,f=d.x,h=d.width,m=d.travellerWidth,y=d.onChange,g=d.gap,p=d.data,v={startX:this.state.startX,endX:this.state.endX},x=n.pageX-i;x>0?x=Math.min(x,f+h-m-u):x<0&&(x=Math.max(x,f-u)),v[o]=u+x;var b=this.getIndex(v),_=b.startIndex,j=b.endIndex,S=function(){var k=p.length-1;return o==="startX"&&(l>c?_%g===0:j%g===0)||l<c&&j===k||o==="endX"&&(l>c?j%g===0:_%g===0)||l>c&&j===k};this.setState(da(da({},o,u+x),"brushMoveStartX",n.pageX),function(){y&&S()&&y(b)})}},{key:"handleTravellerMoveKeyboard",value:function(n,a){var i=this,o=this.state,l=o.scaleValues,c=o.startX,u=o.endX,d=this.state[a],f=l.indexOf(d);if(f!==-1){var h=f+n;if(!(h===-1||h>=l.length)){var m=l[h];a==="startX"&&m>=u||a==="endX"&&m<=c||this.setState(da({},a,m),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,l=n.height,c=n.fill,u=n.stroke;return $.createElement("rect",{stroke:u,fill:c,x:a,y:i,width:o,height:l})}},{key:"renderPanorama",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,l=n.height,c=n.data,u=n.children,d=n.padding,f=w.Children.only(u);return f?$.cloneElement(f,{x:a,y:i,width:o,height:l,margin:d,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(n,a){var i,o,l=this,c=this.props,u=c.y,d=c.travellerWidth,f=c.height,h=c.traveller,m=c.ariaLabel,y=c.data,g=c.startIndex,p=c.endIndex,v=Math.max(n,this.props.x),x=mw(mw({},Ue(this.props,!1)),{},{x:v,y:u,width:d,height:f}),b=m||"Min value: ".concat((i=y[g])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=y[p])===null||o===void 0?void 0:o.name);return $.createElement(vt,{tabIndex:0,role:"slider","aria-label":b,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(j){["ArrowLeft","ArrowRight"].includes(j.key)&&(j.preventDefault(),j.stopPropagation(),l.handleTravellerMoveKeyboard(j.key==="ArrowRight"?1:-1,a))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(h,x))}},{key:"renderSlide",value:function(n,a){var i=this.props,o=i.y,l=i.height,c=i.stroke,u=i.travellerWidth,d=Math.min(n,a)+u,f=Math.max(Math.abs(a-n)-u,0);return $.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:d,y:o,width:f,height:l})}},{key:"renderText",value:function(){var n=this.props,a=n.startIndex,i=n.endIndex,o=n.y,l=n.height,c=n.travellerWidth,u=n.stroke,d=this.state,f=d.startX,h=d.endX,m=5,y={pointerEvents:"none",fill:u};return $.createElement(vt,{className:"recharts-brush-texts"},$.createElement(ic,vy({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,h)-m,y:o+l/2},y),this.getTextOfTick(a)),$.createElement(ic,vy({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,h)+c+m,y:o+l/2},y),this.getTextOfTick(i)))}},{key:"render",value:function(){var n=this.props,a=n.data,i=n.className,o=n.children,l=n.x,c=n.y,u=n.width,d=n.height,f=n.alwaysShowText,h=this.state,m=h.startX,y=h.endX,g=h.isTextActive,p=h.isSlideMoving,v=h.isTravellerMoving,x=h.isTravellerFocused;if(!a||!a.length||!we(l)||!we(c)||!we(u)||!we(d)||u<=0||d<=0)return null;var b=ut("recharts-brush",i),_=$.Children.count(o)===1,j=twe("userSelect","none");return $.createElement(vt,{className:b,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:j},this.renderBackground(),_&&this.renderPanorama(),this.renderSlide(m,y),this.renderTravellerLayer(m,"startX"),this.renderTravellerLayer(y,"endX"),(g||p||v||x||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var a=n.x,i=n.y,o=n.width,l=n.height,c=n.stroke,u=Math.floor(i+l/2)-1;return $.createElement($.Fragment,null,$.createElement("rect",{x:a,y:i,width:o,height:l,fill:c,stroke:"none"}),$.createElement("line",{x1:a+1,y1:u,x2:a+o-1,y2:u,fill:"none",stroke:"#fff"}),$.createElement("line",{x1:a+1,y1:u+2,x2:a+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,a){var i;return $.isValidElement(n)?i=$.cloneElement(n,a):Je(n)?i=n(a):i=t.renderDefaultTraveller(a),i}},{key:"getDerivedStateFromProps",value:function(n,a){var i=n.data,o=n.width,l=n.x,c=n.travellerWidth,u=n.updateId,d=n.startIndex,f=n.endIndex;if(i!==a.prevData||u!==a.prevUpdateId)return mw({prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o},i&&i.length?cwe({data:i,width:o,x:l,travellerWidth:c,startIndex:d,endIndex:f}):{scale:null,scaleValues:null});if(a.scale&&(o!==a.prevWidth||l!==a.prevX||c!==a.prevTravellerWidth)){a.scale.range([l,l+o-c]);var h=a.scale.domain().map(function(m){return a.scale(m)});return{prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o,startX:a.scale(n.startIndex),endX:a.scale(n.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(n,a){for(var i=n.length,o=0,l=i-1;l-o>1;){var c=Math.floor((o+l)/2);n[c]>a?l=c:o=c}return a>=n[l]?l:o}}])}(w.PureComponent);da(ud,"displayName","Brush");da(ud,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var uwe=eN;function dwe(e,t){var r;return uwe(e,function(n,a,i){return r=t(n,a,i),!r}),!!r}var fwe=dwe,hwe=$4,mwe=as,pwe=fwe,gwe=la,vwe=s0;function ywe(e,t,r){var n=gwe(e)?hwe:pwe;return r&&vwe(e,t,r)&&(t=void 0),n(e,mwe(t))}var xwe=ywe;const bwe=Bt(xwe);var Xi=function(t,r){var n=t.alwaysShow,a=t.ifOverflow;return n&&(a="extendDomain"),a===r},iT=nL;function wwe(e,t,r){t=="__proto__"&&iT?iT(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var jwe=wwe,_we=jwe,Swe=tL,Cwe=as;function Nwe(e,t){var r={};return t=Cwe(t),Swe(e,function(n,a,i){_we(r,a,t(n,a,i))}),r}var kwe=Nwe;const Pwe=Bt(kwe);function Ewe(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}var Awe=Ewe,Owe=eN;function Twe(e,t){var r=!0;return Owe(e,function(n,a,i){return r=!!t(n,a,i),r}),r}var Rwe=Twe,Mwe=Awe,$we=Rwe,Iwe=as,Dwe=la,Lwe=s0;function Bwe(e,t,r){var n=Dwe(e)?Mwe:$we;return r&&Lwe(e,t,r)&&(t=void 0),n(e,Iwe(t))}var Fwe=Bwe;const KB=Bt(Fwe);var zwe=["x","y"];function Im(e){"@babel/helpers - typeof";return Im=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Im(e)}function j_(){return j_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},j_.apply(this,arguments)}function sT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function $f(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sT(Object(r),!0).forEach(function(n){Uwe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Uwe(e,t,r){return t=Vwe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vwe(e){var t=Wwe(e,"string");return Im(t)=="symbol"?t:t+""}function Wwe(e,t){if(Im(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Im(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Hwe(e,t){if(e==null)return{};var r=qwe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function qwe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Kwe(e,t){var r=e.x,n=e.y,a=Hwe(e,zwe),i="".concat(r),o=parseInt(i,10),l="".concat(n),c=parseInt(l,10),u="".concat(t.height||a.height),d=parseInt(u,10),f="".concat(t.width||a.width),h=parseInt(f,10);return $f($f($f($f($f({},t),a),o?{x:o}:{}),c?{y:c}:{}),{},{height:d,width:h,name:t.name,radius:t.radius})}function oT(e){return $.createElement(my,j_({shapeType:"rectangle",propTransformer:Kwe,activeClassName:"recharts-active-bar"},e))}var Gwe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,a){if(typeof t=="number")return t;var i=we(n)||xte(n);return i?t(n,a):(i||oc(),r)}},Ywe=["value","background"],GB;function dd(e){"@babel/helpers - typeof";return dd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dd(e)}function Xwe(e,t){if(e==null)return{};var r=Zwe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Zwe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function xy(){return xy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xy.apply(this,arguments)}function lT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Hr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lT(Object(r),!0).forEach(function(n){yo(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Qwe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,XB(n.key),n)}}function Jwe(e,t,r){return t&&cT(e.prototype,t),r&&cT(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function eje(e,t,r){return t=by(t),tje(e,YB()?Reflect.construct(t,r||[],by(e).constructor):t.apply(e,r))}function tje(e,t){if(t&&(dd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rje(e)}function rje(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function YB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(YB=function(){return!!e})()}function by(e){return by=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},by(e)}function nje(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&__(e,t)}function __(e,t){return __=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},__(e,t)}function yo(e,t,r){return t=XB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XB(e){var t=aje(e,"string");return dd(t)=="symbol"?t:t+""}function aje(e,t){if(dd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(dd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Wt=function(e){function t(){var r;Qwe(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=eje(this,t,[].concat(a)),yo(r,"state",{isAnimationFinished:!1}),yo(r,"id",Jo("recharts-bar-")),yo(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),yo(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return nje(t,e),Jwe(t,[{key:"renderRectanglesStatically",value:function(n){var a=this,i=this.props,o=i.shape,l=i.dataKey,c=i.activeIndex,u=i.activeBar,d=Ue(this.props,!1);return n&&n.map(function(f,h){var m=h===c,y=m?u:o,g=Hr(Hr(Hr({},d),f),{},{isActive:m,option:y,index:h,dataKey:l,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return $.createElement(vt,xy({className:"recharts-bar-rectangle"},Vo(a.props,f,h),{key:"rectangle-".concat(f==null?void 0:f.x,"-").concat(f==null?void 0:f.y,"-").concat(f==null?void 0:f.value,"-").concat(h)}),$.createElement(oT,g))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,a=this.props,i=a.data,o=a.layout,l=a.isAnimationActive,c=a.animationBegin,u=a.animationDuration,d=a.animationEasing,f=a.animationId,h=this.state.prevData;return $.createElement(Ha,{begin:c,duration:u,isActive:l,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(m){var y=m.t,g=i.map(function(p,v){var x=h&&h[v];if(x){var b=Cr(x.x,p.x),_=Cr(x.y,p.y),j=Cr(x.width,p.width),S=Cr(x.height,p.height);return Hr(Hr({},p),{},{x:b(y),y:_(y),width:j(y),height:S(y)})}if(o==="horizontal"){var C=Cr(0,p.height),k=C(y);return Hr(Hr({},p),{},{y:p.y+p.height-k,height:k})}var N=Cr(0,p.width),A=N(y);return Hr(Hr({},p),{},{width:A})});return $.createElement(vt,null,n.renderRectanglesStatically(g))})}},{key:"renderRectangles",value:function(){var n=this.props,a=n.data,i=n.isAnimationActive,o=this.state.prevData;return i&&a&&a.length&&(!o||!Wo(o,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var n=this,a=this.props,i=a.data,o=a.dataKey,l=a.activeIndex,c=Ue(this.props.background,!1);return i.map(function(u,d){u.value;var f=u.background,h=Xwe(u,Ywe);if(!f)return null;var m=Hr(Hr(Hr(Hr(Hr({},h),{},{fill:"#eee"},f),c),Vo(n.props,u,d)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:o,index:d,className:"recharts-bar-background-rectangle"});return $.createElement(oT,xy({key:"background-bar-".concat(d),option:n.props.background,isActive:d===l},m))})}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,l=i.xAxis,c=i.yAxis,u=i.layout,d=i.children,f=qn(d,uf);if(!f)return null;var h=u==="vertical"?o[0].height/2:o[0].width/2,m=function(p,v){var x=Array.isArray(p.value)?p.value[1]:p.value;return{x:p.x,y:p.y,value:x,errorVal:xr(p,v)}},y={clipPath:n?"url(#clipPath-".concat(a,")"):null};return $.createElement(vt,y,f.map(function(g){return $.cloneElement(g,{key:"error-bar-".concat(a,"-").concat(g.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,offset:h,dataPointFormatter:m})}))}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.data,o=n.className,l=n.xAxis,c=n.yAxis,u=n.left,d=n.top,f=n.width,h=n.height,m=n.isAnimationActive,y=n.background,g=n.id;if(a||!i||!i.length)return null;var p=this.state.isAnimationFinished,v=ut("recharts-bar",o),x=l&&l.allowDataOverflow,b=c&&c.allowDataOverflow,_=x||b,j=Qe(g)?this.id:g;return $.createElement(vt,{className:v},x||b?$.createElement("defs",null,$.createElement("clipPath",{id:"clipPath-".concat(j)},$.createElement("rect",{x:x?u:u-f/2,y:b?d:d-h/2,width:x?f:f*2,height:b?h:h*2}))):null,$.createElement(vt,{className:"recharts-bar-rectangles",clipPath:_?"url(#clipPath-".concat(j,")"):null},y?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(_,j),(!m||p)&&wi.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:a.curData}:n.data!==a.curData?{curData:n.data}:null}}])}(w.PureComponent);GB=Wt;yo(Wt,"displayName","Bar");yo(Wt,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Fa.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});yo(Wt,"getComposedData",function(e){var t=e.props,r=e.item,n=e.barPosition,a=e.bandSize,i=e.xAxis,o=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,u=e.stackedData,d=e.dataStartIndex,f=e.displayedData,h=e.offset,m=Lge(n,r);if(!m)return null;var y=t.layout,g=r.type.defaultProps,p=g!==void 0?Hr(Hr({},g),r.props):r.props,v=p.dataKey,x=p.children,b=p.minPointSize,_=y==="horizontal"?o:i,j=u?_.scale.domain():null,S=Hge({numericAxis:_}),C=qn(x,el),k=f.map(function(N,A){var O,E,R,P,T,I;u?O=Bge(u[d+A],j):(O=xr(N,v),Array.isArray(O)||(O=[S,O]));var M=Gwe(b,GB.defaultProps.minPointSize)(O[1],A);if(y==="horizontal"){var D,B=[o.scale(O[0]),o.scale(O[1])],z=B[0],Z=B[1];E=QA({axis:i,ticks:l,bandSize:a,offset:m.offset,entry:N,index:A}),R=(D=Z??z)!==null&&D!==void 0?D:void 0,P=m.size;var J=z-Z;if(T=Number.isNaN(J)?0:J,I={x:E,y:o.y,width:P,height:o.height},Math.abs(M)>0&&Math.abs(T)<Math.abs(M)){var se=Un(T||M)*(Math.abs(M)-Math.abs(T));R-=se,T+=se}}else{var U=[i.scale(O[0]),i.scale(O[1])],q=U[0],G=U[1];if(E=q,R=QA({axis:o,ticks:c,bandSize:a,offset:m.offset,entry:N,index:A}),P=G-q,T=m.size,I={x:i.x,y:R,width:i.width,height:T},Math.abs(M)>0&&Math.abs(P)<Math.abs(M)){var H=Un(P||M)*(Math.abs(M)-Math.abs(P));P+=H}}return Hr(Hr(Hr({},N),{},{x:E,y:R,width:P,height:T,value:u?O:O[1],payload:N,background:I},C&&C[A]&&C[A].props),{},{tooltipPayload:[xB(r,N)],tooltipPosition:{x:E+P/2,y:R+T/2}})});return Hr({data:k,layout:y},h)});function Dm(e){"@babel/helpers - typeof";return Dm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dm(e)}function ije(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ZB(n.key),n)}}function sje(e,t,r){return t&&uT(e.prototype,t),r&&uT(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function dT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function di(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dT(Object(r),!0).forEach(function(n){_0(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _0(e,t,r){return t=ZB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZB(e){var t=oje(e,"string");return Dm(t)=="symbol"?t:t+""}function oje(e,t){if(Dm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Dm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var S0=function(t,r,n,a,i){var o=t.width,l=t.height,c=t.layout,u=t.children,d=Object.keys(r),f={left:n.left,leftMirror:n.left,right:o-n.right,rightMirror:o-n.right,top:n.top,topMirror:n.top,bottom:l-n.bottom,bottomMirror:l-n.bottom},h=!!ha(u,Wt);return d.reduce(function(m,y){var g=r[y],p=g.orientation,v=g.domain,x=g.padding,b=x===void 0?{}:x,_=g.mirror,j=g.reversed,S="".concat(p).concat(_?"Mirror":""),C,k,N,A,O;if(g.type==="number"&&(g.padding==="gap"||g.padding==="no-gap")){var E=v[1]-v[0],R=1/0,P=g.categoricalDomain.sort(_te);if(P.forEach(function(U,q){q>0&&(R=Math.min((U||0)-(P[q-1]||0),R))}),Number.isFinite(R)){var T=R/E,I=g.layout==="vertical"?n.height:n.width;if(g.padding==="gap"&&(C=T*I/2),g.padding==="no-gap"){var M=Vn(t.barCategoryGap,T*I),D=T*I/2;C=D-M-(D-M)/I*M}}}a==="xAxis"?k=[n.left+(b.left||0)+(C||0),n.left+n.width-(b.right||0)-(C||0)]:a==="yAxis"?k=c==="horizontal"?[n.top+n.height-(b.bottom||0),n.top+(b.top||0)]:[n.top+(b.top||0)+(C||0),n.top+n.height-(b.bottom||0)-(C||0)]:k=g.range,j&&(k=[k[1],k[0]]);var B=pB(g,i,h),z=B.scale,Z=B.realScaleType;z.domain(v).range(k),gB(z);var J=vB(z,di(di({},g),{},{realScaleType:Z}));a==="xAxis"?(O=p==="top"&&!_||p==="bottom"&&_,N=n.left,A=f[S]-O*g.height):a==="yAxis"&&(O=p==="left"&&!_||p==="right"&&_,N=f[S]-O*g.width,A=n.top);var se=di(di(di({},g),J),{},{realScaleType:Z,x:N,y:A,scale:z,width:a==="xAxis"?n.width:g.width,height:a==="yAxis"?n.height:g.height});return se.bandSize=ny(se,J),!g.hide&&a==="xAxis"?f[S]+=(O?-1:1)*se.height:g.hide||(f[S]+=(O?-1:1)*se.width),di(di({},m),{},_0({},y,se))},{})},QB=function(t,r){var n=t.x,a=t.y,i=r.x,o=r.y;return{x:Math.min(n,i),y:Math.min(a,o),width:Math.abs(i-n),height:Math.abs(o-a)}},lje=function(t){var r=t.x1,n=t.y1,a=t.x2,i=t.y2;return QB({x:r,y:n},{x:a,y:i})},JB=function(){function e(t){ije(this,e),this.scale=t}return sje(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.bandAware,i=n.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(a){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+c}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),a=n[0],i=n[n.length-1];return a<=i?r>=a&&r<=i:r>=i&&r<=a}}],[{key:"create",value:function(r){return new e(r)}}])}();_0(JB,"EPS",1e-4);var EN=function(t){var r=Object.keys(t).reduce(function(n,a){return di(di({},n),{},_0({},a,JB.create(t[a])))},{});return di(di({},r),{},{apply:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,l=i.position;return Pwe(a,function(c,u){return r[u].apply(c,{bandAware:o,position:l})})},isInRange:function(a){return KB(a,function(i,o){return r[o].isInRange(i)})}})};function cje(e){return(e%180+180)%180}var uje=function(t){var r=t.width,n=t.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=cje(a),o=i*Math.PI/180,l=Math.atan(n/r),c=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(c)},dje=as,fje=dp,hje=a0;function mje(e){return function(t,r,n){var a=Object(t);if(!fje(t)){var i=dje(r);t=hje(t),r=function(l){return i(a[l],l,a)}}var o=e(t,r,n);return o>-1?a[i?t[o]:o]:void 0}}var pje=mje,gje=VB;function vje(e){var t=gje(e),r=t%1;return t===t?r?t-r:t:0}var yje=vje,xje=Y4,bje=as,wje=yje,jje=Math.max;function _je(e,t,r){var n=e==null?0:e.length;if(!n)return-1;var a=r==null?0:wje(r);return a<0&&(a=jje(n+a,0)),xje(e,bje(t),a)}var Sje=_je,Cje=pje,Nje=Sje,kje=Cje(Nje),Pje=kje;const Eje=Bt(Pje);var Aje=_ee(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),AN=w.createContext(void 0),ON=w.createContext(void 0),eF=w.createContext(void 0),tF=w.createContext({}),rF=w.createContext(void 0),nF=w.createContext(0),aF=w.createContext(0),fT=function(t){var r=t.state,n=r.xAxisMap,a=r.yAxisMap,i=r.offset,o=t.clipPathId,l=t.children,c=t.width,u=t.height,d=Aje(i);return $.createElement(AN.Provider,{value:n},$.createElement(ON.Provider,{value:a},$.createElement(tF.Provider,{value:i},$.createElement(eF.Provider,{value:d},$.createElement(rF.Provider,{value:o},$.createElement(nF.Provider,{value:u},$.createElement(aF.Provider,{value:c},l)))))))},Oje=function(){return w.useContext(rF)},iF=function(t){var r=w.useContext(AN);r==null&&oc();var n=r[t];return n==null&&oc(),n},Tje=function(){var t=w.useContext(AN);return oo(t)},Rje=function(){var t=w.useContext(ON),r=Eje(t,function(n){return KB(n.domain,Number.isFinite)});return r||oo(t)},sF=function(t){var r=w.useContext(ON);r==null&&oc();var n=r[t];return n==null&&oc(),n},Mje=function(){var t=w.useContext(eF);return t},$je=function(){return w.useContext(tF)},TN=function(){return w.useContext(aF)},RN=function(){return w.useContext(nF)};function fd(e){"@babel/helpers - typeof";return fd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fd(e)}function Ije(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Dje(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,lF(n.key),n)}}function Lje(e,t,r){return t&&Dje(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Bje(e,t,r){return t=wy(t),Fje(e,oF()?Reflect.construct(t,r||[],wy(e).constructor):t.apply(e,r))}function Fje(e,t){if(t&&(fd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zje(e)}function zje(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oF=function(){return!!e})()}function wy(e){return wy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},wy(e)}function Uje(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S_(e,t)}function S_(e,t){return S_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},S_(e,t)}function hT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function mT(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hT(Object(r),!0).forEach(function(n){MN(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function MN(e,t,r){return t=lF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lF(e){var t=Vje(e,"string");return fd(t)=="symbol"?t:t+""}function Vje(e,t){if(fd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(fd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Wje(e,t){return Gje(e)||Kje(e,t)||qje(e,t)||Hje()}function Hje(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qje(e,t){if(e){if(typeof e=="string")return pT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pT(e,t)}}function pT(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Kje(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Gje(e){if(Array.isArray(e))return e}function C_(){return C_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},C_.apply(this,arguments)}var Yje=function(t,r){var n;return $.isValidElement(t)?n=$.cloneElement(t,r):Je(t)?n=t(r):n=$.createElement("line",C_({},r,{className:"recharts-reference-line-line"})),n},Xje=function(t,r,n,a,i,o,l,c,u){var d=i.x,f=i.y,h=i.width,m=i.height;if(n){var y=u.y,g=t.y.apply(y,{position:o});if(Xi(u,"discard")&&!t.y.isInRange(g))return null;var p=[{x:d+h,y:g},{x:d,y:g}];return c==="left"?p.reverse():p}if(r){var v=u.x,x=t.x.apply(v,{position:o});if(Xi(u,"discard")&&!t.x.isInRange(x))return null;var b=[{x,y:f+m},{x,y:f}];return l==="top"?b.reverse():b}if(a){var _=u.segment,j=_.map(function(S){return t.apply(S,{position:o})});return Xi(u,"discard")&&bwe(j,function(S){return!t.isInRange(S)})?null:j}return null};function Zje(e){var t=e.x,r=e.y,n=e.segment,a=e.xAxisId,i=e.yAxisId,o=e.shape,l=e.className,c=e.alwaysShow,u=Oje(),d=iF(a),f=sF(i),h=Mje();if(!u||!h)return null;bi(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=EN({x:d.scale,y:f.scale}),y=an(t),g=an(r),p=n&&n.length===2,v=Xje(m,y,g,p,h,e.position,d.orientation,f.orientation,e);if(!v)return null;var x=Wje(v,2),b=x[0],_=b.x,j=b.y,S=x[1],C=S.x,k=S.y,N=Xi(e,"hidden")?"url(#".concat(u,")"):void 0,A=mT(mT({clipPath:N},Ue(e,!0)),{},{x1:_,y1:j,x2:C,y2:k});return $.createElement(vt,{className:ut("recharts-reference-line",l)},Yje(o,A),dn.renderCallByParent(e,lje({x1:_,y1:j,x2:C,y2:k})))}var C0=function(e){function t(){return Ije(this,t),Bje(this,t,arguments)}return Uje(t,e),Lje(t,[{key:"render",value:function(){return $.createElement(Zje,this.props)}}])}($.Component);MN(C0,"displayName","ReferenceLine");MN(C0,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function N_(){return N_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},N_.apply(this,arguments)}function hd(e){"@babel/helpers - typeof";return hd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hd(e)}function gT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function vT(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gT(Object(r),!0).forEach(function(n){N0(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Qje(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jje(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,uF(n.key),n)}}function e1e(e,t,r){return t&&Jje(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function t1e(e,t,r){return t=jy(t),r1e(e,cF()?Reflect.construct(t,r||[],jy(e).constructor):t.apply(e,r))}function r1e(e,t){if(t&&(hd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return n1e(e)}function n1e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cF=function(){return!!e})()}function jy(e){return jy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},jy(e)}function a1e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k_(e,t)}function k_(e,t){return k_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},k_(e,t)}function N0(e,t,r){return t=uF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uF(e){var t=i1e(e,"string");return hd(t)=="symbol"?t:t+""}function i1e(e,t){if(hd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(hd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var s1e=function(t){var r=t.x,n=t.y,a=t.xAxis,i=t.yAxis,o=EN({x:a.scale,y:i.scale}),l=o.apply({x:r,y:n},{bandAware:!0});return Xi(t,"discard")&&!o.isInRange(l)?null:l},k0=function(e){function t(){return Qje(this,t),t1e(this,t,arguments)}return a1e(t,e),e1e(t,[{key:"render",value:function(){var n=this.props,a=n.x,i=n.y,o=n.r,l=n.alwaysShow,c=n.clipPathId,u=an(a),d=an(i);if(bi(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var f=s1e(this.props);if(!f)return null;var h=f.x,m=f.y,y=this.props,g=y.shape,p=y.className,v=Xi(this.props,"hidden")?"url(#".concat(c,")"):void 0,x=vT(vT({clipPath:v},Ue(this.props,!0)),{},{cx:h,cy:m});return $.createElement(vt,{className:ut("recharts-reference-dot",p)},t.renderDot(g,x),dn.renderCallByParent(this.props,{x:h-o,y:m-o,width:2*o,height:2*o}))}}])}($.Component);N0(k0,"displayName","ReferenceDot");N0(k0,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});N0(k0,"renderDot",function(e,t){var r;return $.isValidElement(e)?r=$.cloneElement(e,t):Je(e)?r=e(t):r=$.createElement(gp,N_({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function P_(){return P_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},P_.apply(this,arguments)}function md(e){"@babel/helpers - typeof";return md=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},md(e)}function yT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function xT(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yT(Object(r),!0).forEach(function(n){P0(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function o1e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l1e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,fF(n.key),n)}}function c1e(e,t,r){return t&&l1e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function u1e(e,t,r){return t=_y(t),d1e(e,dF()?Reflect.construct(t,r||[],_y(e).constructor):t.apply(e,r))}function d1e(e,t){if(t&&(md(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return f1e(e)}function f1e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dF=function(){return!!e})()}function _y(e){return _y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},_y(e)}function h1e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E_(e,t)}function E_(e,t){return E_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},E_(e,t)}function P0(e,t,r){return t=fF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fF(e){var t=m1e(e,"string");return md(t)=="symbol"?t:t+""}function m1e(e,t){if(md(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(md(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var p1e=function(t,r,n,a,i){var o=i.x1,l=i.x2,c=i.y1,u=i.y2,d=i.xAxis,f=i.yAxis;if(!d||!f)return null;var h=EN({x:d.scale,y:f.scale}),m={x:t?h.x.apply(o,{position:"start"}):h.x.rangeMin,y:n?h.y.apply(c,{position:"start"}):h.y.rangeMin},y={x:r?h.x.apply(l,{position:"end"}):h.x.rangeMax,y:a?h.y.apply(u,{position:"end"}):h.y.rangeMax};return Xi(i,"discard")&&(!h.isInRange(m)||!h.isInRange(y))?null:QB(m,y)},E0=function(e){function t(){return o1e(this,t),u1e(this,t,arguments)}return h1e(t,e),c1e(t,[{key:"render",value:function(){var n=this.props,a=n.x1,i=n.x2,o=n.y1,l=n.y2,c=n.className,u=n.alwaysShow,d=n.clipPathId;bi(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=an(a),h=an(i),m=an(o),y=an(l),g=this.props.shape;if(!f&&!h&&!m&&!y&&!g)return null;var p=p1e(f,h,m,y,this.props);if(!p&&!g)return null;var v=Xi(this.props,"hidden")?"url(#".concat(d,")"):void 0;return $.createElement(vt,{className:ut("recharts-reference-area",c)},t.renderRect(g,xT(xT({clipPath:v},Ue(this.props,!0)),p)),dn.renderCallByParent(this.props,p))}}])}($.Component);P0(E0,"displayName","ReferenceArea");P0(E0,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});P0(E0,"renderRect",function(e,t){var r;return $.isValidElement(e)?r=$.cloneElement(e,t):Je(e)?r=e(t):r=$.createElement(PN,P_({},t,{className:"recharts-reference-area-rect"})),r});function hF(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],a=0;a<e.length;a+=t)n.push(e[a]);return n}function g1e(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return uje(n,r)}function v1e(e,t,r){var n=r==="width",a=e.x,i=e.y,o=e.width,l=e.height;return t===1?{start:n?a:i,end:n?a+o:i+l}:{start:n?a+o:i+l,end:n?a:i}}function Sy(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-a)<=0}function y1e(e,t){return hF(e,t+1)}function x1e(e,t,r,n,a){for(var i=(n||[]).slice(),o=t.start,l=t.end,c=0,u=1,d=o,f=function(){var y=n==null?void 0:n[c];if(y===void 0)return{v:hF(n,u)};var g=c,p,v=function(){return p===void 0&&(p=r(y,g)),p},x=y.coordinate,b=c===0||Sy(e,x,v,d,l);b||(c=0,d=o,u+=1),b&&(d=x+e*(v()/2+a),c+=u)},h;u<=i.length;)if(h=f(),h)return h.v;return[]}function Lm(e){"@babel/helpers - typeof";return Lm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lm(e)}function bT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function An(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bT(Object(r),!0).forEach(function(n){b1e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function b1e(e,t,r){return t=w1e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w1e(e){var t=j1e(e,"string");return Lm(t)=="symbol"?t:t+""}function j1e(e,t){if(Lm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Lm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _1e(e,t,r,n,a){for(var i=(n||[]).slice(),o=i.length,l=t.start,c=t.end,u=function(h){var m=i[h],y,g=function(){return y===void 0&&(y=r(m,h)),y};if(h===o-1){var p=e*(m.coordinate+e*g()/2-c);i[h]=m=An(An({},m),{},{tickCoord:p>0?m.coordinate-p*e:m.coordinate})}else i[h]=m=An(An({},m),{},{tickCoord:m.coordinate});var v=Sy(e,m.tickCoord,g,l,c);v&&(c=m.tickCoord-e*(g()/2+a),i[h]=An(An({},m),{},{isShow:!0}))},d=o-1;d>=0;d--)u(d);return i}function S1e(e,t,r,n,a,i){var o=(n||[]).slice(),l=o.length,c=t.start,u=t.end;if(i){var d=n[l-1],f=r(d,l-1),h=e*(d.coordinate+e*f/2-u);o[l-1]=d=An(An({},d),{},{tickCoord:h>0?d.coordinate-h*e:d.coordinate});var m=Sy(e,d.tickCoord,function(){return f},c,u);m&&(u=d.tickCoord-e*(f/2+a),o[l-1]=An(An({},d),{},{isShow:!0}))}for(var y=i?l-1:l,g=function(x){var b=o[x],_,j=function(){return _===void 0&&(_=r(b,x)),_};if(x===0){var S=e*(b.coordinate-e*j()/2-c);o[x]=b=An(An({},b),{},{tickCoord:S<0?b.coordinate-S*e:b.coordinate})}else o[x]=b=An(An({},b),{},{tickCoord:b.coordinate});var C=Sy(e,b.tickCoord,j,c,u);C&&(c=b.tickCoord+e*(j()/2+a),o[x]=An(An({},b),{},{isShow:!0}))},p=0;p<y;p++)g(p);return o}function $N(e,t,r){var n=e.tick,a=e.ticks,i=e.viewBox,o=e.minTickGap,l=e.orientation,c=e.interval,u=e.tickFormatter,d=e.unit,f=e.angle;if(!a||!a.length||!n)return[];if(we(c)||Fa.isSsr)return y1e(a,typeof c=="number"&&we(c)?c:0);var h=[],m=l==="top"||l==="bottom"?"width":"height",y=d&&m==="width"?hh(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},g=function(b,_){var j=Je(u)?u(b.value,_):b.value;return m==="width"?g1e(hh(j,{fontSize:t,letterSpacing:r}),y,f):hh(j,{fontSize:t,letterSpacing:r})[m]},p=a.length>=2?Un(a[1].coordinate-a[0].coordinate):1,v=v1e(i,p,m);return c==="equidistantPreserveStart"?x1e(p,v,g,a,o):(c==="preserveStart"||c==="preserveStartEnd"?h=S1e(p,v,g,a,o,c==="preserveStartEnd"):h=_1e(p,v,g,a,o),h.filter(function(x){return x.isShow}))}var C1e=["viewBox"],N1e=["viewBox"],k1e=["ticks"];function pd(e){"@babel/helpers - typeof";return pd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pd(e)}function du(){return du=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},du.apply(this,arguments)}function wT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Xr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wT(Object(r),!0).forEach(function(n){IN(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pw(e,t){if(e==null)return{};var r=P1e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function P1e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function E1e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,pF(n.key),n)}}function A1e(e,t,r){return t&&jT(e.prototype,t),r&&jT(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function O1e(e,t,r){return t=Cy(t),T1e(e,mF()?Reflect.construct(t,r||[],Cy(e).constructor):t.apply(e,r))}function T1e(e,t){if(t&&(pd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return R1e(e)}function R1e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mF=function(){return!!e})()}function Cy(e){return Cy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Cy(e)}function M1e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A_(e,t)}function A_(e,t){return A_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},A_(e,t)}function IN(e,t,r){return t=pF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pF(e){var t=$1e(e,"string");return pd(t)=="symbol"?t:t+""}function $1e(e,t){if(pd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(pd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var df=function(e){function t(r){var n;return E1e(this,t),n=O1e(this,t,[r]),n.state={fontSize:"",letterSpacing:""},n}return M1e(t,e),A1e(t,[{key:"shouldComponentUpdate",value:function(n,a){var i=n.viewBox,o=pw(n,C1e),l=this.props,c=l.viewBox,u=pw(l,N1e);return!_u(i,c)||!_u(o,u)||!_u(a,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var a=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.x,o=a.y,l=a.width,c=a.height,u=a.orientation,d=a.tickSize,f=a.mirror,h=a.tickMargin,m,y,g,p,v,x,b=f?-1:1,_=n.tickSize||d,j=we(n.tickCoord)?n.tickCoord:n.coordinate;switch(u){case"top":m=y=n.coordinate,p=o+ +!f*c,g=p-b*_,x=g-b*h,v=j;break;case"left":g=p=n.coordinate,y=i+ +!f*l,m=y-b*_,v=m-b*h,x=j;break;case"right":g=p=n.coordinate,y=i+ +f*l,m=y+b*_,v=m+b*h,x=j;break;default:m=y=n.coordinate,p=o+ +f*c,g=p+b*_,x=g+b*h,v=j;break}return{line:{x1:m,y1:g,x2:y,y2:p},tick:{x:v,y:x}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,o;switch(a){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,o="end";switch(a){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,l=n.height,c=n.orientation,u=n.mirror,d=n.axisLine,f=Xr(Xr(Xr({},Ue(this.props,!1)),Ue(d,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var h=+(c==="top"&&!u||c==="bottom"&&u);f=Xr(Xr({},f),{},{x1:a,y1:i+h*l,x2:a+o,y2:i+h*l})}else{var m=+(c==="left"&&!u||c==="right"&&u);f=Xr(Xr({},f),{},{x1:a+m*o,y1:i,x2:a+m*o,y2:i+l})}return $.createElement("line",du({},f,{className:ut("recharts-cartesian-axis-line",wa(d,"className"))}))}},{key:"renderTicks",value:function(n,a,i){var o=this,l=this.props,c=l.tickLine,u=l.stroke,d=l.tick,f=l.tickFormatter,h=l.unit,m=$N(Xr(Xr({},this.props),{},{ticks:n}),a,i),y=this.getTickTextAnchor(),g=this.getTickVerticalAnchor(),p=Ue(this.props,!1),v=Ue(d,!1),x=Xr(Xr({},p),{},{fill:"none"},Ue(c,!1)),b=m.map(function(_,j){var S=o.getTickLineCoord(_),C=S.line,k=S.tick,N=Xr(Xr(Xr(Xr({textAnchor:y,verticalAnchor:g},p),{},{stroke:"none",fill:u},v),k),{},{index:j,payload:_,visibleTicksCount:m.length,tickFormatter:f});return $.createElement(vt,du({className:"recharts-cartesian-axis-tick",key:"tick-".concat(_.value,"-").concat(_.coordinate,"-").concat(_.tickCoord)},Vo(o.props,_,j)),c&&$.createElement("line",du({},x,C,{className:ut("recharts-cartesian-axis-tick-line",wa(c,"className"))})),d&&t.renderTickItem(d,N,"".concat(Je(f)?f(_.value,j):_.value).concat(h||"")))});return $.createElement("g",{className:"recharts-cartesian-axis-ticks"},b)}},{key:"render",value:function(){var n=this,a=this.props,i=a.axisLine,o=a.width,l=a.height,c=a.ticksGenerator,u=a.className,d=a.hide;if(d)return null;var f=this.props,h=f.ticks,m=pw(f,k1e),y=h;return Je(c)&&(y=h&&h.length>0?c(this.props):c(m)),o<=0||l<=0||!y||!y.length?null:$.createElement(vt,{className:ut("recharts-cartesian-axis",u),ref:function(p){n.layerReference=p}},i&&this.renderAxisLine(),this.renderTicks(y,this.state.fontSize,this.state.letterSpacing),dn.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,a,i){var o,l=ut(a.className,"recharts-cartesian-axis-tick-value");return $.isValidElement(n)?o=$.cloneElement(n,Xr(Xr({},a),{},{className:l})):Je(n)?o=n(Xr(Xr({},a),{},{className:l})):o=$.createElement(ic,du({},a,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])}(w.Component);IN(df,"displayName","CartesianAxis");IN(df,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var I1e=["x1","y1","x2","y2","key"],D1e=["offset"];function lc(e){"@babel/helpers - typeof";return lc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lc(e)}function _T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Tn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_T(Object(r),!0).forEach(function(n){L1e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_T(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function L1e(e,t,r){return t=B1e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function B1e(e){var t=F1e(e,"string");return lc(t)=="symbol"?t:t+""}function F1e(e,t){if(lc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(lc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ml(){return Ml=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ml.apply(this,arguments)}function ST(e,t){if(e==null)return{};var r=z1e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function z1e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var U1e=function(t){var r=t.fill;if(!r||r==="none")return null;var n=t.fillOpacity,a=t.x,i=t.y,o=t.width,l=t.height,c=t.ry;return $.createElement("rect",{x:a,y:i,ry:c,width:o,height:l,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function gF(e,t){var r;if($.isValidElement(e))r=$.cloneElement(e,t);else if(Je(e))r=e(t);else{var n=t.x1,a=t.y1,i=t.x2,o=t.y2,l=t.key,c=ST(t,I1e),u=Ue(c,!1);u.offset;var d=ST(u,D1e);r=$.createElement("line",Ml({},d,{x1:n,y1:a,x2:i,y2:o,fill:"none",key:l}))}return r}function V1e(e){var t=e.x,r=e.width,n=e.horizontal,a=n===void 0?!0:n,i=e.horizontalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(l,c){var u=Tn(Tn({},e),{},{x1:t,y1:l,x2:t+r,y2:l,key:"line-".concat(c),index:c});return gF(a,u)});return $.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function W1e(e){var t=e.y,r=e.height,n=e.vertical,a=n===void 0?!0:n,i=e.verticalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(l,c){var u=Tn(Tn({},e),{},{x1:l,y1:t,x2:l,y2:t+r,key:"line-".concat(c),index:c});return gF(a,u)});return $.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function H1e(e){var t=e.horizontalFill,r=e.fillOpacity,n=e.x,a=e.y,i=e.width,o=e.height,l=e.horizontalPoints,c=e.horizontal,u=c===void 0?!0:c;if(!u||!t||!t.length)return null;var d=l.map(function(h){return Math.round(h+a-a)}).sort(function(h,m){return h-m});a!==d[0]&&d.unshift(0);var f=d.map(function(h,m){var y=!d[m+1],g=y?a+o-h:d[m+1]-h;if(g<=0)return null;var p=m%t.length;return $.createElement("rect",{key:"react-".concat(m),y:h,x:n,height:g,width:i,stroke:"none",fill:t[p],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return $.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function q1e(e){var t=e.vertical,r=t===void 0?!0:t,n=e.verticalFill,a=e.fillOpacity,i=e.x,o=e.y,l=e.width,c=e.height,u=e.verticalPoints;if(!r||!n||!n.length)return null;var d=u.map(function(h){return Math.round(h+i-i)}).sort(function(h,m){return h-m});i!==d[0]&&d.unshift(0);var f=d.map(function(h,m){var y=!d[m+1],g=y?i+l-h:d[m+1]-h;if(g<=0)return null;var p=m%n.length;return $.createElement("rect",{key:"react-".concat(m),x:h,y:o,width:g,height:c,stroke:"none",fill:n[p],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return $.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var K1e=function(t,r){var n=t.xAxis,a=t.width,i=t.height,o=t.offset;return mB($N(Tn(Tn(Tn({},df.defaultProps),n),{},{ticks:ws(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.left,o.left+o.width,r)},G1e=function(t,r){var n=t.yAxis,a=t.width,i=t.height,o=t.offset;return mB($N(Tn(Tn(Tn({},df.defaultProps),n),{},{ticks:ws(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.top,o.top+o.height,r)},Ac={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Nr(e){var t,r,n,a,i,o,l=TN(),c=RN(),u=$je(),d=Tn(Tn({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:Ac.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:Ac.fill,horizontal:(n=e.horizontal)!==null&&n!==void 0?n:Ac.horizontal,horizontalFill:(a=e.horizontalFill)!==null&&a!==void 0?a:Ac.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:Ac.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:Ac.verticalFill,x:we(e.x)?e.x:u.left,y:we(e.y)?e.y:u.top,width:we(e.width)?e.width:u.width,height:we(e.height)?e.height:u.height}),f=d.x,h=d.y,m=d.width,y=d.height,g=d.syncWithTicks,p=d.horizontalValues,v=d.verticalValues,x=Tje(),b=Rje();if(!we(m)||m<=0||!we(y)||y<=0||!we(f)||f!==+f||!we(h)||h!==+h)return null;var _=d.verticalCoordinatesGenerator||K1e,j=d.horizontalCoordinatesGenerator||G1e,S=d.horizontalPoints,C=d.verticalPoints;if((!S||!S.length)&&Je(j)){var k=p&&p.length,N=j({yAxis:b?Tn(Tn({},b),{},{ticks:k?p:b.ticks}):void 0,width:l,height:c,offset:u},k?!0:g);bi(Array.isArray(N),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(lc(N),"]")),Array.isArray(N)&&(S=N)}if((!C||!C.length)&&Je(_)){var A=v&&v.length,O=_({xAxis:x?Tn(Tn({},x),{},{ticks:A?v:x.ticks}):void 0,width:l,height:c,offset:u},A?!0:g);bi(Array.isArray(O),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(lc(O),"]")),Array.isArray(O)&&(C=O)}return $.createElement("g",{className:"recharts-cartesian-grid"},$.createElement(U1e,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),$.createElement(V1e,Ml({},d,{offset:u,horizontalPoints:S,xAxis:x,yAxis:b})),$.createElement(W1e,Ml({},d,{offset:u,verticalPoints:C,xAxis:x,yAxis:b})),$.createElement(H1e,Ml({},d,{horizontalPoints:S})),$.createElement(q1e,Ml({},d,{verticalPoints:C})))}Nr.displayName="CartesianGrid";var Y1e=["type","layout","connectNulls","ref"],X1e=["key"];function gd(e){"@babel/helpers - typeof";return gd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gd(e)}function CT(e,t){if(e==null)return{};var r=Z1e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Z1e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function xh(){return xh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xh.apply(this,arguments)}function NT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ua(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NT(Object(r),!0).forEach(function(n){fi(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Oc(e){return t_e(e)||e_e(e)||J1e(e)||Q1e()}function Q1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function J1e(e,t){if(e){if(typeof e=="string")return O_(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O_(e,t)}}function e_e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function t_e(e){if(Array.isArray(e))return O_(e)}function O_(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function r_e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,yF(n.key),n)}}function n_e(e,t,r){return t&&kT(e.prototype,t),r&&kT(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function a_e(e,t,r){return t=Ny(t),i_e(e,vF()?Reflect.construct(t,r||[],Ny(e).constructor):t.apply(e,r))}function i_e(e,t){if(t&&(gd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return s_e(e)}function s_e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vF=function(){return!!e})()}function Ny(e){return Ny=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ny(e)}function o_e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T_(e,t)}function T_(e,t){return T_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},T_(e,t)}function fi(e,t,r){return t=yF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yF(e){var t=l_e(e,"string");return gd(t)=="symbol"?t:t+""}function l_e(e,t){if(gd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(gd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Rn=function(e){function t(){var r;r_e(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=a_e(this,t,[].concat(a)),fi(r,"state",{isAnimationFinished:!0,totalLength:0}),fi(r,"generateSimpleStrokeDasharray",function(o,l){return"".concat(l,"px ").concat(o-l,"px")}),fi(r,"getStrokeDasharray",function(o,l,c){var u=c.reduce(function(v,x){return v+x});if(!u)return r.generateSimpleStrokeDasharray(l,o);for(var d=Math.floor(o/u),f=o%u,h=l-o,m=[],y=0,g=0;y<c.length;g+=c[y],++y)if(g+c[y]>f){m=[].concat(Oc(c.slice(0,y)),[f-g]);break}var p=m.length%2===0?[0,h]:[h];return[].concat(Oc(t.repeat(c,d)),Oc(m),p).map(function(v){return"".concat(v,"px")}).join(", ")}),fi(r,"id",Jo("recharts-line-")),fi(r,"pathRef",function(o){r.mainCurve=o}),fi(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),fi(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return o_e(t,e),n_e(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();this.setState({totalLength:n})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();n!==this.state.totalLength&&this.setState({totalLength:n})}}},{key:"getTotalLength",value:function(){var n=this.mainCurve;try{return n&&n.getTotalLength&&n.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.points,l=i.xAxis,c=i.yAxis,u=i.layout,d=i.children,f=qn(d,uf);if(!f)return null;var h=function(g,p){return{x:g.x,y:g.y,value:g.value,errorVal:xr(g.payload,p)}},m={clipPath:n?"url(#clipPath-".concat(a,")"):null};return $.createElement(vt,m,f.map(function(y){return $.cloneElement(y,{key:"bar-".concat(y.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,dataPointFormatter:h})}))}},{key:"renderDots",value:function(n,a,i){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,u=l.points,d=l.dataKey,f=Ue(this.props,!1),h=Ue(c,!0),m=u.map(function(g,p){var v=ua(ua(ua({key:"dot-".concat(p),r:3},f),h),{},{index:p,cx:g.x,cy:g.y,value:g.value,dataKey:d,payload:g.payload,points:u});return t.renderDotItem(c,v)}),y={clipPath:n?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return $.createElement(vt,xh({className:"recharts-line-dots",key:"dots"},y),m)}},{key:"renderCurveStatically",value:function(n,a,i,o){var l=this.props,c=l.type,u=l.layout,d=l.connectNulls;l.ref;var f=CT(l,Y1e),h=ua(ua(ua({},Ue(f,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:a?"url(#clipPath-".concat(i,")"):null,points:n},o),{},{type:c,layout:u,connectNulls:d});return $.createElement(Mo,xh({},h,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(n,a){var i=this,o=this.props,l=o.points,c=o.strokeDasharray,u=o.isAnimationActive,d=o.animationBegin,f=o.animationDuration,h=o.animationEasing,m=o.animationId,y=o.animateNewValues,g=o.width,p=o.height,v=this.state,x=v.prevPoints,b=v.totalLength;return $.createElement(Ha,{begin:d,duration:f,isActive:u,easing:h,from:{t:0},to:{t:1},key:"line-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(_){var j=_.t;if(x){var S=x.length/l.length,C=l.map(function(E,R){var P=Math.floor(R*S);if(x[P]){var T=x[P],I=Cr(T.x,E.x),M=Cr(T.y,E.y);return ua(ua({},E),{},{x:I(j),y:M(j)})}if(y){var D=Cr(g*2,E.x),B=Cr(p/2,E.y);return ua(ua({},E),{},{x:D(j),y:B(j)})}return ua(ua({},E),{},{x:E.x,y:E.y})});return i.renderCurveStatically(C,n,a)}var k=Cr(0,b),N=k(j),A;if(c){var O="".concat(c).split(/[,\s]+/gim).map(function(E){return parseFloat(E)});A=i.getStrokeDasharray(N,b,O)}else A=i.generateSimpleStrokeDasharray(b,N);return i.renderCurveStatically(l,n,a,{strokeDasharray:A})})}},{key:"renderCurve",value:function(n,a){var i=this.props,o=i.points,l=i.isAnimationActive,c=this.state,u=c.prevPoints,d=c.totalLength;return l&&o&&o.length&&(!u&&d>0||!Wo(u,o))?this.renderCurveWithAnimation(n,a):this.renderCurveStatically(o,n,a)}},{key:"render",value:function(){var n,a=this.props,i=a.hide,o=a.dot,l=a.points,c=a.className,u=a.xAxis,d=a.yAxis,f=a.top,h=a.left,m=a.width,y=a.height,g=a.isAnimationActive,p=a.id;if(i||!l||!l.length)return null;var v=this.state.isAnimationFinished,x=l.length===1,b=ut("recharts-line",c),_=u&&u.allowDataOverflow,j=d&&d.allowDataOverflow,S=_||j,C=Qe(p)?this.id:p,k=(n=Ue(o,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},N=k.r,A=N===void 0?3:N,O=k.strokeWidth,E=O===void 0?2:O,R=s4(o)?o:{},P=R.clipDot,T=P===void 0?!0:P,I=A*2+E;return $.createElement(vt,{className:b},_||j?$.createElement("defs",null,$.createElement("clipPath",{id:"clipPath-".concat(C)},$.createElement("rect",{x:_?h:h-m/2,y:j?f:f-y/2,width:_?m:m*2,height:j?y:y*2})),!T&&$.createElement("clipPath",{id:"clipPath-dots-".concat(C)},$.createElement("rect",{x:h-I/2,y:f-I/2,width:m+I,height:y+I}))):null,!x&&this.renderCurve(S,C),this.renderErrorBar(S,C),(x||o)&&this.renderDots(S,T,C),(!g||v)&&wi.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:a.curPoints}:n.points!==a.curPoints?{curPoints:n.points}:null}},{key:"repeat",value:function(n,a){for(var i=n.length%2!==0?[].concat(Oc(n),[0]):n,o=[],l=0;l<a;++l)o=[].concat(Oc(o),Oc(i));return o}},{key:"renderDotItem",value:function(n,a){var i;if($.isValidElement(n))i=$.cloneElement(n,a);else if(Je(n))i=n(a);else{var o=a.key,l=CT(a,X1e),c=ut("recharts-line-dot",typeof n!="boolean"?n.className:"");i=$.createElement(gp,xh({key:o},l,{className:c}))}return i}}])}(w.PureComponent);fi(Rn,"displayName","Line");fi(Rn,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Fa.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});fi(Rn,"getComposedData",function(e){var t=e.props,r=e.xAxis,n=e.yAxis,a=e.xAxisTicks,i=e.yAxisTicks,o=e.dataKey,l=e.bandSize,c=e.displayedData,u=e.offset,d=t.layout,f=c.map(function(h,m){var y=xr(h,o);return d==="horizontal"?{x:ad({axis:r,ticks:a,bandSize:l,entry:h,index:m}),y:Qe(y)?null:n.scale(y),value:y,payload:h}:{x:Qe(y)?null:r.scale(y),y:ad({axis:n,ticks:i,bandSize:l,entry:h,index:m}),value:y,payload:h}});return ua({points:f,layout:d},u)});var c_e=["layout","type","stroke","connectNulls","isRange","ref"],u_e=["key"],xF;function vd(e){"@babel/helpers - typeof";return vd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vd(e)}function bF(e,t){if(e==null)return{};var r=d_e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function d_e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function $l(){return $l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$l.apply(this,arguments)}function PT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Zs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PT(Object(r),!0).forEach(function(n){Ui(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function f_e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ET(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,jF(n.key),n)}}function h_e(e,t,r){return t&&ET(e.prototype,t),r&&ET(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function m_e(e,t,r){return t=ky(t),p_e(e,wF()?Reflect.construct(t,r||[],ky(e).constructor):t.apply(e,r))}function p_e(e,t){if(t&&(vd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return g_e(e)}function g_e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wF=function(){return!!e})()}function ky(e){return ky=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ky(e)}function v_e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R_(e,t)}function R_(e,t){return R_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},R_(e,t)}function Ui(e,t,r){return t=jF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jF(e){var t=y_e(e,"string");return vd(t)=="symbol"?t:t+""}function y_e(e,t){if(vd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(vd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Mn=function(e){function t(){var r;f_e(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=m_e(this,t,[].concat(a)),Ui(r,"state",{isAnimationFinished:!0}),Ui(r,"id",Jo("recharts-area-")),Ui(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Je(o)&&o()}),Ui(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Je(o)&&o()}),r}return v_e(t,e),h_e(t,[{key:"renderDots",value:function(n,a,i){var o=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(o&&!l)return null;var c=this.props,u=c.dot,d=c.points,f=c.dataKey,h=Ue(this.props,!1),m=Ue(u,!0),y=d.map(function(p,v){var x=Zs(Zs(Zs({key:"dot-".concat(v),r:3},h),m),{},{index:v,cx:p.x,cy:p.y,dataKey:f,value:p.value,payload:p.payload,points:d});return t.renderDotItem(u,x)}),g={clipPath:n?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return $.createElement(vt,$l({className:"recharts-area-dots"},g),y)}},{key:"renderHorizontalRect",value:function(n){var a=this.props,i=a.baseLine,o=a.points,l=a.strokeWidth,c=o[0].x,u=o[o.length-1].x,d=n*Math.abs(c-u),f=vo(o.map(function(h){return h.y||0}));return we(i)&&typeof i=="number"?f=Math.max(i,f):i&&Array.isArray(i)&&i.length&&(f=Math.max(vo(i.map(function(h){return h.y||0})),f)),we(f)?$.createElement("rect",{x:c<u?c:c-d,y:0,width:d,height:Math.floor(f+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(n){var a=this.props,i=a.baseLine,o=a.points,l=a.strokeWidth,c=o[0].y,u=o[o.length-1].y,d=n*Math.abs(c-u),f=vo(o.map(function(h){return h.x||0}));return we(i)&&typeof i=="number"?f=Math.max(i,f):i&&Array.isArray(i)&&i.length&&(f=Math.max(vo(i.map(function(h){return h.x||0})),f)),we(f)?$.createElement("rect",{x:0,y:c<u?c:c-d,width:f+(l?parseInt("".concat(l),10):1),height:Math.floor(d)}):null}},{key:"renderClipRect",value:function(n){var a=this.props.layout;return a==="vertical"?this.renderVerticalRect(n):this.renderHorizontalRect(n)}},{key:"renderAreaStatically",value:function(n,a,i,o){var l=this.props,c=l.layout,u=l.type,d=l.stroke,f=l.connectNulls,h=l.isRange;l.ref;var m=bF(l,c_e);return $.createElement(vt,{clipPath:i?"url(#clipPath-".concat(o,")"):null},$.createElement(Mo,$l({},Ue(m,!0),{points:n,connectNulls:f,type:u,baseLine:a,layout:c,stroke:"none",className:"recharts-area-area"})),d!=="none"&&$.createElement(Mo,$l({},Ue(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:f,fill:"none",points:n})),d!=="none"&&h&&$.createElement(Mo,$l({},Ue(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:f,fill:"none",points:a})))}},{key:"renderAreaWithAnimation",value:function(n,a){var i=this,o=this.props,l=o.points,c=o.baseLine,u=o.isAnimationActive,d=o.animationBegin,f=o.animationDuration,h=o.animationEasing,m=o.animationId,y=this.state,g=y.prevPoints,p=y.prevBaseLine;return $.createElement(Ha,{begin:d,duration:f,isActive:u,easing:h,from:{t:0},to:{t:1},key:"area-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(v){var x=v.t;if(g){var b=g.length/l.length,_=l.map(function(k,N){var A=Math.floor(N*b);if(g[A]){var O=g[A],E=Cr(O.x,k.x),R=Cr(O.y,k.y);return Zs(Zs({},k),{},{x:E(x),y:R(x)})}return k}),j;if(we(c)&&typeof c=="number"){var S=Cr(p,c);j=S(x)}else if(Qe(c)||rf(c)){var C=Cr(p,0);j=C(x)}else j=c.map(function(k,N){var A=Math.floor(N*b);if(p[A]){var O=p[A],E=Cr(O.x,k.x),R=Cr(O.y,k.y);return Zs(Zs({},k),{},{x:E(x),y:R(x)})}return k});return i.renderAreaStatically(_,j,n,a)}return $.createElement(vt,null,$.createElement("defs",null,$.createElement("clipPath",{id:"animationClipPath-".concat(a)},i.renderClipRect(x))),$.createElement(vt,{clipPath:"url(#animationClipPath-".concat(a,")")},i.renderAreaStatically(l,c,n,a)))})}},{key:"renderArea",value:function(n,a){var i=this.props,o=i.points,l=i.baseLine,c=i.isAnimationActive,u=this.state,d=u.prevPoints,f=u.prevBaseLine,h=u.totalLength;return c&&o&&o.length&&(!d&&h>0||!Wo(d,o)||!Wo(f,l))?this.renderAreaWithAnimation(n,a):this.renderAreaStatically(o,l,n,a)}},{key:"render",value:function(){var n,a=this.props,i=a.hide,o=a.dot,l=a.points,c=a.className,u=a.top,d=a.left,f=a.xAxis,h=a.yAxis,m=a.width,y=a.height,g=a.isAnimationActive,p=a.id;if(i||!l||!l.length)return null;var v=this.state.isAnimationFinished,x=l.length===1,b=ut("recharts-area",c),_=f&&f.allowDataOverflow,j=h&&h.allowDataOverflow,S=_||j,C=Qe(p)?this.id:p,k=(n=Ue(o,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},N=k.r,A=N===void 0?3:N,O=k.strokeWidth,E=O===void 0?2:O,R=s4(o)?o:{},P=R.clipDot,T=P===void 0?!0:P,I=A*2+E;return $.createElement(vt,{className:b},_||j?$.createElement("defs",null,$.createElement("clipPath",{id:"clipPath-".concat(C)},$.createElement("rect",{x:_?d:d-m/2,y:j?u:u-y/2,width:_?m:m*2,height:j?y:y*2})),!T&&$.createElement("clipPath",{id:"clipPath-dots-".concat(C)},$.createElement("rect",{x:d-I/2,y:u-I/2,width:m+I,height:y+I}))):null,x?null:this.renderArea(S,C),(o||x)&&this.renderDots(S,T,C),(!g||v)&&wi.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,curBaseLine:n.baseLine,prevPoints:a.curPoints,prevBaseLine:a.curBaseLine}:n.points!==a.curPoints||n.baseLine!==a.curBaseLine?{curPoints:n.points,curBaseLine:n.baseLine}:null}}])}(w.PureComponent);xF=Mn;Ui(Mn,"displayName","Area");Ui(Mn,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Fa.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Ui(Mn,"getBaseValue",function(e,t,r,n){var a=e.layout,i=e.baseValue,o=t.props.baseValue,l=o??i;if(we(l)&&typeof l=="number")return l;var c=a==="horizontal"?n:r,u=c.scale.domain();if(c.type==="number"){var d=Math.max(u[0],u[1]),f=Math.min(u[0],u[1]);return l==="dataMin"?f:l==="dataMax"||d<0?d:Math.max(Math.min(u[0],u[1]),0)}return l==="dataMin"?u[0]:l==="dataMax"?u[1]:u[0]});Ui(Mn,"getComposedData",function(e){var t=e.props,r=e.item,n=e.xAxis,a=e.yAxis,i=e.xAxisTicks,o=e.yAxisTicks,l=e.bandSize,c=e.dataKey,u=e.stackedData,d=e.dataStartIndex,f=e.displayedData,h=e.offset,m=t.layout,y=u&&u.length,g=xF.getBaseValue(t,r,n,a),p=m==="horizontal",v=!1,x=f.map(function(_,j){var S;y?S=u[d+j]:(S=xr(_,c),Array.isArray(S)?v=!0:S=[g,S]);var C=S[1]==null||y&&xr(_,c)==null;return p?{x:ad({axis:n,ticks:i,bandSize:l,entry:_,index:j}),y:C?null:a.scale(S[1]),value:S,payload:_}:{x:C?null:n.scale(S[1]),y:ad({axis:a,ticks:o,bandSize:l,entry:_,index:j}),value:S,payload:_}}),b;return y||v?b=x.map(function(_){var j=Array.isArray(_.value)?_.value[0]:null;return p?{x:_.x,y:j!=null&&_.y!=null?a.scale(j):null}:{x:j!=null?n.scale(j):null,y:_.y}}):b=p?a.scale(g):n.scale(g),Zs({points:x,baseLine:b,layout:m,isRange:v},h)});Ui(Mn,"renderDotItem",function(e,t){var r;if($.isValidElement(e))r=$.cloneElement(e,t);else if(Je(e))r=e(t);else{var n=ut("recharts-area-dot",typeof e!="boolean"?e.className:""),a=t.key,i=bF(t,u_e);r=$.createElement(gp,$l({},i,{key:a,className:n}))}return r});function yd(e){"@babel/helpers - typeof";return yd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yd(e)}function x_e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b_e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,CF(n.key),n)}}function w_e(e,t,r){return t&&b_e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function j_e(e,t,r){return t=Py(t),__e(e,_F()?Reflect.construct(t,r||[],Py(e).constructor):t.apply(e,r))}function __e(e,t){if(t&&(yd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return S_e(e)}function S_e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _F(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_F=function(){return!!e})()}function Py(e){return Py=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Py(e)}function C_e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&M_(e,t)}function M_(e,t){return M_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},M_(e,t)}function SF(e,t,r){return t=CF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CF(e){var t=N_e(e,"string");return yd(t)=="symbol"?t:t+""}function N_e(e,t){if(yd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(yd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var A0=function(e){function t(){return x_e(this,t),j_e(this,t,arguments)}return C_e(t,e),w_e(t,[{key:"render",value:function(){return null}}])}(w.Component);SF(A0,"displayName","ZAxis");SF(A0,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var k_e=["option","isActive"];function bh(){return bh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bh.apply(this,arguments)}function P_e(e,t){if(e==null)return{};var r=E_e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function E_e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function A_e(e){var t=e.option,r=e.isActive,n=P_e(e,k_e);return typeof t=="string"?w.createElement(my,bh({option:w.createElement(n0,bh({type:t},n)),isActive:r,shapeType:"symbols"},n)):w.createElement(my,bh({option:t,isActive:r,shapeType:"symbols"},n))}function xd(e){"@babel/helpers - typeof";return xd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xd(e)}function wh(){return wh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wh.apply(this,arguments)}function AT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Oa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AT(Object(r),!0).forEach(function(n){xo(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function O_e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function OT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,kF(n.key),n)}}function T_e(e,t,r){return t&&OT(e.prototype,t),r&&OT(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function R_e(e,t,r){return t=Ey(t),M_e(e,NF()?Reflect.construct(t,r||[],Ey(e).constructor):t.apply(e,r))}function M_e(e,t){if(t&&(xd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $_e(e)}function $_e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function NF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(NF=function(){return!!e})()}function Ey(e){return Ey=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ey(e)}function I_e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$_(e,t)}function $_(e,t){return $_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},$_(e,t)}function xo(e,t,r){return t=kF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kF(e){var t=D_e(e,"string");return xd(t)=="symbol"?t:t+""}function D_e(e,t){if(xd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(xd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var O0=function(e){function t(){var r;O_e(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=R_e(this,t,[].concat(a)),xo(r,"state",{isAnimationFinished:!1}),xo(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0})}),xo(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1})}),xo(r,"id",Jo("recharts-scatter-")),r}return I_e(t,e),T_e(t,[{key:"renderSymbolsStatically",value:function(n){var a=this,i=this.props,o=i.shape,l=i.activeShape,c=i.activeIndex,u=Ue(this.props,!1);return n.map(function(d,f){var h=c===f,m=h?l:o,y=Oa(Oa({},u),d);return $.createElement(vt,wh({className:"recharts-scatter-symbol",key:"symbol-".concat(d==null?void 0:d.cx,"-").concat(d==null?void 0:d.cy,"-").concat(d==null?void 0:d.size,"-").concat(f)},Vo(a.props,d,f),{role:"img"}),$.createElement(A_e,wh({option:m,isActive:h,key:"symbol-".concat(f)},y)))})}},{key:"renderSymbolsWithAnimation",value:function(){var n=this,a=this.props,i=a.points,o=a.isAnimationActive,l=a.animationBegin,c=a.animationDuration,u=a.animationEasing,d=a.animationId,f=this.state.prevPoints;return $.createElement(Ha,{begin:l,duration:c,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(h){var m=h.t,y=i.map(function(g,p){var v=f&&f[p];if(v){var x=Cr(v.cx,g.cx),b=Cr(v.cy,g.cy),_=Cr(v.size,g.size);return Oa(Oa({},g),{},{cx:x(m),cy:b(m),size:_(m)})}var j=Cr(0,g.size);return Oa(Oa({},g),{},{size:j(m)})});return $.createElement(vt,null,n.renderSymbolsStatically(y))})}},{key:"renderSymbols",value:function(){var n=this.props,a=n.points,i=n.isAnimationActive,o=this.state.prevPoints;return i&&a&&a.length&&(!o||!Wo(o,a))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(a)}},{key:"renderErrorBar",value:function(){var n=this.props.isAnimationActive;if(n&&!this.state.isAnimationFinished)return null;var a=this.props,i=a.points,o=a.xAxis,l=a.yAxis,c=a.children,u=qn(c,uf);return u?u.map(function(d,f){var h=d.props,m=h.direction,y=h.dataKey;return $.cloneElement(d,{key:"".concat(m,"-").concat(y,"-").concat(i[f]),data:i,xAxis:o,yAxis:l,layout:m==="x"?"vertical":"horizontal",dataPointFormatter:function(p,v){return{x:p.cx,y:p.cy,value:m==="x"?+p.node.x:+p.node.y,errorVal:xr(p,v)}}})}):null}},{key:"renderLine",value:function(){var n=this.props,a=n.points,i=n.line,o=n.lineType,l=n.lineJointType,c=Ue(this.props,!1),u=Ue(i,!1),d,f;if(o==="joint")d=a.map(function(b){return{x:b.cx,y:b.cy}});else if(o==="fitting"){var h=jte(a),m=h.xmin,y=h.xmax,g=h.a,p=h.b,v=function(_){return g*_+p};d=[{x:m,y:v(m)},{x:y,y:v(y)}]}var x=Oa(Oa(Oa({},c),{},{fill:"none",stroke:c&&c.fill},u),{},{points:d});return $.isValidElement(i)?f=$.cloneElement(i,x):Je(i)?f=i(x):f=$.createElement(Mo,wh({},x,{type:l})),$.createElement(vt,{className:"recharts-scatter-line",key:"recharts-scatter-line"},f)}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.points,o=n.line,l=n.className,c=n.xAxis,u=n.yAxis,d=n.left,f=n.top,h=n.width,m=n.height,y=n.id,g=n.isAnimationActive;if(a||!i||!i.length)return null;var p=this.state.isAnimationFinished,v=ut("recharts-scatter",l),x=c&&c.allowDataOverflow,b=u&&u.allowDataOverflow,_=x||b,j=Qe(y)?this.id:y;return $.createElement(vt,{className:v,clipPath:_?"url(#clipPath-".concat(j,")"):null},x||b?$.createElement("defs",null,$.createElement("clipPath",{id:"clipPath-".concat(j)},$.createElement("rect",{x:x?d:d-h/2,y:b?f:f-m/2,width:x?h:h*2,height:b?m:m*2}))):null,o&&this.renderLine(),this.renderErrorBar(),$.createElement(vt,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!g||p)&&wi.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:a.curPoints}:n.points!==a.curPoints?{curPoints:n.points}:null}}])}(w.PureComponent);xo(O0,"displayName","Scatter");xo(O0,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!Fa.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"});xo(O0,"getComposedData",function(e){var t=e.xAxis,r=e.yAxis,n=e.zAxis,a=e.item,i=e.displayedData,o=e.xAxisTicks,l=e.yAxisTicks,c=e.offset,u=a.props.tooltipType,d=qn(a.props.children,el),f=Qe(t.dataKey)?a.props.dataKey:t.dataKey,h=Qe(r.dataKey)?a.props.dataKey:r.dataKey,m=n&&n.dataKey,y=n?n.range:A0.defaultProps.range,g=y&&y[0],p=t.scale.bandwidth?t.scale.bandwidth():0,v=r.scale.bandwidth?r.scale.bandwidth():0,x=i.map(function(b,_){var j=xr(b,f),S=xr(b,h),C=!Qe(m)&&xr(b,m)||"-",k=[{name:Qe(t.dataKey)?a.props.name:t.name||t.dataKey,unit:t.unit||"",value:j,payload:b,dataKey:f,type:u},{name:Qe(r.dataKey)?a.props.name:r.name||r.dataKey,unit:r.unit||"",value:S,payload:b,dataKey:h,type:u}];C!=="-"&&k.push({name:n.name||n.dataKey,unit:n.unit||"",value:C,payload:b,dataKey:m,type:u});var N=ad({axis:t,ticks:o,bandSize:p,entry:b,index:_,dataKey:f}),A=ad({axis:r,ticks:l,bandSize:v,entry:b,index:_,dataKey:h}),O=C!=="-"?n.scale(C):g,E=Math.sqrt(Math.max(O,0)/Math.PI);return Oa(Oa({},b),{},{cx:N,cy:A,x:N-E,y:A-E,xAxis:t,yAxis:r,zAxis:n,width:2*E,height:2*E,size:O,node:{x:j,y:S,z:C},tooltipPayload:k,tooltipPosition:{x:N,y:A},payload:b},d&&d[_]&&d[_].props)});return Oa({points:x},c)});function bd(e){"@babel/helpers - typeof";return bd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bd(e)}function L_e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B_e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,AF(n.key),n)}}function F_e(e,t,r){return t&&B_e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function z_e(e,t,r){return t=Ay(t),U_e(e,PF()?Reflect.construct(t,r||[],Ay(e).constructor):t.apply(e,r))}function U_e(e,t){if(t&&(bd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return V_e(e)}function V_e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function PF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(PF=function(){return!!e})()}function Ay(e){return Ay=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ay(e)}function W_e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&I_(e,t)}function I_(e,t){return I_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},I_(e,t)}function EF(e,t,r){return t=AF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function AF(e){var t=H_e(e,"string");return bd(t)=="symbol"?t:t+""}function H_e(e,t){if(bd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(bd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function D_(){return D_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},D_.apply(this,arguments)}function q_e(e){var t=e.xAxisId,r=TN(),n=RN(),a=iF(t);return a==null?null:w.createElement(df,D_({},a,{className:ut("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(o){return ws(o,!0)}}))}var Jt=function(e){function t(){return L_e(this,t),z_e(this,t,arguments)}return W_e(t,e),F_e(t,[{key:"render",value:function(){return w.createElement(q_e,this.props)}}])}(w.Component);EF(Jt,"displayName","XAxis");EF(Jt,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function wd(e){"@babel/helpers - typeof";return wd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wd(e)}function K_e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function G_e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,RF(n.key),n)}}function Y_e(e,t,r){return t&&G_e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function X_e(e,t,r){return t=Oy(t),Z_e(e,OF()?Reflect.construct(t,r||[],Oy(e).constructor):t.apply(e,r))}function Z_e(e,t){if(t&&(wd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Q_e(e)}function Q_e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function OF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(OF=function(){return!!e})()}function Oy(e){return Oy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Oy(e)}function J_e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L_(e,t)}function L_(e,t){return L_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},L_(e,t)}function TF(e,t,r){return t=RF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RF(e){var t=eSe(e,"string");return wd(t)=="symbol"?t:t+""}function eSe(e,t){if(wd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(wd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function B_(){return B_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},B_.apply(this,arguments)}var tSe=function(t){var r=t.yAxisId,n=TN(),a=RN(),i=sF(r);return i==null?null:w.createElement(df,B_({},i,{className:ut("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(l){return ws(l,!0)}}))},Vt=function(e){function t(){return K_e(this,t),X_e(this,t,arguments)}return J_e(t,e),Y_e(t,[{key:"render",value:function(){return w.createElement(tSe,this.props)}}])}(w.Component);TF(Vt,"displayName","YAxis");TF(Vt,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function TT(e){return iSe(e)||aSe(e)||nSe(e)||rSe()}function rSe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nSe(e,t){if(e){if(typeof e=="string")return F_(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return F_(e,t)}}function aSe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function iSe(e){if(Array.isArray(e))return F_(e)}function F_(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var z_=function(t,r,n,a,i){var o=qn(t,C0),l=qn(t,k0),c=[].concat(TT(o),TT(l)),u=qn(t,E0),d="".concat(a,"Id"),f=a[0],h=r;if(c.length&&(h=c.reduce(function(g,p){if(p.props[d]===n&&Xi(p.props,"extendDomain")&&we(p.props[f])){var v=p.props[f];return[Math.min(g[0],v),Math.max(g[1],v)]}return g},h)),u.length){var m="".concat(f,"1"),y="".concat(f,"2");h=u.reduce(function(g,p){if(p.props[d]===n&&Xi(p.props,"extendDomain")&&we(p.props[m])&&we(p.props[y])){var v=p.props[m],x=p.props[y];return[Math.min(g[0],v,x),Math.max(g[1],v,x)]}return g},h)}return i&&i.length&&(h=i.reduce(function(g,p){return we(p)?[Math.min(g[0],p),Math.max(g[1],p)]:g},h)),h},MF={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function i(c,u,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var m=new a(d,f||c,h),y=r?r+u:u;return c._events[y]?c._events[y].fn?c._events[y]=[c._events[y],m]:c._events[y].push(m):(c._events[y]=m,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,m=f.length,y=new Array(m);h<m;h++)y[h]=f[h].fn;return y},l.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},l.prototype.emit=function(u,d,f,h,m,y){var g=r?r+u:u;if(!this._events[g])return!1;var p=this._events[g],v=arguments.length,x,b;if(p.fn){switch(p.once&&this.removeListener(u,p.fn,void 0,!0),v){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,d),!0;case 3:return p.fn.call(p.context,d,f),!0;case 4:return p.fn.call(p.context,d,f,h),!0;case 5:return p.fn.call(p.context,d,f,h,m),!0;case 6:return p.fn.call(p.context,d,f,h,m,y),!0}for(b=1,x=new Array(v-1);b<v;b++)x[b-1]=arguments[b];p.fn.apply(p.context,x)}else{var _=p.length,j;for(b=0;b<_;b++)switch(p[b].once&&this.removeListener(u,p[b].fn,void 0,!0),v){case 1:p[b].fn.call(p[b].context);break;case 2:p[b].fn.call(p[b].context,d);break;case 3:p[b].fn.call(p[b].context,d,f);break;case 4:p[b].fn.call(p[b].context,d,f,h);break;default:if(!x)for(j=1,x=new Array(v-1);j<v;j++)x[j-1]=arguments[j];p[b].fn.apply(p[b].context,x)}}return!0},l.prototype.on=function(u,d,f){return i(this,u,d,f,!1)},l.prototype.once=function(u,d,f){return i(this,u,d,f,!0)},l.prototype.removeListener=function(u,d,f,h){var m=r?r+u:u;if(!this._events[m])return this;if(!d)return o(this,m),this;var y=this._events[m];if(y.fn)y.fn===d&&(!h||y.once)&&(!f||y.context===f)&&o(this,m);else{for(var g=0,p=[],v=y.length;g<v;g++)(y[g].fn!==d||h&&!y[g].once||f&&y[g].context!==f)&&p.push(y[g]);p.length?this._events[m]=p.length===1?p[0]:p:o(this,m)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&o(this,d)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(MF);var sSe=MF.exports;const oSe=Bt(sSe);var gw=new oSe,vw="recharts.syncMouseEvents";function Bm(e){"@babel/helpers - typeof";return Bm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bm(e)}function lSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cSe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,$F(n.key),n)}}function uSe(e,t,r){return t&&cSe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function yw(e,t,r){return t=$F(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $F(e){var t=dSe(e,"string");return Bm(t)=="symbol"?t:t+""}function dSe(e,t){if(Bm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Bm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var fSe=function(){function e(){lSe(this,e),yw(this,"activeIndex",0),yw(this,"coordinateList",[]),yw(this,"layout","horizontal")}return uSe(e,[{key:"setDetails",value:function(r){var n,a=r.coordinateList,i=a===void 0?null:a,o=r.container,l=o===void 0?null:o,c=r.layout,u=c===void 0?null:c,d=r.offset,f=d===void 0?null:d,h=r.mouseHandlerCallback,m=h===void 0?null:h;this.coordinateList=(n=i??this.coordinateList)!==null&&n!==void 0?n:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=m??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),i=a.x,o=a.y,l=a.height,c=this.coordinateList[this.activeIndex].coordinate,u=((r=window)===null||r===void 0?void 0:r.scrollX)||0,d=((n=window)===null||n===void 0?void 0:n.scrollY)||0,f=i+c+u,h=o+this.offset.top+l/2+d;this.mouseHandlerCallback({pageX:f,pageY:h})}}}])}();function hSe(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var n=e==null?void 0:e[0],a=e==null?void 0:e[1];if(n&&a&&we(n)&&we(a))return!0}return!1}function mSe(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function IF(e){var t=e.cx,r=e.cy,n=e.radius,a=e.startAngle,i=e.endAngle,o=hr(t,r,n,a),l=hr(t,r,n,i);return{points:[o,l],cx:t,cy:r,radius:n,startAngle:a,endAngle:i}}function pSe(e,t,r){var n,a,i,o;if(e==="horizontal")n=t.x,i=n,a=r.top,o=r.top+r.height;else if(e==="vertical")a=t.y,o=a,n=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,u=t.innerRadius,d=t.outerRadius,f=t.angle,h=hr(l,c,u,f),m=hr(l,c,d,f);n=h.x,a=h.y,i=m.x,o=m.y}else return IF(t);return[{x:n,y:a},{x:i,y:o}]}function Fm(e){"@babel/helpers - typeof";return Fm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fm(e)}function RT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function cg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RT(Object(r),!0).forEach(function(n){gSe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gSe(e,t,r){return t=vSe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vSe(e){var t=ySe(e,"string");return Fm(t)=="symbol"?t:t+""}function ySe(e,t){if(Fm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Fm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xSe(e){var t,r,n=e.element,a=e.tooltipEventType,i=e.isActive,o=e.activeCoordinate,l=e.activePayload,c=e.offset,u=e.activeTooltipIndex,d=e.tooltipAxisBandSize,f=e.layout,h=e.chartName,m=(t=n.props.cursor)!==null&&t!==void 0?t:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!m||!i||!o||h!=="ScatterChart"&&a!=="axis")return null;var y,g=Mo;if(h==="ScatterChart")y=o,g=l0e;else if(h==="BarChart")y=mSe(f,o,c,d),g=PN;else if(f==="radial"){var p=IF(o),v=p.cx,x=p.cy,b=p.radius,_=p.startAngle,j=p.endAngle;y={cx:v,cy:x,startAngle:_,endAngle:j,innerRadius:b,outerRadius:b},g=CB}else y={points:pSe(f,o,c)},g=Mo;var S=cg(cg(cg(cg({stroke:"#ccc",pointerEvents:"none"},c),y),Ue(m,!1)),{},{payload:l,payloadIndex:u,className:ut("recharts-tooltip-cursor",m.className)});return w.isValidElement(m)?w.cloneElement(m,S):w.createElement(g,S)}var bSe=["item"],wSe=["children","className","width","height","style","compact","title","desc"];function jd(e){"@babel/helpers - typeof";return jd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jd(e)}function fu(){return fu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fu.apply(this,arguments)}function MT(e,t){return SSe(e)||_Se(e,t)||LF(e,t)||jSe()}function jSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _Se(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function SSe(e){if(Array.isArray(e))return e}function $T(e,t){if(e==null)return{};var r=CSe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function CSe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function NSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kSe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,BF(n.key),n)}}function PSe(e,t,r){return t&&kSe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ESe(e,t,r){return t=Ty(t),ASe(e,DF()?Reflect.construct(t,r||[],Ty(e).constructor):t.apply(e,r))}function ASe(e,t){if(t&&(jd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return OSe(e)}function OSe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function DF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DF=function(){return!!e})()}function Ty(e){return Ty=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ty(e)}function TSe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&U_(e,t)}function U_(e,t){return U_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},U_(e,t)}function _d(e){return $Se(e)||MSe(e)||LF(e)||RSe()}function RSe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LF(e,t){if(e){if(typeof e=="string")return V_(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return V_(e,t)}}function MSe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function $Se(e){if(Array.isArray(e))return V_(e)}function V_(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function IT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function pe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IT(Object(r),!0).forEach(function(n){et(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function et(e,t,r){return t=BF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BF(e){var t=ISe(e,"string");return jd(t)=="symbol"?t:t+""}function ISe(e,t){if(jd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(jd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var DSe={xAxis:["bottom","top"],yAxis:["left","right"]},LSe={width:"100%",height:"100%"},FF={x:0,y:0};function ug(e){return e}var BSe=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},FSe=function(t,r,n,a){var i=r.find(function(d){return d&&d.index===n});if(i){if(t==="horizontal")return{x:i.coordinate,y:a.y};if(t==="vertical")return{x:a.x,y:i.coordinate};if(t==="centric"){var o=i.coordinate,l=a.radius;return pe(pe(pe({},a),hr(a.cx,a.cy,l,o)),{},{angle:o,radius:l})}var c=i.coordinate,u=a.angle;return pe(pe(pe({},a),hr(a.cx,a.cy,c,u)),{},{angle:u,radius:c})}return FF},T0=function(t,r){var n=r.graphicalItems,a=r.dataStartIndex,i=r.dataEndIndex,o=(n??[]).reduce(function(l,c){var u=c.props.data;return u&&u.length?[].concat(_d(l),_d(u)):l},[]);return o.length>0?o:t&&t.length&&we(a)&&we(i)?t.slice(a,i+1):[]};function zF(e){return e==="number"?[0,"auto"]:void 0}var W_=function(t,r,n,a){var i=t.graphicalItems,o=t.tooltipAxis,l=T0(r,t);return n<0||!i||!i.length||n>=l.length?null:i.reduce(function(c,u){var d,f=(d=u.props.data)!==null&&d!==void 0?d:r;f&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=n&&(f=f.slice(t.dataStartIndex,t.dataEndIndex+1));var h;if(o.dataKey&&!o.allowDuplicatedCategory){var m=f===void 0?l:f;h=Ev(m,o.dataKey,a)}else h=f&&f[n]||l[n];return h?[].concat(_d(c),[xB(u,h)]):c},[])},DT=function(t,r,n,a){var i=a||{x:t.chartX,y:t.chartY},o=BSe(i,n),l=t.orderedTooltipTicks,c=t.tooltipAxis,u=t.tooltipTicks,d=Tge(o,l,u,c);if(d>=0&&u){var f=u[d]&&u[d].value,h=W_(t,r,d,f),m=FSe(n,l,d,i);return{activeTooltipIndex:d,activeLabel:f,activePayload:h,activeCoordinate:m}}return null},zSe=function(t,r){var n=r.axes,a=r.graphicalItems,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.layout,f=t.children,h=t.stackOffset,m=hB(d,i);return n.reduce(function(y,g){var p,v=g.type.defaultProps!==void 0?pe(pe({},g.type.defaultProps),g.props):g.props,x=v.type,b=v.dataKey,_=v.allowDataOverflow,j=v.allowDuplicatedCategory,S=v.scale,C=v.ticks,k=v.includeHidden,N=v[o];if(y[N])return y;var A=T0(t.data,{graphicalItems:a.filter(function(J){var se,U=o in J.props?J.props[o]:(se=J.type.defaultProps)===null||se===void 0?void 0:se[o];return U===N}),dataStartIndex:c,dataEndIndex:u}),O=A.length,E,R,P;hSe(v.domain,_,x)&&(E=t_(v.domain,null,_),m&&(x==="number"||S!=="auto")&&(P=ph(A,b,"category")));var T=zF(x);if(!E||E.length===0){var I,M=(I=v.domain)!==null&&I!==void 0?I:T;if(b){if(E=ph(A,b,x),x==="category"&&m){var D=wte(E);j&&D?(R=E,E=gy(0,O)):j||(E=tO(M,E,g).reduce(function(J,se){return J.indexOf(se)>=0?J:[].concat(_d(J),[se])},[]))}else if(x==="category")j?E=E.filter(function(J){return J!==""&&!Qe(J)}):E=tO(M,E,g).reduce(function(J,se){return J.indexOf(se)>=0||se===""||Qe(se)?J:[].concat(_d(J),[se])},[]);else if(x==="number"){var B=Dge(A,a.filter(function(J){var se,U,q=o in J.props?J.props[o]:(se=J.type.defaultProps)===null||se===void 0?void 0:se[o],G="hide"in J.props?J.props.hide:(U=J.type.defaultProps)===null||U===void 0?void 0:U.hide;return q===N&&(k||!G)}),b,i,d);B&&(E=B)}m&&(x==="number"||S!=="auto")&&(P=ph(A,b,"category"))}else m?E=gy(0,O):l&&l[N]&&l[N].hasStack&&x==="number"?E=h==="expand"?[0,1]:yB(l[N].stackGroups,c,u):E=fB(A,a.filter(function(J){var se=o in J.props?J.props[o]:J.type.defaultProps[o],U="hide"in J.props?J.props.hide:J.type.defaultProps.hide;return se===N&&(k||!U)}),x,d,!0);if(x==="number")E=z_(f,E,N,i,C),M&&(E=t_(M,E,_));else if(x==="category"&&M){var z=M,Z=E.every(function(J){return z.indexOf(J)>=0});Z&&(E=z)}}return pe(pe({},y),{},et({},N,pe(pe({},v),{},{axisType:i,domain:E,categoricalDomain:P,duplicateDomain:R,originalDomain:(p=v.domain)!==null&&p!==void 0?p:T,isCategorical:m,layout:d})))},{})},USe=function(t,r){var n=r.graphicalItems,a=r.Axis,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.layout,f=t.children,h=T0(t.data,{graphicalItems:n,dataStartIndex:c,dataEndIndex:u}),m=h.length,y=hB(d,i),g=-1;return n.reduce(function(p,v){var x=v.type.defaultProps!==void 0?pe(pe({},v.type.defaultProps),v.props):v.props,b=x[o],_=zF("number");if(!p[b]){g++;var j;return y?j=gy(0,m):l&&l[b]&&l[b].hasStack?(j=yB(l[b].stackGroups,c,u),j=z_(f,j,b,i)):(j=t_(_,fB(h,n.filter(function(S){var C,k,N=o in S.props?S.props[o]:(C=S.type.defaultProps)===null||C===void 0?void 0:C[o],A="hide"in S.props?S.props.hide:(k=S.type.defaultProps)===null||k===void 0?void 0:k.hide;return N===b&&!A}),"number",d),a.defaultProps.allowDataOverflow),j=z_(f,j,b,i)),pe(pe({},p),{},et({},b,pe(pe({axisType:i},a.defaultProps),{},{hide:!0,orientation:wa(DSe,"".concat(i,".").concat(g%2),null),domain:j,originalDomain:_,isCategorical:y,layout:d})))}return p},{})},VSe=function(t,r){var n=r.axisType,a=n===void 0?"xAxis":n,i=r.AxisComp,o=r.graphicalItems,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.children,f="".concat(a,"Id"),h=qn(d,i),m={};return h&&h.length?m=zSe(t,{axes:h,graphicalItems:o,axisType:a,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:u}):o&&o.length&&(m=USe(t,{Axis:i,graphicalItems:o,axisType:a,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:u})),m},WSe=function(t){var r=oo(t),n=ws(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:tN(n,function(a){return a.coordinate}),tooltipAxis:r,tooltipAxisBandSize:ny(r,n)}},LT=function(t){var r=t.children,n=t.defaultShowTooltip,a=ha(r,ud),i=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(i=a.props.startIndex),a.props.endIndex>=0&&(o=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!n}},HSe=function(t){return!t||!t.length?!1:t.some(function(r){var n=Ss(r&&r.type);return n&&n.indexOf("Bar")>=0})},BT=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},qSe=function(t,r){var n=t.props,a=t.graphicalItems,i=t.xAxisMap,o=i===void 0?{}:i,l=t.yAxisMap,c=l===void 0?{}:l,u=n.width,d=n.height,f=n.children,h=n.margin||{},m=ha(f,ud),y=ha(f,Br),g=Object.keys(c).reduce(function(j,S){var C=c[S],k=C.orientation;return!C.mirror&&!C.hide?pe(pe({},j),{},et({},k,j[k]+C.width)):j},{left:h.left||0,right:h.right||0}),p=Object.keys(o).reduce(function(j,S){var C=o[S],k=C.orientation;return!C.mirror&&!C.hide?pe(pe({},j),{},et({},k,wa(j,"".concat(k))+C.height)):j},{top:h.top||0,bottom:h.bottom||0}),v=pe(pe({},p),g),x=v.bottom;m&&(v.bottom+=m.props.height||ud.defaultProps.height),y&&r&&(v=$ge(v,a,n,r));var b=u-v.left-v.right,_=d-v.top-v.bottom;return pe(pe({brushBottom:x},v),{},{width:Math.max(b,0),height:Math.max(_,0)})},KSe=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},vp=function(t){var r=t.chartName,n=t.GraphicalChild,a=t.defaultTooltipEventType,i=a===void 0?"axis":a,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=t.axisComponents,u=t.legendContent,d=t.formatAxisMap,f=t.defaultProps,h=function(v,x){var b=x.graphicalItems,_=x.stackGroups,j=x.offset,S=x.updateId,C=x.dataStartIndex,k=x.dataEndIndex,N=v.barSize,A=v.layout,O=v.barGap,E=v.barCategoryGap,R=v.maxBarSize,P=BT(A),T=P.numericAxisName,I=P.cateAxisName,M=HSe(b),D=[];return b.forEach(function(B,z){var Z=T0(v.data,{graphicalItems:[B],dataStartIndex:C,dataEndIndex:k}),J=B.type.defaultProps!==void 0?pe(pe({},B.type.defaultProps),B.props):B.props,se=J.dataKey,U=J.maxBarSize,q=J["".concat(T,"Id")],G=J["".concat(I,"Id")],H={},fe=c.reduce(function(ee,oe){var K=x["".concat(oe.axisType,"Map")],ie=J["".concat(oe.axisType,"Id")];K&&K[ie]||oe.axisType==="zAxis"||oc();var ve=K[ie];return pe(pe({},ee),{},et(et({},oe.axisType,ve),"".concat(oe.axisType,"Ticks"),ws(ve)))},H),L=fe[I],Y=fe["".concat(I,"Ticks")],V=_&&_[q]&&_[q].hasStack&&qge(B,_[q].stackGroups),Q=Ss(B.type).indexOf("Bar")>=0,te=ny(L,Y),be=[],Re=M&&Rge({barSize:N,stackGroups:_,totalSize:KSe(fe,I)});if(Q){var We,ge,ke=Qe(U)?R:U,Xe=(We=(ge=ny(L,Y,!0))!==null&&ge!==void 0?ge:ke)!==null&&We!==void 0?We:0;be=Mge({barGap:O,barCategoryGap:E,bandSize:Xe!==te?Xe:te,sizeList:Re[G],maxBarSize:ke}),Xe!==te&&(be=be.map(function(ee){return pe(pe({},ee),{},{position:pe(pe({},ee.position),{},{offset:ee.position.offset-Xe/2})})}))}var F=B&&B.type&&B.type.getComposedData;F&&D.push({props:pe(pe({},F(pe(pe({},fe),{},{displayedData:Z,props:v,dataKey:se,item:B,bandSize:te,barPosition:be,offset:j,stackedData:V,layout:A,dataStartIndex:C,dataEndIndex:k}))),{},et(et(et({key:B.key||"item-".concat(z)},T,fe[T]),I,fe[I]),"animationId",S)),childIndex:Mte(B,v.children),item:B})}),D},m=function(v,x){var b=v.props,_=v.dataStartIndex,j=v.dataEndIndex,S=v.updateId;if(!YE({props:b}))return null;var C=b.children,k=b.layout,N=b.stackOffset,A=b.data,O=b.reverseStackOrder,E=BT(k),R=E.numericAxisName,P=E.cateAxisName,T=qn(C,n),I=Wge(A,T,"".concat(R,"Id"),"".concat(P,"Id"),N,O),M=c.reduce(function(J,se){var U="".concat(se.axisType,"Map");return pe(pe({},J),{},et({},U,VSe(b,pe(pe({},se),{},{graphicalItems:T,stackGroups:se.axisType===R&&I,dataStartIndex:_,dataEndIndex:j}))))},{}),D=qSe(pe(pe({},M),{},{props:b,graphicalItems:T}),x==null?void 0:x.legendBBox);Object.keys(M).forEach(function(J){M[J]=d(b,M[J],D,J.replace("Map",""),r)});var B=M["".concat(P,"Map")],z=WSe(B),Z=h(b,pe(pe({},M),{},{dataStartIndex:_,dataEndIndex:j,updateId:S,graphicalItems:T,stackGroups:I,offset:D}));return pe(pe({formattedGraphicalItems:Z,graphicalItems:T,offset:D,stackGroups:I},z),M)},y=function(p){function v(x){var b,_,j;return NSe(this,v),j=ESe(this,v,[x]),et(j,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),et(j,"accessibilityManager",new fSe),et(j,"handleLegendBBoxUpdate",function(S){if(S){var C=j.state,k=C.dataStartIndex,N=C.dataEndIndex,A=C.updateId;j.setState(pe({legendBBox:S},m({props:j.props,dataStartIndex:k,dataEndIndex:N,updateId:A},pe(pe({},j.state),{},{legendBBox:S}))))}}),et(j,"handleReceiveSyncEvent",function(S,C,k){if(j.props.syncId===S){if(k===j.eventEmitterSymbol&&typeof j.props.syncMethod!="function")return;j.applySyncEvent(C)}}),et(j,"handleBrushChange",function(S){var C=S.startIndex,k=S.endIndex;if(C!==j.state.dataStartIndex||k!==j.state.dataEndIndex){var N=j.state.updateId;j.setState(function(){return pe({dataStartIndex:C,dataEndIndex:k},m({props:j.props,dataStartIndex:C,dataEndIndex:k,updateId:N},j.state))}),j.triggerSyncEvent({dataStartIndex:C,dataEndIndex:k})}}),et(j,"handleMouseEnter",function(S){var C=j.getMouseInfo(S);if(C){var k=pe(pe({},C),{},{isTooltipActive:!0});j.setState(k),j.triggerSyncEvent(k);var N=j.props.onMouseEnter;Je(N)&&N(k,S)}}),et(j,"triggeredAfterMouseMove",function(S){var C=j.getMouseInfo(S),k=C?pe(pe({},C),{},{isTooltipActive:!0}):{isTooltipActive:!1};j.setState(k),j.triggerSyncEvent(k);var N=j.props.onMouseMove;Je(N)&&N(k,S)}),et(j,"handleItemMouseEnter",function(S){j.setState(function(){return{isTooltipActive:!0,activeItem:S,activePayload:S.tooltipPayload,activeCoordinate:S.tooltipPosition||{x:S.cx,y:S.cy}}})}),et(j,"handleItemMouseLeave",function(){j.setState(function(){return{isTooltipActive:!1}})}),et(j,"handleMouseMove",function(S){S.persist(),j.throttleTriggeredAfterMouseMove(S)}),et(j,"handleMouseLeave",function(S){j.throttleTriggeredAfterMouseMove.cancel();var C={isTooltipActive:!1};j.setState(C),j.triggerSyncEvent(C);var k=j.props.onMouseLeave;Je(k)&&k(C,S)}),et(j,"handleOuterEvent",function(S){var C=Rte(S),k=wa(j.props,"".concat(C));if(C&&Je(k)){var N,A;/.*touch.*/i.test(C)?A=j.getMouseInfo(S.changedTouches[0]):A=j.getMouseInfo(S),k((N=A)!==null&&N!==void 0?N:{},S)}}),et(j,"handleClick",function(S){var C=j.getMouseInfo(S);if(C){var k=pe(pe({},C),{},{isTooltipActive:!0});j.setState(k),j.triggerSyncEvent(k);var N=j.props.onClick;Je(N)&&N(k,S)}}),et(j,"handleMouseDown",function(S){var C=j.props.onMouseDown;if(Je(C)){var k=j.getMouseInfo(S);C(k,S)}}),et(j,"handleMouseUp",function(S){var C=j.props.onMouseUp;if(Je(C)){var k=j.getMouseInfo(S);C(k,S)}}),et(j,"handleTouchMove",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&j.throttleTriggeredAfterMouseMove(S.changedTouches[0])}),et(j,"handleTouchStart",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&j.handleMouseDown(S.changedTouches[0])}),et(j,"handleTouchEnd",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&j.handleMouseUp(S.changedTouches[0])}),et(j,"handleDoubleClick",function(S){var C=j.props.onDoubleClick;if(Je(C)){var k=j.getMouseInfo(S);C(k,S)}}),et(j,"handleContextMenu",function(S){var C=j.props.onContextMenu;if(Je(C)){var k=j.getMouseInfo(S);C(k,S)}}),et(j,"triggerSyncEvent",function(S){j.props.syncId!==void 0&&gw.emit(vw,j.props.syncId,S,j.eventEmitterSymbol)}),et(j,"applySyncEvent",function(S){var C=j.props,k=C.layout,N=C.syncMethod,A=j.state.updateId,O=S.dataStartIndex,E=S.dataEndIndex;if(S.dataStartIndex!==void 0||S.dataEndIndex!==void 0)j.setState(pe({dataStartIndex:O,dataEndIndex:E},m({props:j.props,dataStartIndex:O,dataEndIndex:E,updateId:A},j.state)));else if(S.activeTooltipIndex!==void 0){var R=S.chartX,P=S.chartY,T=S.activeTooltipIndex,I=j.state,M=I.offset,D=I.tooltipTicks;if(!M)return;if(typeof N=="function")T=N(D,S);else if(N==="value"){T=-1;for(var B=0;B<D.length;B++)if(D[B].value===S.activeLabel){T=B;break}}var z=pe(pe({},M),{},{x:M.left,y:M.top}),Z=Math.min(R,z.x+z.width),J=Math.min(P,z.y+z.height),se=D[T]&&D[T].value,U=W_(j.state,j.props.data,T),q=D[T]?{x:k==="horizontal"?D[T].coordinate:Z,y:k==="horizontal"?J:D[T].coordinate}:FF;j.setState(pe(pe({},S),{},{activeLabel:se,activeCoordinate:q,activePayload:U,activeTooltipIndex:T}))}else j.setState(S)}),et(j,"renderCursor",function(S){var C,k=j.state,N=k.isTooltipActive,A=k.activeCoordinate,O=k.activePayload,E=k.offset,R=k.activeTooltipIndex,P=k.tooltipAxisBandSize,T=j.getTooltipEventType(),I=(C=S.props.active)!==null&&C!==void 0?C:N,M=j.props.layout,D=S.key||"_recharts-cursor";return $.createElement(xSe,{key:D,activeCoordinate:A,activePayload:O,activeTooltipIndex:R,chartName:r,element:S,isActive:I,layout:M,offset:E,tooltipAxisBandSize:P,tooltipEventType:T})}),et(j,"renderPolarAxis",function(S,C,k){var N=wa(S,"type.axisType"),A=wa(j.state,"".concat(N,"Map")),O=S.type.defaultProps,E=O!==void 0?pe(pe({},O),S.props):S.props,R=A&&A[E["".concat(N,"Id")]];return w.cloneElement(S,pe(pe({},R),{},{className:ut(N,R.className),key:S.key||"".concat(C,"-").concat(k),ticks:ws(R,!0)}))}),et(j,"renderPolarGrid",function(S){var C=S.props,k=C.radialLines,N=C.polarAngles,A=C.polarRadius,O=j.state,E=O.radiusAxisMap,R=O.angleAxisMap,P=oo(E),T=oo(R),I=T.cx,M=T.cy,D=T.innerRadius,B=T.outerRadius;return w.cloneElement(S,{polarAngles:Array.isArray(N)?N:ws(T,!0).map(function(z){return z.coordinate}),polarRadius:Array.isArray(A)?A:ws(P,!0).map(function(z){return z.coordinate}),cx:I,cy:M,innerRadius:D,outerRadius:B,key:S.key||"polar-grid",radialLines:k})}),et(j,"renderLegend",function(){var S=j.state.formattedGraphicalItems,C=j.props,k=C.children,N=C.width,A=C.height,O=j.props.margin||{},E=N-(O.left||0)-(O.right||0),R=uB({children:k,formattedGraphicalItems:S,legendWidth:E,legendContent:u});if(!R)return null;var P=R.item,T=$T(R,bSe);return w.cloneElement(P,pe(pe({},T),{},{chartWidth:N,chartHeight:A,margin:O,onBBoxUpdate:j.handleLegendBBoxUpdate}))}),et(j,"renderTooltip",function(){var S,C=j.props,k=C.children,N=C.accessibilityLayer,A=ha(k,Nt);if(!A)return null;var O=j.state,E=O.isTooltipActive,R=O.activeCoordinate,P=O.activePayload,T=O.activeLabel,I=O.offset,M=(S=A.props.active)!==null&&S!==void 0?S:E;return w.cloneElement(A,{viewBox:pe(pe({},I),{},{x:I.left,y:I.top}),active:M,label:T,payload:M?P:[],coordinate:R,accessibilityLayer:N})}),et(j,"renderBrush",function(S){var C=j.props,k=C.margin,N=C.data,A=j.state,O=A.offset,E=A.dataStartIndex,R=A.dataEndIndex,P=A.updateId;return w.cloneElement(S,{key:S.key||"_recharts-brush",onChange:ig(j.handleBrushChange,S.props.onChange),data:N,x:we(S.props.x)?S.props.x:O.left,y:we(S.props.y)?S.props.y:O.top+O.height+O.brushBottom-(k.bottom||0),width:we(S.props.width)?S.props.width:O.width,startIndex:E,endIndex:R,updateId:"brush-".concat(P)})}),et(j,"renderReferenceElement",function(S,C,k){if(!S)return null;var N=j,A=N.clipPathId,O=j.state,E=O.xAxisMap,R=O.yAxisMap,P=O.offset,T=S.type.defaultProps||{},I=S.props,M=I.xAxisId,D=M===void 0?T.xAxisId:M,B=I.yAxisId,z=B===void 0?T.yAxisId:B;return w.cloneElement(S,{key:S.key||"".concat(C,"-").concat(k),xAxis:E[D],yAxis:R[z],viewBox:{x:P.left,y:P.top,width:P.width,height:P.height},clipPathId:A})}),et(j,"renderActivePoints",function(S){var C=S.item,k=S.activePoint,N=S.basePoint,A=S.childIndex,O=S.isRange,E=[],R=C.props.key,P=C.item.type.defaultProps!==void 0?pe(pe({},C.item.type.defaultProps),C.item.props):C.item.props,T=P.activeDot,I=P.dataKey,M=pe(pe({index:A,dataKey:I,cx:k.x,cy:k.y,r:4,fill:kN(C.item),strokeWidth:2,stroke:"#fff",payload:k.payload,value:k.value},Ue(T,!1)),Av(T));return E.push(v.renderActiveDot(T,M,"".concat(R,"-activePoint-").concat(A))),N?E.push(v.renderActiveDot(T,pe(pe({},M),{},{cx:N.x,cy:N.y}),"".concat(R,"-basePoint-").concat(A))):O&&E.push(null),E}),et(j,"renderGraphicChild",function(S,C,k){var N=j.filterFormatItem(S,C,k);if(!N)return null;var A=j.getTooltipEventType(),O=j.state,E=O.isTooltipActive,R=O.tooltipAxis,P=O.activeTooltipIndex,T=O.activeLabel,I=j.props.children,M=ha(I,Nt),D=N.props,B=D.points,z=D.isRange,Z=D.baseLine,J=N.item.type.defaultProps!==void 0?pe(pe({},N.item.type.defaultProps),N.item.props):N.item.props,se=J.activeDot,U=J.hide,q=J.activeBar,G=J.activeShape,H=!!(!U&&E&&M&&(se||q||G)),fe={};A!=="axis"&&M&&M.props.trigger==="click"?fe={onClick:ig(j.handleItemMouseEnter,S.props.onClick)}:A!=="axis"&&(fe={onMouseLeave:ig(j.handleItemMouseLeave,S.props.onMouseLeave),onMouseEnter:ig(j.handleItemMouseEnter,S.props.onMouseEnter)});var L=w.cloneElement(S,pe(pe({},N.props),fe));function Y(oe){return typeof R.dataKey=="function"?R.dataKey(oe.payload):null}if(H)if(P>=0){var V,Q;if(R.dataKey&&!R.allowDuplicatedCategory){var te=typeof R.dataKey=="function"?Y:"payload.".concat(R.dataKey.toString());V=Ev(B,te,T),Q=z&&Z&&Ev(Z,te,T)}else V=B==null?void 0:B[P],Q=z&&Z&&Z[P];if(G||q){var be=S.props.activeIndex!==void 0?S.props.activeIndex:P;return[w.cloneElement(S,pe(pe(pe({},N.props),fe),{},{activeIndex:be})),null,null]}if(!Qe(V))return[L].concat(_d(j.renderActivePoints({item:N,activePoint:V,basePoint:Q,childIndex:P,isRange:z})))}else{var Re,We=(Re=j.getItemByXY(j.state.activeCoordinate))!==null&&Re!==void 0?Re:{graphicalItem:L},ge=We.graphicalItem,ke=ge.item,Xe=ke===void 0?S:ke,F=ge.childIndex,ee=pe(pe(pe({},N.props),fe),{},{activeIndex:F});return[w.cloneElement(Xe,ee),null,null]}return z?[L,null,null]:[L,null]}),et(j,"renderCustomized",function(S,C,k){return w.cloneElement(S,pe(pe({key:"recharts-customized-".concat(k)},j.props),j.state))}),et(j,"renderMap",{CartesianGrid:{handler:ug,once:!0},ReferenceArea:{handler:j.renderReferenceElement},ReferenceLine:{handler:ug},ReferenceDot:{handler:j.renderReferenceElement},XAxis:{handler:ug},YAxis:{handler:ug},Brush:{handler:j.renderBrush,once:!0},Bar:{handler:j.renderGraphicChild},Line:{handler:j.renderGraphicChild},Area:{handler:j.renderGraphicChild},Radar:{handler:j.renderGraphicChild},RadialBar:{handler:j.renderGraphicChild},Scatter:{handler:j.renderGraphicChild},Pie:{handler:j.renderGraphicChild},Funnel:{handler:j.renderGraphicChild},Tooltip:{handler:j.renderCursor,once:!0},PolarGrid:{handler:j.renderPolarGrid,once:!0},PolarAngleAxis:{handler:j.renderPolarAxis},PolarRadiusAxis:{handler:j.renderPolarAxis},Customized:{handler:j.renderCustomized}}),j.clipPathId="".concat((b=x.id)!==null&&b!==void 0?b:Jo("recharts"),"-clip"),j.throttleTriggeredAfterMouseMove=cL(j.triggeredAfterMouseMove,(_=x.throttleDelay)!==null&&_!==void 0?_:1e3/60),j.state={},j}return TSe(v,p),PSe(v,[{key:"componentDidMount",value:function(){var b,_;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(b=this.props.margin.left)!==null&&b!==void 0?b:0,top:(_=this.props.margin.top)!==null&&_!==void 0?_:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var b=this.props,_=b.children,j=b.data,S=b.height,C=b.layout,k=ha(_,Nt);if(k){var N=k.props.defaultIndex;if(!(typeof N!="number"||N<0||N>this.state.tooltipTicks.length-1)){var A=this.state.tooltipTicks[N]&&this.state.tooltipTicks[N].value,O=W_(this.state,j,N,A),E=this.state.tooltipTicks[N].coordinate,R=(this.state.offset.top+S)/2,P=C==="horizontal",T=P?{x:E,y:R}:{y:E,x:R},I=this.state.formattedGraphicalItems.find(function(D){var B=D.item;return B.type.name==="Scatter"});I&&(T=pe(pe({},T),I.props.points[N].tooltipPosition),O=I.props.points[N].tooltipPayload);var M={activeTooltipIndex:N,isTooltipActive:!0,activeLabel:A,activePayload:O,activeCoordinate:T};this.setState(M),this.renderCursor(k),this.accessibilityManager.setIndex(N)}}}},{key:"getSnapshotBeforeUpdate",value:function(b,_){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==_.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==b.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==b.margin){var j,S;this.accessibilityManager.setDetails({offset:{left:(j=this.props.margin.left)!==null&&j!==void 0?j:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0}})}return null}},{key:"componentDidUpdate",value:function(b){g1([ha(b.children,Nt)],[ha(this.props.children,Nt)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var b=ha(this.props.children,Nt);if(b&&typeof b.props.shared=="boolean"){var _=b.props.shared?"axis":"item";return l.indexOf(_)>=0?_:i}return i}},{key:"getMouseInfo",value:function(b){if(!this.container)return null;var _=this.container,j=_.getBoundingClientRect(),S=sfe(j),C={chartX:Math.round(b.pageX-S.left),chartY:Math.round(b.pageY-S.top)},k=j.width/_.offsetWidth||1,N=this.inRange(C.chartX,C.chartY,k);if(!N)return null;var A=this.state,O=A.xAxisMap,E=A.yAxisMap,R=this.getTooltipEventType(),P=DT(this.state,this.props.data,this.props.layout,N);if(R!=="axis"&&O&&E){var T=oo(O).scale,I=oo(E).scale,M=T&&T.invert?T.invert(C.chartX):null,D=I&&I.invert?I.invert(C.chartY):null;return pe(pe({},C),{},{xValue:M,yValue:D},P)}return P?pe(pe({},C),P):null}},{key:"inRange",value:function(b,_){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,S=this.props.layout,C=b/j,k=_/j;if(S==="horizontal"||S==="vertical"){var N=this.state.offset,A=C>=N.left&&C<=N.left+N.width&&k>=N.top&&k<=N.top+N.height;return A?{x:C,y:k}:null}var O=this.state,E=O.angleAxisMap,R=O.radiusAxisMap;if(E&&R){var P=oo(E);return aO({x:C,y:k},P)}return null}},{key:"parseEventsOfWrapper",value:function(){var b=this.props.children,_=this.getTooltipEventType(),j=ha(b,Nt),S={};j&&_==="axis"&&(j.props.trigger==="click"?S={onClick:this.handleClick}:S={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var C=Av(this.props,this.handleOuterEvent);return pe(pe({},C),S)}},{key:"addListener",value:function(){gw.on(vw,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){gw.removeListener(vw,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(b,_,j){for(var S=this.state.formattedGraphicalItems,C=0,k=S.length;C<k;C++){var N=S[C];if(N.item===b||N.props.key===b.key||_===Ss(N.item.type)&&j===N.childIndex)return N}return null}},{key:"renderClipPath",value:function(){var b=this.clipPathId,_=this.state.offset,j=_.left,S=_.top,C=_.height,k=_.width;return $.createElement("defs",null,$.createElement("clipPath",{id:b},$.createElement("rect",{x:j,y:S,height:C,width:k})))}},{key:"getXScales",value:function(){var b=this.state.xAxisMap;return b?Object.entries(b).reduce(function(_,j){var S=MT(j,2),C=S[0],k=S[1];return pe(pe({},_),{},et({},C,k.scale))},{}):null}},{key:"getYScales",value:function(){var b=this.state.yAxisMap;return b?Object.entries(b).reduce(function(_,j){var S=MT(j,2),C=S[0],k=S[1];return pe(pe({},_),{},et({},C,k.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(b){var _;return(_=this.state.xAxisMap)===null||_===void 0||(_=_[b])===null||_===void 0?void 0:_.scale}},{key:"getYScaleByAxisId",value:function(b){var _;return(_=this.state.yAxisMap)===null||_===void 0||(_=_[b])===null||_===void 0?void 0:_.scale}},{key:"getItemByXY",value:function(b){var _=this.state,j=_.formattedGraphicalItems,S=_.activeItem;if(j&&j.length)for(var C=0,k=j.length;C<k;C++){var N=j[C],A=N.props,O=N.item,E=O.type.defaultProps!==void 0?pe(pe({},O.type.defaultProps),O.props):O.props,R=Ss(O.type);if(R==="Bar"){var P=(A.data||[]).find(function(D){return Uxe(b,D)});if(P)return{graphicalItem:N,payload:P}}else if(R==="RadialBar"){var T=(A.data||[]).find(function(D){return aO(b,D)});if(T)return{graphicalItem:N,payload:T}}else if(w0(N,S)||j0(N,S)||Mm(N,S)){var I=Abe({graphicalItem:N,activeTooltipItem:S,itemData:E.data}),M=E.activeIndex===void 0?I:E.activeIndex;return{graphicalItem:pe(pe({},N),{},{childIndex:M}),payload:Mm(N,S)?E.data[I]:N.props.data[I]}}}return null}},{key:"render",value:function(){var b=this;if(!YE(this))return null;var _=this.props,j=_.children,S=_.className,C=_.width,k=_.height,N=_.style,A=_.compact,O=_.title,E=_.desc,R=$T(_,wSe),P=Ue(R,!1);if(A)return $.createElement(fT,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},$.createElement(y1,fu({},P,{width:C,height:k,title:O,desc:E}),this.renderClipPath(),ZE(j,this.renderMap)));if(this.props.accessibilityLayer){var T,I;P.tabIndex=(T=this.props.tabIndex)!==null&&T!==void 0?T:0,P.role=(I=this.props.role)!==null&&I!==void 0?I:"application",P.onKeyDown=function(D){b.accessibilityManager.keyboardEvent(D)},P.onFocus=function(){b.accessibilityManager.focus()}}var M=this.parseEventsOfWrapper();return $.createElement(fT,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},$.createElement("div",fu({className:ut("recharts-wrapper",S),style:pe({position:"relative",cursor:"default",width:C,height:k},N)},M,{ref:function(B){b.container=B}}),$.createElement(y1,fu({},P,{width:C,height:k,title:O,desc:E,style:LSe}),this.renderClipPath(),ZE(j,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(w.Component);et(y,"displayName",r),et(y,"defaultProps",pe({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),et(y,"getDerivedStateFromProps",function(p,v){var x=p.dataKey,b=p.data,_=p.children,j=p.width,S=p.height,C=p.layout,k=p.stackOffset,N=p.margin,A=v.dataStartIndex,O=v.dataEndIndex;if(v.updateId===void 0){var E=LT(p);return pe(pe(pe({},E),{},{updateId:0},m(pe(pe({props:p},E),{},{updateId:0}),v)),{},{prevDataKey:x,prevData:b,prevWidth:j,prevHeight:S,prevLayout:C,prevStackOffset:k,prevMargin:N,prevChildren:_})}if(x!==v.prevDataKey||b!==v.prevData||j!==v.prevWidth||S!==v.prevHeight||C!==v.prevLayout||k!==v.prevStackOffset||!_u(N,v.prevMargin)){var R=LT(p),P={chartX:v.chartX,chartY:v.chartY,isTooltipActive:v.isTooltipActive},T=pe(pe({},DT(v,b,C)),{},{updateId:v.updateId+1}),I=pe(pe(pe({},R),P),T);return pe(pe(pe({},I),m(pe({props:p},I),v)),{},{prevDataKey:x,prevData:b,prevWidth:j,prevHeight:S,prevLayout:C,prevStackOffset:k,prevMargin:N,prevChildren:_})}if(!g1(_,v.prevChildren)){var M,D,B,z,Z=ha(_,ud),J=Z&&(M=(D=Z.props)===null||D===void 0?void 0:D.startIndex)!==null&&M!==void 0?M:A,se=Z&&(B=(z=Z.props)===null||z===void 0?void 0:z.endIndex)!==null&&B!==void 0?B:O,U=J!==A||se!==O,q=!Qe(b),G=q&&!U?v.updateId:v.updateId+1;return pe(pe({updateId:G},m(pe(pe({props:p},v),{},{updateId:G,dataStartIndex:J,dataEndIndex:se}),v)),{},{prevChildren:_,dataStartIndex:J,dataEndIndex:se})}return null}),et(y,"renderActiveDot",function(p,v,x){var b;return w.isValidElement(p)?b=w.cloneElement(p,v):Je(p)?b=p(v):b=$.createElement(gp,v),$.createElement(vt,{className:"recharts-active-dot",key:x},b)});var g=w.forwardRef(function(v,x){return $.createElement(y,fu({},v,{ref:x}))});return g.displayName=y.displayName,g},UF=vp({chartName:"LineChart",GraphicalChild:Rn,axisComponents:[{axisType:"xAxis",AxisComp:Jt},{axisType:"yAxis",AxisComp:Vt}],formatAxisMap:S0}),es=vp({chartName:"BarChart",GraphicalChild:Wt,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Jt},{axisType:"yAxis",AxisComp:Vt}],formatAxisMap:S0}),DN=vp({chartName:"PieChart",GraphicalChild:ki,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:b0},{axisType:"radiusAxis",AxisComp:y0}],formatAxisMap:rve,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),Ry=vp({chartName:"AreaChart",GraphicalChild:Mn,axisComponents:[{axisType:"xAxis",AxisComp:Jt},{axisType:"yAxis",AxisComp:Vt}],formatAxisMap:S0}),Sd=vp({chartName:"ComposedChart",GraphicalChild:[Rn,Mn,Wt,O0],axisComponents:[{axisType:"xAxis",AxisComp:Jt},{axisType:"yAxis",AxisComp:Vt},{axisType:"zAxis",AxisComp:A0}],formatAxisMap:S0});const dg={B2C:"hsl(var(--primary))",B2B:"hsl(38, 92%, 50%)",OEM:"hsl(150, 60%, 40%)"},FT=["hsl(var(--primary))","hsl(var(--accent))","hsl(150, 60%, 40%)","hsl(38, 92%, 50%)","hsl(280, 60%, 50%)"];function GSe({products:e,years:t}){const[r,n]=w.useState("by-product"),a=t.map(c=>{const u={year:c};return e.forEach(d=>{if(d.volumesByChannel){const f=d.volumesByChannel.B2C[c]||0,h=d.volumesByChannel.B2B[c]||0,m=d.volumesByChannel.OEM[c]||0;u[d.name]=(f*d.priceHT+h*(d.priceHT_B2B||d.priceHT)+m*(d.priceHT_OEM||d.priceHT))/1e3}else u[d.name]=(d.volumesByYear[c]||0)*d.priceHT/1e3}),u}),i=t.map(c=>{let u=0,d=0,f=0;return e.forEach(h=>{const m=h.volumesByChannel||{B2C:{},B2B:{},OEM:{}};u+=(m.B2C[c]||0)*h.priceHT,d+=(m.B2B[c]||0)*(h.priceHT_B2B||h.priceHT),f+=(m.OEM[c]||0)*(h.priceHT_OEM||h.priceHT)}),{year:c,B2C:u/1e3,B2B:d/1e3,OEM:f/1e3}}),o={B2C:0,B2B:0,OEM:0};e.forEach(c=>{const u=c.volumesByChannel||{B2C:{},B2B:{},OEM:{}};t.forEach(d=>{o.B2C+=(u.B2C[d]||0)*c.priceHT,o.B2B+=(u.B2B[d]||0)*(c.priceHT_B2B||c.priceHT),o.OEM+=(u.OEM[d]||0)*(c.priceHT_OEM||c.priceHT)})});const l=["B2C","B2B","OEM"].map(c=>({name:c,value:Math.round(o[c])})).filter(c=>c.value>0);return s.jsxs(Ke,{title:"CA par Produit & Canal",children:[s.jsxs("div",{className:"flex gap-2 mb-4",children:[s.jsx(ne,{variant:r==="by-product"?"default":"outline",size:"sm",onClick:()=>n("by-product"),children:"Par Produit"}),s.jsx(ne,{variant:r==="by-channel"?"default":"outline",size:"sm",onClick:()=>n("by-channel"),children:"Par Canal"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[s.jsx("div",{className:"lg:col-span-2 h-64",children:s.jsx(wr,{width:"100%",height:"100%",children:r==="by-product"?s.jsxs(es,{data:a,children:[s.jsx(Nr,{strokeDasharray:"3 3"}),s.jsx(Jt,{dataKey:"year"}),s.jsx(Vt,{tickFormatter:c=>`${c}k`}),s.jsx(Nt,{formatter:c=>`${c.toFixed(0)}k`}),s.jsx(Br,{}),e.map((c,u)=>s.jsx(Wt,{dataKey:c.name,stackId:"a",fill:FT[u%FT.length]},c.id))]}):s.jsxs(es,{data:i,children:[s.jsx(Nr,{strokeDasharray:"3 3"}),s.jsx(Jt,{dataKey:"year"}),s.jsx(Vt,{tickFormatter:c=>`${c}k`}),s.jsx(Nt,{formatter:c=>`${c.toFixed(0)}k`}),s.jsx(Br,{}),s.jsx(Wt,{dataKey:"B2C",stackId:"a",fill:dg.B2C}),s.jsx(Wt,{dataKey:"B2B",stackId:"a",fill:dg.B2B}),s.jsx(Wt,{dataKey:"OEM",stackId:"a",fill:dg.OEM})]})})}),s.jsxs("div",{className:"h-64",children:[s.jsx("p",{className:"text-xs text-muted-foreground text-center mb-1",children:"Rpartition CA par canal"}),s.jsx(wr,{width:"100%",height:"90%",children:s.jsxs(DN,{children:[s.jsx(ki,{data:l,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:70,label:({name:c,percent:u})=>`${c} ${(u*100).toFixed(0)}%`,children:l.map(c=>s.jsx(el,{fill:dg[c.name]},c.name))}),s.jsx(Nt,{formatter:c=>re(c,!0)})]})})]})]})]})}const If=["B2C","B2B","OEM"];function YSe({products:e,years:t,onChannelVolumeChange:r}){const[n,a]=w.useState({B2C:0,B2B:0,OEM:0}),i=(c,u)=>{const d=e.find(m=>m.id===c);if(!d)return;const f=d.volumesByChannel||{B2C:{},B2B:{},OEM:{}},h=n[u]/100;t.forEach((m,y)=>{if(m<d.launchYear||y===0||t[y-1]<d.launchYear)return;const g=f[u][t[y-1]]||0,p=Math.round(g*(1+h));p!==(f[u][m]||0)&&(r(c,m,u,p),f[u][m]=p)})},o=t.map(c=>{let u=0,d=0,f=0,h=0,m=0,y=0;return e.forEach(g=>{const p=g.volumesByChannel||{B2C:{},B2B:{},OEM:{}},v=p.B2C[c]||0,x=p.B2B[c]||0,b=p.OEM[c]||0;u+=v,d+=x,f+=b,h+=v*g.priceHT,m+=x*(g.priceHT_B2B||g.priceHT),y+=b*(g.priceHT_OEM||g.priceHT)}),{year:c,b2c:u,b2b:d,oem:f,caB2C:h,caB2B:m,caOEM:y,caTotal:h+m+y}}),l=o.reduce((c,u)=>c+u.caTotal,0);return s.jsxs(Ke,{title:"Volumes par Anne & Canal",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-4 p-3 bg-muted/30 rounded-lg border",children:[s.jsx(Fo,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"text-sm font-medium",children:"Croissance annuelle :"}),If.map(c=>s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"text-xs font-medium",children:c}),s.jsx(xe,{type:"number",value:n[c],onChange:u=>a(d=>({...d,[c]:Number(u.target.value)})),className:"h-7 w-16 text-center text-xs",step:5}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"%"})]},c)),s.jsx("span",{className:"text-xs text-muted-foreground ml-2",children:"Cliquez sur le nom d'un produit pour appliquer la croissance."})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Kt,{children:[s.jsxs(Gt,{children:[s.jsxs(_e,{children:[s.jsx(ce,{rowSpan:2,className:"min-w-[120px]",children:"Produit"}),t.map(c=>s.jsx(ce,{colSpan:3,className:"text-center border-l",children:c},c)),s.jsx(ce,{rowSpan:2,className:"text-right border-l",children:"CA Total"})]}),s.jsx(_e,{children:t.map(c=>If.map(u=>s.jsx(ce,{className:`text-center text-xs ${u==="B2C"?"border-l":""}`,children:u},`${c}-${u}`)))})]}),s.jsxs(Yt,{children:[e.map(c=>{const u=c.volumesByChannel||{B2C:{},B2B:{},OEM:{}},d=t.reduce((f,h)=>{const m=u.B2C[h]||0,y=u.B2B[h]||0,g=u.OEM[h]||0;return f+m*c.priceHT+y*(c.priceHT_B2B||c.priceHT)+g*(c.priceHT_OEM||c.priceHT)},0);return s.jsxs(_e,{children:[s.jsx(W,{children:s.jsxs("button",{className:"text-left hover:underline cursor-pointer",onClick:()=>If.forEach(f=>i(c.id,f)),title:"Appliquer la croissance sur ce produit",children:[s.jsx("div",{className:"font-medium",children:c.name}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:["Cot: ",re(c.unitCost)]})]})}),t.map(f=>If.map(h=>s.jsx(W,{className:`text-center ${h==="B2C"?"border-l":""}`,children:f>=c.launchYear?s.jsx(xe,{type:"number",value:u[h][f]||0,onChange:m=>r(c.id,f,h,Number(m.target.value)),className:"h-7 w-16 mx-auto text-center text-xs"}):s.jsx("span",{className:"text-muted-foreground text-xs",children:"-"})},`${c.id}-${f}-${h}`))),s.jsx(W,{className:"text-right font-mono-numbers font-medium border-l",children:re(d,!0)})]},c.id)}),s.jsxs(_e,{className:"bg-muted/40 font-semibold border-t-2",children:[s.jsx(W,{children:"Total Volumes"}),o.map(c=>If.map(u=>s.jsx(W,{className:`text-center text-xs ${u==="B2C"?"border-l":""}`,children:u==="B2C"?c.b2c:u==="B2B"?c.b2b:c.oem},`total-vol-${c.year}-${u}`))),s.jsx(W,{className:"text-right border-l",children:"-"})]}),s.jsxs(_e,{className:"bg-primary/10 font-bold",children:[s.jsx(W,{children:"CA par Anne"}),o.map(c=>s.jsxs(W,{colSpan:3,className:"text-center border-l text-xs",children:[re(c.caTotal,!0),s.jsxs("div",{className:"text-[10px] font-normal text-muted-foreground",children:["B2C: ",re(c.caB2C,!0)," | B2B: ",re(c.caB2B,!0)," | OEM: ",re(c.caOEM,!0)]})]},`total-ca-${c.year}`)),s.jsx(W,{className:"text-right font-mono-numbers border-l",children:re(l,!0)})]})]})]})})]})}const XSe=Dd("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Pe({className:e,variant:t,...r}){return s.jsx("div",{className:ue(XSe({variant:t}),e),...r})}var xw=0;function LN(){w.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??zT()),document.body.insertAdjacentElement("beforeend",e[1]??zT()),xw++,()=>{xw===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),xw--}},[])}function zT(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var bw="focusScope.autoFocusOnMount",ww="focusScope.autoFocusOnUnmount",UT={bubbles:!1,cancelable:!0},ZSe="FocusScope",R0=w.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...o}=e,[l,c]=w.useState(null),u=tn(a),d=tn(i),f=w.useRef(null),h=dt(t,g=>c(g)),m=w.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;w.useEffect(()=>{if(n){let g=function(b){if(m.paused||!l)return;const _=b.target;l.contains(_)?f.current=_:Qs(f.current,{select:!0})},p=function(b){if(m.paused||!l)return;const _=b.relatedTarget;_!==null&&(l.contains(_)||Qs(f.current,{select:!0}))},v=function(b){if(document.activeElement===document.body)for(const j of b)j.removedNodes.length>0&&Qs(l)};document.addEventListener("focusin",g),document.addEventListener("focusout",p);const x=new MutationObserver(v);return l&&x.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",p),x.disconnect()}}},[n,l,m.paused]),w.useEffect(()=>{if(l){WT.add(m);const g=document.activeElement;if(!l.contains(g)){const v=new CustomEvent(bw,UT);l.addEventListener(bw,u),l.dispatchEvent(v),v.defaultPrevented||(QSe(nCe(VF(l)),{select:!0}),document.activeElement===g&&Qs(l))}return()=>{l.removeEventListener(bw,u),setTimeout(()=>{const v=new CustomEvent(ww,UT);l.addEventListener(ww,d),l.dispatchEvent(v),v.defaultPrevented||Qs(g??document.body,{select:!0}),l.removeEventListener(ww,d),WT.remove(m)},0)}}},[l,u,d,m]);const y=w.useCallback(g=>{if(!r&&!n||m.paused)return;const p=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,v=document.activeElement;if(p&&v){const x=g.currentTarget,[b,_]=JSe(x);b&&_?!g.shiftKey&&v===_?(g.preventDefault(),r&&Qs(b,{select:!0})):g.shiftKey&&v===b&&(g.preventDefault(),r&&Qs(_,{select:!0})):v===x&&g.preventDefault()}},[r,n,m.paused]);return s.jsx(Ve.div,{tabIndex:-1,...o,ref:h,onKeyDown:y})});R0.displayName=ZSe;function QSe(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(Qs(n,{select:t}),document.activeElement!==r)return}function JSe(e){const t=VF(e),r=VT(t,e),n=VT(t.reverse(),e);return[r,n]}function VF(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function VT(e,t){for(const r of e)if(!eCe(r,{upTo:t}))return r}function eCe(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function tCe(e){return e instanceof HTMLInputElement&&"select"in e}function Qs(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&tCe(e)&&t&&e.select()}}var WT=rCe();function rCe(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=HT(e,t),e.unshift(t)},remove(t){var r;e=HT(e,t),(r=e[0])==null||r.resume()}}}function HT(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function nCe(e){return e.filter(t=>t.tagName!=="A")}var aCe=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Tc=new WeakMap,fg=new WeakMap,hg={},jw=0,WF=function(e){return e&&(e.host||WF(e.parentNode))},iCe=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=WF(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},sCe=function(e,t,r,n){var a=iCe(t,Array.isArray(e)?e:[e]);hg[r]||(hg[r]=new WeakMap);var i=hg[r],o=[],l=new Set,c=new Set(a),u=function(f){!f||l.has(f)||(l.add(f),u(f.parentNode))};a.forEach(u);var d=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(h){if(l.has(h))d(h);else try{var m=h.getAttribute(n),y=m!==null&&m!=="false",g=(Tc.get(h)||0)+1,p=(i.get(h)||0)+1;Tc.set(h,g),i.set(h,p),o.push(h),g===1&&y&&fg.set(h,!0),p===1&&h.setAttribute(r,"true"),y||h.setAttribute(n,"true")}catch(v){console.error("aria-hidden: cannot operate on ",h,v)}})};return d(t),l.clear(),jw++,function(){o.forEach(function(f){var h=Tc.get(f)-1,m=i.get(f)-1;Tc.set(f,h),i.set(f,m),h||(fg.has(f)||f.removeAttribute(n),fg.delete(f)),m||f.removeAttribute(r)}),jw--,jw||(Tc=new WeakMap,Tc=new WeakMap,fg=new WeakMap,hg={})}},BN=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),a=aCe(e);return a?(n.push.apply(n,Array.from(a.querySelectorAll("[aria-live]"))),sCe(n,a,r,"aria-hidden")):function(){return null}},Bg="right-scroll-bar-position",Fg="width-before-scroll-bar",oCe="with-scroll-bars-hidden",lCe="--removed-body-scroll-bar-size";function _w(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function cCe(e,t){var r=w.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var a=r.value;a!==n&&(r.value=n,r.callback(n,a))}}}})[0];return r.callback=t,r.facade}var uCe=typeof window<"u"?w.useLayoutEffect:w.useEffect,qT=new WeakMap;function dCe(e,t){var r=cCe(null,function(n){return e.forEach(function(a){return _w(a,n)})});return uCe(function(){var n=qT.get(r);if(n){var a=new Set(n),i=new Set(e),o=r.current;a.forEach(function(l){i.has(l)||_w(l,null)}),i.forEach(function(l){a.has(l)||_w(l,o)})}qT.set(r,e)},[e]),r}function fCe(e){return e}function hCe(e,t){t===void 0&&(t=fCe);var r=[],n=!1,a={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(i){var o=t(i,n);return r.push(o),function(){r=r.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(n=!0;r.length;){var o=r;r=[],o.forEach(i)}r={push:function(l){return i(l)},filter:function(){return r}}},assignMedium:function(i){n=!0;var o=[];if(r.length){var l=r;r=[],l.forEach(i),o=r}var c=function(){var d=o;o=[],d.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),r={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),r}}}};return a}function mCe(e){e===void 0&&(e={});var t=hCe(null);return t.options=Di({async:!0,ssr:!1},e),t}var HF=function(e){var t=e.sideCar,r=Gd(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return w.createElement(n,Di({},r))};HF.isSideCarExport=!0;function pCe(e,t){return e.useMedium(t),HF}var qF=mCe(),Sw=function(){},M0=w.forwardRef(function(e,t){var r=w.useRef(null),n=w.useState({onScrollCapture:Sw,onWheelCapture:Sw,onTouchMoveCapture:Sw}),a=n[0],i=n[1],o=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,f=e.shards,h=e.sideCar,m=e.noRelative,y=e.noIsolation,g=e.inert,p=e.allowPinchZoom,v=e.as,x=v===void 0?"div":v,b=e.gapMode,_=Gd(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),j=h,S=dCe([r,t]),C=Di(Di({},_),a);return w.createElement(w.Fragment,null,d&&w.createElement(j,{sideCar:qF,removeScrollBar:u,shards:f,noRelative:m,noIsolation:y,inert:g,setCallbacks:i,allowPinchZoom:!!p,lockRef:r,gapMode:b}),o?w.cloneElement(w.Children.only(l),Di(Di({},C),{ref:S})):w.createElement(x,Di({},C,{className:c,ref:S}),l))});M0.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};M0.classNames={fullWidth:Fg,zeroRight:Bg};var gCe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function vCe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=gCe();return t&&e.setAttribute("nonce",t),e}function yCe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function xCe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var bCe=function(){var e=0,t=null;return{add:function(r){e==0&&(t=vCe())&&(yCe(t,r),xCe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},wCe=function(){var e=bCe();return function(t,r){w.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},KF=function(){var e=wCe(),t=function(r){var n=r.styles,a=r.dynamic;return e(n,a),null};return t},jCe={left:0,top:0,right:0,gap:0},Cw=function(e){return parseInt(e||"",10)||0},_Ce=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[Cw(r),Cw(n),Cw(a)]},SCe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return jCe;var t=_Ce(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},CCe=KF(),Nu="data-scroll-locked",NCe=function(e,t,r,n){var a=e.left,i=e.top,o=e.right,l=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(oCe,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(Nu,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Bg,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Fg,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Bg," .").concat(Bg,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Fg," .").concat(Fg,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Nu,`] {
    `).concat(lCe,": ").concat(l,`px;
  }
`)},KT=function(){var e=parseInt(document.body.getAttribute(Nu)||"0",10);return isFinite(e)?e:0},kCe=function(){w.useEffect(function(){return document.body.setAttribute(Nu,(KT()+1).toString()),function(){var e=KT()-1;e<=0?document.body.removeAttribute(Nu):document.body.setAttribute(Nu,e.toString())}},[])},PCe=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,a=n===void 0?"margin":n;kCe();var i=w.useMemo(function(){return SCe(a)},[a]);return w.createElement(CCe,{styles:NCe(i,!t,a,r?"":"!important")})},H_=!1;if(typeof window<"u")try{var mg=Object.defineProperty({},"passive",{get:function(){return H_=!0,!0}});window.addEventListener("test",mg,mg),window.removeEventListener("test",mg,mg)}catch{H_=!1}var Rc=H_?{passive:!1}:!1,ECe=function(e){return e.tagName==="TEXTAREA"},GF=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!ECe(e)&&r[t]==="visible")},ACe=function(e){return GF(e,"overflowY")},OCe=function(e){return GF(e,"overflowX")},GT=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var a=YF(e,n);if(a){var i=XF(e,n),o=i[1],l=i[2];if(o>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},TCe=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},RCe=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},YF=function(e,t){return e==="v"?ACe(t):OCe(t)},XF=function(e,t){return e==="v"?TCe(t):RCe(t)},MCe=function(e,t){return e==="h"&&t==="rtl"?-1:1},$Ce=function(e,t,r,n,a){var i=MCe(e,window.getComputedStyle(t).direction),o=i*n,l=r.target,c=t.contains(l),u=!1,d=o>0,f=0,h=0;do{if(!l)break;var m=XF(e,l),y=m[0],g=m[1],p=m[2],v=g-p-i*y;(y||v)&&YF(e,l)&&(f+=v,h+=y);var x=l.parentNode;l=x&&x.nodeType===Node.DOCUMENT_FRAGMENT_NODE?x.host:x}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(d&&(Math.abs(f)<1||!a)||!d&&(Math.abs(h)<1||!a))&&(u=!0),u},pg=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},YT=function(e){return[e.deltaX,e.deltaY]},XT=function(e){return e&&"current"in e?e.current:e},ICe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},DCe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},LCe=0,Mc=[];function BCe(e){var t=w.useRef([]),r=w.useRef([0,0]),n=w.useRef(),a=w.useState(LCe++)[0],i=w.useState(KF)[0],o=w.useRef(e);w.useEffect(function(){o.current=e},[e]),w.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var g=aY([e.lockRef.current],(e.shards||[]).map(XT),!0).filter(Boolean);return g.forEach(function(p){return p.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),g.forEach(function(p){return p.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=w.useCallback(function(g,p){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!o.current.allowPinchZoom;var v=pg(g),x=r.current,b="deltaX"in g?g.deltaX:x[0]-v[0],_="deltaY"in g?g.deltaY:x[1]-v[1],j,S=g.target,C=Math.abs(b)>Math.abs(_)?"h":"v";if("touches"in g&&C==="h"&&S.type==="range")return!1;var k=GT(C,S);if(!k)return!0;if(k?j=C:(j=C==="v"?"h":"v",k=GT(C,S)),!k)return!1;if(!n.current&&"changedTouches"in g&&(b||_)&&(n.current=j),!j)return!0;var N=n.current||j;return $Ce(N,p,g,N==="h"?b:_,!0)},[]),c=w.useCallback(function(g){var p=g;if(!(!Mc.length||Mc[Mc.length-1]!==i)){var v="deltaY"in p?YT(p):pg(p),x=t.current.filter(function(j){return j.name===p.type&&(j.target===p.target||p.target===j.shadowParent)&&ICe(j.delta,v)})[0];if(x&&x.should){p.cancelable&&p.preventDefault();return}if(!x){var b=(o.current.shards||[]).map(XT).filter(Boolean).filter(function(j){return j.contains(p.target)}),_=b.length>0?l(p,b[0]):!o.current.noIsolation;_&&p.cancelable&&p.preventDefault()}}},[]),u=w.useCallback(function(g,p,v,x){var b={name:g,delta:p,target:v,should:x,shadowParent:FCe(v)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(_){return _!==b})},1)},[]),d=w.useCallback(function(g){r.current=pg(g),n.current=void 0},[]),f=w.useCallback(function(g){u(g.type,YT(g),g.target,l(g,e.lockRef.current))},[]),h=w.useCallback(function(g){u(g.type,pg(g),g.target,l(g,e.lockRef.current))},[]);w.useEffect(function(){return Mc.push(i),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:h}),document.addEventListener("wheel",c,Rc),document.addEventListener("touchmove",c,Rc),document.addEventListener("touchstart",d,Rc),function(){Mc=Mc.filter(function(g){return g!==i}),document.removeEventListener("wheel",c,Rc),document.removeEventListener("touchmove",c,Rc),document.removeEventListener("touchstart",d,Rc)}},[]);var m=e.removeScrollBar,y=e.inert;return w.createElement(w.Fragment,null,y?w.createElement(i,{styles:DCe(a)}):null,m?w.createElement(PCe,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function FCe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const zCe=pCe(qF,BCe);var $0=w.forwardRef(function(e,t){return w.createElement(M0,Di({},e,{ref:t,sideCar:zCe}))});$0.classNames=M0.classNames;var UCe=[" ","Enter","ArrowUp","ArrowDown"],VCe=[" ","Enter"],cc="Select",[I0,D0,WCe]=px(cc),[ff,tTe]=Yn(cc,[WCe,Ud]),L0=Ud(),[HCe,al]=ff(cc),[qCe,KCe]=ff(cc),ZF=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:a,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:f,disabled:h,required:m,form:y}=e,g=L0(t),[p,v]=w.useState(null),[x,b]=w.useState(null),[_,j]=w.useState(!1),S=qd(u),[C,k]=sa({prop:n,defaultProp:a??!1,onChange:i,caller:cc}),[N,A]=sa({prop:o,defaultProp:l,onChange:c,caller:cc}),O=w.useRef(null),E=p?y||!!p.closest("form"):!0,[R,P]=w.useState(new Set),T=Array.from(R).map(I=>I.props.value).join(";");return s.jsx(yC,{...g,children:s.jsxs(HCe,{required:m,scope:t,trigger:p,onTriggerChange:v,valueNode:x,onValueNodeChange:b,valueNodeHasChildren:_,onValueNodeHasChildrenChange:j,contentId:Ki(),value:N,onValueChange:A,open:C,onOpenChange:k,dir:S,triggerPointerDownPosRef:O,disabled:h,children:[s.jsx(I0.Provider,{scope:t,children:s.jsx(qCe,{scope:e.__scopeSelect,onNativeOptionAdd:w.useCallback(I=>{P(M=>new Set(M).add(I))},[]),onNativeOptionRemove:w.useCallback(I=>{P(M=>{const D=new Set(M);return D.delete(I),D})},[]),children:r})}),E?s.jsxs(w5,{"aria-hidden":!0,required:m,tabIndex:-1,name:d,autoComplete:f,value:N,onChange:I=>A(I.target.value),disabled:h,form:y,children:[N===void 0?s.jsx("option",{value:""}):null,Array.from(R)]},T):null]})})};ZF.displayName=cc;var QF="SelectTrigger",JF=w.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...a}=e,i=L0(r),o=al(QF,r),l=o.disabled||n,c=dt(t,o.onTriggerChange),u=D0(r),d=w.useRef("touch"),[f,h,m]=_5(g=>{const p=u().filter(b=>!b.disabled),v=p.find(b=>b.value===o.value),x=S5(p,g,v);x!==void 0&&o.onValueChange(x.value)}),y=g=>{l||(o.onOpenChange(!0),m()),g&&(o.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return s.jsx(Sx,{asChild:!0,...i,children:s.jsx(Ve.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":j5(o.value)?"":void 0,...a,ref:c,onClick:Oe(a.onClick,g=>{g.currentTarget.focus(),d.current!=="mouse"&&y(g)}),onPointerDown:Oe(a.onPointerDown,g=>{d.current=g.pointerType;const p=g.target;p.hasPointerCapture(g.pointerId)&&p.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(y(g),g.preventDefault())}),onKeyDown:Oe(a.onKeyDown,g=>{const p=f.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&h(g.key),!(p&&g.key===" ")&&UCe.includes(g.key)&&(y(),g.preventDefault())})})})});JF.displayName=QF;var e5="SelectValue",t5=w.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:a,children:i,placeholder:o="",...l}=e,c=al(e5,r),{onValueNodeHasChildrenChange:u}=c,d=i!==void 0,f=dt(t,c.onValueNodeChange);return hn(()=>{u(d)},[u,d]),s.jsx(Ve.span,{...l,ref:f,style:{pointerEvents:"none"},children:j5(c.value)?s.jsx(s.Fragment,{children:o}):i})});t5.displayName=e5;var GCe="SelectIcon",r5=w.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...a}=e;return s.jsx(Ve.span,{"aria-hidden":!0,...a,ref:t,children:n||""})});r5.displayName=GCe;var YCe="SelectPortal",n5=e=>s.jsx(ap,{asChild:!0,...e});n5.displayName=YCe;var uc="SelectContent",a5=w.forwardRef((e,t)=>{const r=al(uc,e.__scopeSelect),[n,a]=w.useState();if(hn(()=>{a(new DocumentFragment)},[]),!r.open){const i=n;return i?pc.createPortal(s.jsx(i5,{scope:e.__scopeSelect,children:s.jsx(I0.Slot,{scope:e.__scopeSelect,children:s.jsx("div",{children:e.children})})}),i):null}return s.jsx(s5,{...e,ref:t})});a5.displayName=uc;var ri=10,[i5,il]=ff(uc),XCe="SelectContentImpl",ZCe=tc("SelectContent.RemoveScroll"),s5=w.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:h,collisionPadding:m,sticky:y,hideWhenDetached:g,avoidCollisions:p,...v}=e,x=al(uc,r),[b,_]=w.useState(null),[j,S]=w.useState(null),C=dt(t,H=>_(H)),[k,N]=w.useState(null),[A,O]=w.useState(null),E=D0(r),[R,P]=w.useState(!1),T=w.useRef(!1);w.useEffect(()=>{if(b)return BN(b)},[b]),LN();const I=w.useCallback(H=>{const[fe,...L]=E().map(Q=>Q.ref.current),[Y]=L.slice(-1),V=document.activeElement;for(const Q of H)if(Q===V||(Q==null||Q.scrollIntoView({block:"nearest"}),Q===fe&&j&&(j.scrollTop=0),Q===Y&&j&&(j.scrollTop=j.scrollHeight),Q==null||Q.focus(),document.activeElement!==V))return},[E,j]),M=w.useCallback(()=>I([k,b]),[I,k,b]);w.useEffect(()=>{R&&M()},[R,M]);const{onOpenChange:D,triggerPointerDownPosRef:B}=x;w.useEffect(()=>{if(b){let H={x:0,y:0};const fe=Y=>{var V,Q;H={x:Math.abs(Math.round(Y.pageX)-(((V=B.current)==null?void 0:V.x)??0)),y:Math.abs(Math.round(Y.pageY)-(((Q=B.current)==null?void 0:Q.y)??0))}},L=Y=>{H.x<=10&&H.y<=10?Y.preventDefault():b.contains(Y.target)||D(!1),document.removeEventListener("pointermove",fe),B.current=null};return B.current!==null&&(document.addEventListener("pointermove",fe),document.addEventListener("pointerup",L,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",fe),document.removeEventListener("pointerup",L,{capture:!0})}}},[b,D,B]),w.useEffect(()=>{const H=()=>D(!1);return window.addEventListener("blur",H),window.addEventListener("resize",H),()=>{window.removeEventListener("blur",H),window.removeEventListener("resize",H)}},[D]);const[z,Z]=_5(H=>{const fe=E().filter(V=>!V.disabled),L=fe.find(V=>V.ref.current===document.activeElement),Y=S5(fe,H,L);Y&&setTimeout(()=>Y.ref.current.focus())}),J=w.useCallback((H,fe,L)=>{const Y=!T.current&&!L;(x.value!==void 0&&x.value===fe||Y)&&(N(H),Y&&(T.current=!0))},[x.value]),se=w.useCallback(()=>b==null?void 0:b.focus(),[b]),U=w.useCallback((H,fe,L)=>{const Y=!T.current&&!L;(x.value!==void 0&&x.value===fe||Y)&&O(H)},[x.value]),q=n==="popper"?q_:o5,G=q===q_?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:h,collisionPadding:m,sticky:y,hideWhenDetached:g,avoidCollisions:p}:{};return s.jsx(i5,{scope:r,content:b,viewport:j,onViewportChange:S,itemRefCallback:J,selectedItem:k,onItemLeave:se,itemTextRefCallback:U,focusSelectedItem:M,selectedItemText:A,position:n,isPositioned:R,searchRef:z,children:s.jsx($0,{as:ZCe,allowPinchZoom:!0,children:s.jsx(R0,{asChild:!0,trapped:x.open,onMountAutoFocus:H=>{H.preventDefault()},onUnmountAutoFocus:Oe(a,H=>{var fe;(fe=x.trigger)==null||fe.focus({preventScroll:!0}),H.preventDefault()}),children:s.jsx(Id,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:H=>H.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:s.jsx(q,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:H=>H.preventDefault(),...v,...G,onPlaced:()=>P(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:Oe(v.onKeyDown,H=>{const fe=H.ctrlKey||H.altKey||H.metaKey;if(H.key==="Tab"&&H.preventDefault(),!fe&&H.key.length===1&&Z(H.key),["ArrowUp","ArrowDown","Home","End"].includes(H.key)){let Y=E().filter(V=>!V.disabled).map(V=>V.ref.current);if(["ArrowUp","End"].includes(H.key)&&(Y=Y.slice().reverse()),["ArrowUp","ArrowDown"].includes(H.key)){const V=H.target,Q=Y.indexOf(V);Y=Y.slice(Q+1)}setTimeout(()=>I(Y)),H.preventDefault()}})})})})})})});s5.displayName=XCe;var QCe="SelectItemAlignedPosition",o5=w.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...a}=e,i=al(uc,r),o=il(uc,r),[l,c]=w.useState(null),[u,d]=w.useState(null),f=dt(t,C=>d(C)),h=D0(r),m=w.useRef(!1),y=w.useRef(!0),{viewport:g,selectedItem:p,selectedItemText:v,focusSelectedItem:x}=o,b=w.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&u&&g&&p&&v){const C=i.trigger.getBoundingClientRect(),k=u.getBoundingClientRect(),N=i.valueNode.getBoundingClientRect(),A=v.getBoundingClientRect();if(i.dir!=="rtl"){const V=A.left-k.left,Q=N.left-V,te=C.left-Q,be=C.width+te,Re=Math.max(be,k.width),We=window.innerWidth-ri,ge=Qh(Q,[ri,Math.max(ri,We-Re)]);l.style.minWidth=be+"px",l.style.left=ge+"px"}else{const V=k.right-A.right,Q=window.innerWidth-N.right-V,te=window.innerWidth-C.right-Q,be=C.width+te,Re=Math.max(be,k.width),We=window.innerWidth-ri,ge=Qh(Q,[ri,Math.max(ri,We-Re)]);l.style.minWidth=be+"px",l.style.right=ge+"px"}const O=h(),E=window.innerHeight-ri*2,R=g.scrollHeight,P=window.getComputedStyle(u),T=parseInt(P.borderTopWidth,10),I=parseInt(P.paddingTop,10),M=parseInt(P.borderBottomWidth,10),D=parseInt(P.paddingBottom,10),B=T+I+R+D+M,z=Math.min(p.offsetHeight*5,B),Z=window.getComputedStyle(g),J=parseInt(Z.paddingTop,10),se=parseInt(Z.paddingBottom,10),U=C.top+C.height/2-ri,q=E-U,G=p.offsetHeight/2,H=p.offsetTop+G,fe=T+I+H,L=B-fe;if(fe<=U){const V=O.length>0&&p===O[O.length-1].ref.current;l.style.bottom="0px";const Q=u.clientHeight-g.offsetTop-g.offsetHeight,te=Math.max(q,G+(V?se:0)+Q+M),be=fe+te;l.style.height=be+"px"}else{const V=O.length>0&&p===O[0].ref.current;l.style.top="0px";const te=Math.max(U,T+g.offsetTop+(V?J:0)+G)+L;l.style.height=te+"px",g.scrollTop=fe-U+g.offsetTop}l.style.margin=`${ri}px 0`,l.style.minHeight=z+"px",l.style.maxHeight=E+"px",n==null||n(),requestAnimationFrame(()=>m.current=!0)}},[h,i.trigger,i.valueNode,l,u,g,p,v,i.dir,n]);hn(()=>b(),[b]);const[_,j]=w.useState();hn(()=>{u&&j(window.getComputedStyle(u).zIndex)},[u]);const S=w.useCallback(C=>{C&&y.current===!0&&(b(),x==null||x(),y.current=!1)},[b,x]);return s.jsx(eNe,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:m,onScrollButtonChange:S,children:s.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:_},children:s.jsx(Ve.div,{...a,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});o5.displayName=QCe;var JCe="SelectPopperPosition",q_=w.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:a=ri,...i}=e,o=L0(r);return s.jsx(xC,{...o,...i,ref:t,align:n,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});q_.displayName=JCe;var[eNe,FN]=ff(uc,{}),K_="SelectViewport",l5=w.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:n,...a}=e,i=il(K_,r),o=FN(K_,r),l=dt(t,i.onViewportChange),c=w.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),s.jsx(I0.Slot,{scope:r,children:s.jsx(Ve.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:Oe(a.onScroll,u=>{const d=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:h}=o;if(h!=null&&h.current&&f){const m=Math.abs(c.current-d.scrollTop);if(m>0){const y=window.innerHeight-ri*2,g=parseFloat(f.style.minHeight),p=parseFloat(f.style.height),v=Math.max(g,p);if(v<y){const x=v+m,b=Math.min(y,x),_=x-b;f.style.height=b+"px",f.style.bottom==="0px"&&(d.scrollTop=_>0?_:0,f.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});l5.displayName=K_;var c5="SelectGroup",[tNe,rNe]=ff(c5),nNe=w.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=Ki();return s.jsx(tNe,{scope:r,id:a,children:s.jsx(Ve.div,{role:"group","aria-labelledby":a,...n,ref:t})})});nNe.displayName=c5;var u5="SelectLabel",d5=w.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=rNe(u5,r);return s.jsx(Ve.div,{id:a.id,...n,ref:t})});d5.displayName=u5;var My="SelectItem",[aNe,f5]=ff(My),h5=w.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:a=!1,textValue:i,...o}=e,l=al(My,r),c=il(My,r),u=l.value===n,[d,f]=w.useState(i??""),[h,m]=w.useState(!1),y=dt(t,x=>{var b;return(b=c.itemRefCallback)==null?void 0:b.call(c,x,n,a)}),g=Ki(),p=w.useRef("touch"),v=()=>{a||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(aNe,{scope:r,value:n,disabled:a,textId:g,isSelected:u,onItemTextChange:w.useCallback(x=>{f(b=>b||((x==null?void 0:x.textContent)??"").trim())},[]),children:s.jsx(I0.ItemSlot,{scope:r,value:n,disabled:a,textValue:d,children:s.jsx(Ve.div,{role:"option","aria-labelledby":g,"data-highlighted":h?"":void 0,"aria-selected":u&&h,"data-state":u?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...o,ref:y,onFocus:Oe(o.onFocus,()=>m(!0)),onBlur:Oe(o.onBlur,()=>m(!1)),onClick:Oe(o.onClick,()=>{p.current!=="mouse"&&v()}),onPointerUp:Oe(o.onPointerUp,()=>{p.current==="mouse"&&v()}),onPointerDown:Oe(o.onPointerDown,x=>{p.current=x.pointerType}),onPointerMove:Oe(o.onPointerMove,x=>{var b;p.current=x.pointerType,a?(b=c.onItemLeave)==null||b.call(c):p.current==="mouse"&&x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Oe(o.onPointerLeave,x=>{var b;x.currentTarget===document.activeElement&&((b=c.onItemLeave)==null||b.call(c))}),onKeyDown:Oe(o.onKeyDown,x=>{var _;((_=c.searchRef)==null?void 0:_.current)!==""&&x.key===" "||(VCe.includes(x.key)&&v(),x.key===" "&&x.preventDefault())})})})})});h5.displayName=My;var Qf="SelectItemText",m5=w.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:a,...i}=e,o=al(Qf,r),l=il(Qf,r),c=f5(Qf,r),u=KCe(Qf,r),[d,f]=w.useState(null),h=dt(t,v=>f(v),c.onItemTextChange,v=>{var x;return(x=l.itemTextRefCallback)==null?void 0:x.call(l,v,c.value,c.disabled)}),m=d==null?void 0:d.textContent,y=w.useMemo(()=>s.jsx("option",{value:c.value,disabled:c.disabled,children:m},c.value),[c.disabled,c.value,m]),{onNativeOptionAdd:g,onNativeOptionRemove:p}=u;return hn(()=>(g(y),()=>p(y)),[g,p,y]),s.jsxs(s.Fragment,{children:[s.jsx(Ve.span,{id:c.textId,...i,ref:h}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?pc.createPortal(i.children,o.valueNode):null]})});m5.displayName=Qf;var p5="SelectItemIndicator",g5=w.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return f5(p5,r).isSelected?s.jsx(Ve.span,{"aria-hidden":!0,...n,ref:t}):null});g5.displayName=p5;var G_="SelectScrollUpButton",v5=w.forwardRef((e,t)=>{const r=il(G_,e.__scopeSelect),n=FN(G_,e.__scopeSelect),[a,i]=w.useState(!1),o=dt(t,n.onScrollButtonChange);return hn(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollTop>0;i(u)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?s.jsx(x5,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});v5.displayName=G_;var Y_="SelectScrollDownButton",y5=w.forwardRef((e,t)=>{const r=il(Y_,e.__scopeSelect),n=FN(Y_,e.__scopeSelect),[a,i]=w.useState(!1),o=dt(t,n.onScrollButtonChange);return hn(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;i(d)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?s.jsx(x5,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});y5.displayName=Y_;var x5=w.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:n,...a}=e,i=il("SelectScrollButton",r),o=w.useRef(null),l=D0(r),c=w.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return w.useEffect(()=>()=>c(),[c]),hn(()=>{var d;const u=l().find(f=>f.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[l]),s.jsx(Ve.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:Oe(a.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(n,50))}),onPointerMove:Oe(a.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),o.current===null&&(o.current=window.setInterval(n,50))}),onPointerLeave:Oe(a.onPointerLeave,()=>{c()})})}),iNe="SelectSeparator",b5=w.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return s.jsx(Ve.div,{"aria-hidden":!0,...n,ref:t})});b5.displayName=iNe;var X_="SelectArrow",sNe=w.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=L0(r),i=al(X_,r),o=il(X_,r);return i.open&&o.position==="popper"?s.jsx(bC,{...a,...n,ref:t}):null});sNe.displayName=X_;var oNe="SelectBubbleInput",w5=w.forwardRef(({__scopeSelect:e,value:t,...r},n)=>{const a=w.useRef(null),i=dt(n,a),o=Rx(t);return w.useEffect(()=>{const l=a.current;if(!l)return;const c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==t&&d){const f=new Event("change",{bubbles:!0});d.call(l,t),l.dispatchEvent(f)}},[o,t]),s.jsx(Ve.select,{...r,style:{...NI,...r.style},ref:i,defaultValue:t})});w5.displayName=oNe;function j5(e){return e===""||e===void 0}function _5(e){const t=tn(e),r=w.useRef(""),n=w.useRef(0),a=w.useCallback(o=>{const l=r.current+o;t(l),function c(u){r.current=u,window.clearTimeout(n.current),u!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),i=w.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return w.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,a,i]}function S5(e,t,r){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let o=lNe(e,Math.max(i,0));a.length===1&&(o=o.filter(u=>u!==r));const c=o.find(u=>u.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function lNe(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var cNe=ZF,C5=JF,uNe=t5,dNe=r5,fNe=n5,N5=a5,hNe=l5,k5=d5,P5=h5,mNe=m5,pNe=g5,E5=v5,A5=y5,O5=b5;const lt=cNe,ct=uNe,st=w.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(C5,{ref:n,className:ue("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,s.jsx(dNe,{asChild:!0,children:s.jsx(Uh,{className:"h-4 w-4 opacity-50"})})]}));st.displayName=C5.displayName;const T5=w.forwardRef(({className:e,...t},r)=>s.jsx(E5,{ref:r,className:ue("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(dH,{className:"h-4 w-4"})}));T5.displayName=E5.displayName;const R5=w.forwardRef(({className:e,...t},r)=>s.jsx(A5,{ref:r,className:ue("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(Uh,{className:"h-4 w-4"})}));R5.displayName=A5.displayName;const ot=w.forwardRef(({className:e,children:t,position:r="popper",...n},a)=>s.jsx(fNe,{children:s.jsxs(N5,{ref:a,className:ue("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[s.jsx(T5,{}),s.jsx(hNe,{className:ue("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),s.jsx(R5,{})]})}));ot.displayName=N5.displayName;const gNe=w.forwardRef(({className:e,...t},r)=>s.jsx(k5,{ref:r,className:ue("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));gNe.displayName=k5.displayName;const De=w.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(P5,{ref:n,className:ue("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(pNe,{children:s.jsx(Oo,{className:"h-4 w-4"})})}),s.jsx(mNe,{children:t})]}));De.displayName=P5.displayName;const vNe=w.forwardRef(({className:e,...t},r)=>s.jsx(O5,{ref:r,className:ue("-mx-1 my-1 h-px bg-muted",e),...t}));vNe.displayName=O5.displayName;function M5(){const{toast:e}=tC(),{user:t}=Xn(),[r,n]=w.useState([]),[a,i]=w.useState([]),[o,l]=w.useState([]),[c,u]=w.useState([]),[d,f]=w.useState([]),[h,m]=w.useState([]),[y,g]=w.useState(!0),p=w.useCallback(async()=>{if(t)try{g(!0);const[T,I,M,D,B,z]=await Promise.all([he.from("b2b_clients").select("*").order("company_name"),he.from("b2b_client_projections").select("*"),he.from("b2b_delivery_fee_tiers").select("*").order("min_pieces"),he.from("b2b_payment_terms_options").select("*").order("label"),he.from("b2b_delivery_methods").select("*").order("label"),he.from("b2b_client_categories").select("*").order("sort_order")]);if(T.error)throw T.error;if(I.error)throw I.error;if(M.error)throw M.error;if(D.error)throw D.error;if(B.error)throw B.error;if(z.error)throw z.error;n(T.data),i(I.data),l(M.data),u(D.data),f(B.data),m(z.data)}catch(T){console.error("B2B fetch error:",T),e({title:"Erreur",description:"Impossible de charger les donnes B2B",variant:"destructive"})}finally{g(!1)}},[t,e]);w.useEffect(()=>{p()},[p]);const v=w.useCallback(async T=>{if(!t)return null;const I={...T,user_id:t.id};if(T.id){const{data:M,error:D}=await he.from("b2b_clients").update(I).eq("id",T.id).select().single();return D?(e({title:"Erreur",description:D.message,variant:"destructive"}),null):(await p(),M)}else{const{data:M,error:D}=await he.from("b2b_clients").insert(I).select().single();return D?(e({title:"Erreur",description:D.message,variant:"destructive"}),null):(await p(),M)}},[t,e,p]),x=w.useCallback(async T=>{const{error:I}=await he.from("b2b_clients").delete().eq("id",T);if(I){e({title:"Erreur",description:I.message,variant:"destructive"});return}await p()},[e,p]),b=w.useCallback(async(T,I,M,D)=>{if(!t)return;const B=a.find(z=>z.client_id===T&&z.year===I);B?await he.from("b2b_client_projections").update({projected_revenue:M,notes:D||null}).eq("id",B.id):await he.from("b2b_client_projections").insert({client_id:T,year:I,projected_revenue:M,notes:D||null,user_id:t.id}),await p()},[t,a,p]),_=w.useCallback(async(T,I)=>{t&&(await he.from("b2b_client_categories").insert({name:T,color:I||"#6366f1",user_id:t.id,sort_order:h.length}),await p())},[t,h.length,p]),j=w.useCallback(async T=>{await he.from("b2b_client_categories").delete().eq("id",T),await p()},[p]),S=w.useCallback(async(T,I)=>{await he.from("b2b_client_categories").update(I).eq("id",T),await p()},[p]),C=w.useCallback(async(T,I,M,D)=>{t&&(await he.from("b2b_delivery_fee_tiers").insert({label:T,fee_amount:I,min_pieces:M,max_pieces:D,user_id:t.id}),await p())},[t,p]),k=w.useCallback(async T=>{await he.from("b2b_delivery_fee_tiers").delete().eq("id",T),await p()},[p]),N=w.useCallback(async(T,I)=>{t&&(await he.from("b2b_payment_terms_options").insert({label:T,description:I||null,user_id:t.id}),await p())},[t,p]),A=w.useCallback(async T=>{await he.from("b2b_payment_terms_options").delete().eq("id",T),await p()},[p]),O=w.useCallback(async(T,I)=>{t&&(await he.from("b2b_delivery_methods").insert({label:T,description:I||null,user_id:t.id}),await p())},[t,p]),E=w.useCallback(async T=>{await he.from("b2b_delivery_methods").delete().eq("id",T),await p()},[p]),R=w.useCallback(async T=>{if(!t)return 0;const I=T.map(B=>({...B,user_id:t.id,company_name:B.company_name||"Sans nom"})),{data:M,error:D}=await he.from("b2b_clients").insert(I).select();return D?(e({title:"Erreur import",description:D.message,variant:"destructive"}),0):(await p(),(M==null?void 0:M.length)||0)},[t,e,p]),P=w.useCallback(T=>a.filter(I=>I.client_id===T),[a]);return{clients:r,projections:a,deliveryFeeTiers:o,paymentTermsOptions:c,deliveryMethods:d,categories:h,isLoading:y,refreshData:p,upsertClient:v,deleteClient:x,bulkImportClients:R,upsertProjection:b,getClientProjections:P,addDeliveryFeeTier:C,deleteDeliveryFeeTier:k,addPaymentTerm:N,deletePaymentTerm:A,addDeliveryMethod:O,deleteDeliveryMethod:E,addCategory:_,deleteCategory:j,updateCategory:S}}function ZT(e){return e&&e.toLowerCase().includes("oem")?"OEM":"B2B"}function yNe({config:e,onChange:t,years:r}){const{clients:n,categories:a,projections:i}=M5(),o=r[0],[l,c]=w.useState("none"),u={entries:((e==null?void 0:e.entries)??[]).map(E=>({...E,channel:E.channel??"B2B",individualGrowthRate:E.individualGrowthRate??null,revenueByYear:E.revenueByYear??{}})),growthRate:(e==null?void 0:e.growthRate)??.1,marginRate:(e==null?void 0:e.marginRate)??.5,marginB2C:(e==null?void 0:e.marginB2C)??.6,marginByCategory:(e==null?void 0:e.marginByCategory)??{}},d=E=>t({...u,...E}),f=(E,R)=>{d({entries:u.entries.map(P=>P.clientId===E?{...P,...R}:P)})},h=E=>{const R=n.find(M=>M.id===E);if(!R||u.entries.some(M=>M.clientId===E))return;const P=a.find(M=>M.id===R.category_id),T=ZT(P==null?void 0:P.name),I=i==null?void 0:i.find(M=>M.client_id===E&&M.year===o-1);d({entries:[...u.entries,{clientId:R.id,clientName:R.company_name,categoryId:R.category_id,categoryName:(P==null?void 0:P.name)||null,channel:T,baseRevenue:(I==null?void 0:I.projected_revenue)??0,individualGrowthRate:null,revenueByYear:{}}]})},m=()=>{const E=`b2c_${Date.now()}`;d({entries:[...u.entries,{clientId:E,clientName:"Ventes B2C",categoryId:null,categoryName:null,channel:"B2C",baseRevenue:0,individualGrowthRate:null,revenueByYear:{}}]})},y=E=>{const R=u.entries.find(I=>I.clientId===E);if(!R||!R.baseRevenue)return;const P=R.individualGrowthRate??u.growthRate,T={};r.forEach((I,M)=>{T[I]=Math.round(R.baseRevenue*Math.pow(1+P,M+1))}),f(E,{revenueByYear:T})},g=(E,R)=>{var I;if(((I=E.revenueByYear)==null?void 0:I[R])!==void 0)return E.revenueByYear[R];const P=R-o+1,T=E.individualGrowthRate??u.growthRate;return E.baseRevenue*Math.pow(1+T,P)},p=E=>E.channel==="B2C"?u.marginB2C:E.categoryId&&u.marginByCategory[E.categoryId]!==void 0?u.marginByCategory[E.categoryId]:u.marginRate,v=r.map(E=>u.entries.reduce((R,P)=>R+g(P,E),0)),x=v.reduce((E,R)=>E+R,0),_=r.map(E=>u.entries.reduce((R,P)=>R+g(P,E)*p(P),0)).reduce((E,R)=>E+R,0),j=["B2B","OEM","B2C"],S=E=>l==="none"?E:[...E].sort((R,P)=>{const T=r.reduce((M,D)=>M+g(R,D),0),I=r.reduce((M,D)=>M+g(P,D),0);return l==="desc"?I-T:T-I}),C=j.map(E=>({channel:E,entries:S(u.entries.filter(R=>R.channel===E))})).filter(E=>E.entries.length>0),k=n.filter(E=>E.is_active&&!u.entries.some(R=>R.clientId===E.id)),N=u.entries.some(E=>E.channel==="B2C"),O=[...new Set(u.entries.map(E=>E.categoryId).filter(Boolean))].map(E=>a.find(R=>R.id===E)).filter(Boolean);return s.jsxs("div",{className:"space-y-4",children:[s.jsxs(Ke,{title:"Paramtres globaux",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2 p-3 rounded-lg border bg-muted/20",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"font-medium",children:"Croissance globale"}),s.jsxs("span",{className:"font-mono text-primary",children:[(u.growthRate*100).toFixed(0),"%"]})]}),s.jsx(Ur,{value:[u.growthRate*100],onValueChange:([E])=>d({growthRate:E/100}),min:-20,max:100,step:1}),s.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Par dfaut si pas de taux individuel"})]}),s.jsxs("div",{className:"space-y-2 p-3 rounded-lg border bg-muted/20",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"font-medium",children:"Marge B2B/OEM"}),s.jsxs("span",{className:"font-mono text-primary",children:[(u.marginRate*100).toFixed(0),"%"]})]}),s.jsx(Ur,{value:[u.marginRate*100],onValueChange:([E])=>d({marginRate:E/100}),min:0,max:100,step:1}),s.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Marge par dfaut"})]}),s.jsxs("div",{className:"space-y-2 p-3 rounded-lg border bg-muted/20",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"font-medium",children:"Marge B2C"}),s.jsxs("span",{className:"font-mono text-primary",children:[(u.marginB2C*100).toFixed(0),"%"]})]}),s.jsx(Ur,{value:[u.marginB2C*100],onValueChange:([E])=>d({marginB2C:E/100}),min:0,max:100,step:1})]})]}),O.length>0&&s.jsxs("div",{className:"mt-4 pt-4 border-t",children:[s.jsx("p",{className:"text-sm font-medium mb-3",children:"Marge par catgorie"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:O.map(E=>{const R=u.marginByCategory[E.id]??u.marginRate;return s.jsxs("div",{className:"space-y-1 p-2 rounded border bg-muted/10",children:[s.jsxs("div",{className:"flex justify-between text-xs",children:[s.jsx("span",{children:E.name}),s.jsxs("span",{className:"font-mono text-primary",children:[(R*100).toFixed(0),"%"]})]}),s.jsx(Ur,{value:[R*100],onValueChange:([P])=>d({marginByCategory:{...u.marginByCategory,[E.id]:P/100}}),min:0,max:100,step:1})]},E.id)})})]})]}),s.jsxs(Ke,{title:"CA par Client",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-4",children:[s.jsxs(lt,{onValueChange:h,children:[s.jsx(st,{className:"w-60",children:s.jsx(ct,{placeholder:"Ajouter client CRM..."})}),s.jsx(ot,{children:k.map(E=>{const R=a.find(P=>P.id===E.category_id);return s.jsxs(De,{value:E.id,children:[E.company_name," ",s.jsxs("span",{className:"text-muted-foreground text-xs ml-1",children:["(",ZT(R==null?void 0:R.name),")"]})]},E.id)})})]}),!N&&s.jsxs(ne,{size:"sm",variant:"outline",onClick:m,children:[s.jsx(qt,{className:"h-3 w-3 mr-1"})," Canal B2C"]}),s.jsxs(Pe,{variant:"secondary",className:"text-xs",children:[u.entries.length," entre(s)"]}),s.jsxs(ne,{size:"sm",variant:"outline",onClick:()=>c(E=>E==="none"?"desc":E==="desc"?"asc":"none"),className:"ml-auto",children:[l==="desc"?s.jsx(Fc,{className:"h-3 w-3 mr-1"}):l==="asc"?s.jsx(XI,{className:"h-3 w-3 mr-1"}):s.jsx(YI,{className:"h-3 w-3 mr-1"}),s.jsx("span",{className:"text-xs",children:"Trier CA"})]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Kt,{children:[s.jsx(Gt,{children:s.jsxs(_e,{children:[s.jsx(ce,{className:"text-xs min-w-[120px]",children:"Client"}),s.jsx(ce,{className:"text-xs w-12",children:"Canal"}),s.jsx(ce,{className:"text-xs text-right w-14",children:"Marge"}),s.jsx(ce,{className:"text-xs text-right w-16",children:"% Croiss."}),s.jsx(ce,{className:"text-xs text-center w-10"}),s.jsx(ce,{className:"text-xs text-right w-20",children:"CA N-1"}),r.map(E=>s.jsx(ce,{className:"text-xs text-right min-w-[85px]",children:E},E)),s.jsx(ce,{className:"text-xs text-right min-w-[85px]",children:"Total"}),s.jsx(ce,{className:"text-xs text-right min-w-[70px]",children:"Marge "}),s.jsx(ce,{className:"text-xs w-10"})]})}),s.jsxs(Yt,{children:[u.entries.length===0&&s.jsx(_e,{children:s.jsxs(W,{colSpan:r.length+9,className:"text-center text-muted-foreground py-6",children:[s.jsx(xi,{className:"h-8 w-8 mx-auto mb-2 opacity-30"}),s.jsx("p",{className:"text-sm",children:"Ajoutez des clients CRM ou un canal B2C"})]})}),C.map(E=>s.jsxs(s.Fragment,{children:[s.jsx(_e,{className:"bg-muted/30",children:s.jsxs(W,{colSpan:r.length+9,className:"py-1",children:[s.jsx(Pe,{variant:E.channel==="B2C"?"default":"outline",className:"text-[10px]",children:E.channel}),s.jsx("span",{className:"text-xs text-muted-foreground ml-2",children:re(r.reduce((R,P)=>R+E.entries.reduce((T,I)=>T+g(I,P),0),0),!0)})]})},`h-${E.channel}`),E.entries.map(R=>{const P=r.reduce((D,B)=>D+g(R,B),0),T=p(R),I=P*T,M=R.individualGrowthRate!==null&&R.individualGrowthRate!==void 0;return s.jsxs(_e,{children:[s.jsx(W,{className:"font-medium text-xs",children:R.clientName}),s.jsx(W,{children:s.jsx(Pe,{variant:"outline",className:"text-[10px]",children:R.channel})}),s.jsxs(W,{className:"text-right font-mono text-[10px] text-muted-foreground",children:[(T*100).toFixed(0),"%"]}),s.jsx(W,{className:"text-right",children:s.jsx(xe,{type:"number",value:M?(R.individualGrowthRate*100).toFixed(0):"",onChange:D=>f(R.clientId,{individualGrowthRate:D.target.value===""?null:Number(D.target.value)/100}),className:"h-7 w-14 text-right text-[10px] ml-auto",placeholder:`${(u.growthRate*100).toFixed(0)}`})}),s.jsx(W,{className:"text-center",children:s.jsx(ne,{size:"sm",variant:"ghost",onClick:()=>y(R.clientId),title:"Appliquer la croissance",className:"h-6 w-6 p-0",children:s.jsx(Vh,{className:"h-3 w-3"})})}),s.jsx(W,{className:"text-right",children:s.jsx(xe,{type:"number",value:R.baseRevenue||"",onChange:D=>f(R.clientId,{baseRevenue:Number(D.target.value)||0}),className:"h-7 w-20 text-right text-[10px] ml-auto",placeholder:"0"})}),r.map(D=>{var Z;const B=((Z=R.revenueByYear)==null?void 0:Z[D])!==void 0,z=g(R,D);return s.jsx(W,{className:"text-right p-1",children:s.jsx(xe,{type:"number",value:B?R.revenueByYear[D]:"",onChange:J=>{const se=J.target.value,U={...R.revenueByYear};se===""?delete U[D]:U[D]=Number(se),f(R.clientId,{revenueByYear:U})},className:`h-7 w-20 text-right text-[10px] ml-auto ${B?"border-primary/50":""}`,placeholder:re(z,!0)})},D)}),s.jsx(W,{className:"text-right font-mono text-xs font-medium",children:re(P,!0)}),s.jsx(W,{className:"text-right font-mono text-xs text-muted-foreground",children:re(I,!0)}),s.jsx(W,{children:s.jsx(ne,{size:"sm",variant:"ghost",onClick:()=>d({entries:u.entries.filter(D=>D.clientId!==R.clientId)}),children:s.jsx(nr,{className:"h-3 w-3 text-destructive"})})})]},R.clientId)})]})),u.entries.length>0&&s.jsx(s.Fragment,{children:s.jsxs(_e,{className:"font-semibold border-t-2",children:[s.jsx(W,{colSpan:6,children:"Total CA"}),r.map((E,R)=>s.jsx(W,{className:"text-right font-mono text-xs",children:re(v[R],!0)},E)),s.jsx(W,{className:"text-right font-mono text-xs",children:re(x,!0)}),s.jsx(W,{className:"text-right font-mono text-xs",children:re(_,!0)}),s.jsx(W,{})]})})]})]})})]})]})}function hf({pageTitle:e,fileName:t}){const r=()=>{window.print()};return s.jsxs(ne,{variant:"outline",size:"sm",onClick:r,children:[s.jsx(sp,{className:"h-4 w-4 mr-1"}),"PDF"]})}const xNe=w.createContext(!1);function is({children:e,tabKey:t}){const{getTabPermission:r}=Xn(),a=r(t)==="read";return s.jsx(xNe.Provider,{value:a,children:s.jsxs("div",{className:a?"read-only-mode":"",children:[a&&s.jsx("div",{className:"mb-4 p-3 bg-muted border border-border rounded-md text-sm text-muted-foreground text-center font-medium",children:" Mode lecture seule  Vous pouvez consulter les donnes mais pas les modifier"}),e]})})}var Nw="rovingFocusGroup.onEntryFocus",bNe={bubbles:!1,cancelable:!0},yp="RovingFocusGroup",[Z_,$5,wNe]=px(yp),[jNe,B0]=Yn(yp,[wNe]),[_Ne,SNe]=jNe(yp),I5=w.forwardRef((e,t)=>s.jsx(Z_.Provider,{scope:e.__scopeRovingFocusGroup,children:s.jsx(Z_.Slot,{scope:e.__scopeRovingFocusGroup,children:s.jsx(CNe,{...e,ref:t})})}));I5.displayName=yp;var CNe=w.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:a=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...f}=e,h=w.useRef(null),m=dt(t,h),y=qd(i),[g,p]=sa({prop:o,defaultProp:l??null,onChange:c,caller:yp}),[v,x]=w.useState(!1),b=tn(u),_=$5(r),j=w.useRef(!1),[S,C]=w.useState(0);return w.useEffect(()=>{const k=h.current;if(k)return k.addEventListener(Nw,b),()=>k.removeEventListener(Nw,b)},[b]),s.jsx(_Ne,{scope:r,orientation:n,dir:y,loop:a,currentTabStopId:g,onItemFocus:w.useCallback(k=>p(k),[p]),onItemShiftTab:w.useCallback(()=>x(!0),[]),onFocusableItemAdd:w.useCallback(()=>C(k=>k+1),[]),onFocusableItemRemove:w.useCallback(()=>C(k=>k-1),[]),children:s.jsx(Ve.div,{tabIndex:v||S===0?-1:0,"data-orientation":n,...f,ref:m,style:{outline:"none",...e.style},onMouseDown:Oe(e.onMouseDown,()=>{j.current=!0}),onFocus:Oe(e.onFocus,k=>{const N=!j.current;if(k.target===k.currentTarget&&N&&!v){const A=new CustomEvent(Nw,bNe);if(k.currentTarget.dispatchEvent(A),!A.defaultPrevented){const O=_().filter(I=>I.focusable),E=O.find(I=>I.active),R=O.find(I=>I.id===g),T=[E,R,...O].filter(Boolean).map(I=>I.ref.current);B5(T,d)}}j.current=!1}),onBlur:Oe(e.onBlur,()=>x(!1))})})}),D5="RovingFocusGroupItem",L5=w.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:a=!1,tabStopId:i,children:o,...l}=e,c=Ki(),u=i||c,d=SNe(D5,r),f=d.currentTabStopId===u,h=$5(r),{onFocusableItemAdd:m,onFocusableItemRemove:y,currentTabStopId:g}=d;return w.useEffect(()=>{if(n)return m(),()=>y()},[n,m,y]),s.jsx(Z_.ItemSlot,{scope:r,id:u,focusable:n,active:a,children:s.jsx(Ve.span,{tabIndex:f?0:-1,"data-orientation":d.orientation,...l,ref:t,onMouseDown:Oe(e.onMouseDown,p=>{n?d.onItemFocus(u):p.preventDefault()}),onFocus:Oe(e.onFocus,()=>d.onItemFocus(u)),onKeyDown:Oe(e.onKeyDown,p=>{if(p.key==="Tab"&&p.shiftKey){d.onItemShiftTab();return}if(p.target!==p.currentTarget)return;const v=PNe(p,d.orientation,d.dir);if(v!==void 0){if(p.metaKey||p.ctrlKey||p.altKey||p.shiftKey)return;p.preventDefault();let b=h().filter(_=>_.focusable).map(_=>_.ref.current);if(v==="last")b.reverse();else if(v==="prev"||v==="next"){v==="prev"&&b.reverse();const _=b.indexOf(p.currentTarget);b=d.loop?ENe(b,_+1):b.slice(_+1)}setTimeout(()=>B5(b))}}),children:typeof o=="function"?o({isCurrentTabStop:f,hasTabStop:g!=null}):o})})});L5.displayName=D5;var NNe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function kNe(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function PNe(e,t,r){const n=kNe(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return NNe[n]}function B5(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function ENe(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var F5=I5,z5=L5,F0="Tabs",[ANe,rTe]=Yn(F0,[B0]),U5=B0(),[ONe,zN]=ANe(F0),V5=w.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:a,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=e,d=qd(l),[f,h]=sa({prop:n,onChange:a,defaultProp:i??"",caller:F0});return s.jsx(ONe,{scope:r,baseId:Ki(),value:f,onValueChange:h,orientation:o,dir:d,activationMode:c,children:s.jsx(Ve.div,{dir:d,"data-orientation":o,...u,ref:t})})});V5.displayName=F0;var W5="TabsList",H5=w.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...a}=e,i=zN(W5,r),o=U5(r);return s.jsx(F5,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:n,children:s.jsx(Ve.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});H5.displayName=W5;var q5="TabsTrigger",K5=w.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:a=!1,...i}=e,o=zN(q5,r),l=U5(r),c=X5(o.baseId,n),u=Z5(o.baseId,n),d=n===o.value;return s.jsx(z5,{asChild:!0,...l,focusable:!a,active:d,children:s.jsx(Ve.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...i,ref:t,onMouseDown:Oe(e.onMouseDown,f=>{!a&&f.button===0&&f.ctrlKey===!1?o.onValueChange(n):f.preventDefault()}),onKeyDown:Oe(e.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(n)}),onFocus:Oe(e.onFocus,()=>{const f=o.activationMode!=="manual";!d&&!a&&f&&o.onValueChange(n)})})})});K5.displayName=q5;var G5="TabsContent",Y5=w.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:a,children:i,...o}=e,l=zN(G5,r),c=X5(l.baseId,n),u=Z5(l.baseId,n),d=n===l.value,f=w.useRef(d);return w.useEffect(()=>{const h=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(h)},[]),s.jsx(oa,{present:a||d,children:({present:h})=>s.jsx(Ve.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!h,id:u,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0},children:h&&i})})});Y5.displayName=G5;function X5(e,t){return`${e}-trigger-${t}`}function Z5(e,t){return`${e}-content-${t}`}var TNe=V5,Q5=H5,J5=K5,ez=Y5;const Ya=TNe,Na=w.forwardRef(({className:e,...t},r)=>s.jsx(Q5,{ref:r,className:ue("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));Na.displayName=Q5.displayName;const Ct=w.forwardRef(({className:e,...t},r)=>s.jsx(J5,{ref:r,className:ue("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",e),...t}));Ct.displayName=J5.displayName;const Mt=w.forwardRef(({className:e,...t},r)=>s.jsx(ez,{ref:r,className:ue("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Mt.displayName=ez.displayName;const RNe=[{id:"kpis",label:"KPIs Produits",elementId:"product-kpis"},{id:"revenue-viz",label:"Visualisation CA",elementId:"product-revenue-viz"},{id:"revenue-chart",label:"Projection CA",elementId:"product-revenue-chart"},{id:"pricing",label:"Pricing Produits",elementId:"product-pricing"},{id:"volumes",label:"Volumes par Anne",elementId:"product-volumes"}];function MNe(){var b;const{state:e,computed:t,updateProducts:r,addProduct:n,removeProduct:a,saveAll:i,setRevenueMode:o,updateGlobalRevenueConfig:l,updateClientRevenueConfig:c}=rs(),u=e.scenarioSettings,d=Array.from({length:u.durationYears},(_,j)=>u.startYear+j),f=_=>{n(_)},h=_=>{const j=e.products.map(S=>S.id===_.id?_:S);r(j)},m=(_,j,S,C)=>{const k=e.products.map(N=>{if(N.id!==_)return N;const A=N.volumesByChannel||{B2C:{},B2B:{},OEM:{}},O={...A,[S]:{...A[S],[j]:C}},E=(O.B2C[j]||0)+(O.B2B[j]||0)+(O.OEM[j]||0);return{...N,volumesByChannel:O,volumesByYear:{...N.volumesByYear,[j]:E}}});r(k)},y=t.totalDevCost,g=d[d.length-1],p=((b=t.revenueByYear.find(_=>_.year===g))==null?void 0:b.revenue)||0,v=t.revenueByYear.length>0?t.revenueByYear.reduce((_,j)=>_+(j.revenue>0?(j.revenue-j.cogs)/j.revenue:0),0)/t.revenueByYear.length:0,x=d.map(_=>{const j=t.revenueByYear.find(S=>S.year===_);return{year:_,revenue:((j==null?void 0:j.revenue)||0)/1e3,cogs:((j==null?void 0:j.cogs)||0)/1e3,margin:(((j==null?void 0:j.revenue)||0)-((j==null?void 0:j.cogs)||0))/1e3}});return s.jsx(is,{tabKey:"product-plan",children:s.jsxs("div",{className:"space-y-6",children:[s.jsx(Fs,{image:"ccd-evo",title:"Plan Produit",subtitle:"Source unique du chiffre d'affaires et des investissements R&D",height:"sm"}),s.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 p-4 bg-muted/30 rounded-lg border",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("span",{className:"text-sm font-medium",children:"Mode de calcul du CA :"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(ne,{variant:e.revenueMode==="by-product"?"default":"outline",size:"sm",onClick:()=>o("by-product"),children:[s.jsx(aD,{className:"h-4 w-4 mr-1"}),"Par Produit"]}),s.jsxs(ne,{variant:e.revenueMode==="by-channel-global"?"default":"outline",size:"sm",onClick:()=>o("by-channel-global"),children:[s.jsx(jl,{className:"h-4 w-4 mr-1"}),"CA Global par Canal"]}),s.jsxs(ne,{variant:e.revenueMode==="by-client"?"default":"outline",size:"sm",onClick:()=>o("by-client"),children:[s.jsx(xi,{className:"h-4 w-4 mr-1"}),"Par Client"]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Pe,{variant:e.revenueMode==="by-product"?"default":e.revenueMode==="by-channel-global"?"secondary":"outline",children:e.revenueMode==="by-product"?"Dtail produits":e.revenueMode==="by-channel-global"?"Global canaux":"Par client"}),s.jsx(hf,{pageTitle:"Plan Produit",sections:RNe,fileName:"Plan_Produit"}),s.jsx(Xd,{onSave:i,hasUnsavedChanges:e.hasUnsavedChanges,lastSaved:e.lastSaved?new Date(e.lastSaved):null})]})]}),s.jsxs("div",{id:"product-kpis",className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsx(kt,{label:"Investissement R&D",value:re(y,!0),subValue:`${e.products.filter(_=>_.devCost>0).length} produits`}),s.jsx(kt,{label:`CA ${g}`,value:re(p,!0),subValue:"Projection",trend:"up"}),s.jsx(kt,{label:"Marge Brute Moy.",value:nn(v),subValue:"Sur la priode"}),s.jsx(kt,{label:"Produits Actifs",value:e.products.length.toString(),subValue:"En portefeuille"})]}),s.jsx("div",{id:"product-revenue-chart",children:s.jsx(Ke,{title:"Projection du Chiffre d'Affaires",children:s.jsx("div",{className:"h-64",children:s.jsx(wr,{width:"100%",height:"100%",children:s.jsxs(es,{data:x,children:[s.jsx(Nr,{strokeDasharray:"3 3"}),s.jsx(Jt,{dataKey:"year"}),s.jsx(Vt,{tickFormatter:_=>`${_}k`}),s.jsx(Nt,{formatter:_=>`${_.toFixed(0)}k`}),s.jsx(Br,{}),s.jsx(Wt,{dataKey:"revenue",name:"CA",fill:"hsl(var(--primary))"}),s.jsx(Wt,{dataKey:"margin",name:"Marge",fill:"hsl(150, 60%, 40%)"})]})})})})}),s.jsxs(Ya,{defaultValue:"visualization",className:"space-y-4",children:[s.jsxs(Na,{children:[s.jsxs(Ct,{value:"visualization",children:[s.jsx(cH,{className:"h-4 w-4 mr-1"}),"Visualisation CA"]}),s.jsxs(Ct,{value:"pricing",children:[s.jsx(fv,{className:"h-4 w-4 mr-1"}),"Pricing Produits"]}),s.jsxs(Ct,{value:"volumes",children:[s.jsx(rc,{className:"h-4 w-4 mr-1"}),"Volumes par Anne"]})]}),e.revenueMode==="by-channel-global"&&s.jsx(Mt,{value:"visualization",children:s.jsx(QG,{config:e.globalRevenueConfig,onChange:l,years:d})}),e.revenueMode==="by-client"&&s.jsx(Mt,{value:"visualization",children:s.jsx(yNe,{config:e.clientRevenueConfig,onChange:c,years:d})}),e.revenueMode==="by-product"&&s.jsx(Mt,{value:"visualization",children:s.jsx("div",{id:"product-revenue-viz",children:s.jsx(GSe,{products:e.products,years:d})})}),s.jsx(Mt,{value:"pricing",children:e.revenueMode==="by-product"?s.jsx("div",{id:"product-pricing",children:s.jsx(FZ,{products:e.products,onUpdateProduct:h,onAddProduct:f,onRemoveProduct:a})}):s.jsx(Ke,{title:"Pricing Produits",children:s.jsxs("div",{className:"p-8 text-center text-muted-foreground",children:[s.jsx(jl,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{className:"text-lg font-medium mb-2",children:"Mode CA Global actif"}),s.jsxs("p",{className:"text-sm",children:[`Le pricing par produit n'est pas disponible en mode "CA Global par Canal".`,s.jsx("br",{}),'Passez en mode "Par Produit" pour grer les prix individuellement.']})]})})}),s.jsx(Mt,{value:"volumes",children:s.jsx("div",{id:"product-volumes",children:s.jsx(YSe,{products:e.products,years:d,onChannelVolumeChange:m})})})]})]})})}const $Ne=["R&D","Production","Sales","Support","Admin"];function INe({roles:e,onEdit:t,onRemove:r,onAddToTeam:n}){return s.jsx("div",{className:"grid md:grid-cols-3 lg:grid-cols-5 gap-4",children:$Ne.map(a=>{const i=e.filter(o=>o.department===a);return s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx(Pe,{variant:"outline",children:a}),s.jsx(ne,{size:"sm",variant:"ghost",onClick:()=>n(a),children:s.jsx(qt,{className:"h-3 w-3"})})]}),s.jsx("div",{className:"space-y-2",children:i.map(o=>s.jsx(St,{className:"bg-muted/30",children:s.jsxs(Rt,{className:"p-3",children:[s.jsx("div",{className:"text-sm font-medium",children:o.title}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:[o.startYear,"  ",(o.annualCostLoaded/1e3).toFixed(0),"k"]}),s.jsxs("div",{className:"flex gap-1 mt-2",children:[s.jsx(ne,{size:"sm",variant:"ghost",className:"h-6 px-2",onClick:()=>t(o),children:s.jsx(sC,{className:"h-3 w-3"})}),s.jsx(ne,{size:"sm",variant:"ghost",className:"h-6 px-2 text-destructive",onClick:()=>r(o.id),children:s.jsx(nr,{className:"h-3 w-3"})})]})]})},o.id))})]},a)})})}var tz="Toggle",UN=w.forwardRef((e,t)=>{const{pressed:r,defaultPressed:n,onPressedChange:a,...i}=e,[o,l]=sa({prop:r,onChange:a,defaultProp:n??!1,caller:tz});return s.jsx(Ve.button,{type:"button","aria-pressed":o,"data-state":o?"on":"off","data-disabled":e.disabled?"":void 0,...i,ref:t,onClick:Oe(e.onClick,()=>{e.disabled||l(!o)})})});UN.displayName=tz;var rz=UN,sl="ToggleGroup",[nz,nTe]=Yn(sl,[B0]),az=B0(),VN=$.forwardRef((e,t)=>{const{type:r,...n}=e;if(r==="single"){const a=n;return s.jsx(DNe,{...a,ref:t})}if(r==="multiple"){const a=n;return s.jsx(LNe,{...a,ref:t})}throw new Error(`Missing prop \`type\` expected on \`${sl}\``)});VN.displayName=sl;var[iz,sz]=nz(sl),DNe=$.forwardRef((e,t)=>{const{value:r,defaultValue:n,onValueChange:a=()=>{},...i}=e,[o,l]=sa({prop:r,defaultProp:n??"",onChange:a,caller:sl});return s.jsx(iz,{scope:e.__scopeToggleGroup,type:"single",value:$.useMemo(()=>o?[o]:[],[o]),onItemActivate:l,onItemDeactivate:$.useCallback(()=>l(""),[l]),children:s.jsx(oz,{...i,ref:t})})}),LNe=$.forwardRef((e,t)=>{const{value:r,defaultValue:n,onValueChange:a=()=>{},...i}=e,[o,l]=sa({prop:r,defaultProp:n??[],onChange:a,caller:sl}),c=$.useCallback(d=>l((f=[])=>[...f,d]),[l]),u=$.useCallback(d=>l((f=[])=>f.filter(h=>h!==d)),[l]);return s.jsx(iz,{scope:e.__scopeToggleGroup,type:"multiple",value:o,onItemActivate:c,onItemDeactivate:u,children:s.jsx(oz,{...i,ref:t})})});VN.displayName=sl;var[BNe,FNe]=nz(sl),oz=$.forwardRef((e,t)=>{const{__scopeToggleGroup:r,disabled:n=!1,rovingFocus:a=!0,orientation:i,dir:o,loop:l=!0,...c}=e,u=az(r),d=qd(o),f={role:"group",dir:d,...c};return s.jsx(BNe,{scope:r,rovingFocus:a,disabled:n,children:a?s.jsx(F5,{asChild:!0,...u,orientation:i,dir:d,loop:l,children:s.jsx(Ve.div,{...f,ref:t})}):s.jsx(Ve.div,{...f,ref:t})})}),$y="ToggleGroupItem",lz=$.forwardRef((e,t)=>{const r=sz($y,e.__scopeToggleGroup),n=FNe($y,e.__scopeToggleGroup),a=az(e.__scopeToggleGroup),i=r.value.includes(e.value),o=n.disabled||e.disabled,l={...e,pressed:i,disabled:o},c=$.useRef(null);return n.rovingFocus?s.jsx(z5,{asChild:!0,...a,focusable:!o,active:i,ref:c,children:s.jsx(QT,{...l,ref:t})}):s.jsx(QT,{...l,ref:t})});lz.displayName=$y;var QT=$.forwardRef((e,t)=>{const{__scopeToggleGroup:r,value:n,...a}=e,i=sz($y,r),o={role:"radio","aria-checked":e.pressed,"aria-pressed":void 0},l=i.type==="single"?o:void 0;return s.jsx(UN,{...l,...a,ref:t,onPressedChange:c=>{c?i.onItemActivate(n):i.onItemDeactivate(n)}})}),cz=VN,uz=lz;const dz=Dd("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground"},size:{default:"h-10 px-3",sm:"h-9 px-2.5",lg:"h-11 px-5"}},defaultVariants:{variant:"default",size:"default"}}),zNe=w.forwardRef(({className:e,variant:t,size:r,...n},a)=>s.jsx(rz,{ref:a,className:ue(dz({variant:t,size:r,className:e})),...n}));zNe.displayName=rz.displayName;const fz=w.createContext({size:"default",variant:"default"}),hz=w.forwardRef(({className:e,variant:t,size:r,children:n,...a},i)=>s.jsx(cz,{ref:i,className:ue("flex items-center justify-center gap-1",e),...a,children:s.jsx(fz.Provider,{value:{variant:t,size:r},children:n})}));hz.displayName=cz.displayName;const Q_=w.forwardRef(({className:e,children:t,variant:r,size:n,...a},i)=>{const o=w.useContext(fz);return s.jsx(uz,{ref:i,className:ue(dz({variant:o.variant||r,size:o.size||n}),e),...a,children:t})});Q_.displayName=uz.displayName;var z0="Dialog",[mz,pz]=Yn(z0),[UNe,Pi]=mz(z0),gz=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:a,onOpenChange:i,modal:o=!0}=e,l=w.useRef(null),c=w.useRef(null),[u,d]=sa({prop:n,defaultProp:a??!1,onChange:i,caller:z0});return s.jsx(UNe,{scope:t,triggerRef:l,contentRef:c,contentId:Ki(),titleId:Ki(),descriptionId:Ki(),open:u,onOpenChange:d,onOpenToggle:w.useCallback(()=>d(f=>!f),[d]),modal:o,children:r})};gz.displayName=z0;var vz="DialogTrigger",yz=w.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Pi(vz,r),i=dt(t,a.triggerRef);return s.jsx(Ve.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":qN(a.open),...n,ref:i,onClick:Oe(e.onClick,a.onOpenToggle)})});yz.displayName=vz;var WN="DialogPortal",[VNe,xz]=mz(WN,{forceMount:void 0}),bz=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:a}=e,i=Pi(WN,t);return s.jsx(VNe,{scope:t,forceMount:r,children:w.Children.map(n,o=>s.jsx(oa,{present:r||i.open,children:s.jsx(ap,{asChild:!0,container:a,children:o})}))})};bz.displayName=WN;var Iy="DialogOverlay",wz=w.forwardRef((e,t)=>{const r=xz(Iy,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,i=Pi(Iy,e.__scopeDialog);return i.modal?s.jsx(oa,{present:n||i.open,children:s.jsx(HNe,{...a,ref:t})}):null});wz.displayName=Iy;var WNe=tc("DialogOverlay.RemoveScroll"),HNe=w.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Pi(Iy,r);return s.jsx($0,{as:WNe,allowPinchZoom:!0,shards:[a.contentRef],children:s.jsx(Ve.div,{"data-state":qN(a.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),dc="DialogContent",jz=w.forwardRef((e,t)=>{const r=xz(dc,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,i=Pi(dc,e.__scopeDialog);return s.jsx(oa,{present:n||i.open,children:i.modal?s.jsx(qNe,{...a,ref:t}):s.jsx(KNe,{...a,ref:t})})});jz.displayName=dc;var qNe=w.forwardRef((e,t)=>{const r=Pi(dc,e.__scopeDialog),n=w.useRef(null),a=dt(t,r.contentRef,n);return w.useEffect(()=>{const i=n.current;if(i)return BN(i)},[]),s.jsx(_z,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Oe(e.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=r.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Oe(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:Oe(e.onFocusOutside,i=>i.preventDefault())})}),KNe=w.forwardRef((e,t)=>{const r=Pi(dc,e.__scopeDialog),n=w.useRef(!1),a=w.useRef(!1);return s.jsx(_z,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((u=r.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),_z=w.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,...o}=e,l=Pi(dc,r),c=w.useRef(null),u=dt(t,c);return LN(),s.jsxs(s.Fragment,{children:[s.jsx(R0,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:s.jsx(Id,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":qN(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),s.jsxs(s.Fragment,{children:[s.jsx(YNe,{titleId:l.titleId}),s.jsx(ZNe,{contentRef:c,descriptionId:l.descriptionId})]})]})}),HN="DialogTitle",Sz=w.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Pi(HN,r);return s.jsx(Ve.h2,{id:a.titleId,...n,ref:t})});Sz.displayName=HN;var Cz="DialogDescription",Nz=w.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Pi(Cz,r);return s.jsx(Ve.p,{id:a.descriptionId,...n,ref:t})});Nz.displayName=Cz;var kz="DialogClose",Pz=w.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Pi(kz,r);return s.jsx(Ve.button,{type:"button",...n,ref:t,onClick:Oe(e.onClick,()=>a.onOpenChange(!1))})});Pz.displayName=kz;function qN(e){return e?"open":"closed"}var Ez="DialogTitleWarning",[GNe,Az]=hW(Ez,{contentName:dc,titleName:HN,docsSlug:"dialog"}),YNe=({titleId:e})=>{const t=Az(Ez),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return w.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},XNe="DialogDescriptionWarning",ZNe=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Az(XNe).contentName}}.`;return w.useEffect(()=>{var i;const a=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},Oz=gz,Tz=yz,Rz=bz,KN=wz,GN=jz,YN=Sz,XN=Nz,ZN=Pz;const mr=Oz,Cd=Tz,QNe=Rz,Mz=w.forwardRef(({className:e,...t},r)=>s.jsx(KN,{ref:r,className:ue("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));Mz.displayName=KN.displayName;const ar=w.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(QNe,{children:[s.jsx(Mz,{}),s.jsxs(GN,{ref:n,className:ue("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,s.jsxs(ZN,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[s.jsx(_i,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));ar.displayName=GN.displayName;const ir=({className:e,...t})=>s.jsx("div",{className:ue("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});ir.displayName="DialogHeader";const Ho=({className:e,...t})=>s.jsx("div",{className:ue("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Ho.displayName="DialogFooter";const sr=w.forwardRef(({className:e,...t},r)=>s.jsx(YN,{ref:r,className:ue("text-lg font-semibold leading-none tracking-tight",e),...t}));sr.displayName=YN.displayName;const JNe=w.forwardRef(({className:e,...t},r)=>s.jsx(XN,{ref:r,className:ue("text-sm text-muted-foreground",e),...t}));JNe.displayName=XN.displayName;const eke=["R&D","Production","Sales","Support","Admin"],tke=[2025,2026,2027,2028,2029,2030],rke=[{id:"kpis",label:"KPIs RH",elementId:"org-kpis"},{id:"payroll-chart",label:"volution Masse Salariale",elementId:"org-payroll-chart"},{id:"hiring-plan",label:"Plan de Recrutement",elementId:"org-hiring-plan"},{id:"team",label:"quipe / Organigramme",elementId:"org-team"}];function nke(){var _;const{state:e,computed:t,updateRoles:r,addRole:n,removeRole:a,saveAll:i}=rs(),[o,l]=w.useState("orgchart"),[c,u]=w.useState(null),[d,f]=w.useState(!1),[h,m]=w.useState({}),y=j=>{const S={id:`role-${Date.now()}`,title:"Nouveau Poste",department:j||"R&D",startYear:2026,annualCostLoaded:5e4};m(S),u(null),f(!0)},g=j=>{u(j),m(j),f(!0)},p=()=>{if(h.title&&h.department){if(c){const j=e.roles.map(S=>S.id===c.id?{...S,...h}:S);r(j)}else n(h);f(!1),m({}),u(null)}},v=t.payrollByYear.map(j=>({year:j.year,payroll:j.payroll/1e3,headcount:j.headcount})),x=e.roles.filter(j=>j.startYear>2025),b=tke.slice(1).map(j=>({year:j,count:e.roles.filter(S=>S.startYear===j).length,cost:e.roles.filter(S=>S.startYear===j).reduce((S,C)=>S+C.annualCostLoaded,0)})).filter(j=>j.count>0);return s.jsx(is,{tabKey:"organisation",children:s.jsxs("div",{className:"space-y-6",children:[s.jsx(Fs,{image:"rd",title:"Organisation & Masse Salariale",subtitle:"Structure de l'quipe et projection des cots RH",height:"sm"}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(Pe,{variant:"outline",className:"text-xs",children:[t.totalHeadcount," collaborateurs"]}),s.jsxs(hz,{type:"single",value:o,onValueChange:j=>j&&l(j),children:[s.jsx(Q_,{value:"orgchart","aria-label":"Vue organigramme",children:s.jsx(vH,{className:"h-4 w-4"})}),s.jsx(Q_,{value:"table","aria-label":"Vue tableau",children:s.jsx(CH,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(hf,{pageTitle:"Organisation & RH",sections:rke,fileName:"Organisation_RH"}),s.jsxs(ne,{variant:"outline",size:"sm",onClick:()=>y(),children:[s.jsx(qt,{className:"h-4 w-4 mr-1"}),"Ajouter Poste"]}),s.jsx(Xd,{onSave:i,hasUnsavedChanges:e.hasUnsavedChanges,lastSaved:e.lastSaved?new Date(e.lastSaved):null})]})]}),s.jsxs("div",{id:"org-kpis",className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsx(kt,{label:"Masse Salariale 2025",value:re(t.currentPayroll,!0),subValue:`${t.totalHeadcount} personnes`}),s.jsx(kt,{label:"Recrutements Prvus",value:x.length.toString(),subValue:"2026-2030"}),s.jsx(kt,{label:"Cot Moyen / ETP",value:re(t.currentPayroll/(t.totalHeadcount||1),!0),subValue:"Charg"}),s.jsx(kt,{label:"Masse Salariale 2030",value:re(((_=t.payrollByYear.find(j=>j.year===2030))==null?void 0:_.payroll)||0,!0),subValue:"Projection",trend:"up"})]}),s.jsx("div",{id:"org-payroll-chart",children:s.jsx(Ke,{title:"volution de la Masse Salariale",children:s.jsx("div",{className:"h-64",children:s.jsx(wr,{width:"100%",height:"100%",children:s.jsxs(Ry,{data:v,children:[s.jsx(Nr,{strokeDasharray:"3 3"}),s.jsx(Jt,{dataKey:"year"}),s.jsx(Vt,{tickFormatter:j=>`${j}k`}),s.jsx(Nt,{formatter:(j,S)=>S==="payroll"?`${j.toFixed(0)}k`:j}),s.jsx(Br,{}),s.jsx(Mn,{type:"monotone",dataKey:"payroll",name:"Masse salariale",fill:"hsl(var(--primary))",stroke:"hsl(var(--primary))",fillOpacity:.3})]})})})})}),s.jsx("div",{id:"org-hiring-plan",children:b.length>0&&s.jsx(Ke,{title:"Plan de Recrutement",children:s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:b.map(({year:j,count:S,cost:C})=>s.jsxs("div",{className:"p-4 bg-muted/30 rounded-lg text-center",children:[s.jsx("div",{className:"text-lg font-semibold",children:j}),s.jsxs("div",{className:"text-2xl font-bold text-primary",children:["+",S]}),s.jsx("div",{className:"text-xs text-muted-foreground",children:re(C,!0)})]},j))})})}),s.jsx("div",{id:"org-team",children:o==="orgchart"?s.jsx(Ke,{title:"Organigramme",children:s.jsx(INe,{roles:e.roles,onEdit:g,onRemove:a,onAddToTeam:y})}):s.jsx(Ke,{title:"quipe & Recrutements",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Kt,{children:[s.jsx(Gt,{children:s.jsxs(_e,{children:[s.jsx(ce,{children:"Poste"}),s.jsx(ce,{children:"Dpartement"}),s.jsx(ce,{children:"Dbut"}),s.jsx(ce,{className:"text-right",children:"Cot Annuel"}),s.jsx(ce,{})]})}),s.jsx(Yt,{children:e.roles.map(j=>s.jsxs(_e,{className:j.startYear>2025?"bg-muted/20":"",children:[s.jsxs(W,{className:"font-medium",children:[j.title,j.startYear>2025&&s.jsx(Pe,{variant:"secondary",className:"ml-2 text-xs",children:"Prvu"})]}),s.jsx(W,{children:s.jsx(Pe,{variant:"outline",children:j.department})}),s.jsx(W,{children:j.startYear}),s.jsx(W,{className:"text-right font-mono-numbers",children:re(j.annualCostLoaded)}),s.jsx(W,{children:s.jsxs("div",{className:"flex gap-1",children:[s.jsx(ne,{size:"sm",variant:"ghost",onClick:()=>g(j),children:"Modifier"}),s.jsx(ne,{size:"sm",variant:"ghost",className:"text-destructive",onClick:()=>a(j.id),children:"Suppr."})]})})]},j.id))})]})})})}),s.jsx(mr,{open:d,onOpenChange:f,children:s.jsxs(ar,{children:[s.jsx(ir,{children:s.jsx(sr,{children:c?"Modifier le poste":"Nouveau poste"})}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Titre du poste"}),s.jsx(xe,{value:h.title||"",onChange:j=>m({...h,title:j.target.value}),placeholder:"Ex: Dveloppeur Full Stack"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Dpartement"}),s.jsxs(lt,{value:h.department,onValueChange:j=>m({...h,department:j}),children:[s.jsx(st,{children:s.jsx(ct,{placeholder:"Slectionner un dpartement"})}),s.jsx(ot,{children:eke.map(j=>s.jsx(De,{value:j,children:j},j))})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Anne de dbut"}),s.jsx(xe,{type:"number",value:h.startYear||2026,onChange:j=>m({...h,startYear:Number(j.target.value)}),min:2025,max:2030})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Cot annuel charg ()"}),s.jsx(xe,{type:"number",value:h.annualCostLoaded||5e4,onChange:j=>m({...h,annualCostLoaded:Number(j.target.value)}),step:1e3})]})]})]}),s.jsxs(Ho,{children:[s.jsx(ne,{variant:"outline",onClick:()=>f(!1),children:"Annuler"}),s.jsx(ne,{onClick:p,children:"Sauvegarder"})]})]})})]})})}const JT=["R&D","Production","Sales & Marketing","G&A","Logistics","IT & Tools"],eR=[{value:"fixed",label:"Fixe"},{value:"growth_rate",label:"Taux de croissance"},{value:"linked_to_revenue",label:"Li au CA"},{value:"linked_to_volume",label:"Li aux volumes"},{value:"step",label:"Par paliers"}],ake=["hsl(0, 85%, 50%)","hsl(0, 0%, 30%)","hsl(38, 92%, 50%)","hsl(210, 70%, 50%)","hsl(150, 60%, 40%)","hsl(280, 60%, 50%)"],ike=[0,.02,.03,.05,.07,.1,.15,.2],ske=[{id:"kpis",label:"KPIs Charges",elementId:"charges-kpis"},{id:"chart",label:"Graphique OPEX",elementId:"charges-chart"},{id:"breakdown",label:"Rpartition par Catgorie",elementId:"charges-breakdown"},{id:"table",label:"Tableau des Charges",elementId:"charges-table"}];function oke(){var P,T,I;const{state:e,computed:t,updateExpenses:r,addExpense:n,removeExpense:a,setOpexMode:i,updateSimpleOpexConfig:o,saveAll:l}=rs(),[c,u]=w.useState(null),[d,f]=w.useState({}),{startYear:h,durationYears:m}=e.scenarioSettings,y=Array.from({length:m},(M,D)=>h+D),[g,p]=w.useState(h),v=()=>{const M={id:`expense-${Date.now()}`,name:"Nouvelle Charge",category:"G&A",startYear:h,baseAnnualCost:1e4,evolutionType:"fixed",description:"Description de la charge"};n(M)},x=M=>{u(M.id),f(M)},b=()=>{if(c&&d){const M=e.expenses.map(D=>D.id===c?{...D,...d}:D);r(M),u(null),f({})}},_=()=>{u(null),f({})},j=y[0],S=y[y.length-1],C=((P=t.opexByYear.find(M=>M.year===j))==null?void 0:P.opex)||0,k=((T=t.opexByYear.find(M=>M.year===S))==null?void 0:T.opex)||0,N=((I=t.revenueByYear.find(M=>M.year===j))==null?void 0:I.revenue)||1,A=C/N,O=t.opexByYear.find(M=>M.year===g),E=O?JT.map((M,D)=>({name:M,value:O.byCategory[M]||0,color:ake[D]})).filter(M=>M.value>0):[],R=t.opexByYear.map(M=>({year:M.year,opex:M.opex/1e3}));return s.jsx(is,{tabKey:"charges",children:s.jsxs("div",{className:"space-y-6",children:[s.jsx(Fs,{image:"rd",title:"Structure des Charges",subtitle:"OPEX dtailles avec volution automatique",height:"sm"}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs(Pe,{variant:"outline",className:"text-xs",children:[e.opexMode==="detailed"?`${e.expenses.length} postes de charges`:"Mode simplifi","  volution automatique"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(hf,{pageTitle:"Structure des Charges",sections:ske,fileName:"Charges_OPEX"}),e.opexMode==="detailed"&&s.jsxs(ne,{variant:"outline",size:"sm",onClick:v,children:[s.jsx(qt,{className:"h-4 w-4 mr-1"}),"Ajouter Charge"]}),s.jsx(Xd,{onSave:l,hasUnsavedChanges:e.hasUnsavedChanges,lastSaved:e.lastSaved?new Date(e.lastSaved):null})]})]}),s.jsx(Ke,{title:"Mode de Calcul",children:s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("button",{onClick:()=>i("detailed"),className:ue("flex flex-col items-center justify-center p-6 rounded-lg border-2 transition-all",e.opexMode==="detailed"?"border-primary bg-primary/5":"border-border hover:border-muted-foreground/50"),children:[s.jsx(SH,{className:ue("h-8 w-8 mb-2",e.opexMode==="detailed"?"text-primary":"text-muted-foreground")}),s.jsx("span",{className:ue("font-medium",e.opexMode==="detailed"?"text-primary":"text-foreground"),children:"Dtail par Poste"}),s.jsx("span",{className:"text-xs text-muted-foreground mt-1",children:"Saisie poste par poste avec volution spcifique"})]}),s.jsxs("button",{onClick:()=>i("simple"),className:ue("flex flex-col items-center justify-center p-6 rounded-lg border-2 transition-all",e.opexMode==="simple"?"border-primary bg-primary/5":"border-border hover:border-muted-foreground/50"),children:[s.jsx(fv,{className:ue("h-8 w-8 mb-2",e.opexMode==="simple"?"text-primary":"text-muted-foreground")}),s.jsx("span",{className:ue("font-medium",e.opexMode==="simple"?"text-primary":"text-foreground"),children:"Montant Global"}),s.jsx("span",{className:"text-xs text-muted-foreground mt-1",children:"Un montant total avec taux d'volution"})]})]})}),e.opexMode==="simple"&&s.jsxs(Ke,{title:"Configuration Simplifie",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Ne,{children:["Montant OPEX annuel de base (",j,")"]}),s.jsx(xe,{type:"number",value:e.simpleOpexConfig.baseAmount,onChange:M=>o({baseAmount:Number(M.target.value)}),className:"font-mono-numbers"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Montant total des charges oprationnelles pour l'anne de dpart"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ne,{children:"volution annuelle (%)"}),s.jsxs(lt,{value:(e.simpleOpexConfig.growthRate*100).toString(),onValueChange:M=>o({growthRate:Number(M)/100}),children:[s.jsx(st,{children:s.jsx(ct,{})}),s.jsx(ot,{children:ike.map(M=>s.jsxs(De,{value:(M*100).toString(),children:["+",(M*100).toFixed(0),"% / an"]},M))})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Taux d'augmentation appliqu chaque anne"})]})]}),s.jsxs("div",{className:"mt-6 border rounded-lg p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h4",{className:"text-sm font-medium",children:"OPEX Stratgiques"}),s.jsxs(ne,{variant:"outline",size:"sm",onClick:()=>{const M=[...e.simpleOpexConfig.strategicOpex||[]];M.push({id:`strat-${Date.now()}`,name:"Budget stratgique",amount:0}),o({strategicOpex:M})},children:[s.jsx(qt,{className:"h-3.5 w-3.5 mr-1"})," Ajouter"]})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Lignes de budget additionnel qui s'ajoutent au montant de base et sont indexes par l'volution annuelle."}),(e.simpleOpexConfig.strategicOpex||[]).length===0?s.jsx("p",{className:"text-sm text-muted-foreground text-center py-3",children:"Aucun OPEX stratgique ajout."}):s.jsxs(Kt,{children:[s.jsx(Gt,{children:s.jsxs(_e,{children:[s.jsx(ce,{children:"Libell"}),s.jsx(ce,{className:"text-right",children:"Montant annuel ()"}),s.jsx(ce,{className:"w-10"})]})}),s.jsxs(Yt,{children:[(e.simpleOpexConfig.strategicOpex||[]).map(M=>s.jsxs(_e,{children:[s.jsx(W,{children:s.jsx(xe,{value:M.name,onChange:D=>{const B=(e.simpleOpexConfig.strategicOpex||[]).map(z=>z.id===M.id?{...z,name:D.target.value}:z);o({strategicOpex:B})},className:"h-8 text-sm"})}),s.jsx(W,{children:s.jsx(xe,{type:"number",value:M.amount,onChange:D=>{const B=(e.simpleOpexConfig.strategicOpex||[]).map(z=>z.id===M.id?{...z,amount:Number(D.target.value)||0}:z);o({strategicOpex:B})},className:"h-8 text-sm font-mono-numbers text-right"})}),s.jsx(W,{children:s.jsx(ne,{variant:"ghost",size:"icon",className:"h-7 w-7 text-destructive",onClick:()=>{const D=(e.simpleOpexConfig.strategicOpex||[]).filter(B=>B.id!==M.id);o({strategicOpex:D})},children:s.jsx(nr,{className:"h-3.5 w-3.5"})})})]},M.id)),s.jsxs(_e,{children:[s.jsx(W,{className:"font-medium",children:"Total stratgique"}),s.jsx(W,{className:"text-right font-mono-numbers font-medium",children:re((e.simpleOpexConfig.strategicOpex||[]).reduce((M,D)=>M+D.amount,0))}),s.jsx(W,{})]})]})]})]}),s.jsxs("div",{className:"mt-6 p-4 bg-muted/50 rounded-lg",children:[s.jsx("h4",{className:"text-sm font-medium mb-3",children:"Projection sur la priode"}),s.jsx("div",{className:"flex gap-4 flex-wrap",children:y.map((M,D)=>{const B=(e.simpleOpexConfig.strategicOpex||[]).reduce((Z,J)=>Z+J.amount,0),z=(e.simpleOpexConfig.baseAmount+B)*Math.pow(1+e.simpleOpexConfig.growthRate,D);return s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xs text-muted-foreground",children:M}),s.jsx("div",{className:"font-mono-numbers text-sm font-medium",children:re(z,!0)})]},M)})})]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",id:"charges-kpis",children:[s.jsx(kt,{label:`OPEX ${j}`,value:re(C,!0),subValue:e.opexMode==="detailed"?`${e.expenses.length} postes`:"Mode simplifi"}),s.jsx(kt,{label:"Ratio OPEX / CA",value:nn(A),subValue:j.toString()}),s.jsx(kt,{label:`OPEX ${S}`,value:re(k,!0),subValue:"Projection",trend:"up"}),s.jsx(kt,{label:"Croissance OPEX",value:C>0?nn(k/C-1):"N/A",subValue:`${j}-${S}`})]}),s.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[s.jsx(Ke,{title:"volution des Charges",id:"charges-chart",children:s.jsx("div",{className:"h-64",children:s.jsx(wr,{width:"100%",height:"100%",children:s.jsxs(es,{data:R,children:[s.jsx(Nr,{strokeDasharray:"3 3"}),s.jsx(Jt,{dataKey:"year"}),s.jsx(Vt,{tickFormatter:M=>`${M}k`}),s.jsx(Nt,{formatter:M=>`${M.toFixed(0)}k`}),s.jsx(Wt,{dataKey:"opex",name:"OPEX",fill:"hsl(0, 85%, 50%)"})]})})})}),e.opexMode==="detailed"&&E.length>0&&s.jsxs(Ke,{title:"Rpartition par Catgorie",id:"charges-breakdown",children:[s.jsx("div",{className:"flex justify-end mb-4",children:s.jsxs(lt,{value:g.toString(),onValueChange:M=>p(parseInt(M)),children:[s.jsx(st,{className:"w-24 h-8",children:s.jsx(ct,{})}),s.jsx(ot,{children:y.map(M=>s.jsx(De,{value:M.toString(),children:M},M))})]})}),s.jsx("div",{className:"h-56",children:s.jsx(wr,{width:"100%",height:"100%",children:s.jsxs(DN,{children:[s.jsx(ki,{data:E,cx:"50%",cy:"50%",innerRadius:40,outerRadius:80,paddingAngle:2,dataKey:"value",label:({name:M})=>M,children:E.map((M,D)=>s.jsx(el,{fill:M.color},`cell-${D}`))}),s.jsx(Nt,{formatter:M=>re(M)})]})})}),s.jsxs("div",{className:"mt-2 text-center text-sm text-muted-foreground",children:["Total ",g,": ",s.jsx("span",{className:"font-mono-numbers font-medium",children:re((O==null?void 0:O.opex)||0,!0)})]})]}),e.opexMode==="simple"&&s.jsx(Ke,{title:"Rcapitulatif",id:"charges-breakdown",children:s.jsx("div",{className:"flex flex-col items-center justify-center h-56",children:s.jsxs("div",{className:"text-center space-y-4",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"Montant de base"}),s.jsx("div",{className:"text-3xl font-mono-numbers font-bold",children:re(e.simpleOpexConfig.baseAmount,!0)})]}),(e.simpleOpexConfig.strategicOpex||[]).length>0&&s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"+ OPEX Stratgiques"}),s.jsx("div",{className:"text-xl font-mono-numbers font-medium text-primary",children:re((e.simpleOpexConfig.strategicOpex||[]).reduce((M,D)=>M+D.amount,0),!0)})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"volution annuelle"}),s.jsxs("div",{className:"text-xl font-medium text-primary",children:["+",(e.simpleOpexConfig.growthRate*100).toFixed(0),"%"]})]}),s.jsx("div",{className:"text-xs text-muted-foreground pt-2",children:"Les donnes sont synchronises avec les autres modules (Financement, Synthse)"})]})})})]}),e.opexMode==="detailed"&&s.jsx(Ke,{title:"Dtail des Charges",id:"charges-table",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Kt,{children:[s.jsx(Gt,{children:s.jsxs(_e,{children:[s.jsx(ce,{children:"Charge"}),s.jsx(ce,{children:"Catgorie"}),s.jsx(ce,{children:"Type d'volution"}),s.jsx(ce,{className:"text-right",children:"Cot Base"}),s.jsx(ce,{children:"Paramtre"}),s.jsx(ce,{})]})}),s.jsx(Yt,{children:e.expenses.map(M=>{var D,B;return s.jsx(_e,{children:c===M.id?s.jsxs(s.Fragment,{children:[s.jsx(W,{children:s.jsx(xe,{value:d.name||"",onChange:z=>f({...d,name:z.target.value}),className:"h-8"})}),s.jsx(W,{children:s.jsxs(lt,{value:d.category,onValueChange:z=>f({...d,category:z}),children:[s.jsx(st,{className:"h-8 w-40",children:s.jsx(ct,{})}),s.jsx(ot,{children:JT.map(z=>s.jsx(De,{value:z,children:z},z))})]})}),s.jsx(W,{children:s.jsxs(lt,{value:d.evolutionType,onValueChange:z=>f({...d,evolutionType:z}),children:[s.jsx(st,{className:"h-8 w-40",children:s.jsx(ct,{})}),s.jsx(ot,{children:eR.map(z=>s.jsx(De,{value:z.value,children:z.label},z.value))})]})}),s.jsx(W,{children:s.jsx(xe,{type:"number",value:d.baseAnnualCost||0,onChange:z=>f({...d,baseAnnualCost:Number(z.target.value)}),className:"h-8 w-28 text-right"})}),s.jsxs(W,{children:[d.evolutionType==="growth_rate"&&s.jsx(xe,{type:"number",step:"0.01",value:(d.growthRate||0)*100,onChange:z=>f({...d,growthRate:Number(z.target.value)/100}),className:"h-8 w-20",placeholder:"%"}),d.evolutionType==="linked_to_revenue"&&s.jsx(xe,{type:"number",step:"0.01",value:(d.revenueRatio||0)*100,onChange:z=>f({...d,revenueRatio:Number(z.target.value)/100}),className:"h-8 w-20",placeholder:"% CA"})]}),s.jsx(W,{children:s.jsxs("div",{className:"flex gap-1",children:[s.jsx(ne,{size:"icon",variant:"ghost",onClick:b,children:s.jsx(Oo,{className:"h-4 w-4 text-accent"})}),s.jsx(ne,{size:"icon",variant:"ghost",onClick:_,children:s.jsx(_i,{className:"h-4 w-4 text-destructive"})})]})})]}):s.jsxs(s.Fragment,{children:[s.jsx(W,{className:"font-medium",children:s.jsxs("div",{className:"flex items-center gap-2",children:[M.name,M.description&&s.jsxs(L7,{children:[s.jsx(B7,{children:s.jsx(Wh,{className:"h-3 w-3 text-muted-foreground"})}),s.jsx(GD,{children:s.jsx("p",{className:"max-w-xs",children:M.description})})]})]})}),s.jsx(W,{children:s.jsx(Pe,{variant:"outline",children:M.category})}),s.jsx(W,{children:s.jsx(Pe,{variant:"secondary",children:(D=eR.find(z=>z.value===M.evolutionType))==null?void 0:D.label})}),s.jsx(W,{className:"text-right font-mono-numbers",children:re(M.baseAnnualCost)}),s.jsxs(W,{className:"text-muted-foreground text-sm",children:[M.evolutionType==="growth_rate"&&`+${nn(M.growthRate||0)}/an`,M.evolutionType==="linked_to_revenue"&&`${nn(M.revenueRatio||0)} du CA`,M.evolutionType==="linked_to_volume"&&`${M.volumeRatio||0}/unit`,M.evolutionType==="step"&&`${((B=M.steps)==null?void 0:B.length)||0} paliers`,M.evolutionType==="fixed"&&"Constant"]}),s.jsx(W,{children:s.jsxs("div",{className:"flex gap-1",children:[s.jsx(ne,{size:"icon",variant:"ghost",onClick:()=>x(M),children:s.jsx(sC,{className:"h-4 w-4"})}),s.jsx(ne,{size:"icon",variant:"ghost",onClick:()=>a(M.id),children:s.jsx(nr,{className:"h-4 w-4 text-destructive"})})]})})]})},M.id)})})]})})})]})})}function lke({clients:e,selectedId:t,onSelect:r,onRefresh:n}){const[a,i]=w.useState(""),o=e.filter(l=>l.company_name.toLowerCase().includes(a.toLowerCase())||(l.contact_email||"").toLowerCase().includes(a.toLowerCase())||(l.country||"").toLowerCase().includes(a.toLowerCase()));return s.jsxs(St,{children:[s.jsxs(er,{className:"pb-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(tr,{className:"text-lg",children:"Clients B2B"}),s.jsx(ne,{size:"sm",variant:"ghost",onClick:n,children:s.jsx(sD,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"relative mt-2",children:[s.jsx(xx,{className:"absolute left-2.5 top-2.5 h-3.5 w-3.5 text-muted-foreground"}),s.jsx(xe,{placeholder:"Rechercher...",value:a,onChange:l=>i(l.target.value),className:"pl-8 h-8 text-sm"})]})]}),s.jsxs(Rt,{className:"space-y-1 max-h-[500px] overflow-y-auto",children:[o.length===0&&s.jsx("p",{className:"text-sm text-muted-foreground",children:"Aucun client"}),o.map(l=>s.jsxs("button",{onClick:()=>r(l.id),className:ue("w-full text-left p-3 rounded-lg transition-colors",t===l.id?"bg-primary/10 border border-primary/30":"hover:bg-muted/50"),children:[s.jsx("div",{className:"font-medium text-sm",children:l.company_name}),s.jsxs("div",{className:"text-xs text-muted-foreground flex items-center gap-2",children:[l.country&&s.jsx("span",{children:l.country}),s.jsx(Pe,{variant:l.is_active?"default":"secondary",className:"text-[10px]",children:l.is_active?"Actif":"Inactif"})]})]},l.id))]})]})}var cke="Separator",tR="horizontal",uke=["horizontal","vertical"],$z=w.forwardRef((e,t)=>{const{decorative:r,orientation:n=tR,...a}=e,i=dke(n)?n:tR,l=r?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return s.jsx(Ve.div,{"data-orientation":i,...l,...a,ref:t})});$z.displayName=cke;function dke(e){return uke.includes(e)}var Iz=$z;const Yl=w.forwardRef(({className:e,orientation:t="horizontal",decorative:r=!0,...n},a)=>s.jsx(Iz,{ref:a,decorative:r,orientation:t,className:ue("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...n}));Yl.displayName=Iz.displayName;const qa=w.forwardRef(({className:e,...t},r)=>s.jsx("textarea",{className:ue("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));qa.displayName="Textarea";const rR={call:{label:"Appel",icon:AH,color:"bg-blue-500/10 text-blue-700"},email:{label:"Email",icon:iD,color:"bg-green-500/10 text-green-700"},meeting:{label:"RDV",icon:ql,color:"bg-purple-500/10 text-purple-700"},note:{label:"Note",icon:Bo,color:"bg-amber-500/10 text-amber-700"}};function fke({interactions:e,customerId:t,onCreate:r}){const[n,a]=w.useState(!1),[i,o]=w.useState({interaction_type:"note",subject:"",content:"",interaction_date:new Date().toISOString().slice(0,16)}),l=async()=>{i.subject.trim()&&(await r({customer_id:t,interaction_type:i.interaction_type,subject:i.subject,content:i.content||void 0,interaction_date:i.interaction_date||void 0}),a(!1),o({interaction_type:"note",subject:"",content:"",interaction_date:new Date().toISOString().slice(0,16)}))};return s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h4",{className:"font-medium text-sm",children:"Historique des interactions"}),s.jsxs(ne,{size:"sm",variant:"outline",onClick:()=>a(!0),children:[s.jsx(qt,{className:"h-3.5 w-3.5 mr-1"})," Ajouter"]})]}),e.length===0?s.jsx("p",{className:"text-sm text-muted-foreground",children:"Aucune interaction enregistre."}):s.jsxs("div",{className:"relative space-y-0",children:[s.jsx("div",{className:"absolute left-[15px] top-2 bottom-2 w-px bg-border"}),e.map(c=>{const u=rR[c.interaction_type]||rR.note,d=u.icon;return s.jsxs("div",{className:"relative flex gap-3 py-2",children:[s.jsx("div",{className:`z-10 flex items-center justify-center h-8 w-8 rounded-full ${u.color} shrink-0`,children:s.jsx(d,{className:"h-3.5 w-3.5"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium text-sm truncate",children:c.subject}),s.jsx(Pe,{variant:"outline",className:"text-[10px] shrink-0",children:u.label})]}),c.content&&s.jsx("p",{className:"text-xs text-muted-foreground mt-0.5 line-clamp-2",children:c.content}),s.jsx("span",{className:"text-[10px] text-muted-foreground",children:new Date(c.interaction_date).toLocaleString("fr-FR",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})})]})]},c.id)})]}),s.jsx(mr,{open:n,onOpenChange:a,children:s.jsxs(ar,{children:[s.jsx(ir,{children:s.jsx(sr,{children:"Nouvelle interaction"})}),s.jsxs("div",{className:"space-y-3 py-2",children:[s.jsxs(lt,{value:i.interaction_type,onValueChange:c=>o(u=>({...u,interaction_type:c})),children:[s.jsx(st,{children:s.jsx(ct,{})}),s.jsxs(ot,{children:[s.jsx(De,{value:"call",children:"Appel"}),s.jsx(De,{value:"email",children:"Email"}),s.jsx(De,{value:"meeting",children:"RDV"}),s.jsx(De,{value:"note",children:"Note"})]})]}),s.jsx(xe,{placeholder:"Sujet *",value:i.subject,onChange:c=>o(u=>({...u,subject:c.target.value}))}),s.jsx(qa,{placeholder:"Commentaire",value:i.content,onChange:c=>o(u=>({...u,content:c.target.value})),rows:3}),s.jsx(xe,{type:"datetime-local",value:i.interaction_date,onChange:c=>o(u=>({...u,interaction_date:c.target.value}))})]}),s.jsxs(Ho,{children:[s.jsx(ne,{variant:"outline",onClick:()=>a(!1),children:"Annuler"}),s.jsx(ne,{onClick:l,disabled:!i.subject.trim(),children:"Ajouter"})]})]})})]})}const Dy=[{key:"prospect",label:"Prospect",color:"bg-muted"},{key:"contacted",label:"Contact",color:"bg-blue-500/10"},{key:"discussion",label:"En discussion",color:"bg-amber-500/10"},{key:"offer_sent",label:"Offre envoye",color:"bg-purple-500/10"},{key:"negotiation",label:"Ngociation",color:"bg-orange-500/10"},{key:"won",label:"Gagn",color:"bg-green-500/10"},{key:"lost",label:"Perdu",color:"bg-destructive/10"}];function Dz(){const{toast:e}=tC(),{user:t}=Xn(),[r,n]=w.useState([]),[a,i]=w.useState([]),[o,l]=w.useState([]),[c,u]=w.useState([]),[d,f]=w.useState([]),[h,m]=w.useState([]),[y,g]=w.useState(!0),p=w.useCallback(async()=>{if(!t){g(!1);return}try{g(!0);const[N,A,O,E]=await Promise.all([he.from("customers").select("*").order("company_name"),he.from("customer_orders").select("*").order("order_date",{ascending:!1}),he.from("customer_opportunities").select("*").order("sort_order"),he.from("customer_interactions").select("*").order("interaction_date",{ascending:!1})]);N.data&&n(N.data),A.data&&u(A.data),O.data&&l(O.data),E.data&&i(E.data)}catch{}finally{g(!1)}},[t]);w.useEffect(()=>{p()},[p]);const v=w.useCallback(async N=>{if(!t)return null;try{const{data:A,error:O}=await he.from("customers").insert({...N,user_id:t.id}).select().single();if(O)throw O;const E=A;return n(R=>[...R,E].sort((P,T)=>P.company_name.localeCompare(T.company_name))),e({title:"Client cr",description:`${E.company_name} ajout.`}),E}catch{return e({title:"Erreur",description:"Impossible de crer le client.",variant:"destructive"}),null}},[t,e]),x=w.useCallback(async(N,A)=>{if(!t)return!1;try{const{error:O}=await he.from("customers").update(A).eq("id",N);if(O)throw O;return n(E=>E.map(R=>R.id===N?{...R,...A,updated_at:new Date().toISOString()}:R)),!0}catch{return e({title:"Erreur",description:"Impossible de mettre  jour.",variant:"destructive"}),!1}},[t,e]),b=w.useCallback(async N=>{if(!t)return!1;try{const{error:A}=await he.from("customers").delete().eq("id",N);if(A)throw A;return n(O=>O.filter(E=>E.id!==N)),e({title:"Client supprim"}),!0}catch{return e({title:"Erreur",variant:"destructive"}),!1}},[t,e]),_=w.useCallback(async N=>{if(!t)return null;try{const{data:A,error:O}=await he.from("customer_opportunities").insert({...N,user_id:t.id}).select().single();if(O)throw O;const E=A;return l(R=>[...R,E]),e({title:"Opportunit cre"}),E}catch{return e({title:"Erreur",variant:"destructive"}),null}},[t,e]),j=w.useCallback(async(N,A)=>{if(!t)return!1;try{const{error:O}=await he.from("customer_opportunities").update(A).eq("id",N);if(O)throw O;return l(E=>E.map(R=>R.id===N?{...R,...A}:R)),!0}catch{return e({title:"Erreur",variant:"destructive"}),!1}},[t,e]),S=w.useCallback(async N=>{if(!t)return!1;try{const{error:A}=await he.from("customer_opportunities").delete().eq("id",N);if(A)throw A;return l(O=>O.filter(E=>E.id!==N)),!0}catch{return!1}},[t]),C=w.useCallback(async N=>{if(!t)return null;try{const{data:A,error:O}=await he.from("customer_interactions").insert({...N,user_id:t.id}).select().single();if(O)throw O;const E=A;return i(R=>[E,...R]),await he.from("customers").update({last_interaction_date:E.interaction_date}).eq("id",N.customer_id),n(R=>R.map(P=>P.id===N.customer_id?{...P,last_interaction_date:E.interaction_date}:P)),e({title:"Interaction ajoute"}),E}catch{return e({title:"Erreur",variant:"destructive"}),null}},[t,e]),k=w.useCallback(async N=>{if(!t)return null;try{const{data:A,error:O}=await he.from("customer_orders").insert({...N,user_id:t.id}).select().single();if(O)throw O;const E=A;return u(R=>[E,...R]),e({title:"Commande cre"}),E}catch{return e({title:"Erreur",variant:"destructive"}),null}},[t,e]);return{customers:r,interactions:a,appointments:d,orders:c,opportunities:o,pricingTiers:h,isLoading:y,refreshData:p,createCustomer:v,updateCustomer:x,deleteCustomer:b,createOrder:k,createOpportunity:_,updateOpportunity:j,deleteOpportunity:S,createInteraction:C,getCustomerInteractions:N=>a.filter(A=>A.customer_id===N),getCustomerAppointments:N=>d.filter(A=>A.customer_id===N),getCustomerOrders:N=>c.filter(A=>A.customer_id===N),getCustomerOpportunities:N=>o.filter(A=>A.customer_id===N)}}function hke({client:e,interactions:t,opportunities:r,onCreateInteraction:n}){const a=r.length>0?Dy.find(i=>i.key===r[0].stage):null;return s.jsxs(St,{children:[s.jsx(er,{children:s.jsxs(tr,{className:"flex items-center justify-between",children:[s.jsx("span",{children:e.company_name}),s.jsxs("div",{className:"flex items-center gap-2",children:[a&&s.jsx(Pe,{variant:"outline",children:a.label}),s.jsx(Pe,{variant:e.is_active?"default":"secondary",children:e.is_active?"Actif":"Inactif"})]})]})}),s.jsxs(Rt,{className:"space-y-5",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx(iD,{className:"h-3.5 w-3.5 text-muted-foreground"}),s.jsx("span",{className:"text-muted-foreground",children:"Email:"}),s.jsx("span",{className:"ml-1",children:e.contact_email||"-"})]}),s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx(gH,{className:"h-3.5 w-3.5 text-muted-foreground"}),s.jsx("span",{className:"text-muted-foreground",children:"Pays:"}),s.jsx("span",{className:"ml-1",children:e.country||"-"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Zone:"}),s.jsx("span",{className:"ml-2",children:e.geographic_zone||"-"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Type:"}),s.jsx("span",{className:"ml-2",children:e.client_type||"-"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Tarification:"}),s.jsx("span",{className:"ml-2",children:e.pricing_rule||"-"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Paiement:"}),s.jsx("span",{className:"ml-2",children:e.payment_terms||"-"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Livraison:"}),s.jsx("span",{className:"ml-2",children:e.delivery_method||"-"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"MOQ:"}),s.jsx("span",{className:"ml-2",children:e.moq||"-"})]}),e.contract_sign_date&&s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Contrat sign:"}),s.jsx("span",{className:"ml-2",children:new Date(e.contract_sign_date).toLocaleDateString("fr-FR")})]}),e.contract_exclusivity&&s.jsx("div",{children:s.jsx(Pe,{variant:"outline",className:"text-[10px]",children:"Exclusivit"})})]}),e.notes&&s.jsxs(s.Fragment,{children:[s.jsx(Yl,{}),s.jsxs("div",{className:"p-3 rounded-lg bg-muted/30",children:[s.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[s.jsx(Bo,{className:"h-3.5 w-3.5 text-muted-foreground"}),s.jsx("span",{className:"text-sm font-medium",children:"Notes"})]}),s.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:e.notes})]})]}),r.length>0&&s.jsxs(s.Fragment,{children:[s.jsx(Yl,{}),s.jsxs("div",{children:[s.jsxs("h4",{className:"font-medium text-sm mb-2",children:["Opportunits (",r.length,")"]}),s.jsx("div",{className:"space-y-1",children:r.map(i=>{const o=Dy.find(l=>l.key===i.stage);return s.jsxs("div",{className:"flex justify-between items-center text-sm p-2 bg-muted/30 rounded",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Pe,{variant:"outline",className:"text-[10px]",children:(o==null?void 0:o.label)||i.stage}),i.contact_name&&s.jsx("span",{className:"text-muted-foreground",children:i.contact_name})]}),s.jsxs("span",{className:"font-mono text-xs",children:[(i.estimated_amount||0).toLocaleString("fr-FR"),"   ",i.probability,"%"]})]},i.id)})})]})]}),s.jsx(Yl,{}),s.jsx(fke,{interactions:t,customerId:e.id,onCreate:n})]})]})}function mke({opportunities:e,customers:t,onCreateOpportunity:r,onUpdateOpportunity:n,onDeleteOpportunity:a}){var _;const[i,o]=w.useState(!1),[l,c]=w.useState("prospect"),[u,d]=w.useState({customer_id:"",contact_name:"",estimated_amount:"",probability:"50",expected_close_date:"",responsible:""}),f=w.useRef(null),[h,m]=w.useState(null),y=j=>{f.current=j},g=(j,S)=>{j.preventDefault(),m(S)},p=()=>{m(null)},v=async j=>{m(null),f.current&&(await n(f.current,{stage:j}),f.current=null)},x=async()=>{u.customer_id&&(await r({customer_id:u.customer_id,stage:l,contact_name:u.contact_name||null,estimated_amount:Number(u.estimated_amount)||0,probability:Number(u.probability)||0,expected_close_date:u.expected_close_date||null,responsible:u.responsible||null}),o(!1),d({customer_id:"",contact_name:"",estimated_amount:"",probability:"50",expected_close_date:"",responsible:""}))},b=j=>{c(j),o(!0)};return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"flex gap-3 overflow-x-auto pb-4",style:{minHeight:400},children:Dy.map(j=>{const S=e.filter(k=>k.stage===j.key),C=S.reduce((k,N)=>k+(N.estimated_amount||0),0);return s.jsxs("div",{className:ue("flex-shrink-0 w-[220px] rounded-xl border p-3 transition-colors",j.color,h===j.key&&"ring-2 ring-primary"),onDragOver:k=>g(k,j.key),onDragLeave:p,onDrop:()=>v(j.key),children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-sm",children:j.label}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:[S.length,"  ",re(C,!0)]})]}),s.jsx(ne,{size:"icon",variant:"ghost",className:"h-6 w-6",onClick:()=>b(j.key),children:s.jsx(qt,{className:"h-3.5 w-3.5"})})]}),s.jsx("div",{className:"space-y-2",children:S.map(k=>{const N=t.find(A=>A.id===k.customer_id);return s.jsx(St,{draggable:!0,onDragStart:()=>y(k.id),className:"cursor-grab active:cursor-grabbing shadow-sm hover:shadow-md transition-shadow",children:s.jsxs(Rt,{className:"p-3 space-y-1.5",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx(yH,{className:"h-3 w-3 text-muted-foreground/50"}),s.jsx("span",{className:"font-medium text-xs",children:(N==null?void 0:N.company_name)||"?"})]}),s.jsx(ne,{size:"icon",variant:"ghost",className:"h-5 w-5 text-muted-foreground hover:text-destructive",onClick:()=>a(k.id),children:s.jsx(nr,{className:"h-3 w-3"})})]}),k.contact_name&&s.jsxs("div",{className:"flex items-center gap-1 text-[11px] text-muted-foreground",children:[s.jsx(DH,{className:"h-3 w-3"})," ",k.contact_name]}),s.jsxs("div",{className:"flex items-center justify-between text-[11px]",children:[s.jsx("span",{className:"font-mono-numbers font-medium",children:re(k.estimated_amount,!0)}),s.jsxs(Pe,{variant:"outline",className:"text-[10px]",children:[k.probability,"%"]})]}),k.expected_close_date&&s.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-muted-foreground",children:[s.jsx(ql,{className:"h-3 w-3"})," ",new Date(k.expected_close_date).toLocaleDateString("fr-FR")]}),k.responsible&&s.jsx("div",{className:"text-[10px] text-muted-foreground",children:k.responsible})]})},k.id)})})]},j.key)})}),s.jsx(mr,{open:i,onOpenChange:o,children:s.jsxs(ar,{children:[s.jsx(ir,{children:s.jsxs(sr,{children:["Nouvelle Opportunit  ",(_=Dy.find(j=>j.key===l))==null?void 0:_.label]})}),s.jsxs("div",{className:"space-y-3 py-2",children:[s.jsxs(lt,{value:u.customer_id,onValueChange:j=>d(S=>({...S,customer_id:j})),children:[s.jsx(st,{children:s.jsx(ct,{placeholder:"Client *"})}),s.jsx(ot,{children:t.map(j=>s.jsx(De,{value:j.id,children:j.company_name},j.id))})]}),s.jsx(xe,{placeholder:"Contact",value:u.contact_name,onChange:j=>d(S=>({...S,contact_name:j.target.value}))}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsx(xe,{type:"number",placeholder:"Montant estim ()",value:u.estimated_amount,onChange:j=>d(S=>({...S,estimated_amount:j.target.value}))}),s.jsx(xe,{type:"number",placeholder:"Probabilit (%)",value:u.probability,onChange:j=>d(S=>({...S,probability:j.target.value}))})]}),s.jsx(xe,{type:"date",placeholder:"Date conclusion",value:u.expected_close_date,onChange:j=>d(S=>({...S,expected_close_date:j.target.value}))}),s.jsx(xe,{placeholder:"Responsable",value:u.responsible,onChange:j=>d(S=>({...S,responsible:j.target.value}))})]}),s.jsxs(Ho,{children:[s.jsx(ne,{variant:"outline",onClick:()=>o(!1),children:"Annuler"}),s.jsx(ne,{onClick:x,disabled:!u.customer_id,children:"Crer"})]})]})})]})}var U0="Switch",[pke,aTe]=Yn(U0),[gke,vke]=pke(U0),Lz=w.forwardRef((e,t)=>{const{__scopeSwitch:r,name:n,checked:a,defaultChecked:i,required:o,disabled:l,value:c="on",onCheckedChange:u,form:d,...f}=e,[h,m]=w.useState(null),y=dt(t,b=>m(b)),g=w.useRef(!1),p=h?d||!!h.closest("form"):!0,[v,x]=sa({prop:a,defaultProp:i??!1,onChange:u,caller:U0});return s.jsxs(gke,{scope:r,checked:v,disabled:l,children:[s.jsx(Ve.button,{type:"button",role:"switch","aria-checked":v,"aria-required":o,"data-state":Uz(v),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:y,onClick:Oe(e.onClick,b=>{x(_=>!_),p&&(g.current=b.isPropagationStopped(),g.current||b.stopPropagation())})}),p&&s.jsx(zz,{control:h,bubbles:!g.current,name:n,value:c,checked:v,required:o,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});Lz.displayName=U0;var Bz="SwitchThumb",Fz=w.forwardRef((e,t)=>{const{__scopeSwitch:r,...n}=e,a=vke(Bz,r);return s.jsx(Ve.span,{"data-state":Uz(a.checked),"data-disabled":a.disabled?"":void 0,...n,ref:t})});Fz.displayName=Bz;var yke="SwitchBubbleInput",zz=w.forwardRef(({__scopeSwitch:e,control:t,checked:r,bubbles:n=!0,...a},i)=>{const o=w.useRef(null),l=dt(o,i),c=Rx(r),u=_x(t);return w.useEffect(()=>{const d=o.current;if(!d)return;const f=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(f,"checked").set;if(c!==r&&m){const y=new Event("click",{bubbles:n});m.call(d,r),d.dispatchEvent(y)}},[c,r,n]),s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:l,style:{...a.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});zz.displayName=yke;function Uz(e){return e?"checked":"unchecked"}var Vz=Lz,xke=Fz;const V0=w.forwardRef(({className:e,...t},r)=>s.jsx(Vz,{className:ue("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",e),...t,ref:r,children:s.jsx(xke,{className:ue("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));V0.displayName=Vz.displayName;var Wz="AlertDialog",[bke,iTe]=Yn(Wz,[pz]),Ws=pz(),Hz=e=>{const{__scopeAlertDialog:t,...r}=e,n=Ws(t);return s.jsx(Oz,{...n,...r,modal:!0})};Hz.displayName=Wz;var wke="AlertDialogTrigger",qz=w.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Ws(r);return s.jsx(Tz,{...a,...n,ref:t})});qz.displayName=wke;var jke="AlertDialogPortal",Kz=e=>{const{__scopeAlertDialog:t,...r}=e,n=Ws(t);return s.jsx(Rz,{...n,...r})};Kz.displayName=jke;var _ke="AlertDialogOverlay",Gz=w.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Ws(r);return s.jsx(KN,{...a,...n,ref:t})});Gz.displayName=_ke;var ku="AlertDialogContent",[Ske,Cke]=bke(ku),Nke=wI("AlertDialogContent"),Yz=w.forwardRef((e,t)=>{const{__scopeAlertDialog:r,children:n,...a}=e,i=Ws(r),o=w.useRef(null),l=dt(t,o),c=w.useRef(null);return s.jsx(GNe,{contentName:ku,titleName:Xz,docsSlug:"alert-dialog",children:s.jsx(Ske,{scope:r,cancelRef:c,children:s.jsxs(GN,{role:"alertdialog",...i,...a,ref:l,onOpenAutoFocus:Oe(a.onOpenAutoFocus,u=>{var d;u.preventDefault(),(d=c.current)==null||d.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[s.jsx(Nke,{children:n}),s.jsx(Pke,{contentRef:o})]})})})});Yz.displayName=ku;var Xz="AlertDialogTitle",Zz=w.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Ws(r);return s.jsx(YN,{...a,...n,ref:t})});Zz.displayName=Xz;var Qz="AlertDialogDescription",Jz=w.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Ws(r);return s.jsx(XN,{...a,...n,ref:t})});Jz.displayName=Qz;var kke="AlertDialogAction",eU=w.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Ws(r);return s.jsx(ZN,{...a,...n,ref:t})});eU.displayName=kke;var tU="AlertDialogCancel",rU=w.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,{cancelRef:a}=Cke(tU,r),i=Ws(r),o=dt(t,a);return s.jsx(ZN,{...i,...n,ref:o})});rU.displayName=tU;var Pke=({contentRef:e})=>{const t=`\`${ku}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${ku}\` by passing a \`${Qz}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${ku}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return w.useEffect(()=>{var n;document.getElementById((n=e.current)==null?void 0:n.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},Eke=Hz,Ake=qz,Oke=Kz,nU=Gz,aU=Yz,iU=eU,sU=rU,oU=Zz,lU=Jz;const Ly=Eke,nR=Ake,Tke=Oke,cU=w.forwardRef(({className:e,...t},r)=>s.jsx(nU,{className:ue("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));cU.displayName=nU.displayName;const zm=w.forwardRef(({className:e,...t},r)=>s.jsxs(Tke,{children:[s.jsx(cU,{}),s.jsx(aU,{ref:r,className:ue("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));zm.displayName=aU.displayName;const Um=({className:e,...t})=>s.jsx("div",{className:ue("flex flex-col space-y-2 text-center sm:text-left",e),...t});Um.displayName="AlertDialogHeader";const Vm=({className:e,...t})=>s.jsx("div",{className:ue("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Vm.displayName="AlertDialogFooter";const Wm=w.forwardRef(({className:e,...t},r)=>s.jsx(oU,{ref:r,className:ue("text-lg font-semibold",e),...t}));Wm.displayName=oU.displayName;const Hm=w.forwardRef(({className:e,...t},r)=>s.jsx(lU,{ref:r,className:ue("text-sm text-muted-foreground",e),...t}));Hm.displayName=lU.displayName;const qm=w.forwardRef(({className:e,...t},r)=>s.jsx(iU,{ref:r,className:ue(PC(),e),...t}));qm.displayName=iU.displayName;const Km=w.forwardRef(({className:e,...t},r)=>s.jsx(sU,{ref:r,className:ue(PC({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));Km.displayName=sU.displayName;var W0="Popover",[uU,sTe]=Yn(W0,[Ud]),xp=Ud(),[Rke,ol]=uU(W0),dU=e=>{const{__scopePopover:t,children:r,open:n,defaultOpen:a,onOpenChange:i,modal:o=!1}=e,l=xp(t),c=w.useRef(null),[u,d]=w.useState(!1),[f,h]=sa({prop:n,defaultProp:a??!1,onChange:i,caller:W0});return s.jsx(yC,{...l,children:s.jsx(Rke,{scope:t,contentId:Ki(),triggerRef:c,open:f,onOpenChange:h,onOpenToggle:w.useCallback(()=>h(m=>!m),[h]),hasCustomAnchor:u,onCustomAnchorAdd:w.useCallback(()=>d(!0),[]),onCustomAnchorRemove:w.useCallback(()=>d(!1),[]),modal:o,children:r})})};dU.displayName=W0;var fU="PopoverAnchor",Mke=w.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=ol(fU,r),i=xp(r),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=a;return w.useEffect(()=>(o(),()=>l()),[o,l]),s.jsx(Sx,{...i,...n,ref:t})});Mke.displayName=fU;var hU="PopoverTrigger",mU=w.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=ol(hU,r),i=xp(r),o=dt(t,a.triggerRef),l=s.jsx(Ve.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":xU(a.open),...n,ref:o,onClick:Oe(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?l:s.jsx(Sx,{asChild:!0,...i,children:l})});mU.displayName=hU;var QN="PopoverPortal",[$ke,Ike]=uU(QN,{forceMount:void 0}),pU=e=>{const{__scopePopover:t,forceMount:r,children:n,container:a}=e,i=ol(QN,t);return s.jsx($ke,{scope:t,forceMount:r,children:s.jsx(oa,{present:r||i.open,children:s.jsx(ap,{asChild:!0,container:a,children:n})})})};pU.displayName=QN;var Nd="PopoverContent",gU=w.forwardRef((e,t)=>{const r=Ike(Nd,e.__scopePopover),{forceMount:n=r.forceMount,...a}=e,i=ol(Nd,e.__scopePopover);return s.jsx(oa,{present:n||i.open,children:i.modal?s.jsx(Lke,{...a,ref:t}):s.jsx(Bke,{...a,ref:t})})});gU.displayName=Nd;var Dke=tc("PopoverContent.RemoveScroll"),Lke=w.forwardRef((e,t)=>{const r=ol(Nd,e.__scopePopover),n=w.useRef(null),a=dt(t,n),i=w.useRef(!1);return w.useEffect(()=>{const o=n.current;if(o)return BN(o)},[]),s.jsx($0,{as:Dke,allowPinchZoom:!0,children:s.jsx(vU,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Oe(e.onCloseAutoFocus,o=>{var l;o.preventDefault(),i.current||(l=r.triggerRef.current)==null||l.focus()}),onPointerDownOutside:Oe(e.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;i.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:Oe(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),Bke=w.forwardRef((e,t)=>{const r=ol(Nd,e.__scopePopover),n=w.useRef(!1),a=w.useRef(!1);return s.jsx(vU,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((u=r.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),vU=w.forwardRef((e,t)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:d,...f}=e,h=ol(Nd,r),m=xp(r);return LN(),s.jsx(R0,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:s.jsx(Id,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:d,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>h.onOpenChange(!1),children:s.jsx(xC,{"data-state":xU(h.open),role:"dialog",id:h.contentId,...m,...f,ref:t,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),yU="PopoverClose",Fke=w.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=ol(yU,r);return s.jsx(Ve.button,{type:"button",...n,ref:t,onClick:Oe(e.onClick,()=>a.onOpenChange(!1))})});Fke.displayName=yU;var zke="PopoverArrow",Uke=w.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=xp(r);return s.jsx(bC,{...a,...n,ref:t})});Uke.displayName=zke;function xU(e){return e?"open":"closed"}var Vke=dU,Wke=mU,Hke=pU,bU=gU;const JN=Vke,ek=Wke,H0=w.forwardRef(({className:e,align:t="center",sideOffset:r=4,...n},a)=>s.jsx(Hke,{children:s.jsx(bU,{ref:a,align:t,sideOffset:r,className:ue("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));H0.displayName=bU.displayName;var q0="Checkbox",[qke,oTe]=Yn(q0),[Kke,tk]=qke(q0);function Gke(e){const{__scopeCheckbox:t,checked:r,children:n,defaultChecked:a,disabled:i,form:o,name:l,onCheckedChange:c,required:u,value:d="on",internal_do_not_use_render:f}=e,[h,m]=sa({prop:r,defaultProp:a??!1,onChange:c,caller:q0}),[y,g]=w.useState(null),[p,v]=w.useState(null),x=w.useRef(!1),b=y?!!o||!!y.closest("form"):!0,_={checked:h,disabled:i,setChecked:m,control:y,setControl:g,name:l,form:o,value:d,hasConsumerStoppedPropagationRef:x,required:u,defaultChecked:$o(a)?!1:a,isFormControl:b,bubbleInput:p,setBubbleInput:v};return s.jsx(Kke,{scope:t,..._,children:Yke(f)?f(_):n})}var wU="CheckboxTrigger",jU=w.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:r,...n},a)=>{const{control:i,value:o,disabled:l,checked:c,required:u,setControl:d,setChecked:f,hasConsumerStoppedPropagationRef:h,isFormControl:m,bubbleInput:y}=tk(wU,e),g=dt(a,d),p=w.useRef(c);return w.useEffect(()=>{const v=i==null?void 0:i.form;if(v){const x=()=>f(p.current);return v.addEventListener("reset",x),()=>v.removeEventListener("reset",x)}},[i,f]),s.jsx(Ve.button,{type:"button",role:"checkbox","aria-checked":$o(c)?"mixed":c,"aria-required":u,"data-state":kU(c),"data-disabled":l?"":void 0,disabled:l,value:o,...n,ref:g,onKeyDown:Oe(t,v=>{v.key==="Enter"&&v.preventDefault()}),onClick:Oe(r,v=>{f(x=>$o(x)?!0:!x),y&&m&&(h.current=v.isPropagationStopped(),h.current||v.stopPropagation())})})});jU.displayName=wU;var rk=w.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:n,checked:a,defaultChecked:i,required:o,disabled:l,value:c,onCheckedChange:u,form:d,...f}=e;return s.jsx(Gke,{__scopeCheckbox:r,checked:a,defaultChecked:i,disabled:l,required:o,onCheckedChange:u,name:n,form:d,value:c,internal_do_not_use_render:({isFormControl:h})=>s.jsxs(s.Fragment,{children:[s.jsx(jU,{...f,ref:t,__scopeCheckbox:r}),h&&s.jsx(NU,{__scopeCheckbox:r})]})})});rk.displayName=q0;var _U="CheckboxIndicator",SU=w.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:n,...a}=e,i=tk(_U,r);return s.jsx(oa,{present:n||$o(i.checked)||i.checked===!0,children:s.jsx(Ve.span,{"data-state":kU(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});SU.displayName=_U;var CU="CheckboxBubbleInput",NU=w.forwardRef(({__scopeCheckbox:e,...t},r)=>{const{control:n,hasConsumerStoppedPropagationRef:a,checked:i,defaultChecked:o,required:l,disabled:c,name:u,value:d,form:f,bubbleInput:h,setBubbleInput:m}=tk(CU,e),y=dt(r,m),g=Rx(i),p=_x(n);w.useEffect(()=>{const x=h;if(!x)return;const b=window.HTMLInputElement.prototype,j=Object.getOwnPropertyDescriptor(b,"checked").set,S=!a.current;if(g!==i&&j){const C=new Event("click",{bubbles:S});x.indeterminate=$o(i),j.call(x,$o(i)?!1:i),x.dispatchEvent(C)}},[h,g,i,a]);const v=w.useRef($o(i)?!1:i);return s.jsx(Ve.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??v.current,required:l,disabled:c,name:u,value:d,form:f,...t,tabIndex:-1,ref:y,style:{...t.style,...p,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});NU.displayName=CU;function Yke(e){return typeof e=="function"}function $o(e){return e==="indeterminate"}function kU(e){return $o(e)?"indeterminate":e?"checked":"unchecked"}const za=w.forwardRef(({className:e,...t},r)=>s.jsx(rk,{ref:r,className:ue("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:s.jsx(SU,{className:ue("flex items-center justify-center text-current"),children:s.jsx(Oo,{className:"h-4 w-4"})})}));za.displayName=rk.displayName;function kw(e){const t=e.toUpperCase();if(t.length!==2)return"";const r=127397;return String.fromCodePoint(t.charCodeAt(0)+r,t.charCodeAt(1)+r)}const Pw={france:"FR",allemagne:"DE",espagne:"ES",italie:"IT","royaume-uni":"GB",angleterre:"GB","tats-unis":"US","etats-unis":"US",belgique:"BE",suisse:"CH","pays-bas":"NL",hollande:"NL",portugal:"PT",autriche:"AT",japon:"JP",chine:"CN",australie:"AU",brsil:"BR",bresil:"BR",mexique:"MX",inde:"IN","core du sud":"KR","coree du sud":"KR",core:"KR",coree:"KR",danemark:"DK",sude:"SE",suede:"SE",norvge:"NO",norvege:"NO",finlande:"FI",pologne:"PL",irlande:"IE",grce:"GR",grece:"GR",luxembourg:"LU",monaco:"MC",taiwan:"TW",tawan:"TW",singapour:"SG","mirats arabes unis":"AE","emirats arabes unis":"AE",isral:"IL",israel:"IL",turquie:"TR",maroc:"MA",tunisie:"TN","afrique du sud":"ZA",roumanie:"RO",hongrie:"HU",tchquie:"CZ",tchequie:"CZ","rpublique tchque":"CZ","republique tcheque":"CZ","nouvelle-zlande":"NZ","nouvelle-zelande":"NZ",canada:"CA",qatar:"QA","arabie saoudite":"SA",kowet:"KW",koweit:"KW",bahren:"BH",bahrein:"BH",oman:"OM",liban:"LB",jordanie:"JO",gypte:"EG",egypte:"EG",algrie:"DZ",algerie:"DZ",sngal:"SN",senegal:"SN","cte d'ivoire":"CI","cote d'ivoire":"CI",cameroun:"CM",nigeria:"NG",kenya:"KE",ghana:"GH",colombie:"CO",argentine:"AR",chili:"CL",prou:"PE",perou:"PE",venezuela:"VE",uruguay:"UY",paraguay:"PY",equateur:"EC",quateur:"EC",bolivie:"BO","costa rica":"CR",panama:"PA",cuba:"CU",thalande:"TH",thailande:"TH",vietnam:"VN","vit nam":"VN",malaisie:"MY",indonsie:"ID",indonesie:"ID",philippines:"PH",pakistan:"PK",bangladesh:"BD","sri lanka":"LK",npal:"NP",nepal:"NP",russie:"RU",ukraine:"UA",bilorussie:"BY",bielorussie:"BY",gorgie:"GE",georgie:"GE",armnie:"AM",armenie:"AM",azerbadjan:"AZ",azerbaidjan:"AZ",kazakhstan:"KZ",croatie:"HR",serbie:"RS",slovnie:"SI",slovenie:"SI",slovaquie:"SK",bulgarie:"BG",lituanie:"LT",lettonie:"LV",estonie:"EE",malte:"MT",chypre:"CY",islande:"IS",albanie:"AL","macdoine du nord":"MK","macedoine du nord":"MK",montngro:"ME",montenegro:"ME",bosnie:"BA","bosnie-herzgovine":"BA",moldavie:"MD",andorre:"AD",liechtenstein:"LI","saint-marin":"SM",germany:"DE",spain:"ES",italy:"IT","united kingdom":"GB","united states":"US",belgium:"BE",switzerland:"CH",netherlands:"NL",austria:"AT",japan:"JP",china:"CN",australia:"AU",brazil:"BR",mexico:"MX",india:"IN","south korea":"KR",denmark:"DK",sweden:"SE",norway:"NO",finland:"FI",poland:"PL",ireland:"IE",greece:"GR",singapore:"SG",turkey:"TR",morocco:"MA",tunisia:"TN","south africa":"ZA",romania:"RO",hungary:"HU","czech republic":"CZ",czechia:"CZ","new zealand":"NZ","saudi arabia":"SA",kuwait:"KW",bahrain:"BH",jordan:"JO",egypt:"EG",algeria:"DZ","ivory coast":"CI",cameroon:"CM",colombia:"CO",argentina:"AR",chile:"CL",peru:"PE",thailand:"TH",malaysia:"MY",indonesia:"ID",russia:"RU",croatia:"HR",serbia:"RS",slovenia:"SI",slovakia:"SK",bulgaria:"BG",lithuania:"LT",latvia:"LV",estonia:"EE",malta:"MT",cyprus:"CY",iceland:"IS",bosnia:"BA",moldova:"MD",andorra:"AD"};function aR(e){if(!e)return"";const t=e.trim(),r=t.toLowerCase();if(Pw[r])return kw(Pw[r]);if(/^[a-zA-Z]{2}$/.test(t))return kw(t);for(const[n,a]of Object.entries(Pw))if(r.includes(n)||n.includes(r))return kw(a);return""}const Xke=["Actif","Clients B2B","Pays","Zone Gographique","Mail du contact","Date d'EER","Date dernier achat","Type de Client","Pricing rules","Delais de paiement","Modalits de livraison","Rgles transport","Frais de livraison","Contrat/Exclusivit","MOQ","Avantages Spcifiques"];function Zke({open:e,onOpenChange:t,onImport:r}){const[n,a]=w.useState(""),[i,o]=w.useState([]),[l,c]=w.useState(!1),u=f=>{var y,g,p,v,x,b,_,j,S,C,k,N;const h=f.trim().split(`
`).filter(A=>A.trim()),m=[];for(const A of h){const O=A.split("	");O.length<2||m.push({is_active:(O[0]||"").toLowerCase().includes("oui"),company_name:((y=O[1])==null?void 0:y.trim())||"Sans nom",country:((g=O[2])==null?void 0:g.trim())||null,geographic_zone:((p=O[3])==null?void 0:p.trim())||null,contact_email:((v=O[4])==null?void 0:v.trim())||null,eer_date:parseInt(O[5])||null,last_purchase_date:parseInt(O[6])||null,client_type:((x=O[7])==null?void 0:x.trim())||null,pricing_rule:((b=O[8])==null?void 0:b.trim())||null,payment_terms:((_=O[9])==null?void 0:_.trim())||null,delivery_method:((j=O[10])==null?void 0:j.trim())||null,transport_rules:((S=O[11])==null?void 0:S.trim())||null,delivery_fee_rule:((C=O[12])==null?void 0:C.trim())||null,contract_exclusivity:(O[13]||"").toLowerCase().includes("oui"),moq:((k=O[14])==null?void 0:k.trim())||null,specific_advantages:((N=O[15])==null?void 0:N.trim())||null})}o(m)},d=async()=>{c(!0);const f=await r(i);c(!1),f>0&&(a(""),o([]),t(!1))};return s.jsx(mr,{open:e,onOpenChange:t,children:s.jsxs(ar,{className:"max-w-3xl max-h-[80vh] overflow-y-auto",children:[s.jsx(ir,{children:s.jsx(sr,{children:"Import Clients B2B (copier-coller)"})}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"Collez les lignes depuis Excel/Google Sheets (spares par tabulations). Colonnes attendues :"}),s.jsx("div",{className:"flex flex-wrap gap-1",children:Xke.map((f,h)=>s.jsx(Pe,{variant:"outline",className:"text-[10px]",children:f},h))}),s.jsx(qa,{placeholder:"Collez vos lignes ici...",rows:6,value:n,onChange:f=>{a(f.target.value),u(f.target.value)}}),i.length>0&&s.jsxs("div",{className:"border rounded p-3",children:[s.jsxs("p",{className:"text-sm font-medium mb-2",children:[i.length," client(s) dtect(s) :"]}),s.jsx("div",{className:"space-y-1 max-h-40 overflow-y-auto",children:i.map((f,h)=>s.jsxs("div",{className:"text-xs flex gap-2 items-center",children:[s.jsx(Pe,{variant:f.is_active?"default":"secondary",className:"text-[9px]",children:f.is_active?"Actif":"Inactif"}),s.jsx("span",{className:"font-medium",children:f.company_name}),s.jsx("span",{className:"text-muted-foreground",children:f.country}),s.jsx("span",{className:"text-muted-foreground",children:f.client_type})]},h))})]})]}),s.jsxs(Ho,{children:[s.jsx(ne,{variant:"outline",onClick:()=>t(!1),children:"Annuler"}),s.jsx(ne,{onClick:d,disabled:i.length===0||l,children:l?"Import...":`Importer ${i.length} client(s)`})]})]})})}function Qke({deliveryFeeTiers:e,paymentTermsOptions:t,deliveryMethods:r,onAddDeliveryFee:n,onDeleteDeliveryFee:a,onAddPaymentTerm:i,onDeletePaymentTerm:o,onAddDeliveryMethod:l,onDeleteDeliveryMethod:c}){const[u,d]=w.useState(""),[f,h]=w.useState(""),[m,y]=w.useState(""),[g,p]=w.useState(""),[v,x]=w.useState(""),[b,_]=w.useState("");return s.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[s.jsxs(St,{children:[s.jsx(er,{className:"pb-2",children:s.jsx(tr,{className:"text-sm",children:"Frais de livraison (tranches)"})}),s.jsxs(Rt,{className:"space-y-2",children:[e.map(j=>s.jsxs("div",{className:"flex items-center justify-between text-xs p-2 bg-muted/30 rounded",children:[s.jsxs("span",{children:[j.label,"  ",j.fee_amount," (",j.min_pieces,j.max_pieces?`-${j.max_pieces}`:"+"," pcs)"]}),s.jsx(ne,{size:"sm",variant:"ghost",onClick:()=>a(j.id),children:s.jsx(nr,{className:"h-3 w-3"})})]},j.id)),s.jsxs("div",{className:"grid grid-cols-4 gap-1",children:[s.jsx(xe,{placeholder:"Label",value:u,onChange:j=>d(j.target.value),className:"text-xs h-8"}),s.jsx(xe,{placeholder:"",type:"number",value:f,onChange:j=>h(j.target.value),className:"text-xs h-8"}),s.jsx(xe,{placeholder:"Min",type:"number",value:m,onChange:j=>y(j.target.value),className:"text-xs h-8"}),s.jsx(xe,{placeholder:"Max",type:"number",value:g,onChange:j=>p(j.target.value),className:"text-xs h-8"})]}),s.jsxs(ne,{size:"sm",className:"w-full",variant:"outline",disabled:!u,onClick:async()=>{await n(u,parseFloat(f)||0,parseInt(m)||0,g?parseInt(g):null),d(""),h(""),y(""),p("")},children:[s.jsx(qt,{className:"h-3 w-3 mr-1"})," Ajouter"]})]})]}),s.jsxs(St,{children:[s.jsx(er,{className:"pb-2",children:s.jsx(tr,{className:"text-sm",children:"Dlais de paiement"})}),s.jsxs(Rt,{className:"space-y-2",children:[t.map(j=>s.jsxs("div",{className:"flex items-center justify-between text-xs p-2 bg-muted/30 rounded",children:[s.jsx("span",{children:j.label}),s.jsx(ne,{size:"sm",variant:"ghost",onClick:()=>o(j.id),children:s.jsx(nr,{className:"h-3 w-3"})})]},j.id)),s.jsxs("div",{className:"flex gap-1",children:[s.jsx(xe,{placeholder:"Ex: 30 jours fin de mois",value:v,onChange:j=>x(j.target.value),className:"text-xs h-8"}),s.jsx(ne,{size:"sm",variant:"outline",disabled:!v,onClick:async()=>{await i(v),x("")},children:s.jsx(qt,{className:"h-3 w-3"})})]})]})]}),s.jsxs(St,{children:[s.jsx(er,{className:"pb-2",children:s.jsx(tr,{className:"text-sm",children:"Modalits de livraison"})}),s.jsxs(Rt,{className:"space-y-2",children:[r.map(j=>s.jsxs("div",{className:"flex items-center justify-between text-xs p-2 bg-muted/30 rounded",children:[s.jsx("span",{children:j.label}),s.jsx(ne,{size:"sm",variant:"ghost",onClick:()=>c(j.id),children:s.jsx(nr,{className:"h-3 w-3"})})]},j.id)),s.jsxs("div",{className:"flex gap-1",children:[s.jsx(xe,{placeholder:"Ex: DHL, TNT...",value:b,onChange:j=>_(j.target.value),className:"text-xs h-8"}),s.jsx(ne,{size:"sm",variant:"outline",disabled:!b,onClick:async()=>{await l(b),_("")},children:s.jsx(qt,{className:"h-3 w-3"})})]})]})]})]})}const Jke=[{id:"default-b2b",name:"B2B Standard",type:"b2b",tvaRate:20,intermediaries:[{label:"Distributeur",coefficient:1.3},{label:"Shop",coefficient:1.8}]},{id:"default-oem",name:"OEM",type:"oem",tvaRate:0,intermediaries:[{label:"Partenaire OEM",coefficient:1.4}]}];function PU(){const[e,t]=w.useState(Jke),[r,n]=w.useState("from_public"),[a,i]=w.useState("default-b2b"),[o,l]=w.useState({}),[c,u]=w.useState({}),[d,f]=w.useState(!1);w.useEffect(()=>{(async()=>{var v,x,b,_,j;const{data:{user:g}}=await he.auth.getUser();if(!g){f(!0);return}const{data:p}=await he.from("pricing_config").select("config_data").eq("user_id",g.id).maybeSingle();if(p!=null&&p.config_data){const S=p.config_data;if((v=S.salesRules)!=null&&v.length&&t(S.salesRules),S.pricingMode&&n(S.pricingMode),S.activeRuleId&&i(S.activeRuleId),S.editedPrices){const C=Object.keys(S.editedPrices)[0];if(C&&typeof S.editedPrices[C]=="object"&&!Array.isArray(S.editedPrices[C]))l(S.editedPrices);else if(C&&typeof S.editedPrices[C]=="number"){const k=S.activeRuleId||((b=(x=S.salesRules)==null?void 0:x[0])==null?void 0:b.id)||"default-b2b";l({[k]:S.editedPrices})}}if(S.editedOurPrices){const C=Object.keys(S.editedOurPrices)[0];if(C&&typeof S.editedOurPrices[C]=="object"&&!Array.isArray(S.editedOurPrices[C]))u(S.editedOurPrices);else if(C&&typeof S.editedOurPrices[C]=="number"){const k=S.activeRuleId||((j=(_=S.salesRules)==null?void 0:_[0])==null?void 0:j.id)||"default-b2b";u({[k]:S.editedOurPrices})}}}f(!0)})()},[]);const h=w.useCallback((y,g)=>{const v=o[g||a]||{};return v[y.id]!==void 0?v[y.id]:y.price_ttc},[o,a]),m=w.useCallback((y,g)=>{if(!g||y<=0)return null;const p=g.tvaRate??20;let x=y/(1+p/100);const b=[...g.intermediaries].reverse();for(const _ of b)x=x/_.coefficient;return{ourB2BPrice:x}},[]);return{salesRules:e,pricingMode:r,activeRuleId:a,editedPrices:o,editedOurPrices:c,loaded:d,getEffectivePrice:h,computeChainFromPublicTTC:m}}const Ew=[2022,2023,2024,2025],Aw=[{key:"is_active",label:"Actif",minWidth:"50px",canHide:!0},{key:"company_name",label:"Client",minWidth:"130px",canHide:!1},{key:"country",label:"Pays",minWidth:"80px",canHide:!0},{key:"geographic_zone",label:"Zone Go",minWidth:"80px",canHide:!0},{key:"contact_email",label:"Mail contact",minWidth:"140px",canHide:!0},{key:"pricing_rule",label:"Pricing",minWidth:"100px",canHide:!0},{key:"payment_terms",label:"Dlai paie.",minWidth:"90px",canHide:!0},{key:"delivery_method",label:"Livraison",minWidth:"80px",canHide:!0},{key:"delivery_fee_rule",label:"Frais liv.",minWidth:"80px",canHide:!0},{key:"moq",label:"MOQ",minWidth:"60px",canHide:!0},{key:"ca_2022",label:"CA 2022",minWidth:"80px",canHide:!0},{key:"ca_2023",label:"CA 2023",minWidth:"80px",canHide:!0},{key:"ca_2024",label:"CA 2024",minWidth:"80px",canHide:!0},{key:"ca_2025",label:"CA 2025",minWidth:"80px",canHide:!0},{key:"category",label:"Catgorie",minWidth:"90px",canHide:!0},{key:"actions",label:"Actions",minWidth:"70px",canHide:!1}];function $c({value:e,onSave:t,type:r="text",className:n=""}){const[a,i]=w.useState(!1),[o,l]=w.useState(e),c=w.useRef(null);if(w.useEffect(()=>{var d;a&&((d=c.current)==null||d.focus())},[a]),w.useEffect(()=>{l(e)},[e]),!a)return s.jsx("span",{className:`cursor-pointer hover:bg-accent/40 px-1 py-0.5 rounded transition-colors inline-block min-w-[2rem] ${n}`,onClick:()=>i(!0),title:"Cliquer pour modifier",children:e||""});const u=()=>{i(!1),o!==e&&t(o)};return s.jsx(xe,{ref:c,className:"h-7 text-xs w-full",type:r,value:o,onChange:d=>l(d.target.value),onBlur:u,onKeyDown:d=>{d.key==="Enter"&&u(),d.key==="Escape"&&(l(e),i(!1))}})}function Df({value:e,options:t,onSave:r,placeholder:n=""}){return s.jsxs(lt,{value:e||"none",onValueChange:a=>r(a==="none"?"":a),children:[s.jsx(st,{className:"h-7 text-xs w-full border-dashed",children:s.jsx(ct,{placeholder:n})}),s.jsxs(ot,{children:[s.jsx(De,{value:"none",children:n}),t.map(a=>s.jsx(De,{value:a,children:a},a))]})]})}function ePe({clients:e,projections:t,deliveryFeeTiers:r,paymentTermsOptions:n,deliveryMethods:a,categories:i,onUpsertClient:o,onDeleteClient:l,onBulkImport:c,onUpsertProjection:u,getClientProjections:d,onAddDeliveryFee:f,onDeleteDeliveryFee:h,onAddPaymentTerm:m,onDeletePaymentTerm:y,onAddDeliveryMethod:g,onDeleteDeliveryMethod:p,onAddCategory:v,onDeleteCategory:x,onUpdateCategory:b}){var oe;const[_,j]=w.useState(!1),[S,C]=w.useState(!1),[k,N]=w.useState(!1),[A,O]=w.useState(new Set),[E,R]=w.useState(""),[P,T]=w.useState(!1),[I,M]=w.useState(null),[D,B]=w.useState(new Set),{salesRules:z}=PU(),[Z,J]=w.useState({company_name:"",country:"",geographic_zone:"",contact_email:"",eer_date:"",client_type:"",pricing_rule:"",payment_terms:"",delivery_method:"",delivery_fee_rule:"",moq:"",category_id:""}),se=Aw.filter(K=>!D.has(K.key)),U=Aw.filter(K=>D.has(K.key)&&K.canHide),q=se.length,G=K=>{B(ie=>{const ve=new Set(ie);return ve.has(K)?ve.delete(K):ve.add(K),ve})},H=K=>!D.has(K),fe=async(K,ie,ve)=>{await o({...K,[ie]:ve||null})},L=async()=>{Z.company_name.trim()&&(await o({company_name:Z.company_name,country:Z.country||null,geographic_zone:Z.geographic_zone||null,contact_email:Z.contact_email||null,eer_date:parseInt(Z.eer_date)||null,client_type:Z.client_type||null,pricing_rule:Z.pricing_rule||null,payment_terms:Z.payment_terms||null,delivery_method:Z.delivery_method||null,delivery_fee_rule:Z.delivery_fee_rule||null,moq:Z.moq||null,category_id:Z.category_id||null,is_active:!0}),N(!1),J({company_name:"",country:"",geographic_zone:"",contact_email:"",eer_date:"",client_type:"",pricing_rule:"",payment_terms:"",delivery_method:"",delivery_fee_rule:"",moq:"",category_id:""}))},Y=K=>{O(ie=>{const ve=new Set(ie);return ve.has(K)?ve.delete(K):ve.add(K),ve})},V=(K,ie)=>{const ve=t.find(de=>de.client_id===K&&de.year===ie);return ve?Number(ve.projected_revenue):0},Q=async(K,ie,ve)=>{const de=parseFloat(ve);isNaN(de)||await u(K,ie,de)},te=r.map(K=>K.label),be=n.map(K=>K.label),Re=a.map(K=>K.label),We=()=>{const K=["Actif","Client","Pays","Zone Go","Email","Pricing","Dlai paiement","Livraison","Frais livraison","MOQ",...Ew.map(ft=>`CA ${ft}`),"Catgorie"],ie=e.map(ft=>{var Ge;return[ft.is_active?"Oui":"Non",ft.company_name,ft.country||"",ft.geographic_zone||"",ft.contact_email||"",ft.pricing_rule||"",ft.payment_terms||"",ft.delivery_method||"",ft.delivery_fee_rule||"",ft.moq||"",...Ew.map(yt=>String(V(ft.id,yt)||"")),((Ge=i.find(yt=>yt.id===ft.category_id))==null?void 0:Ge.name)||""]}),ve=[K,...ie].map(ft=>ft.map(Ge=>`"${String(Ge).replace(/"/g,'""')}"`).join(";")).join(`
`),de=new Blob(["\uFEFF"+ve],{type:"text/csv;charset=utf-8;"}),Me=URL.createObjectURL(de),Ze=document.createElement("a");Ze.href=Me,Ze.download=`clients_b2b_${new Date().toISOString().slice(0,10)}.csv`,Ze.click(),URL.revokeObjectURL(Me),Ee.success("Fichier CSV export")},ge=async()=>{I&&(await l(I),M(null))},ke=e.filter(K=>!K.category_id),Xe=i.map(K=>({category:K,clients:e.filter(ie=>ie.category_id===K.id)})),F=K=>s.jsxs(_e,{className:"text-xs",children:[H("is_active")&&s.jsx(W,{children:s.jsx(V0,{checked:K.is_active,onCheckedChange:ie=>o({...K,is_active:ie})})}),H("company_name")&&s.jsx(W,{className:"font-medium",children:s.jsx($c,{value:K.company_name,onSave:ie=>fe(K,"company_name",ie)})}),H("country")&&s.jsx(W,{children:s.jsxs("span",{className:"flex items-center gap-1",children:[aR(K.country)&&s.jsx("span",{className:"text-base leading-none",children:aR(K.country)}),s.jsx($c,{value:K.country||"",onSave:ie=>fe(K,"country",ie)})]})}),H("geographic_zone")&&s.jsx(W,{children:s.jsx($c,{value:K.geographic_zone||"",onSave:ie=>fe(K,"geographic_zone",ie)})}),H("contact_email")&&s.jsx(W,{children:s.jsx($c,{value:K.contact_email||"",onSave:ie=>fe(K,"contact_email",ie)})}),H("pricing_rule")&&s.jsx(W,{children:s.jsx(Df,{value:K.pricing_rule||"",options:z.map(ie=>ie.name),onSave:ie=>fe(K,"pricing_rule",ie)})}),H("payment_terms")&&s.jsx(W,{children:s.jsx(Df,{value:K.payment_terms||"",options:be,onSave:ie=>fe(K,"payment_terms",ie)})}),H("delivery_method")&&s.jsx(W,{children:s.jsx(Df,{value:K.delivery_method||"",options:Re,onSave:ie=>fe(K,"delivery_method",ie)})}),H("delivery_fee_rule")&&s.jsx(W,{children:s.jsx(Df,{value:K.delivery_fee_rule||"",options:te,onSave:ie=>fe(K,"delivery_fee_rule",ie)})}),H("moq")&&s.jsx(W,{children:s.jsx($c,{value:K.moq||"",onSave:ie=>fe(K,"moq",ie)})}),Ew.map((ie,ve)=>{const de=`ca_${ie}`;if(!H(de))return null;const Me=V(K.id,ie);return s.jsx(W,{className:"text-right font-mono",children:s.jsx($c,{value:Me?String(Me):"",type:"number",onSave:Ze=>Q(K.id,ie,Ze),className:"text-right"})},ie)}),H("category")&&s.jsx(W,{children:s.jsx(Df,{value:K.category_id||"",options:i.map(ie=>ie.id),onSave:ie=>o({...K,category_id:ie||null}),placeholder:""})}),H("actions")&&s.jsx(W,{children:s.jsx(ne,{size:"sm",variant:"ghost",onClick:()=>M(K.id),children:s.jsx(nr,{className:"h-3 w-3 text-destructive"})})})]},K.id),ee=(K,ie)=>{const ve=A.has(K.id);return s.jsx(_e,{className:"bg-muted/40 hover:bg-muted/60 cursor-pointer",onClick:()=>Y(K.id),children:s.jsx(W,{colSpan:q,className:"py-2",children:s.jsxs("div",{className:"flex items-center gap-2",children:[ve?s.jsx(Vh,{className:"h-4 w-4"}):s.jsx(Uh,{className:"h-4 w-4"}),s.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:K.color||"#6366f1"}}),s.jsx("span",{className:"font-semibold text-sm",children:K.name}),s.jsx(Pe,{variant:"secondary",className:"text-[9px]",children:ie})]})})},`cat-${K.id}`)};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsxs(ne,{size:"sm",onClick:()=>N(!0),children:[s.jsx(qt,{className:"h-4 w-4 mr-1"})," Nouveau client"]}),s.jsxs(ne,{size:"sm",variant:"outline",onClick:()=>j(!0),children:[s.jsx(qi,{className:"h-4 w-4 mr-1"})," Import copier-coller"]}),s.jsxs(ne,{size:"sm",variant:"outline",onClick:()=>T(!0),children:[s.jsx(pH,{className:"h-4 w-4 mr-1"})," Catgorie"]}),s.jsxs(ne,{size:"sm",variant:"outline",onClick:()=>C(!S),children:[s.jsx(oD,{className:"h-4 w-4 mr-1"})," Paramtres"]}),s.jsxs(ne,{size:"sm",variant:"outline",onClick:We,children:[s.jsx(sp,{className:"h-4 w-4 mr-1"})," Export CSV"]}),s.jsxs(JN,{children:[s.jsx(ek,{asChild:!0,children:s.jsxs(ne,{size:"sm",variant:"outline",className:"ml-auto",children:[s.jsx(fH,{className:"h-4 w-4 mr-1"}),"Colonnes",U.length>0&&s.jsxs(Pe,{variant:"secondary",className:"ml-1 text-[9px] px-1.5",children:[U.length," masque",U.length>1?"s":""]})]})}),s.jsxs(H0,{className:"w-56 p-3",align:"end",children:[s.jsx("p",{className:"text-xs font-medium mb-2 text-muted-foreground",children:"Afficher / Masquer"}),s.jsx("div",{className:"space-y-1.5",children:Aw.filter(K=>K.canHide).map(K=>s.jsxs("label",{className:"flex items-center gap-2 text-xs cursor-pointer hover:bg-accent/40 px-1.5 py-1 rounded",children:[s.jsx(za,{checked:!D.has(K.key),onCheckedChange:()=>G(K.key)}),K.label]},K.key))})]})]}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:[e.length," client(s)"]})]}),U.length>0&&s.jsxs("div",{className:"flex items-center gap-1.5 flex-wrap",children:[s.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Colonnes masques :"}),U.map(K=>s.jsxs(Pe,{variant:"outline",className:"text-[10px] cursor-pointer hover:bg-accent gap-1 px-2 py-0.5",onClick:()=>G(K.key),children:[s.jsx(nD,{className:"h-3 w-3"}),K.label]},K.key))]}),S&&s.jsx(Qke,{deliveryFeeTiers:r,paymentTermsOptions:n,deliveryMethods:a,onAddDeliveryFee:f,onDeleteDeliveryFee:h,onAddPaymentTerm:m,onDeletePaymentTerm:y,onAddDeliveryMethod:g,onDeleteDeliveryMethod:p}),i.length>0&&s.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:i.map(K=>s.jsxs(Pe,{variant:"outline",className:"gap-1 text-xs",children:[s.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:K.color||"#6366f1"}}),K.name,s.jsx("button",{onClick:()=>x(K.id),className:"ml-1 text-destructive hover:text-destructive/80",children:s.jsx(_i,{className:"h-3 w-3"})})]},K.id))}),s.jsx("div",{className:"border rounded-lg overflow-x-auto",children:s.jsxs(Kt,{children:[s.jsx(Gt,{children:s.jsx(_e,{children:se.map(K=>s.jsx(ce,{className:`text-[10px] min-w-[${K.minWidth}] ${K.key.startsWith("ca_")?"text-right bg-accent/20":""}`,children:K.label},K.key))})}),s.jsxs(Yt,{children:[e.length===0&&s.jsx(_e,{children:s.jsx(W,{colSpan:q,className:"text-center text-muted-foreground py-8 text-sm",children:"Aucun client  Ajoutez-en ou importez via copier-coller"})}),Xe.map(({category:K,clients:ie})=>{if(ie.length===0)return null;const ve=A.has(K.id);return[ee(K,ie.length),...ve?[]:ie.map(F)]}),ke.length>0&&s.jsxs(s.Fragment,{children:[i.length>0&&s.jsx(_e,{className:"bg-muted/20",children:s.jsx(W,{colSpan:q,className:"py-2",children:s.jsxs("span",{className:"text-xs text-muted-foreground font-medium",children:["Sans catgorie (",ke.length,")"]})})}),ke.map(F)]})]})]})}),s.jsx(Zke,{open:_,onOpenChange:j,onImport:c}),s.jsx(mr,{open:k,onOpenChange:N,children:s.jsxs(ar,{children:[s.jsx(ir,{children:s.jsx(sr,{children:"Nouveau Client"})}),s.jsxs("div",{className:"space-y-3 py-2",children:[s.jsx(xe,{placeholder:"Nom de l'entreprise *",value:Z.company_name,onChange:K=>J(ie=>({...ie,company_name:K.target.value}))}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsx(xe,{placeholder:"Pays",value:Z.country,onChange:K=>J(ie=>({...ie,country:K.target.value}))}),s.jsx(xe,{placeholder:"Zone gographique",value:Z.geographic_zone,onChange:K=>J(ie=>({...ie,geographic_zone:K.target.value}))})]}),s.jsx(xe,{placeholder:"Email contact",value:Z.contact_email,onChange:K=>J(ie=>({...ie,contact_email:K.target.value}))}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs(lt,{value:Z.pricing_rule,onValueChange:K=>J(ie=>({...ie,pricing_rule:K})),children:[s.jsx(st,{children:s.jsx(ct,{placeholder:"Pricing rule"})}),s.jsx(ot,{children:z.map(K=>s.jsx(De,{value:K.name,children:K.name},K.id))})]}),s.jsxs(lt,{value:Z.category_id,onValueChange:K=>J(ie=>({...ie,category_id:K})),children:[s.jsx(st,{children:s.jsx(ct,{placeholder:"Catgorie"})}),s.jsxs(ot,{children:[s.jsx(De,{value:"none",children:"Sans catgorie"}),i.map(K=>s.jsx(De,{value:K.id,children:K.name},K.id))]})]})]}),s.jsx(xe,{placeholder:"MOQ",value:Z.moq,onChange:K=>J(ie=>({...ie,moq:K.target.value}))})]}),s.jsxs(Ho,{children:[s.jsx(ne,{variant:"outline",onClick:()=>N(!1),children:"Annuler"}),s.jsx(ne,{onClick:L,disabled:!Z.company_name.trim(),children:"Crer"})]})]})}),s.jsx(mr,{open:P,onOpenChange:T,children:s.jsxs(ar,{className:"max-w-sm",children:[s.jsx(ir,{children:s.jsx(sr,{children:"Nouvelle catgorie"})}),s.jsx(xe,{placeholder:"Nom de la catgorie",value:E,onChange:K=>R(K.target.value)}),s.jsxs(Ho,{children:[s.jsx(ne,{variant:"outline",onClick:()=>T(!1),children:"Annuler"}),s.jsx(ne,{onClick:async()=>{E.trim()&&(await v(E.trim()),R(""),T(!1))},disabled:!E.trim(),children:"Crer"})]})]})}),s.jsx(Ly,{open:!!I,onOpenChange:K=>!K&&M(null),children:s.jsxs(zm,{children:[s.jsxs(Um,{children:[s.jsx(Wm,{children:"Supprimer ce client ?"}),s.jsxs(Hm,{children:["Cette action est irrversible. Le client  ",(oe=e.find(K=>K.id===I))==null?void 0:oe.company_name,"  et toutes ses donnes associes seront dfinitivement supprims."]})]}),s.jsxs(Vm,{children:[s.jsx(Km,{children:"Annuler"}),s.jsx(qm,{onClick:ge,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Supprimer"})]})]})})]})}function tPe(){const e=M5(),t=Dz(),[r,n]=w.useState(null),a=e.clients.length,i=e.clients.filter(d=>d.is_active).length,o=new Date().getFullYear(),l=e.projections.filter(d=>d.year===o).reduce((d,f)=>d+Number(f.projected_revenue||0),0),c=e.clients.find(d=>d.id===r),u=t.opportunities.filter(d=>!["won","lost"].includes(d.stage)).reduce((d,f)=>d+(f.estimated_amount||0),0);return e.isLoading&&t.isLoading?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"CRM  Clients"}),s.jsx("p",{className:"text-muted-foreground",children:"Gestion des clients, pipeline commercial et suivi des interactions"})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-5",children:[s.jsx(kt,{label:"Total Clients",value:a}),s.jsx(kt,{label:"Clients Actifs",value:i,trend:i>0?"up":"neutral"}),s.jsx(kt,{label:`CA ${o}`,value:`${(l/1e3).toFixed(0)} k`}),s.jsx(kt,{label:"Catgories",value:e.categories.length}),s.jsx(kt,{label:"Pipeline",value:`${(u/1e3).toFixed(0)} k`})]}),s.jsxs(Ya,{defaultValue:"clients",className:"space-y-4",children:[s.jsxs(Na,{children:[s.jsxs(Ct,{value:"clients",children:[s.jsx(xi,{className:"h-4 w-4 mr-2"}),"Clients"]}),s.jsxs(Ct,{value:"pipeline",children:[s.jsx(wH,{className:"h-4 w-4 mr-2"}),"Pipeline"]}),s.jsxs(Ct,{value:"fiches",children:[s.jsx(xi,{className:"h-4 w-4 mr-2"}),"Fiches Clients"]})]}),s.jsx(Mt,{value:"clients",children:s.jsx(ePe,{clients:e.clients,projections:e.projections,deliveryFeeTiers:e.deliveryFeeTiers,paymentTermsOptions:e.paymentTermsOptions,deliveryMethods:e.deliveryMethods,categories:e.categories,onUpsertClient:e.upsertClient,onDeleteClient:e.deleteClient,onBulkImport:e.bulkImportClients,onUpsertProjection:e.upsertProjection,getClientProjections:e.getClientProjections,onAddDeliveryFee:e.addDeliveryFeeTier,onDeleteDeliveryFee:e.deleteDeliveryFeeTier,onAddPaymentTerm:e.addPaymentTerm,onDeletePaymentTerm:e.deletePaymentTerm,onAddDeliveryMethod:e.addDeliveryMethod,onDeleteDeliveryMethod:e.deleteDeliveryMethod,onAddCategory:e.addCategory,onDeleteCategory:e.deleteCategory,onUpdateCategory:e.updateCategory})}),s.jsx(Mt,{value:"pipeline",children:s.jsx(mke,{opportunities:t.opportunities,customers:e.clients.map(d=>({id:d.id,company_name:d.company_name})),onCreateOpportunity:t.createOpportunity,onUpdateOpportunity:t.updateOpportunity,onDeleteOpportunity:t.deleteOpportunity})}),s.jsx(Mt,{value:"fiches",className:"space-y-4",children:s.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[s.jsx("div",{className:"lg:col-span-1",children:s.jsx(lke,{clients:e.clients,selectedId:r,onSelect:n,onRefresh:e.refreshData})}),s.jsx("div",{className:"lg:col-span-2",children:c?s.jsx(hke,{client:c,interactions:t.getCustomerInteractions(c.id),opportunities:t.getCustomerOpportunities(c.id),onCreateInteraction:t.createInteraction}):s.jsx(St,{className:"h-full min-h-[400px] flex items-center justify-center",children:s.jsxs(Rt,{className:"text-center text-muted-foreground",children:[s.jsx(xi,{className:"h-12 w-12 mx-auto mb-4 opacity-30"}),s.jsx("p",{children:"Slectionnez un client pour voir ses dtails"})]})})})]})})]})]})}function rPe(){const{computed:e}=rs(),{monthlyTreasuryProjection:t}=e;if(!t.months.length)return s.jsx(Ke,{title:"Plan de Trsorerie Mensuel",children:s.jsx("p",{className:"text-muted-foreground text-center py-8",children:"Aucune donne mensuelle disponible."})});const r=[...new Set(t.months.map(n=>n.year))];return s.jsx("div",{className:"space-y-6",children:r.map(n=>{const a=t.months.filter(i=>i.year===n);return s.jsx(Ke,{title:`Trsorerie ${n}`,children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-xs",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b",children:[s.jsx("th",{className:"text-left py-2 px-2",children:"Mois"}),s.jsx("th",{className:"text-right py-2 px-2",children:"Entres"}),s.jsx("th",{className:"text-right py-2 px-2",children:"Sorties"}),s.jsx("th",{className:"text-right py-2 px-2",children:"Solde"}),s.jsx("th",{className:"text-right py-2 px-2",children:"Trsorerie"})]})}),s.jsx("tbody",{children:a.map(i=>s.jsxs("tr",{className:ue("border-b",i.treasuryEnd<0&&"bg-destructive/5"),children:[s.jsx("td",{className:"py-1.5 px-2",children:i.monthName}),s.jsx("td",{className:"py-1.5 px-2 text-right font-mono-numbers",children:re(i.totalInflows,!0)}),s.jsx("td",{className:"py-1.5 px-2 text-right font-mono-numbers text-muted-foreground",children:re(i.totalOutflows,!0)}),s.jsxs("td",{className:ue("py-1.5 px-2 text-right font-mono-numbers",i.netCashFlow>=0?"text-[hsl(var(--positive))]":"text-destructive"),children:[i.netCashFlow>=0?"+":"",re(i.netCashFlow,!0)]}),s.jsx("td",{className:ue("py-1.5 px-2 text-right font-mono-numbers font-medium",i.treasuryEnd<0&&"text-destructive"),children:re(i.treasuryEnd,!0)})]},`${i.year}-${i.month}`))})]})})},n)})})}const Ow={name:"",inputMode:"calculated",principalAmount:5e4,interestRate:.03,fixedPaymentAmount:0,startDate:{year:2025,month:0},endDate:{year:2028,month:0},frequency:"monthly"},Tw={monthly:"Mensuel",quarterly:"Trimestriel",annual:"Annuel"},nPe={monthly:"/mois",quarterly:"/trim.",annual:"/an"};function aPe({loans:e,onChange:t,startYear:r,durationYears:n}){const[a,i]=w.useState(!1),[o,l]=w.useState(null),[c,u]=w.useState(Ow),d=Array.from({length:n+2},(v,x)=>r+x),f=()=>{l(null),u({...Ow,startDate:{year:r,month:0},endDate:{year:r+3,month:0}}),i(!0)},h=v=>{l(v.id);const{id:x,...b}=v;u({...Ow,...b}),i(!0)},m=()=>{c.name.trim()&&(t(o?e.map(v=>v.id===o?{...v,...c}:v):[...e,{id:`loan-${Date.now()}`,...c}]),i(!1))},y=v=>{t(e.filter(x=>x.id!==v))},g=v=>{if(v.inputMode==="fixed")return v.fixedPaymentAmount||0;const x=v.startDate.year*12+v.startDate.month,_=v.endDate.year*12+v.endDate.month-x;if(_<=0)return 0;if(v.frequency==="annual"){const S=Math.max(1,Math.round(_/12)),C=v.interestRate;return C===0?v.principalAmount/S:v.principalAmount*C*Math.pow(1+C,S)/(Math.pow(1+C,S)-1)}if(v.frequency==="quarterly"){const S=Math.max(1,Math.round(_/3)),C=v.interestRate/4;return C===0?v.principalAmount/S:v.principalAmount*C*Math.pow(1+C,S)/(Math.pow(1+C,S)-1)}const j=v.interestRate/12;return j===0?v.principalAmount/_:v.principalAmount*j*Math.pow(1+j,_)/(Math.pow(1+j,_)-1)},p=v=>{const x=g(v),b=v.startDate.year*12+v.startDate.month,j=v.endDate.year*12+v.endDate.month-b;return j<=0?0:v.frequency==="annual"?x*Math.max(1,Math.round(j/12)):v.frequency==="quarterly"?x*Math.max(1,Math.round(j/3)):x*j};return s.jsxs(s.Fragment,{children:[s.jsx(Ke,{title:"Gestion des Prts",action:s.jsxs(ne,{variant:"outline",size:"sm",onClick:f,children:[s.jsx(qt,{className:"h-4 w-4 mr-1"}),"Ajouter un Prt"]}),children:e.length===0?s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(jH,{className:"h-10 w-10 mx-auto mb-3 opacity-40"}),s.jsx("p",{children:"Aucun prt configur"}),s.jsx("p",{className:"text-xs mt-1",children:"Ajoutez vos prts pour intgrer les chances dans le plan de trsorerie."})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Kt,{children:[s.jsx(Gt,{children:s.jsxs(_e,{children:[s.jsx(ce,{children:"Nom"}),s.jsx(ce,{children:"Mode"}),s.jsx(ce,{className:"text-right",children:"Capital"}),s.jsx(ce,{className:"text-right",children:"Taux"}),s.jsx(ce,{children:"Frquence"}),s.jsx(ce,{children:"Priode"}),s.jsx(ce,{className:"text-right",children:"chance"}),s.jsx(ce,{className:"text-right",children:"Cot Total"}),s.jsx(ce,{})]})}),s.jsx(Yt,{children:e.map(v=>{const x=g(v),b=p(v);return s.jsxs(_e,{children:[s.jsx(W,{className:"font-medium",children:v.name}),s.jsx(W,{children:s.jsx(Pe,{variant:"outline",className:"text-xs",children:v.inputMode==="fixed"?s.jsxs(s.Fragment,{children:[s.jsx($P,{className:"h-3 w-3 mr-1"}),"Fixe"]}):s.jsxs(s.Fragment,{children:[s.jsx(fv,{className:"h-3 w-3 mr-1"}),"Calcul"]})})}),s.jsx(W,{className:"text-right font-mono-numbers",children:v.inputMode==="calculated"?re(v.principalAmount,!0):"-"}),s.jsx(W,{className:"text-right font-mono-numbers",children:v.inputMode==="calculated"?`${(v.interestRate*100).toFixed(1)}%`:"-"}),s.jsx(W,{children:s.jsx(Pe,{variant:"secondary",className:"text-xs",children:Tw[v.frequency]})}),s.jsxs(W,{className:"text-xs",children:[El[v.startDate.month].slice(0,3)," ",v.startDate.year,"  ",El[v.endDate.month].slice(0,3)," ",v.endDate.year]}),s.jsxs(W,{className:"text-right font-mono-numbers font-medium",children:[re(x),s.jsx("span",{className:"text-xs text-muted-foreground ml-1",children:nPe[v.frequency]})]}),s.jsx(W,{className:"text-right font-mono-numbers text-muted-foreground",children:re(b,!0)}),s.jsx(W,{children:s.jsxs("div",{className:"flex gap-1",children:[s.jsx(ne,{size:"sm",variant:"ghost",onClick:()=>h(v),children:s.jsx(sC,{className:"h-3 w-3"})}),s.jsx(ne,{size:"sm",variant:"ghost",className:"text-destructive",onClick:()=>y(v.id),children:s.jsx(nr,{className:"h-3 w-3"})})]})})]},v.id)})})]})})}),s.jsx(mr,{open:a,onOpenChange:i,children:s.jsxs(ar,{className:"max-w-lg",children:[s.jsx(ir,{children:s.jsx(sr,{children:o?"Modifier le Prt":"Nouveau Prt"})}),s.jsxs("div",{className:"space-y-4 py-2",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ne,{children:"Nom du prt"}),s.jsx(xe,{value:c.name,onChange:v=>u(x=>({...x,name:v.target.value})),placeholder:"Ex: BPI Innovation"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ne,{children:"Mode de saisie"}),s.jsx(Ya,{value:c.inputMode,onValueChange:v=>u(x=>({...x,inputMode:v})),children:s.jsxs(Na,{className:"w-full",children:[s.jsxs(Ct,{value:"calculated",className:"flex-1",children:[s.jsx(fv,{className:"h-4 w-4 mr-1"}),"Calculer l'chance"]}),s.jsxs(Ct,{value:"fixed",className:"flex-1",children:[s.jsx($P,{className:"h-4 w-4 mr-1"}),"Saisir l'chance"]})]})})]}),c.inputMode==="calculated"&&s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ne,{children:"Montant emprunt ()"}),s.jsx(xe,{type:"number",value:c.principalAmount,onChange:v=>u(x=>({...x,principalAmount:Number(v.target.value)}))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ne,{children:"Taux d'intrt annuel (%)"}),s.jsx(xe,{type:"number",step:"0.1",value:(c.interestRate*100).toFixed(1),onChange:v=>u(x=>({...x,interestRate:Number(v.target.value)/100}))})]})]}),c.inputMode==="fixed"&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ne,{children:"Montant de l'chance ()"}),s.jsx(xe,{type:"number",value:c.fixedPaymentAmount||0,onChange:v=>u(x=>({...x,fixedPaymentAmount:Number(v.target.value)})),placeholder:"Montant fixe par priode"}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Ce montant sera appliqu  chaque chance (",Tw[c.frequency].toLowerCase(),")."]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ne,{children:"Frquence des chances"}),s.jsxs(lt,{value:c.frequency,onValueChange:v=>u(x=>({...x,frequency:v})),children:[s.jsx(st,{children:s.jsx(ct,{})}),s.jsxs(ot,{children:[s.jsx(De,{value:"monthly",children:"Mensuel"}),s.jsx(De,{value:"quarterly",children:"Trimestriel"}),s.jsx(De,{value:"annual",children:"Annuel"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ne,{children:"Date de dbut"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(lt,{value:c.startDate.month.toString(),onValueChange:v=>u(x=>({...x,startDate:{...x.startDate,month:Number(v)}})),children:[s.jsx(st,{className:"flex-1",children:s.jsx(ct,{})}),s.jsx(ot,{children:El.map((v,x)=>s.jsx(De,{value:x.toString(),children:v.slice(0,3)},x))})]}),s.jsxs(lt,{value:c.startDate.year.toString(),onValueChange:v=>u(x=>({...x,startDate:{...x.startDate,year:Number(v)}})),children:[s.jsx(st,{className:"w-24",children:s.jsx(ct,{})}),s.jsx(ot,{children:d.map(v=>s.jsx(De,{value:v.toString(),children:v},v))})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ne,{children:"Date de fin"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(lt,{value:c.endDate.month.toString(),onValueChange:v=>u(x=>({...x,endDate:{...x.endDate,month:Number(v)}})),children:[s.jsx(st,{className:"flex-1",children:s.jsx(ct,{})}),s.jsx(ot,{children:El.map((v,x)=>s.jsx(De,{value:x.toString(),children:v.slice(0,3)},x))})]}),s.jsxs(lt,{value:c.endDate.year.toString(),onValueChange:v=>u(x=>({...x,endDate:{...x.endDate,year:Number(v)}})),children:[s.jsx(st,{className:"w-24",children:s.jsx(ct,{})}),s.jsx(ot,{children:d.map(v=>s.jsx(De,{value:v.toString(),children:v},v))})]})]})]})]}),c.name.trim()&&s.jsxs("div",{className:"p-3 rounded-lg bg-muted/40 border text-sm space-y-1",children:[s.jsx("div",{className:"font-medium",children:"Aperu"}),s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{className:"text-muted-foreground",children:["chance ",Tw[c.frequency].toLowerCase()," :"]}),s.jsx("span",{className:"font-mono-numbers font-medium",children:re(g({id:"",...c}))})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Cot total :"}),s.jsx("span",{className:"font-mono-numbers",children:re(p({id:"",...c}),!0)})]})]})]}),s.jsxs(Ho,{children:[s.jsx(ne,{variant:"outline",onClick:()=>i(!1),children:"Annuler"}),s.jsx(ne,{onClick:m,disabled:!c.name.trim(),children:"Sauvegarder"})]})]})})]})}function iPe({capexPayments:e,onChange:t,products:r,startYear:n,durationYears:a}){const i=Array.from({length:a},(f,h)=>n+h),o=w.useMemo(()=>{const f=new Map;return e.forEach(h=>{const m=f.get(h.productId)||[];m.push(h),f.set(h.productId,m)}),f},[e]),l=r.filter(f=>f.devCost>0),c=f=>{const m=e.filter(v=>v.productId===f.id).reduce((v,x)=>v+x.percentageOfTotal,0),y=Math.max(0,100-m),g=Math.min(y,25),p={id:`capex-${Date.now()}`,productId:f.id,productName:f.name,year:f.launchYear,month:0,percentageOfTotal:g,amount:f.devCost*g/100};t([...e,p])},u=(f,h)=>{t(e.map(m=>{if(m.id!==f)return m;const y={...m,...h},g=r.find(p=>p.id===y.productId);return g&&(y.amount=g.devCost*y.percentageOfTotal/100),y}))},d=f=>{t(e.filter(h=>h.id!==f))};return s.jsx(Ke,{title:"Dblocage CAPEX Produits",children:l.length===0?s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(rc,{className:"h-10 w-10 mx-auto mb-3 opacity-40"}),s.jsx("p",{children:"Aucun produit avec cot de dveloppement"})]}):s.jsx("div",{className:"space-y-6",children:l.map(f=>{const h=o.get(f.id)||[],m=h.reduce((y,g)=>y+g.percentageOfTotal,0);return h.reduce((y,g)=>y+g.amount,0),s.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:f.name}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["R&D : ",re(f.devCost,!0),"  Lancement : ",f.launchYear]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(Pe,{variant:m===100?"default":"secondary",children:[m,"% planifi"]}),s.jsxs(ne,{size:"sm",variant:"outline",onClick:()=>c(f),disabled:m>=100,children:[s.jsx(qt,{className:"h-3 w-3 mr-1"}),"Tranche"]})]})]}),h.length>0&&s.jsxs(Kt,{children:[s.jsx(Gt,{children:s.jsxs(_e,{children:[s.jsx(ce,{children:"Mois"}),s.jsx(ce,{children:"Anne"}),s.jsx(ce,{className:"text-right",children:"% du total"}),s.jsx(ce,{className:"text-right",children:"Montant"}),s.jsx(ce,{})]})}),s.jsx(Yt,{children:h.map(y=>s.jsxs(_e,{children:[s.jsx(W,{children:s.jsxs(lt,{value:y.month.toString(),onValueChange:g=>u(y.id,{month:Number(g)}),children:[s.jsx(st,{className:"h-8 w-28",children:s.jsx(ct,{})}),s.jsx(ot,{children:El.map((g,p)=>s.jsx(De,{value:p.toString(),children:g},p))})]})}),s.jsx(W,{children:s.jsxs(lt,{value:y.year.toString(),onValueChange:g=>u(y.id,{year:Number(g)}),children:[s.jsx(st,{className:"h-8 w-20",children:s.jsx(ct,{})}),s.jsx(ot,{children:i.map(g=>s.jsx(De,{value:g.toString(),children:g},g))})]})}),s.jsx(W,{className:"text-right",children:s.jsx(xe,{type:"number",className:"h-8 w-20 text-right ml-auto",value:y.percentageOfTotal,min:1,max:100,onChange:g=>u(y.id,{percentageOfTotal:Number(g.target.value)})})}),s.jsx(W,{className:"text-right font-mono-numbers font-medium",children:re(y.amount,!0)}),s.jsx(W,{children:s.jsx(ne,{size:"sm",variant:"ghost",className:"text-destructive",onClick:()=>d(y.id),children:s.jsx(nr,{className:"h-3 w-3"})})})]},y.id))})]}),h.length===0&&s.jsx("p",{className:"text-xs text-muted-foreground text-center py-2",children:"Aucune tranche planifie. Le CAPEX sera considr  l'anne de lancement."})]},f.id)})})})}const gg=[{key:"ca",name:"CA",color:"hsl(150, 60%, 40%)",type:"bar",defaultVisible:!1},{key:"cogs",name:"Achats matire",color:"hsl(38, 92%, 50%)",type:"bar",defaultVisible:!0},{key:"payroll",name:"Masse salariale",color:"hsl(210, 70%, 50%)",type:"bar",defaultVisible:!0},{key:"opex",name:"OPEX",color:"hsl(280, 60%, 50%)",type:"bar",defaultVisible:!0},{key:"capex",name:"CAPEX",color:"hsl(0, 0%, 45%)",type:"bar",defaultVisible:!0},{key:"loans",name:"chances prts",color:"hsl(0, 85%, 50%)",type:"bar",defaultVisible:!0},{key:"tresorerie",name:"Trsorerie",color:"hsl(150, 60%, 40%)",type:"line",defaultVisible:!0},{key:"cashFlow",name:"Cash Flow",color:"hsl(210, 90%, 55%)",type:"line",defaultVisible:!1}];function sPe({projection:e,startYear:t,durationYears:r}){const[n,a]=w.useState("annual"),[i,o]=w.useState(t),[l,c]=w.useState(()=>new Set(gg.filter(p=>p.defaultVisible).map(p=>p.key))),u=Array.from({length:r},(p,v)=>t+v),d=p=>{c(v=>{const x=new Set(v);return x.has(p)?x.delete(p):x.add(p),x})},f=w.useMemo(()=>{const p=Hd(e.months);return u.map(v=>{const x=p.get(v);if(!x)return{label:v.toString(),ca:0,cogs:0,payroll:0,opex:0,capex:0,loans:0,tresorerie:0,cashFlow:0};const _=e.months.filter(S=>S.year===v).reduce((S,C)=>S+C.capexPayments,0),j=x.loanPayments;return{label:v.toString(),ca:x.revenue/1e3,cogs:x.cogs/1e3,payroll:x.payroll/1e3,opex:x.opex/1e3,capex:_/1e3,loans:j/1e3,tresorerie:x.treasuryEnd/1e3,cashFlow:x.netCashFlow/1e3}})},[e,u]),h=w.useMemo(()=>e.months.filter(p=>p.year===i).map(p=>({label:p.monthName.slice(0,3),ca:p.revenue/1e3,cogs:p.cogs/1e3,payroll:p.payroll/1e3,opex:p.opex/1e3,capex:p.capexPayments/1e3,loans:p.loanPayments/1e3,tresorerie:p.treasuryEnd/1e3,cashFlow:p.netCashFlow/1e3})),[e,i]),m=n==="annual"?h:f,y=gg.filter(p=>p.type==="bar"&&l.has(p.key)),g=gg.filter(p=>p.type==="line"&&l.has(p.key));return s.jsx(Ke,{title:"Suivi de Trsorerie Dtaill",action:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(JN,{children:[s.jsx(ek,{asChild:!0,children:s.jsxs(ne,{variant:"outline",size:"sm",children:[s.jsx(Wu,{className:"h-3.5 w-3.5 mr-1"}),"Sries"]})}),s.jsxs(H0,{className:"w-56",align:"end",children:[s.jsx("p",{className:"text-xs font-medium mb-2",children:"Sries affiches"}),s.jsx("div",{className:"space-y-2",children:gg.map(p=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(za,{id:`series-${p.key}`,checked:l.has(p.key),onCheckedChange:()=>d(p.key)}),s.jsx("div",{className:"w-3 h-3 rounded-sm flex-shrink-0",style:{backgroundColor:p.color}}),s.jsx(Ne,{htmlFor:`series-${p.key}`,className:"text-xs cursor-pointer",children:p.name})]},p.key))})]})]}),s.jsxs(lt,{value:n,onValueChange:p=>a(p),children:[s.jsx(st,{className:"h-8 w-40",children:s.jsx(ct,{})}),s.jsxs(ot,{children:[s.jsx(De,{value:"full-period",children:"Toute la priode"}),s.jsx(De,{value:"annual",children:"Vue annuelle"})]})]}),n==="annual"&&s.jsxs(lt,{value:i.toString(),onValueChange:p=>o(Number(p)),children:[s.jsx(st,{className:"h-8 w-24",children:s.jsx(ct,{})}),s.jsx(ot,{children:u.map(p=>s.jsx(De,{value:p.toString(),children:p},p))})]})]}),children:s.jsx("div",{className:"h-80",children:s.jsx(wr,{width:"100%",height:"100%",children:s.jsxs(Sd,{data:m,children:[s.jsx(Nr,{strokeDasharray:"3 3"}),s.jsx(Jt,{dataKey:"label"}),s.jsx(Vt,{tickFormatter:p=>`${p}k`}),s.jsx(Nt,{formatter:p=>`${p.toFixed(0)}k`}),s.jsx(Br,{}),y.map(p=>s.jsx(Wt,{dataKey:p.key,name:p.name,stackId:"costs",fill:p.color},p.key)),g.map(p=>s.jsx(Rn,{type:"monotone",dataKey:p.key,name:p.name,stroke:p.color,strokeWidth:3,dot:{r:4}},p.key))]})})})})}function oPe({projection:e,startYear:t,durationYears:r}){const[n,a]=w.useState("annual"),[i,o]=w.useState(t),l=Array.from({length:r},(f,h)=>t+h),c=w.useMemo(()=>Hd(e.months),[e]),u=w.useMemo(()=>e.months.filter(f=>f.year===i),[e,i]),d=(f,h,m,y)=>s.jsxs(_e,{className:m,children:[s.jsx(W,{className:"sticky left-0 bg-background z-10 font-medium",children:f}),h.map((g,p)=>s.jsx(W,{className:ue("text-right font-mono-numbers",y&&g>0&&"text-destructive"),children:y&&g>0?`(${re(g,!0)})`:re(g,!0)},p))]});if(n==="monthly"){const f=u;return s.jsx(Ke,{title:"Dtail Prvisionnel",action:s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(lt,{value:n,onValueChange:h=>a(h),children:[s.jsx(st,{className:"h-8 w-36",children:s.jsx(ct,{})}),s.jsxs(ot,{children:[s.jsx(De,{value:"annual",children:"Par anne"}),s.jsx(De,{value:"monthly",children:"Par mois"})]})]}),s.jsxs(lt,{value:i.toString(),onValueChange:h=>o(Number(h)),children:[s.jsx(st,{className:"h-8 w-24",children:s.jsx(ct,{})}),s.jsx(ot,{children:l.map(h=>s.jsx(De,{value:h.toString(),children:h},h))})]})]}),children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Kt,{children:[s.jsx(Gt,{children:s.jsxs(_e,{children:[s.jsx(ce,{className:"sticky left-0 bg-background z-10",children:"Poste"}),f.map(h=>s.jsx(ce,{className:"text-right min-w-20",children:El[h.month].slice(0,3)},h.month))]})}),s.jsxs(Yt,{children:[d("CA (encaissements)",f.map(h=>h.revenue),"bg-muted/30"),d("Achats matire (COGS)",f.map(h=>h.cogs),"",!0),d("Masse salariale",f.map(h=>h.payroll),"",!0),d("OPEX",f.map(h=>h.opex),"",!0),d("Charges variables",f.map(h=>h.variableCharges),"",!0),d("chances prts",f.map(h=>h.loanPayments),"",!0),d("CAPEX produits",f.map(h=>h.capexPayments),"",!0),s.jsxs(_e,{className:"border-t-2",children:[s.jsx(W,{className:"sticky left-0 bg-background z-10 font-bold",children:"Cash Flow Net"}),f.map((h,m)=>s.jsxs(W,{className:ue("text-right font-mono-numbers font-bold",h.netCashFlow<0?"text-destructive":"text-green-600"),children:[h.netCashFlow>=0?"+":"",re(h.netCashFlow,!0)]},m))]}),s.jsxs(_e,{className:"bg-primary/5",children:[s.jsx(W,{className:"sticky left-0 bg-primary/5 z-10 font-bold",children:"Trsorerie Fin"}),f.map((h,m)=>s.jsx(W,{className:ue("text-right font-mono-numbers font-bold",h.treasuryEnd<0&&"text-destructive"),children:re(h.treasuryEnd,!0)},m))]})]})]})})})}return s.jsx(Ke,{title:"Dtail Prvisionnel",action:s.jsxs(lt,{value:n,onValueChange:f=>a(f),children:[s.jsx(st,{className:"h-8 w-36",children:s.jsx(ct,{})}),s.jsxs(ot,{children:[s.jsx(De,{value:"annual",children:"Par anne"}),s.jsx(De,{value:"monthly",children:"Par mois"})]})]}),children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Kt,{children:[s.jsx(Gt,{children:s.jsxs(_e,{children:[s.jsx(ce,{className:"sticky left-0 bg-background z-10",children:"Poste"}),l.map(f=>s.jsx(ce,{className:"text-right min-w-24",children:f},f))]})}),s.jsxs(Yt,{children:[d("CA (encaissements)",l.map(f=>{var h;return((h=c.get(f))==null?void 0:h.revenue)||0}),"bg-muted/30"),d("Achats matire (COGS)",l.map(f=>{var h;return((h=c.get(f))==null?void 0:h.cogs)||0}),"",!0),d("Masse salariale",l.map(f=>{var h;return((h=c.get(f))==null?void 0:h.payroll)||0}),"",!0),d("OPEX",l.map(f=>{var h;return((h=c.get(f))==null?void 0:h.opex)||0}),"",!0),d("Charges variables",l.map(f=>{var h;return((h=c.get(f))==null?void 0:h.variableCharges)||0}),"",!0),d("chances prts",l.map(f=>{var h;return((h=c.get(f))==null?void 0:h.loanPayments)||0}),"",!0),d("CAPEX produits",l.map(f=>e.months.filter(m=>m.year===f).reduce((m,y)=>m+y.capexPayments,0)),"",!0),d("Leves de fonds",l.map(f=>{var h;return((h=c.get(f))==null?void 0:h.fundingInjection)||0}),"bg-green-50 dark:bg-green-950/20"),s.jsxs(_e,{className:"border-t-2",children:[s.jsx(W,{className:"sticky left-0 bg-background z-10 font-bold",children:"Cash Flow Net"}),l.map(f=>{const h=c.get(f),m=(h==null?void 0:h.netCashFlow)||0;return s.jsxs(W,{className:ue("text-right font-mono-numbers font-bold",m<0?"text-destructive":"text-green-600"),children:[m>=0?"+":"",re(m,!0)]},f)})]}),s.jsxs(_e,{className:"bg-primary/5",children:[s.jsx(W,{className:"sticky left-0 bg-primary/5 z-10 font-bold",children:"Trsorerie Fin"}),l.map(f=>{const h=c.get(f),m=(h==null?void 0:h.treasuryEnd)||0;return s.jsx(W,{className:ue("text-right font-mono-numbers font-bold",m<0&&"text-destructive"),children:re(m,!0)},f)})]})]})]})})})}const iR=["Jan","Fv","Mar","Avr","Mai","Jun","Jul","Ao","Sep","Oct","Nov","Dc"];function sR({title:e,description:t,seasonality:r,onChange:n}){const a=(d,f)=>{n({...r,[d]:f})},i=()=>{n({0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0})},o=Object.values(r).map(d=>1+d),l=o.reduce((d,f)=>d+f,0),c=l>0?o.map(d=>d/l*12):Array(12).fill(1),u=Object.values(r).every(d=>d===0);return s.jsxs(Ke,{title:e,action:s.jsxs("div",{className:"flex items-center gap-2",children:[u&&s.jsx(Pe,{variant:"secondary",className:"text-xs",children:"Rpartition uniforme"}),s.jsxs(ne,{variant:"ghost",size:"sm",onClick:i,disabled:u,children:[s.jsx(TH,{className:"h-3.5 w-3.5 mr-1"}),"Rinitialiser"]})]}),children:[t&&s.jsx("p",{className:"text-xs text-muted-foreground mb-4",children:t}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-x-6 gap-y-4",children:Array.from({length:12},(d,f)=>f).map(d=>{const f=r[d]||0,m=(c[d]/12*100).toFixed(1);return s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Ne,{className:"text-xs",children:iR[d]}),s.jsxs("span",{className:ue("text-xs font-mono-numbers",f>0?"text-[hsl(var(--positive))]":f<0?"text-destructive":"text-muted-foreground"),children:[f>0?"+":"",(f*100).toFixed(0),"%"]})]}),s.jsx(Ur,{value:[f*100],onValueChange:([y])=>a(d,y/100),min:-80,max:200,step:5}),s.jsxs("div",{className:"text-[10px] text-muted-foreground text-right",children:[" ",m,"% annuel"]})]},d)})}),s.jsx("div",{className:"mt-4 flex gap-0.5 h-8 rounded overflow-hidden",children:c.map((d,f)=>s.jsx("div",{className:"flex items-end justify-center transition-all",style:{flex:d,backgroundColor:`hsl(var(--primary) / ${.3+d/Math.max(...c)*.7})`},children:s.jsx("span",{className:"text-[9px] font-mono-numbers text-primary-foreground/80",children:iR[f]})},f))})]})}function lPe({terms:e,onChange:t}){const r=e.reduce((l,c)=>l+c.percentage,0),n=Math.abs(r-100)<.1,a=()=>{const l=Math.max(0,100-r),c=e.length>0?Math.max(...e.map(u=>u.delayMonths))+1:0;t([...e,{delayMonths:c,percentage:l}])},i=l=>{t(e.filter((c,u)=>u!==l))},o=(l,c,u)=>{const d=e.map((f,h)=>h===l?{...f,[c]:u}:f);t(d)};return s.jsxs(Ke,{title:"Conditions de Paiement Fournisseur",action:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(Pe,{variant:n?"default":"destructive",className:"text-xs",children:["Total: ",r.toFixed(0),"%"]}),s.jsxs(ne,{variant:"outline",size:"sm",onClick:a,children:[s.jsx(qt,{className:"h-3.5 w-3.5 mr-1"}),"Ajouter chance"]})]}),children:[s.jsx("p",{className:"text-xs text-muted-foreground mb-4",children:"Dfinissez comment les achats matire sont pays. Chaque ligne indique le dcalage en mois et le pourcentage du montant total."}),e.length===0?s.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Aucune condition configure  paiement comptant par dfaut."}):s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-[1fr_1fr_auto] gap-3 items-end",children:[s.jsx(Ne,{className:"text-xs",children:"Dlai (mois)"}),s.jsx(Ne,{className:"text-xs",children:"% du paiement"}),s.jsx("div",{className:"w-8"})]}),e.map((l,c)=>s.jsxs("div",{className:"grid grid-cols-[1fr_1fr_auto] gap-3 items-center",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-xs text-muted-foreground whitespace-nowrap",children:"M+"}),s.jsx(xe,{type:"number",min:0,max:12,value:l.delayMonths,onChange:u=>o(c,"delayMonths",parseInt(u.target.value)||0),className:"h-8 text-sm"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(xe,{type:"number",min:0,max:100,step:5,value:l.percentage,onChange:u=>o(c,"percentage",parseFloat(u.target.value)||0),className:ue("h-8 text-sm",!n&&"border-destructive")}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"%"})]}),s.jsx(ne,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>i(c),children:s.jsx(nr,{className:"h-3.5 w-3.5 text-destructive"})})]},c))]}),!n&&e.length>0&&s.jsxs("p",{className:"text-xs text-destructive mt-3",children:[" Le total doit tre gal  100%. Actuellement : ",r.toFixed(0),"%."]}),e.length>0&&s.jsxs("div",{className:"mt-4 p-3 bg-muted/30 rounded-lg",children:[s.jsx(Ne,{className:"text-xs mb-2 block",children:"chancier de paiement"}),s.jsx("div",{className:"flex items-end gap-1 h-16",children:e.sort((l,c)=>l.delayMonths-c.delayMonths).map((l,c)=>s.jsxs("div",{className:"flex flex-col items-center flex-1",children:[s.jsx("div",{className:"w-full bg-primary/60 rounded-t transition-all",style:{height:`${l.percentage/100*48}px`}}),s.jsxs("span",{className:"text-[10px] text-muted-foreground mt-1",children:["M+",l.delayMonths]}),s.jsxs("span",{className:"text-[10px] font-bold font-mono-numbers",children:[l.percentage,"%"]})]},c))})]})]})}const Rw=[{id:"grossMargin",name:"Marge Brute",description:"CA - Cot des ventes",calculate:e=>e.grossMargin,format:"currency",category:"margin",defaultVisible:!0},{id:"grossMarginRate",name:"Taux de Marge Brute",description:"Marge Brute / CA",calculate:e=>e.revenue>0?e.grossMargin/e.revenue:0,format:"percent",category:"margin",defaultVisible:!0},{id:"valueAdded",name:"Valeur Ajoute",description:"Marge Brute - Charges externes (OPEX hors salaires)",calculate:e=>e.grossMargin-e.opex,format:"currency",category:"margin",defaultVisible:!0},{id:"valueAddedRate",name:"Taux de Valeur Ajoute",description:"Valeur Ajoute / CA",calculate:e=>e.revenue>0?(e.grossMargin-e.opex)/e.revenue:0,format:"percent",category:"margin",defaultVisible:!1},{id:"ebitda",name:"EBITDA (EBE)",description:"Excdent Brut d'Exploitation",calculate:e=>e.ebitda,format:"currency",category:"profitability",defaultVisible:!0},{id:"ebitdaMargin",name:"Marge EBITDA",description:"EBITDA / CA",calculate:e=>e.revenue>0?e.ebitda/e.revenue:0,format:"percent",category:"profitability",defaultVisible:!0},{id:"operatingResult",name:"Rsultat d'Exploitation",description:"EBITDA - Amortissements",calculate:e=>e.operatingResult,format:"currency",category:"profitability",defaultVisible:!0},{id:"operatingMargin",name:"Marge Oprationnelle",description:"Rsultat d'Exploitation / CA",calculate:e=>e.revenue>0?e.operatingResult/e.revenue:0,format:"percent",category:"profitability",defaultVisible:!1},{id:"cashFlow",name:"Cash Flow Oprationnel",description:"CA - COGS - OPEX - Salaires - CAPEX",calculate:e=>e.cashFlow,format:"currency",category:"cash",defaultVisible:!0},{id:"freeCashFlow",name:"Free Cash Flow",description:"Cash Flow hors financement",calculate:e=>e.cashFlow,format:"currency",category:"cash",defaultVisible:!1},{id:"treasuryEnd",name:"Trsorerie Fin de Priode",description:"Position de trsorerie en fin d'anne",calculate:e=>e.treasuryEnd,format:"currency",category:"cash",defaultVisible:!0},{id:"cashBurn",name:"Cash Burn",description:"Consommation de trsorerie (si ngatif)",calculate:e=>e.cashFlow<0?Math.abs(e.cashFlow):0,format:"currency",category:"cash",defaultVisible:!1},{id:"payrollRatio",name:"Ratio Masse Salariale / CA",description:"Poids des salaires dans le CA",calculate:e=>e.revenue>0?e.payroll/e.revenue:0,format:"percent",category:"ratio",defaultVisible:!0},{id:"opexRatio",name:"Ratio OPEX / CA",description:"Poids des charges oprationnelles",calculate:e=>e.revenue>0?e.opex/e.revenue:0,format:"percent",category:"ratio",defaultVisible:!0},{id:"capexRatio",name:"Ratio CAPEX / CA",description:"Intensit capitalistique",calculate:e=>e.revenue>0?e.capex/e.revenue:0,format:"percent",category:"ratio",defaultVisible:!1},{id:"productivityRatio",name:"Productivit par ",description:"CA / Masse Salariale",calculate:e=>e.payroll>0?e.revenue/e.payroll:0,format:"currency",category:"ratio",defaultVisible:!1}],cPe=[{id:"kpis",label:"KPIs Prvisionnel",elementId:"previsionnel-kpis"},{id:"treasury",label:"volution Trsorerie",elementId:"previsionnel-treasury"},{id:"cashflow",label:"Cash Flow",elementId:"previsionnel-cashflow"},{id:"sig",label:"Tableau SIG",elementId:"previsionnel-sig"}],uPe=[{id:"monthly-kpis",label:"KPIs Trsorerie",elementId:"monthly-treasury-kpis"},{id:"monthly-chart",label:"Graphique Trsorerie",elementId:"monthly-treasury-chart"},{id:"monthly-summary",label:"Rsum",elementId:"monthly-treasury-summary"}],dPe={margin:"Marges",profitability:"Rentabilit",cash:"Trsorerie",ratio:"Ratios"};function fPe(){var k;const{state:e,computed:t,saveAll:r,updateMonthlyTreasuryConfig:n}=rs(),[a,i]=w.useState(()=>{const N=new Set;return Rw.forEach(A=>{A.defaultVisible&&N.add(A.id)}),N}),[o,l]=w.useState("annual"),{startYear:c,durationYears:u}=e.scenarioSettings,d=Array.from({length:u},(N,A)=>c+A),f=e.excludeFundingFromTreasury,{monthlyTreasuryProjection:h}=t,m=w.useMemo(()=>{const N=Hd(h.months);return d.map(A=>{const O=N.get(A);if(!O)return{year:A,revenue:0,cogs:0,grossMargin:0,payroll:0,opex:0,capex:0,depreciation:0,ebitda:0,operatingResult:0,cashFlow:0,treasuryStart:0,treasuryEnd:0,fundingInjection:0};const E=t.treasuryProjection.years.find(T=>T.year===A),R=(E==null?void 0:E.capex)||0,P=(E==null?void 0:E.depreciation)||0;return{year:O.year,revenue:O.revenue,cogs:O.cogs,grossMargin:O.grossMargin,payroll:O.payroll,opex:O.opex,capex:R,depreciation:P,ebitda:O.ebitda,operatingResult:O.ebitda-P,cashFlow:O.netCashFlow,treasuryStart:O.treasuryStart,treasuryEnd:O.treasuryEnd,fundingInjection:O.fundingInjection}})},[h,t.treasuryProjection,d]),y=m.map(N=>({year:N.year,tresorerie:N.treasuryEnd/1e3,cashFlow:N.cashFlow/1e3,levee:N.fundingInjection/1e3})),g=m.map(N=>({year:N.year,ca:N.revenue/1e3,margeBrute:N.grossMargin/1e3,ebitda:N.ebitda/1e3,resultat:N.operatingResult/1e3})),p=m[0],v=m[m.length-1],x=m.reduce((N,A)=>N+A.cashFlow,0),b=((k=h.breakEvenMonth)==null?void 0:k.year)||null,_=h.minTreasury,j=N=>{i(A=>{const O=new Set(A);return O.has(N)?O.delete(N):O.add(N),O})},S=Rw.filter(N=>a.has(N.id)),C=(N,A)=>A==="percent"?nn(N):re(N,!0);return s.jsx(is,{tabKey:"previsionnel",children:s.jsxs("div",{className:"space-y-6",children:[s.jsx(Fs,{image:"rd",title:"Prvisionnel Financier",subtitle:"Projections de trsorerie, cash flow et SIG",height:"sm"}),s.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 p-4 bg-muted/30 rounded-lg border",children:[s.jsxs("div",{className:"flex items-center gap-6",children:[s.jsx(Ya,{value:o,onValueChange:N=>l(N),children:s.jsxs(Na,{children:[s.jsxs(Ct,{value:"annual",className:"flex items-center gap-2",children:[s.jsx(hv,{className:"h-4 w-4"}),"Vue Annuelle"]}),s.jsxs(Ct,{value:"monthly",className:"flex items-center gap-2",children:[s.jsx($g,{className:"h-4 w-4"}),"Plan de Trsorerie"]}),s.jsxs(Ct,{value:"params",className:"flex items-center gap-2",children:[s.jsx(Wu,{className:"h-4 w-4"}),"Prts & CAPEX"]})]})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Mode CA :"}),s.jsx(Pe,{variant:e.revenueMode==="by-product"?"default":"secondary",children:e.revenueMode==="by-product"?"Par Produit":e.revenueMode==="by-channel-global"?"Global Canaux":"Par Client"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Pe,{variant:f?"outline":"default",className:"text-xs",children:f?"Leve dsactive":"Leve active"}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"(configurable dans Scnarios)"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(Pe,{variant:"outline",className:"text-xs",children:[u," annes  ",S.length," indicateurs actifs"]}),s.jsx(hf,{pageTitle:o==="monthly"?"Plan de Trsorerie Mensuel":"Prvisionnel Financier",sections:o==="monthly"?uPe:cPe,fileName:o==="monthly"?"Plan_Tresorerie_Mensuel":"Previsionnel_Financier"}),s.jsx(Xd,{onSave:r,hasUnsavedChanges:e.hasUnsavedChanges,lastSaved:e.lastSaved?new Date(e.lastSaved):null})]})]}),o==="params"?s.jsxs("div",{className:"space-y-6",children:[s.jsx(aPe,{loans:e.monthlyTreasuryConfig.loans,onChange:N=>n({...e.monthlyTreasuryConfig,loans:N}),startYear:c,durationYears:u}),s.jsx(iPe,{capexPayments:e.monthlyTreasuryConfig.capexPayments,onChange:N=>n({...e.monthlyTreasuryConfig,capexPayments:N}),products:e.products,startYear:c,durationYears:u})]}):o==="monthly"?s.jsxs("div",{className:"space-y-6",children:[s.jsx(sPe,{projection:h,startYear:c,durationYears:u}),s.jsx(sR,{title:"Saisonnalit du CA",description:"Ajustez la rpartition mensuelle du chiffre d'affaires. Par dfaut, le CA est rparti uniformment (1/12e par mois).",seasonality:e.monthlyTreasuryConfig.revenueSeasonality,onChange:N=>n({...e.monthlyTreasuryConfig,revenueSeasonality:N})}),s.jsx(sR,{title:"Saisonnalit des Achats Matire",description:"Modulation mensuelle des achats. Les achats peuvent suivre la mme saisonnalit que le CA ou tre dcals (anticipation, stockage).",seasonality:e.monthlyTreasuryConfig.cogsSeasonality,onChange:N=>n({...e.monthlyTreasuryConfig,cogsSeasonality:N})}),s.jsx(lPe,{terms:e.monthlyTreasuryConfig.cogsPaymentTerms||[{delayMonths:0,percentage:100}],onChange:N=>n({...e.monthlyTreasuryConfig,cogsPaymentTerms:N})}),s.jsxs(Ke,{title:"Vrification Cohrence Annuelle",action:s.jsx(Pe,{variant:"outline",className:"text-xs",children:"Plan Produit vs Trsorerie"}),children:[s.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Vrifiez que la somme annuelle du CA et des achats matire correspond aux donnes du Plan Produit / moteur financier."}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-xs",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b",children:[s.jsx("th",{className:"text-left py-2 px-2",children:"Anne"}),s.jsx("th",{className:"text-right py-2 px-2",children:"CA Plan Produit"}),s.jsx("th",{className:"text-right py-2 px-2",children:"CA Trsorerie ( mois)"}),s.jsx("th",{className:"text-right py-2 px-2",children:"cart CA"}),s.jsx("th",{className:"text-right py-2 px-2",children:"Achats Plan Produit"}),s.jsx("th",{className:"text-right py-2 px-2",children:"Achats Trsorerie ( mois)"}),s.jsx("th",{className:"text-right py-2 px-2",children:"cart Achats"})]})}),s.jsx("tbody",{children:d.map(N=>{const A=t.revenueByYear.find(z=>z.year===N),O=(A==null?void 0:A.revenue)||0,E=(A==null?void 0:A.cogs)||0,R=h.months.filter(z=>z.year===N),P=R.reduce((z,Z)=>z+Z.revenue,0),T=R.reduce((z,Z)=>z+Z.cogs,0),I=P-O,M=T-E,D=Math.abs(I)<1,B=Math.abs(M)<E*.01+1;return s.jsxs("tr",{className:"border-b",children:[s.jsx("td",{className:"py-1.5 px-2 font-medium",children:N}),s.jsx("td",{className:"py-1.5 px-2 text-right font-mono-numbers",children:re(O,!0)}),s.jsx("td",{className:"py-1.5 px-2 text-right font-mono-numbers",children:re(P,!0)}),s.jsx("td",{className:ue("py-1.5 px-2 text-right font-mono-numbers",D?"text-[hsl(var(--positive))]":"text-destructive"),children:D?"":re(I,!0)}),s.jsx("td",{className:"py-1.5 px-2 text-right font-mono-numbers",children:re(E,!0)}),s.jsx("td",{className:"py-1.5 px-2 text-right font-mono-numbers",children:re(T,!0)}),s.jsx("td",{className:ue("py-1.5 px-2 text-right font-mono-numbers",B?"text-[hsl(var(--positive))]":"text-amber-600"),children:B?"":re(M,!0)})]},N)})})]})}),s.jsx("p",{className:"text-[10px] text-muted-foreground mt-2",children:"Note : les carts sur les achats peuvent tre normaux si des conditions de paiement avec dlais sont configures (report entre annes)."})]}),s.jsx(oPe,{projection:h,startYear:c,durationYears:u}),s.jsx(rPe,{})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",id:"previsionnel-kpis",children:[s.jsx(kt,{label:`CA ${(v==null?void 0:v.year)||""}`,value:re((v==null?void 0:v.revenue)||0,!0),subValue:`vs ${re((p==null?void 0:p.revenue)||0,!0)} en ${p==null?void 0:p.year}`,trend:"up"}),s.jsx(kt,{label:"Cash Flow Cumul",value:re(x,!0),subValue:`${p==null?void 0:p.year}-${v==null?void 0:v.year}`,trend:x>=0?"up":"down"}),s.jsx(kt,{label:"Trsorerie Min",value:re(_,!0),subValue:"Point bas projet",trend:_>=0?"neutral":"down"}),s.jsx(kt,{label:"Break-even",value:b?b.toString():"N/A",subValue:"Cash flow positif"})]}),s.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[s.jsx(Ke,{title:"volution de la Trsorerie",id:"previsionnel-treasury",children:s.jsx("div",{className:"h-72",children:s.jsx(wr,{width:"100%",height:"100%",children:s.jsxs(Sd,{data:y,children:[s.jsx(Nr,{strokeDasharray:"3 3"}),s.jsx(Jt,{dataKey:"year"}),s.jsx(Vt,{tickFormatter:N=>`${N}k`}),s.jsx(Nt,{formatter:N=>`${N.toFixed(0)}k`}),s.jsx(Br,{}),s.jsx(Mn,{type:"monotone",dataKey:"tresorerie",name:"Trsorerie",fill:"hsl(210, 70%, 50%)",fillOpacity:.3,stroke:"hsl(210, 70%, 50%)",strokeWidth:2}),s.jsx(Wt,{dataKey:"levee",name:"Leve",fill:"hsl(150, 60%, 40%)"})]})})})}),s.jsx(Ke,{title:"Cash Flow Annuel",id:"previsionnel-cashflow",children:s.jsx("div",{className:"h-72",children:s.jsx(wr,{width:"100%",height:"100%",children:s.jsxs(es,{data:y,children:[s.jsx(Nr,{strokeDasharray:"3 3"}),s.jsx(Jt,{dataKey:"year"}),s.jsx(Vt,{tickFormatter:N=>`${N}k`}),s.jsx(Nt,{formatter:N=>`${N.toFixed(0)}k`}),s.jsx(Wt,{dataKey:"cashFlow",name:"Cash Flow",fill:"hsl(0, 85%, 50%)"})]})})})})]}),s.jsx(Ke,{title:"Soldes Intermdiaires de Gestion",children:s.jsx("div",{className:"h-72",children:s.jsx(wr,{width:"100%",height:"100%",children:s.jsxs(UF,{data:g,children:[s.jsx(Nr,{strokeDasharray:"3 3"}),s.jsx(Jt,{dataKey:"year"}),s.jsx(Vt,{tickFormatter:N=>`${N}k`}),s.jsx(Nt,{formatter:N=>`${N.toFixed(0)}k`}),s.jsx(Br,{}),s.jsx(Rn,{type:"monotone",dataKey:"ca",name:"CA",stroke:"hsl(210, 70%, 50%)",strokeWidth:2}),s.jsx(Rn,{type:"monotone",dataKey:"margeBrute",name:"Marge Brute",stroke:"hsl(150, 60%, 40%)",strokeWidth:2}),s.jsx(Rn,{type:"monotone",dataKey:"ebitda",name:"EBITDA",stroke:"hsl(38, 92%, 50%)",strokeWidth:2}),s.jsx(Rn,{type:"monotone",dataKey:"resultat",name:"Rs. Exploitation",stroke:"hsl(0, 85%, 50%)",strokeWidth:2})]})})})}),s.jsxs(Ke,{title:"Tableau des Indicateurs",id:"previsionnel-sig",action:s.jsxs(JN,{children:[s.jsx(ek,{asChild:!0,children:s.jsxs(ne,{variant:"outline",size:"sm",children:[s.jsx(Wu,{className:"h-4 w-4 mr-2"}),"Personnaliser"]})}),s.jsx(H0,{className:"w-80 max-h-96 overflow-y-auto",align:"end",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"font-medium text-sm",children:"Indicateurs visibles"}),Object.entries(dPe).map(([N,A])=>s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:A}),Rw.filter(O=>O.category===N).map(O=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1 min-w-0 pr-2",children:[s.jsx(Ne,{htmlFor:O.id,className:"text-sm cursor-pointer",children:O.name}),s.jsx("p",{className:"text-xs text-muted-foreground truncate",children:O.description})]}),s.jsx(V0,{id:O.id,checked:a.has(O.id),onCheckedChange:()=>j(O.id)})]},O.id))]},N))]})})]}),children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Kt,{children:[s.jsx(Gt,{children:s.jsxs(_e,{children:[s.jsx(ce,{className:"sticky left-0 bg-background z-10",children:"Indicateur"}),d.map(N=>s.jsx(ce,{className:"text-right min-w-24",children:N},N)),s.jsx(ce,{className:"text-right min-w-28",children:"volution"})]})}),s.jsx(Yt,{children:S.map(N=>{const A=m.map(P=>N.calculate(P)),O=A[0]||0,E=A[A.length-1]||0,R=O!==0?(E-O)/Math.abs(O):0;return s.jsxs(_e,{children:[s.jsx(W,{className:"sticky left-0 bg-background z-10 font-medium",children:s.jsxs("div",{children:[s.jsx("span",{children:N.name}),s.jsx("span",{className:"block text-xs text-muted-foreground",children:N.description})]})}),A.map((P,T)=>s.jsx(W,{className:ue("text-right font-mono-numbers",N.format==="currency"&&P<0&&"text-destructive"),children:C(P,N.format)},T)),s.jsx(W,{className:"text-right",children:s.jsxs("div",{className:ue("flex items-center justify-end gap-1",R>0?"text-green-600":R<0?"text-destructive":"text-muted-foreground"),children:[R>0?s.jsx(Fo,{className:"h-3 w-3"}):R<0?s.jsx(uh,{className:"h-3 w-3"}):null,s.jsxs("span",{className:"font-mono-numbers text-sm",children:[R>0?"+":"",nn(R)]})]})})]},N.id)})})]})}),S.length===0&&s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(rD,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),s.jsx("p",{children:"Aucun indicateur slectionn"}),s.jsx("p",{className:"text-sm",children:'Cliquez sur "Personnaliser" pour ajouter des indicateurs'})]})]}),s.jsx(Ke,{title:"Compte de Rsultat Simplifi",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Kt,{children:[s.jsx(Gt,{children:s.jsxs(_e,{children:[s.jsx(ce,{className:"sticky left-0 bg-background z-10",children:"Poste"}),d.map(N=>s.jsx(ce,{className:"text-right min-w-24",children:N},N))]})}),s.jsxs(Yt,{children:[s.jsxs(_e,{className:"bg-muted/30",children:[s.jsx(W,{className:"sticky left-0 bg-muted/30 z-10 font-medium",children:"Chiffre d'Affaires"}),m.map((N,A)=>s.jsx(W,{className:"text-right font-mono-numbers font-medium",children:re(N.revenue,!0)},A))]}),s.jsxs(_e,{children:[s.jsx(W,{className:"sticky left-0 bg-background z-10 text-muted-foreground",children:"- Cot des Ventes"}),m.map((N,A)=>s.jsxs(W,{className:"text-right font-mono-numbers text-muted-foreground",children:["(",re(N.cogs,!0),")"]},A))]}),s.jsxs(_e,{className:"border-t-2",children:[s.jsx(W,{className:"sticky left-0 bg-background z-10 font-medium",children:"= Marge Brute"}),m.map((N,A)=>s.jsx(W,{className:"text-right font-mono-numbers font-medium",children:re(N.grossMargin,!0)},A))]}),s.jsxs(_e,{children:[s.jsx(W,{className:"sticky left-0 bg-background z-10 text-muted-foreground",children:"- Masse Salariale"}),m.map((N,A)=>s.jsxs(W,{className:"text-right font-mono-numbers text-muted-foreground",children:["(",re(N.payroll,!0),")"]},A))]}),s.jsxs(_e,{children:[s.jsx(W,{className:"sticky left-0 bg-background z-10 text-muted-foreground",children:"- Charges Oprationnelles"}),m.map((N,A)=>s.jsxs(W,{className:"text-right font-mono-numbers text-muted-foreground",children:["(",re(N.opex,!0),")"]},A))]}),s.jsxs(_e,{className:"border-t-2 bg-muted/30",children:[s.jsx(W,{className:"sticky left-0 bg-muted/30 z-10 font-medium",children:"= EBITDA"}),m.map((N,A)=>s.jsx(W,{className:ue("text-right font-mono-numbers font-medium",N.ebitda<0&&"text-destructive"),children:re(N.ebitda,!0)},A))]}),s.jsxs(_e,{children:[s.jsx(W,{className:"sticky left-0 bg-background z-10 text-muted-foreground",children:"- Amortissements"}),m.map((N,A)=>s.jsxs(W,{className:"text-right font-mono-numbers text-muted-foreground",children:["(",re(N.depreciation,!0),")"]},A))]}),s.jsxs(_e,{className:"border-t-2 bg-primary/5",children:[s.jsx(W,{className:"sticky left-0 bg-primary/5 z-10 font-bold",children:"= Rsultat d'Exploitation"}),m.map((N,A)=>s.jsx(W,{className:ue("text-right font-mono-numbers font-bold",N.operatingResult<0&&"text-destructive"),children:re(N.operatingResult,!0)},A))]})]})]})})}),s.jsx(Ke,{title:"Tableau des Flux de Trsorerie",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Kt,{children:[s.jsx(Gt,{children:s.jsxs(_e,{children:[s.jsx(ce,{className:"sticky left-0 bg-background z-10",children:"Flux"}),d.map(N=>s.jsx(ce,{className:"text-right min-w-24",children:N},N))]})}),s.jsxs(Yt,{children:[s.jsxs(_e,{children:[s.jsx(W,{className:"sticky left-0 bg-background z-10",children:"Trsorerie Dbut"}),m.map((N,A)=>s.jsx(W,{className:"text-right font-mono-numbers",children:re(N.treasuryStart,!0)},A))]}),s.jsxs(_e,{className:"bg-muted/30",children:[s.jsx(W,{className:"sticky left-0 bg-muted/30 z-10 font-medium",children:"+ Encaissements (CA)"}),m.map((N,A)=>s.jsxs(W,{className:"text-right font-mono-numbers text-green-600",children:["+",re(N.revenue,!0)]},A))]}),s.jsxs(_e,{children:[s.jsx(W,{className:"sticky left-0 bg-background z-10 text-muted-foreground",children:"- Dcaissements Exploitation"}),m.map((N,A)=>s.jsxs(W,{className:"text-right font-mono-numbers text-destructive",children:["-",re(N.cogs+N.payroll+N.opex,!0)]},A))]}),s.jsxs(_e,{children:[s.jsx(W,{className:"sticky left-0 bg-background z-10 text-muted-foreground",children:"- Investissements (CAPEX)"}),m.map((N,A)=>s.jsx(W,{className:"text-right font-mono-numbers text-destructive",children:N.capex>0?`-${re(N.capex,!0)}`:"-"},A))]}),s.jsxs(_e,{className:"border-t",children:[s.jsx(W,{className:"sticky left-0 bg-background z-10 font-medium",children:"= Cash Flow Oprationnel"}),m.map((N,A)=>s.jsxs(W,{className:ue("text-right font-mono-numbers font-medium",N.cashFlow<0?"text-destructive":"text-green-600"),children:[N.cashFlow>=0?"+":"",re(N.cashFlow,!0)]},A))]}),s.jsxs(_e,{className:"bg-green-50 dark:bg-green-950/20",children:[s.jsx(W,{className:"sticky left-0 bg-green-50 dark:bg-green-950/20 z-10",children:"+ Leve de Fonds"}),m.map((N,A)=>s.jsx(W,{className:"text-right font-mono-numbers text-green-600",children:N.fundingInjection>0?`+${re(N.fundingInjection,!0)}`:"-"},A))]}),s.jsxs(_e,{className:"border-t-2 bg-primary/5",children:[s.jsx(W,{className:"sticky left-0 bg-primary/5 z-10 font-bold",children:"= Trsorerie Fin"}),m.map((N,A)=>s.jsx(W,{className:ue("text-right font-mono-numbers font-bold",N.treasuryEnd<0&&"text-destructive"),children:re(N.treasuryEnd,!0)},A))]})]})]})})})]})]})})}const oR=[{key:"hiring",label:"Recrutement",color:"hsl(var(--primary))"},{key:"rd",label:"R&D",color:"hsl(var(--accent))"},{key:"marketing",label:"Marketing",color:"hsl(150, 60%, 40%)"},{key:"inventory",label:"Stock",color:"hsl(38, 92%, 50%)"},{key:"buffer",label:"Buffer",color:"hsl(0, 0%, 60%)"}];function hPe(){const{state:e}=rs(),t=e.fundingRounds[0];if(!t)return null;const r=t.amount;return s.jsx(Ke,{title:"Allocation des Fonds",children:s.jsx("div",{className:"space-y-3",children:oR.map(n=>{const a=1/oR.length,i=r*a;return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[s.jsx("span",{children:n.label}),s.jsx("span",{className:"font-mono-numbers",children:re(i,!0)})]}),s.jsx("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full rounded-full",style:{width:`${a*100}%`,backgroundColor:n.color}})})]},n.key)})})})}function mPe(){var O,E,R;const{state:e,computed:t,updateFundingRounds:r,updateScenarioSettings:n}=rs(),{startYear:a,durationYears:i,initialCash:o}=e.scenarioSettings,l=Array.from({length:i},(P,T)=>a+T),c=e.fundingRounds[0]||{id:"round-1",name:"Leve",amount:15e5,preMoneyValuation:4e6,year:a,quarter:"Q1"},{monthlyTreasuryProjection:u}=t,d=w.useMemo(()=>{const P=Hd(u.months);return l.map(T=>{const I=P.get(T);return I?{year:I.year,revenue:I.revenue,totalCosts:I.cogs+I.payroll+I.opex,cashFlow:I.netCashFlow,treasuryStart:I.treasuryStart,treasuryEnd:I.treasuryEnd,fundingInjection:I.fundingInjection,minTreasuryInYear:I.treasuryEnd}:{year:T,revenue:0,totalCosts:0,cashFlow:0,treasuryStart:0,treasuryEnd:0,fundingInjection:0,minTreasuryInYear:0}})},[u,l]),f=c.amount,h=c.preMoneyValuation,m=h+f,y=f/m,g=u.minTreasury,p=Math.max(0,-g),v=p>0?f/p:1,x=((O=u.breakEvenMonth)==null?void 0:O.year)||null,b=d.map(P=>({year:P.year,revenue:P.revenue/1e3,costs:P.totalCosts/1e3,cashFlow:P.cashFlow/1e3,treasury:P.treasuryEnd/1e3,isNegative:P.treasuryEnd<0})),_=P=>{r([{...c,amount:P}])},j=P=>{r([{...c,preMoneyValuation:P}])},S=P=>{r([{...c,year:parseInt(P)}])},C=P=>{r([{...c,quarter:P}])},k=P=>{n({initialCash:P})},N=g<0,A=((E=u.breakEvenMonth)==null?void 0:E.year)||((R=d.find(P=>P.treasuryEnd<0))==null?void 0:R.year);return s.jsx(is,{tabKey:"funding",children:s.jsxs("div",{className:"space-y-6",children:[s.jsx(Fs,{image:"rd",title:"Besoin de Financement",subtitle:"Calcul automatiquement  Autosave activ",height:"sm"}),N&&s.jsxs("div",{className:"p-3 bg-destructive/10 border border-destructive/30 rounded-lg flex items-center gap-3",children:[s.jsx(Hu,{className:"h-5 w-5 text-destructive"}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-destructive",children:"Alerte Trsorerie"}),s.jsxs("span",{className:"text-sm text-muted-foreground ml-2",children:["Point bas de ",re(g,!0)," en ",A]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[s.jsx(kt,{label:"Besoin Calcul",value:re(p,!0),subValue:"max(0, -trso min)",trend:p>0?"down":void 0}),s.jsx(kt,{label:"Montant  Lever",value:re(f,!0),subValue:"Ajustable ci-dessous"}),s.jsx(kt,{label:"Pre-Money",value:re(h,!0),subValue:"Valorisation"}),s.jsx(kt,{label:"Post-Money",value:re(m,!0),subValue:"Aprs leve"}),s.jsx(kt,{label:"Dilution",value:nn(y),subValue:"Sur le round"})]}),s.jsx(Ke,{title:"Calibrage de la Leve",children:s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm font-medium",children:"Trsorerie Initiale T0"}),s.jsx("span",{className:"text-lg font-bold font-mono-numbers",children:re(o,!0)})]}),s.jsx(Ur,{value:[o/1e3],onValueChange:([P])=>k(P*1e3),min:0,max:500,step:10}),s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[s.jsx("span",{children:"0"}),s.jsx("span",{children:"500k"})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm font-medium",children:"Montant  lever"}),s.jsx("span",{className:"text-lg font-bold font-mono-numbers",children:re(f,!0)})]}),s.jsx(Ur,{value:[f/1e3],onValueChange:([P])=>_(P*1e3),min:0,max:5e3,step:50}),s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[s.jsx("span",{children:"0"}),s.jsx("span",{children:"5M"})]}),f===0&&s.jsx("p",{className:"text-xs text-muted-foreground bg-muted/50 p-2 rounded",children:" Montant  lever rgl  0  Les projections de trsorerie n'incluent aucune leve de fonds."})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm font-medium",children:"Valorisation Pre-Money"}),s.jsx("span",{className:"text-lg font-bold font-mono-numbers",children:re(h,!0)})]}),s.jsx(Ur,{value:[h/1e3],onValueChange:([P])=>j(P*1e3),min:200,max:2e4,step:100}),s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[s.jsx("span",{children:"200k"}),s.jsx("span",{children:"20M"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(ql,{className:"h-4 w-4"}),"Anne"]}),s.jsxs(lt,{value:c.year.toString(),onValueChange:S,children:[s.jsx(st,{children:s.jsx(ct,{})}),s.jsx(ot,{children:l.map(P=>s.jsx(De,{value:P.toString(),children:P},P))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Trimestre"}),s.jsxs(lt,{value:c.quarter,onValueChange:C,children:[s.jsx(st,{children:s.jsx(ct,{})}),s.jsx(ot,{children:CG.map(P=>s.jsx(De,{value:P,children:P},P))})]})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"p-4 bg-muted/30 rounded-lg",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("span",{className:"text-sm font-medium",children:"Besoin calcul (depuis hypothses)"}),s.jsx(Pe,{variant:"secondary",children:"Auto"})]}),s.jsx("div",{className:"text-3xl font-bold font-mono-numbers",children:re(p,!0)}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"= max(0, -trsorerie minimale projete)"})]}),s.jsxs("div",{className:"p-4 bg-muted/30 rounded-lg",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("span",{className:"text-sm font-medium",children:"Couverture du besoin"}),s.jsx("span",{className:"font-mono-numbers",children:nn(Math.min(v,2))})]}),s.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:s.jsx("div",{className:ue("h-2 rounded-full transition-all",v>=1?"bg-accent":v>=.8?"bg-primary":"bg-destructive"),style:{width:`${Math.min(v*100,100)}%`}})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"p-3 bg-muted/30 rounded-lg text-center",children:[s.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Break-even"}),s.jsx("div",{className:"text-lg font-bold",children:x||"N/A"})]}),s.jsxs("div",{className:"p-3 bg-muted/30 rounded-lg text-center",children:[s.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Point bas trso"}),s.jsx("div",{className:ue("text-lg font-bold font-mono-numbers",g<0?"text-destructive":""),children:re(g,!0)})]})]})]})]})}),s.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[s.jsx(Ke,{title:"Projection Cash Flow & Trsorerie",children:s.jsx("div",{className:"h-64",children:s.jsx(wr,{width:"100%",height:"100%",children:s.jsxs(Sd,{data:b,children:[s.jsx(Nr,{strokeDasharray:"3 3"}),s.jsx(Jt,{dataKey:"year"}),s.jsx(Vt,{tickFormatter:P=>`${P}k`}),s.jsx(Nt,{formatter:P=>`${P.toFixed(0)}k`}),s.jsx(Br,{}),s.jsx(Wt,{dataKey:"cashFlow",name:"Cash Flow",fill:"hsl(var(--accent))"}),s.jsx(Rn,{type:"monotone",dataKey:"treasury",name:"Trsorerie",stroke:"hsl(var(--primary))",strokeWidth:3,dot:{r:4}})]})})})}),s.jsx(hPe,{})]}),s.jsx(Ke,{title:"Projection Dtaille",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b",children:[s.jsx("th",{className:"text-left py-2 px-3",children:"Anne"}),s.jsx("th",{className:"text-right py-2 px-3",children:"CA"}),s.jsx("th",{className:"text-right py-2 px-3",children:"Cots Totaux"}),s.jsx("th",{className:"text-right py-2 px-3",children:"Cash Flow"}),s.jsx("th",{className:"text-right py-2 px-3",children:"Leve"}),s.jsx("th",{className:"text-right py-2 px-3",children:"Trso Dbut"}),s.jsx("th",{className:"text-right py-2 px-3",children:"Trso Fin"})]})}),s.jsx("tbody",{children:d.map(P=>s.jsxs("tr",{className:ue("border-b",P.treasuryEnd<0&&"bg-destructive/5"),children:[s.jsx("td",{className:"py-2 px-3 font-medium",children:P.year}),s.jsx("td",{className:"py-2 px-3 text-right font-mono-numbers",children:re(P.revenue,!0)}),s.jsx("td",{className:"py-2 px-3 text-right font-mono-numbers text-muted-foreground",children:re(P.totalCosts,!0)}),s.jsxs("td",{className:ue("py-2 px-3 text-right font-mono-numbers font-medium",P.cashFlow>=0?"text-accent":"text-destructive"),children:[P.cashFlow>=0?"+":"",re(P.cashFlow,!0)]}),s.jsx("td",{className:"py-2 px-3 text-right font-mono-numbers text-accent",children:P.fundingInjection>0?`+${re(P.fundingInjection,!0)}`:"-"}),s.jsx("td",{className:"py-2 px-3 text-right font-mono-numbers",children:re(P.treasuryStart,!0)}),s.jsx("td",{className:ue("py-2 px-3 text-right font-mono-numbers font-bold",P.treasuryEnd<0?"text-destructive":""),children:re(P.treasuryEnd,!0)})]},P.year))})]})})})]})})}const pPe=[{id:"settings",label:"Paramtres du Scnario",elementId:"scenario-settings"},{id:"treasury-params",label:"Paramtres Trsorerie",elementId:"treasury-params"},{id:"kpis",label:"KPIs par Scnario",elementId:"scenario-kpis"},{id:"adjustments",label:"Ajustements",elementId:"scenario-adjustments"},{id:"chart",label:"Comparaison des Scnarios",elementId:"scenario-chart"},{id:"cashflow",label:"Projection Cash Flow",elementId:"scenario-cashflow"}];function gPe(){var O,E,R;const{state:e,computed:t,setActiveScenario:r,updateScenarioConfig:n,updateScenarioSettings:a,updateFundingRounds:i,setExcludeFundingFromTreasury:o,saveAll:l}=rs();e.scenarioConfigs[e.activeScenarioId];const{startYear:c,durationYears:u,initialCash:d}=e.scenarioSettings,f=e.fundingRounds[e.fundingRounds.length-1],h=(f==null?void 0:f.amount)||0,m=Array.from({length:u},(P,T)=>c+T),y=(P,T)=>{const I=e.scenarioConfigs[P];if(e.revenueMode==="by-channel-global")return Jh(e.globalRevenueConfig,T)*(1+I.volumeAdjustment)*(1+I.priceAdjustment);let M=0;return e.products.forEach(D=>{const B=D.volumesByChannel;if(B){const z=D.priceHT||D.priceTTC_B2C/(1+(D.vatRate||.2)),Z=D.coef_shop||1.6,J=D.coef_dist||1.3,se=D.coef_oem||1.4,U=z/Z/J,q=D.unitCost*se,G=Math.round((B.B2C[T]||0)*(1+I.volumeAdjustment)),H=Math.round((B.B2B[T]||0)*(1+I.volumeAdjustment)),fe=Math.round((B.OEM[T]||0)*(1+I.volumeAdjustment));M+=G*z*(1+I.priceAdjustment),M+=H*U*(1+I.priceAdjustment),M+=fe*q*(1+I.priceAdjustment)}else if(D.volumesByYear[T]){const z=Math.round(D.volumesByYear[T]*(1+I.volumeAdjustment));M+=z*D.priceHT*(1+I.priceAdjustment)}}),M},g=P=>{const T=m.map(D=>y(P,D)),I=T[T.length-1]||0,M=T[0]||0;return{revenueLastYear:I,totalRevenue:T.reduce((D,B)=>D+B,0),cagr:I>0&&M>0&&u>1?Math.pow(I/M,1/(u-1))-1:0}},p=[{id:"conservative",name:"Prudent",color:"hsl(38, 92%, 50%)"},{id:"base",name:"Base",color:"hsl(0, 85%, 50%)"},{id:"ambitious",name:"Ambitieux",color:"hsl(150, 60%, 40%)"}],v=m.map(P=>{const T={year:P};return p.forEach(I=>{T[I.id]=y(I.id,P)/1e3}),T}),x=p.map(P=>{const T=g(P.id);return{...P,...T,config:e.scenarioConfigs[P.id]}}),b=P=>{a({startYear:P})},_=P=>{a({durationYears:P})},j=P=>{a({initialCash:P})},S=P=>{if(f){const T=e.fundingRounds.map(I=>I.id===f.id?{...I,amount:P}:I);i(T)}},{monthlyTreasuryProjection:C}=t,k=w.useMemo(()=>{const P=Hd(C.months);return m.map(T=>{const I=P.get(T);return I?{year:I.year,revenue:I.revenue/1e3,cogs:I.cogs/1e3,payroll:I.payroll/1e3,opex:I.opex/1e3,grossMargin:I.grossMargin/1e3,ebitda:I.ebitda/1e3,cashFlow:I.netCashFlow/1e3,treasury:I.treasuryEnd/1e3}:{year:T,revenue:0,cogs:0,payroll:0,opex:0,grossMargin:0,ebitda:0,cashFlow:0,treasury:0}})},[C,m]),N=C.minTreasury/1e3,A=((O=C.breakEvenMonth)==null?void 0:O.year)||"N/A";return s.jsx(is,{tabKey:"scenarios",children:s.jsxs("div",{className:"space-y-6",children:[s.jsx(Fs,{image:"rd",title:"Scnarios",subtitle:"Modulation des projections bases sur le Plan Produit",height:"sm"}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(Pe,{variant:e.revenueMode==="by-product"?"outline":"secondary",className:"text-xs",children:["CA: ",e.revenueMode==="by-product"?"Par Produit":e.revenueMode==="by-channel-global"?"Global Canaux":"Par Client"]}),s.jsxs(Pe,{variant:"secondary",className:"text-xs",children:[c,"  ",c+u-1," (",u," ans)"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(hf,{pageTitle:"Scnarios",sections:pPe,fileName:"Scenarios"}),s.jsx(Xd,{onSave:l,hasUnsavedChanges:e.hasUnsavedChanges,lastSaved:e.lastSaved?new Date(e.lastSaved):null})]})]}),s.jsx(Ke,{title:"Paramtres du Scnario",id:"scenario-settings",children:s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ql,{className:"h-4 w-4 text-muted-foreground"}),s.jsx(Ne,{children:"Anne de dbut"})]}),s.jsx("div",{className:"flex gap-2",children:[2024,2025,2026,2027].map(P=>s.jsx(ne,{size:"sm",variant:c===P?"default":"outline",onClick:()=>b(P),children:P},P))}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Premire anne des projections"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(iC,{className:"h-4 w-4 text-muted-foreground"}),s.jsx(Ne,{children:"Dure (annes)"})]}),s.jsx("div",{className:"flex gap-2",children:[3,4,5,6,7].map(P=>s.jsxs(ne,{size:"sm",variant:u===P?"default":"outline",onClick:()=>_(P),children:[P," ans"]},P))}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Horizon de projection: ",c,"  ",c+u-1]})]})]})}),s.jsxs(Ke,{title:"Paramtres Trsorerie",id:"treasury-params",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6 p-3 rounded-lg border bg-muted/30",children:[s.jsx(za,{id:"funding-toggle",checked:!e.excludeFundingFromTreasury,onCheckedChange:P=>o(!P)}),s.jsx(Ne,{htmlFor:"funding-toggle",className:"cursor-pointer text-sm font-medium",children:"Activer la leve de fonds dans le scnario"}),s.jsx(Pe,{variant:e.excludeFundingFromTreasury?"outline":"default",className:"ml-auto text-xs",children:e.excludeFundingFromTreasury?"Dsactive":"Active"})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(Ig,{className:"h-4 w-4 text-muted-foreground"}),s.jsx(Ne,{children:"Trsorerie initiale (T0)"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm",children:"Cash disponible au dmarrage"}),s.jsx("span",{className:"text-lg font-bold font-mono-numbers",children:re(d,!0)})]}),s.jsx(Ur,{value:[d/1e3],onValueChange:([P])=>j(P*1e3),min:0,max:1e3,step:10}),s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[s.jsx("span",{children:"0"}),s.jsx("span",{children:"1M"})]})]})]}),!e.excludeFundingFromTreasury&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(Fo,{className:"h-4 w-4 text-muted-foreground"}),s.jsx(Ne,{children:"Montant Lev"}),s.jsx(Pe,{variant:"outline",className:"text-xs ml-auto",children:"Depuis Financement"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm",children:(f==null?void 0:f.name)||"Tour de table"}),s.jsx("span",{className:"text-lg font-bold font-mono-numbers",children:re(h,!0)})]}),s.jsx(Ur,{value:[h/1e3],onValueChange:([P])=>S(P*1e3),min:100,max:5e3,step:50}),s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[s.jsx("span",{children:"100k"}),s.jsx("span",{children:"5M"})]})]})]})]}),s.jsxs("div",{className:"mt-6 pt-4 border-t grid md:grid-cols-4 gap-4",children:[s.jsx(kt,{label:"Cash Total T0",value:re(d+(e.excludeFundingFromTreasury?0:h),!0),subValue:e.excludeFundingFromTreasury?"Trso seule":"Trso + Leve"}),s.jsx(kt,{label:"Point Bas Trso",value:re(N*1e3,!0),subValue:"Sur la priode",trend:N<0?"down":void 0}),s.jsx(kt,{label:"Break-even",value:A.toString(),subValue:"Cash flow positif"}),s.jsx(kt,{label:"Trso Finale",value:re((((E=k[k.length-1])==null?void 0:E.treasury)||0)*1e3,!0),subValue:`En ${c+u-1}`})]})]}),s.jsx("div",{className:"grid md:grid-cols-3 gap-4",children:x.map(P=>s.jsxs("div",{className:ue("p-4 rounded-lg border-2 transition-all cursor-pointer",e.activeScenarioId===P.id?"border-accent bg-accent/5":"border-border hover:border-accent/50"),onClick:()=>r(P.id),children:[s.jsxs("div",{className:"flex justify-between items-center mb-3",children:[s.jsx("h3",{className:"font-semibold",children:P.name}),e.activeScenarioId===P.id&&s.jsx(Pe,{children:"Actif"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-xs text-muted-foreground",children:["CA ",c+u-1]}),s.jsx("p",{className:"font-mono-numbers font-semibold",children:re(P.revenueLastYear,!0)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"TCAM"}),s.jsx("p",{className:"font-mono-numbers font-semibold",children:nn(P.cagr)})]})]}),s.jsxs("div",{className:"space-y-3",onClick:T=>T.stopPropagation(),children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[s.jsx("span",{children:"Volumes"}),s.jsxs("span",{className:ue("font-mono-numbers",P.config.volumeAdjustment>0?"text-green-600":P.config.volumeAdjustment<0?"text-destructive":""),children:[P.config.volumeAdjustment>0?"+":"",(P.config.volumeAdjustment*100).toFixed(0),"%"]})]}),s.jsx(Ur,{value:[(P.config.volumeAdjustment+.5)*100],onValueChange:([T])=>n(P.id,{volumeAdjustment:T/100-.5}),min:0,max:100,step:5})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[s.jsx("span",{children:"Prix"}),s.jsxs("span",{className:ue("font-mono-numbers",P.config.priceAdjustment>0?"text-green-600":P.config.priceAdjustment<0?"text-destructive":""),children:[P.config.priceAdjustment>0?"+":"",(P.config.priceAdjustment*100).toFixed(0),"%"]})]}),s.jsx(Ur,{value:[(P.config.priceAdjustment+.2)*250],onValueChange:([T])=>n(P.id,{priceAdjustment:T/250-.2}),min:0,max:100,step:5})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[s.jsx("span",{children:"OPEX"}),s.jsxs("span",{className:ue("font-mono-numbers",P.config.opexAdjustment<0?"text-green-600":P.config.opexAdjustment>0?"text-destructive":""),children:[P.config.opexAdjustment>0?"+":"",(P.config.opexAdjustment*100).toFixed(0),"%"]})]}),s.jsx(Ur,{value:[(P.config.opexAdjustment+.3)*166],onValueChange:([T])=>n(P.id,{opexAdjustment:T/166-.3}),min:0,max:100,step:5})]})]})]},P.id))}),s.jsx(Ke,{title:"Comparaison des Trajectoires CA",id:"scenario-chart",children:s.jsx("div",{className:"h-80",children:s.jsx(wr,{width:"100%",height:"100%",children:s.jsxs(UF,{data:v,children:[s.jsx(Nr,{strokeDasharray:"3 3"}),s.jsx(Jt,{dataKey:"year"}),s.jsx(Vt,{tickFormatter:P=>`${P}k`}),s.jsx(Nt,{formatter:P=>`${P.toFixed(0)}k`}),s.jsx(Br,{}),p.map(P=>s.jsx(Rn,{type:"monotone",dataKey:P.id,name:P.name,stroke:P.color,strokeWidth:e.activeScenarioId===P.id?3:1,dot:{fill:P.color}},P.id))]})})})}),s.jsxs(Ke,{title:"Projection Cash Flow & Trsorerie",id:"scenario-cashflow",children:[s.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["Bas sur le scnario ",s.jsx(Pe,{variant:"outline",children:(R=p.find(P=>P.id===e.activeScenarioId))==null?void 0:R.name})," avec trso initiale ",re(d,!0),!e.excludeFundingFromTreasury&&` + leve ${re(h,!0)}`," "," ",s.jsx("span",{className:"italic",children:"Source: moteur de trsorerie mensuel (identique au Prvisionnel)"})]}),s.jsx("div",{className:"h-80",children:s.jsx(wr,{width:"100%",height:"100%",children:s.jsxs(Sd,{data:k,children:[s.jsx(Nr,{strokeDasharray:"3 3"}),s.jsx(Jt,{dataKey:"year"}),s.jsx(Vt,{tickFormatter:P=>`${P}k`}),s.jsx(Nt,{formatter:P=>`${P.toFixed(0)}k`}),s.jsx(Br,{}),s.jsx(Wt,{dataKey:"cashFlow",name:"Cash Flow",fill:"hsl(38, 92%, 50%)"}),s.jsx(Rn,{type:"monotone",dataKey:"treasury",name:"Trsorerie",stroke:"hsl(0, 85%, 50%)",strokeWidth:3,dot:{r:4}})]})})})]}),s.jsx("div",{className:"grid md:grid-cols-3 gap-4",children:x.map(P=>s.jsx(Ke,{title:P.name,children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-xs text-muted-foreground",children:["CA ",c+u-1]}),s.jsx("p",{className:"text-xl font-bold font-mono-numbers",children:re(P.revenueLastYear,!0)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"TCAM"}),s.jsx("p",{className:"text-xl font-bold font-mono-numbers",children:nn(P.cagr)})]})]}),s.jsxs("div",{className:"pt-4 border-t space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{children:"Volumes"}),s.jsxs("span",{className:"font-mono-numbers",children:[P.config.volumeAdjustment>0?"+":"",(P.config.volumeAdjustment*100).toFixed(0),"%"]})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{children:"Prix"}),s.jsxs("span",{className:"font-mono-numbers",children:[P.config.priceAdjustment>0?"+":"",(P.config.priceAdjustment*100).toFixed(0),"%"]})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{children:"OPEX"}),s.jsxs("span",{className:"font-mono-numbers",children:[P.config.opexAdjustment>0?"+":"",(P.config.opexAdjustment*100).toFixed(0),"%"]})]})]}),s.jsxs("p",{className:"text-xs text-muted-foreground pt-2",children:[P.id==="conservative"&&"Hypothses prudentes avec volumes rduits de 20%",P.id==="base"&&"Trajectoire nominale aligne sur le Plan Produit",P.id==="ambitious"&&"Forte traction avec volumes augments de 25%"]})]})},P.id))})]})})}const By=e=>(e.salesB2B||0)+(e.salesB2C||0)+(e.salesOEM||0)||e.revenue,EU=e=>(e.stockVariation||0)+(e.purchasesGoods||0)+(e.transportCosts||0),AU=e=>By(e)-EU(e),OU=e=>(e.productionExercice||0)-(e.rawMaterials||0)-(e.subcontracting||0),nk=e=>AU(e)+OU(e),TU=e=>nk(e)-(e.otherPurchases||e.externalCosts||0),RU=e=>TU(e)+(e.operatingSubsidies||0)-(e.taxesAndDuties||0)-e.payroll,MU=e=>RU(e)+(e.otherOperatingIncome||0)-(e.otherOperatingExpenses||0)-e.depreciation,$U=e=>MU(e)+(e.financialIncome||0)-(e.financialExpenses||0),IU=e=>(e.exceptionalIncome||0)-(e.exceptionalExpenses||0),vPe=e=>$U(e)+IU(e)-(e.employeeParticipation||0)-(e.corporateTax||0),yPe=[{id:"h_ca",label:"CHIFFRE D'AFFAIRE",type:"calculated",calculate:By,bold:!0,highlight:!0},{id:"salesB2B",label:"Dont Ventes B2B",type:"input",field:"salesB2B",indent:2},{id:"salesB2C",label:"Dont Ventes B2C",type:"input",field:"salesB2C",indent:2},{id:"salesOEM",label:"Dont Ventes OEM",type:"input",field:"salesOEM",indent:2},{id:"sep1",label:"",type:"separator"},{id:"h_cogs",label:"- Cots d'achat des marchandises vendues",type:"calculated",calculate:EU,bold:!0,sign:"negative"},{id:"stockVariation",label:"Variation de stock",type:"input",field:"stockVariation",indent:2},{id:"purchasesGoods",label:"Achat de marchandises",type:"input",field:"purchasesGoods",indent:2},{id:"transportCosts",label:"Transport de marchandises",type:"input",field:"transportCosts",indent:2},{id:"sep2",label:"",type:"separator"},{id:"margeComm",label:"MARGE COMMERCIALE",type:"calculated",calculate:AU,bold:!0,highlight:!0},{id:"sep3",label:"",type:"separator"},{id:"prodExercice",label:"PRODUCTION DE L'EXERCICE",type:"input",field:"productionExercice"},{id:"rawMaterials",label:"- MP, appro. Consomms",type:"input",field:"rawMaterials",indent:1},{id:"subcontracting",label:"- Sous-traitance directe",type:"input",field:"subcontracting",indent:1},{id:"margeProd",label:"MARGE BRUTE DE PRODUCTION",type:"calculated",calculate:OU,bold:!0},{id:"sep4",label:"",type:"separator"},{id:"margeBrute",label:"MARGE (BRUTE GLOBALE) TOTALE",type:"calculated",calculate:nk,bold:!0,highlight:!0},{id:"otherPurchases",label:"- Autres achats & Charges externes",type:"input",field:"otherPurchases",sign:"negative"},{id:"sep5",label:"",type:"separator"},{id:"va",label:"VALEUR AJOUTE",type:"calculated",calculate:TU,bold:!0,highlight:!0},{id:"operatingSubsidies",label:"+ Subventions d'exploitation",type:"input",field:"operatingSubsidies",indent:1},{id:"taxesAndDuties",label:"- Impts, taxes et versements assimils",type:"input",field:"taxesAndDuties",indent:1,sign:"negative"},{id:"payroll",label:"- Charges de personnel",type:"input",field:"payroll",sign:"negative"},{id:"sep6",label:"",type:"separator"},{id:"ebe",label:"EXCDENT BRUT D'EXPLOITATION (EBE)",type:"calculated",calculate:RU,bold:!0,highlight:!0},{id:"otherOpIncome",label:"+ Autres produits de gestion courante",type:"input",field:"otherOperatingIncome",indent:1},{id:"depreciation",label:"- Dotations aux amortissements et aux provisions",type:"input",field:"depreciation",indent:1,sign:"negative"},{id:"otherOpExpenses",label:"- Autres charges de gestion courante",type:"input",field:"otherOperatingExpenses",indent:1,sign:"negative"},{id:"sep7",label:"",type:"separator"},{id:"rex",label:"RSULTAT D'EXPLOITATION",type:"calculated",calculate:MU,bold:!0,highlight:!0},{id:"financialIncome",label:"+ QP de rsultat positif & Produits Financiers",type:"input",field:"financialIncome",indent:1},{id:"financialExpenses",label:"- QP de rsultat ngatif & Charges Financires",type:"input",field:"financialExpenses",indent:1,sign:"negative"},{id:"sep8",label:"",type:"separator"},{id:"rcai",label:"RSULTAT COURANT AVANT IMPTS",type:"calculated",calculate:$U,bold:!0,highlight:!0},{id:"exceptionalIncome",label:"+ Produits exceptionnels",type:"input",field:"exceptionalIncome",indent:1},{id:"exceptionalExpenses",label:"- Charges exceptionnelles",type:"input",field:"exceptionalExpenses",indent:1,sign:"negative"},{id:"sep9",label:"",type:"separator"},{id:"rexcep",label:"RSULTAT EXCEPTIONNEL",type:"calculated",calculate:IU,bold:!0},{id:"employeeParticipation",label:"Participation des salaris",type:"input",field:"employeeParticipation",indent:1},{id:"corporateTax",label:"Impts sur les bnfices & CIR",type:"input",field:"corporateTax",indent:1},{id:"sep10",label:"",type:"separator"},{id:"rnet",label:"RSULTAT NET",type:"calculated",calculate:vPe,bold:!0,highlight:!0}];function xPe(e){return{year:e,revenue:0,grossMargin:0,payroll:0,externalCosts:0,depreciation:0}}function bPe({data:e,onChange:t}){const[r,n]=w.useState(new Date().getFullYear()),a=(c,u,d)=>{const f=[...e];f[c]={...f[c],[u]:d};const h=f[c],m=By(h);h.revenue=m;const y=nk(h);h.grossMargin=m>0?y/m:0,h.externalCosts=h.otherPurchases??h.externalCosts,t(f)},i=c=>{t(e.filter(u=>u.year!==c))},o=new Date().getFullYear(),l=Array.from({length:10},(c,u)=>o-9+u).filter(c=>!e.some(u=>u.year===c));return s.jsxs(Ke,{title:"Compte de Rsultat Historique",id:"valuation-historical",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6 p-3 bg-muted/30 rounded-lg border",children:[s.jsx("span",{className:"text-sm font-medium",children:"Ajouter une anne :"}),s.jsx("div",{className:"flex gap-1 flex-wrap",children:l.map(c=>s.jsx(ne,{size:"sm",variant:r===c?"default":"outline",className:"h-7 text-xs",onClick:()=>{if(n(c),!e.some(u=>u.year===c)){const u=[...e,xPe(c)].sort((d,f)=>d.year-f.year);t(u)}},children:c},c))})]}),e.length===0?s.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"Slectionnez une anne ci-dessus pour commencer la saisie."}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm border-collapse",children:[s.jsxs("thead",{children:[s.jsxs("tr",{className:"border-b-2 border-border",children:[s.jsx("th",{className:"text-left py-2 px-3 min-w-[280px] sticky left-0 bg-background z-10",children:"Poste"}),e.map(c=>s.jsx("th",{className:"text-center py-2 px-2 min-w-[140px]",colSpan:2,children:s.jsxs("div",{className:"flex items-center justify-center gap-1",children:[s.jsx("span",{className:"font-bold",children:c.year}),s.jsx(ne,{variant:"ghost",size:"sm",className:"h-5 w-5 p-0 text-muted-foreground hover:text-destructive",onClick:()=>i(c.year),children:s.jsx(nr,{className:"h-3 w-3"})})]})},c.year))]}),s.jsxs("tr",{className:"border-b text-xs text-muted-foreground",children:[s.jsx("th",{}),e.map(c=>s.jsx("th",{colSpan:2,className:"text-center py-1 px-2",children:s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"flex-1 text-right pr-2",children:"Montant"}),s.jsx("span",{className:"w-14 text-right",children:"% CA"})]})},c.year))]})]}),s.jsx("tbody",{children:yPe.map(c=>c.type==="separator"?s.jsx("tr",{children:s.jsx("td",{colSpan:1+e.length*2,className:"h-1"})},c.id):s.jsxs("tr",{className:ue("border-b border-border/50",c.highlight&&"bg-muted/40"),children:[s.jsx("td",{className:ue("py-1.5 px-3 sticky left-0 bg-background z-10",c.highlight&&"bg-muted/40",c.bold&&"font-bold",c.indent===1&&"pl-6",c.indent===2&&"pl-10","text-xs"),children:c.label}),e.map((u,d)=>{const f=By(u);if(c.type==="calculated"&&c.calculate){const y=c.calculate(u),g=f>0?y/f:0;return s.jsx("td",{colSpan:2,className:ue("py-1.5 px-2"),children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:ue("flex-1 text-right font-mono-numbers pr-2",c.bold&&"font-bold",y<0&&"text-destructive",y>0&&c.highlight&&"text-accent"),children:re(y,!0)}),s.jsx("span",{className:ue("w-14 text-right text-xs font-mono-numbers",g<0?"text-destructive":"text-muted-foreground"),children:f>0?`${(g*100).toFixed(0)}%`:"-"})]})},u.year)}const h=c.field?u[c.field]??0:0,m=f>0?h/f:0;return s.jsx("td",{colSpan:2,className:"py-1 px-2",children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(xe,{type:"number",value:h||"",placeholder:"0",onChange:y=>{c.field&&a(d,c.field,Number(y.target.value)||0)},className:ue("h-7 text-right font-mono-numbers text-xs flex-1","border-transparent bg-transparent hover:border-border focus:border-primary focus:bg-background")}),s.jsx("span",{className:ue("w-14 text-right text-xs font-mono-numbers shrink-0",m<0?"text-destructive":"text-muted-foreground"),children:f>0&&h!==0?`${(m*100).toFixed(0)}%`:"-"})]})},u.year)})]},c.id))})]})})]})}const lR=[{id:"revenue_multiple",name:"Multiple de CA",description:"Valorisation base sur un multiple du chiffre d'affaires projet",applicability:"Startups en croissance avec CA significatif"},{id:"ebitda_multiple",name:"Multiple d'EBITDA",description:"Valorisation base sur un multiple de l'EBITDA projet",applicability:"Entreprises rentables ou proches de la rentabilit"},{id:"dcf",name:"DCF Simplifi",description:"Actualisation des flux de trsorerie futurs",applicability:"Modles conomiques tablis avec visibilit long terme"},{id:"scorecard",name:"Scorecard (Comparables)",description:"Pondration de facteurs qualitatifs vs startups similaires",applicability:"Startups early-stage avec peu de mtriques financires"},{id:"berkus",name:"Mthode Berkus",description:"Attribution de valeur  5 critres cls du projet",applicability:"Pre-revenue, valuation du potentiel"},{id:"risk_factor",name:"Risk Factor Summation",description:"Ajustement d'une valorisation de base selon 12 facteurs de risque",applicability:"Startups early-stage, ajustement du risque"}];function wPe(e){return e.projectedRevenue*e.multiple}function jPe(e){return e.projectedEBITDA*e.multiple}function _Pe(e){const{cashFlows:t,discountRate:r,terminalGrowthRate:n}=e;let a=0;t.forEach((c,u)=>{a+=c/Math.pow(1+r,u+1)});const l=(t[t.length-1]||0)*(1+n)/(r-n)/Math.pow(1+r,t.length);return a+l}function SPe(e){const{baseValuation:t,factors:r}=e,n={team:.3,market:.25,product:.15,competition:.1,marketing:.1,fundingNeed:.1};let a=1;return Object.entries(r).forEach(([i,o])=>{const l=n[i]||0;a+=l*o}),t*a}function CPe(e){return Object.values(e).reduce((t,r)=>t+r,0)}function NPe(e){const{baseValuation:t,factors:r}=e,a=Object.values(r).reduce((i,o)=>i+o,0)*25e4;return t+a}function Ic(e,t){let r=0,n="medium",a="";switch(e){case"revenue_multiple":r=wPe(t),n=t.projectedRevenue>5e5?"high":"medium",a=`Multiple de ${t.multiple}x sur CA de ${(t.projectedRevenue/1e6).toFixed(1)}M`;break;case"ebitda_multiple":r=jPe(t),n=t.projectedEBITDA>0?"high":"low",a=`Multiple de ${t.multiple}x sur EBITDA de ${(t.projectedEBITDA/1e3).toFixed(0)}k`;break;case"dcf":r=_Pe(t),n="medium",a=`Taux d'actualisation: ${(t.discountRate*100).toFixed(0)}%`;break;case"scorecard":r=SPe(t),n="low",a="Bas sur comparables secteur";break;case"berkus":r=CPe(t),n="low",a="Mthode qualitative pour early-stage";break;case"risk_factor":r=NPe(t),n="low",a="Ajustements sur 12 facteurs de risque";break}return{method:e,value:r,confidence:n,notes:a}}function kPe(e){if(e.length===0)return 0;const t={high:3,medium:2,low:1};let r=0,n=0;return e.forEach(a=>{const i=t[a.confidence];r+=a.value*i,n+=i}),n>0?r/n:0}const PPe=[{id:"kpis",label:"KPIs Valorisation",elementId:"valuation-kpis"},{id:"historical",label:"Donnes Historiques",elementId:"valuation-historical"},{id:"methods",label:"Mthodes de Valorisation",elementId:"valuation-methods"},{id:"dilution",label:"Simulation Dilution",elementId:"valuation-dilution"}];function EPe(){const{state:e,computed:t,updateHistoricalData:r,updateValuationConfig:n,saveAll:a}=rs(),{startYear:i,durationYears:o}=e.scenarioSettings,l=Array.from({length:o},(U,q)=>i+q),c=e.valuationConfig,u=U=>n(U),d=c.selectedMethods,f=c.valuationBasis,h=c.historicalYear,m=c.projectedYear,y=c.mixWeight,g=c.averageYears,p=c.valuationParams,v=c.dilutionConfig,x=c.exitScenarios,b=(()=>{const U=e.historicalData[e.historicalData.length-1];return U?U.revenue*U.grossMargin-U.payroll-U.externalCosts:5e5})(),_=e.fundingRounds[e.fundingRounds.length-1],j=(_==null?void 0:_.amount)||15e5;$.useEffect(()=>{(v.totalRaise!==j||v.referenceEBITDA!==b)&&u({dilutionConfig:{...v,totalRaise:j,referenceEBITDA:b}})},[j,b]);const S=Math.max(2e5,v.referenceEBITDA*v.ebitdaMultiple),C=v.totalRaise*(1-v.ocRatio),k=S+C,N=k>0?C/k:0,A=e.historicalData.map(U=>U.year),O=[...A,...l],R=(()=>{const U=L=>{const Y=e.historicalData.find(be=>be.year===L);if(!Y)return{revenue:0,ebitda:0,ebit:0};const Q=Y.revenue*Y.grossMargin-Y.payroll-Y.externalCosts,te=Q-Y.depreciation;return{revenue:Y.revenue,ebitda:Q,ebit:te}},q=L=>{const Y=t.revenueByYear.find(ke=>ke.year===L),V=t.payrollByYear.find(ke=>ke.year===L),Q=t.opexByYear.find(ke=>ke.year===L),te=t.capexByYear.find(ke=>ke.year===L),be=(Y==null?void 0:Y.revenue)||0,We=be-((Y==null?void 0:Y.cogs)||0)-((V==null?void 0:V.payroll)||0)-((Q==null?void 0:Q.opex)||0),ge=We-((te==null?void 0:te.depreciation)||0);return{revenue:be,ebitda:We,ebit:ge}},G=L=>A.includes(L)?U(L):q(L);if(f==="average"){if(g.length===0)return{revenue:0,ebitda:0,ebit:0};const L=g.map(V=>G(V)),Y=L.length;return{revenue:L.reduce((V,Q)=>V+Q.revenue,0)/Y,ebitda:L.reduce((V,Q)=>V+Q.ebitda,0)/Y,ebit:L.reduce((V,Q)=>V+Q.ebit,0)/Y}}if(f==="historical")return U(h);if(f==="projected")return q(m);const H=U(h),fe=q(m);return{revenue:H.revenue*(1-y)+fe.revenue*y,ebitda:H.ebitda*(1-y)+fe.ebitda*y,ebit:H.ebit*(1-y)+fe.ebit*y}})(),T=(()=>{const U=[];if(d.includes("revenue_multiple")&&U.push(Ic("revenue_multiple",{projectedRevenue:R.revenue,multiple:p.revenue_multiple.multiple})),d.includes("ebitda_multiple")&&U.push(Ic("ebitda_multiple",{projectedEBITDA:R.ebitda,multiple:v.ebitdaMultiple})),d.includes("dcf")){const q=l.map(G=>{const H=t.revenueByYear.find(V=>V.year===G),fe=t.payrollByYear.find(V=>V.year===G),L=t.opexByYear.find(V=>V.year===G),Y=t.capexByYear.find(V=>V.year===G);return((H==null?void 0:H.revenue)||0)-((H==null?void 0:H.cogs)||0)-((fe==null?void 0:fe.payroll)||0)-((L==null?void 0:L.opex)||0)-((Y==null?void 0:Y.capex)||0)});U.push(Ic("dcf",{cashFlows:q,discountRate:p.dcf.discountRate,terminalGrowthRate:p.dcf.terminalGrowthRate}))}return d.includes("scorecard")&&U.push(Ic("scorecard",{baseValuation:p.scorecard.baseValuation,factors:{team:p.scorecard.team,market:p.scorecard.market,product:p.scorecard.product,competition:p.scorecard.competition,marketing:p.scorecard.marketing,fundingNeed:p.scorecard.fundingNeed}})),d.includes("berkus")&&U.push(Ic("berkus",p.berkus)),d.includes("risk_factor")&&U.push(Ic("risk_factor",{baseValuation:p.risk_factor.baseValuation,factors:{managementRisk:p.risk_factor.managementRisk,businessStage:p.risk_factor.businessStage,legislation:p.risk_factor.legislation,manufacturing:p.risk_factor.manufacturing,salesMarketing:p.risk_factor.salesMarketing,fundingCapital:p.risk_factor.fundingCapital,competition:p.risk_factor.competition,technology:p.risk_factor.technology,litigation:p.risk_factor.litigation,international:p.risk_factor.international,reputation:p.risk_factor.reputation,potentialExit:p.risk_factor.potentialExit}})),U})(),I=kPe(T),M=U=>{const q=d.includes(U)?d.filter(G=>G!==U):[...d,U];u({selectedMethods:q})},D=U=>{const q=g.includes(U)?g.filter(G=>G!==U):[...g,U].sort();u({averageYears:q})},B=T.map(U=>{var q;return{name:((q=lR.find(G=>G.id===U.method))==null?void 0:q.name)||U.method,value:U.value/1e6,confidence:U.confidence}}),z=(U,q,G)=>U<=0||q<=0||G<=0?0:Math.pow(q/U,1/G)-1,Z=U=>{const q=t.revenueByYear.find(fe=>fe.year===U),G=t.payrollByYear.find(fe=>fe.year===U),H=t.opexByYear.find(fe=>fe.year===U);return q?q.revenue-q.cogs-((G==null?void 0:G.payroll)||0)-((H==null?void 0:H.opex)||0):0},J=Object.entries(x).map(([U,q])=>{const G=q.year,H=Z(G),fe=H*q.exitMultiple,Y=fe*N,V=G-e.scenarioSettings.startYear,Q=z(C,Y,V),te=C>0?Y/C:0;return{scenario:U,year:G,exitMultiple:q.exitMultiple,probability:q.probability,ebitdaAtExit:H,exitValuation:fe,investorReturn:Y,irr:Q,multiple:te}}),se=l.map(U=>{const q=t.revenueByYear.find(te=>te.year===U),G=t.payrollByYear.find(te=>te.year===U),H=t.opexByYear.find(te=>te.year===U),fe=t.capexByYear.find(te=>te.year===U),L=(q==null?void 0:q.revenue)||0,Y=L-((q==null?void 0:q.cogs)||0),V=Y-((G==null?void 0:G.payroll)||0)-((H==null?void 0:H.opex)||0),Q=V-((fe==null?void 0:fe.depreciation)||0);return{year:U,revenue:L/1e3,grossMargin:Y/1e3,ebitda:V/1e3,ebit:Q/1e3}});return s.jsx(is,{tabKey:"valuation",children:s.jsxs("div",{className:"space-y-6",children:[s.jsx(Fs,{image:"rd",title:"Valorisation & Analyse",subtitle:"Mthodes de valorisation, historique et simulation de dilution",height:"sm"}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(Pe,{variant:"outline",className:"text-xs",children:[d.length," mthodes slectionnes"]}),s.jsxs(Pe,{variant:"secondary",className:"text-xs",children:["Valorisation moyenne: ",re(I,!0)]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(hf,{pageTitle:"Valorisation & Analyse",sections:PPe,fileName:"Valorisation"}),s.jsx(Xd,{onSave:a,hasUnsavedChanges:e.hasUnsavedChanges,lastSaved:e.lastSaved?new Date(e.lastSaved):null})]})]}),(()=>{const U=Math.max(2e5,R.ebitda*v.ebitdaMultiple),q=v.totalRaise*(1-v.ocRatio),G=U+q,H=G>0?q/G:0,fe=J.reduce((Y,V)=>Y+V.irr*V.probability,0),L=f==="average"?"moyenne":f==="historical"?"historique":f==="mixed"?"mixte":"projet";return s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",id:"valuation-kpis",children:[s.jsx(kt,{label:"Pre-Money (EBITDA)",value:re(U,!0),subValue:`${v.ebitdaMultiple.toFixed(1)}x EBITDA ${L}`}),s.jsx(kt,{label:"Post-Money",value:re(G,!0),subValue:`Leve: ${re(v.totalRaise,!0)}`}),s.jsx(kt,{label:"Dilution Totale",value:nn(H),subValue:"Part investisseur"}),s.jsx(kt,{label:"TRI moyen",value:nn(fe),subValue:"Pondr par probabilit"})]})})(),s.jsxs(Ya,{defaultValue:"historical",className:"space-y-4",children:[s.jsxs(Na,{className:"flex flex-wrap",children:[s.jsx(Ct,{value:"historical",children:"Historique Financier"}),s.jsx(Ct,{value:"methods",children:"Mthodes de Valorisation"}),s.jsx(Ct,{value:"dilution",children:"Simulation Dilution"}),s.jsx(Ct,{value:"exit",children:"Scnarios de Sortie"})]}),s.jsx(Mt,{value:"historical",className:"space-y-6",children:s.jsx(bPe,{data:e.historicalData,onChange:r})}),s.jsxs(Mt,{value:"methods",className:"space-y-6",children:[s.jsxs(Ke,{title:"Base de Calcul",children:[s.jsx("div",{className:"grid md:grid-cols-4 gap-4 mb-4",children:[{value:"historical",label:"Historique",desc:"Bas sur les donnes passes"},{value:"projected",label:"Projet",desc:"Bas sur les projections futures"},{value:"mixed",label:"Mixte",desc:"Combinaison historique + projet"},{value:"average",label:"Moyenne",desc:"Moyenne de plusieurs annes"}].map(U=>s.jsxs("button",{onClick:()=>u({valuationBasis:U.value}),className:ue("p-4 rounded-lg text-left transition-colors border-2",f===U.value?"bg-primary/10 border-primary":"bg-muted/30 border-transparent hover:bg-muted/50"),children:[s.jsx("div",{className:"font-medium",children:U.label}),s.jsx("div",{className:"text-xs text-muted-foreground",children:U.desc})]},U.value))}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[(f==="historical"||f==="mixed")&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ne,{children:"Anne historique de rfrence"}),s.jsx("div",{className:"flex gap-2",children:A.map(U=>s.jsx(ne,{size:"sm",variant:h===U?"default":"outline",onClick:()=>u({historicalYear:U}),children:U},U))})]}),(f==="projected"||f==="mixed")&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ne,{children:"Anne projete de rfrence"}),s.jsx("div",{className:"flex gap-2",children:l.filter((U,q)=>q>=Math.max(0,l.length-4)).map(U=>s.jsx(ne,{size:"sm",variant:m===U?"default":"outline",onClick:()=>u({projectedYear:U}),children:U},U))})]})]}),f==="average"&&s.jsxs("div",{className:"mt-4 space-y-3",children:[s.jsx(Ne,{children:"Slectionnez les annes de rfrence pour le calcul de la moyenne"}),s.jsx("div",{className:"flex flex-wrap gap-3",children:O.map(U=>{const q=g.includes(U),G=A.includes(U);return s.jsxs("label",{className:ue("flex items-center gap-2 px-3 py-2 rounded-lg border-2 cursor-pointer transition-colors",q?"bg-primary/10 border-primary":"bg-muted/30 border-transparent hover:bg-muted/50"),children:[s.jsx(za,{checked:q,onCheckedChange:()=>D(U)}),s.jsx("span",{className:"text-sm font-medium",children:U}),s.jsx(Pe,{variant:"outline",className:"text-[10px]",children:G?"Hist.":"Proj."})]},U)})}),g.length>0&&s.jsxs("p",{className:"text-sm text-muted-foreground",children:[g.length," anne",g.length>1?"s":""," slectionne",g.length>1?"s":""," : ",g.join(", ")]})]}),f==="mixed"&&s.jsxs("div",{className:"mt-4 space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{children:"Pondration"}),s.jsxs("span",{children:[Math.round((1-y)*100),"% historique / ",Math.round(y*100),"% projet"]})]}),s.jsx(Ur,{value:[y*100],onValueChange:([U])=>u({mixWeight:U/100}),min:0,max:100,step:5})]}),s.jsxs("div",{className:"mt-4 p-4 bg-muted/30 rounded-lg grid grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"text-xs text-muted-foreground",children:["CA de rfrence",f==="average"?" (moyenne)":""]}),s.jsx("div",{className:"text-lg font-bold font-mono-numbers",children:re(R.revenue,!0)})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"text-xs text-muted-foreground",children:["EBITDA de rfrence",f==="average"?" (moyenne)":""]}),s.jsx("div",{className:ue("text-lg font-bold font-mono-numbers",R.ebitda<0&&"text-destructive"),children:re(R.ebitda,!0)})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"text-xs text-muted-foreground",children:["EBIT de rfrence",f==="average"?" (moyenne)":""]}),s.jsx("div",{className:ue("text-lg font-bold font-mono-numbers",R.ebit<0&&"text-destructive"),children:re(R.ebit,!0)})]})]})]}),s.jsxs(Ke,{title:"Slection des Mthodes",children:[s.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:lR.filter(U=>U.id==="revenue_multiple"||U.id==="ebitda_multiple").map(U=>{const q=d.includes(U.id),G=T.find(H=>H.method===U.id);return s.jsxs("button",{onClick:()=>M(U.id),className:ue("p-4 rounded-lg text-left transition-all border-2",q?"bg-primary/10 border-primary shadow-sm":"bg-muted/30 border-transparent hover:bg-muted/50"),children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"font-medium text-sm",children:U.name}),q&&s.jsx(Pe,{variant:"default",className:"text-xs",children:"Actif"})]}),s.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:U.description}),G&&s.jsx("div",{className:"text-lg font-bold font-mono-numbers",children:re(G.value,!0)})]},U.id)})}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mt-6 p-4 bg-muted/30 rounded-lg",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx(Ne,{children:"Multiple CA"}),s.jsxs("span",{className:"font-mono-numbers font-bold",children:[p.revenue_multiple.multiple.toFixed(1),"x"]})]}),s.jsx(Ur,{value:[p.revenue_multiple.multiple],onValueChange:([U])=>u({valuationParams:{...p,revenue_multiple:{...p.revenue_multiple,multiple:U}}}),min:.5,max:10,step:.5}),d.includes("revenue_multiple")&&s.jsxs("p",{className:"text-xs text-muted-foreground",children:["= ",re(R.revenue,!0),"  ",p.revenue_multiple.multiple.toFixed(1)," = ",s.jsx("span",{className:"font-bold",children:re(R.revenue*p.revenue_multiple.multiple,!0)})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx(Ne,{children:"Multiple EBITDA"}),s.jsxs("span",{className:"font-mono-numbers font-bold",children:[v.ebitdaMultiple.toFixed(1),"x"]})]}),s.jsx(Ur,{value:[v.ebitdaMultiple],onValueChange:([U])=>u({dilutionConfig:{...v,ebitdaMultiple:U}}),min:2,max:15,step:.5}),d.includes("ebitda_multiple")&&s.jsxs("p",{className:"text-xs text-muted-foreground",children:["= ",re(R.ebitda,!0),"  ",v.ebitdaMultiple.toFixed(1)," = ",s.jsx("span",{className:"font-bold",children:re(R.ebitda*v.ebitdaMultiple,!0)})]})]})]})]}),T.length>0&&s.jsx(Ke,{title:"Comparaison des Valorisations",children:s.jsx("div",{className:"h-64",children:s.jsx(wr,{width:"100%",height:"100%",children:s.jsxs(es,{data:B,layout:"vertical",children:[s.jsx(Nr,{strokeDasharray:"3 3"}),s.jsx(Jt,{type:"number",tickFormatter:U=>`${U}M`}),s.jsx(Vt,{type:"category",dataKey:"name",width:120}),s.jsx(Nt,{formatter:U=>`${U.toFixed(1)}M`}),s.jsx(Wt,{dataKey:"value",fill:"hsl(var(--primary))",radius:[0,4,4,0]})]})})})})]}),s.jsx(Mt,{value:"dilution",className:"space-y-6",children:s.jsx(rY,{config:v,onChange:U=>u({dilutionConfig:U})})}),s.jsxs(Mt,{value:"exit",className:"space-y-6",children:[s.jsx(Ke,{title:"Paramtres des Scnarios de Sortie",children:s.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:[{key:"conservative",label:"Prudent",color:"text-muted-foreground"},{key:"base",label:"Base",color:"text-primary"},{key:"ambitious",label:"Ambitieux",color:"text-green-600 dark:text-green-400"}].map(({key:U,label:q,color:G})=>s.jsxs("div",{className:"space-y-3 p-4 bg-muted/30 rounded-lg",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:ue("font-medium",G),children:q}),s.jsx(Pe,{variant:"outline",children:x[U].year})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{children:"Multiple EBITDA sortie"}),s.jsxs("span",{className:"font-mono-numbers font-bold",children:[x[U].exitMultiple,"x"]})]}),s.jsx(Ur,{value:[x[U].exitMultiple],onValueChange:([H])=>u({exitScenarios:{...x,[U]:{...x[U],exitMultiple:H}}}),min:2,max:15,step:.5})]})]},U))})}),s.jsx("div",{className:"grid md:grid-cols-3 gap-4",children:J.map(U=>s.jsx(Ke,{title:U.scenario==="conservative"?"Prudent":U.scenario==="base"?"Base":"Ambitieux",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"Anne sortie"}),s.jsx("p",{className:"text-xl font-bold",children:U.year})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"Multiple EBITDA"}),s.jsxs("p",{className:"text-xl font-bold",children:[U.exitMultiple,"x"]})]})]}),s.jsxs("div",{className:"p-3 bg-muted/30 rounded",children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"EBITDA  la sortie"}),s.jsx("p",{className:"font-bold font-mono-numbers",children:re(U.ebitdaAtExit,!0)})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"Valorisation sortie"}),s.jsx("p",{className:"font-bold font-mono-numbers",children:re(U.exitValuation,!0)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"Part investisseur"}),s.jsx("p",{className:"font-bold font-mono-numbers",children:re(U.investorReturn,!0)})]})]}),s.jsxs("div",{className:"pt-4 border-t",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm",children:"TRI"}),s.jsx("span",{className:ue("font-bold font-mono-numbers",U.irr>=.25?"text-green-600 dark:text-green-400":U.irr>=.15?"text-amber-600 dark:text-amber-400":"text-destructive"),children:nn(U.irr)})]}),s.jsxs("div",{className:"flex justify-between items-center mt-2",children:[s.jsx("span",{className:"text-sm",children:"Multiple"}),s.jsxs("span",{className:"font-bold font-mono-numbers",children:[U.multiple.toFixed(1),"x"]})]}),s.jsxs("div",{className:"flex justify-between items-center mt-2",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Probabilit"}),s.jsx("span",{className:"text-muted-foreground",children:nn(U.probability)})]})]})]})},U.scenario))}),s.jsx(Ke,{title:"volution Prvisionnelle P&L",children:s.jsx("div",{className:"h-64",children:s.jsx(wr,{width:"100%",height:"100%",children:s.jsxs(Ry,{data:se,children:[s.jsx(Nr,{strokeDasharray:"3 3"}),s.jsx(Jt,{dataKey:"year"}),s.jsx(Vt,{tickFormatter:U=>`${U}k`}),s.jsx(Nt,{formatter:U=>`${U.toFixed(0)}k`}),s.jsx(Br,{}),s.jsx(Mn,{type:"monotone",dataKey:"revenue",name:"CA",stackId:"1",fill:"hsl(0, 85%, 50%)",stroke:"hsl(0, 85%, 50%)",fillOpacity:.3}),s.jsx(Mn,{type:"monotone",dataKey:"ebitda",name:"EBITDA",stackId:"2",fill:"hsl(38, 92%, 50%)",stroke:"hsl(38, 92%, 50%)",fillOpacity:.6}),s.jsx(Mn,{type:"monotone",dataKey:"ebit",name:"EBIT",stackId:"3",fill:"hsl(210, 70%, 50%)",stroke:"hsl(210, 70%, 50%)",fillOpacity:.8})]})})})})]})]})]})})}function APe(){return s.jsxs(ne,{variant:"outline",size:"sm",onClick:()=>window.print(),children:[s.jsx(sp,{className:"h-4 w-4 mr-1"}),"Export PDF"]})}const Ye=["#e11d48","#2563eb","#16a34a","#f59e0b","#8b5cf6","#06b6d4","#ea580c","#64748b","#d946ef","#0d9488"],OPe={conservative:"Prudent",base:"Base",ambitious:"Ambitieux"},TPe={"by-product":"Par Produit","by-channel-global":"Global Canaux","by-client":"Par Client"},RPe={cash:!0,clientDeck:!0,evolution:!0,needs:!0,payroll:!0,projection:!0,valuation:!0},cR={cash:"Approche Cash",clientDeck:"Deck CA Clients",evolution:"Graphiques d'volution",needs:"Justification des Besoins",payroll:"Masse Salariale",projection:"Projection Dtaille",valuation:"Valorisation & Tours"};function MPe(){var q,G,H,fe;const{state:e,computed:t,setRevenueMode:r}=rs(),[n,a]=w.useState(RPe),[i,o]=w.useState(!1),l=L=>{a(Y=>({...Y,[L]:!Y[L]}))},{monthlyTreasuryProjection:c}=t,{startYear:u,durationYears:d,initialCash:f}=e.scenarioSettings,h=u+d-1,m=Array.from({length:d},(L,Y)=>u+Y),y=w.useMemo(()=>{const L=Hd(c.months);return m.map(Y=>{const V=L.get(Y);if(!V)return{year:Y,revenue:0,cogs:0,grossMargin:0,payroll:0,opex:0,variableCharges:0,loanPayments:0,fundingInjection:0,netCashFlow:0,treasuryStart:0,treasuryEnd:0,ebitda:0,capex:0};const te=c.months.filter(be=>be.year===Y).reduce((be,Re)=>be+Re.capexPayments,0);return{...V,capex:te}})},[c,m]),g=c.totalFundingRaised,p=f+g,v=c.minTreasury,x=((q=c.breakEvenMonth)==null?void 0:q.year)||"N/A",b=v<0,_=(G=y.find(L=>L.treasuryEnd<0))==null?void 0:G.year,j=w.useMemo(()=>{const L=c.months.filter(Y=>Y.netCashFlow<0);return L.length===0?0:Math.max(...L.map(Y=>Math.abs(Y.netCashFlow)))},[c]),S=w.useMemo(()=>{const L=c.months.filter(Y=>Y.netCashFlow<0);return L.length===0?0:L.reduce((Y,V)=>Y+Math.abs(V.netCashFlow),0)/L.length},[c]),C=S>0?Math.round(p/S):99,k=y.reduce((L,Y)=>L+Y.revenue,0),N=y.reduce((L,Y)=>L+Y.payroll,0),A=y.reduce((L,Y)=>L+Y.opex,0),O=c.totalCapexPayments,E=y.reduce((L,Y)=>L+Y.cogs,0),R=N+A+O+E,P=Math.max(0,-v),T=g-P,I=y.map(L=>({year:L.year,"Cash Flow":L.netCashFlow/1e3,Trsorerie:L.treasuryEnd/1e3})),M=e.fundingRounds[e.fundingRounds.length-1],D=M?M.preMoneyValuation+M.amount:0,B=M?M.amount/D:0,z=w.useMemo(()=>y.map(L=>({year:L.year,CA:L.revenue/1e3,"Marge Brute":L.grossMargin/1e3,EBITDA:L.ebitda/1e3,Trsorerie:L.treasuryEnd/1e3,COGS:L.cogs/1e3,"Masse Sal.":L.payroll/1e3,OPEX:L.opex/1e3})),[y]),Z=w.useMemo(()=>[{name:"Masse Salariale",value:N,color:Ye[1]},{name:"COGS",value:E,color:Ye[3]},{name:"OPEX",value:A,color:Ye[4]},{name:"CAPEX",value:O,color:Ye[0]}].filter(L=>L.value>0),[N,E,A,O]),J=w.useMemo(()=>{var We;if(e.revenueMode!=="by-client")return null;const L=e.clientRevenueConfig;if(!((We=L==null?void 0:L.entries)!=null&&We.length))return null;const Y=(ge,ke)=>{if(ge.revenueByYear[ke]!==void 0)return ge.revenueByYear[ke];const Xe=ge.individualGrowthRate??L.growthRate,F=m[0],ee=ke-F+1;return ge.baseRevenue*Math.pow(1+Xe,ee)},V=ge=>{var ke;return ge.channel==="B2C"?L.marginB2C??L.marginRate:ge.categoryId&&((ke=L.marginByCategory)==null?void 0:ke[ge.categoryId])!==void 0?L.marginByCategory[ge.categoryId]:L.marginRate},te=["B2C","B2B","OEM"].map(ge=>{const ke=L.entries.filter(Xe=>Xe.channel===ge);return{channel:ge,count:ke.length,revenueByYear:m.map(Xe=>ke.reduce((F,ee)=>F+Y(ee,Xe),0)),totalRevenue:m.reduce((Xe,F)=>Xe+ke.reduce((ee,oe)=>ee+Y(oe,F),0),0)}}).filter(ge=>ge.count>0),be=L.entries.map(ge=>({name:ge.clientName,channel:ge.channel,category:ge.categoryName||"Sans catgorie",marginRate:V(ge),total:m.reduce((ke,Xe)=>ke+Y(ge,Xe),0),revenueByYear:m.map(ke=>Y(ge,ke))})).sort((ge,ke)=>ke.total-ge.total),Re=m.map((ge,ke)=>{const Xe={year:ge};return te.forEach(F=>{Xe[F.channel]=F.revenueByYear[ke]/1e3}),Xe});return{channelData:te,clientTotals:be,stackedChartData:Re}},[e.revenueMode,e.clientRevenueConfig,m]),se={B2C:Ye[0],B2B:Ye[1],OEM:Ye[3]},U=({label:L,value:Y,sub:V,icon:Q,accent:te,className:be})=>s.jsxs("div",{className:ue("relative overflow-hidden p-5 rounded-xl border-2 transition-all hover:shadow-lg",be),children:[s.jsx("div",{className:"absolute top-3 right-3 opacity-10",children:s.jsx(Q,{className:"h-12 w-12"})}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-2",children:[s.jsx(Q,{className:"h-4 w-4",style:te?{color:te}:void 0}),L]}),s.jsx("div",{className:"text-3xl font-bold font-mono-numbers tracking-tight",style:te?{color:te}:void 0,children:Y}),V&&s.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:V})]});return s.jsxs("div",{className:"space-y-6",children:[s.jsx(Fs,{image:"ccd-evo",title:"Synthse Investisseur",subtitle:"Vue consolide du projet - Approche Cash",height:"sm"}),s.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx(Pe,{variant:"default",children:OPe[e.activeScenarioId]}),s.jsxs(lt,{value:e.revenueMode,onValueChange:L=>r(L),children:[s.jsx(st,{className:"h-8 w-[160px] text-xs",children:s.jsx(ct,{})}),s.jsxs(ot,{children:[s.jsx(De,{value:"by-product",children:"Par Produit"}),s.jsx(De,{value:"by-channel-global",children:"Global Canaux"}),s.jsx(De,{value:"by-client",children:"Par Client"})]})]}),s.jsxs(Pe,{variant:"outline",className:"text-xs",children:[u,"  ",h," (",d," ans)"]}),s.jsxs(Pe,{variant:"secondary",className:"text-xs gap-1",children:[s.jsx(ql,{className:"h-3 w-3"}),e.products.length," produits"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(ne,{size:"sm",variant:"outline",onClick:()=>o(!i),className:"gap-1",children:[s.jsx(Wu,{className:"h-4 w-4"}),"Sections"]}),s.jsx(APe,{})]})]}),i&&s.jsxs("div",{className:"p-4 bg-muted/30 border rounded-lg",children:[s.jsx("h4",{className:"text-sm font-semibold mb-3",children:"Afficher / Masquer les sections du rapport"}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:Object.keys(cR).map(L=>s.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[s.jsx(V0,{checked:n[L],onCheckedChange:()=>l(L)}),s.jsx("span",{className:ue(!n[L]&&"text-muted-foreground line-through"),children:cR[L]})]},L))})]}),b&&s.jsxs("div",{className:"p-4 bg-destructive/10 border border-destructive/30 rounded-lg flex items-center gap-3",children:[s.jsx(Hu,{className:"h-6 w-6 text-destructive flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold text-destructive",children:"Alerte : Trsorerie Ngative"}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Solde prvu ngatif en ",_,". Point bas: ",re(v,!0),". Financement additionnel de ",re(Math.abs(v),!0)," requis."]})]})]}),n.cash&&s.jsxs(Ke,{title:"Approche Cash",id:"cash-approach",children:[s.jsxs("div",{className:"grid md:grid-cols-5 gap-4 mb-6",children:[s.jsx(U,{label:"Cash Initial (T0)",value:re(f,!0),icon:Ig,className:"bg-muted/30"}),s.jsx(U,{label:"Montant Lev",value:re(g,!0),sub:`${e.fundingRounds.length} tour(s)`,icon:Ob,accent:Ye[1],className:"bg-blue-500/5 border-blue-500/20"}),s.jsx(U,{label:"Trso Dpart",value:re(p,!0),icon:jl,accent:Ye[2],className:"bg-emerald-500/5 border-emerald-500/20"}),s.jsx(U,{label:"Point Bas",value:re(v,!0),icon:v<0?uh:Fo,accent:v<0?Ye[0]:Ye[2],className:v<0?"bg-destructive/5 border-destructive/30":"bg-muted/30"}),s.jsx(U,{label:"Break-even",value:String(x),sub:`Runway: ${C>60?"60+":C} mois`,icon:ql,className:"bg-muted/30"})]}),s.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"h-72",children:[s.jsxs("h4",{className:"text-sm font-semibold mb-2 flex items-center gap-2",children:[s.jsx(hv,{className:"h-4 w-4"}),"Cash Flow & Trsorerie"]}),s.jsx(wr,{width:"100%",height:"100%",children:s.jsxs(Sd,{data:I,children:[s.jsx(Nr,{strokeDasharray:"3 3",stroke:"hsl(var(--border))"}),s.jsx(Jt,{dataKey:"year"}),s.jsx(Vt,{tickFormatter:L=>`${L}k`}),s.jsx(Nt,{formatter:L=>`${L.toFixed(0)}k`}),s.jsx(Br,{}),s.jsx(Wt,{dataKey:"Cash Flow",fill:Ye[3],radius:[4,4,0,0]}),s.jsx(Rn,{type:"monotone",dataKey:"Trsorerie",stroke:Ye[1],strokeWidth:3,dot:{r:5,fill:Ye[1]}})]})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h4",{className:"text-sm font-semibold flex items-center gap-2",children:[s.jsx(uh,{className:"h-4 w-4"}),"Mtriques de Burn"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"p-4 rounded-xl bg-muted/30 border",children:[s.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Burn Max / mois"}),s.jsx("div",{className:"text-xl font-bold font-mono-numbers text-destructive",children:re(j,!0)})]}),s.jsxs("div",{className:"p-4 rounded-xl bg-muted/30 border",children:[s.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Burn Moyen / mois"}),s.jsx("div",{className:"text-xl font-bold font-mono-numbers text-amber-500",children:re(S,!0)})]}),s.jsxs("div",{className:"p-4 rounded-xl bg-muted/30 border",children:[s.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"CA Total Priode"}),s.jsx("div",{className:"text-xl font-bold font-mono-numbers",style:{color:Ye[2]},children:re(k,!0)})]}),s.jsxs("div",{className:"p-4 rounded-xl bg-muted/30 border",children:[s.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Cots Totaux"}),s.jsx("div",{className:"text-xl font-bold font-mono-numbers",children:re(R,!0)})]})]})]})]})]}),n.evolution&&s.jsx(Ke,{title:"Graphiques d'volution",id:"evolution-charts",children:s.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-semibold mb-3 flex items-center gap-2",children:[s.jsx(ZI,{className:"h-4 w-4",style:{color:Ye[0]}}),"volution CA, Marge & EBITDA"]}),s.jsx("div",{className:"h-64",children:s.jsx(wr,{width:"100%",height:"100%",children:s.jsxs(Ry,{data:z,children:[s.jsxs("defs",{children:[s.jsxs("linearGradient",{id:"gradCA",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"5%",stopColor:Ye[0],stopOpacity:.15}),s.jsx("stop",{offset:"95%",stopColor:Ye[0],stopOpacity:0})]}),s.jsxs("linearGradient",{id:"gradMargin",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"5%",stopColor:Ye[2],stopOpacity:.15}),s.jsx("stop",{offset:"95%",stopColor:Ye[2],stopOpacity:0})]})]}),s.jsx(Nr,{strokeDasharray:"3 3",stroke:"hsl(var(--border))"}),s.jsx(Jt,{dataKey:"year"}),s.jsx(Vt,{tickFormatter:L=>`${L}k`}),s.jsx(Nt,{formatter:L=>`${L.toFixed(0)}k`}),s.jsx(Br,{}),s.jsx(Mn,{type:"monotone",dataKey:"CA",stroke:Ye[0],fill:"url(#gradCA)",strokeWidth:2.5,dot:{r:4}}),s.jsx(Mn,{type:"monotone",dataKey:"Marge Brute",stroke:Ye[2],fill:"url(#gradMargin)",strokeWidth:2.5,dot:{r:4}}),s.jsx(Rn,{type:"monotone",dataKey:"EBITDA",stroke:Ye[4],strokeWidth:2.5,dot:{r:4},strokeDasharray:"6 3"})]})})})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-semibold mb-3 flex items-center gap-2",children:[s.jsx(hv,{className:"h-4 w-4",style:{color:Ye[1]}}),"Rpartition des Cots par Anne"]}),s.jsx("div",{className:"h-64",children:s.jsx(wr,{width:"100%",height:"100%",children:s.jsxs(es,{data:z,children:[s.jsx(Nr,{strokeDasharray:"3 3",stroke:"hsl(var(--border))"}),s.jsx(Jt,{dataKey:"year"}),s.jsx(Vt,{tickFormatter:L=>`${L}k`}),s.jsx(Nt,{formatter:L=>`${L.toFixed(0)}k`}),s.jsx(Br,{}),s.jsx(Wt,{dataKey:"COGS",stackId:"costs",fill:Ye[3],radius:[0,0,0,0]}),s.jsx(Wt,{dataKey:"Masse Sal.",stackId:"costs",fill:Ye[1]}),s.jsx(Wt,{dataKey:"OPEX",stackId:"costs",fill:Ye[4],radius:[4,4,0,0]})]})})})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-semibold mb-3 flex items-center gap-2",children:[s.jsx(Ig,{className:"h-4 w-4",style:{color:Ye[5]}}),"Trsorerie Mensuelle"]}),s.jsx("div",{className:"h-64",children:s.jsx(wr,{width:"100%",height:"100%",children:s.jsxs(Ry,{data:c.months.map(L=>({label:`${L.month}/${L.year}`,Trsorerie:L.treasuryEnd/1e3})),children:[s.jsx("defs",{children:s.jsxs("linearGradient",{id:"gradTreso",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"5%",stopColor:Ye[5],stopOpacity:.2}),s.jsx("stop",{offset:"95%",stopColor:Ye[5],stopOpacity:0})]})}),s.jsx(Nr,{strokeDasharray:"3 3",stroke:"hsl(var(--border))"}),s.jsx(Jt,{dataKey:"label",tick:{fontSize:10},interval:"preserveStartEnd"}),s.jsx(Vt,{tickFormatter:L=>`${L}k`}),s.jsx(Nt,{formatter:L=>`${L.toFixed(0)}k`}),s.jsx(Mn,{type:"monotone",dataKey:"Trsorerie",stroke:Ye[5],fill:"url(#gradTreso)",strokeWidth:2})]})})})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-semibold mb-3 flex items-center gap-2",children:[s.jsx(jl,{className:"h-4 w-4"}),"Rpartition des Cots (Priode)"]}),s.jsxs("div",{className:"h-64 flex items-center",children:[s.jsx(wr,{width:"50%",height:"100%",children:s.jsxs(DN,{children:[s.jsx(ki,{data:Z,cx:"50%",cy:"50%",innerRadius:50,outerRadius:90,paddingAngle:3,dataKey:"value",children:Z.map((L,Y)=>s.jsx(el,{fill:L.color},L.name))}),s.jsx(Nt,{formatter:L=>re(L,!0)})]})}),s.jsx("div",{className:"flex-1 space-y-2",children:Z.map(L=>{const Y=R>0?L.value/R*100:0;return s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 rounded-sm flex-shrink-0",style:{backgroundColor:L.color}}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-xs font-medium truncate",children:L.name}),s.jsxs("div",{className:"text-[10px] text-muted-foreground",children:[Y.toFixed(0),"%  ",re(L.value,!0)]})]})]},L.name)})})]})]})]})}),n.clientDeck&&s.jsx(Ke,{title:"Deck  Chiffre d'Affaires",id:"client-deck",children:e.revenueMode==="by-client"&&J?s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"grid md:grid-cols-3 gap-4",children:J.channelData.map(L=>s.jsxs("div",{className:"p-5 rounded-xl border-2",style:{borderColor:se[L.channel]+"40",background:se[L.channel]+"08"},children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx(Pe,{style:{backgroundColor:se[L.channel],color:"white"},children:L.channel}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:[L.count," client(s)"]})]}),s.jsx("div",{className:"text-2xl font-bold font-mono-numbers mb-1",children:re(L.totalRevenue,!0)}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:["CA cumul ",u,"",h]}),s.jsx("div",{className:"flex gap-2 mt-3",children:L.revenueByYear.map((Y,V)=>s.jsxs("div",{className:"text-center flex-1",children:[s.jsx("div",{className:"text-[10px] text-muted-foreground",children:m[V]}),s.jsxs("div",{className:"text-xs font-mono-numbers font-medium",children:[(Y/1e3).toFixed(0),"k"]})]},m[V]))})]},L.channel))}),s.jsx("div",{className:"h-64",children:s.jsx(wr,{width:"100%",height:"100%",children:s.jsxs(es,{data:J.stackedChartData,children:[s.jsx(Nr,{strokeDasharray:"3 3",stroke:"hsl(var(--border))"}),s.jsx(Jt,{dataKey:"year"}),s.jsx(Vt,{tickFormatter:L=>`${L}k`}),s.jsx(Nt,{formatter:L=>`${L.toFixed(0)}k`}),s.jsx(Br,{}),J.channelData.map(L=>s.jsx(Wt,{dataKey:L.channel,stackId:"a",fill:se[L.channel],radius:[2,2,0,0]},L.channel))]})})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold mb-3 text-sm",children:"Top Clients"}),s.jsx("div",{className:"overflow-x-auto border rounded-lg",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b bg-muted/30",children:[s.jsx("th",{className:"text-left py-2 px-3 font-semibold text-xs",children:"Client"}),s.jsx("th",{className:"text-left py-2 px-3 font-semibold text-xs",children:"Canal"}),s.jsx("th",{className:"text-left py-2 px-3 font-semibold text-xs",children:"Catgorie"}),s.jsx("th",{className:"text-right py-2 px-3 font-semibold text-xs",children:"Marge"}),m.map(L=>s.jsx("th",{className:"text-right py-2 px-3 font-semibold text-xs",children:L},L)),s.jsx("th",{className:"text-right py-2 px-3 font-semibold text-xs",children:"Total"})]})}),s.jsx("tbody",{children:J.clientTotals.slice(0,15).map((L,Y)=>s.jsxs("tr",{className:"border-b hover:bg-muted/20 text-xs",children:[s.jsx("td",{className:"py-2 px-3 font-medium",children:L.name}),s.jsx("td",{className:"py-2 px-3",children:s.jsx(Pe,{variant:"outline",className:"text-[10px]",style:{borderColor:se[L.channel]},children:L.channel})}),s.jsx("td",{className:"py-2 px-3 text-muted-foreground",children:L.category}),s.jsxs("td",{className:"py-2 px-3 text-right font-mono-numbers",children:[(L.marginRate*100).toFixed(0),"%"]}),L.revenueByYear.map((V,Q)=>s.jsx("td",{className:"py-2 px-3 text-right font-mono-numbers",children:re(V,!0)},m[Q])),s.jsx("td",{className:"py-2 px-3 text-right font-mono-numbers font-semibold",children:re(L.total,!0)})]},Y))})]})})]})]}):s.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[s.jsx(xi,{className:"h-12 w-12 mx-auto mb-3 opacity-30"}),s.jsx("p",{className:"font-medium",children:e.revenueMode==="by-client"?"Aucun client configur  ajoutez des entres dans le Plan Produit":`Mode actuel : ${TPe[e.revenueMode]}`}),s.jsx("p",{className:"text-sm mt-1",children:"Passez en mode  Par Client  pour afficher le deck CA dtaill par client."})]})}),n.needs&&s.jsxs(Ke,{title:"Justification des Besoins",id:"needs-justification",children:[s.jsxs("div",{className:"grid lg:grid-cols-2 gap-6 mb-6",children:[s.jsxs("div",{children:[s.jsxs("h4",{className:"font-semibold mb-4 flex items-center gap-2",children:[s.jsx(Ab,{className:"h-4 w-4"}),"Rpartition Globale (",u,"-",h,")"]}),s.jsxs("div",{className:"space-y-3",children:[[{label:"Masse Salariale",value:N,icon:xi,color:Ye[1]},{label:"COGS (Cot des ventes)",value:E,icon:rc,color:Ye[3]},{label:"OPEX (Charges)",value:A,icon:Ab,color:Ye[4]},{label:"CAPEX (R&D)",value:O,icon:jl,color:Ye[0]}].map(L=>{const Y=L.icon,V=R>0?L.value/R*100:0;return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(Y,{className:"h-4 w-4",style:{color:L.color}}),s.jsx("span",{children:L.label})]}),s.jsx("span",{className:"font-mono-numbers font-medium",children:re(L.value,!0)})]}),s.jsx("div",{className:"h-2.5 bg-muted rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full rounded-full transition-all",style:{width:`${V}%`,backgroundColor:L.color}})}),s.jsxs("div",{className:"text-xs text-muted-foreground text-right",children:[V.toFixed(0),"%"]})]},L.label)}),s.jsxs("div",{className:"pt-3 border-t flex justify-between font-semibold",children:[s.jsx("span",{children:"Total Cots"}),s.jsx("span",{className:"font-mono-numbers",children:re(R,!0)})]})]})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"font-semibold mb-4 flex items-center gap-2",children:[s.jsx(Ob,{className:"h-4 w-4"}),"Adquation Besoin / Financement"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"p-5 bg-muted/30 rounded-xl border",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("span",{className:"text-sm",children:"Besoin de Financement"}),s.jsx(Pe,{variant:"secondary",children:"Calcul"})]}),s.jsx("div",{className:"text-3xl font-bold font-mono-numbers",children:re(P,!0)}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Somme des cash-flows ngatifs sur la priode"})]}),s.jsxs("div",{className:"p-5 rounded-xl border-2",style:{background:Ye[1]+"08",borderColor:Ye[1]+"30"},children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("span",{className:"text-sm",children:"Montant Lev"}),s.jsx(Pe,{variant:"default",children:(M==null?void 0:M.name)||"Round"})]}),s.jsx("div",{className:"text-3xl font-bold font-mono-numbers",style:{color:Ye[1]},children:re(g,!0)})]}),s.jsxs("div",{className:ue("p-5 rounded-xl border-2",T>=0?"border-emerald-500/30 bg-emerald-500/5":"bg-destructive/10 border-destructive/30"),children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm font-medium",children:T>=0?"Marge de Scurit":"Dficit"}),s.jsxs("span",{className:ue("text-2xl font-bold font-mono-numbers",T>=0?"text-emerald-600":"text-destructive"),children:[T>=0?"+":"",re(T,!0)]})]}),T>=0&&s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Buffer de ",nn(T/g)," sur le montant lev"]})]})]})]})]}),s.jsxs("div",{className:"mt-6",children:[s.jsxs("h4",{className:"font-semibold mb-3 flex items-center gap-2 text-sm",children:[s.jsx(ql,{className:"h-4 w-4"}),"Dtail Anne par Anne"]}),s.jsx("div",{className:"overflow-x-auto border rounded-lg",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b bg-muted/30",children:[s.jsx("th",{className:"text-left py-2 px-3 font-semibold text-xs",children:"Anne"}),s.jsx("th",{className:"text-right py-2 px-3 font-semibold text-xs",children:"CA"}),s.jsx("th",{className:"text-right py-2 px-3 font-semibold text-xs",children:"COGS"}),s.jsx("th",{className:"text-right py-2 px-3 font-semibold text-xs",children:"Masse Sal."}),s.jsx("th",{className:"text-right py-2 px-3 font-semibold text-xs",children:"OPEX"}),s.jsx("th",{className:"text-right py-2 px-3 font-semibold text-xs",children:"CAPEX"}),s.jsx("th",{className:"text-right py-2 px-3 font-semibold text-xs",children:"Total Cots"}),s.jsx("th",{className:"text-right py-2 px-3 font-semibold text-xs",children:"Cash Flow"})]})}),s.jsx("tbody",{children:y.map(L=>{const Y=L.cogs+L.payroll+L.opex+L.capex;return s.jsxs("tr",{className:"border-b hover:bg-muted/20 text-xs",children:[s.jsx("td",{className:"py-2 px-3 font-semibold",children:L.year}),s.jsx("td",{className:"py-2 px-3 text-right font-mono-numbers",children:re(L.revenue,!0)}),s.jsx("td",{className:"py-2 px-3 text-right font-mono-numbers text-muted-foreground",children:re(L.cogs,!0)}),s.jsx("td",{className:"py-2 px-3 text-right font-mono-numbers text-muted-foreground",children:re(L.payroll,!0)}),s.jsx("td",{className:"py-2 px-3 text-right font-mono-numbers text-muted-foreground",children:re(L.opex,!0)}),s.jsx("td",{className:"py-2 px-3 text-right font-mono-numbers text-muted-foreground",children:re(L.capex,!0)}),s.jsx("td",{className:"py-2 px-3 text-right font-mono-numbers font-medium",children:re(Y,!0)}),s.jsxs("td",{className:ue("py-2 px-3 text-right font-mono-numbers font-medium",L.netCashFlow>=0?"text-emerald-600":"text-destructive"),children:[L.netCashFlow>=0?"+":"",re(L.netCashFlow,!0)]})]},L.year)})})]})})]}),e.opexMode==="simple"&&(e.simpleOpexConfig.strategicOpex||[]).length>0&&s.jsxs("div",{className:"mt-6",children:[s.jsxs("h4",{className:"font-semibold mb-3 flex items-center gap-2 text-sm",children:[s.jsx(oH,{className:"h-4 w-4"}),"OPEX Stratgiques (inclus dans le budget)"]}),s.jsx("div",{className:"overflow-x-auto border rounded-lg",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b bg-muted/30",children:[s.jsx("th",{className:"text-left py-2 px-3 font-semibold text-xs",children:"Poste"}),s.jsx("th",{className:"text-right py-2 px-3 font-semibold text-xs",children:"Montant Base"}),m.map(L=>s.jsx("th",{className:"text-right py-2 px-3 font-semibold text-xs",children:L},L))]})}),s.jsxs("tbody",{children:[(e.simpleOpexConfig.strategicOpex||[]).map(L=>s.jsxs("tr",{className:"border-b hover:bg-muted/20 text-xs",children:[s.jsx("td",{className:"py-2 px-3 font-medium",children:L.name}),s.jsx("td",{className:"py-2 px-3 text-right font-mono-numbers",children:re(L.amount,!0)}),m.map((Y,V)=>s.jsx("td",{className:"py-2 px-3 text-right font-mono-numbers text-muted-foreground",children:re(L.amount*Math.pow(1+e.simpleOpexConfig.growthRate,V),!0)},Y))]},L.id)),s.jsxs("tr",{className:"bg-muted/20 font-medium text-xs",children:[s.jsx("td",{className:"py-2 px-3",children:"Total Stratgique"}),s.jsx("td",{className:"py-2 px-3 text-right font-mono-numbers",children:re((e.simpleOpexConfig.strategicOpex||[]).reduce((L,Y)=>L+Y.amount,0),!0)}),m.map((L,Y)=>{const V=(e.simpleOpexConfig.strategicOpex||[]).reduce((Q,te)=>Q+te.amount,0);return s.jsx("td",{className:"py-2 px-3 text-right font-mono-numbers",children:re(V*Math.pow(1+e.simpleOpexConfig.growthRate,Y),!0)},L)})]})]})]})})]})]}),n.payroll&&s.jsx(Ke,{title:"Masse Salariale & Embauches",id:"payroll-detail",children:(()=>{var Re,We;const L=e.roles||[],Y={"R&D":Ye[0],Production:Ye[2],Sales:Ye[3],Support:Ye[5],Admin:Ye[1]},V=m.map(ge=>{const ke=L.filter(F=>F.startYear<=ge),Xe={};return ke.forEach(F=>{Xe[F.department]=(Xe[F.department]||0)+F.annualCostLoaded}),{year:ge,total:ke.reduce((F,ee)=>F+ee.annualCostLoaded,0),byDept:Xe,headcount:ke.length}}),Q=m.map(ge=>({year:ge,hires:L.filter(ke=>ke.startYear===ge)})),te=[...new Set(L.map(ge=>ge.department))],be=V.map(ge=>{const ke={year:ge.year,Effectif:ge.headcount};return te.forEach(Xe=>{ke[Xe]=(ge.byDept[Xe]||0)/1e3}),ke});return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[s.jsx(U,{label:"Effectif Final",value:String(((Re=V[V.length-1])==null?void 0:Re.headcount)||0),sub:`en ${h}`,icon:xi,accent:Ye[1],className:"bg-blue-500/5 border-blue-500/20"}),s.jsx(U,{label:"Masse Sal. Finale",value:re(((We=V[V.length-1])==null?void 0:We.total)||0,!0),sub:`/an en ${h}`,icon:Ig,accent:Ye[0],className:"bg-rose-500/5 border-rose-500/20"}),s.jsx(U,{label:"Cot Total Priode",value:re(N,!0),sub:`${u}${h}`,icon:Ab,className:"bg-muted/30"}),s.jsx(U,{label:"Cot Moyen / ETP",value:L.length>0?re(N/d/(L.length||1),!0):"",sub:"/an moyen",icon:jl,className:"bg-muted/30"})]}),s.jsx("div",{className:"h-64",children:s.jsx(wr,{width:"100%",height:"100%",children:s.jsxs(Sd,{data:be,children:[s.jsx(Nr,{strokeDasharray:"3 3",stroke:"hsl(var(--border))"}),s.jsx(Jt,{dataKey:"year"}),s.jsx(Vt,{yAxisId:"left",tickFormatter:ge=>`${ge}k`}),s.jsx(Vt,{yAxisId:"right",orientation:"right"}),s.jsx(Nt,{formatter:(ge,ke)=>ke==="Effectif"?ge:`${ge.toFixed(0)}k`}),s.jsx(Br,{}),te.map((ge,ke)=>s.jsx(Wt,{yAxisId:"left",dataKey:ge,stackId:"a",fill:Y[ge]||Ye[ke%Ye.length]},ge)),s.jsx(Rn,{yAxisId:"right",type:"monotone",dataKey:"Effectif",stroke:"hsl(var(--foreground))",strokeWidth:2,dot:{r:3}})]})})}),s.jsxs("div",{children:[s.jsxs("h4",{className:"font-semibold mb-3 flex items-center gap-2 text-sm",children:[s.jsx(IH,{className:"h-4 w-4"}),"Planning des Embauches"]}),s.jsxs("div",{className:"space-y-4",children:[Q.filter(ge=>ge.hires.length>0).map(({year:ge,hires:ke})=>s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(Pe,{variant:"outline",className:"text-xs",children:ge}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:[ke.length," embauche(s)"]})]}),s.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-2",children:ke.map(Xe=>s.jsxs("div",{className:"p-3 bg-muted/30 rounded-lg border flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium",children:Xe.title}),s.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[s.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:Y[Xe.department]||Ye[0]}}),s.jsx("span",{className:"text-[10px] text-muted-foreground",children:Xe.department})]})]}),s.jsx("div",{className:"text-sm font-mono-numbers font-semibold",children:re(Xe.annualCostLoaded,!0)})]},Xe.id))})]},ge)),Q.every(ge=>ge.hires.length===0)&&s.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Aucun poste configur  rendez-vous dans l'onglet Organisation"})]})]}),s.jsx("div",{className:"overflow-x-auto border rounded-lg",children:s.jsxs("table",{className:"w-full text-xs",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b bg-muted/30",children:[s.jsx("th",{className:"text-left py-2 px-3 font-semibold",children:"Poste"}),s.jsx("th",{className:"text-left py-2 px-3 font-semibold",children:"Dpartement"}),s.jsx("th",{className:"text-right py-2 px-3 font-semibold",children:"Arrive"}),s.jsx("th",{className:"text-right py-2 px-3 font-semibold",children:"Cot charg /an"}),m.map(ge=>s.jsx("th",{className:"text-center py-2 px-3 font-semibold",children:ge},ge))]})}),s.jsx("tbody",{children:L.sort((ge,ke)=>ge.startYear-ke.startYear||ge.department.localeCompare(ke.department)).map(ge=>s.jsxs("tr",{className:"border-b hover:bg-muted/20",children:[s.jsx("td",{className:"py-2 px-3 font-medium",children:ge.title}),s.jsx("td",{className:"py-2 px-3",children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:Y[ge.department]||Ye[0]}}),ge.department]})}),s.jsx("td",{className:"py-2 px-3 text-right font-mono-numbers",children:ge.startYear}),s.jsx("td",{className:"py-2 px-3 text-right font-mono-numbers",children:re(ge.annualCostLoaded,!0)}),m.map(ke=>s.jsx("td",{className:"py-2 px-3 text-center",children:ge.startYear<=ke?s.jsx("span",{className:"inline-block w-4 h-4 rounded-full bg-primary/20 text-primary text-[10px] leading-4",children:""}):s.jsx("span",{className:"text-muted-foreground/30",children:""})},ke))]},ge.id))}),s.jsx("tfoot",{children:s.jsxs("tr",{className:"border-t-2 bg-muted/30 font-semibold text-xs",children:[s.jsx("td",{className:"py-2 px-3",colSpan:3,children:"Total"}),s.jsx("td",{className:"py-2 px-3 text-right font-mono-numbers",children:""}),V.map(ge=>s.jsxs("td",{className:"py-2 px-3 text-center font-mono-numbers",children:[(ge.total/1e3).toFixed(0),"k"]},ge.year))]})})]})})]})})()}),n.projection&&s.jsx(Ke,{title:"Projection Dtaille",id:"detailed-projection",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b bg-muted/30",children:[s.jsx("th",{className:"text-left py-3 px-3 font-semibold",children:"Anne"}),s.jsx("th",{className:"text-right py-3 px-3 font-semibold",children:"CA"}),s.jsx("th",{className:"text-right py-3 px-3 font-semibold",children:"COGS"}),s.jsx("th",{className:"text-right py-3 px-3 font-semibold",children:"Marge Brute"}),s.jsx("th",{className:"text-right py-3 px-3 font-semibold",children:"Masse Sal."}),s.jsx("th",{className:"text-right py-3 px-3 font-semibold",children:"OPEX"}),s.jsx("th",{className:"text-right py-3 px-3 font-semibold",children:"EBITDA"}),s.jsx("th",{className:"text-right py-3 px-3 font-semibold",children:"Amort."}),s.jsx("th",{className:"text-right py-3 px-3 font-semibold",children:"CAPEX"}),s.jsx("th",{className:"text-right py-3 px-3 font-semibold",children:"Cash Flow"}),s.jsx("th",{className:"text-right py-3 px-3 font-semibold",children:"Trsorerie"})]})}),s.jsx("tbody",{children:y.map(L=>s.jsxs("tr",{className:ue("border-b hover:bg-muted/20",L.treasuryEnd<0&&"bg-destructive/5"),children:[s.jsx("td",{className:"py-3 px-3 font-semibold",children:L.year}),s.jsx("td",{className:"py-3 px-3 text-right font-mono-numbers",children:re(L.revenue,!0)}),s.jsx("td",{className:"py-3 px-3 text-right font-mono-numbers text-muted-foreground",children:re(L.cogs,!0)}),s.jsx("td",{className:"py-3 px-3 text-right font-mono-numbers",children:re(L.grossMargin,!0)}),s.jsx("td",{className:"py-3 px-3 text-right font-mono-numbers text-muted-foreground",children:re(L.payroll,!0)}),s.jsx("td",{className:"py-3 px-3 text-right font-mono-numbers text-muted-foreground",children:re(L.opex,!0)}),s.jsx("td",{className:ue("py-3 px-3 text-right font-mono-numbers font-medium",L.ebitda>=0?"text-emerald-600":"text-destructive"),children:re(L.ebitda,!0)}),s.jsx("td",{className:"py-3 px-3 text-right font-mono-numbers text-muted-foreground",children:"-"}),s.jsx("td",{className:"py-3 px-3 text-right font-mono-numbers text-muted-foreground",children:re(L.capex,!0)}),s.jsxs("td",{className:ue("py-3 px-3 text-right font-mono-numbers font-medium",L.netCashFlow>=0?"text-emerald-600":"text-destructive"),children:[L.netCashFlow>=0?"+":"",re(L.netCashFlow,!0)]}),s.jsx("td",{className:ue("py-3 px-3 text-right font-mono-numbers font-bold",L.treasuryEnd<0&&"text-destructive"),children:re(L.treasuryEnd,!0)})]},L.year))}),s.jsx("tfoot",{children:s.jsxs("tr",{className:"border-t-2 bg-muted/30 font-semibold",children:[s.jsx("td",{className:"py-3 px-3",children:"TOTAL"}),s.jsx("td",{className:"py-3 px-3 text-right font-mono-numbers",children:re(k,!0)}),s.jsx("td",{className:"py-3 px-3 text-right font-mono-numbers",children:re(E,!0)}),s.jsx("td",{className:"py-3 px-3 text-right font-mono-numbers",children:re(k-E,!0)}),s.jsx("td",{className:"py-3 px-3 text-right font-mono-numbers",children:re(N,!0)}),s.jsx("td",{className:"py-3 px-3 text-right font-mono-numbers",children:re(A,!0)}),s.jsx("td",{className:"py-3 px-3 text-right font-mono-numbers",children:"-"}),s.jsx("td",{className:"py-3 px-3 text-right font-mono-numbers",children:"-"}),s.jsx("td",{className:"py-3 px-3 text-right font-mono-numbers",children:re(O,!0)}),s.jsx("td",{className:"py-3 px-3 text-right font-mono-numbers",children:"-"}),s.jsx("td",{className:"py-3 px-3 text-right font-mono-numbers",children:re(((H=y[y.length-1])==null?void 0:H.treasuryEnd)||0,!0)})]})})]})})}),n.valuation&&s.jsxs(Ke,{title:"Valorisation & Tours",id:"valuation",children:[s.jsxs("div",{className:"grid md:grid-cols-4 gap-4 mb-6",children:[s.jsx(U,{label:"Pre-Money",value:re((M==null?void 0:M.preMoneyValuation)||0,!0),sub:(M==null?void 0:M.name)||"-",icon:jl,accent:Ye[4],className:"bg-violet-500/5 border-violet-500/20"}),s.jsx(U,{label:"Post-Money",value:re(D,!0),sub:"Aprs leve",icon:Ob,accent:Ye[1],className:"bg-blue-500/5 border-blue-500/20"}),s.jsx(U,{label:"Dilution",value:nn(B),sub:"Part cde",icon:uh,accent:B>.25?Ye[0]:Ye[2],className:B>.25?"bg-rose-500/5 border-rose-500/20":"bg-emerald-500/5 border-emerald-500/20"}),s.jsx(U,{label:"Multiple CA",value:k>0?`${(D/(((fe=y[y.length-1])==null?void 0:fe.revenue)||1)).toFixed(1)}x`:"-",sub:`sur CA ${h}`,icon:Fo,className:"bg-muted/30"})]}),s.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.fundingRounds.map((L,Y)=>s.jsxs("div",{className:"p-5 rounded-xl border-2 transition-all hover:shadow-md",style:{borderColor:Ye[Y%Ye.length]+"30"},children:[s.jsxs("div",{className:"flex justify-between items-start mb-3",children:[s.jsxs("div",{children:[s.jsx("h5",{className:"font-semibold",children:L.name}),s.jsx(Pe,{variant:"outline",className:"text-xs mt-1",children:L.year})]}),s.jsx("div",{className:"text-right",children:s.jsx("div",{className:"text-xl font-bold font-mono-numbers",style:{color:Ye[Y%Ye.length]},children:re(L.amount,!0)})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-muted-foreground",children:[s.jsxs("div",{children:[s.jsx("span",{children:"Pre-money:"}),s.jsx("span",{className:"font-mono-numbers ml-1",children:re(L.preMoneyValuation,!0)})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("span",{children:"Dilution:"}),s.jsx("span",{className:"font-mono-numbers ml-1",children:nn(L.amount/(L.preMoneyValuation+L.amount))})]})]})]},L.id))})]})]})}var $t;(function(e){e.assertEqual=a=>{};function t(a){}e.assertIs=t;function r(a){throw new Error}e.assertNever=r,e.arrayToEnum=a=>{const i={};for(const o of a)i[o]=o;return i},e.getValidEnumValues=a=>{const i=e.objectKeys(a).filter(l=>typeof a[a[l]]!="number"),o={};for(const l of i)o[l]=a[l];return e.objectValues(o)},e.objectValues=a=>e.objectKeys(a).map(function(i){return a[i]}),e.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const i=[];for(const o in a)Object.prototype.hasOwnProperty.call(a,o)&&i.push(o);return i},e.find=(a,i)=>{for(const o of a)if(i(o))return o},e.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&Number.isFinite(a)&&Math.floor(a)===a;function n(a,i=" | "){return a.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}e.joinValues=n,e.jsonStringifyReplacer=(a,i)=>typeof i=="bigint"?i.toString():i})($t||($t={}));var uR;(function(e){e.mergeShapes=(t,r)=>({...t,...r})})(uR||(uR={}));const Fe=$t.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),no=e=>{switch(typeof e){case"undefined":return Fe.undefined;case"string":return Fe.string;case"number":return Number.isNaN(e)?Fe.nan:Fe.number;case"boolean":return Fe.boolean;case"function":return Fe.function;case"bigint":return Fe.bigint;case"symbol":return Fe.symbol;case"object":return Array.isArray(e)?Fe.array:e===null?Fe.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?Fe.promise:typeof Map<"u"&&e instanceof Map?Fe.map:typeof Set<"u"&&e instanceof Set?Fe.set:typeof Date<"u"&&e instanceof Date?Fe.date:Fe.object;default:return Fe.unknown}},Se=$t.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class $s extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=t}format(t){const r=t||function(i){return i.message},n={_errors:[]},a=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(a);else if(o.code==="invalid_return_type")a(o.returnTypeError);else if(o.code==="invalid_arguments")a(o.argumentsError);else if(o.path.length===0)n._errors.push(r(o));else{let l=n,c=0;for(;c<o.path.length;){const u=o.path[c];c===o.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(r(o))):l[u]=l[u]||{_errors:[]},l=l[u],c++}}};return a(this),n}static assert(t){if(!(t instanceof $s))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,$t.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=r=>r.message){const r={},n=[];for(const a of this.issues)if(a.path.length>0){const i=a.path[0];r[i]=r[i]||[],r[i].push(t(a))}else n.push(t(a));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}$s.create=e=>new $s(e);const J_=(e,t)=>{let r;switch(e.code){case Se.invalid_type:e.received===Fe.undefined?r="Required":r=`Expected ${e.expected}, received ${e.received}`;break;case Se.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,$t.jsonStringifyReplacer)}`;break;case Se.unrecognized_keys:r=`Unrecognized key(s) in object: ${$t.joinValues(e.keys,", ")}`;break;case Se.invalid_union:r="Invalid input";break;case Se.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${$t.joinValues(e.options)}`;break;case Se.invalid_enum_value:r=`Invalid enum value. Expected ${$t.joinValues(e.options)}, received '${e.received}'`;break;case Se.invalid_arguments:r="Invalid function arguments";break;case Se.invalid_return_type:r="Invalid function return type";break;case Se.invalid_date:r="Invalid date";break;case Se.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:$t.assertNever(e.validation):e.validation!=="regex"?r=`Invalid ${e.validation}`:r="Invalid";break;case Se.too_small:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="bigint"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:r="Invalid input";break;case Se.too_big:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?r=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:r="Invalid input";break;case Se.custom:r="Invalid input";break;case Se.invalid_intersection_types:r="Intersection results could not be merged";break;case Se.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case Se.not_finite:r="Number must be finite";break;default:r=t.defaultError,$t.assertNever(e)}return{message:r}};let $Pe=J_;function IPe(){return $Pe}const DPe=e=>{const{data:t,path:r,errorMaps:n,issueData:a}=e,i=[...r,...a.path||[]],o={...a,path:i};if(a.message!==void 0)return{...a,path:i,message:a.message};let l="";const c=n.filter(u=>!!u).slice().reverse();for(const u of c)l=u(o,{data:t,defaultError:l}).message;return{...a,path:i,message:l}};function Te(e,t){const r=IPe(),n=DPe({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===J_?void 0:J_].filter(a=>!!a)});e.common.issues.push(n)}class _a{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,r){const n=[];for(const a of r){if(a.status==="aborted")return mt;a.status==="dirty"&&t.dirty(),n.push(a.value)}return{status:t.value,value:n}}static async mergeObjectAsync(t,r){const n=[];for(const a of r){const i=await a.key,o=await a.value;n.push({key:i,value:o})}return _a.mergeObjectSync(t,n)}static mergeObjectSync(t,r){const n={};for(const a of r){const{key:i,value:o}=a;if(i.status==="aborted"||o.status==="aborted")return mt;i.status==="dirty"&&t.dirty(),o.status==="dirty"&&t.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||a.alwaysSet)&&(n[i.value]=o.value)}return{status:t.value,value:n}}}const mt=Object.freeze({status:"aborted"}),Jf=e=>({status:"dirty",value:e}),Xa=e=>({status:"valid",value:e}),dR=e=>e.status==="aborted",fR=e=>e.status==="dirty",kd=e=>e.status==="valid",Fy=e=>typeof Promise<"u"&&e instanceof Promise;var He;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(He||(He={}));class qo{constructor(t,r,n,a){this._cachedPath=[],this.parent=t,this.data=r,this._path=n,this._key=a}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const hR=(e,t)=>{if(kd(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new $s(e.common.issues);return this._error=r,this._error}}};function wt(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:n,description:a}=e;if(t&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:a}:{errorMap:(o,l)=>{const{message:c}=e;return o.code==="invalid_enum_value"?{message:c??l.defaultError}:typeof l.data>"u"?{message:c??n??l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:c??r??l.defaultError}},description:a}}class At{get description(){return this._def.description}_getType(t){return no(t.data)}_getOrReturnCtx(t,r){return r||{common:t.parent.common,data:t.data,parsedType:no(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new _a,ctx:{common:t.parent.common,data:t.data,parsedType:no(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const r=this._parse(t);if(Fy(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(t){const r=this._parse(t);return Promise.resolve(r)}parse(t,r){const n=this.safeParse(t,r);if(n.success)return n.data;throw n.error}safeParse(t,r){const n={common:{issues:[],async:(r==null?void 0:r.async)??!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:no(t)},a=this._parseSync({data:t,path:n.path,parent:n});return hR(n,a)}"~validate"(t){var n,a;const r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:no(t)};if(!this["~standard"].async)try{const i=this._parseSync({data:t,path:[],parent:r});return kd(i)?{value:i.value}:{issues:r.common.issues}}catch(i){(a=(n=i==null?void 0:i.message)==null?void 0:n.toLowerCase())!=null&&a.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:r}).then(i=>kd(i)?{value:i.value}:{issues:r.common.issues})}async parseAsync(t,r){const n=await this.safeParseAsync(t,r);if(n.success)return n.data;throw n.error}async safeParseAsync(t,r){const n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:no(t)},a=this._parse({data:t,path:n.path,parent:n}),i=await(Fy(a)?a:Promise.resolve(a));return hR(n,i)}refine(t,r){const n=a=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(a):r;return this._refinement((a,i)=>{const o=t(a),l=()=>i.addIssue({code:Se.custom,...n(a)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(t,r){return this._refinement((n,a)=>t(n)?!0:(a.addIssue(typeof r=="function"?r(n,a):r),!1))}_refinement(t){return new Ed({schema:this,typeName:pt.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return Io.create(this,this._def)}nullable(){return Ad.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Zi.create(this)}promise(){return Wy.create(this,this._def)}or(t){return Uy.create([this,t],this._def)}and(t){return Vy.create(this,t,this._def)}transform(t){return new Ed({...wt(this._def),schema:this,typeName:pt.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const r=typeof t=="function"?t:()=>t;return new tS({...wt(this._def),innerType:this,defaultValue:r,typeName:pt.ZodDefault})}brand(){return new sEe({typeName:pt.ZodBranded,type:this,...wt(this._def)})}catch(t){const r=typeof t=="function"?t:()=>t;return new rS({...wt(this._def),innerType:this,catchValue:r,typeName:pt.ZodCatch})}describe(t){const r=this.constructor;return new r({...this._def,description:t})}pipe(t){return ak.create(this,t)}readonly(){return nS.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const LPe=/^c[^\s-]{8,}$/i,BPe=/^[0-9a-z]+$/,FPe=/^[0-9A-HJKMNP-TV-Z]{26}$/i,zPe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,UPe=/^[a-z0-9_-]{21}$/i,VPe=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,WPe=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,HPe=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,qPe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Mw;const KPe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,GPe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,YPe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,XPe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,ZPe=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,QPe=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,DU="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",JPe=new RegExp(`^${DU}$`);function LU(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`);const r=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${r}`}function eEe(e){return new RegExp(`^${LU(e)}$`)}function tEe(e){let t=`${DU}T${LU(e)}`;const r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function rEe(e,t){return!!((t==="v4"||!t)&&KPe.test(e)||(t==="v6"||!t)&&YPe.test(e))}function nEe(e,t){if(!VPe.test(e))return!1;try{const[r]=e.split(".");if(!r)return!1;const n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),a=JSON.parse(atob(n));return!(typeof a!="object"||a===null||"typ"in a&&(a==null?void 0:a.typ)!=="JWT"||!a.alg||t&&a.alg!==t)}catch{return!1}}function aEe(e,t){return!!((t==="v4"||!t)&&GPe.test(e)||(t==="v6"||!t)&&XPe.test(e))}class bo extends At{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==Fe.string){const i=this._getOrReturnCtx(t);return Te(i,{code:Se.invalid_type,expected:Fe.string,received:i.parsedType}),mt}const n=new _a;let a;for(const i of this._def.checks)if(i.kind==="min")t.data.length<i.value&&(a=this._getOrReturnCtx(t,a),Te(a,{code:Se.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")t.data.length>i.value&&(a=this._getOrReturnCtx(t,a),Te(a,{code:Se.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){const o=t.data.length>i.value,l=t.data.length<i.value;(o||l)&&(a=this._getOrReturnCtx(t,a),o?Te(a,{code:Se.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):l&&Te(a,{code:Se.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")HPe.test(t.data)||(a=this._getOrReturnCtx(t,a),Te(a,{validation:"email",code:Se.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")Mw||(Mw=new RegExp(qPe,"u")),Mw.test(t.data)||(a=this._getOrReturnCtx(t,a),Te(a,{validation:"emoji",code:Se.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")zPe.test(t.data)||(a=this._getOrReturnCtx(t,a),Te(a,{validation:"uuid",code:Se.invalid_string,message:i.message}),n.dirty());else if(i.kind==="nanoid")UPe.test(t.data)||(a=this._getOrReturnCtx(t,a),Te(a,{validation:"nanoid",code:Se.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")LPe.test(t.data)||(a=this._getOrReturnCtx(t,a),Te(a,{validation:"cuid",code:Se.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")BPe.test(t.data)||(a=this._getOrReturnCtx(t,a),Te(a,{validation:"cuid2",code:Se.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")FPe.test(t.data)||(a=this._getOrReturnCtx(t,a),Te(a,{validation:"ulid",code:Se.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(t.data)}catch{a=this._getOrReturnCtx(t,a),Te(a,{validation:"url",code:Se.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(t.data)||(a=this._getOrReturnCtx(t,a),Te(a,{validation:"regex",code:Se.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?t.data=t.data.trim():i.kind==="includes"?t.data.includes(i.value,i.position)||(a=this._getOrReturnCtx(t,a),Te(a,{code:Se.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?t.data=t.data.toLowerCase():i.kind==="toUpperCase"?t.data=t.data.toUpperCase():i.kind==="startsWith"?t.data.startsWith(i.value)||(a=this._getOrReturnCtx(t,a),Te(a,{code:Se.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?t.data.endsWith(i.value)||(a=this._getOrReturnCtx(t,a),Te(a,{code:Se.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?tEe(i).test(t.data)||(a=this._getOrReturnCtx(t,a),Te(a,{code:Se.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="date"?JPe.test(t.data)||(a=this._getOrReturnCtx(t,a),Te(a,{code:Se.invalid_string,validation:"date",message:i.message}),n.dirty()):i.kind==="time"?eEe(i).test(t.data)||(a=this._getOrReturnCtx(t,a),Te(a,{code:Se.invalid_string,validation:"time",message:i.message}),n.dirty()):i.kind==="duration"?WPe.test(t.data)||(a=this._getOrReturnCtx(t,a),Te(a,{validation:"duration",code:Se.invalid_string,message:i.message}),n.dirty()):i.kind==="ip"?rEe(t.data,i.version)||(a=this._getOrReturnCtx(t,a),Te(a,{validation:"ip",code:Se.invalid_string,message:i.message}),n.dirty()):i.kind==="jwt"?nEe(t.data,i.alg)||(a=this._getOrReturnCtx(t,a),Te(a,{validation:"jwt",code:Se.invalid_string,message:i.message}),n.dirty()):i.kind==="cidr"?aEe(t.data,i.version)||(a=this._getOrReturnCtx(t,a),Te(a,{validation:"cidr",code:Se.invalid_string,message:i.message}),n.dirty()):i.kind==="base64"?ZPe.test(t.data)||(a=this._getOrReturnCtx(t,a),Te(a,{validation:"base64",code:Se.invalid_string,message:i.message}),n.dirty()):i.kind==="base64url"?QPe.test(t.data)||(a=this._getOrReturnCtx(t,a),Te(a,{validation:"base64url",code:Se.invalid_string,message:i.message}),n.dirty()):$t.assertNever(i);return{status:n.value,value:t.data}}_regex(t,r,n){return this.refinement(a=>t.test(a),{validation:r,code:Se.invalid_string,...He.errToObj(n)})}_addCheck(t){return new bo({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...He.errToObj(t)})}url(t){return this._addCheck({kind:"url",...He.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...He.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...He.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...He.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...He.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...He.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...He.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...He.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...He.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...He.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...He.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...He.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(t==null?void 0:t.offset)??!1,local:(t==null?void 0:t.local)??!1,...He.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...He.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...He.errToObj(t)})}regex(t,r){return this._addCheck({kind:"regex",regex:t,...He.errToObj(r)})}includes(t,r){return this._addCheck({kind:"includes",value:t,position:r==null?void 0:r.position,...He.errToObj(r==null?void 0:r.message)})}startsWith(t,r){return this._addCheck({kind:"startsWith",value:t,...He.errToObj(r)})}endsWith(t,r){return this._addCheck({kind:"endsWith",value:t,...He.errToObj(r)})}min(t,r){return this._addCheck({kind:"min",value:t,...He.errToObj(r)})}max(t,r){return this._addCheck({kind:"max",value:t,...He.errToObj(r)})}length(t,r){return this._addCheck({kind:"length",value:t,...He.errToObj(r)})}nonempty(t){return this.min(1,He.errToObj(t))}trim(){return new bo({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new bo({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new bo({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxLength(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}bo.create=e=>new bo({checks:[],typeName:pt.ZodString,coerce:(e==null?void 0:e.coerce)??!1,...wt(e)});function iEe(e,t){const r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,a=r>n?r:n,i=Number.parseInt(e.toFixed(a).replace(".","")),o=Number.parseInt(t.toFixed(a).replace(".",""));return i%o/10**a}class Gm extends At{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==Fe.number){const i=this._getOrReturnCtx(t);return Te(i,{code:Se.invalid_type,expected:Fe.number,received:i.parsedType}),mt}let n;const a=new _a;for(const i of this._def.checks)i.kind==="int"?$t.isInteger(t.data)||(n=this._getOrReturnCtx(t,n),Te(n,{code:Se.invalid_type,expected:"integer",received:"float",message:i.message}),a.dirty()):i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(n=this._getOrReturnCtx(t,n),Te(n,{code:Se.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(n=this._getOrReturnCtx(t,n),Te(n,{code:Se.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="multipleOf"?iEe(t.data,i.value)!==0&&(n=this._getOrReturnCtx(t,n),Te(n,{code:Se.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):i.kind==="finite"?Number.isFinite(t.data)||(n=this._getOrReturnCtx(t,n),Te(n,{code:Se.not_finite,message:i.message}),a.dirty()):$t.assertNever(i);return{status:a.value,value:t.data}}gte(t,r){return this.setLimit("min",t,!0,He.toString(r))}gt(t,r){return this.setLimit("min",t,!1,He.toString(r))}lte(t,r){return this.setLimit("max",t,!0,He.toString(r))}lt(t,r){return this.setLimit("max",t,!1,He.toString(r))}setLimit(t,r,n,a){return new Gm({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:He.toString(a)}]})}_addCheck(t){return new Gm({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:He.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:He.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:He.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:He.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:He.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:He.toString(r)})}finite(t){return this._addCheck({kind:"finite",message:He.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:He.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:He.toString(t)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&$t.isInteger(t.value))}get isFinite(){let t=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(t===null||n.value<t)&&(t=n.value)}return Number.isFinite(r)&&Number.isFinite(t)}}Gm.create=e=>new Gm({checks:[],typeName:pt.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...wt(e)});class Ym extends At{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==Fe.bigint)return this._getInvalidInput(t);let n;const a=new _a;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(n=this._getOrReturnCtx(t,n),Te(n,{code:Se.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(n=this._getOrReturnCtx(t,n),Te(n,{code:Se.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="multipleOf"?t.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(t,n),Te(n,{code:Se.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):$t.assertNever(i);return{status:a.value,value:t.data}}_getInvalidInput(t){const r=this._getOrReturnCtx(t);return Te(r,{code:Se.invalid_type,expected:Fe.bigint,received:r.parsedType}),mt}gte(t,r){return this.setLimit("min",t,!0,He.toString(r))}gt(t,r){return this.setLimit("min",t,!1,He.toString(r))}lte(t,r){return this.setLimit("max",t,!0,He.toString(r))}lt(t,r){return this.setLimit("max",t,!1,He.toString(r))}setLimit(t,r,n,a){return new Ym({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:He.toString(a)}]})}_addCheck(t){return new Ym({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:He.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:He.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:He.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:He.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:He.toString(r)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}Ym.create=e=>new Ym({checks:[],typeName:pt.ZodBigInt,coerce:(e==null?void 0:e.coerce)??!1,...wt(e)});class mR extends At{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==Fe.boolean){const n=this._getOrReturnCtx(t);return Te(n,{code:Se.invalid_type,expected:Fe.boolean,received:n.parsedType}),mt}return Xa(t.data)}}mR.create=e=>new mR({typeName:pt.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...wt(e)});class zy extends At{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==Fe.date){const i=this._getOrReturnCtx(t);return Te(i,{code:Se.invalid_type,expected:Fe.date,received:i.parsedType}),mt}if(Number.isNaN(t.data.getTime())){const i=this._getOrReturnCtx(t);return Te(i,{code:Se.invalid_date}),mt}const n=new _a;let a;for(const i of this._def.checks)i.kind==="min"?t.data.getTime()<i.value&&(a=this._getOrReturnCtx(t,a),Te(a,{code:Se.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?t.data.getTime()>i.value&&(a=this._getOrReturnCtx(t,a),Te(a,{code:Se.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):$t.assertNever(i);return{status:n.value,value:new Date(t.data.getTime())}}_addCheck(t){return new zy({...this._def,checks:[...this._def.checks,t]})}min(t,r){return this._addCheck({kind:"min",value:t.getTime(),message:He.toString(r)})}max(t,r){return this._addCheck({kind:"max",value:t.getTime(),message:He.toString(r)})}get minDate(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t!=null?new Date(t):null}}zy.create=e=>new zy({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:pt.ZodDate,...wt(e)});class pR extends At{_parse(t){if(this._getType(t)!==Fe.symbol){const n=this._getOrReturnCtx(t);return Te(n,{code:Se.invalid_type,expected:Fe.symbol,received:n.parsedType}),mt}return Xa(t.data)}}pR.create=e=>new pR({typeName:pt.ZodSymbol,...wt(e)});class gR extends At{_parse(t){if(this._getType(t)!==Fe.undefined){const n=this._getOrReturnCtx(t);return Te(n,{code:Se.invalid_type,expected:Fe.undefined,received:n.parsedType}),mt}return Xa(t.data)}}gR.create=e=>new gR({typeName:pt.ZodUndefined,...wt(e)});class vR extends At{_parse(t){if(this._getType(t)!==Fe.null){const n=this._getOrReturnCtx(t);return Te(n,{code:Se.invalid_type,expected:Fe.null,received:n.parsedType}),mt}return Xa(t.data)}}vR.create=e=>new vR({typeName:pt.ZodNull,...wt(e)});class yR extends At{constructor(){super(...arguments),this._any=!0}_parse(t){return Xa(t.data)}}yR.create=e=>new yR({typeName:pt.ZodAny,...wt(e)});class xR extends At{constructor(){super(...arguments),this._unknown=!0}_parse(t){return Xa(t.data)}}xR.create=e=>new xR({typeName:pt.ZodUnknown,...wt(e)});class Ko extends At{_parse(t){const r=this._getOrReturnCtx(t);return Te(r,{code:Se.invalid_type,expected:Fe.never,received:r.parsedType}),mt}}Ko.create=e=>new Ko({typeName:pt.ZodNever,...wt(e)});class bR extends At{_parse(t){if(this._getType(t)!==Fe.undefined){const n=this._getOrReturnCtx(t);return Te(n,{code:Se.invalid_type,expected:Fe.void,received:n.parsedType}),mt}return Xa(t.data)}}bR.create=e=>new bR({typeName:pt.ZodVoid,...wt(e)});class Zi extends At{_parse(t){const{ctx:r,status:n}=this._processInputParams(t),a=this._def;if(r.parsedType!==Fe.array)return Te(r,{code:Se.invalid_type,expected:Fe.array,received:r.parsedType}),mt;if(a.exactLength!==null){const o=r.data.length>a.exactLength.value,l=r.data.length<a.exactLength.value;(o||l)&&(Te(r,{code:o?Se.too_big:Se.too_small,minimum:l?a.exactLength.value:void 0,maximum:o?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),n.dirty())}if(a.minLength!==null&&r.data.length<a.minLength.value&&(Te(r,{code:Se.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),n.dirty()),a.maxLength!==null&&r.data.length>a.maxLength.value&&(Te(r,{code:Se.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((o,l)=>a.type._parseAsync(new qo(r,o,r.path,l)))).then(o=>_a.mergeArray(n,o));const i=[...r.data].map((o,l)=>a.type._parseSync(new qo(r,o,r.path,l)));return _a.mergeArray(n,i)}get element(){return this._def.type}min(t,r){return new Zi({...this._def,minLength:{value:t,message:He.toString(r)}})}max(t,r){return new Zi({...this._def,maxLength:{value:t,message:He.toString(r)}})}length(t,r){return new Zi({...this._def,exactLength:{value:t,message:He.toString(r)}})}nonempty(t){return this.min(1,t)}}Zi.create=(e,t)=>new Zi({type:e,minLength:null,maxLength:null,exactLength:null,typeName:pt.ZodArray,...wt(t)});function Wc(e){if(e instanceof $r){const t={};for(const r in e.shape){const n=e.shape[r];t[r]=Io.create(Wc(n))}return new $r({...e._def,shape:()=>t})}else return e instanceof Zi?new Zi({...e._def,type:Wc(e.element)}):e instanceof Io?Io.create(Wc(e.unwrap())):e instanceof Ad?Ad.create(Wc(e.unwrap())):e instanceof fc?fc.create(e.items.map(t=>Wc(t))):e}class $r extends At{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),r=$t.objectKeys(t);return this._cached={shape:t,keys:r},this._cached}_parse(t){if(this._getType(t)!==Fe.object){const u=this._getOrReturnCtx(t);return Te(u,{code:Se.invalid_type,expected:Fe.object,received:u.parsedType}),mt}const{status:n,ctx:a}=this._processInputParams(t),{shape:i,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof Ko&&this._def.unknownKeys==="strip"))for(const u in a.data)o.includes(u)||l.push(u);const c=[];for(const u of o){const d=i[u],f=a.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new qo(a,f,a.path,u)),alwaysSet:u in a.data})}if(this._def.catchall instanceof Ko){const u=this._def.unknownKeys;if(u==="passthrough")for(const d of l)c.push({key:{status:"valid",value:d},value:{status:"valid",value:a.data[d]}});else if(u==="strict")l.length>0&&(Te(a,{code:Se.unrecognized_keys,keys:l}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const d of l){const f=a.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new qo(a,f,a.path,d)),alwaysSet:d in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const u=[];for(const d of c){const f=await d.key,h=await d.value;u.push({key:f,value:h,alwaysSet:d.alwaysSet})}return u}).then(u=>_a.mergeObjectSync(n,u)):_a.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(t){return He.errToObj,new $r({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(r,n)=>{var i,o;const a=((o=(i=this._def).errorMap)==null?void 0:o.call(i,r,n).message)??n.defaultError;return r.code==="unrecognized_keys"?{message:He.errToObj(t).message??a}:{message:a}}}:{}})}strip(){return new $r({...this._def,unknownKeys:"strip"})}passthrough(){return new $r({...this._def,unknownKeys:"passthrough"})}extend(t){return new $r({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new $r({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:pt.ZodObject})}setKey(t,r){return this.augment({[t]:r})}catchall(t){return new $r({...this._def,catchall:t})}pick(t){const r={};for(const n of $t.objectKeys(t))t[n]&&this.shape[n]&&(r[n]=this.shape[n]);return new $r({...this._def,shape:()=>r})}omit(t){const r={};for(const n of $t.objectKeys(this.shape))t[n]||(r[n]=this.shape[n]);return new $r({...this._def,shape:()=>r})}deepPartial(){return Wc(this)}partial(t){const r={};for(const n of $t.objectKeys(this.shape)){const a=this.shape[n];t&&!t[n]?r[n]=a:r[n]=a.optional()}return new $r({...this._def,shape:()=>r})}required(t){const r={};for(const n of $t.objectKeys(this.shape))if(t&&!t[n])r[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof Io;)i=i._def.innerType;r[n]=i}return new $r({...this._def,shape:()=>r})}keyof(){return BU($t.objectKeys(this.shape))}}$r.create=(e,t)=>new $r({shape:()=>e,unknownKeys:"strip",catchall:Ko.create(),typeName:pt.ZodObject,...wt(t)});$r.strictCreate=(e,t)=>new $r({shape:()=>e,unknownKeys:"strict",catchall:Ko.create(),typeName:pt.ZodObject,...wt(t)});$r.lazycreate=(e,t)=>new $r({shape:e,unknownKeys:"strip",catchall:Ko.create(),typeName:pt.ZodObject,...wt(t)});class Uy extends At{_parse(t){const{ctx:r}=this._processInputParams(t),n=this._def.options;function a(i){for(const l of i)if(l.result.status==="valid")return l.result;for(const l of i)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;const o=i.map(l=>new $s(l.ctx.common.issues));return Te(r,{code:Se.invalid_union,unionErrors:o}),mt}if(r.common.async)return Promise.all(n.map(async i=>{const o={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(a);{let i;const o=[];for(const c of n){const u={...r,common:{...r.common,issues:[]},parent:null},d=c._parseSync({data:r.data,path:r.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!i&&(i={result:d,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;const l=o.map(c=>new $s(c));return Te(r,{code:Se.invalid_union,unionErrors:l}),mt}}get options(){return this._def.options}}Uy.create=(e,t)=>new Uy({options:e,typeName:pt.ZodUnion,...wt(t)});function eS(e,t){const r=no(e),n=no(t);if(e===t)return{valid:!0,data:e};if(r===Fe.object&&n===Fe.object){const a=$t.objectKeys(t),i=$t.objectKeys(e).filter(l=>a.indexOf(l)!==-1),o={...e,...t};for(const l of i){const c=eS(e[l],t[l]);if(!c.valid)return{valid:!1};o[l]=c.data}return{valid:!0,data:o}}else if(r===Fe.array&&n===Fe.array){if(e.length!==t.length)return{valid:!1};const a=[];for(let i=0;i<e.length;i++){const o=e[i],l=t[i],c=eS(o,l);if(!c.valid)return{valid:!1};a.push(c.data)}return{valid:!0,data:a}}else return r===Fe.date&&n===Fe.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class Vy extends At{_parse(t){const{status:r,ctx:n}=this._processInputParams(t),a=(i,o)=>{if(dR(i)||dR(o))return mt;const l=eS(i.value,o.value);return l.valid?((fR(i)||fR(o))&&r.dirty(),{status:r.value,value:l.data}):(Te(n,{code:Se.invalid_intersection_types}),mt)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,o])=>a(i,o)):a(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}Vy.create=(e,t,r)=>new Vy({left:e,right:t,typeName:pt.ZodIntersection,...wt(r)});class fc extends At{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==Fe.array)return Te(n,{code:Se.invalid_type,expected:Fe.array,received:n.parsedType}),mt;if(n.data.length<this._def.items.length)return Te(n,{code:Se.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),mt;!this._def.rest&&n.data.length>this._def.items.length&&(Te(n,{code:Se.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const i=[...n.data].map((o,l)=>{const c=this._def.items[l]||this._def.rest;return c?c._parse(new qo(n,o,n.path,l)):null}).filter(o=>!!o);return n.common.async?Promise.all(i).then(o=>_a.mergeArray(r,o)):_a.mergeArray(r,i)}get items(){return this._def.items}rest(t){return new fc({...this._def,rest:t})}}fc.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new fc({items:e,typeName:pt.ZodTuple,rest:null,...wt(t)})};class wR extends At{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==Fe.map)return Te(n,{code:Se.invalid_type,expected:Fe.map,received:n.parsedType}),mt;const a=this._def.keyType,i=this._def.valueType,o=[...n.data.entries()].map(([l,c],u)=>({key:a._parse(new qo(n,l,n.path,[u,"key"])),value:i._parse(new qo(n,c,n.path,[u,"value"]))}));if(n.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const c of o){const u=await c.key,d=await c.value;if(u.status==="aborted"||d.status==="aborted")return mt;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(u.value,d.value)}return{status:r.value,value:l}})}else{const l=new Map;for(const c of o){const u=c.key,d=c.value;if(u.status==="aborted"||d.status==="aborted")return mt;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(u.value,d.value)}return{status:r.value,value:l}}}}wR.create=(e,t,r)=>new wR({valueType:t,keyType:e,typeName:pt.ZodMap,...wt(r)});class Xm extends At{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==Fe.set)return Te(n,{code:Se.invalid_type,expected:Fe.set,received:n.parsedType}),mt;const a=this._def;a.minSize!==null&&n.data.size<a.minSize.value&&(Te(n,{code:Se.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),r.dirty()),a.maxSize!==null&&n.data.size>a.maxSize.value&&(Te(n,{code:Se.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),r.dirty());const i=this._def.valueType;function o(c){const u=new Set;for(const d of c){if(d.status==="aborted")return mt;d.status==="dirty"&&r.dirty(),u.add(d.value)}return{status:r.value,value:u}}const l=[...n.data.values()].map((c,u)=>i._parse(new qo(n,c,n.path,u)));return n.common.async?Promise.all(l).then(c=>o(c)):o(l)}min(t,r){return new Xm({...this._def,minSize:{value:t,message:He.toString(r)}})}max(t,r){return new Xm({...this._def,maxSize:{value:t,message:He.toString(r)}})}size(t,r){return this.min(t,r).max(t,r)}nonempty(t){return this.min(1,t)}}Xm.create=(e,t)=>new Xm({valueType:e,minSize:null,maxSize:null,typeName:pt.ZodSet,...wt(t)});class jR extends At{get schema(){return this._def.getter()}_parse(t){const{ctx:r}=this._processInputParams(t);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}jR.create=(e,t)=>new jR({getter:e,typeName:pt.ZodLazy,...wt(t)});class _R extends At{_parse(t){if(t.data!==this._def.value){const r=this._getOrReturnCtx(t);return Te(r,{received:r.data,code:Se.invalid_literal,expected:this._def.value}),mt}return{status:"valid",value:t.data}}get value(){return this._def.value}}_R.create=(e,t)=>new _R({value:e,typeName:pt.ZodLiteral,...wt(t)});function BU(e,t){return new Pd({values:e,typeName:pt.ZodEnum,...wt(t)})}class Pd extends At{_parse(t){if(typeof t.data!="string"){const r=this._getOrReturnCtx(t),n=this._def.values;return Te(r,{expected:$t.joinValues(n),received:r.parsedType,code:Se.invalid_type}),mt}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){const r=this._getOrReturnCtx(t),n=this._def.values;return Te(r,{received:r.data,code:Se.invalid_enum_value,options:n}),mt}return Xa(t.data)}get options(){return this._def.values}get enum(){const t={};for(const r of this._def.values)t[r]=r;return t}get Values(){const t={};for(const r of this._def.values)t[r]=r;return t}get Enum(){const t={};for(const r of this._def.values)t[r]=r;return t}extract(t,r=this._def){return Pd.create(t,{...this._def,...r})}exclude(t,r=this._def){return Pd.create(this.options.filter(n=>!t.includes(n)),{...this._def,...r})}}Pd.create=BU;class SR extends At{_parse(t){const r=$t.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(t);if(n.parsedType!==Fe.string&&n.parsedType!==Fe.number){const a=$t.objectValues(r);return Te(n,{expected:$t.joinValues(a),received:n.parsedType,code:Se.invalid_type}),mt}if(this._cache||(this._cache=new Set($t.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){const a=$t.objectValues(r);return Te(n,{received:n.data,code:Se.invalid_enum_value,options:a}),mt}return Xa(t.data)}get enum(){return this._def.values}}SR.create=(e,t)=>new SR({values:e,typeName:pt.ZodNativeEnum,...wt(t)});class Wy extends At{unwrap(){return this._def.type}_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==Fe.promise&&r.common.async===!1)return Te(r,{code:Se.invalid_type,expected:Fe.promise,received:r.parsedType}),mt;const n=r.parsedType===Fe.promise?r.data:Promise.resolve(r.data);return Xa(n.then(a=>this._def.type.parseAsync(a,{path:r.path,errorMap:r.common.contextualErrorMap})))}}Wy.create=(e,t)=>new Wy({type:e,typeName:pt.ZodPromise,...wt(t)});class Ed extends At{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===pt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:r,ctx:n}=this._processInputParams(t),a=this._def.effect||null,i={addIssue:o=>{Te(n,o),o.fatal?r.abort():r.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),a.type==="preprocess"){const o=a.transform(n.data,i);if(n.common.async)return Promise.resolve(o).then(async l=>{if(r.value==="aborted")return mt;const c=await this._def.schema._parseAsync({data:l,path:n.path,parent:n});return c.status==="aborted"?mt:c.status==="dirty"||r.value==="dirty"?Jf(c.value):c});{if(r.value==="aborted")return mt;const l=this._def.schema._parseSync({data:o,path:n.path,parent:n});return l.status==="aborted"?mt:l.status==="dirty"||r.value==="dirty"?Jf(l.value):l}}if(a.type==="refinement"){const o=l=>{const c=a.refinement(l,i);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){const l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?mt:(l.status==="dirty"&&r.dirty(),o(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?mt:(l.status==="dirty"&&r.dirty(),o(l.value).then(()=>({status:r.value,value:l.value}))))}if(a.type==="transform")if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!kd(o))return mt;const l=a.transform(o.value,i);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>kd(o)?Promise.resolve(a.transform(o.value,i)).then(l=>({status:r.value,value:l})):mt);$t.assertNever(a)}}Ed.create=(e,t,r)=>new Ed({schema:e,typeName:pt.ZodEffects,effect:t,...wt(r)});Ed.createWithPreprocess=(e,t,r)=>new Ed({schema:t,effect:{type:"preprocess",transform:e},typeName:pt.ZodEffects,...wt(r)});class Io extends At{_parse(t){return this._getType(t)===Fe.undefined?Xa(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Io.create=(e,t)=>new Io({innerType:e,typeName:pt.ZodOptional,...wt(t)});class Ad extends At{_parse(t){return this._getType(t)===Fe.null?Xa(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Ad.create=(e,t)=>new Ad({innerType:e,typeName:pt.ZodNullable,...wt(t)});class tS extends At{_parse(t){const{ctx:r}=this._processInputParams(t);let n=r.data;return r.parsedType===Fe.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}tS.create=(e,t)=>new tS({innerType:e,typeName:pt.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...wt(t)});class rS extends At{_parse(t){const{ctx:r}=this._processInputParams(t),n={...r,common:{...r.common,issues:[]}},a=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Fy(a)?a.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new $s(n.common.issues)},input:n.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new $s(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}rS.create=(e,t)=>new rS({innerType:e,typeName:pt.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...wt(t)});class CR extends At{_parse(t){if(this._getType(t)!==Fe.nan){const n=this._getOrReturnCtx(t);return Te(n,{code:Se.invalid_type,expected:Fe.nan,received:n.parsedType}),mt}return{status:"valid",value:t.data}}}CR.create=e=>new CR({typeName:pt.ZodNaN,...wt(e)});class sEe extends At{_parse(t){const{ctx:r}=this._processInputParams(t),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class ak extends At{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?mt:i.status==="dirty"?(r.dirty(),Jf(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})})();{const a=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?mt:a.status==="dirty"?(r.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:n.path,parent:n})}}static create(t,r){return new ak({in:t,out:r,typeName:pt.ZodPipeline})}}class nS extends At{_parse(t){const r=this._def.innerType._parse(t),n=a=>(kd(a)&&(a.value=Object.freeze(a.value)),a);return Fy(r)?r.then(a=>n(a)):n(r)}unwrap(){return this._def.innerType}}nS.create=(e,t)=>new nS({innerType:e,typeName:pt.ZodReadonly,...wt(t)});$r.lazycreate;var pt;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(pt||(pt={}));const jh=bo.create;Ko.create;Zi.create;const FU=$r.create;$r.strictCreate;Uy.create;Vy.create;fc.create;Pd.create;Wy.create;Io.create;Ad.create;var bp=e=>e.type==="checkbox",Il=e=>e instanceof Date,Fn=e=>e==null;const zU=e=>typeof e=="object";var Vr=e=>!Fn(e)&&!Array.isArray(e)&&zU(e)&&!Il(e),UU=e=>Vr(e)&&e.target?bp(e.target)?e.target.checked:e.target.value:e,oEe=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,VU=(e,t)=>e.has(oEe(t)),lEe=e=>{const t=e.constructor&&e.constructor.prototype;return Vr(t)&&t.hasOwnProperty("isPrototypeOf")},ik=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Jr(e){let t;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(ik&&(e instanceof Blob||n))&&(r||Vr(e)))if(t=r?[]:{},!r&&!lEe(e))t=e;else for(const a in e)e.hasOwnProperty(a)&&(t[a]=Jr(e[a]));else return e;return t}var K0=e=>/^\w*$/.test(e),Fr=e=>e===void 0,sk=e=>Array.isArray(e)?e.filter(Boolean):[],ok=e=>sk(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Ae=(e,t,r)=>{if(!t||!Vr(e))return r;const n=(K0(t)?[t]:ok(t)).reduce((a,i)=>Fn(a)?a:a[i],e);return Fr(n)||n===e?Fr(e[t])?r:e[t]:n},ma=e=>typeof e=="boolean",zt=(e,t,r)=>{let n=-1;const a=K0(t)?[t]:ok(t),i=a.length,o=i-1;for(;++n<i;){const l=a[n];let c=r;if(n!==o){const u=e[l];c=Vr(u)||Array.isArray(u)?u:isNaN(+a[n+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;e[l]=c,e=e[l]}};const Hy={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},pi={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},cs={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},lk=$.createContext(null);lk.displayName="HookFormContext";const G0=()=>$.useContext(lk),cEe=e=>{const{children:t,...r}=e;return $.createElement(lk.Provider,{value:r},t)};var WU=(e,t,r,n=!0)=>{const a={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(a,i,{get:()=>{const o=i;return t._proxyFormState[o]!==pi.all&&(t._proxyFormState[o]=!n||pi.all),r&&(r[o]=!0),e[o]}});return a};const ck=typeof window<"u"?$.useLayoutEffect:$.useEffect;function uEe(e){const t=G0(),{control:r=t.control,disabled:n,name:a,exact:i}=e||{},[o,l]=$.useState(r._formState),c=$.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return ck(()=>r._subscribe({name:a,formState:c.current,exact:i,callback:u=>{!n&&l({...r._formState,...u})}}),[a,n,i]),$.useEffect(()=>{c.current.isValid&&r._setValid(!0)},[r]),$.useMemo(()=>WU(o,r,c.current,!1),[o,r])}var Vi=e=>typeof e=="string",HU=(e,t,r,n,a)=>Vi(e)?(n&&t.watch.add(e),Ae(r,e,a)):Array.isArray(e)?e.map(i=>(n&&t.watch.add(i),Ae(r,i))):(n&&(t.watchAll=!0),r),aS=e=>Fn(e)||!zU(e);function gs(e,t,r=new WeakSet){if(aS(e)||aS(t))return e===t;if(Il(e)&&Il(t))return e.getTime()===t.getTime();const n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const i of n){const o=e[i];if(!a.includes(i))return!1;if(i!=="ref"){const l=t[i];if(Il(o)&&Il(l)||Vr(o)&&Vr(l)||Array.isArray(o)&&Array.isArray(l)?!gs(o,l,r):o!==l)return!1}}return!0}function dEe(e){const t=G0(),{control:r=t.control,name:n,defaultValue:a,disabled:i,exact:o,compute:l}=e||{},c=$.useRef(a),u=$.useRef(l),d=$.useRef(void 0);u.current=l;const f=$.useMemo(()=>r._getWatch(n,c.current),[r,n]),[h,m]=$.useState(u.current?u.current(f):f);return ck(()=>r._subscribe({name:n,formState:{values:!0},exact:o,callback:y=>{if(!i){const g=HU(n,r._names,y.values||r._formValues,!1,c.current);if(u.current){const p=u.current(g);gs(p,d.current)||(m(p),d.current=p)}else m(g)}}}),[r,i,n,o]),$.useEffect(()=>r._removeUnmounted()),h}function fEe(e){const t=G0(),{name:r,disabled:n,control:a=t.control,shouldUnregister:i,defaultValue:o}=e,l=VU(a._names.array,r),c=$.useMemo(()=>Ae(a._formValues,r,Ae(a._defaultValues,r,o)),[a,r,o]),u=dEe({control:a,name:r,defaultValue:c,exact:!0}),d=uEe({control:a,name:r,exact:!0}),f=$.useRef(e),h=$.useRef(a.register(r,{...e.rules,value:u,...ma(e.disabled)?{disabled:e.disabled}:{}}));f.current=e;const m=$.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Ae(d.errors,r)},isDirty:{enumerable:!0,get:()=>!!Ae(d.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!Ae(d.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!Ae(d.validatingFields,r)},error:{enumerable:!0,get:()=>Ae(d.errors,r)}}),[d,r]),y=$.useCallback(x=>h.current.onChange({target:{value:UU(x),name:r},type:Hy.CHANGE}),[r]),g=$.useCallback(()=>h.current.onBlur({target:{value:Ae(a._formValues,r),name:r},type:Hy.BLUR}),[r,a._formValues]),p=$.useCallback(x=>{const b=Ae(a._fields,r);b&&x&&(b._f.ref={focus:()=>x.focus&&x.focus(),select:()=>x.select&&x.select(),setCustomValidity:_=>x.setCustomValidity(_),reportValidity:()=>x.reportValidity()})},[a._fields,r]),v=$.useMemo(()=>({name:r,value:u,...ma(n)||d.disabled?{disabled:d.disabled||n}:{},onChange:y,onBlur:g,ref:p}),[r,n,d.disabled,y,g,p,u]);return $.useEffect(()=>{const x=a._options.shouldUnregister||i;a.register(r,{...f.current.rules,...ma(f.current.disabled)?{disabled:f.current.disabled}:{}});const b=(_,j)=>{const S=Ae(a._fields,_);S&&S._f&&(S._f.mount=j)};if(b(r,!0),x){const _=Jr(Ae(a._options.defaultValues,r));zt(a._defaultValues,r,_),Fr(Ae(a._formValues,r))&&zt(a._formValues,r,_)}return!l&&a.register(r),()=>{(l?x&&!a._state.action:x)?a.unregister(r):b(r,!1)}},[r,a,l,i]),$.useEffect(()=>{a._setDisabledField({disabled:n,name:r})},[n,r,a]),$.useMemo(()=>({field:v,formState:d,fieldState:m}),[v,d,m])}const hEe=e=>e.render(fEe(e));var qU=(e,t,r,n,a)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:a||!0}}:{},_h=e=>Array.isArray(e)?e:[e],NR=()=>{let e=[];return{get observers(){return e},next:a=>{for(const i of e)i.next&&i.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(i=>i!==a)}}),unsubscribe:()=>{e=[]}}},Qn=e=>Vr(e)&&!Object.keys(e).length,uk=e=>e.type==="file",gi=e=>typeof e=="function",qy=e=>{if(!ik)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},KU=e=>e.type==="select-multiple",dk=e=>e.type==="radio",mEe=e=>dk(e)||bp(e),$w=e=>qy(e)&&e.isConnected;function pEe(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=Fr(e)?n++:e[t[n++]];return e}function gEe(e){for(const t in e)if(e.hasOwnProperty(t)&&!Fr(e[t]))return!1;return!0}function Wr(e,t){const r=Array.isArray(t)?t:K0(t)?[t]:ok(t),n=r.length===1?e:pEe(e,r),a=r.length-1,i=r[a];return n&&delete n[i],a!==0&&(Vr(n)&&Qn(n)||Array.isArray(n)&&gEe(n))&&Wr(e,r.slice(0,-1)),e}var GU=e=>{for(const t in e)if(gi(e[t]))return!0;return!1};function Ky(e,t={}){const r=Array.isArray(e);if(Vr(e)||r)for(const n in e)Array.isArray(e[n])||Vr(e[n])&&!GU(e[n])?(t[n]=Array.isArray(e[n])?[]:{},Ky(e[n],t[n])):Fn(e[n])||(t[n]=!0);return t}function YU(e,t,r){const n=Array.isArray(e);if(Vr(e)||n)for(const a in e)Array.isArray(e[a])||Vr(e[a])&&!GU(e[a])?Fr(t)||aS(r[a])?r[a]=Array.isArray(e[a])?Ky(e[a],[]):{...Ky(e[a])}:YU(e[a],Fn(t)?{}:t[a],r[a]):r[a]=!gs(e[a],t[a]);return r}var Lf=(e,t)=>YU(e,t,Ky(t));const kR={value:!1,isValid:!1},PR={value:!0,isValid:!0};var XU=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Fr(e[0].attributes.value)?Fr(e[0].value)||e[0].value===""?PR:{value:e[0].value,isValid:!0}:PR:kR}return kR},ZU=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>Fr(e)?e:t?e===""?NaN:e&&+e:r&&Vi(e)?new Date(e):n?n(e):e;const ER={isValid:!1,value:null};var QU=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,ER):ER;function AR(e){const t=e.ref;return uk(t)?t.files:dk(t)?QU(e.refs).value:KU(t)?[...t.selectedOptions].map(({value:r})=>r):bp(t)?XU(e.refs).value:ZU(Fr(t.value)?e.ref.value:t.value,e)}var vEe=(e,t,r,n)=>{const a={};for(const i of e){const o=Ae(t,i);o&&zt(a,i,o._f)}return{criteriaMode:r,names:[...e],fields:a,shouldUseNativeValidation:n}},Gy=e=>e instanceof RegExp,Bf=e=>Fr(e)?e:Gy(e)?e.source:Vr(e)?Gy(e.value)?e.value.source:e.value:e,OR=e=>({isOnSubmit:!e||e===pi.onSubmit,isOnBlur:e===pi.onBlur,isOnChange:e===pi.onChange,isOnAll:e===pi.all,isOnTouch:e===pi.onTouched});const TR="AsyncFunction";var yEe=e=>!!e&&!!e.validate&&!!(gi(e.validate)&&e.validate.constructor.name===TR||Vr(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===TR)),xEe=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),RR=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const Sh=(e,t,r,n)=>{for(const a of r||Object.keys(e)){const i=Ae(e,a);if(i){const{_f:o,...l}=i;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],a)&&!n)return!0;if(o.ref&&t(o.ref,o.name)&&!n)return!0;if(Sh(l,t))break}else if(Vr(l)&&Sh(l,t))break}}};function MR(e,t,r){const n=Ae(e,r);if(n||K0(r))return{error:n,name:r};const a=r.split(".");for(;a.length;){const i=a.join("."),o=Ae(t,i),l=Ae(e,i);if(o&&!Array.isArray(o)&&r!==i)return{name:r};if(l&&l.type)return{name:i,error:l};if(l&&l.root&&l.root.type)return{name:`${i}.root`,error:l.root};a.pop()}return{name:r}}var bEe=(e,t,r,n)=>{r(e);const{name:a,...i}=e;return Qn(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(o=>t[o]===(!n||pi.all))},wEe=(e,t,r)=>!e||!t||e===t||_h(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),jEe=(e,t,r,n,a)=>a.isOnAll?!1:!r&&a.isOnTouch?!(t||e):(r?n.isOnBlur:a.isOnBlur)?!e:(r?n.isOnChange:a.isOnChange)?e:!0,_Ee=(e,t)=>!sk(Ae(e,t)).length&&Wr(e,t),SEe=(e,t,r)=>{const n=_h(Ae(e,r));return zt(n,"root",t[r]),zt(e,r,n),e},zg=e=>Vi(e);function $R(e,t,r="validate"){if(zg(e)||Array.isArray(e)&&e.every(zg)||ma(e)&&!e)return{type:r,message:zg(e)?e:"",ref:t}}var Dc=e=>Vr(e)&&!Gy(e)?e:{value:e,message:""},IR=async(e,t,r,n,a,i)=>{const{ref:o,refs:l,required:c,maxLength:u,minLength:d,min:f,max:h,pattern:m,validate:y,name:g,valueAsNumber:p,mount:v}=e._f,x=Ae(r,g);if(!v||t.has(g))return{};const b=l?l[0]:o,_=E=>{a&&b.reportValidity&&(b.setCustomValidity(ma(E)?"":E||""),b.reportValidity())},j={},S=dk(o),C=bp(o),k=S||C,N=(p||uk(o))&&Fr(o.value)&&Fr(x)||qy(o)&&o.value===""||x===""||Array.isArray(x)&&!x.length,A=qU.bind(null,g,n,j),O=(E,R,P,T=cs.maxLength,I=cs.minLength)=>{const M=E?R:P;j[g]={type:E?T:I,message:M,ref:o,...A(E?T:I,M)}};if(i?!Array.isArray(x)||!x.length:c&&(!k&&(N||Fn(x))||ma(x)&&!x||C&&!XU(l).isValid||S&&!QU(l).isValid)){const{value:E,message:R}=zg(c)?{value:!!c,message:c}:Dc(c);if(E&&(j[g]={type:cs.required,message:R,ref:b,...A(cs.required,R)},!n))return _(R),j}if(!N&&(!Fn(f)||!Fn(h))){let E,R;const P=Dc(h),T=Dc(f);if(!Fn(x)&&!isNaN(x)){const I=o.valueAsNumber||x&&+x;Fn(P.value)||(E=I>P.value),Fn(T.value)||(R=I<T.value)}else{const I=o.valueAsDate||new Date(x),M=z=>new Date(new Date().toDateString()+" "+z),D=o.type=="time",B=o.type=="week";Vi(P.value)&&x&&(E=D?M(x)>M(P.value):B?x>P.value:I>new Date(P.value)),Vi(T.value)&&x&&(R=D?M(x)<M(T.value):B?x<T.value:I<new Date(T.value))}if((E||R)&&(O(!!E,P.message,T.message,cs.max,cs.min),!n))return _(j[g].message),j}if((u||d)&&!N&&(Vi(x)||i&&Array.isArray(x))){const E=Dc(u),R=Dc(d),P=!Fn(E.value)&&x.length>+E.value,T=!Fn(R.value)&&x.length<+R.value;if((P||T)&&(O(P,E.message,R.message),!n))return _(j[g].message),j}if(m&&!N&&Vi(x)){const{value:E,message:R}=Dc(m);if(Gy(E)&&!x.match(E)&&(j[g]={type:cs.pattern,message:R,ref:o,...A(cs.pattern,R)},!n))return _(R),j}if(y){if(gi(y)){const E=await y(x,r),R=$R(E,b);if(R&&(j[g]={...R,...A(cs.validate,R.message)},!n))return _(R.message),j}else if(Vr(y)){let E={};for(const R in y){if(!Qn(E)&&!n)break;const P=$R(await y[R](x,r),b,R);P&&(E={...P,...A(R,P.message)},_(P.message),n&&(j[g]=E))}if(!Qn(E)&&(j[g]={ref:b,...E},!n))return j}}return _(!0),j};const CEe={mode:pi.onSubmit,reValidateMode:pi.onChange,shouldFocusError:!0};function NEe(e={}){let t={...CEe,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:gi(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},a=Vr(t.defaultValues)||Vr(t.values)?Jr(t.defaultValues||t.values)||{}:{},i=t.shouldUnregister?{}:Jr(a),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...d};const h={array:NR(),state:NR()},m=t.criteriaMode===pi.all,y=F=>ee=>{clearTimeout(u),u=setTimeout(F,ee)},g=async F=>{if(!t.disabled&&(d.isValid||f.isValid||F)){const ee=t.resolver?Qn((await C()).errors):await N(n,!0);ee!==r.isValid&&h.state.next({isValid:ee})}},p=(F,ee)=>{!t.disabled&&(d.isValidating||d.validatingFields||f.isValidating||f.validatingFields)&&((F||Array.from(l.mount)).forEach(oe=>{oe&&(ee?zt(r.validatingFields,oe,ee):Wr(r.validatingFields,oe))}),h.state.next({validatingFields:r.validatingFields,isValidating:!Qn(r.validatingFields)}))},v=(F,ee=[],oe,K,ie=!0,ve=!0)=>{if(K&&oe&&!t.disabled){if(o.action=!0,ve&&Array.isArray(Ae(n,F))){const de=oe(Ae(n,F),K.argA,K.argB);ie&&zt(n,F,de)}if(ve&&Array.isArray(Ae(r.errors,F))){const de=oe(Ae(r.errors,F),K.argA,K.argB);ie&&zt(r.errors,F,de),_Ee(r.errors,F)}if((d.touchedFields||f.touchedFields)&&ve&&Array.isArray(Ae(r.touchedFields,F))){const de=oe(Ae(r.touchedFields,F),K.argA,K.argB);ie&&zt(r.touchedFields,F,de)}(d.dirtyFields||f.dirtyFields)&&(r.dirtyFields=Lf(a,i)),h.state.next({name:F,isDirty:O(F,ee),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else zt(i,F,ee)},x=(F,ee)=>{zt(r.errors,F,ee),h.state.next({errors:r.errors})},b=F=>{r.errors=F,h.state.next({errors:r.errors,isValid:!1})},_=(F,ee,oe,K)=>{const ie=Ae(n,F);if(ie){const ve=Ae(i,F,Fr(oe)?Ae(a,F):oe);Fr(ve)||K&&K.defaultChecked||ee?zt(i,F,ee?ve:AR(ie._f)):P(F,ve),o.mount&&g()}},j=(F,ee,oe,K,ie)=>{let ve=!1,de=!1;const Me={name:F};if(!t.disabled){if(!oe||K){(d.isDirty||f.isDirty)&&(de=r.isDirty,r.isDirty=Me.isDirty=O(),ve=de!==Me.isDirty);const Ze=gs(Ae(a,F),ee);de=!!Ae(r.dirtyFields,F),Ze?Wr(r.dirtyFields,F):zt(r.dirtyFields,F,!0),Me.dirtyFields=r.dirtyFields,ve=ve||(d.dirtyFields||f.dirtyFields)&&de!==!Ze}if(oe){const Ze=Ae(r.touchedFields,F);Ze||(zt(r.touchedFields,F,oe),Me.touchedFields=r.touchedFields,ve=ve||(d.touchedFields||f.touchedFields)&&Ze!==oe)}ve&&ie&&h.state.next(Me)}return ve?Me:{}},S=(F,ee,oe,K)=>{const ie=Ae(r.errors,F),ve=(d.isValid||f.isValid)&&ma(ee)&&r.isValid!==ee;if(t.delayError&&oe?(c=y(()=>x(F,oe)),c(t.delayError)):(clearTimeout(u),c=null,oe?zt(r.errors,F,oe):Wr(r.errors,F)),(oe?!gs(ie,oe):ie)||!Qn(K)||ve){const de={...K,...ve&&ma(ee)?{isValid:ee}:{},errors:r.errors,name:F};r={...r,...de},h.state.next(de)}},C=async F=>{p(F,!0);const ee=await t.resolver(i,t.context,vEe(F||l.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return p(F),ee},k=async F=>{const{errors:ee}=await C(F);if(F)for(const oe of F){const K=Ae(ee,oe);K?zt(r.errors,oe,K):Wr(r.errors,oe)}else r.errors=ee;return ee},N=async(F,ee,oe={valid:!0})=>{for(const K in F){const ie=F[K];if(ie){const{_f:ve,...de}=ie;if(ve){const Me=l.array.has(ve.name),Ze=ie._f&&yEe(ie._f);Ze&&d.validatingFields&&p([K],!0);const ft=await IR(ie,l.disabled,i,m,t.shouldUseNativeValidation&&!ee,Me);if(Ze&&d.validatingFields&&p([K]),ft[ve.name]&&(oe.valid=!1,ee))break;!ee&&(Ae(ft,ve.name)?Me?SEe(r.errors,ft,ve.name):zt(r.errors,ve.name,ft[ve.name]):Wr(r.errors,ve.name))}!Qn(de)&&await N(de,ee,oe)}}return oe.valid},A=()=>{for(const F of l.unMount){const ee=Ae(n,F);ee&&(ee._f.refs?ee._f.refs.every(oe=>!$w(oe)):!$w(ee._f.ref))&&H(F)}l.unMount=new Set},O=(F,ee)=>!t.disabled&&(F&&ee&&zt(i,F,ee),!gs(z(),a)),E=(F,ee,oe)=>HU(F,l,{...o.mount?i:Fr(ee)?a:Vi(F)?{[F]:ee}:ee},oe,ee),R=F=>sk(Ae(o.mount?i:a,F,t.shouldUnregister?Ae(a,F,[]):[])),P=(F,ee,oe={})=>{const K=Ae(n,F);let ie=ee;if(K){const ve=K._f;ve&&(!ve.disabled&&zt(i,F,ZU(ee,ve)),ie=qy(ve.ref)&&Fn(ee)?"":ee,KU(ve.ref)?[...ve.ref.options].forEach(de=>de.selected=ie.includes(de.value)):ve.refs?bp(ve.ref)?ve.refs.forEach(de=>{(!de.defaultChecked||!de.disabled)&&(Array.isArray(ie)?de.checked=!!ie.find(Me=>Me===de.value):de.checked=ie===de.value||!!ie)}):ve.refs.forEach(de=>de.checked=de.value===ie):uk(ve.ref)?ve.ref.value="":(ve.ref.value=ie,ve.ref.type||h.state.next({name:F,values:Jr(i)})))}(oe.shouldDirty||oe.shouldTouch)&&j(F,ie,oe.shouldTouch,oe.shouldDirty,!0),oe.shouldValidate&&B(F)},T=(F,ee,oe)=>{for(const K in ee){if(!ee.hasOwnProperty(K))return;const ie=ee[K],ve=F+"."+K,de=Ae(n,ve);(l.array.has(F)||Vr(ie)||de&&!de._f)&&!Il(ie)?T(ve,ie,oe):P(ve,ie,oe)}},I=(F,ee,oe={})=>{const K=Ae(n,F),ie=l.array.has(F),ve=Jr(ee);zt(i,F,ve),ie?(h.array.next({name:F,values:Jr(i)}),(d.isDirty||d.dirtyFields||f.isDirty||f.dirtyFields)&&oe.shouldDirty&&h.state.next({name:F,dirtyFields:Lf(a,i),isDirty:O(F,ve)})):K&&!K._f&&!Fn(ve)?T(F,ve,oe):P(F,ve,oe),RR(F,l)&&h.state.next({...r,name:F}),h.state.next({name:o.mount?F:void 0,values:Jr(i)})},M=async F=>{o.mount=!0;const ee=F.target;let oe=ee.name,K=!0;const ie=Ae(n,oe),ve=Ze=>{K=Number.isNaN(Ze)||Il(Ze)&&isNaN(Ze.getTime())||gs(Ze,Ae(i,oe,Ze))},de=OR(t.mode),Me=OR(t.reValidateMode);if(ie){let Ze,ft;const Ge=ee.type?AR(ie._f):UU(F),yt=F.type===Hy.BLUR||F.type===Hy.FOCUS_OUT,me=!xEe(ie._f)&&!t.resolver&&!Ae(r.errors,oe)&&!ie._f.deps||jEe(yt,Ae(r.touchedFields,oe),r.isSubmitted,Me,de),ze=RR(oe,l,yt);zt(i,oe,Ge),yt?(ie._f.onBlur&&ie._f.onBlur(F),c&&c(0)):ie._f.onChange&&ie._f.onChange(F);const it=j(oe,Ge,yt),Dt=!Qn(it)||ze;if(!yt&&h.state.next({name:oe,type:F.type,values:Jr(i)}),me)return(d.isValid||f.isValid)&&(t.mode==="onBlur"?yt&&g():yt||g()),Dt&&h.state.next({name:oe,...ze?{}:it});if(!yt&&ze&&h.state.next({...r}),t.resolver){const{errors:xt}=await C([oe]);if(ve(Ge),K){const ht=MR(r.errors,n,oe),on=MR(xt,n,ht.name||oe);Ze=on.error,oe=on.name,ft=Qn(xt)}}else p([oe],!0),Ze=(await IR(ie,l.disabled,i,m,t.shouldUseNativeValidation))[oe],p([oe]),ve(Ge),K&&(Ze?ft=!1:(d.isValid||f.isValid)&&(ft=await N(n,!0)));K&&(ie._f.deps&&B(ie._f.deps),S(oe,ft,Ze,it))}},D=(F,ee)=>{if(Ae(r.errors,ee)&&F.focus)return F.focus(),1},B=async(F,ee={})=>{let oe,K;const ie=_h(F);if(t.resolver){const ve=await k(Fr(F)?F:ie);oe=Qn(ve),K=F?!ie.some(de=>Ae(ve,de)):oe}else F?(K=(await Promise.all(ie.map(async ve=>{const de=Ae(n,ve);return await N(de&&de._f?{[ve]:de}:de)}))).every(Boolean),!(!K&&!r.isValid)&&g()):K=oe=await N(n);return h.state.next({...!Vi(F)||(d.isValid||f.isValid)&&oe!==r.isValid?{}:{name:F},...t.resolver||!F?{isValid:oe}:{},errors:r.errors}),ee.shouldFocus&&!K&&Sh(n,D,F?ie:l.mount),K},z=F=>{const ee={...o.mount?i:a};return Fr(F)?ee:Vi(F)?Ae(ee,F):F.map(oe=>Ae(ee,oe))},Z=(F,ee)=>({invalid:!!Ae((ee||r).errors,F),isDirty:!!Ae((ee||r).dirtyFields,F),error:Ae((ee||r).errors,F),isValidating:!!Ae(r.validatingFields,F),isTouched:!!Ae((ee||r).touchedFields,F)}),J=F=>{F&&_h(F).forEach(ee=>Wr(r.errors,ee)),h.state.next({errors:F?r.errors:{}})},se=(F,ee,oe)=>{const K=(Ae(n,F,{_f:{}})._f||{}).ref,ie=Ae(r.errors,F)||{},{ref:ve,message:de,type:Me,...Ze}=ie;zt(r.errors,F,{...Ze,...ee,ref:K}),h.state.next({name:F,errors:r.errors,isValid:!1}),oe&&oe.shouldFocus&&K&&K.focus&&K.focus()},U=(F,ee)=>gi(F)?h.state.subscribe({next:oe=>"values"in oe&&F(E(void 0,ee),oe)}):E(F,ee,!0),q=F=>h.state.subscribe({next:ee=>{wEe(F.name,ee.name,F.exact)&&bEe(ee,F.formState||d,ge,F.reRenderRoot)&&F.callback({values:{...i},...r,...ee,defaultValues:a})}}).unsubscribe,G=F=>(o.mount=!0,f={...f,...F.formState},q({...F,formState:f})),H=(F,ee={})=>{for(const oe of F?_h(F):l.mount)l.mount.delete(oe),l.array.delete(oe),ee.keepValue||(Wr(n,oe),Wr(i,oe)),!ee.keepError&&Wr(r.errors,oe),!ee.keepDirty&&Wr(r.dirtyFields,oe),!ee.keepTouched&&Wr(r.touchedFields,oe),!ee.keepIsValidating&&Wr(r.validatingFields,oe),!t.shouldUnregister&&!ee.keepDefaultValue&&Wr(a,oe);h.state.next({values:Jr(i)}),h.state.next({...r,...ee.keepDirty?{isDirty:O()}:{}}),!ee.keepIsValid&&g()},fe=({disabled:F,name:ee})=>{(ma(F)&&o.mount||F||l.disabled.has(ee))&&(F?l.disabled.add(ee):l.disabled.delete(ee))},L=(F,ee={})=>{let oe=Ae(n,F);const K=ma(ee.disabled)||ma(t.disabled);return zt(n,F,{...oe||{},_f:{...oe&&oe._f?oe._f:{ref:{name:F}},name:F,mount:!0,...ee}}),l.mount.add(F),oe?fe({disabled:ma(ee.disabled)?ee.disabled:t.disabled,name:F}):_(F,!0,ee.value),{...K?{disabled:ee.disabled||t.disabled}:{},...t.progressive?{required:!!ee.required,min:Bf(ee.min),max:Bf(ee.max),minLength:Bf(ee.minLength),maxLength:Bf(ee.maxLength),pattern:Bf(ee.pattern)}:{},name:F,onChange:M,onBlur:M,ref:ie=>{if(ie){L(F,ee),oe=Ae(n,F);const ve=Fr(ie.value)&&ie.querySelectorAll&&ie.querySelectorAll("input,select,textarea")[0]||ie,de=mEe(ve),Me=oe._f.refs||[];if(de?Me.find(Ze=>Ze===ve):ve===oe._f.ref)return;zt(n,F,{_f:{...oe._f,...de?{refs:[...Me.filter($w),ve,...Array.isArray(Ae(a,F))?[{}]:[]],ref:{type:ve.type,name:F}}:{ref:ve}}}),_(F,!1,void 0,ve)}else oe=Ae(n,F,{}),oe._f&&(oe._f.mount=!1),(t.shouldUnregister||ee.shouldUnregister)&&!(VU(l.array,F)&&o.action)&&l.unMount.add(F)}}},Y=()=>t.shouldFocusError&&Sh(n,D,l.mount),V=F=>{ma(F)&&(h.state.next({disabled:F}),Sh(n,(ee,oe)=>{const K=Ae(n,oe);K&&(ee.disabled=K._f.disabled||F,Array.isArray(K._f.refs)&&K._f.refs.forEach(ie=>{ie.disabled=K._f.disabled||F}))},0,!1))},Q=(F,ee)=>async oe=>{let K;oe&&(oe.preventDefault&&oe.preventDefault(),oe.persist&&oe.persist());let ie=Jr(i);if(h.state.next({isSubmitting:!0}),t.resolver){const{errors:ve,values:de}=await C();r.errors=ve,ie=Jr(de)}else await N(n);if(l.disabled.size)for(const ve of l.disabled)Wr(ie,ve);if(Wr(r.errors,"root"),Qn(r.errors)){h.state.next({errors:{}});try{await F(ie,oe)}catch(ve){K=ve}}else ee&&await ee({...r.errors},oe),Y(),setTimeout(Y);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Qn(r.errors)&&!K,submitCount:r.submitCount+1,errors:r.errors}),K)throw K},te=(F,ee={})=>{Ae(n,F)&&(Fr(ee.defaultValue)?I(F,Jr(Ae(a,F))):(I(F,ee.defaultValue),zt(a,F,Jr(ee.defaultValue))),ee.keepTouched||Wr(r.touchedFields,F),ee.keepDirty||(Wr(r.dirtyFields,F),r.isDirty=ee.defaultValue?O(F,Jr(Ae(a,F))):O()),ee.keepError||(Wr(r.errors,F),d.isValid&&g()),h.state.next({...r}))},be=(F,ee={})=>{const oe=F?Jr(F):a,K=Jr(oe),ie=Qn(F),ve=ie?a:K;if(ee.keepDefaultValues||(a=oe),!ee.keepValues){if(ee.keepDirtyValues){const de=new Set([...l.mount,...Object.keys(Lf(a,i))]);for(const Me of Array.from(de))Ae(r.dirtyFields,Me)?zt(ve,Me,Ae(i,Me)):I(Me,Ae(ve,Me))}else{if(ik&&Fr(F))for(const de of l.mount){const Me=Ae(n,de);if(Me&&Me._f){const Ze=Array.isArray(Me._f.refs)?Me._f.refs[0]:Me._f.ref;if(qy(Ze)){const ft=Ze.closest("form");if(ft){ft.reset();break}}}}if(ee.keepFieldsRef)for(const de of l.mount)I(de,Ae(ve,de));else n={}}i=t.shouldUnregister?ee.keepDefaultValues?Jr(a):{}:Jr(ve),h.array.next({values:{...ve}}),h.state.next({values:{...ve}})}l={mount:ee.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!ee.keepIsValid||!!ee.keepDirtyValues,o.watch=!!t.shouldUnregister,h.state.next({submitCount:ee.keepSubmitCount?r.submitCount:0,isDirty:ie?!1:ee.keepDirty?r.isDirty:!!(ee.keepDefaultValues&&!gs(F,a)),isSubmitted:ee.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:ie?{}:ee.keepDirtyValues?ee.keepDefaultValues&&i?Lf(a,i):r.dirtyFields:ee.keepDefaultValues&&F?Lf(a,F):ee.keepDirty?r.dirtyFields:{},touchedFields:ee.keepTouched?r.touchedFields:{},errors:ee.keepErrors?r.errors:{},isSubmitSuccessful:ee.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},Re=(F,ee)=>be(gi(F)?F(i):F,ee),We=(F,ee={})=>{const oe=Ae(n,F),K=oe&&oe._f;if(K){const ie=K.refs?K.refs[0]:K.ref;ie.focus&&(ie.focus(),ee.shouldSelect&&gi(ie.select)&&ie.select())}},ge=F=>{r={...r,...F}},Xe={control:{register:L,unregister:H,getFieldState:Z,handleSubmit:Q,setError:se,_subscribe:q,_runSchema:C,_focusError:Y,_getWatch:E,_getDirty:O,_setValid:g,_setFieldArray:v,_setDisabledField:fe,_setErrors:b,_getFieldArray:R,_reset:be,_resetDefaultValues:()=>gi(t.defaultValues)&&t.defaultValues().then(F=>{Re(F,t.resetOptions),h.state.next({isLoading:!1})}),_removeUnmounted:A,_disableForm:V,_subjects:h,_proxyFormState:d,get _fields(){return n},get _formValues(){return i},get _state(){return o},set _state(F){o=F},get _defaultValues(){return a},get _names(){return l},set _names(F){l=F},get _formState(){return r},get _options(){return t},set _options(F){t={...t,...F}}},subscribe:G,trigger:B,register:L,handleSubmit:Q,watch:U,setValue:I,getValues:z,reset:Re,resetField:te,clearErrors:J,unregister:H,setError:se,setFocus:We,getFieldState:Z};return{...Xe,formControl:Xe}}function DR(e={}){const t=$.useRef(void 0),r=$.useRef(void 0),[n,a]=$.useState({isDirty:!1,isValidating:!1,isLoading:gi(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:gi(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:n},e.defaultValues&&!gi(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:o,...l}=NEe(e);t.current={...l,formState:n}}const i=t.current.control;return i._options=e,ck(()=>{const o=i._subscribe({formState:i._proxyFormState,callback:()=>a({...i._formState}),reRenderRoot:!0});return a(l=>({...l,isReady:!0})),i._formState.isReady=!0,o},[i]),$.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),$.useEffect(()=>{e.mode&&(i._options.mode=e.mode),e.reValidateMode&&(i._options.reValidateMode=e.reValidateMode)},[i,e.mode,e.reValidateMode]),$.useEffect(()=>{e.errors&&(i._setErrors(e.errors),i._focusError())},[i,e.errors]),$.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,e.shouldUnregister]),$.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==n.isDirty&&i._subjects.state.next({isDirty:o})}},[i,n.isDirty]),$.useEffect(()=>{e.values&&!gs(e.values,r.current)?(i._reset(e.values,{keepFieldsRef:!0,...i._options.resetOptions}),r.current=e.values,a(o=>({...o}))):i._resetDefaultValues()},[i,e.values]),$.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),t.current.formState=WU(n,i),t.current}const LR=(e,t,r)=>{if(e&&"reportValidity"in e){const n=Ae(r,t);e.setCustomValidity(n&&n.message||""),e.reportValidity()}},JU=(e,t)=>{for(const r in t.fields){const n=t.fields[r];n&&n.ref&&"reportValidity"in n.ref?LR(n.ref,r,e):n.refs&&n.refs.forEach(a=>LR(a,r,e))}},kEe=(e,t)=>{t.shouldUseNativeValidation&&JU(e,t);const r={};for(const n in e){const a=Ae(t.fields,n),i=Object.assign(e[n]||{},{ref:a&&a.ref});if(PEe(t.names||Object.keys(e),n)){const o=Object.assign({},Ae(r,n));zt(o,"root",i),zt(r,n,o)}else zt(r,n,i)}return r},PEe=(e,t)=>e.some(r=>r.startsWith(t+"."));var EEe=function(e,t){for(var r={};e.length;){var n=e[0],a=n.code,i=n.message,o=n.path.join(".");if(!r[o])if("unionErrors"in n){var l=n.unionErrors[0].errors[0];r[o]={message:l.message,type:l.code}}else r[o]={message:i,type:a};if("unionErrors"in n&&n.unionErrors.forEach(function(d){return d.errors.forEach(function(f){return e.push(f)})}),t){var c=r[o].types,u=c&&c[n.code];r[o]=qU(o,t,r,a,u?[].concat(u,n.message):n.message)}e.shift()}return r},BR=function(e,t,r){return r===void 0&&(r={}),function(n,a,i){try{return Promise.resolve(function(o,l){try{var c=Promise.resolve(e[r.mode==="sync"?"parse":"parseAsync"](n,t)).then(function(u){return i.shouldUseNativeValidation&&JU({},i),{errors:{},values:r.raw?n:u}})}catch(u){return l(u)}return c&&c.then?c.then(void 0,l):c}(0,function(o){if(function(l){return Array.isArray(l==null?void 0:l.errors)}(o))return{values:{},errors:kEe(EEe(o.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw o}))}catch(o){return Promise.reject(o)}}};const FR=cEe,e8=w.createContext({}),Ff=({...e})=>s.jsx(e8.Provider,{value:{name:e.name},children:s.jsx(hEe,{...e})}),Y0=()=>{const e=w.useContext(e8),t=w.useContext(t8),{getFieldState:r,formState:n}=G0(),a=r(e.name,n);if(!e)throw new Error("useFormField should be used within <FormField>");const{id:i}=t;return{id:i,name:e.name,formItemId:`${i}-form-item`,formDescriptionId:`${i}-form-item-description`,formMessageId:`${i}-form-item-message`,...a}},t8=w.createContext({}),Hc=w.forwardRef(({className:e,...t},r)=>{const n=w.useId();return s.jsx(t8.Provider,{value:{id:n},children:s.jsx("div",{ref:r,className:ue("space-y-2",e),...t})})});Hc.displayName="FormItem";const qc=w.forwardRef(({className:e,...t},r)=>{const{error:n,formItemId:a}=Y0();return s.jsx(Ne,{ref:r,className:ue(n&&"text-destructive",e),htmlFor:a,...t})});qc.displayName="FormLabel";const Kc=w.forwardRef(({...e},t)=>{const{error:r,formItemId:n,formDescriptionId:a,formMessageId:i}=Y0();return s.jsx(xI,{ref:t,id:n,"aria-describedby":r?`${a} ${i}`:`${a}`,"aria-invalid":!!r,...e})});Kc.displayName="FormControl";const AEe=w.forwardRef(({className:e,...t},r)=>{const{formDescriptionId:n}=Y0();return s.jsx("p",{ref:r,id:n,className:ue("text-sm text-muted-foreground",e),...t})});AEe.displayName="FormDescription";const Gc=w.forwardRef(({className:e,children:t,...r},n)=>{const{error:a,formMessageId:i}=Y0(),o=a?String(a==null?void 0:a.message):t;return o?s.jsx("p",{ref:n,id:i,className:ue("text-sm font-medium text-destructive",e),...r,children:o}):null});Gc.displayName="FormMessage";const OEe=FU({email:jh().trim().email({message:"Email invalide"}),password:jh().min(6,{message:"Le mot de passe doit contenir au moins 6 caractres"})}),TEe=FU({email:jh().trim().email({message:"Email invalide"}),password:jh().min(6,{message:"Le mot de passe doit contenir au moins 6 caractres"}),displayName:jh().trim().min(2,{message:"Le nom doit contenir au moins 2 caractres"}).max(50)});function REe(){const{user:e,loading:t,signIn:r,signUp:n}=Xn(),a=lp(),[i,o]=w.useState(!1);w.useEffect(()=>{e&&!t&&a("/")},[e,t,a]);const l=DR({resolver:BR(OEe),defaultValues:{email:"",password:""}}),c=DR({resolver:BR(TEe),defaultValues:{email:"",password:"",displayName:""}}),u=async f=>{o(!0);const{error:h}=await r(f.email,f.password);o(!1),h?h.message.includes("Invalid login credentials")?Lr({title:"Erreur de connexion",description:"Email ou mot de passe incorrect.",variant:"destructive"}):h.message.includes("Email not confirmed")?Lr({title:"Email non vrifi",description:"Veuillez vrifier votre email avant de vous connecter.",variant:"destructive"}):Lr({title:"Erreur",description:h.message,variant:"destructive"}):(Lr({title:"Connexion russie",description:"Bienvenue sur Novaride FinPlan Studio"}),a("/"))},d=async f=>{o(!0);const{error:h}=await n(f.email,f.password,f.displayName);o(!1),h?h.message.includes("already registered")?Lr({title:"Compte existant",description:"Un compte existe dj avec cet email.",variant:"destructive"}):Lr({title:"Erreur d'inscription",description:h.message,variant:"destructive"}):Lr({title:"Inscription russie",description:"Vrifiez votre email pour confirmer votre compte."})};return t?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:s.jsx(Ba,{className:"h-8 w-8 animate-spin text-primary"})}):s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background to-muted p-4",children:s.jsxs(St,{className:"w-full max-w-md",children:[s.jsxs(er,{className:"text-center",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx(TC,{variant:"full",color:"dark"})}),s.jsx(tr,{className:"whitespace-pre-line",children:"We engage, we move"}),s.jsx(_s,{children:"Plateforme de pilotage financier et de prsentation investisseurs"})]}),s.jsx(Rt,{children:s.jsxs(Ya,{defaultValue:"login",className:"w-full",children:[s.jsxs(Na,{className:"grid w-full grid-cols-2",children:[s.jsx(Ct,{value:"login",children:"Connexion"}),s.jsx(Ct,{value:"signup",children:"Inscription"})]}),s.jsx(Mt,{value:"login",className:"mt-4",children:s.jsx(FR,{...l,children:s.jsxs("form",{onSubmit:l.handleSubmit(u),className:"space-y-4",children:[s.jsx(Ff,{control:l.control,name:"email",render:({field:f})=>s.jsxs(Hc,{children:[s.jsx(qc,{children:"Email"}),s.jsx(Kc,{children:s.jsx(xe,{type:"email",placeholder:"vous@exemple.com",...f})}),s.jsx(Gc,{})]})}),s.jsx(Ff,{control:l.control,name:"password",render:({field:f})=>s.jsxs(Hc,{children:[s.jsx(qc,{children:"Mot de passe"}),s.jsx(Kc,{children:s.jsx(xe,{type:"password",placeholder:"",...f})}),s.jsx(Gc,{})]})}),s.jsxs(ne,{type:"submit",className:"w-full",disabled:i,children:[i&&s.jsx(Ba,{className:"mr-2 h-4 w-4 animate-spin"}),"Se connecter"]})]})})}),s.jsx(Mt,{value:"signup",className:"mt-4",children:s.jsx(FR,{...c,children:s.jsxs("form",{onSubmit:c.handleSubmit(d),className:"space-y-4",children:[s.jsx(Ff,{control:c.control,name:"displayName",render:({field:f})=>s.jsxs(Hc,{children:[s.jsx(qc,{children:"Nom complet"}),s.jsx(Kc,{children:s.jsx(xe,{placeholder:"Jean Dupont",...f})}),s.jsx(Gc,{})]})}),s.jsx(Ff,{control:c.control,name:"email",render:({field:f})=>s.jsxs(Hc,{children:[s.jsx(qc,{children:"Email"}),s.jsx(Kc,{children:s.jsx(xe,{type:"email",placeholder:"vous@exemple.com",...f})}),s.jsx(Gc,{})]})}),s.jsx(Ff,{control:c.control,name:"password",render:({field:f})=>s.jsxs(Hc,{children:[s.jsx(qc,{children:"Mot de passe"}),s.jsx(Kc,{children:s.jsx(xe,{type:"password",placeholder:"",...f})}),s.jsx(Gc,{})]})}),s.jsxs(ne,{type:"submit",className:"w-full",disabled:i,children:[i&&s.jsx(Ba,{className:"mr-2 h-4 w-4 animate-spin"}),"S'inscrire"]})]})})})]})})]})})}const MEe=["admin","finance","board","investisseur","lecteur","bureau_etude","production","marketing"];function $Ee(){const[e,t]=w.useState([]),[r,n]=w.useState(!0);w.useEffect(()=>{a()},[]);const a=async()=>{var o;try{const{data:l}=await he.auth.getSession(),c=(o=l==null?void 0:l.session)==null?void 0:o.access_token,d=await(await fetch("https://twkcoxagbajvopzzinor.supabase.co/functions/v1/list-users",{headers:{Authorization:`Bearer ${c}`,"Content-Type":"application/json"}})).json(),{data:f}=await he.from("user_roles").select("*"),h=new Map;f&&f.forEach(y=>h.set(y.user_id,y.role));const m=d.map(y=>({id:y.id,email:y.email,display_name:y.display_name,role:h.get(y.id)||"lecteur"}));t(m)}catch(l){console.error("Error fetching users:",l)}finally{n(!1)}},i=async(o,l)=>{try{await he.from("user_roles").upsert({user_id:o,role:l},{onConflict:"user_id"}),t(c=>c.map(u=>u.id===o?{...u,role:l}:u)),Lr({title:"Rle mis  jour"})}catch{Lr({title:"Erreur",variant:"destructive"})}};return r?s.jsx(Ba,{className:"h-6 w-6 animate-spin mx-auto"}):s.jsxs(St,{children:[s.jsx(er,{children:s.jsx(tr,{children:"Gestion des Utilisateurs"})}),s.jsx(Rt,{children:s.jsxs(Kt,{children:[s.jsx(Gt,{children:s.jsxs(_e,{children:[s.jsx(ce,{children:"Nom"}),s.jsx(ce,{children:"Email"}),s.jsx(ce,{children:"Rle"})]})}),s.jsxs(Yt,{children:[e.map(o=>s.jsxs(_e,{children:[s.jsx(W,{className:"font-medium",children:o.display_name||""}),s.jsx(W,{className:"text-sm text-muted-foreground",children:o.email}),s.jsx(W,{children:s.jsxs(lt,{value:o.role,onValueChange:l=>i(o.id,l),children:[s.jsx(st,{className:"w-32",children:s.jsx(ct,{})}),s.jsx(ot,{children:MEe.map(l=>s.jsx(De,{value:l,children:l},l))})]})})]},o.id)),e.length===0&&s.jsx(_e,{children:s.jsx(W,{colSpan:3,className:"text-center text-muted-foreground",children:"Aucun utilisateur"})})]})]})})]})}const Iw=["admin","finance","board","investisseur","lecteur","bureau_etude","production","marketing"],IEe=["hidden","read","write"],zf=[{key:"home",label:"Accueil"},{key:"tableau-de-bord",label:"Tableau de bord"},{key:"product-plan",label:"Plan Produit"},{key:"organisation",label:"Organisation"},{key:"charges",label:"Structure des Charges"},{key:"previsionnel",label:"Prvisionnel"},{key:"scenarios",label:"Scnarios"},{key:"funding",label:"Besoin de Financement"},{key:"valuation",label:"Valorisation & Analyse"},{key:"investment-summary",label:"Synthse Investisseur"},{key:"planning-dev",label:"Planning Dev"},{key:"costflow",label:"Production et BE"},{key:"crm",label:"CRM"},{key:"pricing",label:"Pricing"},{key:"timetracking",label:"Suivi d'activit"},{key:"snapshots",label:"Sauvegardes"}],DEe={admin:"Admin",finance:"Finance",board:"Board",investisseur:"Investisseur",lecteur:"Lecteur",bureau_etude:"Bureau d'tude",production:"Production",marketing:"Marketing"},Dw={hidden:{label:"Masqu",icon:rD,color:"bg-muted text-muted-foreground"},read:{label:"Lecture",icon:nD,color:"bg-blue-100 text-blue-800"},write:{label:"criture",icon:mv,color:"bg-green-100 text-green-800"}};function LEe(){const{isAdmin:e,loading:t}=Xn(),r=lp(),[n,a]=w.useState({}),[i,o]=w.useState(!0),[l,c]=w.useState(!1),[u,d]=w.useState(null);w.useEffect(()=>{!t&&!e&&r("/")},[e,t,r]),w.useEffect(()=>{f()},[]);const f=async()=>{try{const{data:y,error:g}=await he.from("tab_permissions").select("*");if(g)throw g;const p={};Iw.forEach(v=>{p[v]={},zf.forEach(x=>{p[v][x.key]="hidden"})}),y==null||y.forEach(v=>{p[v.role]&&(p[v.role][v.tab_key]=v.permission)}),a(p)}catch{}finally{o(!1)}},h=async()=>{c(!0);try{const{data:y,error:g}=await he.from("tab_permissions").select("role, tab_key");if(g)throw g;const p=new Set((y==null?void 0:y.map(_=>`${_.role}:${_.tab_key}`))||[]),v=[];Iw.filter(_=>_!=="admin").forEach(_=>{zf.forEach(j=>{p.has(`${_}:${j.key}`)||v.push({role:_,tab_key:j.key,permission:"hidden"})})});const x=new Set(zf.map(_=>_.key)),b=(y==null?void 0:y.filter(_=>!x.has(_.tab_key)))||[];if(b.length>0){const _=[...new Set(b.map(j=>j.tab_key))];for(const j of _)await he.from("tab_permissions").delete().eq("tab_key",j)}if(v.length>0){const{error:_}=await he.from("tab_permissions").insert(v);if(_)throw _}await f(),Lr({title:"Synchronisation termine",description:`${v.length} permission(s) ajoute(s), ${b.length} obsolte(s) supprime(s)`})}catch{Lr({title:"Erreur de synchronisation",variant:"destructive"})}finally{c(!1)}},m=async(y,g,p)=>{d(`${y}:${g}`);try{await he.from("tab_permissions").upsert({role:y,tab_key:g,permission:p},{onConflict:"role,tab_key"}),a(v=>({...v,[y]:{...v[y],[g]:p}})),Lr({title:"Permission mise  jour"})}catch{Lr({title:"Erreur",variant:"destructive"})}finally{d(null)}};return t||i?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx(Ba,{className:"h-8 w-8 animate-spin text-primary"})}):e?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(lD,{className:"h-8 w-8 text-primary"}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Administration"}),s.jsx("p",{className:"text-muted-foreground",children:"Gestion des utilisateurs et des permissions"})]})]}),s.jsxs(Ya,{defaultValue:"users",className:"space-y-6",children:[s.jsxs(Na,{className:"grid w-full max-w-md grid-cols-2",children:[s.jsxs(Ct,{value:"users",className:"flex items-center gap-2",children:[s.jsx(xi,{className:"h-4 w-4"}),"Utilisateurs"]}),s.jsxs(Ct,{value:"permissions",className:"flex items-center gap-2",children:[s.jsx(oD,{className:"h-4 w-4"}),"Permissions"]})]}),s.jsx(Mt,{value:"users",children:s.jsx($Ee,{})}),s.jsx(Mt,{value:"permissions",className:"space-y-6",children:s.jsxs(St,{children:[s.jsx(er,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(tr,{children:"Matrice des Permissions"}),s.jsx(_s,{children:"HIDDEN = invisible  READ = lecture seule  WRITE = modification"})]}),s.jsxs(ne,{variant:"outline",size:"sm",onClick:h,disabled:l,children:[s.jsx(sD,{className:`h-4 w-4 mr-2 ${l?"animate-spin":""}`}),"Synchroniser avec la base"]})]})}),s.jsx(Rt,{children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Kt,{children:[s.jsx(Gt,{children:s.jsxs(_e,{children:[s.jsx(ce,{className:"w-32",children:"Rle"}),zf.map(y=>s.jsx(ce,{className:"text-center min-w-[140px]",children:y.label},y.key))]})}),s.jsx(Yt,{children:Iw.map(y=>s.jsxs(_e,{children:[s.jsx(W,{children:s.jsx(Pe,{variant:y==="admin"?"default":"secondary",children:DEe[y]})}),zf.map(g=>{var x;const p=((x=n[y])==null?void 0:x[g.key])||"hidden",v=`${y}:${g.key}`;return s.jsx(W,{className:"text-center p-2",children:y==="admin"?s.jsxs(Pe,{className:Dw.write.color,children:[s.jsx(mv,{className:"h-3 w-3 mr-1"}),Dw.write.label]}):s.jsxs(lt,{value:p,onValueChange:b=>m(y,g.key,b),disabled:u===v,children:[s.jsx(st,{className:`w-28 ${p==="write"?"bg-green-50 border-green-300 text-green-800":p==="read"?"bg-yellow-50 border-yellow-300 text-yellow-800":"bg-red-50 border-red-300 text-red-800"}`,children:s.jsx(ct,{})}),s.jsx(ot,{children:IEe.map(b=>{const{label:_,icon:j}=Dw[b];return s.jsx(De,{value:b,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(j,{className:"h-3 w-3"}),_]})},b)})})]})},g.key)})]},y))})]})})})]})})]})]}):null}const Lw=[50,100,200,500,1e3,2e3,5e3,1e4];function BEe(e){return{id:e.id,code:e.code,name:e.name,category:e.category||"Mcanique",revision:e.revision||"A",supplier:e.supplier||"",currency:e.currency||"EUR",prices:{50:Number(e.price_vol_50)||0,100:Number(e.price_vol_100)||0,200:Number(e.price_vol_200)||0,500:Number(e.price_vol_500)||0,1e3:Number(e.price_vol_1000)||0,2e3:Number(e.price_vol_2000)||0,5e3:Number(e.price_vol_5000)||0,1e4:Number(e.price_vol_10000)||0},comments:e.comments||"",created_at:e.created_at,updated_at:e.updated_at}}function fk(){const{user:e}=Xn(),[t,r]=w.useState([]),[n,a]=w.useState([]),[i,o]=w.useState([]),[l,c]=w.useState([]),[u,d]=w.useState([]),[f,h]=w.useState([]),[m,y]=w.useState(!0),[g,p]=w.useState(!1),v=w.useCallback(async()=>{if(e){g||y(!0);try{const[q,G,H,fe,L,Y]=await Promise.all([he.from("costflow_references").select("*").order("code"),he.from("costflow_products").select("*").order("name"),he.from("costflow_bom").select("*"),he.from("costflow_reference_files").select("*").order("uploaded_at",{ascending:!1}),he.from("costflow_suppliers").select("*").order("name"),he.from("costflow_product_categories").select("*").order("name")]);q.data&&r(q.data.map(BEe)),G.data&&a(G.data.map(V=>({id:V.id,name:V.name,family:V.family||"Standard",main_supplier:V.main_supplier||"",coefficient:Number(V.coefficient)||1.3,price_ttc:Number(V.price_ttc)||0,default_volume:V.default_volume||500,comments:V.comments||"",category_id:V.category_id||null,created_at:V.created_at,updated_at:V.updated_at}))),H.data&&o(H.data.map(V=>({id:V.id,product_id:V.product_id,reference_id:V.reference_id,quantity:Number(V.quantity)||1}))),fe.data&&c(fe.data.map(V=>({id:V.id,reference_id:V.reference_id,file_name:V.file_name,file_path:V.file_path,file_size:V.file_size||0,version:V.version||1,uploaded_at:V.uploaded_at}))),L.data&&d(L.data.map(V=>({id:V.id,name:V.name,contact_name:V.contact_name||"",email:V.email||"",phone:V.phone||"",country:V.country||"France",comments:V.comments||"",created_at:V.created_at,updated_at:V.updated_at}))),Y.data&&h(Y.data.map(V=>({id:V.id,name:V.name,description:V.description||"",color:V.color||"#6366f1",created_at:V.created_at})))}catch(q){console.error("CostFlow fetch error:",q)}finally{y(!1),p(!0)}}},[e,g]);w.useEffect(()=>{v()},[v]);const x=async q=>{if(!e)return;const G=q.prices||{},{error:H}=await he.from("costflow_references").insert({user_id:e.id,code:q.code,name:q.name,category:q.category||"Mcanique",revision:q.revision||"A",supplier:q.supplier||"",currency:q.currency||"EUR",comments:q.comments||"",price_vol_50:G[50]||0,price_vol_100:G[100]||0,price_vol_200:G[200]||0,price_vol_500:G[500]||0,price_vol_1000:G[1e3]||0,price_vol_2000:G[2e3]||0,price_vol_5000:G[5e3]||0,price_vol_10000:G[1e4]||0});H?(Ee.error("Erreur cration rfrence"),console.error(H)):(Ee.success("Rfrence cre"),v())},b=async(q,G)=>{if(!e)return;const H={};G.code!==void 0&&(H.code=G.code),G.name!==void 0&&(H.name=G.name),G.category!==void 0&&(H.category=G.category),G.revision!==void 0&&(H.revision=G.revision),G.supplier!==void 0&&(H.supplier=G.supplier),G.currency!==void 0&&(H.currency=G.currency),G.comments!==void 0&&(H.comments=G.comments),G.prices&&(H.price_vol_50=G.prices[50]??0,H.price_vol_100=G.prices[100]??0,H.price_vol_200=G.prices[200]??0,H.price_vol_500=G.prices[500]??0,H.price_vol_1000=G.prices[1e3]??0,H.price_vol_2000=G.prices[2e3]??0,H.price_vol_5000=G.prices[5e3]??0,H.price_vol_10000=G.prices[1e4]??0);const{error:fe}=await he.from("costflow_references").update(H).eq("id",q);fe?(Ee.error("Erreur mise  jour"),console.error(fe)):(Ee.success("Rfrence mise  jour"),v())},_=async q=>{const{error:G}=await he.from("costflow_references").delete().eq("id",q);G?(Ee.error("Erreur suppression"),console.error(G)):(Ee.success("Rfrence supprime"),v())},j=async(q,G="skip")=>{if(!e||q.length===0)return{imported:0,skipped:0,updated:0,errors:[]};const H={imported:0,skipped:0,updated:0,errors:[]},fe=t.map(V=>V.code),L=q.filter(V=>!fe.includes(V.code||"")),Y=q.filter(V=>fe.includes(V.code||""));if(L.length>0){const V=L.map(te=>{const be=te.prices||{};return{user_id:e.id,code:te.code,name:te.name||te.code,category:te.category||"Mcanique",revision:te.revision||"A",supplier:te.supplier||"",currency:te.currency||"EUR",comments:te.comments||"",price_vol_50:be[50]||0,price_vol_100:be[100]||0,price_vol_200:be[200]||0,price_vol_500:be[500]||0,price_vol_1000:be[1e3]||0,price_vol_2000:be[2e3]||0,price_vol_5000:be[5e3]||0,price_vol_10000:be[1e4]||0}}),{error:Q}=await he.from("costflow_references").insert(V);Q?H.errors.push(`Erreur insertion : ${Q.message}`):H.imported=L.length}if(Y.length>0)if(G==="skip")H.skipped=Y.length;else for(const V of Y){const Q=t.find(Re=>Re.code===V.code);if(!Q)continue;const te=V.prices||{},{error:be}=await he.from("costflow_references").update({name:V.name||V.code,supplier:V.supplier||"",currency:V.currency||"EUR",comments:V.comments||"",price_vol_50:te[50]||0,price_vol_100:te[100]||0,price_vol_200:te[200]||0,price_vol_500:te[500]||0,price_vol_1000:te[1e3]||0,price_vol_2000:te[2e3]||0,price_vol_5000:te[5e3]||0,price_vol_10000:te[1e4]||0}).eq("id",Q.id);be?H.errors.push(`Erreur mise  jour ${V.code}`):H.updated++}return v(),H},S=async q=>{if(!e)return;const{error:G}=await he.from("costflow_products").insert({user_id:e.id,name:q.name,family:q.family||"Standard",main_supplier:q.main_supplier||"",coefficient:q.coefficient||1.3,price_ttc:q.price_ttc||0,default_volume:q.default_volume||500,comments:q.comments||""});G?(Ee.error("Erreur cration produit"),console.error(G)):(Ee.success("Produit cr"),v())},C=async(q,G)=>{if(!e)return;const{error:H}=await he.from("costflow_products").update(G).eq("id",q);H?(Ee.error("Erreur mise  jour"),console.error(H)):(Ee.success("Produit mis  jour"),v())},k=async q=>{const{error:G}=await he.from("costflow_products").delete().eq("id",q);G?(Ee.error("Erreur suppression"),console.error(G)):(Ee.success("Produit supprim"),v())},N=async(q,G,H)=>{if(!e)return;const{error:fe}=await he.from("costflow_bom").insert({user_id:e.id,product_id:q,reference_id:G,quantity:H});fe?(Ee.error("Erreur ajout nomenclature"),console.error(fe)):v()},A=async(q,G)=>{const{error:H}=await he.from("costflow_bom").update({quantity:G}).eq("id",q);H?(Ee.error("Erreur mise  jour"),console.error(H)):v()},O=async q=>{const{error:G}=await he.from("costflow_bom").delete().eq("id",q);G?(Ee.error("Erreur suppression"),console.error(G)):v()},E=async(q,G)=>{if(!e)return;const H=`${e.id}/${q}/${Date.now()}_${G.name}`,{error:fe}=await he.storage.from("technical-plans").upload(H,G);if(fe){Ee.error("Erreur upload fichier"),console.error(fe);return}const L=l.filter(Q=>Q.reference_id===q),Y=L.length>0?Math.max(...L.map(Q=>Q.version)):0,{error:V}=await he.from("costflow_reference_files").insert({user_id:e.id,reference_id:q,file_name:G.name,file_path:H,file_size:G.size,version:Y+1});V?(Ee.error("Erreur enregistrement fichier"),console.error(V)):(Ee.success("Fichier upload"),v())},R=async(q,G)=>{await he.storage.from("technical-plans").remove([G]);const{error:H}=await he.from("costflow_reference_files").delete().eq("id",q);H?(Ee.error("Erreur suppression fichier"),console.error(H)):v()},P=q=>{const{data:G}=he.storage.from("technical-plans").getPublicUrl(q);return G.publicUrl},T=async q=>{const{data:G,error:H}=await he.storage.from("technical-plans").createSignedUrl(q,3600);return H?(Ee.error("Erreur accs fichier"),null):G.signedUrl},I=(q,G)=>{const H=i.filter(V=>V.product_id===q),fe=n.find(V=>V.id===q);if(!fe)return 0;const L=Lw.reduce((V,Q)=>Math.abs(Q-G)<Math.abs(V-G)?Q:V);let Y=0;for(const V of H){const Q=t.find(te=>te.id===V.reference_id);Q&&(Y+=V.quantity*(Q.prices[L]||0))}return Y*fe.coefficient};return{references:t,products:n,bom:i,referenceFiles:l,suppliers:u,productCategories:f,loading:m,createReference:x,updateReference:b,deleteReference:_,bulkCreateReferences:j,createProduct:S,updateProduct:C,deleteProduct:k,createProductWithBom:async(q,G)=>{if(!e)return;const{data:H,error:fe}=await he.from("costflow_products").insert({user_id:e.id,name:q.name,family:q.family||"Standard",main_supplier:q.main_supplier||"",coefficient:q.coefficient||1.3,price_ttc:q.price_ttc||0,default_volume:q.default_volume||500,comments:q.comments||""}).select("id").single();if(fe||!H){Ee.error("Erreur cration produit"),console.error(fe);return}const L=H.id;if(G.length>0){const Y=G.map(Q=>({user_id:e.id,product_id:L,reference_id:Q.referenceId,quantity:Q.quantity})),{error:V}=await he.from("costflow_bom").insert(Y);V&&(Ee.error("Erreur ajout nomenclature"),console.error(V))}Ee.success(`Produit "${q.name}" cr avec ${G.length} rfrence(s)`),v()},addBomEntry:N,updateBomEntry:A,removeBomEntry:O,uploadFile:E,deleteFile:R,getFileUrl:P,getSignedUrl:T,createSupplier:async q=>{if(!e)return;const{error:G}=await he.from("costflow_suppliers").insert({user_id:e.id,name:q.name,contact_name:q.contact_name||"",email:q.email||"",phone:q.phone||"",country:q.country||"France",comments:q.comments||""});G?(Ee.error("Erreur cration fournisseur"),console.error(G)):(Ee.success("Fournisseur cr"),v())},updateSupplier:async(q,G)=>{if(!e)return;const{error:H}=await he.from("costflow_suppliers").update(G).eq("id",q);H?(Ee.error("Erreur mise  jour fournisseur"),console.error(H)):(Ee.success("Fournisseur mis  jour"),v())},deleteSupplier:async q=>{const{error:G}=await he.from("costflow_suppliers").delete().eq("id",q);G?(Ee.error("Erreur suppression fournisseur"),console.error(G)):(Ee.success("Fournisseur supprim"),v())},createProductCategory:async q=>{if(!e)return;const{error:G}=await he.from("costflow_product_categories").insert({user_id:e.id,name:q.name,description:q.description||"",color:q.color||"#6366f1"});G?(Ee.error("Erreur cration catgorie"),console.error(G)):(Ee.success("Catgorie cre"),v())},updateProductCategory:async(q,G)=>{if(!e)return;const{error:H}=await he.from("costflow_product_categories").update(G).eq("id",q);H?(Ee.error("Erreur mise  jour catgorie"),console.error(H)):(Ee.success("Catgorie mise  jour"),v())},deleteProductCategory:async q=>{await he.from("costflow_products").update({category_id:null}).eq("category_id",q);const{error:G}=await he.from("costflow_product_categories").delete().eq("id",q);G?(Ee.error("Erreur suppression catgorie"),console.error(G)):(Ee.success("Catgorie supprime"),v())},calculateProductCost:I,calculateProductCosts:q=>{const G={};for(const H of Lw)G[H]=I(q,H);return G},VOLUME_TIERS:Lw,refresh:v}}const FEe=Dd("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),wo=w.forwardRef(({className:e,variant:t,...r},n)=>s.jsx("div",{ref:n,role:"alert",className:ue(FEe({variant:t}),e),...r}));wo.displayName="Alert";const zEe=w.forwardRef(({className:e,...t},r)=>s.jsx("h5",{ref:r,className:ue("mb-1 font-medium leading-none tracking-tight",e),...t}));zEe.displayName="AlertTitle";const jo=w.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:ue("text-sm [&_p]:leading-relaxed",e),...t}));jo.displayName="AlertDescription";const Bw=["EUR","USD","GBP","CHF","CNY","JPY"],vg=[50,100,200,500,1e3,2e3,5e3,1e4];function Lc(){return{code:"",name:"",supplier:"",currency:"EUR",prices:{},unit:"pice",comments:"",valid:!1,isDuplicate:!1}}function Uf(e){return e.code.trim().length>0}function UEe({open:e,onOpenChange:t,onImport:r,existingCodes:n}){const[a,i]=w.useState([Lc()]),[o,l]=w.useState(!1),[c,u]=w.useState("skip"),[d,f]=w.useState(null),h=w.useRef(null),m=w.useRef(null),y=a.filter(k=>Uf(k)).length,g=a.filter(k=>k.code&&n.includes(k.code)).length,p=(k,N,A)=>{i(O=>{const E=[...O];return E[k]={...E[k],[N]:A},E[k].valid=Uf(E[k]),E[k].isDuplicate=E[k].code?n.includes(E[k].code):!1,E})},v=(k,N,A)=>{i(O=>{const E=[...O];return E[k]={...E[k],prices:{...E[k].prices,[N]:A}},E})},x=k=>{i(N=>N.length===1?[Lc()]:N.filter((A,O)=>O!==k))},b=()=>i(k=>[...k,Lc()]),_=w.useCallback(k=>{const N=k.clipboardData.getData("text/plain");if(!N.includes("	")&&!N.includes(`
`))return;k.preventDefault();const A=N.split(`
`).map(T=>T.trim()).filter(T=>T.length>0),O=A[0].toLowerCase(),P=(O.includes("code")||O.includes("nom")||O.includes("name")?A.slice(1):A).map(T=>{const I=T.split("	"),M=Lc();return M.code=(I[0]||"").trim(),M.name=(I[1]||"").trim(),M.supplier=(I[2]||"").trim(),M.currency=Bw.includes((I[3]||"").trim().toUpperCase())?(I[3]||"EUR").trim().toUpperCase():"EUR",vg.forEach((D,B)=>{const z=parseFloat((I[4+B]||"").replace(",","."));isNaN(z)||(M.prices[D]=z)}),M.unit=(I[12]||"pice").trim(),M.comments=(I[13]||"").trim(),M.valid=Uf(M),M.isDuplicate=M.code?n.includes(M.code):!1,M}).filter(T=>T.code||T.name);P.length>0&&i(T=>T.length===1&&!T[0].code&&!T[0].name?P:[...T,...P])},[]),j=k=>{var O;const N=(O=k.target.files)==null?void 0:O[0];if(!N)return;const A=new FileReader;A.onload=E=>{var z;const R=(z=E.target)==null?void 0:z.result;if(!R)return;const P=R.includes("	")?"	":R.includes(";")?";":",",T=R.split(`
`).map(Z=>Z.trim()).filter(Z=>Z.length>0),I=T[0].toLowerCase(),B=(I.includes("code")||I.includes("nom")?T.slice(1):T).map(Z=>{const J=Z.split(P),se=Lc();return se.code=(J[0]||"").trim(),se.name=(J[1]||"").trim(),se.supplier=(J[2]||"").trim(),se.currency=Bw.includes((J[3]||"").trim().toUpperCase())?(J[3]||"EUR").trim().toUpperCase():"EUR",vg.forEach((U,q)=>{const G=parseFloat((J[4+q]||"").replace(",","."));isNaN(G)||(se.prices[U]=G)}),se.unit=(J[12]||"pice").trim(),se.comments=(J[13]||"").trim(),se.valid=Uf(se),se.isDuplicate=se.code?n.includes(se.code):!1,se}).filter(Z=>Z.code||Z.name);B.length>0&&i(B)},A.readAsText(N),m.current&&(m.current.value="")},S=async()=>{const k=a.filter(O=>Uf(O));if(k.length===0)return;l(!0);const N=k.map(O=>({code:O.code,name:O.name||O.code,supplier:O.supplier||"",currency:O.currency||"EUR",prices:O.prices||{},comments:O.comments||"",category:"Mcanique",revision:"A"})),A=await r(N,c);f(A),l(!1)},C=()=>{i([Lc()]),f(null),t(!1)};return d?s.jsx(mr,{open:e,onOpenChange:C,children:s.jsxs(ar,{className:"max-w-md",children:[s.jsx(ir,{children:s.jsxs(sr,{className:"flex items-center gap-2",children:[s.jsx(QI,{className:"h-5 w-5 text-green-500"}),"Import termin"]})}),s.jsxs("div",{className:"space-y-3 py-4",children:[d.imported>0&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Pe,{variant:"default",className:"bg-green-600",children:d.imported}),s.jsx("span",{className:"text-sm",children:"rfrence(s) importe(s)"})]}),d.updated>0&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Pe,{variant:"secondary",children:d.updated}),s.jsx("span",{className:"text-sm",children:"rfrence(s) mise(s)  jour"})]}),d.skipped>0&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Pe,{variant:"outline",children:d.skipped}),s.jsx("span",{className:"text-sm",children:"doublon(s) ignor(s)"})]}),d.errors.length>0&&s.jsx(wo,{variant:"destructive",children:s.jsx(jo,{children:d.errors.map((k,N)=>s.jsx("div",{className:"text-xs",children:k},N))})})]}),s.jsx(ne,{onClick:C,className:"w-full",children:"Fermer"})]})}):s.jsx(mr,{open:e,onOpenChange:C,children:s.jsxs(ar,{className:"max-w-[95vw] max-h-[90vh] overflow-hidden flex flex-col",children:[s.jsxs(ir,{children:[s.jsx(sr,{children:"Importer des rfrences"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Choisissez votre mthode d'import"})]}),s.jsxs(Ya,{defaultValue:"paste",className:"flex-1 flex flex-col overflow-hidden",children:[s.jsxs(Na,{className:"w-full",children:[s.jsxs(Ct,{value:"paste",className:"flex-1",children:[s.jsx(JI,{className:"h-4 w-4 mr-1"})," Coller depuis Excel"]}),s.jsxs(Ct,{value:"file",className:"flex-1",children:[s.jsx(qi,{className:"h-4 w-4 mr-1"})," Importer un fichier"]})]}),s.jsxs(Mt,{value:"paste",className:"flex-1 flex flex-col overflow-hidden space-y-3 mt-3",children:[s.jsxs(wo,{children:[s.jsx(Wh,{className:"h-4 w-4"}),s.jsxs(jo,{children:[s.jsx("strong",{children:"Comment coller depuis Excel :"})," Slectionnez vos lignes, copiez (Ctrl+C), cliquez dans le tableau et collez (Ctrl+V). Seul le ",s.jsx("strong",{children:"code"})," est obligatoire, les cases vides auront la valeur 0 par dfaut."]})]}),g>0&&s.jsxs(wo,{children:[s.jsx(Hu,{className:"h-4 w-4"}),s.jsxs(jo,{className:"flex items-center justify-between",children:[s.jsxs("span",{children:[g," code(s) dj existant(s)"]}),s.jsxs("div",{className:"flex gap-2 ml-4",children:[s.jsx(ne,{size:"sm",variant:c==="skip"?"default":"outline",onClick:()=>u("skip"),children:"Ignorer"}),s.jsx(ne,{size:"sm",variant:c==="overwrite"?"default":"outline",onClick:()=>u("overwrite"),children:"craser"})]})]})]}),s.jsx("div",{ref:h,className:"flex-1 overflow-auto border rounded",onPaste:_,children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"bg-muted sticky top-0",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-2 py-2 text-left text-xs font-medium w-24",children:"Code *"}),s.jsx("th",{className:"px-2 py-2 text-left text-xs font-medium w-28",children:"Nom"}),s.jsx("th",{className:"px-2 py-2 text-left text-xs font-medium w-28",children:"Fournisseur"}),s.jsx("th",{className:"px-2 py-2 text-left text-xs font-medium w-20",children:"Devise"}),vg.map(k=>s.jsx("th",{className:"px-1 py-2 text-center text-xs font-medium w-16",children:k},k)),s.jsx("th",{className:"px-2 py-2 text-left text-xs font-medium w-20",children:"Unit"}),s.jsx("th",{className:"px-2 py-2 text-left text-xs font-medium w-28",children:"Commentaire"}),s.jsx("th",{className:"px-1 py-2 w-8"})]})}),s.jsx("tbody",{children:a.map((k,N)=>s.jsxs("tr",{className:`border-t ${k.isDuplicate?"bg-yellow-50 dark:bg-yellow-900/10":""}`,children:[s.jsx("td",{className:"px-1 py-1",children:s.jsxs("div",{className:"relative",children:[s.jsx(xe,{className:`h-8 text-xs ${k.isDuplicate?"border-yellow-400":""}`,placeholder:"NR...",value:k.code,onChange:A=>p(N,"code",A.target.value)}),k.isDuplicate&&s.jsx(Hu,{className:"absolute right-1 top-1.5 h-3 w-3 text-yellow-500"})]})}),s.jsx("td",{className:"px-1 py-1",children:s.jsx(xe,{className:"h-8 text-xs",placeholder:"Nom...",value:k.name,onChange:A=>p(N,"name",A.target.value)})}),s.jsx("td",{className:"px-1 py-1",children:s.jsx(xe,{className:"h-8 text-xs",value:k.supplier,onChange:A=>p(N,"supplier",A.target.value)})}),s.jsx("td",{className:"px-1 py-1",children:s.jsxs(lt,{value:k.currency,onValueChange:A=>p(N,"currency",A),children:[s.jsx(st,{className:"h-8 text-xs",children:s.jsx(ct,{})}),s.jsx(ot,{children:Bw.map(A=>s.jsx(De,{value:A,children:A},A))})]})}),vg.map(A=>s.jsx("td",{className:"px-1 py-1",children:s.jsx(xe,{type:"number",step:"0.01",className:"h-8 text-xs text-right font-mono-numbers",value:k.prices[A]??"",onChange:O=>v(N,A,parseFloat(O.target.value)||0),placeholder:"0"})},A)),s.jsx("td",{className:"px-1 py-1",children:s.jsx(xe,{className:"h-8 text-xs",value:k.unit,onChange:A=>p(N,"unit",A.target.value)})}),s.jsx("td",{className:"px-1 py-1",children:s.jsx(xe,{className:"h-8 text-xs",value:k.comments,onChange:A=>p(N,"comments",A.target.value)})}),s.jsx("td",{className:"px-1 py-1 text-center",children:s.jsx("button",{onClick:()=>x(N),className:"text-destructive hover:text-destructive/80",children:s.jsx(_i,{className:"h-4 w-4"})})})]},N))})]})}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(ne,{variant:"outline",size:"sm",onClick:b,children:"+ Ajouter une ligne"}),s.jsxs("div",{className:"flex items-center gap-3",children:[g>0&&s.jsxs("span",{className:"text-xs text-yellow-600",children:[g," doublon(s)"]}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:[y," ligne(s) valide(s)"]})]})]})]}),s.jsxs(Mt,{value:"file",className:"space-y-4 mt-3",children:[s.jsxs(wo,{children:[s.jsx(Wh,{className:"h-4 w-4"}),s.jsxs(jo,{children:["Formats supports : ",s.jsx("strong",{children:".csv, .tsv"}),s.jsx("br",{}),"Colonnes attendues : Code, Nom, Fournisseur, Devise, 50, 100, 200, 500, 1000, 2000, 5000, 10000, Unit, Commentaire"]})]}),s.jsx("div",{className:"flex justify-center py-8 border-2 border-dashed rounded-lg",children:s.jsxs("div",{className:"text-center",children:[s.jsx(qi,{className:"h-8 w-8 mx-auto text-muted-foreground mb-2"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Glissez un fichier ou cliquez pour slectionner"}),s.jsx("input",{ref:m,type:"file",className:"hidden",accept:".csv,.tsv,.txt",onChange:j}),s.jsx(ne,{variant:"outline",onClick:()=>{var k;return(k=m.current)==null?void 0:k.click()},children:"Choisir un fichier"})]})}),a.length>0&&a[0].code&&s.jsxs("p",{className:"text-sm text-muted-foreground",children:[y," ligne(s) charge(s) et prte(s)  importer"]})]})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[s.jsxs(ne,{variant:"outline",onClick:C,children:[s.jsx(_i,{className:"h-4 w-4 mr-1"})," Annuler"]}),s.jsxs(ne,{onClick:S,disabled:y===0||o,children:[s.jsx(qi,{className:"h-4 w-4 mr-1"})," Importer ",y," rfrence(s)"]})]})]})})}const VEe=["Mcanique","lectronique","Plastique","Composite","Caoutchouc","Visserie","Cblage","Autre"],WEe=["EUR","USD","GBP","CHF","CNY","JPY"],HEe="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),qEe=[50,100,200,500,1e3,2e3,5e3,1e4];function KEe({references:e,suppliers:t,onCreateReference:r,onUpdateReference:n,onDeleteReference:a,onBulkImport:i,onSelectReference:o}){const[l,c]=w.useState(""),[u,d]=w.useState(!1),[f,h]=w.useState(!1),[m,y]=w.useState(null),[g,p]=w.useState({code:"",name:"",category:"Mcanique",revision:"A",supplier:"",currency:"EUR",comments:"",prices:{}}),v=e.filter(j=>j.code.toLowerCase().includes(l.toLowerCase())||j.name.toLowerCase().includes(l.toLowerCase())||j.supplier.toLowerCase().includes(l.toLowerCase())),x=()=>{y(null),p({code:"",name:"",category:"Mcanique",revision:"A",supplier:"",currency:"EUR",comments:"",prices:{}}),h(!0)},b=j=>{y(j),p({code:j.code,name:j.name,category:j.category,revision:j.revision,supplier:j.supplier,currency:j.currency,comments:j.comments,prices:{...j.prices}}),h(!0)},_=async()=>{if(!g.code||!g.name)return;const j={...g,supplier:g.supplier==="none"?"":g.supplier};m?await n(m.id,j):await r(j),h(!1)};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between gap-4",children:[s.jsxs("div",{className:"relative flex-1 max-w-sm",children:[s.jsx(xx,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(xe,{placeholder:"Rechercher code, nom, fournisseur...",value:l,onChange:j=>c(j.target.value),className:"pl-9"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(ne,{variant:"outline",onClick:()=>d(!0),children:[s.jsx(qi,{className:"h-4 w-4 mr-1"})," Importer"]}),s.jsxs(mr,{open:f,onOpenChange:h,children:[s.jsx(Cd,{asChild:!0,children:s.jsxs(ne,{onClick:x,children:[s.jsx(qt,{className:"h-4 w-4 mr-1"})," Nouvelle rfrence"]})}),s.jsxs(ar,{className:"max-w-2xl max-h-[85vh] overflow-y-auto",children:[s.jsx(ir,{children:s.jsx(sr,{children:m?"Modifier la rfrence":"Nouvelle rfrence"})}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Ne,{children:"Code *"}),s.jsx(xe,{value:g.code,onChange:j=>p({...g,code:j.target.value}),placeholder:"REF-001"})]}),s.jsxs("div",{children:[s.jsx(Ne,{children:"Nom *"}),s.jsx(xe,{value:g.name,onChange:j=>p({...g,name:j.target.value}),placeholder:"Nom de la pice"})]}),s.jsxs("div",{children:[s.jsx(Ne,{children:"Catgorie"}),s.jsxs(lt,{value:g.category,onValueChange:j=>p({...g,category:j}),children:[s.jsx(st,{children:s.jsx(ct,{})}),s.jsx(ot,{children:VEe.map(j=>s.jsx(De,{value:j,children:j},j))})]})]}),s.jsxs("div",{children:[s.jsx(Ne,{children:"Rvision"}),s.jsxs(lt,{value:g.revision,onValueChange:j=>p({...g,revision:j}),children:[s.jsx(st,{children:s.jsx(ct,{})}),s.jsx(ot,{children:HEe.map(j=>s.jsx(De,{value:j,children:j},j))})]})]}),s.jsxs("div",{children:[s.jsx(Ne,{children:"Fournisseur"}),s.jsxs(lt,{value:g.supplier,onValueChange:j=>p({...g,supplier:j}),children:[s.jsx(st,{children:s.jsx(ct,{placeholder:"Slectionner..."})}),s.jsxs(ot,{children:[s.jsx(De,{value:"none",children:"Aucun"}),t.map(j=>s.jsx(De,{value:j.name,children:j.name},j.id))]})]})]}),s.jsxs("div",{children:[s.jsx(Ne,{children:"Devise"}),s.jsxs(lt,{value:g.currency,onValueChange:j=>p({...g,currency:j}),children:[s.jsx(st,{children:s.jsx(ct,{})}),s.jsx(ot,{children:WEe.map(j=>s.jsx(De,{value:j,children:j},j))})]})]})]}),s.jsxs("div",{className:"mt-4",children:[s.jsxs(Ne,{className:"text-sm font-semibold",children:["Grille de prix par volume (",g.currency,")"]}),s.jsx("div",{className:"grid grid-cols-4 gap-2 mt-2",children:qEe.map(j=>s.jsxs("div",{children:[s.jsxs(Ne,{className:"text-xs text-muted-foreground",children:[j," units"]}),s.jsx(xe,{type:"number",step:"0.01",className:"font-mono-numbers text-right",value:g.prices[j]||"",onChange:S=>p({...g,prices:{...g.prices,[j]:parseFloat(S.target.value)||0}}),placeholder:"0.00"})]},j))})]}),s.jsxs("div",{className:"mt-4",children:[s.jsx(Ne,{children:"Commentaires"}),s.jsx(qa,{value:g.comments,onChange:j=>p({...g,comments:j.target.value}),rows:2})]}),s.jsx("div",{className:"flex justify-end mt-4",children:s.jsx(ne,{onClick:_,children:m?"Mettre  jour":"Crer"})})]})]})]})]}),s.jsx("div",{className:"border rounded overflow-auto",children:s.jsxs(Kt,{children:[s.jsx(Gt,{children:s.jsxs(_e,{children:[s.jsx(ce,{children:"Code"}),s.jsx(ce,{children:"Nom"}),s.jsx(ce,{children:"Catgorie"}),s.jsx(ce,{children:"Rv."}),s.jsx(ce,{children:"Fournisseur"}),s.jsx(ce,{children:"Devise"}),s.jsx(ce,{className:"text-right",children:"Prix @500"}),s.jsx(ce,{className:"text-right",children:"Prix @1000"}),s.jsx(ce,{})]})}),s.jsxs(Yt,{children:[v.length===0&&s.jsx(_e,{children:s.jsx(W,{colSpan:9,className:"text-center text-muted-foreground py-8",children:'Aucune rfrence. Cliquez sur "Nouvelle rfrence" pour commencer.'})}),v.map(j=>{var S,C;return s.jsxs(_e,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>o(j),children:[s.jsx(W,{className:"font-mono-numbers font-medium",children:j.code}),s.jsx(W,{children:j.name}),s.jsx(W,{children:s.jsx(Pe,{variant:"secondary",children:j.category})}),s.jsx(W,{children:j.revision}),s.jsx(W,{children:j.supplier||"-"}),s.jsx(W,{children:j.currency}),s.jsx(W,{className:"text-right font-mono-numbers",children:((S=j.prices[500])==null?void 0:S.toFixed(2))||"-"}),s.jsx(W,{className:"text-right font-mono-numbers",children:((C=j.prices[1e3])==null?void 0:C.toFixed(2))||"-"}),s.jsx(W,{children:s.jsxs("div",{className:"flex gap-1",children:[s.jsx(ne,{variant:"ghost",size:"icon",onClick:k=>{k.stopPropagation(),b(j)},children:s.jsx(Ld,{className:"h-3 w-3"})}),s.jsx(ne,{variant:"ghost",size:"icon",onClick:k=>{k.stopPropagation(),a(j.id)},children:s.jsx(nr,{className:"h-3 w-3 text-destructive"})})]})})]},j.id)})]})]})}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[v.length," rfrence(s)  Cliquez sur une ligne pour voir les dtails et plans techniques"]}),s.jsx(UEe,{open:u,onOpenChange:d,onImport:i,existingCodes:e.map(j=>j.code)})]})}const GEe=[50,100,200,500,1e3,2e3,5e3,1e4];function YEe({reference:e,files:t,onUploadFile:r,onDeleteFile:n,onGetSignedUrl:a,onBack:i}){const o=w.useRef(null),l=t.filter(f=>f.reference_id===e.id),c=async f=>{var m;const h=(m=f.target.files)==null?void 0:m[0];h&&await r(e.id,h),o.current&&(o.current.value="")},u=async f=>{const h=await a(f.file_path);h&&window.open(h,"_blank")},d=f=>f<1024?`${f} B`:f<1024*1024?`${(f/1024).toFixed(1)} KB`:`${(f/(1024*1024)).toFixed(1)} MB`;return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(ne,{variant:"ghost",size:"icon",onClick:i,children:s.jsx(GI,{className:"h-4 w-4"})}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold",children:[e.code,"  ",e.name]}),s.jsxs("div",{className:"flex gap-2 mt-1",children:[s.jsx(Pe,{variant:"secondary",children:e.category}),s.jsxs(Pe,{variant:"outline",children:["Rv. ",e.revision]}),e.supplier&&s.jsx(Pe,{variant:"outline",children:e.supplier})]})]})]}),s.jsxs("div",{className:"financial-card p-4",children:[s.jsxs("h4",{className:"section-title",children:["Grille de prix (",e.currency,")"]}),s.jsx("div",{className:"grid grid-cols-8 gap-2",children:GEe.map(f=>{var h;return s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-xs text-muted-foreground mb-1",children:[f," u."]}),s.jsx("div",{className:"font-mono-numbers font-medium",children:((h=e.prices[f])==null?void 0:h.toFixed(2))||""})]},f)})})]}),e.comments&&s.jsxs("div",{className:"financial-card p-4",children:[s.jsx("h4",{className:"section-title",children:"Commentaires"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:e.comments})]}),s.jsxs("div",{className:"financial-card p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h4",{className:"section-title mb-0",children:"Plans techniques"}),s.jsxs("div",{children:[s.jsx("input",{ref:o,type:"file",className:"hidden",onChange:c,accept:".pdf,.dwg,.dxf,.step,.stp,.iges,.igs,.png,.jpg,.jpeg"}),s.jsxs(ne,{variant:"outline",size:"sm",onClick:()=>{var f;return(f=o.current)==null?void 0:f.click()},children:[s.jsx(qi,{className:"h-3 w-3 mr-1"})," Ajouter un fichier"]})]})]}),l.length===0?s.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:'Aucun fichier. Cliquez sur "Ajouter un fichier" pour uploader un plan.'}):s.jsxs(Kt,{children:[s.jsx(Gt,{children:s.jsxs(_e,{children:[s.jsx(ce,{children:"Fichier"}),s.jsx(ce,{children:"Version"}),s.jsx(ce,{children:"Taille"}),s.jsx(ce,{children:"Date"}),s.jsx(ce,{})]})}),s.jsx(Yt,{children:l.map(f=>s.jsxs(_e,{children:[s.jsxs(W,{className:"flex items-center gap-2",children:[s.jsx(Bo,{className:"h-4 w-4 text-muted-foreground"}),f.file_name]}),s.jsx(W,{children:s.jsxs(Pe,{variant:"outline",children:["v",f.version]})}),s.jsx(W,{className:"font-mono-numbers text-muted-foreground",children:d(f.file_size)}),s.jsx(W,{className:"text-muted-foreground",children:new Date(f.uploaded_at).toLocaleDateString("fr-FR")}),s.jsx(W,{children:s.jsxs("div",{className:"flex gap-1",children:[s.jsx(ne,{variant:"ghost",size:"icon",onClick:()=>u(f),children:s.jsx(sp,{className:"h-3 w-3"})}),s.jsx(ne,{variant:"ghost",size:"icon",onClick:()=>n(f.id,f.file_path),children:s.jsx(nr,{className:"h-3 w-3 text-destructive"})})]})})]},f.id))})]})]})]})}const XEe=[50,100,200,500,1e3,2e3,5e3,1e4],ZEe=["Standard","Premium","conomique","Custom"];function yg(){return{refCode:"",quantity:1,volume:200,found:!1,referenceId:null,referenceName:""}}function QEe({open:e,onOpenChange:t,existingReferences:r,existingSuppliers:n,onImportProduct:a}){const[i,o]=w.useState(""),[l,c]=w.useState("Standard"),[u,d]=w.useState(""),[f,h]=w.useState([yg()]),[m,y]=w.useState(!1),[g,p]=w.useState(null),v=w.useRef(null),x=w.useCallback(R=>{if(!R.trim())return{found:!1,referenceId:null,referenceName:""};const P=r.find(T=>T.code.toLowerCase()===R.trim().toLowerCase());return P?{found:!0,referenceId:P.id,referenceName:P.name}:{found:!1,referenceId:null,referenceName:""}},[r]),b=(R,P,T)=>{h(I=>{const M=[...I];if(M[R]={...M[R],[P]:T},P==="refCode"){const D=x(T);M[R]={...M[R],...D}}return M})},_=R=>{h(P=>P.length===1?[yg()]:P.filter((T,I)=>I!==R))},j=()=>h(R=>[...R,yg()]),S=w.useCallback(R=>{const P=R.clipboardData.getData("text/plain");if(!P.includes("	")&&!P.includes(`
`))return;R.preventDefault();const T=P.split(`
`).map(z=>z.trim()).filter(z=>z.length>0),I=T[0].toLowerCase(),B=(I.includes("code")||I.includes("ref")||I.includes("rfrence")?T.slice(1):T).map(z=>{const Z=z.split("	"),J=(Z[0]||"").trim(),se=parseFloat((Z[1]||"1").replace(",","."))||1,U=parseInt(Z[2]||"200")||200,q=x(J);return{refCode:J,quantity:se,volume:U,...q}}).filter(z=>z.refCode.length>0);B.length>0&&h(z=>z.length===1&&!z[0].refCode?B:[...z,...B])},[x]),C=R=>{var I;const P=(I=R.target.files)==null?void 0:I[0];if(!P)return;const T=new FileReader;T.onload=M=>{var q;const D=(q=M.target)==null?void 0:q.result;if(!D)return;const B=D.includes("	")?"	":D.includes(";")?";":",",z=D.split(`
`).map(G=>G.trim()).filter(G=>G.length>0),Z=z[0].toLowerCase(),U=(Z.includes("code")||Z.includes("ref")?z.slice(1):z).map(G=>{const H=G.split(B),fe=(H[0]||"").trim(),L=parseFloat((H[1]||"1").replace(",","."))||1,Y=parseInt(H[2]||"200")||200,V=x(fe);return{refCode:fe,quantity:L,volume:Y,...V}}).filter(G=>G.refCode.length>0);U.length>0&&h(U)},T.readAsText(P),v.current&&(v.current.value="")},k=f.filter(R=>R.refCode.trim()&&R.found&&R.referenceId),N=f.filter(R=>R.refCode.trim()&&!R.found),A=k.length,O=async()=>{if(!(!i.trim()||A===0)){y(!0);try{const R=k.map(P=>({referenceId:P.referenceId,quantity:P.quantity}));await a({name:i,family:l,main_supplier:u,coefficient:1.3,price_ttc:0,default_volume:500,comments:""},R),p({success:!0,productName:i,refCount:A,errors:N.map(P=>P.refCode)})}catch{p({success:!1,productName:i,refCount:0,errors:["Erreur lors de la cration"]})}finally{y(!1)}}},E=()=>{o(""),c("Standard"),d(""),h([yg()]),p(null),t(!1)};return g?s.jsx(mr,{open:e,onOpenChange:E,children:s.jsxs(ar,{className:"max-w-md",children:[s.jsx(ir,{children:s.jsxs(sr,{className:"flex items-center gap-2",children:[g.success?s.jsx(QI,{className:"h-5 w-5 text-emerald-500"}):s.jsx(Hu,{className:"h-5 w-5 text-destructive"}),g.success?"Produit cr":"Erreur"]})}),s.jsxs("div",{className:"space-y-3 py-4",children:[g.success&&s.jsxs(s.Fragment,{children:[s.jsxs("p",{className:"text-sm",children:["Le produit ",s.jsx("strong",{children:g.productName})," a t cr avec ",s.jsx("strong",{children:g.refCount})," rfrence(s)."]}),g.errors.length>0&&s.jsxs(wo,{children:[s.jsx(Hu,{className:"h-4 w-4"}),s.jsxs(jo,{children:[s.jsxs("span",{className:"font-medium",children:[g.errors.length," rfrence(s) non trouve(s) ignore(s) :"]}),s.jsx("span",{className:"text-xs ml-1",children:g.errors.join(", ")})]})]})]}),!g.success&&s.jsx("p",{className:"text-sm text-destructive",children:g.errors[0]})]}),s.jsx(ne,{onClick:E,className:"w-full",children:"Fermer"})]})}):s.jsx(mr,{open:e,onOpenChange:E,children:s.jsxs(ar,{className:"max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[s.jsxs(ir,{children:[s.jsx(sr,{children:"Importer des produits"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Choisissez votre mthode d'import"})]}),s.jsxs(Ya,{defaultValue:"paste",className:"flex-1 flex flex-col overflow-hidden",children:[s.jsxs(Na,{className:"w-full",children:[s.jsxs(Ct,{value:"paste",className:"flex-1",children:[s.jsx(JI,{className:"h-4 w-4 mr-1"})," Coller depuis Excel"]}),s.jsxs(Ct,{value:"file",className:"flex-1",children:[s.jsx(qi,{className:"h-4 w-4 mr-1"})," Importer un fichier"]})]}),s.jsxs(Mt,{value:"paste",className:"flex-1 flex flex-col overflow-hidden space-y-3 mt-3",children:[s.jsxs(wo,{children:[s.jsx(Wh,{className:"h-4 w-4"}),s.jsxs(jo,{children:[s.jsx("strong",{children:"Comment utiliser :"}),s.jsxs("ol",{className:"list-decimal ml-4 mt-1 text-sm space-y-0.5",children:[s.jsxs("li",{children:["Saisissez le ",s.jsx("strong",{children:"nom du produit"})," et sa famille en haut"]}),s.jsx("li",{children:"Collez les codes de rfrences depuis Excel (Ctrl+V)"}),s.jsx("li",{children:"Ajustez quantit et volume d'achat pour chaque rfrence"}),s.jsxs("li",{children:["Les rfrences ",s.jsx("strong",{className:"text-destructive",children:"non trouves"})," apparaissent en rouge"]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 p-4 border rounded-lg bg-muted/30",children:[s.jsxs("div",{children:[s.jsx(Ne,{children:"Nom du produit *"}),s.jsx(xe,{value:i,onChange:R=>o(R.target.value),placeholder:"Ex: CCD-Diaphrag-105 111"})]}),s.jsxs("div",{children:[s.jsx(Ne,{children:"Famille *"}),s.jsxs(lt,{value:l,onValueChange:c,children:[s.jsx(st,{children:s.jsx(ct,{})}),s.jsx(ot,{children:ZEe.map(R=>s.jsx(De,{value:R,children:R},R))})]})]}),s.jsxs("div",{children:[s.jsx(Ne,{children:"Fournisseur"}),s.jsxs(lt,{value:u,onValueChange:d,children:[s.jsx(st,{children:s.jsx(ct,{placeholder:"Slectionner..."})}),s.jsxs(ot,{children:[s.jsx(De,{value:" ",children:"Aucun"}),n.map(R=>s.jsx(De,{value:R,children:R},R))]})]})]})]}),s.jsxs("div",{className:"flex-1 overflow-auto border rounded",onPaste:S,children:[s.jsx("p",{className:"text-sm font-medium px-3 py-2 bg-muted/50 border-b",children:"Rfrences du produit"}),s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"bg-muted sticky top-0",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium",children:"Code Rfrence"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium w-24",children:"Quantit"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium w-32",children:"Volume d'achat"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium",children:"Statut"}),s.jsx("th",{className:"px-1 py-2 w-8"})]})}),s.jsx("tbody",{children:f.map((R,P)=>s.jsxs("tr",{className:`border-t ${R.refCode&&!R.found?"bg-destructive/5":""}`,children:[s.jsxs("td",{className:"px-2 py-1",children:[s.jsx(xe,{className:`h-8 text-xs ${R.refCode&&!R.found?"border-destructive text-destructive":""}`,placeholder:"NR20200022",value:R.refCode,onChange:T=>b(P,"refCode",T.target.value)}),R.found&&s.jsx("span",{className:"text-xs text-muted-foreground ml-1",children:R.referenceName})]}),s.jsx("td",{className:"px-2 py-1",children:s.jsx(xe,{type:"number",min:1,className:"h-8 text-xs font-mono-numbers",value:R.quantity,onChange:T=>b(P,"quantity",parseInt(T.target.value)||1)})}),s.jsx("td",{className:"px-2 py-1",children:s.jsxs(lt,{value:String(R.volume),onValueChange:T=>b(P,"volume",parseInt(T)),children:[s.jsx(st,{className:"h-8 text-xs",children:s.jsx(ct,{})}),s.jsx(ot,{children:XEe.map(T=>s.jsx(De,{value:String(T),children:T},T))})]})}),s.jsx("td",{className:"px-2 py-1",children:R.refCode&&(R.found?s.jsx(Pe,{variant:"secondary",className:"text-xs",children:" Trouve"}):s.jsx(Pe,{variant:"destructive",className:"text-xs",children:"Non trouve"}))}),s.jsx("td",{className:"px-1 py-1 text-center",children:s.jsx("button",{onClick:()=>_(P),className:"text-destructive hover:text-destructive/80",children:s.jsx(_i,{className:"h-4 w-4"})})})]},P))})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(ne,{variant:"outline",size:"sm",onClick:j,children:"+ Ajouter une rfrence"}),s.jsxs("div",{className:"flex items-center gap-3",children:[N.length>0&&s.jsxs("span",{className:"text-xs text-destructive",children:[N.length," non trouve(s)"]}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:[A," rfrence(s) valide(s)"]})]})]})]}),s.jsxs(Mt,{value:"file",className:"space-y-4 mt-3",children:[s.jsxs(wo,{children:[s.jsx(Wh,{className:"h-4 w-4"}),s.jsxs(jo,{children:["Formats supports : ",s.jsx("strong",{children:".csv, .tsv"}),s.jsx("br",{}),"Colonnes attendues : Code Rfrence, Quantit, Volume d'achat"]})]}),s.jsx("div",{className:"flex justify-center py-8 border-2 border-dashed rounded-lg",children:s.jsxs("div",{className:"text-center",children:[s.jsx(qi,{className:"h-8 w-8 mx-auto text-muted-foreground mb-2"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Glissez un fichier ou cliquez pour slectionner"}),s.jsx("input",{ref:v,type:"file",className:"hidden",accept:".csv,.tsv,.txt",onChange:C}),s.jsx(ne,{variant:"outline",onClick:()=>{var R;return(R=v.current)==null?void 0:R.click()},children:"Choisir un fichier"})]})})]})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[s.jsxs(ne,{variant:"outline",onClick:E,children:[s.jsx(_i,{className:"h-4 w-4 mr-1"})," Annuler"]}),s.jsxs(ne,{onClick:O,disabled:!i.trim()||A===0||m,children:[s.jsx(qi,{className:"h-4 w-4 mr-1"})," Crer le produit (",A," rf.)"]})]})]})})}function JEe({products:e,references:t,categories:r,onCreateProduct:n,onUpdateProduct:a,onDeleteProduct:i,onSelectProduct:o,onImportProduct:l,calculateProductCosts:c}){const[u,d]=w.useState(""),[f,h]=w.useState(!1),[m,y]=w.useState(!1),[g,p]=w.useState(null),[v,x]=w.useState({name:"",main_supplier:"",coefficient:1.3,price_ttc:0,default_volume:500,comments:"",category_id:""}),b=e.filter(C=>{var N;const k=((N=r.find(A=>A.id===C.category_id))==null?void 0:N.name)||"";return C.name.toLowerCase().includes(u.toLowerCase())||k.toLowerCase().includes(u.toLowerCase())}),_=()=>{p(null),x({name:"",main_supplier:"",coefficient:1.3,price_ttc:0,default_volume:500,comments:"",category_id:null}),y(!0)},j=C=>{p(C),x({name:C.name,main_supplier:C.main_supplier,coefficient:C.coefficient,price_ttc:C.price_ttc,default_volume:C.default_volume,comments:C.comments,category_id:C.category_id||null}),y(!0)},S=async()=>{v.name&&(g?await a(g.id,v):await n(v),y(!1))};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between gap-4",children:[s.jsxs("div",{className:"relative flex-1 max-w-sm",children:[s.jsx(xx,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(xe,{placeholder:"Rechercher produit ou catgorie...",value:u,onChange:C=>d(C.target.value),className:"pl-9"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(ne,{variant:"outline",onClick:()=>h(!0),children:[s.jsx(qi,{className:"h-4 w-4 mr-1"})," Importer"]}),s.jsxs(mr,{open:m,onOpenChange:y,children:[s.jsx(Cd,{asChild:!0,children:s.jsxs(ne,{onClick:_,children:[s.jsx(qt,{className:"h-4 w-4 mr-1"})," Nouveau produit"]})}),s.jsxs(ar,{className:"max-w-lg",children:[s.jsx(ir,{children:s.jsx(sr,{children:g?"Modifier le produit":"Nouveau produit"})}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"col-span-2",children:[s.jsx(Ne,{children:"Nom *"}),s.jsx(xe,{value:v.name,onChange:C=>x({...v,name:C.target.value}),placeholder:"Nom du produit"})]}),s.jsxs("div",{children:[s.jsx(Ne,{children:"Catgorie"}),s.jsxs(lt,{value:v.category_id||"none",onValueChange:C=>x({...v,category_id:C==="none"?null:C}),children:[s.jsx(st,{children:s.jsx(ct,{placeholder:"Aucune catgorie"})}),s.jsxs(ot,{children:[s.jsx(De,{value:"none",children:"Aucune"}),r.map(C=>s.jsx(De,{value:C.id,children:s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"inline-block h-3 w-3 rounded-full",style:{backgroundColor:C.color}}),C.name]})},C.id))]})]})]}),s.jsxs("div",{children:[s.jsx(Ne,{children:"Fournisseur principal"}),s.jsx(xe,{value:v.main_supplier,onChange:C=>x({...v,main_supplier:C.target.value})})]}),s.jsxs("div",{children:[s.jsx(Ne,{children:"Coefficient (MO + assemblage)"}),s.jsx(xe,{type:"number",step:"0.01",className:"font-mono-numbers",value:v.coefficient,onChange:C=>x({...v,coefficient:parseFloat(C.target.value)||1})})]}),s.jsxs("div",{children:[s.jsx(Ne,{children:"Volume d'achat par dfaut"}),s.jsx(xe,{type:"number",className:"font-mono-numbers",value:v.default_volume,onChange:C=>x({...v,default_volume:parseInt(C.target.value)||500})})]}),s.jsxs("div",{children:[s.jsx(Ne,{children:"Prix TTC public ()"}),s.jsx(xe,{type:"number",step:"0.01",className:"font-mono-numbers bg-muted",value:v.price_ttc,readOnly:!0,disabled:!0,title:"Gr depuis l'onglet Pricing"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Gr depuis l'onglet Pricing"})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx(Ne,{children:"Commentaires"}),s.jsx(qa,{value:v.comments,onChange:C=>x({...v,comments:C.target.value}),rows:2})]})]}),s.jsx("div",{className:"flex justify-end mt-4",children:s.jsx(ne,{onClick:S,children:g?"Mettre  jour":"Crer"})})]})]})]})]}),s.jsx("div",{className:"border rounded overflow-auto",children:s.jsxs(Kt,{children:[s.jsx(Gt,{children:s.jsxs(_e,{children:[s.jsx(ce,{children:"Produit"}),s.jsx(ce,{children:"Catgorie"}),s.jsx(ce,{children:"Fournisseur"}),s.jsx(ce,{className:"text-right",children:"Coef."}),s.jsx(ce,{className:"text-right",children:"Cot @500"}),s.jsx(ce,{className:"text-right",children:"Prix TTC"}),s.jsx(ce,{className:"text-right",children:"Marge"}),s.jsx(ce,{})]})}),s.jsxs(Yt,{children:[b.length===0&&s.jsx(_e,{children:s.jsx(W,{colSpan:8,className:"text-center text-muted-foreground py-8",children:'Aucun produit. Cliquez sur "Nouveau produit" pour commencer.'})}),b.map(C=>{const N=c(C.id)[500]||0,A=C.price_ttc>0?(C.price_ttc/1.2-N)/(C.price_ttc/1.2)*100:0;return s.jsxs(_e,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>o(C),children:[s.jsx(W,{className:"font-medium",children:C.name}),s.jsx(W,{children:(()=>{const O=r.find(E=>E.id===C.category_id);return O?s.jsxs(Pe,{variant:"outline",className:"gap-1",children:[s.jsx("span",{className:"inline-block h-2 w-2 rounded-full",style:{backgroundColor:O.color}}),O.name]}):s.jsx("span",{className:"text-muted-foreground text-xs",children:""})})()}),s.jsx(W,{children:C.main_supplier||"-"}),s.jsx(W,{className:"text-right font-mono-numbers",children:C.coefficient.toFixed(2)}),s.jsx(W,{className:"text-right font-mono-numbers",children:N>0?`${N.toFixed(2)} `:"-"}),s.jsx(W,{className:"text-right font-mono-numbers",children:C.price_ttc>0?`${C.price_ttc.toFixed(2)} `:"-"}),s.jsx(W,{className:`text-right font-mono-numbers font-medium ${A>0?"positive-value":"negative-value"}`,children:C.price_ttc>0?`${A.toFixed(1)}%`:"-"}),s.jsx(W,{children:s.jsxs("div",{className:"flex gap-1",children:[s.jsx(ne,{variant:"ghost",size:"icon",onClick:O=>{O.stopPropagation(),j(C)},children:s.jsx(Ld,{className:"h-3 w-3"})}),s.jsx(ne,{variant:"ghost",size:"icon",onClick:O=>{O.stopPropagation(),i(C.id)},children:s.jsx(nr,{className:"h-3 w-3 text-destructive"})})]})})]},C.id)})]})]})}),s.jsx(QEe,{open:f,onOpenChange:h,existingReferences:t,existingSuppliers:[...new Set(t.map(C=>C.supplier).filter(Boolean))],onImportProduct:l})]})}const Vf=[50,100,200,500,1e3,2e3,5e3,1e4];function e2e({product:e,references:t,bom:r,onAddBomEntry:n,onUpdateBomEntry:a,onRemoveBomEntry:i,calculateProductCosts:o,onBack:l}){const[c,u]=w.useState(""),[d,f]=w.useState(1),h=r.filter(b=>b.product_id===e.id),m=o(e.id),y=e.price_ttc/1.2,g=Vf.map(b=>({volume:`${b}`,cost:m[b]||0,margin:y>0?Math.max(0,y-(m[b]||0)):0})),p=async()=>{c&&(await n(e.id,c,d),u(""),f(1))},v=new Set(h.map(b=>b.reference_id)),x=t.filter(b=>!v.has(b.id));return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(ne,{variant:"ghost",size:"icon",onClick:l,children:s.jsx(GI,{className:"h-4 w-4"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold",children:e.name}),s.jsxs("div",{className:"flex gap-2 mt-1",children:[s.jsxs(Pe,{variant:"outline",children:["Coef. ",e.coefficient]}),s.jsxs(Pe,{variant:"outline",children:["Prix TTC ",e.price_ttc.toFixed(2)," "]})]})]})]}),s.jsxs("div",{className:"financial-card p-4",children:[s.jsx("h4",{className:"section-title",children:"Nomenclature (BOM)"}),s.jsxs(Kt,{children:[s.jsx(Gt,{children:s.jsxs(_e,{children:[s.jsx(ce,{children:"Code"}),s.jsx(ce,{children:"Rfrence"}),s.jsx(ce,{className:"text-right",children:"Qt"}),Vf.map(b=>s.jsxs(ce,{className:"text-right text-xs",children:["@",b]},b)),s.jsx(ce,{})]})}),s.jsxs(Yt,{children:[h.map(b=>{const _=t.find(j=>j.id===b.reference_id);return _?s.jsxs(_e,{children:[s.jsx(W,{className:"font-mono-numbers",children:_.code}),s.jsx(W,{children:_.name}),s.jsx(W,{className:"text-right",children:s.jsx(xe,{type:"number",min:1,className:"w-16 text-right font-mono-numbers inline-block",value:b.quantity,onChange:j=>a(b.id,parseFloat(j.target.value)||1)})}),Vf.map(j=>s.jsx(W,{className:"text-right font-mono-numbers text-xs",children:((_.prices[j]||0)*b.quantity).toFixed(2)},j)),s.jsx(W,{children:s.jsx(ne,{variant:"ghost",size:"icon",onClick:()=>i(b.id),children:s.jsx(nr,{className:"h-3 w-3 text-destructive"})})})]},b.id):null}),s.jsxs(_e,{className:"font-semibold bg-muted/30",children:[s.jsxs(W,{colSpan:3,className:"text-right",children:["Cot total ( coef. ",e.coefficient,")"]}),Vf.map(b=>s.jsx(W,{className:"text-right font-mono-numbers text-xs",children:(m[b]||0).toFixed(2)},b)),s.jsx(W,{})]}),y>0&&s.jsxs(_e,{className:"font-semibold",children:[s.jsx(W,{colSpan:3,className:"text-right",children:"Marge ()"}),Vf.map(b=>{const _=y-(m[b]||0);return s.jsx(W,{className:`text-right font-mono-numbers text-xs ${_>=0?"positive-value":"negative-value"}`,children:_.toFixed(2)},b)}),s.jsx(W,{})]})]})]}),s.jsxs("div",{className:"flex items-end gap-2 mt-4 pt-4 border-t",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx(Ne,{className:"text-xs",children:"Rfrence"}),s.jsxs(lt,{value:c,onValueChange:u,children:[s.jsx(st,{children:s.jsx(ct,{placeholder:"Choisir une rfrence..."})}),s.jsx(ot,{children:x.map(b=>s.jsxs(De,{value:b.id,children:[b.code,"  ",b.name]},b.id))})]})]}),s.jsxs("div",{className:"w-20",children:[s.jsx(Ne,{className:"text-xs",children:"Qt"}),s.jsx(xe,{type:"number",min:1,className:"font-mono-numbers",value:d,onChange:b=>f(parseInt(b.target.value)||1)})]}),s.jsxs(ne,{size:"sm",onClick:p,disabled:!c,children:[s.jsx(qt,{className:"h-3 w-3 mr-1"})," Ajouter"]})]})]}),h.length>0&&s.jsxs("div",{className:"financial-card p-4",children:[s.jsx("h4",{className:"section-title",children:"Cot vs Marge par volume"}),s.jsx(wr,{width:"100%",height:300,children:s.jsxs(es,{data:g,children:[s.jsx(Nr,{strokeDasharray:"3 3",stroke:"hsl(var(--border))"}),s.jsx(Jt,{dataKey:"volume",tick:{fontSize:12}}),s.jsx(Vt,{tick:{fontSize:12}}),s.jsx(Nt,{formatter:b=>`${b.toFixed(2)} `}),s.jsx(Wt,{dataKey:"cost",name:"Cot",fill:"hsl(var(--accent))",stackId:"a"}),y>0&&s.jsx(Wt,{dataKey:"margin",name:"Marge",fill:"hsl(var(--positive))",stackId:"a"})]})})]})]})}function t2e({categories:e,onCreateCategory:t,onUpdateCategory:r,onDeleteCategory:n}){const[a,i]=w.useState(!1),[o,l]=w.useState(null),[c,u]=w.useState({name:"",description:"",color:"#6366f1"}),d=()=>{l(null),u({name:"",description:"",color:"#6366f1"}),i(!0)},f=m=>{l(m),u({name:m.name,description:m.description,color:m.color}),i(!0)},h=async()=>{c.name.trim()&&(o?await r(o.id,c):await t(c),i(!1))};return s.jsxs("div",{className:"financial-card p-4 space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h4",{className:"section-title flex items-center gap-2",children:[s.jsx(oC,{className:"h-4 w-4"})," Catgories de produits"]}),s.jsxs(mr,{open:a,onOpenChange:i,children:[s.jsx(Cd,{asChild:!0,children:s.jsxs(ne,{size:"sm",onClick:d,children:[s.jsx(qt,{className:"h-4 w-4 mr-1"})," Nouvelle catgorie"]})}),s.jsxs(ar,{className:"max-w-md",children:[s.jsx(ir,{children:s.jsx(sr,{children:o?"Modifier la catgorie":"Nouvelle catgorie"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Ne,{children:"Nom *"}),s.jsx(xe,{value:c.name,onChange:m=>u({...c,name:m.target.value}),placeholder:"Ex: lectronique, Mcanique..."})]}),s.jsxs("div",{children:[s.jsx(Ne,{children:"Description"}),s.jsx(qa,{value:c.description,onChange:m=>u({...c,description:m.target.value}),rows:2,placeholder:"Description optionnelle"})]}),s.jsxs("div",{children:[s.jsx(Ne,{children:"Couleur"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"color",value:c.color,onChange:m=>u({...c,color:m.target.value}),className:"h-9 w-12 rounded border cursor-pointer"}),s.jsx(xe,{value:c.color,onChange:m=>u({...c,color:m.target.value}),className:"font-mono-numbers flex-1"})]})]})]}),s.jsx("div",{className:"flex justify-end mt-4",children:s.jsx(ne,{onClick:h,children:o?"Mettre  jour":"Crer"})})]})]})]}),e.length===0?s.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Aucune catgorie. Crez-en pour organiser vos produits."}):s.jsxs(Kt,{children:[s.jsx(Gt,{children:s.jsxs(_e,{children:[s.jsx(ce,{children:"Couleur"}),s.jsx(ce,{children:"Nom"}),s.jsx(ce,{children:"Description"}),s.jsx(ce,{})]})}),s.jsx(Yt,{children:e.map(m=>s.jsxs(_e,{children:[s.jsx(W,{children:s.jsx("div",{className:"h-5 w-5 rounded-full border",style:{backgroundColor:m.color}})}),s.jsx(W,{className:"font-medium",children:m.name}),s.jsx(W,{className:"text-muted-foreground text-sm",children:m.description||"-"}),s.jsx(W,{children:s.jsxs("div",{className:"flex gap-1",children:[s.jsx(ne,{variant:"ghost",size:"icon",onClick:()=>f(m),children:s.jsx(Ld,{className:"h-3 w-3"})}),s.jsx(ne,{variant:"ghost",size:"icon",onClick:()=>n(m.id),children:s.jsx(nr,{className:"h-3 w-3 text-destructive"})})]})})]},m.id))})]})]})}const Oi=[50,100,200,500,1e3,2e3,5e3,1e4];function r2e({products:e,references:t,bom:r,calculateProductCosts:n}){const[a,i]=w.useState(!1),[o,l]=w.useState(!1),[c,u]=w.useState(new Set),[d,f]=w.useState(new Set),h=p=>{const v=new Set(c);v.has(p)?v.delete(p):v.add(p),u(v)},m=p=>{const v=new Set(d);v.has(p)?v.delete(p):v.add(p),f(v)},y=()=>{const p=e.filter(b=>c.size===0||c.has(b.id)),v=["Produit","Famille","Coef.",...Oi.map(b=>`Cot @${b}`),"Prix TTC","Marge @500"].join("	"),x=p.map(b=>{const _=n(b.id),j=b.price_ttc/1.2,S=j>0?((j-(_[500]||0))/j*100).toFixed(1)+"%":"-";return[b.name,b.family,b.coefficient.toFixed(2),...Oi.map(C=>(_[C]||0).toFixed(2)),b.price_ttc.toFixed(2),S].join("	")});navigator.clipboard.writeText([v,...x].join(`
`)),i(!0),setTimeout(()=>i(!1),2e3),Ee.success("Donnes produits copies")},g=()=>{const p=t.filter(b=>d.size===0||d.has(b.id)),v=["Code","Nom","Catgorie","Fournisseur",...Oi.map(b=>`Prix @${b}`),"Devise","Commentaires"].join("	"),x=p.map(b=>[b.code,b.name,b.category,b.supplier,...Oi.map(_=>(b.prices[_]||0).toFixed(2)),b.currency,b.comments].join("	"));navigator.clipboard.writeText([v,...x].join(`
`)),l(!0),setTimeout(()=>l(!1),2e3),Ee.success("Donnes rfrences copies")};return s.jsxs(Ya,{defaultValue:"products",className:"space-y-4",children:[s.jsxs(Na,{children:[s.jsx(Ct,{value:"products",children:"Export Produits"}),s.jsx(Ct,{value:"references",children:"Export Rfrences"}),s.jsx(Ct,{value:"margins",children:"Analyse Marges"})]}),s.jsxs(Mt,{value:"products",className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:c.size>0?`${c.size} produit(s) slectionn(s)`:"Tous les produits seront exports"}),s.jsxs(ne,{variant:"outline",onClick:y,children:[a?s.jsx(Oo,{className:"h-4 w-4 mr-1"}):s.jsx(Fj,{className:"h-4 w-4 mr-1"}),"Copier vers Excel"]})]}),s.jsx("div",{className:"border rounded overflow-auto",children:s.jsxs(Kt,{children:[s.jsx(Gt,{children:s.jsxs(_e,{children:[s.jsx(ce,{className:"w-8"}),s.jsx(ce,{children:"Produit"}),s.jsx(ce,{children:"Famille"}),Oi.map(p=>s.jsxs(ce,{className:"text-right text-xs",children:["@",p]},p)),s.jsx(ce,{className:"text-right",children:"Prix TTC"})]})}),s.jsx(Yt,{children:e.map(p=>{const v=n(p.id);return s.jsxs(_e,{className:"cursor-pointer",onClick:()=>h(p.id),children:[s.jsx(W,{children:s.jsx("input",{type:"checkbox",checked:c.has(p.id),readOnly:!0})}),s.jsx(W,{className:"font-medium",children:p.name}),s.jsx(W,{children:s.jsx(Pe,{variant:"secondary",children:p.family})}),Oi.map(x=>s.jsx(W,{className:"text-right font-mono-numbers text-xs",children:(v[x]||0).toFixed(2)},x)),s.jsx(W,{className:"text-right font-mono-numbers",children:p.price_ttc.toFixed(2)})]},p.id)})})]})})]}),s.jsxs(Mt,{value:"references",className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:d.size>0?`${d.size} rfrence(s) slectionne(s)`:"Toutes les rfrences seront exportes"}),s.jsxs(ne,{variant:"outline",onClick:g,children:[o?s.jsx(Oo,{className:"h-4 w-4 mr-1"}):s.jsx(Fj,{className:"h-4 w-4 mr-1"}),"Copier vers Excel"]})]}),s.jsx("div",{className:"border rounded overflow-auto",children:s.jsxs(Kt,{children:[s.jsx(Gt,{children:s.jsxs(_e,{children:[s.jsx(ce,{className:"w-8"}),s.jsx(ce,{children:"Code"}),s.jsx(ce,{children:"Nom"}),s.jsx(ce,{children:"Fournisseur"}),Oi.map(p=>s.jsxs(ce,{className:"text-right text-xs",children:["@",p]},p)),s.jsx(ce,{children:"Devise"})]})}),s.jsx(Yt,{children:t.map(p=>s.jsxs(_e,{className:"cursor-pointer",onClick:()=>m(p.id),children:[s.jsx(W,{children:s.jsx("input",{type:"checkbox",checked:d.has(p.id),readOnly:!0})}),s.jsx(W,{className:"font-mono-numbers",children:p.code}),s.jsx(W,{children:p.name}),s.jsx(W,{children:p.supplier||"-"}),Oi.map(v=>s.jsx(W,{className:"text-right font-mono-numbers text-xs",children:(p.prices[v]||0).toFixed(2)},v)),s.jsx(W,{children:p.currency})]},p.id))})]})})]}),s.jsx(Mt,{value:"margins",className:"space-y-4",children:s.jsx("div",{className:"border rounded overflow-auto",children:s.jsxs(Kt,{children:[s.jsx(Gt,{children:s.jsxs(_e,{children:[s.jsx(ce,{children:"Produit"}),s.jsx(ce,{className:"text-right",children:"Prix HT"}),Oi.map(p=>s.jsxs(ce,{className:"text-right text-xs",children:["Marge @",p]},p))]})}),s.jsx(Yt,{children:e.map(p=>{const v=n(p.id),x=p.price_ttc/1.2;return s.jsxs(_e,{children:[s.jsx(W,{className:"font-medium",children:p.name}),s.jsx(W,{className:"text-right font-mono-numbers",children:x>0?x.toFixed(2):"-"}),Oi.map(b=>{const _=x>0?(x-(v[b]||0))/x*100:0;return s.jsx(W,{className:`text-right font-mono-numbers text-xs font-medium ${_>=30?"positive-value":_>=0?"text-warning":"negative-value"}`,children:x>0?`${_.toFixed(1)}%`:"-"},b)})]},p.id)})})]})})})]})}const zR={name:"",contact_name:"",email:"",phone:"",country:"France",comments:""};function n2e({suppliers:e,onCreateSupplier:t,onUpdateSupplier:r,onDeleteSupplier:n}){const[a,i]=w.useState(""),[o,l]=w.useState(!1),[c,u]=w.useState(null),[d,f]=w.useState(zR),h=e.filter(p=>p.name.toLowerCase().includes(a.toLowerCase())||p.contact_name.toLowerCase().includes(a.toLowerCase())||p.email.toLowerCase().includes(a.toLowerCase())),m=()=>{u(null),f(zR),l(!0)},y=p=>{u(p.id),f({name:p.name,contact_name:p.contact_name,email:p.email,phone:p.phone,country:p.country,comments:p.comments}),l(!0)},g=async()=>{d.name.trim()&&(c?await r(c,d):await t(d),l(!1))};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between gap-4",children:[s.jsxs("div",{className:"relative flex-1 max-w-sm",children:[s.jsx(xx,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(xe,{placeholder:"Rechercher un fournisseur...",value:a,onChange:p=>i(p.target.value),className:"pl-9"})]}),s.jsxs(ne,{onClick:m,children:[s.jsx(qt,{className:"h-4 w-4 mr-1"})," Nouveau fournisseur"]})]}),s.jsx("div",{className:"border rounded overflow-auto",children:s.jsxs(Kt,{children:[s.jsx(Gt,{children:s.jsxs(_e,{children:[s.jsx(ce,{children:"Nom"}),s.jsx(ce,{children:"Contact"}),s.jsx(ce,{children:"Email"}),s.jsx(ce,{children:"Tlphone"}),s.jsx(ce,{children:"Pays"}),s.jsx(ce,{})]})}),s.jsxs(Yt,{children:[h.length===0&&s.jsx(_e,{children:s.jsx(W,{colSpan:6,className:"text-center text-muted-foreground py-8",children:'Aucun fournisseur. Cliquez sur "Nouveau fournisseur" pour commencer.'})}),h.map(p=>s.jsxs(_e,{children:[s.jsx(W,{className:"font-medium",children:p.name}),s.jsx(W,{children:p.contact_name||"-"}),s.jsx(W,{children:p.email||"-"}),s.jsx(W,{children:p.phone||"-"}),s.jsx(W,{children:p.country}),s.jsx(W,{children:s.jsxs("div",{className:"flex gap-1",children:[s.jsx(ne,{variant:"ghost",size:"icon",onClick:()=>y(p),children:s.jsx(Ld,{className:"h-3 w-3"})}),s.jsx(ne,{variant:"ghost",size:"icon",onClick:()=>n(p.id),children:s.jsx(nr,{className:"h-3 w-3 text-destructive"})})]})})]},p.id))]})]})}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[h.length," fournisseur(s)"]}),s.jsx(mr,{open:o,onOpenChange:l,children:s.jsxs(ar,{className:"max-w-lg",children:[s.jsx(ir,{children:s.jsx(sr,{children:c?"Modifier le fournisseur":"Nouveau fournisseur"})}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"col-span-2",children:[s.jsx(Ne,{children:"Nom *"}),s.jsx(xe,{value:d.name,onChange:p=>f({...d,name:p.target.value}),placeholder:"Nom du fournisseur"})]}),s.jsxs("div",{children:[s.jsx(Ne,{children:"Contact"}),s.jsx(xe,{value:d.contact_name,onChange:p=>f({...d,contact_name:p.target.value}),placeholder:"Nom du contact"})]}),s.jsxs("div",{children:[s.jsx(Ne,{children:"Email"}),s.jsx(xe,{type:"email",value:d.email,onChange:p=>f({...d,email:p.target.value}),placeholder:"email@example.com"})]}),s.jsxs("div",{children:[s.jsx(Ne,{children:"Tlphone"}),s.jsx(xe,{value:d.phone,onChange:p=>f({...d,phone:p.target.value}),placeholder:"+33 ..."})]}),s.jsxs("div",{children:[s.jsx(Ne,{children:"Pays"}),s.jsx(xe,{value:d.country,onChange:p=>f({...d,country:p.target.value}),placeholder:"France"})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx(Ne,{children:"Commentaires"}),s.jsx(qa,{value:d.comments,onChange:p=>f({...d,comments:p.target.value}),rows:2})]})]}),s.jsx("div",{className:"flex justify-end mt-4",children:s.jsx(ne,{onClick:g,disabled:!d.name.trim(),children:c?"Mettre  jour":"Crer"})})]})})]})}function a2e(){const{user:e}=Xn(),[t,r]=w.useState([]),[n,a]=w.useState([]),[i,o]=w.useState(!0),l=w.useCallback(async()=>{if(e)try{const[g,p]=await Promise.all([he.from("costflow_meetings").select("*").order("meeting_date",{ascending:!1}),he.from("costflow_meeting_tasks").select("*").order("sort_order")]);g.data&&r(g.data.map(v=>({id:v.id,meeting_date:v.meeting_date,title:v.title||"",content:v.content||"",created_at:v.created_at,updated_at:v.updated_at}))),p.data&&a(p.data.map(v=>({id:v.id,meeting_id:v.meeting_id,description:v.description,is_completed:v.is_completed||!1,sort_order:v.sort_order||0,created_at:v.created_at})))}catch(g){console.error("Meetings fetch error:",g)}finally{o(!1)}},[e]);return w.useEffect(()=>{l()},[l]),{meetings:t,tasks:n,loading:i,createMeeting:async g=>{if(!e)return;const{error:p}=await he.from("costflow_meetings").insert({user_id:e.id,meeting_date:g.meeting_date||new Date().toISOString().split("T")[0],title:g.title||"",content:g.content||""});p?(Ee.error("Erreur cration runion"),console.error(p)):(Ee.success("Runion cre"),l())},updateMeeting:async(g,p)=>{if(!e)return;const{error:v}=await he.from("costflow_meetings").update(p).eq("id",g);v?(Ee.error("Erreur mise  jour runion"),console.error(v)):l()},deleteMeeting:async g=>{const{error:p}=await he.from("costflow_meetings").delete().eq("id",g);p?(Ee.error("Erreur suppression runion"),console.error(p)):(Ee.success("Runion supprime"),l())},createTask:async(g,p)=>{if(!e)return;const v=n.filter(_=>_.meeting_id===g),x=v.length>0?Math.max(...v.map(_=>_.sort_order)):-1,{error:b}=await he.from("costflow_meeting_tasks").insert({user_id:e.id,meeting_id:g,description:p,sort_order:x+1});b?(Ee.error("Erreur ajout tche"),console.error(b)):l()},updateTask:async(g,p)=>{if(!e)return;const{error:v}=await he.from("costflow_meeting_tasks").update(p).eq("id",g);v?(Ee.error("Erreur mise  jour tche"),console.error(v)):l()},deleteTask:async g=>{const{error:p}=await he.from("costflow_meeting_tasks").delete().eq("id",g);p?(Ee.error("Erreur suppression tche"),console.error(p)):l()},getTasksForMeeting:g=>n.filter(p=>p.meeting_id===g),refresh:l}}function $n(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function Is(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function i2e(e,t){const r=$n(e);return isNaN(t)?Is(e,NaN):(t&&r.setDate(r.getDate()+t),r)}const r8=6048e5,s2e=864e5,n8=6e4,a8=36e5;let o2e={};function X0(){return o2e}function Od(e,t){var l,c,u,d;const r=X0(),n=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,a=$n(e),i=a.getDay(),o=(i<n?7:0)+i-n;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function Yy(e){return Od(e,{weekStartsOn:1})}function i8(e){const t=$n(e),r=t.getFullYear(),n=Is(e,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const a=Yy(n),i=Is(e,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const o=Yy(i);return t.getTime()>=a.getTime()?r+1:t.getTime()>=o.getTime()?r:r-1}function Xy(e){const t=$n(e);return t.setHours(0,0,0,0),t}function UR(e){const t=$n(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function l2e(e,t){const r=Xy(e),n=Xy(t),a=+r-UR(r),i=+n-UR(n);return Math.round((a-i)/s2e)}function c2e(e){const t=i8(e),r=Is(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),Yy(r)}function s8(e,t){const r=t*7;return i2e(e,r)}function u2e(e){return Is(e,Date.now())}function iS(e,t){const r=Xy(e),n=Xy(t);return+r==+n}function d2e(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function f2e(e){if(!d2e(e)&&typeof e!="number")return!1;const t=$n(e);return!isNaN(Number(t))}function h2e(e,t){const r=$n(e.start),n=$n(e.end);let a=+r>+n;const i=a?+r:+n,o=a?n:r;o.setHours(0,0,0,0);let l=1;const c=[];for(;+o<=i;)c.push($n(o)),o.setDate(o.getDate()+l),o.setHours(0,0,0,0);return a?c.reverse():c}function m2e(e){const t=$n(e),r=Is(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}function p2e(e,t){const r=t==null?void 0:t.weekStartsOn,n=$n(e),a=n.getDay(),i=(a<r?-7:0)+6-(a-r);return n.setDate(n.getDate()+i),n.setHours(23,59,59,999),n}const g2e={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},v2e=(e,t,r)=>{let n;const a=g2e[e];return typeof a=="string"?n=a:t===1?n=a.one:n=a.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function Pu(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const y2e={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},x2e={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},b2e={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},w2e={date:Pu({formats:y2e,defaultWidth:"full"}),time:Pu({formats:x2e,defaultWidth:"full"}),dateTime:Pu({formats:b2e,defaultWidth:"full"})},j2e={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},_2e=(e,t,r,n)=>j2e[e];function Li(e){return(t,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let a;if(n==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=r!=null&&r.width?String(r.width):o;a=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=r!=null&&r.width?String(r.width):e.defaultWidth;a=e.values[l]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return a[i]}}const S2e={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},C2e={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},N2e={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},k2e={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},P2e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},E2e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},A2e=(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},O2e={ordinalNumber:A2e,era:Li({values:S2e,defaultWidth:"wide"}),quarter:Li({values:C2e,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Li({values:N2e,defaultWidth:"wide"}),day:Li({values:k2e,defaultWidth:"wide"}),dayPeriod:Li({values:P2e,defaultWidth:"wide",formattingValues:E2e,defaultFormattingWidth:"wide"})};function Bi(e){return(t,r={})=>{const n=r.width,a=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const o=i[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?R2e(l,f=>f.test(o)):T2e(l,f=>f.test(o));let u;u=e.valueCallback?e.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;const d=t.slice(o.length);return{value:u,rest:d}}}function T2e(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function R2e(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function o8(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const a=n[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=r.valueCallback?r.valueCallback(o):o;const l=t.slice(a.length);return{value:o,rest:l}}}const M2e=/^(\d+)(th|st|nd|rd)?/i,$2e=/\d+/i,I2e={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},D2e={any:[/^b/i,/^(a|c)/i]},L2e={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},B2e={any:[/1/i,/2/i,/3/i,/4/i]},F2e={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},z2e={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},U2e={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},V2e={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},W2e={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},H2e={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},q2e={ordinalNumber:o8({matchPattern:M2e,parsePattern:$2e,valueCallback:e=>parseInt(e,10)}),era:Bi({matchPatterns:I2e,defaultMatchWidth:"wide",parsePatterns:D2e,defaultParseWidth:"any"}),quarter:Bi({matchPatterns:L2e,defaultMatchWidth:"wide",parsePatterns:B2e,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Bi({matchPatterns:F2e,defaultMatchWidth:"wide",parsePatterns:z2e,defaultParseWidth:"any"}),day:Bi({matchPatterns:U2e,defaultMatchWidth:"wide",parsePatterns:V2e,defaultParseWidth:"any"}),dayPeriod:Bi({matchPatterns:W2e,defaultMatchWidth:"any",parsePatterns:H2e,defaultParseWidth:"any"})},K2e={code:"en-US",formatDistance:v2e,formatLong:w2e,formatRelative:_2e,localize:O2e,match:q2e,options:{weekStartsOn:0,firstWeekContainsDate:1}};function G2e(e){const t=$n(e);return l2e(t,m2e(t))+1}function Y2e(e){const t=$n(e),r=+Yy(t)-+c2e(t);return Math.round(r/r8)+1}function l8(e,t){var d,f,h,m;const r=$n(e),n=r.getFullYear(),a=X0(),i=(t==null?void 0:t.firstWeekContainsDate)??((f=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??a.firstWeekContainsDate??((m=(h=a.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??1,o=Is(e,0);o.setFullYear(n+1,0,i),o.setHours(0,0,0,0);const l=Od(o,t),c=Is(e,0);c.setFullYear(n,0,i),c.setHours(0,0,0,0);const u=Od(c,t);return r.getTime()>=l.getTime()?n+1:r.getTime()>=u.getTime()?n:n-1}function X2e(e,t){var l,c,u,d;const r=X0(),n=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,a=l8(e,t),i=Is(e,0);return i.setFullYear(a,0,n),i.setHours(0,0,0,0),Od(i,t)}function Z2e(e,t){const r=$n(e),n=+Od(r,t)-+X2e(r,t);return Math.round(n/r8)+1}function Ut(e,t){const r=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return r+n}const Ys={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return Ut(t==="yy"?n%100:n,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):Ut(r+1,2)},d(e,t){return Ut(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return Ut(e.getHours()%12||12,t.length)},H(e,t){return Ut(e.getHours(),t.length)},m(e,t){return Ut(e.getMinutes(),t.length)},s(e,t){return Ut(e.getSeconds(),t.length)},S(e,t){const r=t.length,n=e.getMilliseconds(),a=Math.trunc(n*Math.pow(10,r-3));return Ut(a,t.length)}},Bc={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},VR={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const n=e.getFullYear(),a=n>0?n:1-n;return r.ordinalNumber(a,{unit:"year"})}return Ys.y(e,t)},Y:function(e,t,r,n){const a=l8(e,n),i=a>0?a:1-a;if(t==="YY"){const o=i%100;return Ut(o,2)}return t==="Yo"?r.ordinalNumber(i,{unit:"year"}):Ut(i,t.length)},R:function(e,t){const r=i8(e);return Ut(r,t.length)},u:function(e,t){const r=e.getFullYear();return Ut(r,t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return Ut(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return Ut(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return Ys.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return Ut(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const a=Z2e(e,n);return t==="wo"?r.ordinalNumber(a,{unit:"week"}):Ut(a,t.length)},I:function(e,t,r){const n=Y2e(e);return t==="Io"?r.ordinalNumber(n,{unit:"week"}):Ut(n,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):Ys.d(e,t)},D:function(e,t,r){const n=G2e(e);return t==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):Ut(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const a=e.getDay(),i=(a-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return Ut(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const a=e.getDay(),i=(a-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return Ut(i,t.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),a=n===0?7:n;switch(t){case"i":return String(a);case"ii":return Ut(a,t.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let a;switch(n===12?a=Bc.noon:n===0?a=Bc.midnight:a=n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let a;switch(n>=17?a=Bc.evening:n>=12?a=Bc.afternoon:n>=4?a=Bc.morning:a=Bc.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return Ys.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):Ys.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return t==="Ko"?r.ordinalNumber(n,{unit:"hour"}):Ut(n,t.length)},k:function(e,t,r){let n=e.getHours();return n===0&&(n=24),t==="ko"?r.ordinalNumber(n,{unit:"hour"}):Ut(n,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):Ys.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):Ys.s(e,t)},S:function(e,t){return Ys.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return HR(n);case"XXXX":case"XX":return wl(n);case"XXXXX":case"XXX":default:return wl(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return HR(n);case"xxxx":case"xx":return wl(n);case"xxxxx":case"xxx":default:return wl(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+WR(n,":");case"OOOO":default:return"GMT"+wl(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+WR(n,":");case"zzzz":default:return"GMT"+wl(n,":")}},t:function(e,t,r){const n=Math.trunc(e.getTime()/1e3);return Ut(n,t.length)},T:function(e,t,r){const n=e.getTime();return Ut(n,t.length)}};function WR(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),a=Math.trunc(n/60),i=n%60;return i===0?r+String(a):r+String(a)+t+Ut(i,2)}function HR(e,t){return e%60===0?(e>0?"-":"+")+Ut(Math.abs(e)/60,2):wl(e,t)}function wl(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),a=Ut(Math.trunc(n/60),2),i=Ut(n%60,2);return r+a+t+i}const qR=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},c8=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},Q2e=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],a=r[2];if(!a)return qR(e,t);let i;switch(n){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",qR(n,t)).replace("{{time}}",c8(a,t))},J2e={p:c8,P:Q2e},eAe=/^D+$/,tAe=/^Y+$/,rAe=["D","DD","YY","YYYY"];function nAe(e){return eAe.test(e)}function aAe(e){return tAe.test(e)}function iAe(e,t,r){const n=sAe(e,t,r);if(console.warn(n),rAe.includes(e))throw new RangeError(n)}function sAe(e,t,r){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const oAe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,lAe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,cAe=/^'([^]*?)'?$/,uAe=/''/g,dAe=/[a-zA-Z]/;function si(e,t,r){var d,f,h,m,y,g,p,v;const n=X0(),a=(r==null?void 0:r.locale)??n.locale??K2e,i=(r==null?void 0:r.firstWeekContainsDate)??((f=(d=r==null?void 0:r.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??n.firstWeekContainsDate??((m=(h=n.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??1,o=(r==null?void 0:r.weekStartsOn)??((g=(y=r==null?void 0:r.locale)==null?void 0:y.options)==null?void 0:g.weekStartsOn)??n.weekStartsOn??((v=(p=n.locale)==null?void 0:p.options)==null?void 0:v.weekStartsOn)??0,l=$n(e);if(!f2e(l))throw new RangeError("Invalid time value");let c=t.match(lAe).map(x=>{const b=x[0];if(b==="p"||b==="P"){const _=J2e[b];return _(x,a.formatLong)}return x}).join("").match(oAe).map(x=>{if(x==="''")return{isToken:!1,value:"'"};const b=x[0];if(b==="'")return{isToken:!1,value:fAe(x)};if(VR[b])return{isToken:!0,value:x};if(b.match(dAe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:x}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const u={firstWeekContainsDate:i,weekStartsOn:o,locale:a};return c.map(x=>{if(!x.isToken)return x.value;const b=x.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&aAe(b)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&nAe(b))&&iAe(b,t,String(e));const _=VR[b[0]];return _(l,b,a.localize,u)}).join("")}function fAe(e){const t=e.match(cAe);return t?t[1].replace(uAe,"'"):e}function hAe(e){return iS(e,u2e(e))}function mAe(e,t){const n=yAe(e);let a;if(n.date){const c=xAe(n.date,2);a=bAe(c.restDateString,c.year)}if(!a||isNaN(a.getTime()))return new Date(NaN);const i=a.getTime();let o=0,l;if(n.time&&(o=wAe(n.time),isNaN(o)))return new Date(NaN);if(n.timezone){if(l=jAe(n.timezone),isNaN(l))return new Date(NaN)}else{const c=new Date(i+o),u=new Date(0);return u.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),u.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),u}return new Date(i+o+l)}const xg={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},pAe=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,gAe=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,vAe=/^([+-])(\d{2})(?::?(\d{2}))?$/;function yAe(e){const t={},r=e.split(xg.dateTimeDelimiter);let n;if(r.length>2)return t;if(/:/.test(r[0])?n=r[0]:(t.date=r[0],n=r[1],xg.timeZoneDelimiter.test(t.date)&&(t.date=e.split(xg.timeZoneDelimiter)[0],n=e.substr(t.date.length,e.length))),n){const a=xg.timezone.exec(n);a?(t.time=n.replace(a[1],""),t.timezone=a[1]):t.time=n}return t}function xAe(e,t){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=e.match(r);if(!n)return{year:NaN,restDateString:""};const a=n[1]?parseInt(n[1]):null,i=n[2]?parseInt(n[2]):null;return{year:i===null?a:i*100,restDateString:e.slice((n[1]||n[2]).length)}}function bAe(e,t){if(t===null)return new Date(NaN);const r=e.match(pAe);if(!r)return new Date(NaN);const n=!!r[4],a=Wf(r[1]),i=Wf(r[2])-1,o=Wf(r[3]),l=Wf(r[4]),c=Wf(r[5])-1;if(n)return kAe(t,l,c)?_Ae(t,l,c):new Date(NaN);{const u=new Date(0);return!CAe(t,i,o)||!NAe(t,a)?new Date(NaN):(u.setUTCFullYear(t,i,Math.max(a,o)),u)}}function Wf(e){return e?parseInt(e):1}function wAe(e){const t=e.match(gAe);if(!t)return NaN;const r=Fw(t[1]),n=Fw(t[2]),a=Fw(t[3]);return PAe(r,n,a)?r*a8+n*n8+a*1e3:NaN}function Fw(e){return e&&parseFloat(e.replace(",","."))||0}function jAe(e){if(e==="Z")return 0;const t=e.match(vAe);if(!t)return 0;const r=t[1]==="+"?-1:1,n=parseInt(t[2]),a=t[3]&&parseInt(t[3])||0;return EAe(n,a)?r*(n*a8+a*n8):NaN}function _Ae(e,t,r){const n=new Date(0);n.setUTCFullYear(e,0,4);const a=n.getUTCDay()||7,i=(t-1)*7+r+1-a;return n.setUTCDate(n.getUTCDate()+i),n}const SAe=[31,null,31,30,31,30,31,31,30,31,30,31];function u8(e){return e%400===0||e%4===0&&e%100!==0}function CAe(e,t,r){return t>=0&&t<=11&&r>=1&&r<=(SAe[t]||(u8(e)?29:28))}function NAe(e,t){return t>=1&&t<=(u8(e)?366:365)}function kAe(e,t,r){return t>=1&&t<=53&&r>=0&&r<=6}function PAe(e,t,r){return e===24?t===0&&r===0:r>=0&&r<60&&t>=0&&t<60&&e>=0&&e<25}function EAe(e,t){return t>=0&&t<=59}function AAe(e,t){return s8(e,-t)}const OAe={lessThanXSeconds:{one:"moins dune seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins dune minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus dun an",other:"plus de {{count}} ans"},almostXYears:{one:"presquun an",other:"presque {{count}} ans"}},TAe=(e,t,r)=>{let n;const a=OAe[e];return typeof a=="string"?n=a:t===1?n=a.one:n=a.other.replace("{{count}}",String(t)),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"dans "+n:"il y a "+n:n},RAe={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},MAe={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},$Ae={full:"{{date}} '' {{time}}",long:"{{date}} '' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},IAe={date:Pu({formats:RAe,defaultWidth:"full"}),time:Pu({formats:MAe,defaultWidth:"full"}),dateTime:Pu({formats:$Ae,defaultWidth:"full"})},DAe={lastWeek:"eeee 'dernier ' p",yesterday:"'hier ' p",today:"'aujourdhui ' p",tomorrow:"'demain ' p'",nextWeek:"eeee 'prochain ' p",other:"P"},LAe=(e,t,r,n)=>DAe[e],BAe={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jsus-Christ","aprs Jsus-Christ"]},FAe={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2me trim.","3me trim.","4me trim."],wide:["1er trimestre","2me trimestre","3me trimestre","4me trimestre"]},zAe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","fvr.","mars","avr.","mai","juin","juil.","aot","sept.","oct.","nov.","dc."],wide:["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"]},UAe={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},VAe={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"aprs-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de laprs-midi",evening:"du soir",night:"du matin"}},WAe=(e,t)=>{const r=Number(e),n=t==null?void 0:t.unit;if(r===0)return"0";const a=["year","week","hour","minute","second"];let i;return r===1?i=n&&a.includes(n)?"re":"er":i="me",r+i},HAe=["MMM","MMMM"],qAe={preprocessor:(e,t)=>e.getDate()===1||!t.some(n=>n.isToken&&HAe.includes(n.value))?t:t.map(n=>n.isToken&&n.value==="do"?{isToken:!0,value:"d"}:n),ordinalNumber:WAe,era:Li({values:BAe,defaultWidth:"wide"}),quarter:Li({values:FAe,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Li({values:zAe,defaultWidth:"wide"}),day:Li({values:UAe,defaultWidth:"wide"}),dayPeriod:Li({values:VAe,defaultWidth:"wide"})},KAe=/^(\d+)(ime|re|me|er|e)?/i,GAe=/\d+/i,YAe={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jsus-Christ|aprs Jsus-Christ)/i},XAe={any:[/^av/i,/^ap/i]},ZAe={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|me|e)? trim\.?/i,wide:/^[1234](er|me|e)? trimestre/i},QAe={any:[/1/i,/2/i,/3/i,/4/i]},JAe={narrow:/^[jfmasond]/i,abbreviated:/^(janv|fvr|mars|avr|mai|juin|juill|juil|aot|sept|oct|nov|dc)\.?/i,wide:/^(janvier|fvrier|mars|avril|mai|juin|juillet|aot|septembre|octobre|novembre|dcembre)/i},eOe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},tOe={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},rOe={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},nOe={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'aprs[-\s]midi|du soir|de la nuit)/i},aOe={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},iOe={ordinalNumber:o8({matchPattern:KAe,parsePattern:GAe,valueCallback:e=>parseInt(e)}),era:Bi({matchPatterns:YAe,defaultMatchWidth:"wide",parsePatterns:XAe,defaultParseWidth:"any"}),quarter:Bi({matchPatterns:ZAe,defaultMatchWidth:"wide",parsePatterns:QAe,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Bi({matchPatterns:JAe,defaultMatchWidth:"wide",parsePatterns:eOe,defaultParseWidth:"any"}),day:Bi({matchPatterns:tOe,defaultMatchWidth:"wide",parsePatterns:rOe,defaultParseWidth:"any"}),dayPeriod:Bi({matchPatterns:nOe,defaultMatchWidth:"any",parsePatterns:aOe,defaultParseWidth:"any"})},hu={code:"fr",formatDistance:TAe,formatLong:IAe,formatRelative:LAe,localize:qAe,match:iOe,options:{weekStartsOn:1,firstWeekContainsDate:4}};function sOe(){const{meetings:e,loading:t,createMeeting:r,updateMeeting:n,deleteMeeting:a,createTask:i,updateTask:o,deleteTask:l,getTasksForMeeting:c}=a2e(),[u,d]=w.useState(null),[f,h]=w.useState(!1),[m,y]=w.useState(!1),[g,p]=w.useState(new Date().toISOString().split("T")[0]),[v,x]=w.useState(""),[b,_]=w.useState(""),[j,S]=w.useState(!1),[C,k]=w.useState(""),[N,A]=w.useState(""),O=e.find(B=>B.id===u),E=u?c(u):[],R=async()=>{v.trim()&&(await r({meeting_date:g,title:v}),x(""),p(new Date().toISOString().split("T")[0]),h(!1))},P=async()=>{!u||!b.trim()||(await i(u,b.trim()),_(""))},T=async()=>{!u||!N.trim()||(await i(u,N.trim()),A(""))},I=()=>{O&&(k(O.content),S(!0))},M=async()=>{u&&(await n(u,{content:C}),S(!1))},D=({tasks:B,inFullscreen:z=!1})=>s.jsxs("div",{className:"space-y-1.5",children:[B.map(Z=>s.jsxs("div",{className:"flex items-start gap-2 group",children:[s.jsx(za,{checked:Z.is_completed,onCheckedChange:J=>o(Z.id,{is_completed:!!J}),className:"mt-0.5"}),s.jsx("span",{className:`text-sm flex-1 ${Z.is_completed?"line-through text-muted-foreground":""}`,children:Z.description}),s.jsx(ne,{variant:"ghost",size:"icon",className:"h-6 w-6 opacity-0 group-hover:opacity-100 text-destructive",onClick:()=>l(Z.id),children:s.jsx(_i,{className:"h-3 w-3"})})]},Z.id)),s.jsxs("div",{className:"flex gap-2 mt-2",children:[s.jsx(xe,{placeholder:"Nouvelle tche",value:z?N:b,onChange:Z=>z?A(Z.target.value):_(Z.target.value),onKeyDown:Z=>Z.key==="Enter"&&(z?T():P()),className:"text-sm"}),s.jsx(ne,{size:"sm",onClick:z?T:P,disabled:!(z?N:b).trim(),children:s.jsx(qt,{className:"h-4 w-4"})})]})]});return t?s.jsx("div",{className:"text-muted-foreground text-center py-8",children:"Chargement"}):s.jsxs("div",{className:"flex gap-4 h-[calc(100vh-320px)] min-h-[500px]",children:[s.jsxs(St,{className:"w-64 shrink-0 flex flex-col",children:[s.jsx(er,{className:"pb-2",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(tr,{className:"text-sm font-medium",children:"Runions"}),s.jsxs(mr,{open:f,onOpenChange:h,children:[s.jsx(Cd,{asChild:!0,children:s.jsxs(ne,{size:"sm",variant:"outline",className:"h-7 text-xs",children:[s.jsx(qt,{className:"h-3 w-3 mr-1"})," Nouveau"]})}),s.jsxs(ar,{children:[s.jsx(ir,{children:s.jsx(sr,{children:"Nouvelle runion BE"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Ne,{children:"Date"}),s.jsx(xe,{type:"date",value:g,onChange:B=>p(B.target.value)})]}),s.jsxs("div",{children:[s.jsx(Ne,{children:"Titre / Objet"}),s.jsx(xe,{placeholder:"Ex: Runion BE hebdomadaire",value:v,onChange:B=>x(B.target.value),onKeyDown:B=>B.key==="Enter"&&R()})]}),s.jsx(ne,{onClick:R,disabled:!v.trim(),className:"w-full",children:"Crer la runion"})]})]})]})]})}),s.jsxs(Rt,{className:"flex-1 overflow-auto p-2 space-y-1",children:[e.length===0&&s.jsx("p",{className:"text-xs text-muted-foreground text-center py-4",children:"Aucune runion"}),e.map(B=>{const z=B.id===u,Z=c(B.id).length,J=c(B.id).filter(se=>se.is_completed).length;return s.jsxs("button",{onClick:()=>d(B.id),className:`w-full text-left rounded-md px-3 py-2 text-sm transition-colors ${z?"bg-primary text-primary-foreground":"hover:bg-muted"}`,children:[s.jsx("div",{className:"font-medium truncate",children:si(new Date(B.meeting_date),"dd/MM/yyyy")}),s.jsx("div",{className:`text-xs truncate ${z?"text-primary-foreground/70":"text-muted-foreground"}`,children:B.title||"Sans titre"}),Z>0&&s.jsxs("div",{className:`text-xs mt-0.5 ${z?"text-primary-foreground/60":"text-muted-foreground"}`,children:[" ",J,"/",Z," tches"]})]},B.id)})]})]}),s.jsx(St,{className:"flex-1 flex flex-col overflow-hidden",children:O?s.jsxs(s.Fragment,{children:[s.jsx(er,{className:"pb-2 shrink-0",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(tr,{className:"text-lg flex items-center gap-2",children:[s.jsx($g,{className:"h-5 w-5 text-primary"}),si(new Date(O.meeting_date),"EEEE d MMMM yyyy",{locale:hu})]}),s.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:O.title})]}),s.jsx(ne,{variant:"ghost",size:"icon",className:"text-destructive hover:text-destructive",onClick:async()=>{confirm("Supprimer cette runion et toutes ses tches ?")&&(await a(O.id),d(null))},children:s.jsx(nr,{className:"h-4 w-4"})})]})}),s.jsxs(Rt,{className:"flex-1 overflow-auto space-y-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("h3",{className:"text-sm font-semibold flex items-center gap-1.5",children:[s.jsx(Bo,{className:"h-4 w-4"})," Compte-rendu"]}),s.jsxs("div",{className:"flex gap-1",children:[!j&&s.jsx(ne,{size:"sm",variant:"ghost",className:"h-7 text-xs",onClick:I,children:"Modifier"}),s.jsx(ne,{size:"sm",variant:"ghost",className:"h-7 text-xs",onClick:()=>y(!0),children:s.jsx(kH,{className:"h-3.5 w-3.5"})})]})]}),j?s.jsxs("div",{className:"space-y-2",children:[s.jsx(qa,{value:C,onChange:B=>k(B.target.value),rows:10,placeholder:"Rdigez le compte-rendu de la runion",className:"text-sm"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ne,{size:"sm",onClick:M,children:"Enregistrer"}),s.jsx(ne,{size:"sm",variant:"ghost",onClick:()=>S(!1),children:"Annuler"})]})]}):s.jsx("div",{className:"bg-muted/50 rounded-md p-3 min-h-[60px] text-sm whitespace-pre-wrap",children:O.content||s.jsx("span",{className:"text-muted-foreground italic",children:"Aucun compte-rendu rdig"})})]}),s.jsx(Yl,{}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold mb-2",children:"Tches :"}),s.jsx(D,{tasks:E})]})]}),s.jsx(mr,{open:m,onOpenChange:y,children:s.jsxs(ar,{className:"max-w-4xl h-[80vh] flex flex-col",children:[s.jsx(ir,{children:s.jsxs(sr,{className:"flex items-center gap-2",children:[s.jsx($g,{className:"h-5 w-5 text-primary"}),O&&si(new Date(O.meeting_date),"EEEE d MMMM yyyy",{locale:hu}),O&&s.jsxs("span",{className:"text-muted-foreground font-normal text-base ml-2",children:[" ",O.title]})]})}),s.jsxs("div",{className:"flex-1 overflow-auto space-y-6 pr-2",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("h3",{className:"font-semibold flex items-center gap-1.5",children:[s.jsx(Bo,{className:"h-4 w-4"})," Compte-rendu"]}),!j&&s.jsx(ne,{size:"sm",variant:"ghost",className:"h-7 text-xs",onClick:I,children:"Modifier"})]}),j?s.jsxs("div",{className:"space-y-2",children:[s.jsx(qa,{value:C,onChange:B=>k(B.target.value),rows:16,placeholder:"Rdigez le compte-rendu de la runion",className:"text-sm"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ne,{size:"sm",onClick:M,children:"Enregistrer"}),s.jsx(ne,{size:"sm",variant:"ghost",onClick:()=>S(!1),children:"Annuler"})]})]}):s.jsx("div",{className:"bg-muted/50 rounded-md p-4 min-h-[120px] text-sm whitespace-pre-wrap",children:(O==null?void 0:O.content)||s.jsx("span",{className:"text-muted-foreground italic",children:"Aucun compte-rendu rdig"})})]}),s.jsx(Yl,{}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-3",children:"Tches :"}),s.jsx(D,{tasks:E,inFullscreen:!0})]})]})]})})]}):s.jsx("div",{className:"flex-1 flex items-center justify-center text-muted-foreground",children:s.jsxs("div",{className:"text-center space-y-2",children:[s.jsx($g,{className:"h-12 w-12 mx-auto opacity-30"}),s.jsx("p",{children:"Slectionnez une runion ou crez-en une nouvelle"})]})})})]})}function d8(){const[e,t]=w.useState([]),[r,n]=w.useState([]),[a,i]=w.useState([]),[o,l]=w.useState(!0),c=w.useCallback(async()=>{try{const[b,_,j]=await Promise.all([he.from("costflow_planning_colors").select("*").order("sort_order"),he.from("costflow_planning_rows").select("*").order("sort_order"),he.from("costflow_planning_blocks").select("*")]);if(b.error)throw b.error;if(_.error)throw _.error;if(j.error)throw j.error;t(b.data||[]),n(_.data||[]),i(j.data||[])}catch(b){Ee.error("Erreur chargement planning: "+b.message)}finally{l(!1)}},[]);w.useEffect(()=>{c()},[c]);const u=async()=>{var _;const{data:b}=await he.auth.getUser();return(_=b.user)==null?void 0:_.id};return{colors:e,rows:r,blocks:a,loading:o,createColor:async(b,_)=>{const j=await u();if(!j)return;const{data:S,error:C}=await he.from("costflow_planning_colors").insert({user_id:j,name:b,color:_,sort_order:e.length}).select().single();if(C){Ee.error(C.message);return}t(k=>[...k,S])},updateColor:async(b,_)=>{const{error:j}=await he.from("costflow_planning_colors").update(_).eq("id",b);if(j){Ee.error(j.message);return}t(S=>S.map(C=>C.id===b?{...C,..._}:C))},deleteColor:async b=>{const{error:_}=await he.from("costflow_planning_colors").delete().eq("id",b);if(_){Ee.error(_.message);return}t(j=>j.filter(S=>S.id!==b))},createRow:async b=>{const _=await u();if(!_)return;const{data:j,error:S}=await he.from("costflow_planning_rows").insert({user_id:_,label:b,sort_order:r.length}).select().single();if(S){Ee.error(S.message);return}n(C=>[...C,j])},updateRow:async(b,_)=>{const{error:j}=await he.from("costflow_planning_rows").update({label:_}).eq("id",b);if(j){Ee.error(j.message);return}n(S=>S.map(C=>C.id===b?{...C,label:_}:C))},deleteRow:async b=>{const{error:_}=await he.from("costflow_planning_rows").delete().eq("id",b);if(_){Ee.error(_.message);return}n(j=>j.filter(S=>S.id!==b)),i(j=>j.filter(S=>S.row_id!==b))},createBlock:async(b,_,j,S,C)=>{const k=await u();if(!k)return;const{data:N,error:A}=await he.from("costflow_planning_blocks").insert({user_id:k,row_id:b,start_month:_,duration:j,color_id:S,label:C}).select().single();if(A){Ee.error(A.message);return}i(O=>[...O,N])},updateBlock:async(b,_)=>{const{error:j}=await he.from("costflow_planning_blocks").update(_).eq("id",b);if(j){Ee.error(j.message);return}i(S=>S.map(C=>C.id===b?{...C,..._}:C))},deleteBlock:async b=>{const{error:_}=await he.from("costflow_planning_blocks").delete().eq("id",b);if(_){Ee.error(_.message);return}i(j=>j.filter(S=>S.id!==b))}}}function oOe(){const[e,t]=w.useState([]),[r,n]=w.useState(!0),a=w.useCallback(async()=>{try{const{data:c,error:u}=await he.from("costflow_planning_notes").select("*").order("created_at",{ascending:!1});if(u)throw u;t(c||[])}catch(c){Ee.error("Erreur chargement notes: "+c.message)}finally{n(!1)}},[]);return w.useEffect(()=>{a()},[a]),{notes:e,loading:r,getNotesForBlock:c=>e.filter(u=>u.block_id===c),getNotesForBlocks:c=>e.filter(u=>c.includes(u.block_id)),upsertNote:async(c,u)=>{var m;const{data:d}=await he.auth.getUser(),f=(m=d.user)==null?void 0:m.id;if(!f)return;const h=e.find(y=>y.block_id===c);if(h){const{error:y}=await he.from("costflow_planning_notes").update({content:u}).eq("id",h.id);if(y){Ee.error(y.message);return}t(g=>g.map(p=>p.id===h.id?{...p,content:u,updated_at:new Date().toISOString()}:p))}else{const{data:y,error:g}=await he.from("costflow_planning_notes").insert({user_id:f,block_id:c,content:u}).select().single();if(g){Ee.error(g.message);return}t(p=>[y,...p])}Ee.success("Note sauvegarde")}}}function lOe({open:e,onOpenChange:t,block:r,color:n,existingNote:a,onSave:i,monthLabels:o}){const[l,c]=w.useState("");if(w.useEffect(()=>{c((a==null?void 0:a.content)||"")},[a,e]),!r)return null;const u=o[r.start_month-1]||`M${r.start_month}`,d=r.start_month+r.duration-1,f=o[d-1]||`M${d}`;return s.jsx(mr,{open:e,onOpenChange:t,children:s.jsxs(ar,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[s.jsx(ir,{children:s.jsxs(sr,{className:"flex items-center gap-2",children:[n&&s.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:n.color}}),s.jsx("span",{children:r.label||(n==null?void 0:n.name)||"Bloc"}),s.jsxs("span",{className:"text-sm font-normal text-muted-foreground",children:["(",u,"  ",f,")"]})]})}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(qa,{value:l,onChange:h=>c(h.target.value),placeholder:"Notes sur l'avancement de cette phase",className:"min-h-[250px] text-sm"}),s.jsxs("div",{className:"flex justify-between items-center",children:[a&&s.jsxs("span",{className:"text-xs text-muted-foreground",children:["Dernire mise  jour : ",new Date(a.updated_at).toLocaleDateString("fr-FR")]}),s.jsxs(ne,{onClick:()=>{i(r.id,l),t(!1)},className:"ml-auto",children:[s.jsx(yx,{className:"h-4 w-4 mr-1"})," Sauvegarder"]})]})]})]})})}function cOe(e,t){return w.useReducer((r,n)=>t[r][n]??r,e)}var hk="ScrollArea",[f8,lTe]=Yn(hk),[uOe,Za]=f8(hk),h8=w.forwardRef((e,t)=>{const{__scopeScrollArea:r,type:n="hover",dir:a,scrollHideDelay:i=600,...o}=e,[l,c]=w.useState(null),[u,d]=w.useState(null),[f,h]=w.useState(null),[m,y]=w.useState(null),[g,p]=w.useState(null),[v,x]=w.useState(0),[b,_]=w.useState(0),[j,S]=w.useState(!1),[C,k]=w.useState(!1),N=dt(t,O=>c(O)),A=qd(a);return s.jsx(uOe,{scope:r,type:n,dir:A,scrollHideDelay:i,scrollArea:l,viewport:u,onViewportChange:d,content:f,onContentChange:h,scrollbarX:m,onScrollbarXChange:y,scrollbarXEnabled:j,onScrollbarXEnabledChange:S,scrollbarY:g,onScrollbarYChange:p,scrollbarYEnabled:C,onScrollbarYEnabledChange:k,onCornerWidthChange:x,onCornerHeightChange:_,children:s.jsx(Ve.div,{dir:A,...o,ref:N,style:{position:"relative","--radix-scroll-area-corner-width":v+"px","--radix-scroll-area-corner-height":b+"px",...e.style}})})});h8.displayName=hk;var m8="ScrollAreaViewport",p8=w.forwardRef((e,t)=>{const{__scopeScrollArea:r,children:n,nonce:a,...i}=e,o=Za(m8,r),l=w.useRef(null),c=dt(t,l,o.onViewportChange);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),s.jsx(Ve.div,{"data-radix-scroll-area-viewport":"",...i,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:s.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});p8.displayName=m8;var ss="ScrollAreaScrollbar",mk=w.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=Za(ss,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=a,l=e.orientation==="horizontal";return w.useEffect(()=>(l?i(!0):o(!0),()=>{l?i(!1):o(!1)}),[l,i,o]),a.type==="hover"?s.jsx(dOe,{...n,ref:t,forceMount:r}):a.type==="scroll"?s.jsx(fOe,{...n,ref:t,forceMount:r}):a.type==="auto"?s.jsx(g8,{...n,ref:t,forceMount:r}):a.type==="always"?s.jsx(pk,{...n,ref:t}):null});mk.displayName=ss;var dOe=w.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=Za(ss,e.__scopeScrollArea),[i,o]=w.useState(!1);return w.useEffect(()=>{const l=a.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),o(!0)},d=()=>{c=window.setTimeout(()=>o(!1),a.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",d)}}},[a.scrollArea,a.scrollHideDelay]),s.jsx(oa,{present:r||i,children:s.jsx(g8,{"data-state":i?"visible":"hidden",...n,ref:t})})}),fOe=w.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=Za(ss,e.__scopeScrollArea),i=e.orientation==="horizontal",o=Q0(()=>c("SCROLL_END"),100),[l,c]=cOe("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return w.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,a.scrollHideDelay,c]),w.useEffect(()=>{const u=a.viewport,d=i?"scrollLeft":"scrollTop";if(u){let f=u[d];const h=()=>{const m=u[d];f!==m&&(c("SCROLL"),o()),f=m};return u.addEventListener("scroll",h),()=>u.removeEventListener("scroll",h)}},[a.viewport,i,c,o]),s.jsx(oa,{present:r||l!=="hidden",children:s.jsx(pk,{"data-state":l==="hidden"?"hidden":"visible",...n,ref:t,onPointerEnter:Oe(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:Oe(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),g8=w.forwardRef((e,t)=>{const r=Za(ss,e.__scopeScrollArea),{forceMount:n,...a}=e,[i,o]=w.useState(!1),l=e.orientation==="horizontal",c=Q0(()=>{if(r.viewport){const u=r.viewport.offsetWidth<r.viewport.scrollWidth,d=r.viewport.offsetHeight<r.viewport.scrollHeight;o(l?u:d)}},10);return Td(r.viewport,c),Td(r.content,c),s.jsx(oa,{present:n||i,children:s.jsx(pk,{"data-state":i?"visible":"hidden",...a,ref:t})})}),pk=w.forwardRef((e,t)=>{const{orientation:r="vertical",...n}=e,a=Za(ss,e.__scopeScrollArea),i=w.useRef(null),o=w.useRef(0),[l,c]=w.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=w8(l.viewport,l.content),d={...n,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:h=>i.current=h,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:h=>o.current=h};function f(h,m){return yOe(h,o.current,l,m)}return r==="horizontal"?s.jsx(hOe,{...d,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const h=a.viewport.scrollLeft,m=KR(h,l,a.dir);i.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:h=>{a.viewport&&(a.viewport.scrollLeft=h)},onDragScroll:h=>{a.viewport&&(a.viewport.scrollLeft=f(h,a.dir))}}):r==="vertical"?s.jsx(mOe,{...d,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const h=a.viewport.scrollTop,m=KR(h,l);i.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:h=>{a.viewport&&(a.viewport.scrollTop=h)},onDragScroll:h=>{a.viewport&&(a.viewport.scrollTop=f(h))}}):null}),hOe=w.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...a}=e,i=Za(ss,e.__scopeScrollArea),[o,l]=w.useState(),c=w.useRef(null),u=dt(t,c,i.onScrollbarXChange);return w.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),s.jsx(y8,{"data-orientation":"horizontal",...a,ref:u,sizes:r,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Z0(r)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.x),onDragScroll:d=>e.onDragScroll(d.x),onWheelScroll:(d,f)=>{if(i.viewport){const h=i.viewport.scrollLeft+d.deltaX;e.onWheelScroll(h),_8(h,f)&&d.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&n({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Qy(o.paddingLeft),paddingEnd:Qy(o.paddingRight)}})}})}),mOe=w.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...a}=e,i=Za(ss,e.__scopeScrollArea),[o,l]=w.useState(),c=w.useRef(null),u=dt(t,c,i.onScrollbarYChange);return w.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),s.jsx(y8,{"data-orientation":"vertical",...a,ref:u,sizes:r,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Z0(r)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.y),onDragScroll:d=>e.onDragScroll(d.y),onWheelScroll:(d,f)=>{if(i.viewport){const h=i.viewport.scrollTop+d.deltaY;e.onWheelScroll(h),_8(h,f)&&d.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&n({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Qy(o.paddingTop),paddingEnd:Qy(o.paddingBottom)}})}})}),[pOe,v8]=f8(ss),y8=w.forwardRef((e,t)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:a,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:d,onResize:f,...h}=e,m=Za(ss,r),[y,g]=w.useState(null),p=dt(t,N=>g(N)),v=w.useRef(null),x=w.useRef(""),b=m.viewport,_=n.content-n.viewport,j=tn(d),S=tn(c),C=Q0(f,10);function k(N){if(v.current){const A=N.clientX-v.current.left,O=N.clientY-v.current.top;u({x:A,y:O})}}return w.useEffect(()=>{const N=A=>{const O=A.target;(y==null?void 0:y.contains(O))&&j(A,_)};return document.addEventListener("wheel",N,{passive:!1}),()=>document.removeEventListener("wheel",N,{passive:!1})},[b,y,_,j]),w.useEffect(S,[n,S]),Td(y,C),Td(m.content,C),s.jsx(pOe,{scope:r,scrollbar:y,hasThumb:a,onThumbChange:tn(i),onThumbPointerUp:tn(o),onThumbPositionChange:S,onThumbPointerDown:tn(l),children:s.jsx(Ve.div,{...h,ref:p,style:{position:"absolute",...h.style},onPointerDown:Oe(e.onPointerDown,N=>{N.button===0&&(N.target.setPointerCapture(N.pointerId),v.current=y.getBoundingClientRect(),x.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),k(N))}),onPointerMove:Oe(e.onPointerMove,k),onPointerUp:Oe(e.onPointerUp,N=>{const A=N.target;A.hasPointerCapture(N.pointerId)&&A.releasePointerCapture(N.pointerId),document.body.style.webkitUserSelect=x.current,m.viewport&&(m.viewport.style.scrollBehavior=""),v.current=null})})})}),Zy="ScrollAreaThumb",x8=w.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=v8(Zy,e.__scopeScrollArea);return s.jsx(oa,{present:r||a.hasThumb,children:s.jsx(gOe,{ref:t,...n})})}),gOe=w.forwardRef((e,t)=>{const{__scopeScrollArea:r,style:n,...a}=e,i=Za(Zy,r),o=v8(Zy,r),{onThumbPositionChange:l}=o,c=dt(t,f=>o.onThumbChange(f)),u=w.useRef(void 0),d=Q0(()=>{u.current&&(u.current(),u.current=void 0)},100);return w.useEffect(()=>{const f=i.viewport;if(f){const h=()=>{if(d(),!u.current){const m=xOe(f,l);u.current=m,l()}};return l(),f.addEventListener("scroll",h),()=>f.removeEventListener("scroll",h)}},[i.viewport,d,l]),s.jsx(Ve.div,{"data-state":o.hasThumb?"visible":"hidden",...a,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:Oe(e.onPointerDownCapture,f=>{const m=f.target.getBoundingClientRect(),y=f.clientX-m.left,g=f.clientY-m.top;o.onThumbPointerDown({x:y,y:g})}),onPointerUp:Oe(e.onPointerUp,o.onThumbPointerUp)})});x8.displayName=Zy;var gk="ScrollAreaCorner",b8=w.forwardRef((e,t)=>{const r=Za(gk,e.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?s.jsx(vOe,{...e,ref:t}):null});b8.displayName=gk;var vOe=w.forwardRef((e,t)=>{const{__scopeScrollArea:r,...n}=e,a=Za(gk,r),[i,o]=w.useState(0),[l,c]=w.useState(0),u=!!(i&&l);return Td(a.scrollbarX,()=>{var f;const d=((f=a.scrollbarX)==null?void 0:f.offsetHeight)||0;a.onCornerHeightChange(d),c(d)}),Td(a.scrollbarY,()=>{var f;const d=((f=a.scrollbarY)==null?void 0:f.offsetWidth)||0;a.onCornerWidthChange(d),o(d)}),u?s.jsx(Ve.div,{...n,ref:t,style:{width:i,height:l,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Qy(e){return e?parseInt(e,10):0}function w8(e,t){const r=e/t;return isNaN(r)?0:r}function Z0(e){const t=w8(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,n=(e.scrollbar.size-r)*t;return Math.max(n,18)}function yOe(e,t,r,n="ltr"){const a=Z0(r),i=a/2,o=t||i,l=a-o,c=r.scrollbar.paddingStart+o,u=r.scrollbar.size-r.scrollbar.paddingEnd-l,d=r.content-r.viewport,f=n==="ltr"?[0,d]:[d*-1,0];return j8([c,u],f)(e)}function KR(e,t,r="ltr"){const n=Z0(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-a,o=t.content-t.viewport,l=i-n,c=r==="ltr"?[0,o]:[o*-1,0],u=Qh(e,c);return j8([0,o],[0,l])(u)}function j8(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function _8(e,t){return e>0&&e<t}var xOe=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},n=0;return function a(){const i={left:e.scrollLeft,top:e.scrollTop},o=r.left!==i.left,l=r.top!==i.top;(o||l)&&t(),r=i,n=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(n)};function Q0(e,t){const r=tn(e),n=w.useRef(0);return w.useEffect(()=>()=>window.clearTimeout(n.current),[]),w.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,t)},[r,t])}function Td(e,t){const r=tn(t);hn(()=>{let n=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return a.observe(e),()=>{window.cancelAnimationFrame(n),a.unobserve(e)}}},[e,r])}var S8=h8,bOe=p8,wOe=b8;const C8=w.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(S8,{ref:n,className:ue("relative overflow-hidden",e),...r,children:[s.jsx(bOe,{className:"h-full w-full rounded-[inherit]",children:t}),s.jsx(N8,{}),s.jsx(wOe,{})]}));C8.displayName=S8.displayName;const N8=w.forwardRef(({className:e,orientation:t="vertical",...r},n)=>s.jsx(mk,{ref:n,orientation:t,className:ue("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:s.jsx(x8,{className:"relative flex-1 rounded-full bg-border"})}));N8.displayName=mk.displayName;function jOe({open:e,onOpenChange:t,rowLabel:r,rowBlocks:n,notes:a,colors:i,monthLabels:o,onOpenBlockNote:l}){const c=d=>i.find(f=>f.id===d),u=[...n].sort((d,f)=>d.start_month-f.start_month);return s.jsx(mr,{open:e,onOpenChange:t,children:s.jsxs(ar,{className:"max-w-3xl max-h-[85vh]",children:[s.jsx(ir,{children:s.jsxs(sr,{className:"flex items-center gap-2",children:[s.jsx(Bo,{className:"h-5 w-5"}),"Notes  ",r]})}),s.jsx(C8,{className:"max-h-[65vh] pr-2",children:u.length===0?s.jsx("p",{className:"text-sm text-muted-foreground py-4",children:"Aucun bloc sur cette ligne."}):s.jsx("div",{className:"space-y-4",children:u.map(d=>{const f=c(d.color_id),h=a.find(p=>p.block_id===d.id),m=o[d.start_month-1]||`M${d.start_month}`,y=d.start_month+d.duration-1,g=o[y-1]||`M${y}`;return s.jsxs("div",{className:"border rounded-lg p-3 hover:bg-muted/30 cursor-pointer transition-colors",onClick:()=>{t(!1),l(d)},children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f&&s.jsx("div",{className:"w-3 h-3 rounded",style:{backgroundColor:f.color}}),s.jsx("span",{className:"font-medium text-sm",children:d.label||(f==null?void 0:f.name)||"Bloc"}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:[m,"  ",g]})]}),h?s.jsx("p",{className:"text-sm text-foreground whitespace-pre-wrap line-clamp-4",children:h.content}):s.jsx("p",{className:"text-xs text-muted-foreground italic",children:"Aucune note  cliquez pour en ajouter"}),h&&s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Mis  jour le ",new Date(h.updated_at).toLocaleDateString("fr-FR")]})]},d.id)})})})]})})}const k8=["Jan","Fv","Mar","Avr","Mai","Jun","Jul","Ao","Sep","Oct","Nov","Dc"];function _Oe(e,t){const r=[];for(let n=e;n<=t;n++)r.push({label:k8[(n-1)%12],globalIndex:n});return r}function P8(){const{colors:e,rows:t,blocks:r,loading:n,createColor:a,updateColor:i,deleteColor:o,createRow:l,updateRow:c,deleteRow:u,createBlock:d,updateBlock:f,deleteBlock:h}=d8(),{notes:m,getNotesForBlock:y,getNotesForBlocks:g,upsertNote:p}=oOe(),[v,x]=w.useState(1),[b,_]=w.useState(12),[j,S]=w.useState(""),[C,k]=w.useState(null),[N,A]=w.useState(""),[O,E]=w.useState(!1),[R,P]=w.useState(""),[T,I]=w.useState("#3b82f6"),[M,D]=w.useState(null),[B,z]=w.useState(!1),[Z,J]=w.useState({row_id:"",start_month:1,duration:1,color_id:"",label:""}),[se,U]=w.useState(null),[q,G]=w.useState(null),[H,fe]=w.useState(!1),[L,Y]=w.useState(null),[V,Q]=w.useState(!1),[te,be]=w.useState(null),Re=w.useRef(null),We=_Oe(v,b),ge=We.length;We.map(me=>me.label);const ke=me=>e.find(ze=>ze.id===me),Xe=me=>{const ze=[...me].sort((xt,ht)=>xt.start_month-ht.start_month),it=[],Dt=[];for(const xt of ze){const ht=xt.start_month+xt.duration;let on=!1;for(let Yr=0;Yr<Dt.length;Yr++)if(xt.start_month>=Dt[Yr]){Dt[Yr]=ht,it.push({blockId:xt.id,lane:Yr}),on=!0;break}on||(it.push({blockId:xt.id,lane:Dt.length}),Dt.push(ht))}return{lanes:it,maxLane:Dt.length}},F=()=>{j.trim()&&(l(j.trim()),S(""))},ee=me=>{N.trim()&&c(me,N.trim()),k(null)},oe=(me,ze)=>{var it;J({row_id:me,start_month:ze,duration:1,color_id:((it=e[0])==null?void 0:it.id)||"",label:""}),U(null),z(!0)},K=me=>{J({row_id:me.row_id,start_month:me.start_month,duration:me.duration,color_id:me.color_id||"",label:me.label}),U(me.id),z(!0)},ie=()=>{const{row_id:me,start_month:ze,duration:it,color_id:Dt,label:xt}=Z,ht=Dt||null;se?f(se,{row_id:me,start_month:ze,duration:it,color_id:ht,label:xt}):d(me,ze,it,ht,xt),z(!1)},ve=()=>{R.trim()&&(M?i(M,{name:R.trim(),color:T}):a(R.trim(),T),P(""),I("#3b82f6"),D(null),E(!1))},de=me=>{D(me.id),P(me.name),I(me.color),E(!0)},Me=me=>{G(me),fe(!0)},Ze=(me,ze)=>{me.preventDefault();const it=Re.current;if(!it)return;const Dt=it.getBoundingClientRect(),xt=Dt.width/ge,ht=Math.floor((me.clientX-Dt.left)/xt)+v;be({blockId:ze.id,offsetMonth:ht-ze.start_month})},ft=w.useCallback(me=>{if(!te||!Re.current)return;const ze=Re.current.getBoundingClientRect(),it=ze.width/ge;let xt=Math.floor((me.clientX-ze.left)/it)+v-te.offsetMonth;const ht=r.find(on=>on.id===te.blockId);ht&&(xt=Math.max(1,Math.min(xt,36-ht.duration)),xt!==ht.start_month&&f(te.blockId,{start_month:xt}))},[te,r,f,ge,v]),Ge=w.useCallback(()=>{be(null)},[]);if(n)return s.jsx("div",{className:"text-muted-foreground text-center py-8",children:"Chargement"});const yt=Array.from({length:36},(me,ze)=>{const it=ze+1,Dt=Math.floor(ze/12)+1,xt=`${k8[ze%12]} (A${Dt})`;return{value:it,label:xt}});return s.jsxs("div",{className:"space-y-4",children:[s.jsxs(St,{children:[s.jsx(er,{className:"pb-2",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(tr,{className:"text-sm font-medium",children:"Lgende des couleurs"}),s.jsxs(ne,{size:"sm",variant:"outline",className:"h-7 text-xs",onClick:()=>{D(null),P(""),I("#3b82f6"),E(!0)},children:[s.jsx(qt,{className:"h-3 w-3 mr-1"})," Ajouter"]})]})}),s.jsx(Rt,{children:e.length===0?s.jsx("p",{className:"text-xs text-muted-foreground",children:"Ajoutez des couleurs pour catgoriser vos blocs."}):s.jsx("div",{className:"flex flex-wrap gap-3",children:e.map(me=>s.jsxs("div",{className:"flex items-center gap-2 group",children:[s.jsx("div",{className:"w-5 h-5 rounded border",style:{backgroundColor:me.color}}),s.jsx("span",{className:"text-sm",children:me.name}),s.jsx(ne,{variant:"ghost",size:"icon",className:"h-5 w-5 opacity-0 group-hover:opacity-100",onClick:()=>de(me),children:s.jsx(mv,{className:"h-3 w-3"})}),s.jsx(ne,{variant:"ghost",size:"icon",className:"h-5 w-5 opacity-0 group-hover:opacity-100 text-destructive",onClick:()=>o(me.id),children:s.jsx(_i,{className:"h-3 w-3"})})]},me.id))})})]}),s.jsxs(St,{children:[s.jsx(er,{className:"pb-2",children:s.jsxs("div",{className:"flex flex-col gap-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(tr,{className:"text-sm font-medium",children:"Planning dveloppement produits"}),s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsx(xe,{placeholder:"Nouveau produit",value:j,onChange:me=>S(me.target.value),onKeyDown:me=>me.key==="Enter"&&F(),className:"h-7 text-xs w-48"}),s.jsxs(ne,{size:"sm",variant:"outline",className:"h-7 text-xs",onClick:F,disabled:!j.trim(),children:[s.jsx(qt,{className:"h-3 w-3 mr-1"})," Ligne"]})]})]}),s.jsxs("div",{className:"flex gap-4 items-center",children:[s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsx(Ne,{className:"text-xs whitespace-nowrap",children:"Dbut :"}),s.jsxs(lt,{value:String(v),onValueChange:me=>{const ze=Number(me);x(ze),ze>b&&_(ze)},children:[s.jsx(st,{className:"h-7 text-xs w-32",children:s.jsx(ct,{})}),s.jsx(ot,{children:yt.map(me=>s.jsx(De,{value:String(me.value),children:me.label},me.value))})]})]}),s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsx(Ne,{className:"text-xs whitespace-nowrap",children:"Fin :"}),s.jsxs(lt,{value:String(b),onValueChange:me=>{const ze=Number(me);_(ze),ze<v&&x(ze)},children:[s.jsx(st,{className:"h-7 text-xs w-32",children:s.jsx(ct,{})}),s.jsx(ot,{children:yt.filter(me=>me.value>=v).map(me=>s.jsx(De,{value:String(me.value),children:me.label},me.value))})]})]}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:[ge," mois affichs"]})]})]})}),s.jsx(Rt,{className:"overflow-x-auto p-0",children:s.jsxs("div",{className:"min-w-[900px]",onMouseMove:ft,onMouseUp:Ge,onMouseLeave:Ge,children:[s.jsxs("div",{className:"border-b bg-muted/50",style:{display:"grid",gridTemplateColumns:`200px repeat(${ge}, 1fr)`},children:[s.jsx("div",{className:"px-3 py-2 text-xs font-semibold border-r",children:"Produit"}),We.map((me,ze)=>s.jsx("div",{className:"px-1 py-2 text-xs font-semibold text-center border-r last:border-r-0",children:me.label},ze))]}),t.length===0&&s.jsx("div",{className:"text-center py-8 text-sm text-muted-foreground",children:"Ajoutez des lignes produit pour commencer le planning"}),t.map(me=>{const ze=r.filter(ht=>ht.row_id===me.id),{lanes:it,maxLane:Dt}=Xe(ze),xt=Math.max(44,Dt*32+12);return s.jsxs("div",{className:"border-b group/row hover:bg-muted/20",style:{display:"grid",gridTemplateColumns:`200px repeat(${ge}, 1fr)`,minHeight:xt},children:[s.jsx("div",{className:"px-3 py-2 text-sm border-r flex items-center gap-1",style:{minHeight:xt},children:C===me.id?s.jsx(xe,{value:N,onChange:ht=>A(ht.target.value),onBlur:()=>ee(me.id),onKeyDown:ht=>ht.key==="Enter"&&ee(me.id),autoFocus:!0,className:"h-6 text-xs"}):s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"truncate flex-1 font-medium",children:me.label}),s.jsx(ne,{variant:"ghost",size:"icon",className:"h-5 w-5 opacity-0 group-hover/row:opacity-100 shrink-0",onClick:()=>{Y({id:me.id,label:me.label}),Q(!0)},title:"Voir toutes les notes",children:s.jsx(Bo,{className:"h-3 w-3"})}),s.jsx(ne,{variant:"ghost",size:"icon",className:"h-5 w-5 opacity-0 group-hover/row:opacity-100 shrink-0",onClick:()=>{k(me.id),A(me.label)},children:s.jsx(mv,{className:"h-3 w-3"})}),s.jsx(ne,{variant:"ghost",size:"icon",className:"h-5 w-5 opacity-0 group-hover/row:opacity-100 shrink-0 text-destructive",onClick:()=>{confirm("Supprimer cette ligne ?")&&u(me.id)},children:s.jsx(nr,{className:"h-3 w-3"})})]})}),s.jsxs("div",{className:"relative",style:{gridColumn:`2 / ${ge+2}`,minHeight:xt},ref:Re,children:[s.jsx("div",{className:"absolute inset-0",style:{display:"grid",gridTemplateColumns:`repeat(${ge}, 1fr)`},children:We.map((ht,on)=>s.jsx("div",{className:"border-r last:border-r-0 cursor-pointer hover:bg-primary/5",onDoubleClick:()=>oe(me.id,ht.globalIndex)},on))}),ze.map(ht=>{const on=ht.start_month+ht.duration;if(on<=v||ht.start_month>b)return null;const Yr=ke(ht.color_id),Sn=(Yr==null?void 0:Yr.color)||"#94a3b8",ll=Math.max(ht.start_month,v),Hs=Math.min(on,b+1),ka=`${(ll-v)/ge*100}%`,mf=`${(Hs-ll)/ge*100}%`,rt=it.find(pn=>pn.blockId===ht.id),Zt=4+((rt==null?void 0:rt.lane)||0)*32,Cn=y(ht.id),Dn=Cn.length>0&&Cn[0].content.trim()!=="";return s.jsxs("div",{className:"absolute rounded-md flex items-center justify-center text-xs font-medium text-white shadow-sm select-none",style:{left:ka,width:mf,backgroundColor:Sn,top:Zt,height:28,cursor:te?"grabbing":"grab",zIndex:(te==null?void 0:te.blockId)===ht.id?10:1},onMouseDown:pn=>Ze(pn,ht),onDoubleClick:()=>K(ht),onClick:pn=>{te||(pn.stopPropagation(),Me(ht))},title:"Clic pour notes, double-clic pour modifier, glisser pour dplacer",children:[s.jsx("span",{className:"truncate px-1 drop-shadow-sm",children:ht.label||(Yr==null?void 0:Yr.name)||""}),Dn&&s.jsx(MH,{className:"h-3 w-3 ml-0.5 shrink-0 opacity-80"})]},ht.id)})]})]},me.id)})]})})]}),s.jsx(mr,{open:O,onOpenChange:E,children:s.jsxs(ar,{className:"max-w-sm",children:[s.jsx(ir,{children:s.jsx(sr,{children:M?"Modifier la couleur":"Nouvelle couleur"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Ne,{children:"Nom / Dfinition"}),s.jsx(xe,{value:R,onChange:me=>P(me.target.value),placeholder:"Ex: Sortie publique valide"})]}),s.jsxs("div",{children:[s.jsx(Ne,{children:"Couleur"}),s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsx("input",{type:"color",value:T,onChange:me=>I(me.target.value),className:"h-9 w-12 rounded border cursor-pointer"}),s.jsx(xe,{value:T,onChange:me=>I(me.target.value),className:"w-28 text-sm"})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ne,{onClick:ve,disabled:!R.trim(),className:"flex-1",children:M?"Mettre  jour":"Crer"}),M&&s.jsx(ne,{variant:"destructive",onClick:()=>{o(M),E(!1)},children:"Supprimer"})]})]})]})}),s.jsx(mr,{open:B,onOpenChange:z,children:s.jsxs(ar,{className:"max-w-sm",children:[s.jsx(ir,{children:s.jsx(sr,{children:se?"Modifier le bloc":"Nouveau bloc"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Ne,{children:"Label"}),s.jsx(xe,{value:Z.label,onChange:me=>J(ze=>({...ze,label:me.target.value})),placeholder:"Ex: Prototype"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx(Ne,{children:"Mois de dbut"}),s.jsxs(lt,{value:String(Z.start_month),onValueChange:me=>J(ze=>({...ze,start_month:Number(me)})),children:[s.jsx(st,{children:s.jsx(ct,{})}),s.jsx(ot,{children:yt.map(me=>s.jsx(De,{value:String(me.value),children:me.label},me.value))})]})]}),s.jsxs("div",{children:[s.jsx(Ne,{children:"Dure (mois)"}),s.jsxs(lt,{value:String(Z.duration),onValueChange:me=>J(ze=>({...ze,duration:Number(me)})),children:[s.jsx(st,{children:s.jsx(ct,{})}),s.jsx(ot,{children:Array.from({length:24},(me,ze)=>ze+1).map(me=>s.jsxs(De,{value:String(me),children:[me," mois"]},me))})]})]})]}),s.jsxs("div",{children:[s.jsx(Ne,{children:"Couleur"}),s.jsxs(lt,{value:Z.color_id||"none",onValueChange:me=>J(ze=>({...ze,color_id:me==="none"?"":me})),children:[s.jsx(st,{children:s.jsx(ct,{})}),s.jsxs(ot,{children:[s.jsx(De,{value:"none",children:"Sans couleur"}),e.map(me=>s.jsx(De,{value:me.id,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 rounded",style:{backgroundColor:me.color}}),me.name]})},me.id))]})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ne,{onClick:ie,className:"flex-1",children:se?"Mettre  jour":"Crer"}),se&&s.jsx(ne,{variant:"destructive",onClick:()=>{h(se),z(!1)},children:"Supprimer"})]})]})]})}),s.jsx(lOe,{open:H,onOpenChange:fe,block:q,color:q?ke(q.color_id):void 0,existingNote:q?y(q.id)[0]:void 0,onSave:p,monthLabels:yt.map(me=>me.label)}),L&&s.jsx(jOe,{open:V,onOpenChange:Q,rowLabel:L.label,rowBlocks:r.filter(me=>me.row_id===L.id),notes:g(r.filter(me=>me.row_id===L.id).map(me=>me.id)),colors:e,monthLabels:yt.map(me=>me.label),onOpenBlockNote:Me})]})}function SOe(){const e=fk(),[t,r]=w.useState(null),[n,a]=w.useState(null),[i,o]=w.useState("references");return e.loading?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx(Ba,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):s.jsx(is,{tabKey:"costflow",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"page-title",children:"CostFlow  Production & Bureau d'tudes"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Gestion des rfrences, nomenclatures et calcul des cots de revient"})]}),s.jsxs(Ya,{value:i,onValueChange:o,className:"space-y-4",children:[s.jsxs(Na,{children:[s.jsx(Ct,{value:"references",children:" Rfrences"}),s.jsx(Ct,{value:"products",children:" Produits"}),s.jsx(Ct,{value:"suppliers",children:" Fournisseurs"}),s.jsx(Ct,{value:"costs",children:" Cots & Export"}),s.jsx(Ct,{value:"meetings",children:" Runions BE"}),s.jsx(Ct,{value:"planning",children:" Planning Dev"})]}),s.jsx(Mt,{value:"references",children:t?s.jsx(YEe,{reference:t,files:e.referenceFiles,onUploadFile:e.uploadFile,onDeleteFile:e.deleteFile,onGetSignedUrl:e.getSignedUrl,onBack:()=>r(null)}):s.jsx(KEe,{references:e.references,suppliers:e.suppliers,onCreateReference:e.createReference,onUpdateReference:e.updateReference,onDeleteReference:e.deleteReference,onBulkImport:e.bulkCreateReferences,onSelectReference:r})}),s.jsx(Mt,{value:"products",children:n?s.jsx(e2e,{product:n,references:e.references,bom:e.bom,onAddBomEntry:e.addBomEntry,onUpdateBomEntry:e.updateBomEntry,onRemoveBomEntry:e.removeBomEntry,calculateProductCosts:e.calculateProductCosts,onBack:()=>a(null)}):s.jsxs("div",{className:"space-y-6",children:[s.jsx(JEe,{products:e.products,references:e.references,categories:e.productCategories,onCreateProduct:e.createProduct,onUpdateProduct:e.updateProduct,onDeleteProduct:e.deleteProduct,onSelectProduct:a,onImportProduct:e.createProductWithBom,calculateProductCosts:e.calculateProductCosts}),s.jsx(t2e,{categories:e.productCategories,onCreateCategory:e.createProductCategory,onUpdateCategory:e.updateProductCategory,onDeleteCategory:e.deleteProductCategory})]})}),s.jsx(Mt,{value:"suppliers",children:s.jsx(n2e,{suppliers:e.suppliers,onCreateSupplier:e.createSupplier,onUpdateSupplier:e.updateSupplier,onDeleteSupplier:e.deleteSupplier})}),s.jsx(Mt,{value:"costs",children:s.jsx(r2e,{products:e.products,references:e.references,bom:e.bom,calculateProductCosts:e.calculateProductCosts})}),s.jsx(Mt,{value:"meetings",children:s.jsx(sOe,{})}),s.jsx(Mt,{value:"planning",children:s.jsx(P8,{})})]})]})})}function COe(){const{user:e,userRole:t}=Xn(),[r,n]=w.useState([]),[a,i]=w.useState([]),[o,l]=w.useState(!0),c=t==="admin"||t==="finance",u=w.useCallback(async()=>{if(e){l(!0);try{const[p,v]=await Promise.all([he.from("timetracking_categories").select("*").order("name"),he.from("timetracking_entries").select("*").eq("user_id",e.id).order("date",{ascending:!1})]);p.data&&n(p.data.map(x=>({id:x.id,name:x.name,color:x.color||"#6366f1",created_at:x.created_at}))),v.data&&i(v.data.map(x=>({id:x.id,user_id:x.user_id,date:x.date,category_id:x.category_id,task_description:x.task_description,duration_minutes:x.duration_minutes||0,comments:x.comments||"",created_at:x.created_at,updated_at:x.updated_at})))}catch(p){console.error("TimeTracking fetch error:",p)}finally{l(!1)}}},[e]);return w.useEffect(()=>{u()},[u]),{categories:r,entries:a,loading:o,canManageCategories:c,createCategory:async(p,v)=>{if(!e)return;const{error:x}=await he.from("timetracking_categories").insert({user_id:e.id,name:p,color:v});x?(Ee.error("Erreur cration catgorie"),console.error(x)):(Ee.success("Catgorie cre"),u())},updateCategory:async(p,v)=>{const{error:x}=await he.from("timetracking_categories").update(v).eq("id",p);x?(Ee.error("Erreur mise  jour catgorie"),console.error(x)):(Ee.success("Catgorie mise  jour"),u())},deleteCategory:async p=>{const{error:v}=await he.from("timetracking_categories").delete().eq("id",p);v?(Ee.error("Erreur suppression catgorie"),console.error(v)):(Ee.success("Catgorie supprime"),u())},createEntry:async p=>{if(!e)return;const{error:v}=await he.from("timetracking_entries").insert({user_id:e.id,date:p.date,category_id:p.category_id||null,task_description:p.task_description,duration_minutes:p.duration_minutes||0,comments:p.comments||""});v?(Ee.error("Erreur cration entre"),console.error(v)):(Ee.success("Temps enregistr"),u())},updateEntry:async(p,v)=>{const{error:x}=await he.from("timetracking_entries").update(v).eq("id",p);x?(Ee.error("Erreur mise  jour"),console.error(x)):u()},deleteEntry:async p=>{const{error:v}=await he.from("timetracking_entries").delete().eq("id",p);v?(Ee.error("Erreur suppression"),console.error(v)):u()},refresh:u}}function zw(e){const t=Math.floor(e/60),r=e%60;return t===0?`${r}min`:r===0?`${t}h`:`${t}h${r.toString().padStart(2,"0")}`}function NOe({entries:e,categories:t,onCreateEntry:r,onUpdateEntry:n,onDeleteEntry:a}){const[i,o]=w.useState(()=>Od(new Date,{weekStartsOn:1})),[l,c]=w.useState(new Date),[u,d]=w.useState(!1),[f,h]=w.useState(null),[m,y]=w.useState({task_description:"",category_id:"",duration_hours:0,duration_minutes:0,comments:""}),g=p2e(i,{weekStartsOn:1}),p=h2e({start:i,end:g}),v=w.useMemo(()=>e.filter(k=>iS(mAe(k.date),l)),[e,l]),x=w.useMemo(()=>{const k={};return p.forEach(N=>{const A=si(N,"yyyy-MM-dd");k[A]=e.filter(O=>O.date===A).reduce((O,E)=>O+E.duration_minutes,0)}),k},[e,p]),b=v.reduce((k,N)=>k+N.duration_minutes,0),_=k=>t.find(N=>N.id===k),j=()=>{h(null),y({task_description:"",category_id:"",duration_hours:0,duration_minutes:0,comments:""}),d(!0)},S=k=>{h(k.id),y({task_description:k.task_description,category_id:k.category_id||"",duration_hours:Math.floor(k.duration_minutes/60),duration_minutes:k.duration_minutes%60,comments:k.comments}),d(!0)},C=async()=>{if(!m.task_description.trim())return;const k=m.duration_hours*60+m.duration_minutes,N={date:si(l,"yyyy-MM-dd"),task_description:m.task_description,category_id:m.category_id||null,duration_minutes:k,comments:m.comments};f?await n(f,N):await r(N),d(!1)};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(ne,{variant:"outline",size:"icon",onClick:()=>o(AAe(i,1)),children:s.jsx(uH,{className:"h-4 w-4"})}),s.jsxs("span",{className:"text-sm font-medium",children:["Semaine du ",si(i,"d MMMM",{locale:hu})," au ",si(g,"d MMMM yyyy",{locale:hu})]}),s.jsx(ne,{variant:"outline",size:"icon",onClick:()=>o(s8(i,1)),children:s.jsx(Vh,{className:"h-4 w-4"})})]}),s.jsx("div",{className:"grid grid-cols-7 gap-2",children:p.map(k=>{const N=si(k,"yyyy-MM-dd"),A=x[N]||0,O=iS(k,l);return s.jsxs("button",{onClick:()=>c(k),className:`p-3 rounded-lg border text-center transition-colors ${O?"bg-primary text-primary-foreground border-primary":hAe(k)?"border-primary/50 bg-primary/5":"border-border hover:bg-muted"}`,children:[s.jsx("div",{className:"text-xs font-medium",children:si(k,"EEE",{locale:hu})}),s.jsx("div",{className:"text-lg font-bold",children:si(k,"d")}),A>0&&s.jsx("div",{className:`text-xs mt-1 ${O?"text-primary-foreground/80":"text-muted-foreground"}`,children:zw(A)})]},N)})}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold",children:si(l,"EEEE d MMMM yyyy",{locale:hu})}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(iC,{className:"h-3.5 w-3.5"}),"Total : ",zw(b)]})]}),s.jsxs(ne,{onClick:j,children:[s.jsx(qt,{className:"h-4 w-4 mr-1"})," Ajouter une tche"]})]}),s.jsx("div",{className:"border rounded overflow-auto",children:s.jsxs(Kt,{children:[s.jsx(Gt,{children:s.jsxs(_e,{children:[s.jsx(ce,{children:"Catgorie"}),s.jsx(ce,{children:"Tche"}),s.jsx(ce,{className:"text-right",children:"Dure"}),s.jsx(ce,{children:"Commentaire"}),s.jsx(ce,{})]})}),s.jsxs(Yt,{children:[v.length===0&&s.jsx(_e,{children:s.jsx(W,{colSpan:5,className:"text-center text-muted-foreground py-8",children:'Aucune entre pour ce jour. Cliquez sur "Ajouter une tche".'})}),v.map(k=>{const N=_(k.category_id);return s.jsxs(_e,{children:[s.jsx(W,{children:N?s.jsxs(Pe,{variant:"outline",className:"gap-1.5",children:[s.jsx("div",{className:"w-2.5 h-2.5 rounded-full",style:{backgroundColor:N.color}}),N.name]}):s.jsx("span",{className:"text-muted-foreground",children:""})}),s.jsx(W,{className:"font-medium",children:k.task_description}),s.jsx(W,{className:"text-right font-mono-numbers",children:zw(k.duration_minutes)}),s.jsx(W,{className:"text-muted-foreground text-sm max-w-[200px] truncate",children:k.comments||""}),s.jsx(W,{children:s.jsxs("div",{className:"flex gap-1 justify-end",children:[s.jsx(ne,{variant:"ghost",size:"icon",onClick:()=>S(k),children:s.jsx(Ld,{className:"h-3 w-3"})}),s.jsx(ne,{variant:"ghost",size:"icon",onClick:()=>a(k.id),children:s.jsx(nr,{className:"h-3 w-3 text-destructive"})})]})})]},k.id)})]})]})}),s.jsx(mr,{open:u,onOpenChange:d,children:s.jsxs(ar,{className:"max-w-md",children:[s.jsx(ir,{children:s.jsx(sr,{children:f?"Modifier la tche":"Nouvelle tche"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Ne,{children:"Tche *"}),s.jsx(xe,{value:m.task_description,onChange:k=>y({...m,task_description:k.target.value}),placeholder:"Description de la tche..."})]}),s.jsxs("div",{children:[s.jsx(Ne,{children:"Catgorie"}),s.jsxs(lt,{value:m.category_id||"none",onValueChange:k=>y({...m,category_id:k==="none"?"":k}),children:[s.jsx(st,{children:s.jsx(ct,{placeholder:"Slectionner..."})}),s.jsxs(ot,{children:[s.jsx(De,{value:"none",children:"Aucune"}),t.map(k=>s.jsx(De,{value:k.id,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2.5 h-2.5 rounded-full",style:{backgroundColor:k.color}}),k.name]})},k.id))]})]})]}),s.jsxs("div",{children:[s.jsx(Ne,{children:"Dure"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(xe,{type:"number",min:0,max:23,className:"w-20 text-right",value:m.duration_hours,onChange:k=>y({...m,duration_hours:parseInt(k.target.value)||0})}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"h"}),s.jsx(xe,{type:"number",min:0,max:59,step:5,className:"w-20 text-right",value:m.duration_minutes,onChange:k=>y({...m,duration_minutes:parseInt(k.target.value)||0})}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"min"})]})]}),s.jsxs("div",{children:[s.jsx(Ne,{children:"Commentaire"}),s.jsx(qa,{value:m.comments,onChange:k=>y({...m,comments:k.target.value}),rows:2,placeholder:"Notes optionnelles..."})]})]}),s.jsx("div",{className:"flex justify-end mt-4",children:s.jsx(ne,{onClick:C,disabled:!m.task_description.trim(),children:f?"Mettre  jour":"Ajouter"})})]})})]})}const kOe=["#6366f1","#ef4444","#f59e0b","#10b981","#3b82f6","#8b5cf6","#ec4899","#14b8a6"];function POe({categories:e,onCreateCategory:t,onUpdateCategory:r,onDeleteCategory:n}){const[a,i]=w.useState(!1),[o,l]=w.useState(null),[c,u]=w.useState(""),[d,f]=w.useState("#6366f1"),h=()=>{l(null),u(""),f("#6366f1"),i(!0)},m=g=>{l(g.id),u(g.name),f(g.color),i(!0)},y=async()=>{c.trim()&&(o?await r(o,{name:c,color:d}):await t(c,d),i(!1))};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Les catgories permettent de classer les tches. Seuls les rles admin et finance peuvent les grer."}),s.jsxs(ne,{onClick:h,children:[s.jsx(qt,{className:"h-4 w-4 mr-1"})," Nouvelle catgorie"]})]}),s.jsx("div",{className:"border rounded overflow-auto",children:s.jsxs(Kt,{children:[s.jsx(Gt,{children:s.jsxs(_e,{children:[s.jsx(ce,{className:"w-12",children:"Couleur"}),s.jsx(ce,{children:"Nom"}),s.jsx(ce,{})]})}),s.jsxs(Yt,{children:[e.length===0&&s.jsx(_e,{children:s.jsx(W,{colSpan:3,className:"text-center text-muted-foreground py-8",children:"Aucune catgorie cre."})}),e.map(g=>s.jsxs(_e,{children:[s.jsx(W,{children:s.jsx("div",{className:"w-5 h-5 rounded-full",style:{backgroundColor:g.color}})}),s.jsx(W,{className:"font-medium",children:g.name}),s.jsx(W,{children:s.jsxs("div",{className:"flex gap-1 justify-end",children:[s.jsx(ne,{variant:"ghost",size:"icon",onClick:()=>m(g),children:s.jsx(Ld,{className:"h-3 w-3"})}),s.jsx(ne,{variant:"ghost",size:"icon",onClick:()=>n(g.id),children:s.jsx(nr,{className:"h-3 w-3 text-destructive"})})]})})]},g.id))]})]})}),s.jsx(mr,{open:a,onOpenChange:i,children:s.jsxs(ar,{className:"max-w-sm",children:[s.jsx(ir,{children:s.jsx(sr,{children:o?"Modifier la catgorie":"Nouvelle catgorie"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Ne,{children:"Nom *"}),s.jsx(xe,{value:c,onChange:g=>u(g.target.value),placeholder:"Ex: Dveloppement, Design..."})]}),s.jsxs("div",{children:[s.jsx(Ne,{children:"Couleur"}),s.jsx("div",{className:"flex gap-2 mt-2",children:kOe.map(g=>s.jsx("button",{className:`w-7 h-7 rounded-full border-2 transition-all ${d===g?"border-foreground scale-110":"border-transparent"}`,style:{backgroundColor:g},onClick:()=>f(g)},g))})]})]}),s.jsx("div",{className:"flex justify-end mt-4",children:s.jsx(ne,{onClick:y,disabled:!c.trim(),children:o?"Mettre  jour":"Crer"})})]})})]})}function EOe(){const e=COe();return e.loading?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx(Ba,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"page-title",children:"Suivi d'activit"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Enregistrez votre temps par jour et par tche"})]}),s.jsxs(Ya,{defaultValue:"entries",className:"space-y-4",children:[s.jsxs(Na,{children:[s.jsx(Ct,{value:"entries",children:" Mes entres"}),e.canManageCategories&&s.jsx(Ct,{value:"categories",children:" Catgories"})]}),s.jsx(Mt,{value:"entries",children:s.jsx(NOe,{entries:e.entries,categories:e.categories,onCreateEntry:e.createEntry,onUpdateEntry:e.updateEntry,onDeleteEntry:e.deleteEntry})}),e.canManageCategories&&s.jsx(Mt,{value:"categories",children:s.jsx(POe,{categories:e.categories,onCreateCategory:e.createCategory,onUpdateCategory:e.updateCategory,onDeleteCategory:e.deleteCategory})})]})]})}const GR="novaride_financial_state_v5";function AOe(){const{user:e,isAdmin:t,getTabPermission:r}=Xn(),[n,a]=w.useState([]),[i,o]=w.useState(!0),l=w.useCallback(()=>!!e,[e,t]),c=w.useCallback(async()=>{if(!e){o(!1);return}try{const{data:g}=await he.from("snapshots").select("*").order("created_at",{ascending:!1});g&&a(g.map(p=>({id:p.id,name:p.name,comment:p.comment,createdAt:p.created_at,stateData:JSON.stringify(p.state_data)})))}catch{}finally{o(!1)}},[e]);w.useEffect(()=>{c()},[c]);const u=w.useCallback(async(g,p)=>{if(!e)return!1;try{const v=localStorage.getItem(GR);if(!v)return!1;const{data:x,error:b}=await he.from("snapshots").insert({user_id:e.id,name:g,comment:p,state_data:JSON.parse(v)}).select().single();if(b||!x)return!1;const _=x;return a(j=>[{id:_.id,name:_.name,comment:_.comment,createdAt:_.created_at,stateData:JSON.stringify(_.state_data)},...j]),Lr({title:"Sauvegarde cre"}),!0}catch{return!1}},[e]),d=w.useCallback(g=>{const p=n.find(v=>v.id===g);return p?(localStorage.setItem(GR,p.stateData),Lr({title:"Restauration effectue"}),setTimeout(()=>window.location.reload(),500),!0):!1},[n]),f=w.useCallback(async g=>!1,[]),h=w.useCallback(async g=>e?(await he.from("snapshots").delete().eq("id",g),a(p=>p.filter(v=>v.id!==g)),!0):!1,[e]),m=w.useCallback(async(g,p)=>!1,[]),y=g=>new Date(g).toLocaleDateString("fr-FR",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"});return{snapshots:n,isLoading:i,canManageSnapshots:l(),createSnapshot:u,restoreSnapshot:d,duplicateSnapshot:f,deleteSnapshot:h,renameSnapshot:m,formatDate:y}}function OOe(){const{snapshots:e,isLoading:t,createSnapshot:r,restoreSnapshot:n,deleteSnapshot:a,formatDate:i}=AOe(),{getTabPermission:o,isAdmin:l}=Xn(),[c,u]=w.useState(""),[d,f]=w.useState(""),[h,m]=w.useState(!1),g=o("snapshots")==="write",p=async()=>{if(!c.trim()){Lr({title:"Nom requis",variant:"destructive"});return}m(!0),await r(c.trim(),d.trim()||void 0)&&(u(""),f("")),m(!1)};return t?s.jsx("div",{className:"flex items-center justify-center py-20",children:s.jsx(Ba,{className:"h-8 w-8 animate-spin text-primary"})}):s.jsx(is,{tabKey:"snapshots",children:s.jsxs("div",{className:"space-y-6",children:[s.jsx(Fs,{image:"rd",title:"Sauvegardes",subtitle:"Grez vos sauvegardes de scnarios financiers",height:"sm"}),g&&s.jsxs(St,{children:[s.jsxs(er,{children:[s.jsxs(tr,{className:"flex items-center gap-2",children:[s.jsx(qt,{className:"h-5 w-5"}),"Nouvelle sauvegarde"]}),s.jsx(_s,{children:"Sauvegardez l'tat actuel de vos donnes financires"})]}),s.jsx(Rt,{children:s.jsxs("div",{className:"grid md:grid-cols-3 gap-4 items-end",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ne,{children:"Nom"}),s.jsx(xe,{value:c,onChange:v=>u(v.target.value),placeholder:"Ex: Budget V2 valid"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ne,{children:"Commentaire (optionnel)"}),s.jsx(qa,{value:d,onChange:v=>f(v.target.value),placeholder:"Notes...",rows:1})]}),s.jsxs(ne,{onClick:p,disabled:h,children:[h?s.jsx(Ba,{className:"h-4 w-4 mr-2 animate-spin"}):s.jsx(yx,{className:"h-4 w-4 mr-2"}),"Sauvegarder"]})]})})]}),s.jsxs(St,{children:[s.jsxs(er,{children:[s.jsxs(tr,{className:"flex items-center gap-2",children:[s.jsx(tD,{className:"h-5 w-5"}),"Sauvegardes existantes"]}),s.jsxs(_s,{children:[e.length," sauvegarde",e.length!==1?"s":""]})]}),s.jsx(Rt,{children:e.length===0?s.jsx("p",{className:"text-center text-muted-foreground py-8",children:"Aucune sauvegarde pour le moment"}):s.jsx("div",{className:"space-y-3",children:e.map(v=>s.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border bg-card hover:bg-accent/5 transition-colors",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:v.name}),s.jsx(Pe,{variant:"outline",className:"text-xs",children:i(v.createdAt)})]}),v.comment&&s.jsx("p",{className:"text-sm text-muted-foreground",children:v.comment})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[g&&s.jsxs(Ly,{children:[s.jsx(nR,{asChild:!0,children:s.jsxs(ne,{variant:"outline",size:"sm",children:[s.jsx(sp,{className:"h-4 w-4 mr-1"}),"Charger"]})}),s.jsxs(zm,{children:[s.jsxs(Um,{children:[s.jsx(Wm,{children:"Restaurer cette sauvegarde ?"}),s.jsxs(Hm,{children:["Les donnes actuelles seront remplaces par  ",v.name," . Cette action rechargera la page."]})]}),s.jsxs(Vm,{children:[s.jsx(Km,{children:"Annuler"}),s.jsx(qm,{onClick:()=>n(v.id),children:"Restaurer"})]})]})]}),l&&s.jsxs(Ly,{children:[s.jsx(nR,{asChild:!0,children:s.jsx(ne,{variant:"ghost",size:"sm",className:"text-destructive hover:text-destructive",children:s.jsx(nr,{className:"h-4 w-4"})})}),s.jsxs(zm,{children:[s.jsxs(Um,{children:[s.jsxs(Wm,{children:["Supprimer  ",v.name,"  ?"]}),s.jsx(Hm,{children:"Cette action est irrversible."})]}),s.jsxs(Vm,{children:[s.jsx(Km,{children:"Annuler"}),s.jsx(qm,{onClick:()=>a(v.id),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Supprimer"})]})]})]})]})]},v.id))})})]})]})})}const Uw="hsl(var(--muted-foreground))";function E8({products:e,productCategories:t,salesRules:r,calculateProductCost:n,computeChainFromPublicTTC:a,getEffectivePrice:i,editedOurPrices:o,pricingMode:l}){var b;const[c,u]=w.useState("from_our_price"),[d,f]=w.useState(new Set([(b=r[0])==null?void 0:b.id].filter(Boolean))),[h,m]=w.useState(new Set(t.map(_=>_.id))),y=_=>{f(j=>{const S=new Set(j);return S.has(_)?S.delete(_):S.add(_),S})},g=_=>{m(j=>{const S=new Set(j);return S.has(_)?S.delete(_):S.add(_),S})},p=w.useMemo(()=>e.filter(_=>_.category_id?h.has(_.category_id):h.has("__uncategorized")),[e,h]),v=w.useMemo(()=>p.map(_=>{const j=n(_.id,_.default_volume||500),S=t.find(N=>N.id===_.category_id),C=(S==null?void 0:S.color)||Uw,k={name:_.name.length>15?_.name.slice(0,14)+"":_.name,fullName:_.name,costPrice:j,catColor:C,categoryName:(S==null?void 0:S.name)||"Sans catgorie"};for(const N of r){if(!d.has(N.id))continue;const A=i(_),O=a(A,N);let E=0;c==="from_public"?E=(O==null?void 0:O.ourB2BPrice)||0:E=o[_.id]!==void 0?o[_.id]:(O==null?void 0:O.ourB2BPrice)||0;const R=j>0?(E-j)/j*100:0;k[`margin_${N.id}`]=parseFloat(R.toFixed(1))}return k}),[p,d,r,n,i,a,o,c]),x=r.filter(_=>d.has(_.id));return s.jsxs(St,{children:[s.jsxs(er,{children:[s.jsx(tr,{className:"text-lg",children:"Analyse des marges par produit"}),s.jsx(_s,{children:"Comparez les marges selon les rgles de vente et catgories"})]}),s.jsxs(Rt,{className:"space-y-4",children:[s.jsxs("div",{className:"flex flex-wrap gap-6 items-start",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("span",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Rgles de vente"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:r.map(_=>s.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer",children:[s.jsx(za,{checked:d.has(_.id),onCheckedChange:()=>y(_.id)}),s.jsx("span",{className:"text-sm",children:_.name}),s.jsx(Pe,{variant:"outline",className:"text-[10px] px-1 py-0",children:_.type.toUpperCase()})]},_.id))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("span",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Catgories"}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.map(_=>s.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer",children:[s.jsx(za,{checked:h.has(_.id),onCheckedChange:()=>g(_.id)}),_.color&&s.jsx("div",{className:"h-2.5 w-2.5 rounded-full",style:{backgroundColor:_.color}}),s.jsx("span",{className:"text-sm",children:_.name})]},_.id)),e.some(_=>!_.category_id)&&s.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer",children:[s.jsx(za,{checked:h.has("__uncategorized"),onCheckedChange:()=>g("__uncategorized")}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"Sans catgorie"})]})]})]})]}),v.length>0&&x.length>0?s.jsx("div",{className:"h-80",children:s.jsx(wr,{width:"100%",height:"100%",children:s.jsxs(es,{data:v,margin:{top:10,right:10,left:0,bottom:40},children:[s.jsx(Nr,{strokeDasharray:"3 3",opacity:.3}),s.jsx(Jt,{dataKey:"name",tick:{fontSize:11},angle:-30,textAnchor:"end",height:60}),s.jsx(Vt,{tickFormatter:_=>`${_}%`,tick:{fontSize:11}}),s.jsx(Nt,{formatter:(_,j)=>{const S=r.find(C=>`margin_${C.id}`===j);return[`${_.toFixed(1)}%`,(S==null?void 0:S.name)||j]},labelFormatter:(_,j)=>{var C;const S=(C=j==null?void 0:j[0])==null?void 0:C.payload;return(S==null?void 0:S.fullName)||_}}),s.jsx(C0,{y:0,stroke:"hsl(var(--destructive))",strokeDasharray:"3 3",strokeWidth:1.5}),x.map(_=>s.jsx(Wt,{dataKey:`margin_${_.id}`,name:`margin_${_.id}`,fill:Uw,radius:[3,3,0,0],maxBarSize:40,children:v.map((j,S)=>{const C=j[`margin_${_.id}`]??0;return s.jsx(el,{fill:C<0?"hsl(var(--destructive))":j.catColor,fillOpacity:C<0?.8:1},S)})},_.id))]})})}):s.jsx("div",{className:"h-40 flex items-center justify-center text-muted-foreground text-sm",children:"Slectionnez au moins une rgle et une catgorie pour afficher le graphique."}),x.length>0&&s.jsxs("div",{className:"flex flex-wrap gap-4 justify-center text-xs",children:[t.filter(_=>h.has(_.id)).map(_=>s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("div",{className:"h-3 w-3 rounded-sm",style:{backgroundColor:_.color||Uw}}),s.jsx("span",{children:_.name})]},_.id)),s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("div",{className:"h-3 w-3 rounded-sm bg-destructive opacity-80"}),s.jsx("span",{children:"Marge ngative"})]})]})]})]})}const YR=20;function TOe(){var pn;const{products:e,productCategories:t,references:r,bom:n,calculateProductCost:a,updateProduct:i}=fk(),[o]=w.useState("from_our_price"),[l,c]=w.useState(1.3),[u,d]=w.useState(1.8),[f,h]=w.useState([{id:"default-b2b",name:"B2B Standard",type:"b2b",tvaRate:20,intermediaries:[{label:"Distributeur",coefficient:1.3},{label:"Shop",coefficient:1.8}]},{id:"default-oem",name:"OEM",type:"oem",tvaRate:0,intermediaries:[{label:"Partenaire OEM",coefficient:1.4}]}]),[m,y]=w.useState("default-b2b"),[g,p]=w.useState(new Set),[v,x]=w.useState(!1),[b,_]=w.useState(""),[j,S]=w.useState("b2b"),[C,k]=w.useState({}),[N,A]=w.useState({}),[O,E]=w.useState({}),[R,P]=w.useState({}),[T,I]=w.useState("none"),[M,D]=w.useState(new Set),[B,z]=w.useState(""),[Z,J]=w.useState(!1),[se,U]=w.useState(!1),[q,G]=w.useState(!1),[H,fe]=w.useState(null),[L,Y]=w.useState(""),[V,Q]=w.useState(null),te=f.find(X=>X.id===m)||f[0],be=()=>C[m]||{},Re=()=>N[m]||{},We=()=>O[m]||{},ge=()=>R[m]||{},ke=(X,le)=>{k(ae=>({...ae,[m]:{...ae[m]||{},[X]:le}}))},Xe=(X,le)=>{A(ae=>({...ae,[m]:{...ae[m]||{},[X]:le}})),P(ae=>{const $e={...ae[m]||{}};return delete $e[X],{...ae,[m]:$e}})},F=(X,le)=>{E(ae=>({...ae,[m]:{...ae[m]||{},[X]:le}})),P(ae=>{const $e={...ae[m]||{}};return delete $e[X],{...ae,[m]:$e}})},ee=()=>({pricingMode:o,distributorCoef:l,shopCoef:u,salesRules:f,activeRuleId:m,editedPrices:C,editedOurPrices:N,editedFinalPrices:O,editedProductCoefs:R});w.useEffect(()=>{(async()=>{var $e,_t,nt,Ft,Ar,Pt,Or,or,ln;const{data:{user:le}}=await he.auth.getUser();if(!le)return;const{data:ae}=await he.from("pricing_config").select("config_data").eq("user_id",le.id).maybeSingle();if(ae!=null&&ae.config_data){const Ie=ae.config_data;if(Ie.distributorCoef!==void 0&&c(Ie.distributorCoef),Ie.shopCoef!==void 0&&d(Ie.shopCoef),($e=Ie.salesRules)!=null&&$e.length&&h(Ie.salesRules),Ie.activeRuleId&&y(Ie.activeRuleId),Ie.editedPrices){const lr=Object.keys(Ie.editedPrices)[0];if(lr&&typeof Ie.editedPrices[lr]=="object"&&!Array.isArray(Ie.editedPrices[lr]))k(Ie.editedPrices);else if(lr&&typeof Ie.editedPrices[lr]=="number"){const Zn=Ie.activeRuleId||((nt=(_t=Ie.salesRules)==null?void 0:_t[0])==null?void 0:nt.id)||"default-b2b";k({[Zn]:Ie.editedPrices})}}if(Ie.editedOurPrices){const lr=Object.keys(Ie.editedOurPrices)[0];if(lr&&typeof Ie.editedOurPrices[lr]=="object"&&!Array.isArray(Ie.editedOurPrices[lr]))A(Ie.editedOurPrices);else if(lr&&typeof Ie.editedOurPrices[lr]=="number"){const Zn=Ie.activeRuleId||((Ar=(Ft=Ie.salesRules)==null?void 0:Ft[0])==null?void 0:Ar.id)||"default-b2b";A({[Zn]:Ie.editedOurPrices})}}if(Ie.editedFinalPrices){const lr=Object.keys(Ie.editedFinalPrices)[0];if(lr&&typeof Ie.editedFinalPrices[lr]=="object"&&!Array.isArray(Ie.editedFinalPrices[lr]))E(Ie.editedFinalPrices);else if(lr&&typeof Ie.editedFinalPrices[lr]=="number"){const Zn=Ie.activeRuleId||((Or=(Pt=Ie.salesRules)==null?void 0:Pt[0])==null?void 0:Or.id)||"default-b2b";E({[Zn]:Ie.editedFinalPrices})}}if(Ie.editedProductCoefs){const lr=Object.keys(Ie.editedProductCoefs)[0];if(lr&&Array.isArray(Ie.editedProductCoefs[lr])){const Zn=Ie.activeRuleId||((ln=(or=Ie.salesRules)==null?void 0:or[0])==null?void 0:ln.id)||"default-b2b";P({[Zn]:Ie.editedProductCoefs})}else P(Ie.editedProductCoefs)}}G(!0)})()},[]);const oe=async()=>{U(!0);try{const{data:{user:X}}=await he.auth.getUser();if(!X){Ee.error("Vous devez tre connect pour sauvegarder");return}const le=ee(),{error:ae}=await he.from("pricing_config").upsert({user_id:X.id,config_data:le},{onConflict:"user_id"});if(ae)throw ae;Ee.success("Configuration pricing sauvegarde")}catch(X){Ee.error(`Erreur: ${X.message}`)}finally{U(!1)}},K=()=>{h(X=>X.map(le=>{if(le.id!==m)return le;const ae=[...le.intermediaries];return ae.length>=1&&(ae[0]={...ae[0],coefficient:l}),ae.length>=2&&(ae[1]={...ae[1],coefficient:u}),{...le,intermediaries:ae}}))},ie=w.useMemo(()=>{const X={},le=[];for(const ae of e)ae.category_id?(X[ae.category_id]||(X[ae.category_id]=[]),X[ae.category_id].push(ae)):le.push(ae);return{grouped:X,uncategorized:le}},[e]),ve=X=>{p(le=>{const ae=new Set(le);return ae.has(X)?ae.delete(X):ae.add(X),ae})},de=X=>{const le=be();return le[X.id]!==void 0?le[X.id]:X.price_ttc},Me=(X,le)=>{const ae=le||te;if(!ae||X<=0)return null;const $e=(ae==null?void 0:ae.tvaRate)??YR,_t=X/(1+$e/100);let nt=_t;const Ft=[...ae.intermediaries].reverse();for(const or of Ft)nt=nt/or.coefficient;const Ar=nt,Pt=[];let Or=Ar;for(const or of ae.intermediaries){const ln=Or*or.coefficient,Ie=ln-Or,lr=Or>0?Ie/Or*100:0;Pt.push({label:or.label,buyPrice:Or,coef:or.coefficient,sellPrice:ln,margin:Ie,marginPct:lr}),Or=ln}return{chain:Pt,ourB2BPrice:Ar,prixPublicHT:_t,prixPublicTTC:X}},Ze=(X,le,ae)=>{if(!te||X<=0||le<=0)return null;const $e=(te==null?void 0:te.tvaRate)??YR,_t=le/(1+$e/100),nt=_t/X,Ft=te.intermediaries.length;if(nt<=0)return null;if(Ft===0)return{chain:[],ourB2BPrice:X,prixPublicHT:_t,prixPublicTTC:le,totalCoef:nt,coefs:[]};let Ar;if(ae&&ae.length===Ft)Ar=ae;else{const or=Math.pow(nt,1/Ft);Ar=Array(Ft).fill(or)}const Pt=[];let Or=X;for(let or=0;or<Ft;or++){const ln=Or*Ar[or],Ie=ln-Or,lr=Or>0?Ie/Or*100:0;Pt.push({label:te.intermediaries[or].label,buyPrice:Or,coef:Ar[or],sellPrice:ln,margin:Ie,marginPct:lr}),Or=ln}return{chain:Pt,ourB2BPrice:X,prixPublicHT:_t,prixPublicTTC:le,totalCoef:nt,coefs:Ar}},ft=(X,le,ae,$e)=>{if(((te==null?void 0:te.intermediaries.length)||1)<=1){P(Pt=>({...Pt,[m]:{...Pt[m]||{},[X]:[$e]}}));return}const nt=Math.max(1.01,Math.min(ae,$e/1.01)),Ft=$e/nt,Ar=le===0?[nt,Ft]:[Ft,nt];P(Pt=>({...Pt,[m]:{...Pt[m]||{},[X]:Ar}}))},Ge=w.useCallback(async(X,le)=>{await i(X,{price_ttc:le}),k(ae=>{const $e={...ae[m]||{}};return delete $e[X],{...ae,[m]:$e}}),E(ae=>{const $e={...ae[m]||{}};return delete $e[X],{...ae,[m]:$e}})},[i,m]),yt=async()=>{const X=parseFloat(B);if(isNaN(X)||X<0)return;const le=Array.from(M).map(ae=>i(ae,{price_ttc:X}));await Promise.all(le),Ee.success(`Prix ${X.toFixed(2)}  appliqu  ${M.size} produit(s)`),D(new Set),z(""),J(!1),k(ae=>({...ae,[m]:{}})),A(ae=>({...ae,[m]:{}})),E(ae=>({...ae,[m]:{}})),P(ae=>({...ae,[m]:{}}))},me=()=>{if(!H)return;const X=parseFloat(L);if(isNaN(X)||X<0)return;const le=H.catId==="__uncategorized"?ie.uncategorized:ie.grouped[H.catId]||[];H.field==="our_price"?A(ae=>{const $e={...ae[m]||{}};return le.forEach(_t=>{$e[_t.id]=X}),{...ae,[m]:$e}}):E(ae=>{const $e={...ae[m]||{}};return le.forEach(_t=>{$e[_t.id]=X}),{...ae,[m]:$e}}),Ee.success(`Prix appliqu  ${le.length} produit(s) de "${H.catName}"`),fe(null),Y("")},ze=X=>{D(le=>{const ae=new Set(le);return ae.has(X)?ae.delete(X):ae.add(X),ae})},it=X=>{const le=X==="__uncategorized"?ie.uncategorized:ie.grouped[X]||[],ae=le.every($e=>M.has($e.id));D($e=>{const _t=new Set($e);return le.forEach(nt=>{ae?_t.delete(nt.id):_t.add(nt.id)}),_t})},Dt=()=>{if(!b.trim())return;const X=j==="b2c"?[]:j==="oem"?[{label:"Partenaire OEM",coefficient:1.4}]:[{label:"Distributeur",coefficient:l},{label:"Shop",coefficient:u}],le={id:`rule-${Date.now()}`,name:b.trim(),type:j,tvaRate:20,intermediaries:X};h(ae=>[...ae,le]),y(le.id),x(!1),_("")},xt=()=>{var X;if(V){if(h(le=>le.filter(ae=>ae.id!==V)),k(le=>{const ae={...le};return delete ae[V],ae}),A(le=>{const ae={...le};return delete ae[V],ae}),E(le=>{const ae={...le};return delete ae[V],ae}),P(le=>{const ae={...le};return delete ae[V],ae}),m===V){const le=f.filter(ae=>ae.id!==V);y(((X=le[0])==null?void 0:X.id)||"")}Q(null),Ee.success("Rgle supprime")}},ht=(X,le,ae,$e)=>{h(_t=>_t.map(nt=>{if(nt.id!==X)return nt;const Ft=[...nt.intermediaries];return ae==="coefficient"?Ft[le]={...Ft[le],coefficient:Number($e)||1}:Ft[le]={...Ft[le],label:String($e)},{...nt,intermediaries:Ft}}))},on=X=>{h(le=>le.map(ae=>{if(ae.id!==X)return ae;const $e=ae.type==="b2c"?0:ae.type==="oem"?1:2;return ae.intermediaries.length>=$e?ae:{...ae,intermediaries:[...ae.intermediaries,{label:"Intermdiaire",coefficient:1.3}]}}))},Yr=(X,le)=>{h(ae=>ae.map($e=>$e.id!==X||$e.intermediaries.length<=0?$e:{...$e,intermediaries:$e.intermediaries.filter((_t,nt)=>nt!==le)}))},Sn=X=>X.toLocaleString("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2}),ll=X=>{const le=a(X.id,X.default_volume||500);if(le<=0)return null;if(o==="from_public"){const ae=de(X),$e=Me(ae);return $e?($e.ourB2BPrice-le)/le*100:null}else{const ae=de(X),$e=Me(ae),_t=Re(),nt=_t[X.id]!==void 0?_t[X.id]:($e==null?void 0:$e.ourB2BPrice)||0;return nt<=0?null:(nt-le)/le*100}},Hs=X=>X<0?"text-destructive font-semibold":"text-muted-foreground",ka=X=>{const le=a(X.id,X.default_volume||500),ae=M.has(X.id),$e=be(),_t=Re(),nt=We(),Ft=ge();if(o==="from_public"){const Ar=de(X),Pt=Me(Ar),Or=$e[X.id]!==void 0;return s.jsxs(_e,{className:ae?"bg-primary/5":"",children:[s.jsx(W,{className:"w-10",children:s.jsx(za,{checked:ae,onCheckedChange:()=>ze(X.id)})}),s.jsx(W,{className:"font-medium",children:X.name}),s.jsx(W,{className:"text-right font-mono text-sm",children:le>0?`${Sn(le)} `:""}),s.jsx(W,{className:"text-right font-mono text-sm font-semibold text-primary",children:Pt?`${Sn(Pt.ourB2BPrice)} `:""}),te==null?void 0:te.intermediaries.map((or,ln)=>{const Ie=Pt==null?void 0:Pt.chain[ln];return s.jsx(W,{className:"text-right font-mono text-sm",children:Ie?s.jsxs("span",{className:"text-muted-foreground",children:[Sn(Ie.buyPrice),"  ",s.jsxs("span",{className:"text-foreground",children:[Sn(Ie.sellPrice)," "]}),s.jsxs("span",{className:"text-xs ml-1 opacity-60",children:["(",Ie.coef,")"]})]}):""},ln)}),s.jsx(W,{className:"text-right font-mono text-sm",children:Pt?`${Sn(Pt.prixPublicHT)} `:""}),s.jsx(W,{className:"w-36",children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(xe,{type:"number",step:"0.01",className:"h-8 text-sm font-mono w-24 text-right border-primary/30 bg-primary/5",value:Ar||"",onChange:or=>{const ln=parseFloat(or.target.value);ke(X.id,isNaN(ln)?0:ln)},placeholder:"0.00"}),s.jsx("span",{className:"text-xs text-muted-foreground",children:""})]})}),s.jsx(W,{className:`text-right font-mono text-sm ${(()=>{if(!Pt||le<=0)return"text-muted-foreground";const or=(Pt.ourB2BPrice-le)/le*100;return Hs(or)})()}`,children:Pt&&le>0?`${Sn((Pt.ourB2BPrice-le)/le*100)}%`:""}),s.jsx(W,{className:"w-10",children:Or&&s.jsx(ne,{variant:"ghost",size:"icon",className:"h-7 w-7 text-primary",onClick:()=>Ge(X.id,$e[X.id]),title:"Enregistrer",children:s.jsx(Oo,{className:"h-3.5 w-3.5"})})})]},X.id)}else{const Ar=de(X),Pt=nt[X.id]!==void 0?nt[X.id]:Ar||0,Or=Me(Ar),or=_t[X.id]!==void 0?_t[X.id]:(Or==null?void 0:Or.ourB2BPrice)||0,ln=Ft[X.id],Ie=Ze(or,Pt,ln),lr=_t[X.id]!==void 0||nt[X.id]!==void 0||Ft[X.id]!==void 0;return s.jsxs(_e,{className:ae?"bg-primary/5":"",children:[s.jsx(W,{className:"w-10",children:s.jsx(za,{checked:ae,onCheckedChange:()=>ze(X.id)})}),s.jsx(W,{className:"font-medium",children:X.name}),s.jsx(W,{className:"text-right font-mono text-sm",children:le>0?`${Sn(le)} `:""}),s.jsx(W,{className:"w-36",children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(xe,{type:"number",step:"0.01",className:"h-8 text-sm font-mono w-24 text-right border-primary/30 bg-primary/5",value:or||"",onChange:Zn=>{const Ei=parseFloat(Zn.target.value);Xe(X.id,isNaN(Ei)?0:Ei)},placeholder:"0.00"}),s.jsx("span",{className:"text-xs text-muted-foreground",children:""})]})}),te==null?void 0:te.intermediaries.map((Zn,Ei)=>{const J0=Ie==null?void 0:Ie.chain[Ei],$8=(Ie==null?void 0:Ie.coefs[Ei])||1;return s.jsx(W,{className:"font-mono text-sm",children:J0?s.jsxs("div",{className:"flex flex-col items-end gap-0.5",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"text-xs text-muted-foreground",children:""}),s.jsx(xe,{type:"number",step:"0.01",min:"1.01",className:"h-7 text-xs font-mono w-16 text-right",value:Number($8.toFixed(4)),onChange:I8=>{const vk=parseFloat(I8.target.value);!isNaN(vk)&&Ie&&ft(X.id,Ei,vk,Ie.totalCoef)}})]}),s.jsxs("span",{className:"text-[10px] text-muted-foreground",children:[Sn(J0.buyPrice),"  ",Sn(J0.sellPrice)," "]})]}):""},Ei)}),s.jsx(W,{className:"text-right font-mono text-sm",children:Ie?`${Sn(Ie.prixPublicHT)} `:""}),s.jsx(W,{className:"w-36",children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(xe,{type:"number",step:"0.01",className:"h-8 text-sm font-mono w-24 text-right border-primary/30 bg-primary/5",value:Pt||"",onChange:Zn=>{const Ei=parseFloat(Zn.target.value);F(X.id,isNaN(Ei)?0:Ei)},placeholder:"0.00"}),s.jsx("span",{className:"text-xs text-muted-foreground",children:""})]})}),s.jsx(W,{className:"text-right font-mono text-sm text-muted-foreground",children:Ie?`${Ie.totalCoef.toFixed(2)}`:""}),s.jsx(W,{className:`text-right font-mono text-sm ${(()=>{if(!Ie||le<=0)return"text-muted-foreground";const Zn=(or-le)/le*100;return Hs(Zn)})()}`,children:Ie&&le>0?`${Sn((or-le)/le*100)}%`:""}),s.jsx(W,{className:"w-10",children:lr&&Pt>0&&s.jsx(ne,{variant:"ghost",size:"icon",className:"h-7 w-7 text-primary",onClick:()=>Ge(X.id,Pt),title:"Enregistrer",children:s.jsx(Oo,{className:"h-3.5 w-3.5"})})})]},X.id)}},mf=()=>{I(X=>X==="none"?"asc":X==="asc"?"desc":"none")},rt=X=>T==="none"?X:[...X].sort((le,ae)=>{const $e=ll(le)??-1/0,_t=ll(ae)??-1/0;return T==="asc"?$e-_t:_t-$e}),Ot=(X,le)=>{const ae=X.length>0&&X.every(nt=>M.has(nt.id)),$e=X.some(nt=>M.has(nt.id)),_t=rt(X);return s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Kt,{children:[s.jsx(Gt,{children:s.jsxs(_e,{children:[s.jsx(ce,{className:"w-10",children:s.jsx(za,{checked:ae,onCheckedChange:()=>it(le),className:$e&&!ae?"opacity-50":""})}),s.jsx(ce,{children:"Produit"}),s.jsx(ce,{className:"text-right",children:"Cot revient"}),o==="from_public"?s.jsxs(s.Fragment,{children:[s.jsxs(ce,{className:"text-right",children:["Notre prix HT ",s.jsx("span",{className:"text-xs opacity-60",children:"(calcul)"})]}),te==null?void 0:te.intermediaries.map((nt,Ft)=>s.jsx(ce,{className:"text-right",children:nt.label},Ft)),s.jsx(ce,{className:"text-right",children:"Prix Public HT"}),s.jsx(ce,{className:"text-right",children:s.jsxs("span",{className:"flex items-center justify-end gap-1",children:[s.jsx(Fc,{className:"h-3 w-3 text-primary"}),"Prix Public TTC"]})})]}):s.jsxs(s.Fragment,{children:[s.jsx(ce,{className:"text-right",children:s.jsxs("span",{className:"flex items-center justify-end gap-1",children:[s.jsx(Fc,{className:"h-3 w-3 text-primary"}),"Notre prix HT"]})}),te==null?void 0:te.intermediaries.map((nt,Ft)=>s.jsxs(ce,{className:"text-right",children:[nt.label," ",s.jsx("span",{className:"text-xs opacity-60",children:"(coef)"})]},Ft)),s.jsx(ce,{className:"text-right",children:"Prix Public HT"}),s.jsx(ce,{className:"text-right",children:s.jsxs("span",{className:"flex items-center justify-end gap-1",children:[s.jsx(Fc,{className:"h-3 w-3 text-primary"}),"Prix Public TTC"]})}),s.jsx(ce,{className:"text-right",children:"Coef total"})]}),s.jsx(ce,{className:"text-right",children:s.jsxs("button",{className:"inline-flex items-center gap-1 hover:text-primary transition-colors cursor-pointer",onClick:mf,children:["Notre marge",T==="none"&&s.jsx(YI,{className:"h-3 w-3 opacity-40"}),T==="asc"&&s.jsx(XI,{className:"h-3 w-3 text-primary"}),T==="desc"&&s.jsx(Fc,{className:"h-3 w-3 text-primary"})]})}),s.jsx(ce,{className:"w-10"})]})}),s.jsx(Yt,{children:_t.map(ka)})]})})},Zt=()=>{const X=be(),le=Re(),ae=We(),$e=ge();return o==="from_public"?Object.keys(X).length>0:Object.keys(le).length>0||Object.keys(ae).length>0||Object.keys($e).length>0},Cn=async()=>{if(o==="from_public"){const X=be(),le=Object.entries(X).map(([ae,$e])=>i(ae,{price_ttc:$e}));await Promise.all(le),Ee.success(`${Object.keys(X).length} prix mis  jour pour "${te==null?void 0:te.name}"`),k(ae=>({...ae,[m]:{}}))}else{const X=Re(),le=We(),ae=ge(),$e=new Set([...Object.keys(X),...Object.keys(le),...Object.keys(ae)]),_t=Array.from($e).map(nt=>{var Ar;const Ft=le[nt]!==void 0?le[nt]:((Ar=e.find(Pt=>Pt.id===nt))==null?void 0:Ar.price_ttc)||0;return Ft>0?i(nt,{price_ttc:Ft}):Promise.resolve()});await Promise.all(_t),Ee.success(`${$e.size} prix mis  jour pour "${te==null?void 0:te.name}"`),E(nt=>({...nt,[m]:{}})),P(nt=>({...nt,[m]:{}}))}await oe()};w.useMemo(()=>{let X=0;for(const le of Object.keys(C))X+=Object.keys(C[le]||{}).length;for(const le of Object.keys(N))X+=Object.keys(N[le]||{}).length;for(const le of Object.keys(O))X+=Object.keys(O[le]||{}).length;return X},[C,N,O]);const Dn=X=>{const le=Object.keys(C[X]||{}).length,ae=Object.keys(N[X]||{}).length,$e=Object.keys(O[X]||{}).length;return le+ae+$e};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Pricing"}),s.jsx("p",{className:"text-muted-foreground",children:"Stratgie tarifaire, chane de distribution et marges par produit"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(ne,{onClick:oe,disabled:se,variant:"default",size:"sm",children:[se?s.jsx(Ba,{className:"h-4 w-4 mr-1 animate-spin"}):s.jsx(yx,{className:"h-4 w-4 mr-1"}),"Sauvegarder Config"]}),M.size>0&&s.jsxs(mr,{open:Z,onOpenChange:J,children:[s.jsx(Cd,{asChild:!0,children:s.jsxs(ne,{variant:"outline",size:"sm",children:[s.jsx(Fj,{className:"h-4 w-4 mr-1"}),"Appliquer un prix (",M.size,")"]})}),s.jsxs(ar,{children:[s.jsx(ir,{children:s.jsxs(sr,{children:["Appliquer un prix  ",M.size," produit(s)"]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Produits slectionns :",s.jsx("ul",{className:"mt-1 list-disc pl-4",children:Array.from(M).map(X=>{const le=e.find(ae=>ae.id===X);return le?s.jsx("li",{children:le.name},X):null})})]}),s.jsxs("div",{children:[s.jsx(Ne,{children:o==="from_public"?"Prix Public TTC ()":"Notre Prix de Vente HT ()"}),s.jsx(xe,{type:"number",step:"0.01",value:B,onChange:X=>z(X.target.value),placeholder:"Ex: 299.00",className:"font-mono"})]}),s.jsxs(ne,{onClick:yt,className:"w-full",children:["Appliquer  ",M.size," produit(s)"]})]})]})]})]})]}),s.jsx(St,{children:s.jsxs(er,{className:"pb-3",children:[s.jsxs(tr,{className:"text-lg flex items-center gap-2",children:[s.jsx(Fc,{className:"h-4 w-4 text-primary"}),"Mode de tarification  Prix fixs aux deux extrmits"]}),s.jsx(_s,{children:"Fixez notre prix HT + le prix client TTC  les coefficients intermdiaires sont calculs et lis"})]})}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[s.jsxs(St,{children:[s.jsx(er,{className:"pb-3",children:s.jsxs(tr,{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(Wu,{className:"h-4 w-4"}),"Coef. Distributeur"]})}),s.jsx(Rt,{children:s.jsx(xe,{type:"number",step:"0.01",value:l,onChange:X=>c(Number(X.target.value)||1),onBlur:K,className:"font-mono"})})]}),s.jsxs(St,{children:[s.jsx(er,{className:"pb-3",children:s.jsxs(tr,{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(Wu,{className:"h-4 w-4"}),"Coef. Shop"]})}),s.jsx(Rt,{children:s.jsx(xe,{type:"number",step:"0.01",value:u,onChange:X=>d(Number(X.target.value)||1),onBlur:K,className:"font-mono"})})]}),s.jsxs(St,{children:[s.jsx(er,{className:"pb-3",children:s.jsxs(tr,{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(oC,{className:"h-4 w-4"}),"TVA"]})}),s.jsxs(Rt,{children:[s.jsxs("div",{className:"text-lg font-mono font-semibold",children:[(te==null?void 0:te.tvaRate)??20," %"]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Dfini dans la rgle active"})]})]}),s.jsxs(St,{children:[s.jsx(er,{className:"pb-3",children:s.jsx(tr,{className:"text-sm font-medium",children:"Chane active"})}),s.jsx(Rt,{children:s.jsx("div",{className:"text-xs text-muted-foreground",children:o==="from_public"?`Client final  ${[...(te==null?void 0:te.intermediaries)||[]].reverse().map(X=>X.label).join("  ")}  Nous`:`Nous  ${te==null?void 0:te.intermediaries.map(X=>X.label).join("  ")}  Client final`})})]})]}),s.jsxs(St,{children:[s.jsx(er,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(tr,{className:"text-lg",children:"Rgles de vente"}),s.jsx(_s,{children:"Configurez les canaux de distribution et leurs intermdiaires. Chaque rgle a ses propres prix par catgorie."})]}),s.jsxs(mr,{open:v,onOpenChange:x,children:[s.jsx(Cd,{asChild:!0,children:s.jsxs(ne,{size:"sm",variant:"outline",children:[s.jsx(qt,{className:"h-4 w-4 mr-1"}),"Nouvelle rgle"]})}),s.jsxs(ar,{children:[s.jsx(ir,{children:s.jsx(sr,{children:"Nouvelle rgle de vente"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Ne,{children:"Nom"}),s.jsx(xe,{value:b,onChange:X=>_(X.target.value),placeholder:"Ex: B2B Europe"})]}),s.jsxs("div",{children:[s.jsx(Ne,{children:"Type"}),s.jsxs(lt,{value:j,onValueChange:X=>S(X),children:[s.jsx(st,{children:s.jsx(ct,{})}),s.jsxs(ot,{children:[s.jsx(De,{value:"b2b",children:"B2B (max 2 intermdiaires)"}),s.jsx(De,{value:"oem",children:"OEM (max 1 intermdiaire)"}),s.jsx(De,{value:"b2c",children:"B2C (vente directe)"})]})]})]}),s.jsx(ne,{onClick:Dt,className:"w-full",children:"Crer"})]})]})]})]})}),s.jsxs(Rt,{className:"space-y-4",children:[s.jsx("div",{className:"flex flex-wrap gap-2",children:f.map(X=>{const le=Dn(X.id);return s.jsxs(Pe,{variant:X.id===m?"default":"outline",className:"cursor-pointer text-sm py-1.5 px-3 relative",onClick:()=>y(X.id),children:[X.name,s.jsxs("span",{className:"ml-1 text-xs opacity-60",children:["(",X.type.toUpperCase(),")"]}),le>0&&s.jsx("span",{className:"ml-1.5 inline-flex items-center justify-center h-4 w-4 rounded-full bg-primary text-primary-foreground text-[10px] font-bold",children:le})]},X.id)})}),te&&s.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(xe,{value:te.name,onChange:X=>h(le=>le.map(ae=>ae.id===te.id?{...ae,name:X.target.value}:ae)),className:"h-8 text-sm font-semibold w-48"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Pe,{variant:"secondary",children:te.type==="b2c"?"Vente directe":te.type==="oem"?"Max 1 intermdiaire":"Max 2 intermdiaires"}),f.length>1&&s.jsx(ne,{variant:"ghost",size:"icon",className:"h-7 w-7 text-destructive",onClick:()=>Q(te.id),children:s.jsx(nr,{className:"h-3.5 w-3.5"})})]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(Pe,{variant:"outline",className:"bg-primary/5",children:"Nous"}),te.intermediaries.map((X,le)=>s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsxs(Pe,{variant:"outline",children:[X.label," (",X.coefficient,")"]})]},le)),s.jsx("span",{children:""}),s.jsx(Pe,{variant:"outline",className:"bg-primary/5",children:"Client final"})]}),s.jsx(Yl,{}),s.jsx("div",{className:"flex items-end gap-3 mb-2",children:s.jsxs("div",{className:"w-40",children:[s.jsx(Ne,{className:"text-xs",children:"Taux de TVA"}),s.jsxs(lt,{value:String(te.tvaRate),onValueChange:X=>h(le=>le.map(ae=>ae.id===te.id?{...ae,tvaRate:Number(X)}:ae)),children:[s.jsx(st,{className:"h-8 text-sm font-mono",children:s.jsx(ct,{})}),s.jsxs(ot,{children:[s.jsx(De,{value:"20",children:"20 %"}),s.jsx(De,{value:"0",children:"0 % (exonr)"})]})]})]})}),s.jsxs("div",{className:"space-y-3",children:[te.intermediaries.map((X,le)=>s.jsxs("div",{className:"flex items-end gap-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs(Ne,{className:"text-xs",children:["Nom intermdiaire ",le+1]}),s.jsx(xe,{value:X.label,onChange:ae=>ht(te.id,le,"label",ae.target.value),className:"h-8 text-sm"})]}),s.jsxs("div",{className:"w-28",children:[s.jsx(Ne,{className:"text-xs",children:"Coefficient"}),s.jsx(xe,{type:"number",step:"0.01",value:X.coefficient,onChange:ae=>ht(te.id,le,"coefficient",ae.target.value),className:"h-8 text-sm font-mono"})]}),te.intermediaries.length>1&&s.jsx(ne,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive",onClick:()=>Yr(te.id,le),children:s.jsx(nr,{className:"h-3.5 w-3.5"})})]},le)),te.intermediaries.length<(te.type==="b2c"?0:te.type==="oem"?1:2)&&s.jsxs(ne,{variant:"outline",size:"sm",onClick:()=>on(te.id),children:[s.jsx(qt,{className:"h-3.5 w-3.5 mr-1"}),"Ajouter intermdiaire"]})]})]})]})]}),s.jsx(E8,{products:e,productCategories:t,salesRules:f,calculateProductCost:a,computeChainFromPublicTTC:Me,getEffectivePrice:de,editedOurPrices:Re(),pricingMode:o}),s.jsxs(St,{children:[s.jsx(er,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(tr,{className:"text-lg flex items-center gap-2",children:[s.jsx(rc,{className:"h-5 w-5"}),"Dtail des prix par catgorie  ",s.jsx("span",{className:"text-primary",children:te==null?void 0:te.name})]}),s.jsx(_s,{children:o==="from_public"?`Fixez le prix public TTC  notre prix de vente est calcul via la chane "${te==null?void 0:te.name}"`:`Fixez notre prix HT et le prix client TTC  les coefficients intermdiaires sont rpartis via "${te==null?void 0:te.name}"`})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[Zt()&&s.jsxs(ne,{onClick:Cn,size:"sm",variant:"outline",children:[s.jsx(Oo,{className:"h-4 w-4 mr-1"}),"Enregistrer les prix (",te==null?void 0:te.name,")"]}),M.size>0&&s.jsxs("div",{className:"text-sm text-muted-foreground",children:[M.size," produit(s) slectionn(s)"]})]})]})}),s.jsx(Rt,{children:s.jsxs("div",{className:"space-y-4",children:[t.map(X=>{const le=ie.grouped[X.id]||[];if(le.length===0)return null;const ae=g.has(X.id);return s.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsxs("button",{className:"flex-1 flex items-center gap-3 px-4 py-3 hover:bg-muted/50 transition-colors text-left",onClick:()=>ve(X.id),children:[ae?s.jsx(Uh,{className:"h-4 w-4"}):s.jsx(Vh,{className:"h-4 w-4"}),s.jsx("div",{className:"h-3 w-3 rounded-full",style:{backgroundColor:X.color}}),s.jsx("span",{className:"font-semibold",children:X.name}),s.jsxs(Pe,{variant:"secondary",className:"ml-auto",children:[le.length," produit",le.length>1?"s":""]})]}),s.jsxs("div",{className:"flex items-center gap-1 pr-3",children:[s.jsx(ne,{variant:"ghost",size:"sm",className:"h-7 text-xs",onClick:()=>{fe({catId:X.id,catName:X.name,field:"our_price"}),Y("")},children:"Appliquer notre prix"}),s.jsx(ne,{variant:"ghost",size:"sm",className:"h-7 text-xs",onClick:()=>{fe({catId:X.id,catName:X.name,field:"public_ttc"}),Y("")},children:"Appliquer prix public"})]})]}),ae&&Ot(le,X.id)]},X.id)}),ie.uncategorized.length>0&&s.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[s.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-muted/50 transition-colors text-left",onClick:()=>ve("__uncategorized"),children:[g.has("__uncategorized")?s.jsx(Uh,{className:"h-4 w-4"}):s.jsx(Vh,{className:"h-4 w-4"}),s.jsx("span",{className:"font-semibold text-muted-foreground",children:"Sans catgorie"}),s.jsx(Pe,{variant:"secondary",className:"ml-auto",children:ie.uncategorized.length})]}),g.has("__uncategorized")&&Ot(ie.uncategorized,"__uncategorized")]}),e.length===0&&s.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[s.jsx(rc,{className:"h-12 w-12 mx-auto mb-4 opacity-30"}),s.jsx("p",{children:"Aucun produit configur. Ajoutez des produits dans le module Production et BE."})]})]})})]}),s.jsx(Ly,{open:!!V,onOpenChange:X=>{X||Q(null)},children:s.jsxs(zm,{children:[s.jsxs(Um,{children:[s.jsx(Wm,{children:"Supprimer cette rgle de vente ?"}),s.jsxs(Hm,{children:["La rgle  ",(pn=f.find(X=>X.id===V))==null?void 0:pn.name,"  et tous ses prix associs seront dfinitivement supprims. Cette action est irrversible."]})]}),s.jsxs(Vm,{children:[s.jsx(Km,{children:"Annuler"}),s.jsx(qm,{onClick:xt,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Supprimer"})]})]})}),s.jsx(mr,{open:!!H,onOpenChange:X=>{X||fe(null)},children:s.jsxs(ar,{children:[s.jsx(ir,{children:s.jsxs(sr,{children:[(H==null?void 0:H.field)==="our_price"?"Appliquer notre prix HT":"Appliquer prix public TTC","  ",H==null?void 0:H.catName]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Ce prix sera appliqu  tous les produits de la catgorie  ",H==null?void 0:H.catName,"  pour la rgle  ",te==null?void 0:te.name," ."]}),s.jsxs("div",{children:[s.jsx(Ne,{children:(H==null?void 0:H.field)==="our_price"?"Notre Prix HT ()":"Prix Public TTC ()"}),s.jsx(xe,{type:"number",step:"0.01",value:L,onChange:X=>Y(X.target.value),placeholder:"Ex: 299.00",className:"font-mono",autoFocus:!0})]}),s.jsx(ne,{onClick:me,className:"w-full",disabled:!L||isNaN(parseFloat(L)),children:"Appliquer"})]})]})})]})}function ROe(){return s.jsx(is,{tabKey:"costflow",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Planning Dveloppement"}),s.jsx("p",{className:"text-muted-foreground",children:"Planification du dveloppement produit et suivi des phases"})]}),s.jsx(P8,{})]})})}function A8(e){const[t,r]=w.useState({}),[n,a]=w.useState(!1);w.useEffect(()=>{(async()=>{try{const{data:l}=await he.from("page_images").select("slot_key, image_url").eq("page_key",e);if(l){const c={};l.forEach(u=>{c[u.slot_key]=u.image_url}),r(c)}}catch{}a(!0)})()},[e]);const i=w.useCallback((o,l)=>{r(c=>({...c,[o]:l}))},[]);return{images:t,loaded:n,setImage:i}}function Dl({pageKey:e,slotKey:t,defaultSrc:r,alt:n,className:a="",overlayClassName:i="",canEdit:o,customUrl:l,onUploaded:c}){const[u,d]=w.useState(!1),f=w.useRef(null),h=l||r,m=async y=>{var p,v;const g=(p=y.target.files)==null?void 0:p[0];if(g){if(!g.type.startsWith("image/")){Lr({title:"Fichier invalide",description:"Veuillez slectionner une image.",variant:"destructive"});return}d(!0);try{const x=g.name.split(".").pop(),b=`${e}/${t}-${Date.now()}.${x}`,{error:_}=await he.storage.from("page-images").upload(b,g,{upsert:!0});if(_)throw _;const{data:{publicUrl:j}}=he.storage.from("page-images").getPublicUrl(b);await he.from("page_images").upsert({page_key:e,slot_key:t,image_url:j,updated_at:new Date().toISOString(),updated_by:(v=(await he.auth.getUser()).data.user)==null?void 0:v.id},{onConflict:"page_key,slot_key"}),c==null||c(j),Lr({title:"Image mise  jour"})}catch(x){console.error("Upload error:",x),Lr({title:"Erreur",description:"Impossible d'uploader l'image.",variant:"destructive"})}finally{d(!1),f.current&&(f.current.value="")}}};return s.jsxs("div",{className:"relative group",children:[s.jsx("img",{src:h,alt:n,className:a}),i&&s.jsx("div",{className:i}),o&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>{var y;return(y=f.current)==null?void 0:y.click()},disabled:u,className:"absolute top-2 right-2 z-20 bg-black/60 hover:bg-black/80 text-white p-2 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer",title:"Changer l'image",children:u?s.jsx(Ba,{className:"h-4 w-4 animate-spin"}):s.jsx(lH,{className:"h-4 w-4"})}),s.jsx("input",{ref:f,type:"file",accept:"image/*",className:"hidden",onChange:m})]})]})}const MOe="/assets/banner-nrc-udh-CghFnth9.jpg",O8="/assets/savoir-faire-DO6sqzLN.jpg",$Oe="/assets/ccd-gold-Cg4R7WZE.jpg",T8="/assets/pulley-wheels-O2SueKz_.jpg",IOe="/assets/composants-hero-CnGsZ9u8.jpg",R8="/assets/novaride-action-BP9cu6ww.jpg",bg="dashboard",DOe=["Jan","Fv","Mar","Avr","Mai","Jun","Jul","Ao","Sep","Oct","Nov","Dc"],LOe=[{slotKey:"strip-vision",label:"Vision",defaultImg:O8},{slotKey:"strip-transmission",label:"Transmission",defaultImg:T8},{slotKey:"strip-composants",label:"Composants",defaultImg:IOe},{slotKey:"strip-performance",label:"Performance",defaultImg:R8}];function BOe(){const{products:e,references:t,productCategories:r,suppliers:n,bom:a,calculateProductCost:i}=fk(),{rows:o,blocks:l,colors:c}=d8(),{customers:u,orders:d}=Dz(),{salesRules:f,pricingMode:h,activeRuleId:m,editedOurPrices:y,getEffectivePrice:g,computeChainFromPublicTTC:p,loaded:v}=PU(),{images:x,setImage:b}=A8(bg),{getTabPermission:_}=Xn(),j=_("tableau-de-bord")==="write",S=e.length,C=t.length,k=n.length,N=r.length,A=u.length,O=d.filter(M=>["draft","confirmed","in_progress"].includes(M.status)).length;a.length;const E=new Date().getMonth(),R=E+1,P=l.filter(M=>M.start_month<=R&&M.start_month+M.duration-1>=R),T=w.useMemo(()=>{const M=[];for(let D=0;D<6;D++){const B=(E+D)%12;M.push({label:DOe[B],index:R+D})}return M},[E,R]),I=w.useMemo(()=>{const M={};return a.forEach(D=>{M[D.product_id]=(M[D.product_id]||0)+1}),Object.entries(M).sort(([,D],[,B])=>B-D).slice(0,5).map(([D,B])=>({product:e.find(z=>z.id===D),refCount:B})).filter(D=>D.product)},[a,e]);return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"relative rounded-xl overflow-hidden h-48 md:h-56",children:[s.jsx(Dl,{pageKey:bg,slotKey:"hero",defaultSrc:MOe,alt:"Novaride Engineering",className:"w-full h-full object-cover",canEdit:j,customUrl:x.hero,onUploaded:M=>b("hero",M)}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 via-black/50 to-transparent"}),s.jsx("div",{className:"absolute inset-0 flex items-center px-8",children:s.jsxs("div",{children:[s.jsx(TC,{variant:"full",color:"light",className:"mb-2"}),s.jsx("p",{className:"text-white/80 text-lg font-light tracking-wide",children:"Tableau de bord oprationnel"}),s.jsx("p",{className:"text-white/50 text-sm mt-1",children:"We engage, we move"})]})})]}),s.jsxs("div",{className:"grid gap-4 grid-cols-2 md:grid-cols-4 lg:grid-cols-7",children:[s.jsx(ml,{icon:rc,label:"Produits",value:S,color:"text-primary"}),s.jsx(ml,{icon:aD,label:"Rfrences",value:C,color:"text-blue-500"}),s.jsx(ml,{icon:mH,label:"Fournisseurs",value:k,color:"text-amber-500"}),s.jsx(ml,{icon:eD,label:"Catgories",value:N,color:"text-violet-500"}),s.jsx(ml,{icon:xi,label:"Clients",value:A,color:"text-emerald-500"}),s.jsx(ml,{icon:Fo,label:"Commandes actives",value:O,color:"text-rose-500"}),s.jsx(ml,{icon:Bj,label:"Tches en cours",value:P.length,color:"text-cyan-500"})]}),s.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[s.jsxs(St,{className:"lg:col-span-2",children:[s.jsx(er,{className:"pb-3",children:s.jsxs(tr,{className:"text-lg flex items-center gap-2",children:[s.jsx(Bj,{className:"h-5 w-5"}),"Planning dveloppement  6 prochains mois"]})}),s.jsx(Rt,{children:o.length===0?s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Aucune ligne de planning configure"}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left py-2 pr-4 font-medium text-muted-foreground w-40",children:"Produit"}),T.map(M=>s.jsx("th",{className:"text-center py-2 px-1 font-medium text-muted-foreground min-w-[60px]",children:M.label},M.index))]})}),s.jsx("tbody",{children:o.slice(0,8).map(M=>{const D=l.filter(B=>B.row_id===M.id);return s.jsxs("tr",{className:"border-t border-border/50",children:[s.jsx("td",{className:"py-2 pr-4 font-medium truncate max-w-[160px]",children:M.label}),T.map(B=>{const z=D.find(Z=>Z.start_month<=B.index&&Z.start_month+Z.duration-1>=B.index);if(z){const Z=c.find(se=>se.id===z.color_id),J=z.start_month===B.index;return s.jsx("td",{className:"py-2 px-0.5",children:s.jsx("div",{className:"h-6 rounded-sm flex items-center justify-center text-[10px] font-medium text-white truncate px-1",style:{backgroundColor:(Z==null?void 0:Z.color)||"#6366f1"},title:z.label,children:J?z.label:""})},B.index)}return s.jsx("td",{className:"py-2 px-0.5",children:s.jsx("div",{className:"h-6 rounded-sm bg-muted/30"})},B.index)})]},M.id)})})]})})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(St,{className:"overflow-hidden",children:s.jsxs("div",{className:"relative h-36",children:[s.jsx(Dl,{pageKey:bg,slotKey:"side-photo",defaultSrc:$Oe,alt:"CCD EVO",className:"w-full h-full object-cover object-center",canEdit:j,customUrl:x["side-photo"],onUploaded:M=>b("side-photo",M)}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),s.jsxs("div",{className:"absolute bottom-3 left-4",children:[s.jsx("p",{className:"text-white text-sm font-semibold",children:"Engineering Excellence"}),s.jsx("p",{className:"text-white/60 text-xs",children:"Conception franaise premium"})]})]})}),s.jsxs(St,{children:[s.jsx(er,{className:"pb-3",children:s.jsx(tr,{className:"text-sm font-medium",children:"Top produits (nomenclature)"})}),s.jsx(Rt,{className:"space-y-2",children:I.length===0?s.jsx("p",{className:"text-sm text-muted-foreground",children:"Aucune nomenclature"}):I.map(({product:M,refCount:D})=>{const B=r.find(z=>z.id===M.category_id);return s.jsxs("div",{className:"flex items-center justify-between py-1.5 border-b border-border/30 last:border-0",children:[s.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[B&&s.jsx("div",{className:"h-2.5 w-2.5 rounded-full flex-shrink-0",style:{backgroundColor:B.color}}),s.jsx("span",{className:"text-sm truncate",children:M.name})]}),s.jsxs(Pe,{variant:"secondary",className:"text-xs ml-2 flex-shrink-0",children:[D," rf."]})]},M.id)})})]}),s.jsxs(St,{children:[s.jsx(er,{className:"pb-3",children:s.jsx(tr,{className:"text-sm font-medium",children:"Catgories produit"})}),s.jsx(Rt,{children:s.jsx("div",{className:"flex flex-wrap gap-2",children:r.map(M=>{const D=e.filter(B=>B.category_id===M.id).length;return s.jsxs(Pe,{variant:"outline",className:"gap-1.5",children:[s.jsx("div",{className:"h-2 w-2 rounded-full",style:{backgroundColor:M.color}}),M.name,s.jsxs("span",{className:"text-muted-foreground",children:["(",D,")"]})]},M.id)})})})]})]})]}),v&&f.length>0&&e.length>0&&s.jsx(E8,{products:e,productCategories:r,salesRules:f,calculateProductCost:i,computeChainFromPublicTTC:p,getEffectivePrice:g,editedOurPrices:y[m]||{},pricingMode:h}),s.jsx("div",{className:"grid grid-cols-4 gap-4 h-32 rounded-xl overflow-hidden",children:LOe.map(M=>s.jsxs("div",{className:"relative",children:[s.jsx(Dl,{pageKey:bg,slotKey:M.slotKey,defaultSrc:M.defaultImg,alt:M.label,className:"w-full h-full object-cover rounded-lg",canEdit:j,customUrl:x[M.slotKey],onUploaded:D=>b(M.slotKey,D)}),s.jsx("div",{className:"absolute inset-0 bg-black/30 rounded-lg"}),s.jsx("div",{className:"absolute bottom-2 left-3 text-white text-xs font-medium",children:M.label})]},M.slotKey))})]})}function ml({icon:e,label:t,value:r,color:n}){return s.jsx(St,{children:s.jsxs(Rt,{className:"p-4 flex flex-col items-center text-center gap-1.5",children:[s.jsx(e,{className:`h-5 w-5 ${n}`}),s.jsx("span",{className:"text-2xl font-bold font-mono",children:r}),s.jsx("span",{className:"text-[11px] text-muted-foreground leading-tight",children:t})]})})}const FOe="/assets/hero-novaride-D3bcYu0V.jpg",M8="/assets/ccd-evo-banner-AhDDT7VY.jpg",zOe="/assets/novaride-engineering-DQtoJdiF.jpg",UOe="/assets/full-bike-ccd-wF5KhlY1.jpg",Hf="accueil",VOe=[{icon:iH,title:"Qualit / Prix",desc:"Optimisation des processus de fabrication pour le meilleur rapport qualit-prix."},{icon:$H,title:"Livraison rapide",desc:"Livraison express  l'internationale."},{icon:RH,title:"Garantie 4 ans",desc:"Notre processus de dveloppement permet de garantir nos produits 4 ans."},{icon:xH,title:"Support client",desc:"Nous sommes l pour vous renseigner et vous aider."}],WOe=[{slotKey:"product-1",name:"CCD EVO",desc:"Chapes de drailleur carbone cramique",defaultImg:M8},{slotKey:"product-2",name:"Pulley Wheels EVO",desc:"Galets de drailleur cramique",defaultImg:T8},{slotKey:"product-3",name:"Savoir-faire",desc:"Conception et fabrication en France",defaultImg:O8}],HOe=[{slotKey:"gallery-1",defaultImg:R8},{slotKey:"gallery-2",defaultImg:UOe},{slotKey:"gallery-3",defaultImg:M8}];function qOe(){const{images:e,setImage:t}=A8(Hf),{getTabPermission:r}=Xn(),n=r("home")==="write";return s.jsxs("div",{className:"space-y-10 -mt-6",children:[s.jsxs("div",{className:"relative rounded-xl overflow-hidden h-[340px]",children:[s.jsx(Dl,{pageKey:Hf,slotKey:"hero",defaultSrc:FOe,alt:"Nova Ride",className:"absolute inset-0 w-full h-full object-cover",canEdit:n,customUrl:e.hero,onUploaded:a=>t("hero",a)}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 via-black/50 to-transparent"}),s.jsxs("div",{className:"relative z-10 flex flex-col justify-center h-full px-8 md:px-12 max-w-2xl",children:[s.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-white mb-3",children:"Nova Ride"}),s.jsx("p",{className:"text-white/90 text-lg mb-1",children:"Composants carbone & cramique pour le cyclisme de performance."}),s.jsx("p",{className:"text-white/70 text-sm mb-5",children:"Conue pour la performance, pense pour sublimer votre configuration."}),s.jsxs("a",{href:"https://novatoride.com",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 bg-white text-black font-semibold px-5 py-2.5 rounded-lg hover:bg-white/90 transition w-fit text-sm",children:["Visiter novatoride.com",s.jsx(hH,{className:"h-4 w-4"})]})]})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Nos produits"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-5",children:WOe.map(a=>s.jsxs(St,{className:"overflow-hidden group",children:[s.jsx("div",{className:"h-44 overflow-hidden",children:s.jsx(Dl,{pageKey:Hf,slotKey:a.slotKey,defaultSrc:a.defaultImg,alt:a.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",canEdit:n,customUrl:e[a.slotKey],onUploaded:i=>t(a.slotKey,i)})}),s.jsxs(Rt,{className:"p-4",children:[s.jsx("h3",{className:"font-semibold text-foreground",children:a.name}),s.jsx("p",{className:"text-sm text-muted-foreground",children:a.desc})]})]},a.slotKey))})]}),s.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 items-center",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h2",{className:"text-xl font-semibold",children:" propos de Nova Ride"}),s.jsx("p",{className:"text-muted-foreground text-sm leading-relaxed",children:"Nova Ride conoit et fabrique des composants haute performance pour le cyclisme : chapes de drailleur en carbone avec roulements cramique (CCD), galets de drailleur (Pulley Wheels) et botiers de pdalier (CBB)."}),s.jsx("p",{className:"text-muted-foreground text-sm leading-relaxed",children:"Base en France et soutenue par la Rgion Auvergne-Rhne-Alpes, la marque allie ingnierie de prcision et design pour offrir des gains de performance mesurables aux cyclistes exigeants."}),s.jsx("p",{className:"text-muted-foreground text-sm leading-relaxed",children:"Nos produits quipent des champions du monde, dont Antonio Benito, double champion du monde de Triathlon Longue Distance."})]}),s.jsx("div",{className:"rounded-xl overflow-hidden h-60",children:s.jsx(Dl,{pageKey:Hf,slotKey:"about",defaultSrc:zOe,alt:"Engineering Nova Ride",className:"w-full h-full object-cover",canEdit:n,customUrl:e.about,onUploaded:a=>t("about",a)})})]}),s.jsx("section",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:HOe.map(a=>s.jsx("div",{className:"rounded-lg overflow-hidden h-40",children:s.jsx(Dl,{pageKey:Hf,slotKey:a.slotKey,defaultSrc:a.defaultImg,alt:`Nova Ride ${a.slotKey}`,className:"w-full h-full object-cover hover:scale-105 transition-transform duration-300",canEdit:n,customUrl:e[a.slotKey],onUploaded:i=>t(a.slotKey,i)})},a.slotKey))}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Pourquoi Nova Ride"}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:VOe.map(a=>{const i=a.icon;return s.jsxs(St,{className:"text-center p-5",children:[s.jsx(i,{className:"h-8 w-8 mx-auto mb-3 text-primary"}),s.jsx("h3",{className:"font-semibold text-sm mb-1",children:a.title}),s.jsx("p",{className:"text-xs text-muted-foreground",children:a.desc})]},a.title)})})]})]})}const KOe=()=>{const e=gc();return w.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),s.jsx("div",{className:"flex min-h-screen items-center justify-center bg-muted",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),s.jsx("p",{className:"mb-4 text-xl text-muted-foreground",children:"Oops! Page not found"}),s.jsx("a",{href:"/",className:"text-primary underline hover:text-primary/90",children:"Return to Home"})]})})},GOe=new lK,YOe=()=>s.jsx(uK,{client:GOe,children:s.jsx(D7,{children:s.jsx(RZ,{children:s.jsxs(IZ,{children:[s.jsx(xq,{}),s.jsx(Zq,{}),s.jsx(sG,{children:s.jsxs(QK,{children:[s.jsx(Tr,{path:"/auth",element:s.jsx(REe,{})}),s.jsx(Tr,{path:"/accueil",element:s.jsx(yn,{tabKey:"home",children:s.jsx(vn,{children:s.jsx(qOe,{})})})}),s.jsx(Tr,{path:"/",element:s.jsx(yn,{tabKey:"tableau-de-bord",children:s.jsx(vn,{children:s.jsx(BOe,{})})})}),s.jsx(Tr,{path:"/product",element:s.jsx(yn,{tabKey:"product-plan",children:s.jsx(vn,{children:s.jsx(MNe,{})})})}),s.jsx(Tr,{path:"/organisation",element:s.jsx(yn,{tabKey:"organisation",children:s.jsx(vn,{children:s.jsx(nke,{})})})}),s.jsx(Tr,{path:"/charges",element:s.jsx(yn,{tabKey:"charges",children:s.jsx(vn,{children:s.jsx(oke,{})})})}),s.jsx(Tr,{path:"/crm",element:s.jsx(yn,{tabKey:"crm",children:s.jsx(vn,{children:s.jsx(tPe,{})})})}),s.jsx(Tr,{path:"/previsionnel",element:s.jsx(yn,{tabKey:"previsionnel",children:s.jsx(vn,{children:s.jsx(fPe,{})})})}),s.jsx(Tr,{path:"/funding",element:s.jsx(yn,{tabKey:"funding",children:s.jsx(vn,{children:s.jsx(mPe,{})})})}),s.jsx(Tr,{path:"/scenarios",element:s.jsx(yn,{tabKey:"scenarios",children:s.jsx(vn,{children:s.jsx(gPe,{})})})}),s.jsx(Tr,{path:"/valuation",element:s.jsx(yn,{tabKey:"valuation",children:s.jsx(vn,{children:s.jsx(EPe,{})})})}),s.jsx(Tr,{path:"/investment-summary",element:s.jsx(yn,{tabKey:"investment-summary",children:s.jsx(vn,{children:s.jsx(MPe,{})})})}),s.jsx(Tr,{path:"/pricing",element:s.jsx(yn,{tabKey:"pricing",children:s.jsx(vn,{children:s.jsx(TOe,{})})})}),s.jsx(Tr,{path:"/home",element:s.jsx(_v,{to:"/",replace:!0})}),s.jsx(Tr,{path:"/tableau-de-bord",element:s.jsx(_v,{to:"/",replace:!0})}),s.jsx(Tr,{path:"/costflow",element:s.jsx(yn,{tabKey:"costflow",children:s.jsx(vn,{children:s.jsx(SOe,{})})})}),s.jsx(Tr,{path:"/planning-dev",element:s.jsx(yn,{tabKey:"planning-dev",children:s.jsx(vn,{children:s.jsx(ROe,{})})})}),s.jsx(Tr,{path:"/timetracking",element:s.jsx(yn,{tabKey:"timetracking",children:s.jsx(vn,{children:s.jsx(EOe,{})})})}),s.jsx(Tr,{path:"/snapshots",element:s.jsx(yn,{tabKey:"snapshots",children:s.jsx(vn,{children:s.jsx(OOe,{})})})}),s.jsx(Tr,{path:"/permissions",element:s.jsx(yn,{children:s.jsx(vn,{children:s.jsx(LEe,{})})})}),s.jsx(Tr,{path:"*",element:s.jsx(KOe,{})})]})})]})})})});vI(document.getElementById("root")).render(s.jsx(YOe,{}));
